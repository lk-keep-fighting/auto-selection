var qZ=Object.defineProperty;var VZ=(ki,Ss,Ii)=>Ss in ki?qZ(ki,Ss,{enumerable:!0,configurable:!0,writable:!0,value:Ii}):ki[Ss]=Ii;var he=(ki,Ss,Ii)=>VZ(ki,typeof Ss!="symbol"?Ss+"":Ss,Ii);var platformBaseUtils=(function(){"use strict";var jP,UP,qP,VP;function ki(e){return e}const Ss=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Ii=new Map(Ss);class Fp extends Error{constructor(r){super(Fp._prepareSuperMessage(r));he(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const p2=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],Bp=new WeakSet,h2=e=>{Bp.add(e);const t=e.toJSON();return Bp.delete(e),t},hb=e=>Ii.get(e)??Error,jp=({from:e,seen:t,to:r,forceEnumerable:n,maxDepth:a,depth:s,useToJSON:o,serialize:i})=>{if(!r)if(Array.isArray(e))r=[];else if(!i&&mb(e)){const u=hb(e.name);r=new u}else r={};if(t.push(e),s>=a)return r;if(o&&typeof e.toJSON=="function"&&!Bp.has(e))return h2(e);const l=u=>jp({from:u,seen:[...t],forceEnumerable:n,maxDepth:a,depth:s,useToJSON:o,serialize:i});for(const[u,c]of Object.entries(e)){if(c&&c instanceof Uint8Array&&c.constructor.name==="Buffer"){r[u]="[object Buffer]";continue}if(c!==null&&typeof c=="object"&&typeof c.pipe=="function"){r[u]="[object Stream]";continue}if(typeof c!="function"){if(!c||typeof c!="object"){try{r[u]=c}catch{}continue}if(!t.includes(e[u])){s++,r[u]=l(e[u]);continue}r[u]="[Circular]"}}for(const{property:u,enumerable:c}of p2)typeof e[u]<"u"&&e[u]!==null&&Object.defineProperty(r,u,{value:mb(e[u])?l(e[u]):e[u],enumerable:n?!0:c,configurable:!0,writable:!0});return r};function m2(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=t;return typeof e=="object"&&e!==null?jp({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function g2(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(e instanceof Error)return e;if(v2(e)){const n=hb(e.name);return jp({from:e,seen:[],to:new n,maxDepth:r,depth:0,serialize:!1})}return new Fp(e)}function mb(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function v2(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var y2=Object.defineProperty,b2=Object.defineProperties,w2=Object.getOwnPropertyDescriptors,gb=Object.getOwnPropertySymbols,_2=Object.prototype.hasOwnProperty,S2=Object.prototype.propertyIsEnumerable,vb=(e,t,r)=>t in e?y2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wc=(e,t)=>{for(var r in t||(t={}))_2.call(t,r)&&vb(e,r,t[r]);if(gb)for(var r of gb(t))S2.call(t,r)&&vb(e,r,t[r]);return e},_c=(e,t)=>b2(e,w2(t)),yb=(e,t,r)=>new Promise((n,a)=>{var s=l=>{try{i(r.next(l))}catch(u){a(u)}},o=l=>{try{i(r.throw(l))}catch(u){a(u)}},i=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);i((r=r.apply(e,t)).next())});function bb(e){let t,r={};function n(){Object.entries(r).length===0&&(t==null||t(),t=void 0)}let a=Math.floor(Math.random()*1e4);function s(){return a++}return{sendMessage(o,i,...l){return yb(this,null,function*(){var u,c,d,p;const b={id:s(),type:o,data:i,timestamp:Date.now()},m=(c=yield(u=e.verifyMessageData)==null?void 0:u.call(e,b))!=null?c:b;(d=e.logger)==null||d.debug(`[messaging] sendMessage {id=${m.id}} ─ᐅ`,m,...l);const h=yield e.sendMessage(m,...l),{res:v,err:y}=h??{err:new Error("No response")};if((p=e.logger)==null||p.debug(`[messaging] sendMessage {id=${m.id}} ᐊ─`,{res:v,err:y}),y!=null)throw g2(y);return v})},onMessage(o,i){var l,u,c;if(t==null&&((l=e.logger)==null||l.debug(`[messaging] "${o}" initialized the message listener for this context`),t=e.addRootListener(d=>{var p,b;if(typeof d.type!="string"||typeof d.timestamp!="number"){if(e.breakError)return;const v=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(d)}`);throw(p=e.logger)==null||p.error(v),v}(b=e==null?void 0:e.logger)==null||b.debug("[messaging] Received message",d);const m=r[d.type];if(m==null)return;const h=m(d);return Promise.resolve(h).then(v=>{var y,T;return(T=(y=e.verifyMessageData)==null?void 0:y.call(e,v))!=null?T:v}).then(v=>{var y;return(y=e==null?void 0:e.logger)==null||y.debug(`[messaging] onMessage {id=${d.id}} ─ᐅ`,{res:v}),{res:v}}).catch(v=>{var y;return(y=e==null?void 0:e.logger)==null||y.debug(`[messaging] onMessage {id=${d.id}} ─ᐅ`,{err:v}),{err:m2(v)}})})),r[o]!=null){const d=Error(`[messaging] In this JS context, only one listener can be setup for ${o}`);throw(u=e.logger)==null||u.error(d),d}return r[o]=i,(c=e.logger)==null||c.log(`[messaging] Added listener for ${o}`),()=>{delete r[o],n()}},removeAllListeners(){Object.keys(r).forEach(o=>{delete r[o]}),n()}}}var wb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function T2(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var Sc={exports:{}},x2=Sc.exports,_b;function C2(){return _b||(_b=1,(function(e,t){(function(r,n){n(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:x2,function(r){var n,a;if(!((a=(n=globalThis.chrome)==null?void 0:n.runtime)!=null&&a.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const s="The message port closed before a response was received.",o=i=>{const l={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(l).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class u extends WeakMap{constructor(E,N=void 0){super(N),this.createItem=E}get(E){return this.has(E)||this.set(E,this.createItem(E)),super.get(E)}}const c=O=>O&&typeof O=="object"&&typeof O.then=="function",d=(O,E)=>(...N)=>{i.runtime.lastError?O.reject(new Error(i.runtime.lastError.message)):E.singleCallbackArg||N.length<=1&&E.singleCallbackArg!==!1?O.resolve(N[0]):O.resolve(N)},p=O=>O==1?"argument":"arguments",b=(O,E)=>function($,...L){if(L.length<E.minArgs)throw new Error(`Expected at least ${E.minArgs} ${p(E.minArgs)} for ${O}(), got ${L.length}`);if(L.length>E.maxArgs)throw new Error(`Expected at most ${E.maxArgs} ${p(E.maxArgs)} for ${O}(), got ${L.length}`);return new Promise((B,F)=>{if(E.fallbackToNoCallback)try{$[O](...L,d({resolve:B,reject:F},E))}catch(R){console.warn(`${O} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,R),$[O](...L),E.fallbackToNoCallback=!1,E.noCallback=!0,B()}else E.noCallback?($[O](...L),B()):$[O](...L,d({resolve:B,reject:F},E))})},m=(O,E,N)=>new Proxy(E,{apply($,L,B){return N.call(L,O,...B)}});let h=Function.call.bind(Object.prototype.hasOwnProperty);const v=(O,E={},N={})=>{let $=Object.create(null),L={has(F,R){return R in O||R in $},get(F,R,H){if(R in $)return $[R];if(!(R in O))return;let q=O[R];if(typeof q=="function")if(typeof E[R]=="function")q=m(O,O[R],E[R]);else if(h(N,R)){let M=b(R,N[R]);q=m(O,O[R],M)}else q=q.bind(O);else if(typeof q=="object"&&q!==null&&(h(E,R)||h(N,R)))q=v(q,E[R],N[R]);else if(h(N,"*"))q=v(q,E[R],N["*"]);else return Object.defineProperty($,R,{configurable:!0,enumerable:!0,get(){return O[R]},set(M){O[R]=M}}),q;return $[R]=q,q},set(F,R,H,q){return R in $?$[R]=H:O[R]=H,!0},defineProperty(F,R,H){return Reflect.defineProperty($,R,H)},deleteProperty(F,R){return Reflect.deleteProperty($,R)}},B=Object.create(O);return new Proxy(B,L)},y=O=>({addListener(E,N,...$){E.addListener(O.get(N),...$)},hasListener(E,N){return E.hasListener(O.get(N))},removeListener(E,N){E.removeListener(O.get(N))}}),T=new u(O=>typeof O!="function"?O:function(N){const $=v(N,{},{getContent:{minArgs:0,maxArgs:0}});O($)}),S=new u(O=>typeof O!="function"?O:function(N,$,L){let B=!1,F,R=new Promise(D=>{F=function(Y){B=!0,D(Y)}}),H;try{H=O(N,$,F)}catch(D){H=Promise.reject(D)}const q=H!==!0&&c(H);if(H!==!0&&!q&&!B)return!1;const M=D=>{D.then(Y=>{L(Y)},Y=>{let Z;Y&&(Y instanceof Error||typeof Y.message=="string")?Z=Y.message:Z="An unexpected error occurred",L({__mozWebExtensionPolyfillReject__:!0,message:Z})}).catch(Y=>{console.error("Failed to send onMessage rejected reply",Y)})};return M(q?H:R),!0}),w=({reject:O,resolve:E},N)=>{i.runtime.lastError?i.runtime.lastError.message===s?E():O(new Error(i.runtime.lastError.message)):N&&N.__mozWebExtensionPolyfillReject__?O(new Error(N.message)):E(N)},C=(O,E,N,...$)=>{if($.length<E.minArgs)throw new Error(`Expected at least ${E.minArgs} ${p(E.minArgs)} for ${O}(), got ${$.length}`);if($.length>E.maxArgs)throw new Error(`Expected at most ${E.maxArgs} ${p(E.maxArgs)} for ${O}(), got ${$.length}`);return new Promise((L,B)=>{const F=w.bind(null,{resolve:L,reject:B});$.push(F),N.sendMessage(...$)})},k={devtools:{network:{onRequestFinished:y(T)}},runtime:{onMessage:y(S),onMessageExternal:y(S),sendMessage:C.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:C.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},f={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return l.privacy={network:{"*":f},services:{"*":f},websites:{"*":f}},v(i,k,l)};r.exports=o(chrome)}else r.exports=globalThis.browser})})(Sc)),Sc.exports}var k2=C2();const Tc=Sn(k2);function Ts(e){return bb(_c(wc({},e),{sendMessage(t,r){if(r==null)return Tc.runtime.sendMessage(t);const n=typeof r=="number"?{tabId:r}:r;return Tc.tabs.sendMessage(n.tabId,t,n.frameId!=null?{frameId:n.frameId}:void 0)},addRootListener(t){const r=(n,a)=>t(typeof n=="object"?_c(wc({},n),{sender:a}):n);return Tc.runtime.onMessage.addListener(r),()=>Tc.runtime.onMessage.removeListener(r)}}))}const nn=[];for(let e=0;e<256;++e)nn.push((e+256).toString(16).slice(1));function I2(e,t=0){return(nn[e[t+0]]+nn[e[t+1]]+nn[e[t+2]]+nn[e[t+3]]+"-"+nn[e[t+4]]+nn[e[t+5]]+"-"+nn[e[t+6]]+nn[e[t+7]]+"-"+nn[e[t+8]]+nn[e[t+9]]+"-"+nn[e[t+10]]+nn[e[t+11]]+nn[e[t+12]]+nn[e[t+13]]+nn[e[t+14]]+nn[e[t+15]]).toLowerCase()}let Up;const A2=new Uint8Array(16);function O2(){if(!Up){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Up=crypto.getRandomValues.bind(crypto)}return Up(A2)}const Sb={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function P2(e,t,r){var a;if(Sb.randomUUID&&!e)return Sb.randomUUID();e=e||{};const n=e.random??((a=e.rng)==null?void 0:a.call(e))??O2();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,I2(n)}const Wn=(UP=(jP=globalThis.browser)==null?void 0:jP.runtime)!=null&&UP.id?globalThis.browser:globalThis.chrome,qp=Object.freeze(Object.defineProperty({__proto__:null,source:"sheinChoice"},Symbol.toStringTag,{value:"Module"})),E2=e=>e;function Rl(e,t=2){const n=(Number(e)||0).toFixed(t);return Number(n)}function Vp(e,t="",r){if(!e)return!1;if(t==="X_OUT_WAREHOUSE")return!0;const n=["已收件","已揽件","揽收","收寄","已送达","已到达","分拨中心","已取件","已装车","分拨","已收取快件","快件已发车","中转场","已收入","运输中","转运中心"];return e=e.replace(/(待收件|待揽收|等待揽收|待收寄|未揽收)/g,""),new RegExp(`(${n.join("|")})`).test(e)}function $2(e,t,r){return`/common/overall/no_referrer_jump?url=${encodeURIComponent(e)}`}function Tb(e,t){let r=[];["taobao","tmall"].includes(t)&&(r=["亲，小二正忙，滑动一下马上回来","霸下通用 web 页面-验证码","被挤爆啦,请稍后重试"]);for(const n of r)if(e.includes(n))return!0;return!1}function xb(e){let t="";for(let r=0;r<e.length;r++)t+=`${e[r].name}=${e[r].value}; `;return t}function Cb(){try{return navigator.userAgent}catch(e){return window.console.log("getUserAgent error",e),""}}function R2(){const t=navigator.userAgent.match(/Chrome\/(\d+)\./);return Number(t==null?void 0:t[1])||0}var kb=typeof global=="object"&&global&&global.Object===Object&&global,L2=typeof self=="object"&&self&&self.Object===Object&&self,Ca=kb||L2||Function("return this")(),En=Ca.Symbol,Ib=Object.prototype,M2=Ib.hasOwnProperty,D2=Ib.toString,Ll=En?En.toStringTag:void 0;function N2(e){var t=M2.call(e,Ll),r=e[Ll];try{e[Ll]=void 0;var n=!0}catch{}var a=D2.call(e);return n&&(t?e[Ll]=r:delete e[Ll]),a}var F2=Object.prototype,B2=F2.toString;function j2(e){return B2.call(e)}var U2="[object Null]",q2="[object Undefined]",Ab=En?En.toStringTag:void 0;function Ka(e){return e==null?e===void 0?q2:U2:Ab&&Ab in Object(e)?N2(e):j2(e)}function Kn(e){return e!=null&&typeof e=="object"}var V2="[object Symbol]";function Ml(e){return typeof e=="symbol"||Kn(e)&&Ka(e)==V2}function Hp(e,t){for(var r=-1,n=e==null?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Mr=Array.isArray,Ob=En?En.prototype:void 0,Pb=Ob?Ob.toString:void 0;function xc(e){if(typeof e=="string")return e;if(Mr(e))return Hp(e,xc)+"";if(Ml(e))return Pb?Pb.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var H2=/\s/;function z2(e){for(var t=e.length;t--&&H2.test(e.charAt(t)););return t}var W2=/^\s+/;function Eb(e){return e&&e.slice(0,z2(e)+1).replace(W2,"")}function Tn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var $b=NaN,K2=/^[-+]0x[0-9a-f]+$/i,G2=/^0b[01]+$/i,Y2=/^0o[0-7]+$/i,J2=parseInt;function zp(e){if(typeof e=="number")return e;if(Ml(e))return $b;if(Tn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Tn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Eb(e);var r=G2.test(e);return r||Y2.test(e)?J2(e.slice(2),r?2:8):K2.test(e)?$b:+e}var Rb=1/0,X2=17976931348623157e292;function Q2(e){if(!e)return e===0?e:0;if(e=zp(e),e===Rb||e===-Rb){var t=e<0?-1:1;return t*X2}return e===e?e:0}function Wp(e){var t=Q2(e),r=t%1;return t===t?r?t-r:t:0}function Cc(e){return e}var Z2="[object AsyncFunction]",eE="[object Function]",tE="[object GeneratorFunction]",rE="[object Proxy]";function kc(e){if(!Tn(e))return!1;var t=Ka(e);return t==eE||t==tE||t==Z2||t==rE}var Kp=Ca["__core-js_shared__"],Lb=(function(){var e=/[^.]+$/.exec(Kp&&Kp.keys&&Kp.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function nE(e){return!!Lb&&Lb in e}var aE=Function.prototype,sE=aE.toString;function Ao(e){if(e!=null){try{return sE.call(e)}catch{}try{return e+""}catch{}}return""}var oE=/[\\^$.*+?()[\]{}|]/g,iE=/^\[object .+?Constructor\]$/,lE=Function.prototype,uE=Object.prototype,cE=lE.toString,dE=uE.hasOwnProperty,fE=RegExp("^"+cE.call(dE).replace(oE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function pE(e){if(!Tn(e)||nE(e))return!1;var t=kc(e)?fE:iE;return t.test(Ao(e))}function hE(e,t){return e==null?void 0:e[t]}function Oo(e,t){var r=hE(e,t);return pE(r)?r:void 0}var Gp=Oo(Ca,"WeakMap"),Mb=Object.create,mE=(function(){function e(){}return function(t){if(!Tn(t))return{};if(Mb)return Mb(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function gE(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function vE(){}function Yp(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}var yE=800,bE=16,wE=Date.now;function _E(e){var t=0,r=0;return function(){var n=wE(),a=bE-(n-r);if(r=n,a>0){if(++t>=yE)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function SE(e){return function(){return e}}var Ic=(function(){try{var e=Oo(Object,"defineProperty");return e({},"",{}),e}catch{}})(),TE=Ic?function(e,t){return Ic(e,"toString",{configurable:!0,enumerable:!1,value:SE(t),writable:!0})}:Cc,Db=_E(TE);function xE(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}function Jp(e,t,r,n){for(var a=e.length,s=r+(n?1:-1);n?s--:++s<a;)if(t(e[s],s,e))return s;return-1}function CE(e){return e!==e}function kE(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}function Xp(e,t,r){return t===t?kE(e,t,r):Jp(e,CE,r)}function IE(e,t){var r=e==null?0:e.length;return!!r&&Xp(e,t,0)>-1}var AE=9007199254740991,OE=/^(?:0|[1-9]\d*)$/;function Ac(e,t){var r=typeof e;return t=t??AE,!!t&&(r=="number"||r!="symbol"&&OE.test(e))&&e>-1&&e%1==0&&e<t}function Oc(e,t,r){t=="__proto__"&&Ic?Ic(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Dl(e,t){return e===t||e!==e&&t!==t}var PE=Object.prototype,EE=PE.hasOwnProperty;function Qp(e,t,r){var n=e[t];(!(EE.call(e,t)&&Dl(n,r))||r===void 0&&!(t in e))&&Oc(e,t,r)}function Nl(e,t,r,n){var a=!r;r||(r={});for(var s=-1,o=t.length;++s<o;){var i=t[s],l=void 0;l===void 0&&(l=e[i]),a?Oc(r,i,l):Qp(r,i,l)}return r}var Nb=Math.max;function Fb(e,t,r){return t=Nb(t===void 0?e.length-1:t,0),function(){for(var n=arguments,a=-1,s=Nb(n.length-t,0),o=Array(s);++a<s;)o[a]=n[t+a];a=-1;for(var i=Array(t+1);++a<t;)i[a]=n[a];return i[t]=r(o),gE(e,this,i)}}function $E(e,t){return Db(Fb(e,t,Cc),e+"")}var RE=9007199254740991;function Zp(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=RE}function xs(e){return e!=null&&Zp(e.length)&&!kc(e)}function LE(e,t,r){if(!Tn(r))return!1;var n=typeof t;return(n=="number"?xs(r)&&Ac(t,r.length):n=="string"&&t in r)?Dl(r[t],e):!1}function ME(e){return $E(function(t,r){var n=-1,a=r.length,s=a>1?r[a-1]:void 0,o=a>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(a--,s):void 0,o&&LE(r[0],r[1],o)&&(s=a<3?void 0:s,a=1),t=Object(t);++n<a;){var i=r[n];i&&e(t,i,n,s)}return t})}var DE=Object.prototype;function Pc(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||DE;return e===r}function NE(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var FE="[object Arguments]";function Bb(e){return Kn(e)&&Ka(e)==FE}var jb=Object.prototype,BE=jb.hasOwnProperty,jE=jb.propertyIsEnumerable,Ai=Bb((function(){return arguments})())?Bb:function(e){return Kn(e)&&BE.call(e,"callee")&&!jE.call(e,"callee")};function UE(){return!1}var Ub=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qb=Ub&&typeof module=="object"&&module&&!module.nodeType&&module,qE=qb&&qb.exports===Ub,Vb=qE?Ca.Buffer:void 0,VE=Vb?Vb.isBuffer:void 0,Oi=VE||UE,HE="[object Arguments]",zE="[object Array]",WE="[object Boolean]",KE="[object Date]",GE="[object Error]",YE="[object Function]",JE="[object Map]",XE="[object Number]",QE="[object Object]",ZE="[object RegExp]",e$="[object Set]",t$="[object String]",r$="[object WeakMap]",n$="[object ArrayBuffer]",a$="[object DataView]",s$="[object Float32Array]",o$="[object Float64Array]",i$="[object Int8Array]",l$="[object Int16Array]",u$="[object Int32Array]",c$="[object Uint8Array]",d$="[object Uint8ClampedArray]",f$="[object Uint16Array]",p$="[object Uint32Array]",xr={};xr[s$]=xr[o$]=xr[i$]=xr[l$]=xr[u$]=xr[c$]=xr[d$]=xr[f$]=xr[p$]=!0,xr[HE]=xr[zE]=xr[n$]=xr[WE]=xr[a$]=xr[KE]=xr[GE]=xr[YE]=xr[JE]=xr[XE]=xr[QE]=xr[ZE]=xr[e$]=xr[t$]=xr[r$]=!1;function h$(e){return Kn(e)&&Zp(e.length)&&!!xr[Ka(e)]}function eh(e){return function(t){return e(t)}}var Hb=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Fl=Hb&&typeof module=="object"&&module&&!module.nodeType&&module,m$=Fl&&Fl.exports===Hb,th=m$&&kb.process,Pi=(function(){try{var e=Fl&&Fl.require&&Fl.require("util").types;return e||th&&th.binding&&th.binding("util")}catch{}})(),zb=Pi&&Pi.isTypedArray,Ec=zb?eh(zb):h$,g$=Object.prototype,v$=g$.hasOwnProperty;function Wb(e,t){var r=Mr(e),n=!r&&Ai(e),a=!r&&!n&&Oi(e),s=!r&&!n&&!a&&Ec(e),o=r||n||a||s,i=o?NE(e.length,String):[],l=i.length;for(var u in e)(t||v$.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Ac(u,l)))&&i.push(u);return i}function Kb(e,t){return function(r){return e(t(r))}}var y$=Kb(Object.keys,Object),b$=Object.prototype,w$=b$.hasOwnProperty;function Gb(e){if(!Pc(e))return y$(e);var t=[];for(var r in Object(e))w$.call(e,r)&&r!="constructor"&&t.push(r);return t}function Po(e){return xs(e)?Wb(e):Gb(e)}function _$(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var S$=Object.prototype,T$=S$.hasOwnProperty;function x$(e){if(!Tn(e))return _$(e);var t=Pc(e),r=[];for(var n in e)n=="constructor"&&(t||!T$.call(e,n))||r.push(n);return r}function Bl(e){return xs(e)?Wb(e,!0):x$(e)}var C$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k$=/^\w*$/;function rh(e,t){if(Mr(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||Ml(e)?!0:k$.test(e)||!C$.test(e)||t!=null&&e in Object(t)}var jl=Oo(Object,"create");function I$(){this.__data__=jl?jl(null):{},this.size=0}function A$(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var O$="__lodash_hash_undefined__",P$=Object.prototype,E$=P$.hasOwnProperty;function $$(e){var t=this.__data__;if(jl){var r=t[e];return r===O$?void 0:r}return E$.call(t,e)?t[e]:void 0}var R$=Object.prototype,L$=R$.hasOwnProperty;function M$(e){var t=this.__data__;return jl?t[e]!==void 0:L$.call(t,e)}var D$="__lodash_hash_undefined__";function N$(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=jl&&t===void 0?D$:t,this}function Eo(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Eo.prototype.clear=I$,Eo.prototype.delete=A$,Eo.prototype.get=$$,Eo.prototype.has=M$,Eo.prototype.set=N$;function F$(){this.__data__=[],this.size=0}function $c(e,t){for(var r=e.length;r--;)if(Dl(e[r][0],t))return r;return-1}var B$=Array.prototype,j$=B$.splice;function U$(e){var t=this.__data__,r=$c(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():j$.call(t,r,1),--this.size,!0}function q$(e){var t=this.__data__,r=$c(t,e);return r<0?void 0:t[r][1]}function V$(e){return $c(this.__data__,e)>-1}function H$(e,t){var r=this.__data__,n=$c(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Cs(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Cs.prototype.clear=F$,Cs.prototype.delete=U$,Cs.prototype.get=q$,Cs.prototype.has=V$,Cs.prototype.set=H$;var Ul=Oo(Ca,"Map");function z$(){this.size=0,this.__data__={hash:new Eo,map:new(Ul||Cs),string:new Eo}}function W$(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Rc(e,t){var r=e.__data__;return W$(t)?r[typeof t=="string"?"string":"hash"]:r.map}function K$(e){var t=Rc(this,e).delete(e);return this.size-=t?1:0,t}function G$(e){return Rc(this,e).get(e)}function Y$(e){return Rc(this,e).has(e)}function J$(e,t){var r=Rc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function ks(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ks.prototype.clear=z$,ks.prototype.delete=K$,ks.prototype.get=G$,ks.prototype.has=Y$,ks.prototype.set=J$;var X$="Expected a function";function nh(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(X$);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],s=r.cache;if(s.has(a))return s.get(a);var o=e.apply(this,n);return r.cache=s.set(a,o)||s,o};return r.cache=new(nh.Cache||ks),r}nh.Cache=ks;var Q$=500;function Z$(e){var t=nh(e,function(n){return r.size===Q$&&r.clear(),n}),r=t.cache;return t}var eR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tR=/\\(\\)?/g,rR=Z$(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(eR,function(r,n,a,s){t.push(a?s.replace(tR,"$1"):n||r)}),t});function ah(e){return e==null?"":xc(e)}function Lc(e,t){return Mr(e)?e:rh(e,t)?[e]:rR(ah(e))}function ql(e){if(typeof e=="string"||Ml(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function sh(e,t){t=Lc(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[ql(t[r++])];return r&&r==n?e:void 0}function fn(e,t,r){var n=e==null?void 0:sh(e,t);return n===void 0?r:n}function oh(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}var Yb=En?En.isConcatSpreadable:void 0;function nR(e){return Mr(e)||Ai(e)||!!(Yb&&e&&e[Yb])}function Jb(e,t,r,n,a){var s=-1,o=e.length;for(r||(r=nR),a||(a=[]);++s<o;){var i=e[s];r(i)?oh(a,i):a[a.length]=i}return a}function Xb(e){var t=e==null?0:e.length;return t?Jb(e):[]}function aR(e){return Db(Fb(e,void 0,Xb),e+"")}var ih=Kb(Object.getPrototypeOf,Object),sR="[object Object]",oR=Function.prototype,iR=Object.prototype,Qb=oR.toString,lR=iR.hasOwnProperty,uR=Qb.call(Object);function lh(e){if(!Kn(e)||Ka(e)!=sR)return!1;var t=ih(e);if(t===null)return!0;var r=lR.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Qb.call(r)==uR}function Zb(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(a);++n<a;)s[n]=e[n+t];return s}function cR(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:Zb(e,t,r)}var dR="\\ud800-\\udfff",fR="\\u0300-\\u036f",pR="\\ufe20-\\ufe2f",hR="\\u20d0-\\u20ff",mR=fR+pR+hR,gR="\\ufe0e\\ufe0f",vR="\\u200d",yR=RegExp("["+vR+dR+mR+gR+"]");function bR(e){return yR.test(e)}function wR(e){return e.split("")}var ew="\\ud800-\\udfff",_R="\\u0300-\\u036f",SR="\\ufe20-\\ufe2f",TR="\\u20d0-\\u20ff",xR=_R+SR+TR,CR="\\ufe0e\\ufe0f",kR="["+ew+"]",uh="["+xR+"]",ch="\\ud83c[\\udffb-\\udfff]",IR="(?:"+uh+"|"+ch+")",tw="[^"+ew+"]",rw="(?:\\ud83c[\\udde6-\\uddff]){2}",nw="[\\ud800-\\udbff][\\udc00-\\udfff]",AR="\\u200d",aw=IR+"?",sw="["+CR+"]?",OR="(?:"+AR+"(?:"+[tw,rw,nw].join("|")+")"+sw+aw+")*",PR=sw+aw+OR,ER="(?:"+[tw+uh+"?",uh,rw,nw,kR].join("|")+")",$R=RegExp(ch+"(?="+ch+")|"+ER+PR,"g");function RR(e){return e.match($R)||[]}function dh(e){return bR(e)?RR(e):wR(e)}function ka(){if(!arguments.length)return[];var e=arguments[0];return Mr(e)?e:[e]}var LR=Math.ceil,MR=Math.max;function Mc(e,t,r){t===void 0?t=1:t=MR(Wp(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var a=0,s=0,o=Array(LR(n/t));a<n;)o[s++]=Zb(e,a,a+=t);return o}function DR(e,t,r){return e===e&&(r!==void 0&&(e=e<=r?e:r),e=e>=t?e:t),e}function NR(){this.__data__=new Cs,this.size=0}function FR(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function BR(e){return this.__data__.get(e)}function jR(e){return this.__data__.has(e)}var UR=200;function qR(e,t){var r=this.__data__;if(r instanceof Cs){var n=r.__data__;if(!Ul||n.length<UR-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ks(n)}return r.set(e,t),this.size=r.size,this}function Ia(e){var t=this.__data__=new Cs(e);this.size=t.size}Ia.prototype.clear=NR,Ia.prototype.delete=FR,Ia.prototype.get=BR,Ia.prototype.has=jR,Ia.prototype.set=qR;function VR(e,t){return e&&Nl(t,Po(t),e)}function HR(e,t){return e&&Nl(t,Bl(t),e)}var ow=typeof exports=="object"&&exports&&!exports.nodeType&&exports,iw=ow&&typeof module=="object"&&module&&!module.nodeType&&module,zR=iw&&iw.exports===ow,lw=zR?Ca.Buffer:void 0,uw=lw?lw.allocUnsafe:void 0;function cw(e,t){if(t)return e.slice();var r=e.length,n=uw?uw(r):new e.constructor(r);return e.copy(n),n}function WR(e,t){for(var r=-1,n=e==null?0:e.length,a=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[a++]=o)}return s}function dw(){return[]}var KR=Object.prototype,GR=KR.propertyIsEnumerable,fw=Object.getOwnPropertySymbols,fh=fw?function(e){return e==null?[]:(e=Object(e),WR(fw(e),function(t){return GR.call(e,t)}))}:dw;function YR(e,t){return Nl(e,fh(e),t)}var JR=Object.getOwnPropertySymbols,pw=JR?function(e){for(var t=[];e;)oh(t,fh(e)),e=ih(e);return t}:dw;function XR(e,t){return Nl(e,pw(e),t)}function hw(e,t,r){var n=t(e);return Mr(e)?n:oh(n,r(e))}function ph(e){return hw(e,Po,fh)}function QR(e){return hw(e,Bl,pw)}var hh=Oo(Ca,"DataView"),mh=Oo(Ca,"Promise"),Ei=Oo(Ca,"Set"),mw="[object Map]",ZR="[object Object]",gw="[object Promise]",vw="[object Set]",yw="[object WeakMap]",bw="[object DataView]",eL=Ao(hh),tL=Ao(Ul),rL=Ao(mh),nL=Ao(Ei),aL=Ao(Gp),Gn=Ka;(hh&&Gn(new hh(new ArrayBuffer(1)))!=bw||Ul&&Gn(new Ul)!=mw||mh&&Gn(mh.resolve())!=gw||Ei&&Gn(new Ei)!=vw||Gp&&Gn(new Gp)!=yw)&&(Gn=function(e){var t=Ka(e),r=t==ZR?e.constructor:void 0,n=r?Ao(r):"";if(n)switch(n){case eL:return bw;case tL:return mw;case rL:return gw;case nL:return vw;case aL:return yw}return t});var sL=Object.prototype,oL=sL.hasOwnProperty;function iL(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&oL.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var Dc=Ca.Uint8Array;function gh(e){var t=new e.constructor(e.byteLength);return new Dc(t).set(new Dc(e)),t}function lL(e,t){var r=t?gh(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var uL=/\w*$/;function cL(e){var t=new e.constructor(e.source,uL.exec(e));return t.lastIndex=e.lastIndex,t}var ww=En?En.prototype:void 0,_w=ww?ww.valueOf:void 0;function dL(e){return _w?Object(_w.call(e)):{}}function Sw(e,t){var r=t?gh(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var fL="[object Boolean]",pL="[object Date]",hL="[object Map]",mL="[object Number]",gL="[object RegExp]",vL="[object Set]",yL="[object String]",bL="[object Symbol]",wL="[object ArrayBuffer]",_L="[object DataView]",SL="[object Float32Array]",TL="[object Float64Array]",xL="[object Int8Array]",CL="[object Int16Array]",kL="[object Int32Array]",IL="[object Uint8Array]",AL="[object Uint8ClampedArray]",OL="[object Uint16Array]",PL="[object Uint32Array]";function EL(e,t,r){var n=e.constructor;switch(t){case wL:return gh(e);case fL:case pL:return new n(+e);case _L:return lL(e,r);case SL:case TL:case xL:case CL:case kL:case IL:case AL:case OL:case PL:return Sw(e,r);case hL:return new n;case mL:case yL:return new n(e);case gL:return cL(e);case vL:return new n;case bL:return dL(e)}}function Tw(e){return typeof e.constructor=="function"&&!Pc(e)?mE(ih(e)):{}}var $L="[object Map]";function RL(e){return Kn(e)&&Gn(e)==$L}var xw=Pi&&Pi.isMap,LL=xw?eh(xw):RL,ML="[object Set]";function DL(e){return Kn(e)&&Gn(e)==ML}var Cw=Pi&&Pi.isSet,NL=Cw?eh(Cw):DL,FL=1,BL=2,jL=4,kw="[object Arguments]",UL="[object Array]",qL="[object Boolean]",VL="[object Date]",HL="[object Error]",Iw="[object Function]",zL="[object GeneratorFunction]",WL="[object Map]",KL="[object Number]",Aw="[object Object]",GL="[object RegExp]",YL="[object Set]",JL="[object String]",XL="[object Symbol]",QL="[object WeakMap]",ZL="[object ArrayBuffer]",eM="[object DataView]",tM="[object Float32Array]",rM="[object Float64Array]",nM="[object Int8Array]",aM="[object Int16Array]",sM="[object Int32Array]",oM="[object Uint8Array]",iM="[object Uint8ClampedArray]",lM="[object Uint16Array]",uM="[object Uint32Array]",wr={};wr[kw]=wr[UL]=wr[ZL]=wr[eM]=wr[qL]=wr[VL]=wr[tM]=wr[rM]=wr[nM]=wr[aM]=wr[sM]=wr[WL]=wr[KL]=wr[Aw]=wr[GL]=wr[YL]=wr[JL]=wr[XL]=wr[oM]=wr[iM]=wr[lM]=wr[uM]=!0,wr[HL]=wr[Iw]=wr[QL]=!1;function Vl(e,t,r,n,a,s){var o,i=t&FL,l=t&BL,u=t&jL;if(o!==void 0)return o;if(!Tn(e))return e;var c=Mr(e);if(c){if(o=iL(e),!i)return Yp(e,o)}else{var d=Gn(e),p=d==Iw||d==zL;if(Oi(e))return cw(e,i);if(d==Aw||d==kw||p&&!a){if(o=l||p?{}:Tw(e),!i)return l?XR(e,HR(o,e)):YR(e,VR(o,e))}else{if(!wr[d])return a?e:{};o=EL(e,d,i)}}s||(s=new Ia);var b=s.get(e);if(b)return b;s.set(e,o),NL(e)?e.forEach(function(v){o.add(Vl(v,t,r,v,e,s))}):LL(e)&&e.forEach(function(v,y){o.set(y,Vl(v,t,r,y,e,s))});var m=u?l?QR:ph:l?Bl:Po,h=c?void 0:m(e);return xE(h||e,function(v,y){h&&(y=v,v=e[y]),Qp(o,y,Vl(v,t,r,y,e,s))}),o}var cM=4;function Ow(e){return Vl(e,cM)}var dM=1,fM=4;function pM(e){return Vl(e,dM|fM)}var hM="__lodash_hash_undefined__";function mM(e){return this.__data__.set(e,hM),this}function gM(e){return this.__data__.has(e)}function Hl(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new ks;++t<r;)this.add(e[t])}Hl.prototype.add=Hl.prototype.push=mM,Hl.prototype.has=gM;function vM(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function Pw(e,t){return e.has(t)}var yM=1,bM=2;function Ew(e,t,r,n,a,s){var o=r&yM,i=e.length,l=t.length;if(i!=l&&!(o&&l>i))return!1;var u=s.get(e),c=s.get(t);if(u&&c)return u==t&&c==e;var d=-1,p=!0,b=r&bM?new Hl:void 0;for(s.set(e,t),s.set(t,e);++d<i;){var m=e[d],h=t[d];if(n)var v=o?n(h,m,d,t,e,s):n(m,h,d,e,t,s);if(v!==void 0){if(v)continue;p=!1;break}if(b){if(!vM(t,function(y,T){if(!Pw(b,T)&&(m===y||a(m,y,r,n,s)))return b.push(T)})){p=!1;break}}else if(!(m===h||a(m,h,r,n,s))){p=!1;break}}return s.delete(e),s.delete(t),p}function $w(e){var t=-1,r=Array(e.size);return e.forEach(function(n,a){r[++t]=[a,n]}),r}function Nc(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var wM=1,_M=2,SM="[object Boolean]",TM="[object Date]",xM="[object Error]",CM="[object Map]",kM="[object Number]",IM="[object RegExp]",AM="[object Set]",OM="[object String]",PM="[object Symbol]",EM="[object ArrayBuffer]",$M="[object DataView]",Rw=En?En.prototype:void 0,vh=Rw?Rw.valueOf:void 0;function RM(e,t,r,n,a,s,o){switch(r){case $M:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case EM:return!(e.byteLength!=t.byteLength||!s(new Dc(e),new Dc(t)));case SM:case TM:case kM:return Dl(+e,+t);case xM:return e.name==t.name&&e.message==t.message;case IM:case OM:return e==t+"";case CM:var i=$w;case AM:var l=n&wM;if(i||(i=Nc),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;n|=_M,o.set(e,t);var c=Ew(i(e),i(t),n,a,s,o);return o.delete(e),c;case PM:if(vh)return vh.call(e)==vh.call(t)}return!1}var LM=1,MM=Object.prototype,DM=MM.hasOwnProperty;function NM(e,t,r,n,a,s){var o=r&LM,i=ph(e),l=i.length,u=ph(t),c=u.length;if(l!=c&&!o)return!1;for(var d=l;d--;){var p=i[d];if(!(o?p in t:DM.call(t,p)))return!1}var b=s.get(e),m=s.get(t);if(b&&m)return b==t&&m==e;var h=!0;s.set(e,t),s.set(t,e);for(var v=o;++d<l;){p=i[d];var y=e[p],T=t[p];if(n)var S=o?n(T,y,p,t,e,s):n(y,T,p,e,t,s);if(!(S===void 0?y===T||a(y,T,r,n,s):S)){h=!1;break}v||(v=p=="constructor")}if(h&&!v){var w=e.constructor,C=t.constructor;w!=C&&"constructor"in e&&"constructor"in t&&!(typeof w=="function"&&w instanceof w&&typeof C=="function"&&C instanceof C)&&(h=!1)}return s.delete(e),s.delete(t),h}var FM=1,Lw="[object Arguments]",Mw="[object Array]",Fc="[object Object]",BM=Object.prototype,Dw=BM.hasOwnProperty;function jM(e,t,r,n,a,s){var o=Mr(e),i=Mr(t),l=o?Mw:Gn(e),u=i?Mw:Gn(t);l=l==Lw?Fc:l,u=u==Lw?Fc:u;var c=l==Fc,d=u==Fc,p=l==u;if(p&&Oi(e)){if(!Oi(t))return!1;o=!0,c=!1}if(p&&!c)return s||(s=new Ia),o||Ec(e)?Ew(e,t,r,n,a,s):RM(e,t,l,r,n,a,s);if(!(r&FM)){var b=c&&Dw.call(e,"__wrapped__"),m=d&&Dw.call(t,"__wrapped__");if(b||m){var h=b?e.value():e,v=m?t.value():t;return s||(s=new Ia),a(h,v,r,n,s)}}return p?(s||(s=new Ia),NM(e,t,r,n,a,s)):!1}function Bc(e,t,r,n,a){return e===t?!0:e==null||t==null||!Kn(e)&&!Kn(t)?e!==e&&t!==t:jM(e,t,r,n,Bc,a)}var UM=1,qM=2;function VM(e,t,r,n){var a=r.length,s=a;if(e==null)return!s;for(e=Object(e);a--;){var o=r[a];if(o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<s;){o=r[a];var i=o[0],l=e[i],u=o[1];if(o[2]){if(l===void 0&&!(i in e))return!1}else{var c=new Ia,d;if(!(d===void 0?Bc(u,l,UM|qM,n,c):d))return!1}}return!0}function Nw(e){return e===e&&!Tn(e)}function HM(e){for(var t=Po(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Nw(a)]}return t}function Fw(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}function zM(e){var t=HM(e);return t.length==1&&t[0][2]?Fw(t[0][0],t[0][1]):function(r){return r===e||VM(r,e,t)}}function WM(e,t){return e!=null&&t in Object(e)}function Bw(e,t,r){t=Lc(t,e);for(var n=-1,a=t.length,s=!1;++n<a;){var o=ql(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=a?s:(a=e==null?0:e.length,!!a&&Zp(a)&&Ac(o,a)&&(Mr(e)||Ai(e)))}function jw(e,t){return e!=null&&Bw(e,t,WM)}var KM=1,GM=2;function YM(e,t){return rh(e)&&Nw(t)?Fw(ql(e),t):function(r){var n=fn(r,e);return n===void 0&&n===t?jw(r,e):Bc(t,n,KM|GM)}}function JM(e){return function(t){return t==null?void 0:t[e]}}function XM(e){return function(t){return sh(t,e)}}function QM(e){return rh(e)?JM(ql(e)):XM(e)}function zl(e){return typeof e=="function"?e:e==null?Cc:typeof e=="object"?Mr(e)?YM(e[0],e[1]):zM(e):QM(e)}function ZM(e,t,r,n){for(var a=-1,s=e==null?0:e.length;++a<s;){var o=e[a];t(n,o,r(o),e)}return n}function e8(e){return function(t,r,n){for(var a=-1,s=Object(t),o=n(t),i=o.length;i--;){var l=o[++a];if(r(s[l],l,s)===!1)break}return t}}var Uw=e8();function t8(e,t){return e&&Uw(e,t,Po)}function r8(e,t){return function(r,n){if(r==null)return r;if(!xs(r))return e(r,n);for(var a=r.length,s=-1,o=Object(r);++s<a&&n(o[s],s,o)!==!1;);return r}}var qw=r8(t8);function n8(e,t,r,n){return qw(e,function(a,s,o){t(n,a,r(a),o)}),n}function a8(e,t){return function(r,n){var a=Mr(r)?ZM:n8,s=t?t():{};return a(r,e,zl(n),s)}}var yh=function(){return Ca.Date.now()},s8="Expected a function",o8=Math.max,i8=Math.min;function Is(e,t,r){var n,a,s,o,i,l,u=0,c=!1,d=!1,p=!0;if(typeof e!="function")throw new TypeError(s8);t=zp(t)||0,Tn(r)&&(c=!!r.leading,d="maxWait"in r,s=d?o8(zp(r.maxWait)||0,t):s,p="trailing"in r?!!r.trailing:p);function b(k){var f=n,O=a;return n=a=void 0,u=k,o=e.apply(O,f),o}function m(k){return u=k,i=setTimeout(y,t),c?b(k):o}function h(k){var f=k-l,O=k-u,E=t-f;return d?i8(E,s-O):E}function v(k){var f=k-l,O=k-u;return l===void 0||f>=t||f<0||d&&O>=s}function y(){var k=yh();if(v(k))return T(k);i=setTimeout(y,h(k))}function T(k){return i=void 0,p&&n?b(k):(n=a=void 0,o)}function S(){i!==void 0&&clearTimeout(i),u=0,n=l=a=i=void 0}function w(){return i===void 0?o:T(yh())}function C(){var k=yh(),f=v(k);if(n=arguments,a=this,l=k,f){if(i===void 0)return m(l);if(d)return clearTimeout(i),i=setTimeout(y,t),b(l)}return i===void 0&&(i=setTimeout(y,t)),o}return C.cancel=S,C.flush=w,C}function bh(e,t,r){(r!==void 0&&!Dl(e[t],r)||r===void 0&&!(t in e))&&Oc(e,t,r)}function l8(e){return Kn(e)&&xs(e)}function wh(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function u8(e){return Nl(e,Bl(e))}function c8(e,t,r,n,a,s,o){var i=wh(e,r),l=wh(t,r),u=o.get(l);if(u){bh(e,r,u);return}var c=s?s(i,l,r+"",e,t,o):void 0,d=c===void 0;if(d){var p=Mr(l),b=!p&&Oi(l),m=!p&&!b&&Ec(l);c=l,p||b||m?Mr(i)?c=i:l8(i)?c=Yp(i):b?(d=!1,c=cw(l,!0)):m?(d=!1,c=Sw(l,!0)):c=[]:lh(l)||Ai(l)?(c=i,Ai(i)?c=u8(i):(!Tn(i)||kc(i))&&(c=Tw(l))):d=!1}d&&(o.set(l,c),a(c,l,n,s,o),o.delete(l)),bh(e,r,c)}function Vw(e,t,r,n,a){e!==t&&Uw(t,function(s,o){if(a||(a=new Ia),Tn(s))c8(e,t,o,r,Vw,n,a);else{var i=n?n(wh(e,o),s,o+"",e,t,a):void 0;i===void 0&&(i=s),bh(e,o,i)}},Bl)}function d8(e){return function(t,r,n){var a=Object(t);if(!xs(t)){var s=zl(r);t=Po(t),r=function(i){return s(a[i],i,a)}}var o=e(t,r,n);return o>-1?a[s?t[o]:o]:void 0}}var f8=Math.max;function p8(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=r==null?0:Wp(r);return a<0&&(a=f8(n+a,0)),Jp(e,zl(t),a)}var h8=d8(p8);function m8(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var a=n-1;return Jp(e,zl(t),a,!0)}function g8(e,t){var r=-1,n=xs(e)?Array(e.length):[];return qw(e,function(a,s,o){n[++r]=t(a,s,o)}),n}function v8(e,t){var r=Mr(e)?Hp:g8;return r(e,zl(t))}function y8(e,t){return Jb(v8(e,t))}function jc(e){for(var t=-1,r=e==null?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n}function b8(e,t){return e>t}var w8=Object.prototype,_8=w8.hasOwnProperty;function S8(e,t){return e!=null&&_8.call(e,t)}function $o(e,t){return e!=null&&Bw(e,t,S8)}var T8="[object String]";function Zs(e){return typeof e=="string"||!Mr(e)&&Kn(e)&&Ka(e)==T8}function x8(e,t){return Hp(t,function(r){return e[r]})}function C8(e){return e==null?[]:x8(e,Po(e))}var k8="[object Boolean]";function I8(e){return e===!0||e===!1||Kn(e)&&Ka(e)==k8}var A8="[object Map]",O8="[object Set]",P8=Object.prototype,E8=P8.hasOwnProperty;function Ut(e){if(e==null)return!0;if(xs(e)&&(Mr(e)||typeof e=="string"||typeof e.splice=="function"||Oi(e)||Ec(e)||Ai(e)))return!e.length;var t=Gn(e);if(t==A8||t==O8)return!e.size;if(Pc(e))return!Gb(e).length;for(var r in e)if(E8.call(e,r))return!1;return!0}function Ro(e,t){return Bc(e,t)}var $8="[object Number]";function R8(e){return typeof e=="number"||Kn(e)&&Ka(e)==$8}function Wl(e){return R8(e)&&e!=+e}function Aa(e){return e==null}function Kl(e){return e===null}function Hw(e){return e===void 0}var zw=a8(function(e,t,r){Oc(e,r,t)});function L8(e,t,r){for(var n=-1,a=e.length;++n<a;){var s=e[n],o=t(s);if(o!=null&&(i===void 0?o===o&&!Ml(o):r(o,i)))var i=o,l=s}return l}function _h(e){return e&&e.length?L8(e,Cc,b8):void 0}var Ww=ME(function(e,t,r){Vw(e,t,r)});function M8(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}var D8="[object Map]",N8="[object Set]",Sh=En?En.iterator:void 0;function Kw(e){if(!e)return[];if(xs(e))return Zs(e)?dh(e):Yp(e);if(Sh&&e[Sh])return M8(e[Sh]());var t=Gn(e),r=t==D8?$w:t==N8?Nc:C8;return r(e)}function Gw(e,t,r,n){if(!Tn(e))return e;t=Lc(t,e);for(var a=-1,s=t.length,o=s-1,i=e;i!=null&&++a<s;){var l=ql(t[a]),u=r;if(l==="__proto__"||l==="constructor"||l==="prototype")return e;if(a!=o){var c=i[l];u=void 0,u===void 0&&(u=Tn(c)?c:Ac(t[a+1])?[]:{})}Qp(i,l,u),i=i[l]}return e}function F8(e,t,r){for(var n=-1,a=t.length,s={};++n<a;){var o=t[n],i=sh(e,o);r(i,o)&&Gw(s,Lc(o,e),i)}return s}function B8(e,t){return F8(e,t,function(r,n){return jw(e,n)})}var Lo=aR(function(e,t){return e==null?{}:B8(e,t)});function j8(e,t,r){return e==null?e:Gw(e,t,r)}function Yw(e,t,r){return e=ah(e),r=r==null?0:DR(Wp(r),0,e.length),t=xc(t),e.slice(r,r+t.length)==t}var U8="Expected a function";function Jw(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(U8);return Tn(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),Is(e,t,{leading:n,maxWait:t,trailing:a})}function q8(e,t){for(var r=e.length;r--&&Xp(t,e[r],0)>-1;);return r}function V8(e,t){for(var r=-1,n=e.length;++r<n&&Xp(t,e[r],0)>-1;);return r}function Th(e,t,r){if(e=ah(e),e&&t===void 0)return Eb(e);if(!e||!(t=xc(t)))return e;var n=dh(e),a=dh(t),s=V8(n,a),o=q8(n,a)+1;return cR(n,s,o).join("")}var H8=1/0,z8=Ei&&1/Nc(new Ei([,-0]))[1]==H8?function(e){return new Ei(e)}:vE,W8=200;function K8(e,t,r){var n=-1,a=IE,s=e.length,o=!0,i=[],l=i;if(s>=W8){var u=z8(e);if(u)return Nc(u);o=!1,a=Pw,l=new Hl}else l=i;e:for(;++n<s;){var c=e[n],d=c;if(c=c!==0?c:0,o&&d===d){for(var p=l.length;p--;)if(l[p]===d)continue e;i.push(c)}else a(l,d,r)||(l!==i&&l.push(d),i.push(c))}return i}function Xw(e){return e&&e.length?K8(e):[]}var xh,Qw;function $i(){return Qw||(Qw=1,xh=TypeError),xh}const G8=T2(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Ch,Zw;function Uc(){if(Zw)return Ch;Zw=1;var e=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=e&&t&&typeof t.get=="function"?t.get:null,n=e&&Map.prototype.forEach,a=typeof Set=="function"&&Set.prototype,s=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,o=a&&s&&typeof s.get=="function"?s.get:null,i=a&&Set.prototype.forEach,l=typeof WeakMap=="function"&&WeakMap.prototype,u=l?WeakMap.prototype.has:null,c=typeof WeakSet=="function"&&WeakSet.prototype,d=c?WeakSet.prototype.has:null,p=typeof WeakRef=="function"&&WeakRef.prototype,b=p?WeakRef.prototype.deref:null,m=Boolean.prototype.valueOf,h=Object.prototype.toString,v=Function.prototype.toString,y=String.prototype.match,T=String.prototype.slice,S=String.prototype.replace,w=String.prototype.toUpperCase,C=String.prototype.toLowerCase,k=RegExp.prototype.test,f=Array.prototype.concat,O=Array.prototype.join,E=Array.prototype.slice,N=Math.floor,$=typeof BigInt=="function"?BigInt.prototype.valueOf:null,L=Object.getOwnPropertySymbols,B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,F=typeof Symbol=="function"&&typeof Symbol.iterator=="object",R=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===F||!0)?Symbol.toStringTag:null,H=Object.prototype.propertyIsEnumerable,q=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(J){return J.__proto__}:null);function M(J,V){if(J===1/0||J===-1/0||J!==J||J&&J>-1e3&&J<1e3||k.call(/e/,V))return V;var _e=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof J=="number"){var Xe=J<0?-N(-J):N(J);if(Xe!==J){var dt=String(Xe),gt=T.call(V,dt.length+1);return S.call(dt,_e,"$&_")+"."+S.call(S.call(gt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return S.call(V,_e,"$&_")}var D=G8,Y=D.custom,Z=re(Y)?Y:null,se={__proto__:null,double:'"',single:"'"},ne={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Ch=function J(V,_e,Xe,dt){var gt=_e||{};if(Se(gt,"quoteStyle")&&!Se(se,gt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Se(gt,"maxStringLength")&&(typeof gt.maxStringLength=="number"?gt.maxStringLength<0&&gt.maxStringLength!==1/0:gt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var gr=Se(gt,"customInspect")?gt.customInspect:!0;if(typeof gr!="boolean"&&gr!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Se(gt,"indent")&&gt.indent!==null&&gt.indent!=="	"&&!(parseInt(gt.indent,10)===gt.indent&&gt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Se(gt,"numericSeparator")&&typeof gt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Ir=gt.numericSeparator;if(typeof V>"u")return"undefined";if(V===null)return"null";if(typeof V=="boolean")return V?"true":"false";if(typeof V=="string")return it(V,gt);if(typeof V=="number"){if(V===0)return 1/0/V>0?"0":"-0";var Ar=String(V);return Ir?M(V,Ar):Ar}if(typeof V=="bigint"){var Gr=String(V)+"n";return Ir?M(V,Gr):Gr}var Lt=typeof gt.depth>"u"?5:gt.depth;if(typeof Xe>"u"&&(Xe=0),Xe>=Lt&&Lt>0&&typeof V=="object")return We(V)?"[Array]":"[Object]";var sr=mr(gt,Xe);if(typeof dt>"u")dt=[];else if(Pe(dt,V)>=0)return"[Circular]";function rn(qn,Vn,wi){if(Vn&&(dt=E.call(dt),dt.push(Vn)),wi){var _i={depth:gt.depth};return Se(gt,"quoteStyle")&&(_i.quoteStyle=gt.quoteStyle),J(qn,_i,Xe+1,dt)}return J(qn,gt,Xe+1,dt)}if(typeof V=="function"&&!xe(V)){var Al=qe(V),hs=fe(V,rn);return"[Function"+(Al?": "+Al:" (anonymous)")+"]"+(hs.length>0?" { "+O.call(hs,", ")+" }":"")}if(re(V)){var yi=F?S.call(String(V),/^(Symbol\(.*\))_[^)]*$/,"$1"):B.call(V);return typeof V=="object"&&!F?bt(yi):yi}if(Ce(V)){for(var Un="<"+C.call(String(V.nodeName)),Sa=V.attributes||[],Ha=0;Ha<Sa.length;Ha++)Un+=" "+Sa[Ha].name+"="+me(ve(Sa[Ha].value),"double",gt);return Un+=">",V.childNodes&&V.childNodes.length&&(Un+="..."),Un+="</"+C.call(String(V.nodeName))+">",Un}if(We(V)){if(V.length===0)return"[]";var ms=fe(V,rn);return sr&&!kr(ms)?"["+ce(ms,sr)+"]":"[ "+O.call(ms,", ")+" ]"}if(ze(V)){var bi=fe(V,rn);return!("cause"in Error.prototype)&&"cause"in V&&!H.call(V,"cause")?"{ ["+String(V)+"] "+O.call(f.call("[cause]: "+rn(V.cause),bi),", ")+" }":bi.length===0?"["+String(V)+"]":"{ ["+String(V)+"] "+O.call(bi,", ")+" }"}if(typeof V=="object"&&gr){if(Z&&typeof V[Z]=="function"&&D)return D(V,{depth:Lt-Xe});if(gr!=="symbol"&&typeof V.inspect=="function")return V.inspect()}if(Me(V)){var Ol=[];return n&&n.call(V,function(qn,Vn){Ol.push(rn(Vn,V,!0)+" => "+rn(qn,V))}),Ot("Map",r.call(V),Ol,sr)}if(Ge(V)){var Ae=[];return i&&i.call(V,function(qn){Ae.push(rn(qn,V))}),Ot("Set",o.call(V),Ae,sr)}if($e(V))return pr("WeakMap");if(ye(V))return pr("WeakSet");if(nt(V))return pr("WeakRef");if(rt(V))return bt(rn(Number(V)));if(ge(V))return bt(rn($.call(V)));if(X(V))return bt(m.call(V));if(Ne(V))return bt(rn(String(V)));if(typeof window<"u"&&V===window)return"{ [object Window] }";if(typeof globalThis<"u"&&V===globalThis||typeof wb<"u"&&V===wb)return"{ [object globalThis] }";if(!Ke(V)&&!xe(V)){var at=fe(V,rn),Bt=q?q(V)===Object.prototype:V instanceof Object||V.constructor===Object,Or=V instanceof Object?"":"null prototype",Yr=!Bt&&R&&Object(V)===V&&R in V?T.call(ke(V),8,-1):Or?"Object":"",gs=Bt||typeof V.constructor!="function"?"":V.constructor.name?V.constructor.name+" ":"",Jr=gs+(Yr||Or?"["+O.call(f.call([],Yr||[],Or||[]),": ")+"] ":"");return at.length===0?Jr+"{}":sr?Jr+"{"+ce(at,sr)+"}":Jr+"{ "+O.call(at,", ")+" }"}return String(V)};function me(J,V,_e){var Xe=_e.quoteStyle||V,dt=se[Xe];return dt+J+dt}function ve(J){return S.call(String(J),/"/g,"&quot;")}function We(J){return ke(J)==="[object Array]"&&(!R||!(typeof J=="object"&&R in J))}function Ke(J){return ke(J)==="[object Date]"&&(!R||!(typeof J=="object"&&R in J))}function xe(J){return ke(J)==="[object RegExp]"&&(!R||!(typeof J=="object"&&R in J))}function ze(J){return ke(J)==="[object Error]"&&(!R||!(typeof J=="object"&&R in J))}function Ne(J){return ke(J)==="[object String]"&&(!R||!(typeof J=="object"&&R in J))}function rt(J){return ke(J)==="[object Number]"&&(!R||!(typeof J=="object"&&R in J))}function X(J){return ke(J)==="[object Boolean]"&&(!R||!(typeof J=="object"&&R in J))}function re(J){if(F)return J&&typeof J=="object"&&J instanceof Symbol;if(typeof J=="symbol")return!0;if(!J||typeof J!="object"||!B)return!1;try{return B.call(J),!0}catch{}return!1}function ge(J){if(!J||typeof J!="object"||!$)return!1;try{return $.call(J),!0}catch{}return!1}var Re=Object.prototype.hasOwnProperty||function(J){return J in this};function Se(J,V){return Re.call(J,V)}function ke(J){return h.call(J)}function qe(J){if(J.name)return J.name;var V=y.call(v.call(J),/^function\s*([\w$]+)/);return V?V[1]:null}function Pe(J,V){if(J.indexOf)return J.indexOf(V);for(var _e=0,Xe=J.length;_e<Xe;_e++)if(J[_e]===V)return _e;return-1}function Me(J){if(!r||!J||typeof J!="object")return!1;try{r.call(J);try{o.call(J)}catch{return!0}return J instanceof Map}catch{}return!1}function $e(J){if(!u||!J||typeof J!="object")return!1;try{u.call(J,u);try{d.call(J,d)}catch{return!0}return J instanceof WeakMap}catch{}return!1}function nt(J){if(!b||!J||typeof J!="object")return!1;try{return b.call(J),!0}catch{}return!1}function Ge(J){if(!o||!J||typeof J!="object")return!1;try{o.call(J);try{r.call(J)}catch{return!0}return J instanceof Set}catch{}return!1}function ye(J){if(!d||!J||typeof J!="object")return!1;try{d.call(J,d);try{u.call(J,u)}catch{return!0}return J instanceof WeakSet}catch{}return!1}function Ce(J){return!J||typeof J!="object"?!1:typeof HTMLElement<"u"&&J instanceof HTMLElement?!0:typeof J.nodeName=="string"&&typeof J.getAttribute=="function"}function it(J,V){if(J.length>V.maxStringLength){var _e=J.length-V.maxStringLength,Xe="... "+_e+" more character"+(_e>1?"s":"");return it(T.call(J,0,V.maxStringLength),V)+Xe}var dt=ne[V.quoteStyle||"single"];dt.lastIndex=0;var gt=S.call(S.call(J,dt,"\\$1"),/[\x00-\x1f]/g,Et);return me(gt,"single",V)}function Et(J){var V=J.charCodeAt(0),_e={8:"b",9:"t",10:"n",12:"f",13:"r"}[V];return _e?"\\"+_e:"\\x"+(V<16?"0":"")+w.call(V.toString(16))}function bt(J){return"Object("+J+")"}function pr(J){return J+" { ? }"}function Ot(J,V,_e,Xe){var dt=Xe?ce(_e,Xe):O.call(_e,", ");return J+" ("+V+") {"+dt+"}"}function kr(J){for(var V=0;V<J.length;V++)if(Pe(J[V],`
`)>=0)return!1;return!0}function mr(J,V){var _e;if(J.indent==="	")_e="	";else if(typeof J.indent=="number"&&J.indent>0)_e=O.call(Array(J.indent+1)," ");else return null;return{base:_e,prev:O.call(Array(V+1),_e)}}function ce(J,V){if(J.length===0)return"";var _e=`
`+V.prev+V.base;return _e+O.call(J,","+_e)+`
`+V.prev}function fe(J,V){var _e=We(J),Xe=[];if(_e){Xe.length=J.length;for(var dt=0;dt<J.length;dt++)Xe[dt]=Se(J,dt)?V(J[dt],J):""}var gt=typeof L=="function"?L(J):[],gr;if(F){gr={};for(var Ir=0;Ir<gt.length;Ir++)gr["$"+gt[Ir]]=gt[Ir]}for(var Ar in J)Se(J,Ar)&&(_e&&String(Number(Ar))===Ar&&Ar<J.length||F&&gr["$"+Ar]instanceof Symbol||(k.call(/[^\w$]/,Ar)?Xe.push(V(Ar,J)+": "+V(J[Ar],J)):Xe.push(Ar+": "+V(J[Ar],J))));if(typeof L=="function")for(var Gr=0;Gr<gt.length;Gr++)H.call(J,gt[Gr])&&Xe.push("["+V(gt[Gr])+"]: "+V(J[gt[Gr]],J));return Xe}return Ch}var kh,e1;function Y8(){if(e1)return kh;e1=1;var e=Uc(),t=$i(),r=function(i,l,u){for(var c=i,d;(d=c.next)!=null;c=d)if(d.key===l)return c.next=d.next,u||(d.next=i.next,i.next=d),d},n=function(i,l){if(i){var u=r(i,l);return u&&u.value}},a=function(i,l,u){var c=r(i,l);c?c.value=u:i.next={key:l,next:i.next,value:u}},s=function(i,l){return i?!!r(i,l):!1},o=function(i,l){if(i)return r(i,l,!0)};return kh=function(){var l,u={assert:function(c){if(!u.has(c))throw new t("Side channel does not contain "+e(c))},delete:function(c){var d=l&&l.next,p=o(l,c);return p&&d&&d===p&&(l=void 0),!!p},get:function(c){return n(l,c)},has:function(c){return s(l,c)},set:function(c,d){l||(l={next:void 0}),a(l,c,d)}};return u},kh}var Ih,t1;function J8(){return t1||(t1=1,Ih=Object),Ih}var Ah,r1;function X8(){return r1||(r1=1,Ah=Error),Ah}var Oh,n1;function Q8(){return n1||(n1=1,Oh=EvalError),Oh}var Ph,a1;function Z8(){return a1||(a1=1,Ph=RangeError),Ph}var Eh,s1;function e6(){return s1||(s1=1,Eh=ReferenceError),Eh}var $h,o1;function t6(){return o1||(o1=1,$h=SyntaxError),$h}var Rh,i1;function r6(){return i1||(i1=1,Rh=URIError),Rh}var Lh,l1;function n6(){return l1||(l1=1,Lh=Math.abs),Lh}var Mh,u1;function a6(){return u1||(u1=1,Mh=Math.floor),Mh}var Dh,c1;function s6(){return c1||(c1=1,Dh=Math.max),Dh}var Nh,d1;function o6(){return d1||(d1=1,Nh=Math.min),Nh}var Fh,f1;function i6(){return f1||(f1=1,Fh=Math.pow),Fh}var Bh,p1;function l6(){return p1||(p1=1,Bh=Math.round),Bh}var jh,h1;function u6(){return h1||(h1=1,jh=Number.isNaN||function(t){return t!==t}),jh}var Uh,m1;function c6(){if(m1)return Uh;m1=1;var e=u6();return Uh=function(r){return e(r)||r===0?r:r<0?-1:1},Uh}var qh,g1;function d6(){return g1||(g1=1,qh=Object.getOwnPropertyDescriptor),qh}var Vh,v1;function y1(){if(v1)return Vh;v1=1;var e=d6();if(e)try{e([],"length")}catch{e=null}return Vh=e,Vh}var Hh,b1;function f6(){if(b1)return Hh;b1=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Hh=e,Hh}var zh,w1;function p6(){return w1||(w1=1,zh=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var a=42;t[r]=a;for(var s in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(t,r);if(i.value!==a||i.enumerable!==!0)return!1}return!0}),zh}var Wh,_1;function h6(){if(_1)return Wh;_1=1;var e=typeof Symbol<"u"&&Symbol,t=p6();return Wh=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Wh}var Kh,S1;function T1(){return S1||(S1=1,Kh=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),Kh}var Gh,x1;function m6(){return x1||(x1=1,Gh=Object),Gh}var Yh,C1;function k1(){if(C1)return Yh;C1=1;var e=m6();return Yh=e.getPrototypeOf||null,Yh}var Jh,I1;function g6(){if(I1)return Jh;I1=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,n="[object Function]",a=function(l,u){for(var c=[],d=0;d<l.length;d+=1)c[d]=l[d];for(var p=0;p<u.length;p+=1)c[p+l.length]=u[p];return c},s=function(l,u){for(var c=[],d=u,p=0;d<l.length;d+=1,p+=1)c[p]=l[d];return c},o=function(i,l){for(var u="",c=0;c<i.length;c+=1)u+=i[c],c+1<i.length&&(u+=l);return u};return Jh=function(l){var u=this;if(typeof u!="function"||t.apply(u)!==n)throw new TypeError(e+u);for(var c=s(arguments,1),d,p=function(){if(this instanceof d){var y=u.apply(this,a(c,arguments));return Object(y)===y?y:this}return u.apply(l,a(c,arguments))},b=r(0,u.length-c.length),m=[],h=0;h<b;h++)m[h]="$"+h;if(d=Function("binder","return function ("+o(m,",")+"){ return binder.apply(this,arguments); }")(p),u.prototype){var v=function(){};v.prototype=u.prototype,d.prototype=new v,v.prototype=null}return d},Jh}var Xh,A1;function qc(){if(A1)return Xh;A1=1;var e=g6();return Xh=Function.prototype.bind||e,Xh}var Qh,O1;function Zh(){return O1||(O1=1,Qh=Function.prototype.call),Qh}var em,P1;function E1(){return P1||(P1=1,em=Function.prototype.apply),em}var tm,$1;function v6(){return $1||($1=1,tm=typeof Reflect<"u"&&Reflect&&Reflect.apply),tm}var rm,R1;function y6(){if(R1)return rm;R1=1;var e=qc(),t=E1(),r=Zh(),n=v6();return rm=n||e.call(r,t),rm}var nm,L1;function M1(){if(L1)return nm;L1=1;var e=qc(),t=$i(),r=Zh(),n=y6();return nm=function(s){if(s.length<1||typeof s[0]!="function")throw new t("a function is required");return n(e,r,s)},nm}var am,D1;function b6(){if(D1)return am;D1=1;var e=M1(),t=y1(),r;try{r=[].__proto__===Array.prototype}catch(o){if(!o||typeof o!="object"||!("code"in o)||o.code!=="ERR_PROTO_ACCESS")throw o}var n=!!r&&t&&t(Object.prototype,"__proto__"),a=Object,s=a.getPrototypeOf;return am=n&&typeof n.get=="function"?e([n.get]):typeof s=="function"?function(i){return s(i==null?i:a(i))}:!1,am}var sm,N1;function w6(){if(N1)return sm;N1=1;var e=T1(),t=k1(),r=b6();return sm=e?function(a){return e(a)}:t?function(a){if(!a||typeof a!="object"&&typeof a!="function")throw new TypeError("getProto: not an object");return t(a)}:r?function(a){return r(a)}:null,sm}var om,F1;function _6(){if(F1)return om;F1=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=qc();return om=r.call(e,t),om}var im,B1;function lm(){if(B1)return im;B1=1;var e,t=J8(),r=X8(),n=Q8(),a=Z8(),s=e6(),o=t6(),i=$i(),l=r6(),u=n6(),c=a6(),d=s6(),p=o6(),b=i6(),m=l6(),h=c6(),v=Function,y=function(ze){try{return v('"use strict"; return ('+ze+").constructor;")()}catch{}},T=y1(),S=f6(),w=function(){throw new i},C=T?(function(){try{return arguments.callee,w}catch{try{return T(arguments,"callee").get}catch{return w}}})():w,k=h6()(),f=w6(),O=k1(),E=T1(),N=E1(),$=Zh(),L={},B=typeof Uint8Array>"u"||!f?e:f(Uint8Array),F={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":k&&f?f([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":L,"%AsyncGenerator%":L,"%AsyncGeneratorFunction%":L,"%AsyncIteratorPrototype%":L,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":L,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":k&&f?f(f([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!k||!f?e:f(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":T,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":a,"%ReferenceError%":s,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!k||!f?e:f(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":k&&f?f(""[Symbol.iterator]()):e,"%Symbol%":k?Symbol:e,"%SyntaxError%":o,"%ThrowTypeError%":C,"%TypedArray%":B,"%TypeError%":i,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":l,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":$,"%Function.prototype.apply%":N,"%Object.defineProperty%":S,"%Object.getPrototypeOf%":O,"%Math.abs%":u,"%Math.floor%":c,"%Math.max%":d,"%Math.min%":p,"%Math.pow%":b,"%Math.round%":m,"%Math.sign%":h,"%Reflect.getPrototypeOf%":E};if(f)try{null.error}catch(ze){var R=f(f(ze));F["%Error.prototype%"]=R}var H=function ze(Ne){var rt;if(Ne==="%AsyncFunction%")rt=y("async function () {}");else if(Ne==="%GeneratorFunction%")rt=y("function* () {}");else if(Ne==="%AsyncGeneratorFunction%")rt=y("async function* () {}");else if(Ne==="%AsyncGenerator%"){var X=ze("%AsyncGeneratorFunction%");X&&(rt=X.prototype)}else if(Ne==="%AsyncIteratorPrototype%"){var re=ze("%AsyncGenerator%");re&&f&&(rt=f(re.prototype))}return F[Ne]=rt,rt},q={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=qc(),D=_6(),Y=M.call($,Array.prototype.concat),Z=M.call(N,Array.prototype.splice),se=M.call($,String.prototype.replace),ne=M.call($,String.prototype.slice),me=M.call($,RegExp.prototype.exec),ve=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,We=/\\(\\)?/g,Ke=function(Ne){var rt=ne(Ne,0,1),X=ne(Ne,-1);if(rt==="%"&&X!=="%")throw new o("invalid intrinsic syntax, expected closing `%`");if(X==="%"&&rt!=="%")throw new o("invalid intrinsic syntax, expected opening `%`");var re=[];return se(Ne,ve,function(ge,Re,Se,ke){re[re.length]=Se?se(ke,We,"$1"):Re||ge}),re},xe=function(Ne,rt){var X=Ne,re;if(D(q,X)&&(re=q[X],X="%"+re[0]+"%"),D(F,X)){var ge=F[X];if(ge===L&&(ge=H(X)),typeof ge>"u"&&!rt)throw new i("intrinsic "+Ne+" exists, but is not available. Please file an issue!");return{alias:re,name:X,value:ge}}throw new o("intrinsic "+Ne+" does not exist!")};return im=function(Ne,rt){if(typeof Ne!="string"||Ne.length===0)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof rt!="boolean")throw new i('"allowMissing" argument must be a boolean');if(me(/^%?[^%]*%?$/,Ne)===null)throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var X=Ke(Ne),re=X.length>0?X[0]:"",ge=xe("%"+re+"%",rt),Re=ge.name,Se=ge.value,ke=!1,qe=ge.alias;qe&&(re=qe[0],Z(X,Y([0,1],qe)));for(var Pe=1,Me=!0;Pe<X.length;Pe+=1){var $e=X[Pe],nt=ne($e,0,1),Ge=ne($e,-1);if((nt==='"'||nt==="'"||nt==="`"||Ge==='"'||Ge==="'"||Ge==="`")&&nt!==Ge)throw new o("property names with quotes must have matching quotes");if(($e==="constructor"||!Me)&&(ke=!0),re+="."+$e,Re="%"+re+"%",D(F,Re))Se=F[Re];else if(Se!=null){if(!($e in Se)){if(!rt)throw new i("base intrinsic for "+Ne+" exists, but the property is not available.");return}if(T&&Pe+1>=X.length){var ye=T(Se,$e);Me=!!ye,Me&&"get"in ye&&!("originalValue"in ye.get)?Se=ye.get:Se=Se[$e]}else Me=D(Se,$e),Se=Se[$e];Me&&!ke&&(F[Re]=Se)}}return Se},im}var um,j1;function U1(){if(j1)return um;j1=1;var e=lm(),t=M1(),r=t([e("%String.prototype.indexOf%")]);return um=function(a,s){var o=e(a,!!s);return typeof o=="function"&&r(a,".prototype.")>-1?t([o]):o},um}var cm,q1;function V1(){if(q1)return cm;q1=1;var e=lm(),t=U1(),r=Uc(),n=$i(),a=e("%Map%",!0),s=t("Map.prototype.get",!0),o=t("Map.prototype.set",!0),i=t("Map.prototype.has",!0),l=t("Map.prototype.delete",!0),u=t("Map.prototype.size",!0);return cm=!!a&&function(){var d,p={assert:function(b){if(!p.has(b))throw new n("Side channel does not contain "+r(b))},delete:function(b){if(d){var m=l(d,b);return u(d)===0&&(d=void 0),m}return!1},get:function(b){if(d)return s(d,b)},has:function(b){return d?i(d,b):!1},set:function(b,m){d||(d=new a),o(d,b,m)}};return p},cm}var dm,H1;function S6(){if(H1)return dm;H1=1;var e=lm(),t=U1(),r=Uc(),n=V1(),a=$i(),s=e("%WeakMap%",!0),o=t("WeakMap.prototype.get",!0),i=t("WeakMap.prototype.set",!0),l=t("WeakMap.prototype.has",!0),u=t("WeakMap.prototype.delete",!0);return dm=s?function(){var d,p,b={assert:function(m){if(!b.has(m))throw new a("Side channel does not contain "+r(m))},delete:function(m){if(s&&m&&(typeof m=="object"||typeof m=="function")){if(d)return u(d,m)}else if(n&&p)return p.delete(m);return!1},get:function(m){return s&&m&&(typeof m=="object"||typeof m=="function")&&d?o(d,m):p&&p.get(m)},has:function(m){return s&&m&&(typeof m=="object"||typeof m=="function")&&d?l(d,m):!!p&&p.has(m)},set:function(m,h){s&&m&&(typeof m=="object"||typeof m=="function")?(d||(d=new s),i(d,m,h)):n&&(p||(p=n()),p.set(m,h))}};return b}:n,dm}var fm,z1;function T6(){if(z1)return fm;z1=1;var e=$i(),t=Uc(),r=Y8(),n=V1(),a=S6(),s=a||n||r;return fm=function(){var i,l={assert:function(u){if(!l.has(u))throw new e("Side channel does not contain "+t(u))},delete:function(u){return!!i&&i.delete(u)},get:function(u){return i&&i.get(u)},has:function(u){return!!i&&i.has(u)},set:function(u,c){i||(i=s()),i.set(u,c)}};return l},fm}var pm,W1;function hm(){if(W1)return pm;W1=1;var e=String.prototype.replace,t=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return pm={default:r.RFC3986,formatters:{RFC1738:function(n){return e.call(n,t,"+")},RFC3986:function(n){return String(n)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},pm}var mm,K1;function G1(){if(K1)return mm;K1=1;var e=hm(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n=(function(){for(var v=[],y=0;y<256;++y)v.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return v})(),a=function(y){for(;y.length>1;){var T=y.pop(),S=T.obj[T.prop];if(r(S)){for(var w=[],C=0;C<S.length;++C)typeof S[C]<"u"&&w.push(S[C]);T.obj[T.prop]=w}}},s=function(y,T){for(var S=T&&T.plainObjects?{__proto__:null}:{},w=0;w<y.length;++w)typeof y[w]<"u"&&(S[w]=y[w]);return S},o=function v(y,T,S){if(!T)return y;if(typeof T!="object"&&typeof T!="function"){if(r(y))y.push(T);else if(y&&typeof y=="object")(S&&(S.plainObjects||S.allowPrototypes)||!t.call(Object.prototype,T))&&(y[T]=!0);else return[y,T];return y}if(!y||typeof y!="object")return[y].concat(T);var w=y;return r(y)&&!r(T)&&(w=s(y,S)),r(y)&&r(T)?(T.forEach(function(C,k){if(t.call(y,k)){var f=y[k];f&&typeof f=="object"&&C&&typeof C=="object"?y[k]=v(f,C,S):y.push(C)}else y[k]=C}),y):Object.keys(T).reduce(function(C,k){var f=T[k];return t.call(C,k)?C[k]=v(C[k],f,S):C[k]=f,C},w)},i=function(y,T){return Object.keys(T).reduce(function(S,w){return S[w]=T[w],S},y)},l=function(v,y,T){var S=v.replace(/\+/g," ");if(T==="iso-8859-1")return S.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(S)}catch{return S}},u=1024,c=function(y,T,S,w,C){if(y.length===0)return y;var k=y;if(typeof y=="symbol"?k=Symbol.prototype.toString.call(y):typeof y!="string"&&(k=String(y)),S==="iso-8859-1")return escape(k).replace(/%u[0-9a-f]{4}/gi,function(B){return"%26%23"+parseInt(B.slice(2),16)+"%3B"});for(var f="",O=0;O<k.length;O+=u){for(var E=k.length>=u?k.slice(O,O+u):k,N=[],$=0;$<E.length;++$){var L=E.charCodeAt($);if(L===45||L===46||L===95||L===126||L>=48&&L<=57||L>=65&&L<=90||L>=97&&L<=122||C===e.RFC1738&&(L===40||L===41)){N[N.length]=E.charAt($);continue}if(L<128){N[N.length]=n[L];continue}if(L<2048){N[N.length]=n[192|L>>6]+n[128|L&63];continue}if(L<55296||L>=57344){N[N.length]=n[224|L>>12]+n[128|L>>6&63]+n[128|L&63];continue}$+=1,L=65536+((L&1023)<<10|E.charCodeAt($)&1023),N[N.length]=n[240|L>>18]+n[128|L>>12&63]+n[128|L>>6&63]+n[128|L&63]}f+=N.join("")}return f},d=function(y){for(var T=[{obj:{o:y},prop:"o"}],S=[],w=0;w<T.length;++w)for(var C=T[w],k=C.obj[C.prop],f=Object.keys(k),O=0;O<f.length;++O){var E=f[O],N=k[E];typeof N=="object"&&N!==null&&S.indexOf(N)===-1&&(T.push({obj:k,prop:E}),S.push(N))}return a(T),y},p=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},b=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},m=function(y,T){return[].concat(y,T)},h=function(y,T){if(r(y)){for(var S=[],w=0;w<y.length;w+=1)S.push(T(y[w]));return S}return T(y)};return mm={arrayToObject:s,assign:i,combine:m,compact:d,decode:l,encode:c,isBuffer:b,isRegExp:p,maybeMap:h,merge:o},mm}var gm,Y1;function x6(){if(Y1)return gm;Y1=1;var e=T6(),t=G1(),r=hm(),n=Object.prototype.hasOwnProperty,a={brackets:function(v){return v+"[]"},comma:"comma",indices:function(v,y){return v+"["+y+"]"},repeat:function(v){return v}},s=Array.isArray,o=Array.prototype.push,i=function(h,v){o.apply(h,s(v)?v:[v])},l=Date.prototype.toISOString,u=r.default,c={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:u,formatter:r.formatters[u],indices:!1,serializeDate:function(v){return l.call(v)},skipNulls:!1,strictNullHandling:!1},d=function(v){return typeof v=="string"||typeof v=="number"||typeof v=="boolean"||typeof v=="symbol"||typeof v=="bigint"},p={},b=function h(v,y,T,S,w,C,k,f,O,E,N,$,L,B,F,R,H,q){for(var M=v,D=q,Y=0,Z=!1;(D=D.get(p))!==void 0&&!Z;){var se=D.get(v);if(Y+=1,typeof se<"u"){if(se===Y)throw new RangeError("Cyclic object value");Z=!0}typeof D.get(p)>"u"&&(Y=0)}if(typeof E=="function"?M=E(y,M):M instanceof Date?M=L(M):T==="comma"&&s(M)&&(M=t.maybeMap(M,function(Re){return Re instanceof Date?L(Re):Re})),M===null){if(C)return O&&!R?O(y,c.encoder,H,"key",B):y;M=""}if(d(M)||t.isBuffer(M)){if(O){var ne=R?y:O(y,c.encoder,H,"key",B);return[F(ne)+"="+F(O(M,c.encoder,H,"value",B))]}return[F(y)+"="+F(String(M))]}var me=[];if(typeof M>"u")return me;var ve;if(T==="comma"&&s(M))R&&O&&(M=t.maybeMap(M,O)),ve=[{value:M.length>0?M.join(",")||null:void 0}];else if(s(E))ve=E;else{var We=Object.keys(M);ve=N?We.sort(N):We}var Ke=f?String(y).replace(/\./g,"%2E"):String(y),xe=S&&s(M)&&M.length===1?Ke+"[]":Ke;if(w&&s(M)&&M.length===0)return xe+"[]";for(var ze=0;ze<ve.length;++ze){var Ne=ve[ze],rt=typeof Ne=="object"&&Ne&&typeof Ne.value<"u"?Ne.value:M[Ne];if(!(k&&rt===null)){var X=$&&f?String(Ne).replace(/\./g,"%2E"):String(Ne),re=s(M)?typeof T=="function"?T(xe,X):xe:xe+($?"."+X:"["+X+"]");q.set(v,Y);var ge=e();ge.set(p,q),i(me,h(rt,re,T,S,w,C,k,f,T==="comma"&&R&&s(M)?null:O,E,N,$,L,B,F,R,H,ge))}}return me},m=function(v){if(!v)return c;if(typeof v.allowEmptyArrays<"u"&&typeof v.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof v.encodeDotInKeys<"u"&&typeof v.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(v.encoder!==null&&typeof v.encoder<"u"&&typeof v.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=v.charset||c.charset;if(typeof v.charset<"u"&&v.charset!=="utf-8"&&v.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var T=r.default;if(typeof v.format<"u"){if(!n.call(r.formatters,v.format))throw new TypeError("Unknown format option provided.");T=v.format}var S=r.formatters[T],w=c.filter;(typeof v.filter=="function"||s(v.filter))&&(w=v.filter);var C;if(v.arrayFormat in a?C=v.arrayFormat:"indices"in v?C=v.indices?"indices":"repeat":C=c.arrayFormat,"commaRoundTrip"in v&&typeof v.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var k=typeof v.allowDots>"u"?v.encodeDotInKeys===!0?!0:c.allowDots:!!v.allowDots;return{addQueryPrefix:typeof v.addQueryPrefix=="boolean"?v.addQueryPrefix:c.addQueryPrefix,allowDots:k,allowEmptyArrays:typeof v.allowEmptyArrays=="boolean"?!!v.allowEmptyArrays:c.allowEmptyArrays,arrayFormat:C,charset:y,charsetSentinel:typeof v.charsetSentinel=="boolean"?v.charsetSentinel:c.charsetSentinel,commaRoundTrip:!!v.commaRoundTrip,delimiter:typeof v.delimiter>"u"?c.delimiter:v.delimiter,encode:typeof v.encode=="boolean"?v.encode:c.encode,encodeDotInKeys:typeof v.encodeDotInKeys=="boolean"?v.encodeDotInKeys:c.encodeDotInKeys,encoder:typeof v.encoder=="function"?v.encoder:c.encoder,encodeValuesOnly:typeof v.encodeValuesOnly=="boolean"?v.encodeValuesOnly:c.encodeValuesOnly,filter:w,format:T,formatter:S,serializeDate:typeof v.serializeDate=="function"?v.serializeDate:c.serializeDate,skipNulls:typeof v.skipNulls=="boolean"?v.skipNulls:c.skipNulls,sort:typeof v.sort=="function"?v.sort:null,strictNullHandling:typeof v.strictNullHandling=="boolean"?v.strictNullHandling:c.strictNullHandling}};return gm=function(h,v){var y=h,T=m(v),S,w;typeof T.filter=="function"?(w=T.filter,y=w("",y)):s(T.filter)&&(w=T.filter,S=w);var C=[];if(typeof y!="object"||y===null)return"";var k=a[T.arrayFormat],f=k==="comma"&&T.commaRoundTrip;S||(S=Object.keys(y)),T.sort&&S.sort(T.sort);for(var O=e(),E=0;E<S.length;++E){var N=S[E],$=y[N];T.skipNulls&&$===null||i(C,b($,N,k,f,T.allowEmptyArrays,T.strictNullHandling,T.skipNulls,T.encodeDotInKeys,T.encode?T.encoder:null,T.filter,T.sort,T.allowDots,T.serializeDate,T.format,T.formatter,T.encodeValuesOnly,T.charset,O))}var L=C.join(T.delimiter),B=T.addQueryPrefix===!0?"?":"";return T.charsetSentinel&&(T.charset==="iso-8859-1"?B+="utf8=%26%2310003%3B&":B+="utf8=%E2%9C%93&"),L.length>0?B+L:""},gm}var vm,J1;function C6(){if(J1)return vm;J1=1;var e=G1(),t=Object.prototype.hasOwnProperty,r=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:e.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},a=function(p){return p.replace(/&#(\d+);/g,function(b,m){return String.fromCharCode(parseInt(m,10))})},s=function(p,b,m){if(p&&typeof p=="string"&&b.comma&&p.indexOf(",")>-1)return p.split(",");if(b.throwOnLimitExceeded&&m>=b.arrayLimit)throw new RangeError("Array limit exceeded. Only "+b.arrayLimit+" element"+(b.arrayLimit===1?"":"s")+" allowed in an array.");return p},o="utf8=%26%2310003%3B",i="utf8=%E2%9C%93",l=function(b,m){var h={__proto__:null},v=m.ignoreQueryPrefix?b.replace(/^\?/,""):b;v=v.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=m.parameterLimit===1/0?void 0:m.parameterLimit,T=v.split(m.delimiter,m.throwOnLimitExceeded?y+1:y);if(m.throwOnLimitExceeded&&T.length>y)throw new RangeError("Parameter limit exceeded. Only "+y+" parameter"+(y===1?"":"s")+" allowed.");var S=-1,w,C=m.charset;if(m.charsetSentinel)for(w=0;w<T.length;++w)T[w].indexOf("utf8=")===0&&(T[w]===i?C="utf-8":T[w]===o&&(C="iso-8859-1"),S=w,w=T.length);for(w=0;w<T.length;++w)if(w!==S){var k=T[w],f=k.indexOf("]="),O=f===-1?k.indexOf("="):f+1,E,N;O===-1?(E=m.decoder(k,n.decoder,C,"key"),N=m.strictNullHandling?null:""):(E=m.decoder(k.slice(0,O),n.decoder,C,"key"),N=e.maybeMap(s(k.slice(O+1),m,r(h[E])?h[E].length:0),function(L){return m.decoder(L,n.decoder,C,"value")})),N&&m.interpretNumericEntities&&C==="iso-8859-1"&&(N=a(String(N))),k.indexOf("[]=")>-1&&(N=r(N)?[N]:N);var $=t.call(h,E);$&&m.duplicates==="combine"?h[E]=e.combine(h[E],N):(!$||m.duplicates==="last")&&(h[E]=N)}return h},u=function(p,b,m,h){var v=0;if(p.length>0&&p[p.length-1]==="[]"){var y=p.slice(0,-1).join("");v=Array.isArray(b)&&b[y]?b[y].length:0}for(var T=h?b:s(b,m,v),S=p.length-1;S>=0;--S){var w,C=p[S];if(C==="[]"&&m.parseArrays)w=m.allowEmptyArrays&&(T===""||m.strictNullHandling&&T===null)?[]:e.combine([],T);else{w=m.plainObjects?{__proto__:null}:{};var k=C.charAt(0)==="["&&C.charAt(C.length-1)==="]"?C.slice(1,-1):C,f=m.decodeDotInKeys?k.replace(/%2E/g,"."):k,O=parseInt(f,10);!m.parseArrays&&f===""?w={0:T}:!isNaN(O)&&C!==f&&String(O)===f&&O>=0&&m.parseArrays&&O<=m.arrayLimit?(w=[],w[O]=T):f!=="__proto__"&&(w[f]=T)}T=w}return T},c=function(b,m,h,v){if(b){var y=h.allowDots?b.replace(/\.([^.[]+)/g,"[$1]"):b,T=/(\[[^[\]]*])/,S=/(\[[^[\]]*])/g,w=h.depth>0&&T.exec(y),C=w?y.slice(0,w.index):y,k=[];if(C){if(!h.plainObjects&&t.call(Object.prototype,C)&&!h.allowPrototypes)return;k.push(C)}for(var f=0;h.depth>0&&(w=S.exec(y))!==null&&f<h.depth;){if(f+=1,!h.plainObjects&&t.call(Object.prototype,w[1].slice(1,-1))&&!h.allowPrototypes)return;k.push(w[1])}if(w){if(h.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+h.depth+" and strictDepth is true");k.push("["+y.slice(w.index)+"]")}return u(k,m,h,v)}},d=function(b){if(!b)return n;if(typeof b.allowEmptyArrays<"u"&&typeof b.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof b.decodeDotInKeys<"u"&&typeof b.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(b.decoder!==null&&typeof b.decoder<"u"&&typeof b.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof b.charset<"u"&&b.charset!=="utf-8"&&b.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof b.throwOnLimitExceeded<"u"&&typeof b.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var m=typeof b.charset>"u"?n.charset:b.charset,h=typeof b.duplicates>"u"?n.duplicates:b.duplicates;if(h!=="combine"&&h!=="first"&&h!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var v=typeof b.allowDots>"u"?b.decodeDotInKeys===!0?!0:n.allowDots:!!b.allowDots;return{allowDots:v,allowEmptyArrays:typeof b.allowEmptyArrays=="boolean"?!!b.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof b.allowPrototypes=="boolean"?b.allowPrototypes:n.allowPrototypes,allowSparse:typeof b.allowSparse=="boolean"?b.allowSparse:n.allowSparse,arrayLimit:typeof b.arrayLimit=="number"?b.arrayLimit:n.arrayLimit,charset:m,charsetSentinel:typeof b.charsetSentinel=="boolean"?b.charsetSentinel:n.charsetSentinel,comma:typeof b.comma=="boolean"?b.comma:n.comma,decodeDotInKeys:typeof b.decodeDotInKeys=="boolean"?b.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof b.decoder=="function"?b.decoder:n.decoder,delimiter:typeof b.delimiter=="string"||e.isRegExp(b.delimiter)?b.delimiter:n.delimiter,depth:typeof b.depth=="number"||b.depth===!1?+b.depth:n.depth,duplicates:h,ignoreQueryPrefix:b.ignoreQueryPrefix===!0,interpretNumericEntities:typeof b.interpretNumericEntities=="boolean"?b.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof b.parameterLimit=="number"?b.parameterLimit:n.parameterLimit,parseArrays:b.parseArrays!==!1,plainObjects:typeof b.plainObjects=="boolean"?b.plainObjects:n.plainObjects,strictDepth:typeof b.strictDepth=="boolean"?!!b.strictDepth:n.strictDepth,strictNullHandling:typeof b.strictNullHandling=="boolean"?b.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof b.throwOnLimitExceeded=="boolean"?b.throwOnLimitExceeded:!1}};return vm=function(p,b){var m=d(b);if(p===""||p===null||typeof p>"u")return m.plainObjects?{__proto__:null}:{};for(var h=typeof p=="string"?l(p,m):p,v=m.plainObjects?{__proto__:null}:{},y=Object.keys(h),T=0;T<y.length;++T){var S=y[T],w=c(S,h[S],m,typeof p=="string");v=e.merge(v,w,m)}return m.allowSparse===!0?v:e.compact(v)},vm}var ym,X1;function k6(){if(X1)return ym;X1=1;var e=x6(),t=C6(),r=hm();return ym={formats:r,parse:t,stringify:e},ym}var I6=k6();const eo=Sn(I6);var Q1=Object.prototype.hasOwnProperty;function bm(e,t){var r,n;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&bm(e[n],t[n]););return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(Q1.call(e,r)&&++n&&!Q1.call(t,r)||!(r in t)||!bm(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}const A6=new Error("request for lock canceled");var O6=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function i(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):a(c.value).then(i,l)}u((n=n.apply(e,t||[])).next())})};class P6{constructor(t,r=A6){this._value=t,this._cancelError=r,this._queue=[],this._weightedWaiters=[]}acquire(t=1,r=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise((n,a)=>{const s={resolve:n,reject:a,weight:t,priority:r},o=Z1(this._queue,i=>r<=i.priority);o===-1&&t<=this._value?this._dispatchItem(s):this._queue.splice(o+1,0,s)})}runExclusive(t){return O6(this,arguments,void 0,function*(r,n=1,a=0){const[s,o]=yield this.acquire(n,a);try{return yield r(s)}finally{o()}})}waitForUnlock(t=1,r=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return this._couldLockImmediately(t,r)?Promise.resolve():new Promise(n=>{this._weightedWaiters[t-1]||(this._weightedWaiters[t-1]=[]),E6(this._weightedWaiters[t-1],{resolve:n,priority:r})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(t){this._value=t,this._dispatchQueue()}release(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);this._value+=t,this._dispatchQueue()}cancel(){this._queue.forEach(t=>t.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(t){const r=this._value;this._value-=t.weight,t.resolve([r,this._newReleaser(t.weight)])}_newReleaser(t){let r=!1;return()=>{r||(r=!0,this.release(t))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let t=this._value;t>0;t--){const r=this._weightedWaiters[t-1];r&&(r.forEach(n=>n.resolve()),this._weightedWaiters[t-1]=[])}else{const t=this._queue[0].priority;for(let r=this._value;r>0;r--){const n=this._weightedWaiters[r-1];if(!n)continue;const a=n.findIndex(s=>s.priority<=t);(a===-1?n:n.splice(0,a)).forEach((s=>s.resolve()))}}}_couldLockImmediately(t,r){return(this._queue.length===0||this._queue[0].priority<r)&&t<=this._value}}function E6(e,t){const r=Z1(e,n=>t.priority<=n.priority);e.splice(r+1,0,t)}function Z1(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r]))return r;return-1}var $6=function(e,t,r,n){function a(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function i(c){try{u(n.next(c))}catch(d){o(d)}}function l(c){try{u(n.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):a(c.value).then(i,l)}u((n=n.apply(e,t||[])).next())})};class R6{constructor(t){this._semaphore=new P6(1,t)}acquire(){return $6(this,arguments,void 0,function*(t=0){const[,r]=yield this._semaphore.acquire(1,t);return r})}runExclusive(t,r=0){return this._semaphore.runExclusive(()=>t(),1,r)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(t=0){return this._semaphore.waitForUnlock(1,t)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const Vc=((VP=(qP=globalThis.browser)==null?void 0:qP.runtime)==null?void 0:VP.id)==null?globalThis.chrome:globalThis.browser,Ze=L6();function L6(){const e={local:Hc("local"),session:Hc("session"),sync:Hc("sync"),managed:Hc("managed")},t=h=>{const v=e[h];if(v==null){const y=Object.keys(e).join(", ");throw Error(`Invalid area "${h}". Options: ${y}`)}return v},r=h=>{const v=h.indexOf(":"),y=h.substring(0,v),T=h.substring(v+1);if(T==null)throw Error(`Storage key should be in the form of "area:key", but received "${h}"`);return{driverArea:y,driverKey:T,driver:t(y)}},n=h=>h+"$",a=(h,v)=>{const y={...h};return Object.entries(v).forEach(([T,S])=>{S==null?delete y[T]:y[T]=S}),y},s=(h,v)=>h??v??null,o=h=>typeof h=="object"&&!Array.isArray(h)?h:{},i=async(h,v,y)=>{const T=await h.getItem(v);return s(T,(y==null?void 0:y.fallback)??(y==null?void 0:y.defaultValue))},l=async(h,v)=>{const y=n(v),T=await h.getItem(y);return o(T)},u=async(h,v,y)=>{await h.setItem(v,y??null)},c=async(h,v,y)=>{const T=n(v),S=o(await h.getItem(T));await h.setItem(T,a(S,y))},d=async(h,v,y)=>{if(await h.removeItem(v),y!=null&&y.removeMeta){const T=n(v);await h.removeItem(T)}},p=async(h,v,y)=>{const T=n(v);if(y==null)await h.removeItem(T);else{const S=o(await h.getItem(T));[y].flat().forEach(w=>delete S[w]),await h.setItem(T,S)}},b=(h,v,y)=>h.watch(v,y);return{getItem:async(h,v)=>{const{driver:y,driverKey:T}=r(h);return await i(y,T,v)},getItems:async h=>{const v=new Map,y=new Map,T=[];h.forEach(w=>{let C,k;typeof w=="string"?C=w:"getValue"in w?(C=w.key,k={fallback:w.fallback}):(C=w.key,k=w.options),T.push(C);const{driverArea:f,driverKey:O}=r(C),E=v.get(f)??[];v.set(f,E.concat(O)),y.set(C,k)});const S=new Map;return await Promise.all(Array.from(v.entries()).map(async([w,C])=>{(await e[w].getItems(C)).forEach(f=>{const O=`${w}:${f.key}`,E=y.get(O),N=s(f.value,(E==null?void 0:E.fallback)??(E==null?void 0:E.defaultValue));S.set(O,N)})})),T.map(w=>({key:w,value:S.get(w)}))},getMeta:async h=>{const{driver:v,driverKey:y}=r(h);return await l(v,y)},getMetas:async h=>{const v=h.map(S=>{const w=typeof S=="string"?S:S.key,{driverArea:C,driverKey:k}=r(w);return{key:w,driverArea:C,driverKey:k,driverMetaKey:n(k)}}),y=v.reduce((S,w)=>{var C;return S[C=w.driverArea]??(S[C]=[]),S[w.driverArea].push(w),S},{}),T={};return await Promise.all(Object.entries(y).map(async([S,w])=>{const C=await Vc.storage[S].get(w.map(k=>k.driverMetaKey));w.forEach(k=>{T[k.key]=C[k.driverMetaKey]??{}})})),v.map(S=>({key:S.key,meta:T[S.key]}))},setItem:async(h,v)=>{const{driver:y,driverKey:T}=r(h);await u(y,T,v)},setItems:async h=>{const v={};h.forEach(y=>{const{driverArea:T,driverKey:S}=r("key"in y?y.key:y.item.key);v[T]??(v[T]=[]),v[T].push({key:S,value:y.value})}),await Promise.all(Object.entries(v).map(async([y,T])=>{await t(y).setItems(T)}))},setMeta:async(h,v)=>{const{driver:y,driverKey:T}=r(h);await c(y,T,v)},setMetas:async h=>{const v={};h.forEach(y=>{const{driverArea:T,driverKey:S}=r("key"in y?y.key:y.item.key);v[T]??(v[T]=[]),v[T].push({key:S,properties:y.meta})}),await Promise.all(Object.entries(v).map(async([y,T])=>{const S=t(y),w=T.map(({key:O})=>n(O));console.log(y,w);const C=await S.getItems(w),k=Object.fromEntries(C.map(({key:O,value:E})=>[O,o(E)])),f=T.map(({key:O,properties:E})=>{const N=n(O);return{key:N,value:a(k[N]??{},E)}});await S.setItems(f)}))},removeItem:async(h,v)=>{const{driver:y,driverKey:T}=r(h);await d(y,T,v)},removeItems:async h=>{const v={};h.forEach(y=>{let T,S;typeof y=="string"?T=y:"getValue"in y?T=y.key:"item"in y?(T=y.item.key,S=y.options):(T=y.key,S=y.options);const{driverArea:w,driverKey:C}=r(T);v[w]??(v[w]=[]),v[w].push(C),S!=null&&S.removeMeta&&v[w].push(n(C))}),await Promise.all(Object.entries(v).map(async([y,T])=>{await t(y).removeItems(T)}))},removeMeta:async(h,v)=>{const{driver:y,driverKey:T}=r(h);await p(y,T,v)},snapshot:async(h,v)=>{var S;const T=await t(h).snapshot();return(S=v==null?void 0:v.excludeKeys)==null||S.forEach(w=>{delete T[w],delete T[n(w)]}),T},restoreSnapshot:async(h,v)=>{await t(h).restoreSnapshot(v)},watch:(h,v)=>{const{driver:y,driverKey:T}=r(h);return b(y,T,v)},unwatch(){Object.values(e).forEach(h=>{h.unwatch()})},defineItem:(h,v)=>{const{driver:y,driverKey:T}=r(h),{version:S=1,migrations:w={}}=v??{};if(S<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const C=async()=>{var H;const N=n(T),[{value:$},{value:L}]=await y.getItems([T,N]);if($==null)return;const B=(L==null?void 0:L.v)??1;if(B>S)throw Error(`Version downgrade detected (v${B} -> v${S}) for "${h}"`);console.debug(`[@wxt-dev/storage] Running storage migration for ${h}: v${B} -> v${S}`);const F=Array.from({length:S-B},(q,M)=>B+M+1);let R=$;for(const q of F)try{R=await((H=w==null?void 0:w[q])==null?void 0:H.call(w,R))??R}catch(M){throw Error(`v${q} migration failed for "${h}"`,{cause:M})}await y.setItems([{key:T,value:R},{key:N,value:{...L,v:S}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${h} v${S}`,{migratedValue:R})},k=(v==null?void 0:v.migrations)==null?Promise.resolve():C().catch(N=>{console.error(`[@wxt-dev/storage] Migration failed for ${h}`,N)}),f=new R6,O=()=>(v==null?void 0:v.fallback)??(v==null?void 0:v.defaultValue)??null,E=()=>f.runExclusive(async()=>{const N=await y.getItem(T);if(N!=null||(v==null?void 0:v.init)==null)return N;const $=await v.init();return await y.setItem(T,$),$});return k.then(E),{key:h,get defaultValue(){return O()},get fallback(){return O()},getValue:async()=>(await k,v!=null&&v.init?await E():await i(y,T,v)),getMeta:async()=>(await k,await l(y,T)),setValue:async N=>(await k,await u(y,T,N)),setMeta:async N=>(await k,await c(y,T,N)),removeValue:async N=>(await k,await d(y,T,N)),removeMeta:async N=>(await k,await p(y,T,N)),watch:N=>b(y,T,($,L)=>N($??O(),L??O())),migrate:C}}}}function Hc(e){const t=()=>{if(Vc.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(Vc.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const n=Vc.storage[e];if(n==null)throw Error(`"browser.storage.${e}" is undefined`);return n},r=new Set;return{getItem:async n=>(await t().get(n))[n],getItems:async n=>{const a=await t().get(n);return n.map(s=>({key:s,value:a[s]??null}))},setItem:async(n,a)=>{a==null?await t().remove(n):await t().set({[n]:a})},setItems:async n=>{const a=n.reduce((s,{key:o,value:i})=>(s[o]=i,s),{});await t().set(a)},removeItem:async n=>{await t().remove(n)},removeItems:async n=>{await t().remove(n)},snapshot:async()=>await t().get(),restoreSnapshot:async n=>{await t().set(n)},watch(n,a){const s=o=>{const i=o[n];i!=null&&(bm(i.newValue,i.oldValue)||a(i.newValue??null,i.oldValue??null))};return t().onChanged.addListener(s),r.add(s),()=>{t().onChanged.removeListener(s),r.delete(s)}},unwatch(){r.forEach(n=>{t().onChanged.removeListener(n)}),r.clear()}}}const je={successResult:e=>({result:"success",...e}),failResult:e=>{if(!Zs(e)&&!lh(e))return{result:"fail"};const t=Zs(e)?{reason:e}:e;return Object.assign({result:"fail"},t)},isSuccess:e=>$o(e,"result")&&e.result==="success",isFail:e=>$o(e,"result")&&e.result==="fail"};function M6(e){try{return new URL(e),!0}catch{return!1}}const Je=e=>new Promise(t=>{setTimeout(()=>{t()},e)}),wm=()=>{if(Promise.withResolvers)return Promise.withResolvers();let e,t;return{promise:new Promise((n,a)=>{e=n,t=a}),resolve:e,reject:t}},to=async e=>{try{return[await e,null]}catch(t){return[void 0,t]}};function zc(e,t=()=>"default"){const r={};return function(...n){const a=t(...n);if(!r[a]){const s=e.apply(this,n);r[a]=s,r[a].finally(()=>{delete r[a]})}return r[a]}}function D6(e=20){let t={},r=0,n=0;function a(){const i=Object.keys(t).map(Number);if(i.length===0)return null;const l=Math.min(...i),u=t[l],c=u.shift();return u.length||delete t[l],c||null}async function s(i){try{await i()}catch(l){console.error("任务执行失败:",l)}finally{if(r--,n>0){const l=a();l&&(n--,r++,s(l))}}}const o=function(i,l=50){if(l=Math.floor(Math.max(1,Math.min(100,l))),t[l]=t[l]||[],t[l].push(i),n++,r<e){const u=a();u&&(n--,r++,s(u))}};return o.stop=function(){t={}},o.queueCount=function(){return n+r},o.waitQueueCount=function(){return n},o.processQueueCount=function(){return r},o}const e_=(e,t)=>Math.floor(Math.random()*(t-e+1))+e,N6=e=>{let t="";for(let r=0;r<e;r++)t+=String.fromCharCode(97+Math.floor(Math.random()*26));return t},_m=(e={})=>{const{minWordLength:t=3,maxWordLength:r=10,minCount:n=3,maxCount:a=10}=e,s=e_(n,a);return Array.from({length:s}).map(()=>{const o=e_(t,r);return N6(o)}).join("-")};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const F6=4,t_=0,r_=1,B6=2;function Ri(e){let t=e.length;for(;--t>=0;)e[t]=0}const j6=0,n_=1,U6=2,q6=3,V6=258,Sm=29,Gl=256,Yl=Gl+1+Sm,Li=30,Tm=19,a_=2*Yl+1,Mo=15,xm=16,H6=7,Cm=256,s_=16,o_=17,i_=18,km=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Wc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),z6=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),l_=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),W6=512,As=new Array((Yl+2)*2);Ri(As);const Jl=new Array(Li*2);Ri(Jl);const Xl=new Array(W6);Ri(Xl);const Ql=new Array(V6-q6+1);Ri(Ql);const Im=new Array(Sm);Ri(Im);const Kc=new Array(Li);Ri(Kc);function Am(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}let u_,c_,d_;function Om(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const f_=e=>e<256?Xl[e]:Xl[256+(e>>>7)],Zl=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},$n=(e,t,r)=>{e.bi_valid>xm-r?(e.bi_buf|=t<<e.bi_valid&65535,Zl(e,e.bi_buf),e.bi_buf=t>>xm-e.bi_valid,e.bi_valid+=r-xm):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Ga=(e,t,r)=>{$n(e,r[t*2],r[t*2+1])},p_=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},K6=e=>{e.bi_valid===16?(Zl(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},G6=(e,t)=>{const r=t.dyn_tree,n=t.max_code,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,i=t.stat_desc.extra_base,l=t.stat_desc.max_length;let u,c,d,p,b,m,h=0;for(p=0;p<=Mo;p++)e.bl_count[p]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<a_;u++)c=e.heap[u],p=r[r[c*2+1]*2+1]+1,p>l&&(p=l,h++),r[c*2+1]=p,!(c>n)&&(e.bl_count[p]++,b=0,c>=i&&(b=o[c-i]),m=r[c*2],e.opt_len+=m*(p+b),s&&(e.static_len+=m*(a[c*2+1]+b)));if(h!==0){do{for(p=l-1;e.bl_count[p]===0;)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[l]--,h-=2}while(h>0);for(p=l;p!==0;p--)for(c=e.bl_count[p];c!==0;)d=e.heap[--u],!(d>n)&&(r[d*2+1]!==p&&(e.opt_len+=(p-r[d*2+1])*r[d*2],r[d*2+1]=p),c--)}},h_=(e,t,r)=>{const n=new Array(Mo+1);let a=0,s,o;for(s=1;s<=Mo;s++)a=a+r[s-1]<<1,n[s]=a;for(o=0;o<=t;o++){let i=e[o*2+1];i!==0&&(e[o*2]=p_(n[i]++,i))}},Y6=()=>{let e,t,r,n,a;const s=new Array(Mo+1);for(r=0,n=0;n<Sm-1;n++)for(Im[n]=r,e=0;e<1<<km[n];e++)Ql[r++]=n;for(Ql[r-1]=n,a=0,n=0;n<16;n++)for(Kc[n]=a,e=0;e<1<<Wc[n];e++)Xl[a++]=n;for(a>>=7;n<Li;n++)for(Kc[n]=a<<7,e=0;e<1<<Wc[n]-7;e++)Xl[256+a++]=n;for(t=0;t<=Mo;t++)s[t]=0;for(e=0;e<=143;)As[e*2+1]=8,e++,s[8]++;for(;e<=255;)As[e*2+1]=9,e++,s[9]++;for(;e<=279;)As[e*2+1]=7,e++,s[7]++;for(;e<=287;)As[e*2+1]=8,e++,s[8]++;for(h_(As,Yl+1,s),e=0;e<Li;e++)Jl[e*2+1]=5,Jl[e*2]=p_(e,5);u_=new Am(As,km,Gl+1,Yl,Mo),c_=new Am(Jl,Wc,0,Li,Mo),d_=new Am(new Array(0),z6,0,Tm,H6)},m_=e=>{let t;for(t=0;t<Yl;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Li;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Tm;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Cm*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},g_=e=>{e.bi_valid>8?Zl(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},v_=(e,t,r,n)=>{const a=t*2,s=r*2;return e[a]<e[s]||e[a]===e[s]&&n[t]<=n[r]},Pm=(e,t,r)=>{const n=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&v_(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!v_(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},y_=(e,t,r)=>{let n,a,s=0,o,i;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+s++]&255,n+=(e.pending_buf[e.sym_buf+s++]&255)<<8,a=e.pending_buf[e.sym_buf+s++],n===0?Ga(e,a,t):(o=Ql[a],Ga(e,o+Gl+1,t),i=km[o],i!==0&&(a-=Im[o],$n(e,a,i)),n--,o=f_(n),Ga(e,o,r),i=Wc[o],i!==0&&(n-=Kc[o],$n(e,n,i)));while(s<e.sym_next);Ga(e,Cm,t)},Em=(e,t)=>{const r=t.dyn_tree,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,i,l=-1,u;for(e.heap_len=0,e.heap_max=a_,o=0;o<s;o++)r[o*2]!==0?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):r[o*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=l<2?++l:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,a&&(e.static_len-=n[u*2+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)Pm(e,r,o);u=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Pm(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=i,r[u*2]=r[o*2]+r[i*2],e.depth[u]=(e.depth[o]>=e.depth[i]?e.depth[o]:e.depth[i])+1,r[o*2+1]=r[i*2+1]=u,e.heap[1]=u++,Pm(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],G6(e,t),h_(r,l,e.bl_count)},b_=(e,t,r)=>{let n,a=-1,s,o=t[1],i=0,l=7,u=4;for(o===0&&(l=138,u=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)s=o,o=t[(n+1)*2+1],!(++i<l&&s===o)&&(i<u?e.bl_tree[s*2]+=i:s!==0?(s!==a&&e.bl_tree[s*2]++,e.bl_tree[s_*2]++):i<=10?e.bl_tree[o_*2]++:e.bl_tree[i_*2]++,i=0,a=s,o===0?(l=138,u=3):s===o?(l=6,u=3):(l=7,u=4))},w_=(e,t,r)=>{let n,a=-1,s,o=t[1],i=0,l=7,u=4;for(o===0&&(l=138,u=3),n=0;n<=r;n++)if(s=o,o=t[(n+1)*2+1],!(++i<l&&s===o)){if(i<u)do Ga(e,s,e.bl_tree);while(--i!==0);else s!==0?(s!==a&&(Ga(e,s,e.bl_tree),i--),Ga(e,s_,e.bl_tree),$n(e,i-3,2)):i<=10?(Ga(e,o_,e.bl_tree),$n(e,i-3,3)):(Ga(e,i_,e.bl_tree),$n(e,i-11,7));i=0,a=s,o===0?(l=138,u=3):s===o?(l=6,u=3):(l=7,u=4)}},J6=e=>{let t;for(b_(e,e.dyn_ltree,e.l_desc.max_code),b_(e,e.dyn_dtree,e.d_desc.max_code),Em(e,e.bl_desc),t=Tm-1;t>=3&&e.bl_tree[l_[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},X6=(e,t,r,n)=>{let a;for($n(e,t-257,5),$n(e,r-1,5),$n(e,n-4,4),a=0;a<n;a++)$n(e,e.bl_tree[l_[a]*2+1],3);w_(e,e.dyn_ltree,t-1),w_(e,e.dyn_dtree,r-1)},Q6=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return t_;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return r_;for(r=32;r<Gl;r++)if(e.dyn_ltree[r*2]!==0)return r_;return t_};let __=!1;const Z6=e=>{__||(Y6(),__=!0),e.l_desc=new Om(e.dyn_ltree,u_),e.d_desc=new Om(e.dyn_dtree,c_),e.bl_desc=new Om(e.bl_tree,d_),e.bi_buf=0,e.bi_valid=0,m_(e)},S_=(e,t,r,n)=>{$n(e,(j6<<1)+(n?1:0),3),g_(e),Zl(e,r),Zl(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},e3=e=>{$n(e,n_<<1,3),Ga(e,Cm,As),K6(e)},t3=(e,t,r,n)=>{let a,s,o=0;e.level>0?(e.strm.data_type===B6&&(e.strm.data_type=Q6(e)),Em(e,e.l_desc),Em(e,e.d_desc),o=J6(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=r+5,r+4<=a&&t!==-1?S_(e,t,r,n):e.strategy===F6||s===a?($n(e,(n_<<1)+(n?1:0),3),y_(e,As,Jl)):($n(e,(U6<<1)+(n?1:0),3),X6(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),y_(e,e.dyn_ltree,e.dyn_dtree)),m_(e),n&&g_(e)},r3=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Ql[r]+Gl+1)*2]++,e.dyn_dtree[f_(t)*2]++),e.sym_next===e.sym_end);var n3=Z6,a3=S_,s3=t3,o3=r3,i3=e3,l3={_tr_init:n3,_tr_stored_block:a3,_tr_flush_block:s3,_tr_tally:o3,_tr_align:i3},eu=(e,t,r,n)=>{let a=e&65535|0,s=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[n++]|0,s=s+a|0;while(--o);a%=65521,s%=65521}return a|s<<16|0};const u3=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},c3=new Uint32Array(u3());var Qr=(e,t,r,n)=>{const a=c3,s=n+r;e^=-1;for(let o=n;o<s;o++)e=e>>>8^a[(e^t[o])&255];return e^-1},Do={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},tu={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:d3,_tr_stored_block:$m,_tr_flush_block:f3,_tr_tally:ro,_tr_align:p3}=l3,{Z_NO_FLUSH:no,Z_PARTIAL_FLUSH:h3,Z_FULL_FLUSH:m3,Z_FINISH:la,Z_BLOCK:T_,Z_OK:an,Z_STREAM_END:x_,Z_STREAM_ERROR:Ya,Z_DATA_ERROR:g3,Z_BUF_ERROR:Rm,Z_DEFAULT_COMPRESSION:v3,Z_FILTERED:y3,Z_HUFFMAN_ONLY:Gc,Z_RLE:b3,Z_FIXED:w3,Z_DEFAULT_STRATEGY:_3,Z_UNKNOWN:S3,Z_DEFLATED:Yc}=tu,T3=9,x3=15,C3=8,Lm=256+1+29,k3=30,I3=19,A3=2*Lm+1,O3=15,rr=3,ao=258,Ja=ao+rr+1,P3=32,Mi=42,Mm=57,Dm=69,Nm=73,Fm=91,Bm=103,No=113,ru=666,xn=1,Di=2,Fo=3,Ni=4,E3=3,Bo=(e,t)=>(e.msg=Do[t],t),C_=e=>e*2-(e>4?9:0),so=e=>{let t=e.length;for(;--t>=0;)e[t]=0},$3=e=>{let t,r,n,a=e.w_size;t=e.hash_size,n=t;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t);t=a,n=t;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)};let oo=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const Yn=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Jn=(e,t)=>{f3(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Yn(e.strm)},fr=(e,t)=>{e.pending_buf[e.pending++]=t},nu=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},jm=(e,t,r,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),e.state.wrap===1?e.adler=eu(e.adler,t,a,r):e.state.wrap===2&&(e.adler=Qr(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},k_=(e,t)=>{let r=e.max_chain_length,n=e.strstart,a,s,o=e.prev_length,i=e.nice_match;const l=e.strstart>e.w_size-Ja?e.strstart-(e.w_size-Ja):0,u=e.window,c=e.w_mask,d=e.prev,p=e.strstart+ao;let b=u[n+o-1],m=u[n+o];e.prev_length>=e.good_match&&(r>>=2),i>e.lookahead&&(i=e.lookahead);do if(a=t,!(u[a+o]!==m||u[a+o-1]!==b||u[a]!==u[n]||u[++a]!==u[n+1])){n+=2,a++;do;while(u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&u[++n]===u[++a]&&n<p);if(s=ao-(p-n),n=p-ao,s>o){if(e.match_start=t,o=s,s>=i)break;b=u[n+o-1],m=u[n+o]}}while((t=d[t&c])>l&&--r!==0);return o<=e.lookahead?o:e.lookahead},Fi=e=>{const t=e.w_size;let r,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Ja)&&(e.window.set(e.window.subarray(t,t+t-n),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),$3(e),n+=t),e.strm.avail_in===0)break;if(r=jm(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=r,e.lookahead+e.insert>=rr)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=oo(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=oo(e,e.ins_h,e.window[a+rr-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<rr)););}while(e.lookahead<Ja&&e.strm.avail_in!==0)},I_=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,s,o=0,i=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>s&&(n=s),n<r&&(n===0&&t!==la||t===no||n!==a+e.strm.avail_in)))break;o=t===la&&n===a+e.strm.avail_in?1:0,$m(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Yn(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(jm(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(o===0);return i-=e.strm.avail_in,i&&(i>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=i&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-i,e.strm.next_in),e.strstart),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?Ni:t!==no&&t!==la&&e.strm.avail_in===0&&e.strstart===e.block_start?Di:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(jm(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,r=s>e.w_size?e.w_size:s,a=e.strstart-e.block_start,(a>=r||(a||t===la)&&t!==no&&e.strm.avail_in===0&&a<=s)&&(n=a>s?s:a,o=t===la&&e.strm.avail_in===0&&n===a?1:0,$m(e,e.block_start,n,o),e.block_start+=n,Yn(e.strm)),o?Fo:xn)},Um=(e,t)=>{let r,n;for(;;){if(e.lookahead<Ja){if(Fi(e),e.lookahead<Ja&&t===no)return xn;if(e.lookahead===0)break}if(r=0,e.lookahead>=rr&&(e.ins_h=oo(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Ja&&(e.match_length=k_(e,r)),e.match_length>=rr)if(n=ro(e,e.strstart-e.match_start,e.match_length-rr),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=rr){e.match_length--;do e.strstart++,e.ins_h=oo(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=oo(e,e.ins_h,e.window[e.strstart+1]);else n=ro(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(Jn(e,!1),e.strm.avail_out===0))return xn}return e.insert=e.strstart<rr-1?e.strstart:rr-1,t===la?(Jn(e,!0),e.strm.avail_out===0?Fo:Ni):e.sym_next&&(Jn(e,!1),e.strm.avail_out===0)?xn:Di},Bi=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<Ja){if(Fi(e),e.lookahead<Ja&&t===no)return xn;if(e.lookahead===0)break}if(r=0,e.lookahead>=rr&&(e.ins_h=oo(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=rr-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Ja&&(e.match_length=k_(e,r),e.match_length<=5&&(e.strategy===y3||e.match_length===rr&&e.strstart-e.match_start>4096)&&(e.match_length=rr-1)),e.prev_length>=rr&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-rr,n=ro(e,e.strstart-1-e.prev_match,e.prev_length-rr),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=oo(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=rr-1,e.strstart++,n&&(Jn(e,!1),e.strm.avail_out===0))return xn}else if(e.match_available){if(n=ro(e,0,e.window[e.strstart-1]),n&&Jn(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return xn}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=ro(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<rr-1?e.strstart:rr-1,t===la?(Jn(e,!0),e.strm.avail_out===0?Fo:Ni):e.sym_next&&(Jn(e,!1),e.strm.avail_out===0)?xn:Di},R3=(e,t)=>{let r,n,a,s;const o=e.window;for(;;){if(e.lookahead<=ao){if(Fi(e),e.lookahead<=ao&&t===no)return xn;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=rr&&e.strstart>0&&(a=e.strstart-1,n=o[a],n===o[++a]&&n===o[++a]&&n===o[++a])){s=e.strstart+ao;do;while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<s);e.match_length=ao-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=rr?(r=ro(e,1,e.match_length-rr),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=ro(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Jn(e,!1),e.strm.avail_out===0))return xn}return e.insert=0,t===la?(Jn(e,!0),e.strm.avail_out===0?Fo:Ni):e.sym_next&&(Jn(e,!1),e.strm.avail_out===0)?xn:Di},L3=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(Fi(e),e.lookahead===0)){if(t===no)return xn;break}if(e.match_length=0,r=ro(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Jn(e,!1),e.strm.avail_out===0))return xn}return e.insert=0,t===la?(Jn(e,!0),e.strm.avail_out===0?Fo:Ni):e.sym_next&&(Jn(e,!1),e.strm.avail_out===0)?xn:Di};function Xa(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}const au=[new Xa(0,0,0,0,I_),new Xa(4,4,8,4,Um),new Xa(4,5,16,8,Um),new Xa(4,6,32,32,Um),new Xa(4,4,16,16,Bi),new Xa(8,16,32,32,Bi),new Xa(8,16,128,128,Bi),new Xa(8,32,128,256,Bi),new Xa(32,128,258,1024,Bi),new Xa(32,258,258,4096,Bi)],M3=e=>{e.window_size=2*e.w_size,so(e.head),e.max_lazy_match=au[e.level].max_lazy,e.good_match=au[e.level].good_length,e.nice_match=au[e.level].nice_length,e.max_chain_length=au[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=rr-1,e.match_available=0,e.ins_h=0};function D3(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Yc,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(A3*2),this.dyn_dtree=new Uint16Array((2*k3+1)*2),this.bl_tree=new Uint16Array((2*I3+1)*2),so(this.dyn_ltree),so(this.dyn_dtree),so(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(O3+1),this.heap=new Uint16Array(2*Lm+1),so(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Lm+1),so(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const su=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Mi&&t.status!==Mm&&t.status!==Dm&&t.status!==Nm&&t.status!==Fm&&t.status!==Bm&&t.status!==No&&t.status!==ru?1:0},A_=e=>{if(su(e))return Bo(e,Ya);e.total_in=e.total_out=0,e.data_type=S3;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Mm:t.wrap?Mi:No,e.adler=t.wrap===2?0:1,t.last_flush=-2,d3(t),an},O_=e=>{const t=A_(e);return t===an&&M3(e.state),t},N3=(e,t)=>su(e)||e.state.wrap!==2?Ya:(e.state.gzhead=t,an),P_=(e,t,r,n,a,s)=>{if(!e)return Ya;let o=1;if(t===v3&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>T3||r!==Yc||n<8||n>15||t<0||t>9||s<0||s>w3||n===8&&o!==1)return Bo(e,Ya);n===8&&(n=9);const i=new D3;return e.state=i,i.strm=e,i.status=Mi,i.wrap=o,i.gzhead=null,i.w_bits=n,i.w_size=1<<i.w_bits,i.w_mask=i.w_size-1,i.hash_bits=a+7,i.hash_size=1<<i.hash_bits,i.hash_mask=i.hash_size-1,i.hash_shift=~~((i.hash_bits+rr-1)/rr),i.window=new Uint8Array(i.w_size*2),i.head=new Uint16Array(i.hash_size),i.prev=new Uint16Array(i.w_size),i.lit_bufsize=1<<a+6,i.pending_buf_size=i.lit_bufsize*4,i.pending_buf=new Uint8Array(i.pending_buf_size),i.sym_buf=i.lit_bufsize,i.sym_end=(i.lit_bufsize-1)*3,i.level=t,i.strategy=s,i.method=r,O_(e)},F3=(e,t)=>P_(e,t,Yc,x3,C3,_3),B3=(e,t)=>{if(su(e)||t>T_||t<0)return e?Bo(e,Ya):Ya;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===ru&&t!==la)return Bo(e,e.avail_out===0?Rm:Ya);const n=r.last_flush;if(r.last_flush=t,r.pending!==0){if(Yn(e),e.avail_out===0)return r.last_flush=-1,an}else if(e.avail_in===0&&C_(t)<=C_(n)&&t!==la)return Bo(e,Rm);if(r.status===ru&&e.avail_in!==0)return Bo(e,Rm);if(r.status===Mi&&r.wrap===0&&(r.status=No),r.status===Mi){let a=Yc+(r.w_bits-8<<4)<<8,s=-1;if(r.strategy>=Gc||r.level<2?s=0:r.level<6?s=1:r.level===6?s=2:s=3,a|=s<<6,r.strstart!==0&&(a|=P3),a+=31-a%31,nu(r,a),r.strstart!==0&&(nu(r,e.adler>>>16),nu(r,e.adler&65535)),e.adler=1,r.status=No,Yn(e),r.pending!==0)return r.last_flush=-1,an}if(r.status===Mm){if(e.adler=0,fr(r,31),fr(r,139),fr(r,8),r.gzhead)fr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),fr(r,r.gzhead.time&255),fr(r,r.gzhead.time>>8&255),fr(r,r.gzhead.time>>16&255),fr(r,r.gzhead.time>>24&255),fr(r,r.level===9?2:r.strategy>=Gc||r.level<2?4:0),fr(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(fr(r,r.gzhead.extra.length&255),fr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Qr(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Dm;else if(fr(r,0),fr(r,0),fr(r,0),fr(r,0),fr(r,0),fr(r,r.level===9?2:r.strategy>=Gc||r.level<2?4:0),fr(r,E3),r.status=No,Yn(e),r.pending!==0)return r.last_flush=-1,an}if(r.status===Dm){if(r.gzhead.extra){let a=r.pending,s=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+s>r.pending_buf_size;){let i=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(e.adler=Qr(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=i,Yn(e),r.pending!==0)return r.last_flush=-1,an;a=0,s-=i}let o=new Uint8Array(r.gzhead.extra);r.pending_buf.set(o.subarray(r.gzindex,r.gzindex+s),r.pending),r.pending+=s,r.gzhead.hcrc&&r.pending>a&&(e.adler=Qr(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=Nm}if(r.status===Nm){if(r.gzhead.name){let a=r.pending,s;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Qr(e.adler,r.pending_buf,r.pending-a,a)),Yn(e),r.pending!==0)return r.last_flush=-1,an;a=0}r.gzindex<r.gzhead.name.length?s=r.gzhead.name.charCodeAt(r.gzindex++)&255:s=0,fr(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Qr(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=Fm}if(r.status===Fm){if(r.gzhead.comment){let a=r.pending,s;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Qr(e.adler,r.pending_buf,r.pending-a,a)),Yn(e),r.pending!==0)return r.last_flush=-1,an;a=0}r.gzindex<r.gzhead.comment.length?s=r.gzhead.comment.charCodeAt(r.gzindex++)&255:s=0,fr(r,s)}while(s!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Qr(e.adler,r.pending_buf,r.pending-a,a))}r.status=Bm}if(r.status===Bm){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Yn(e),r.pending!==0))return r.last_flush=-1,an;fr(r,e.adler&255),fr(r,e.adler>>8&255),e.adler=0}if(r.status=No,Yn(e),r.pending!==0)return r.last_flush=-1,an}if(e.avail_in!==0||r.lookahead!==0||t!==no&&r.status!==ru){let a=r.level===0?I_(r,t):r.strategy===Gc?L3(r,t):r.strategy===b3?R3(r,t):au[r.level].func(r,t);if((a===Fo||a===Ni)&&(r.status=ru),a===xn||a===Fo)return e.avail_out===0&&(r.last_flush=-1),an;if(a===Di&&(t===h3?p3(r):t!==T_&&($m(r,0,0,!1),t===m3&&(so(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Yn(e),e.avail_out===0))return r.last_flush=-1,an}return t!==la?an:r.wrap<=0?x_:(r.wrap===2?(fr(r,e.adler&255),fr(r,e.adler>>8&255),fr(r,e.adler>>16&255),fr(r,e.adler>>24&255),fr(r,e.total_in&255),fr(r,e.total_in>>8&255),fr(r,e.total_in>>16&255),fr(r,e.total_in>>24&255)):(nu(r,e.adler>>>16),nu(r,e.adler&65535)),Yn(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?an:x_)},j3=e=>{if(su(e))return Ya;const t=e.state.status;return e.state=null,t===No?Bo(e,g3):an},U3=(e,t)=>{let r=t.length;if(su(e))return Ya;const n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==Mi||n.lookahead)return Ya;if(a===1&&(e.adler=eu(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){a===0&&(so(n.head),n.strstart=0,n.block_start=0,n.insert=0);let l=new Uint8Array(n.w_size);l.set(t.subarray(r-n.w_size,r),0),t=l,r=n.w_size}const s=e.avail_in,o=e.next_in,i=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Fi(n);n.lookahead>=rr;){let l=n.strstart,u=n.lookahead-(rr-1);do n.ins_h=oo(n,n.ins_h,n.window[l+rr-1]),n.prev[l&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=l,l++;while(--u);n.strstart=l,n.lookahead=rr-1,Fi(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=rr-1,n.match_available=0,e.next_in=o,e.input=i,e.avail_in=s,n.wrap=a,an};var q3=F3,V3=P_,H3=O_,z3=A_,W3=N3,K3=B3,G3=j3,Y3=U3,J3="pako deflate (from Nodeca project)",ou={deflateInit:q3,deflateInit2:V3,deflateReset:H3,deflateResetKeep:z3,deflateSetHeader:W3,deflate:K3,deflateEnd:G3,deflateSetDictionary:Y3,deflateInfo:J3};const X3=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Q3=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)X3(r,n)&&(e[n]=r[n])}}return e},Z3=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,s=e.length;n<s;n++){let o=e[n];r.set(o,a),a+=o.length}return r},Jc={assign:Q3,flattenChunks:Z3};let E_=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{E_=!1}const iu=new Uint8Array(256);for(let e=0;e<256;e++)iu[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;iu[254]=iu[254]=1;var eD=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,s,o=e.length,i=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),i+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(i),s=0,a=0;s<i;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[s++]=r:r<2048?(t[s++]=192|r>>>6,t[s++]=128|r&63):r<65536?(t[s++]=224|r>>>12,t[s++]=128|r>>>6&63,t[s++]=128|r&63):(t[s++]=240|r>>>18,t[s++]=128|r>>>12&63,t[s++]=128|r>>>6&63,t[s++]=128|r&63);return t};const tD=(e,t)=>{if(t<65534&&e.subarray&&E_)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var rD=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const s=new Array(r*2);for(a=0,n=0;n<r;){let o=e[n++];if(o<128){s[a++]=o;continue}let i=iu[o];if(i>4){s[a++]=65533,n+=i-1;continue}for(o&=i===2?31:i===3?15:7;i>1&&n<r;)o=o<<6|e[n++]&63,i--;if(i>1){s[a++]=65533;continue}o<65536?s[a++]=o:(o-=65536,s[a++]=55296|o>>10&1023,s[a++]=56320|o&1023)}return tD(s,a)},nD=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+iu[e[r]]>t?r:t},lu={string2buf:eD,buf2string:rD,utf8border:nD};function aD(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var $_=aD;const R_=Object.prototype.toString,{Z_NO_FLUSH:sD,Z_SYNC_FLUSH:oD,Z_FULL_FLUSH:iD,Z_FINISH:lD,Z_OK:Xc,Z_STREAM_END:uD,Z_DEFAULT_COMPRESSION:cD,Z_DEFAULT_STRATEGY:dD,Z_DEFLATED:fD}=tu;function uu(e){this.options=Jc.assign({level:cD,method:fD,chunkSize:16384,windowBits:15,memLevel:8,strategy:dD},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $_,this.strm.avail_out=0;let r=ou.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==Xc)throw new Error(Do[r]);if(t.header&&ou.deflateSetHeader(this.strm,t.header),t.dictionary){let n;if(typeof t.dictionary=="string"?n=lu.string2buf(t.dictionary):R_.call(t.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(t.dictionary):n=t.dictionary,r=ou.deflateSetDictionary(this.strm,n),r!==Xc)throw new Error(Do[r]);this._dict_set=!0}}uu.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize;let a,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?lD:sD,typeof e=="string"?r.input=lu.string2buf(e):R_.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),(s===oD||s===iD)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(a=ou.deflate(r,s),a===uD)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=ou.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===Xc;if(r.avail_out===0){this.onData(r.output);continue}if(s>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0},uu.prototype.onData=function(e){this.chunks.push(e)},uu.prototype.onEnd=function(e){e===Xc&&(this.result=Jc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function qm(e,t){const r=new uu(t);if(r.push(e,!0),r.err)throw r.msg||Do[r.err];return r.result}function pD(e,t){return t=t||{},t.raw=!0,qm(e,t)}function hD(e,t){return t=t||{},t.gzip=!0,qm(e,t)}var mD=uu,gD=qm,vD=pD,yD=hD,bD={Deflate:mD,deflate:gD,deflateRaw:vD,gzip:yD};const Qc=16209,wD=16191;var _D=function(t,r){let n,a,s,o,i,l,u,c,d,p,b,m,h,v,y,T,S,w,C,k,f,O,E,N;const $=t.state;n=t.next_in,E=t.input,a=n+(t.avail_in-5),s=t.next_out,N=t.output,o=s-(r-t.avail_out),i=s+(t.avail_out-257),l=$.dmax,u=$.wsize,c=$.whave,d=$.wnext,p=$.window,b=$.hold,m=$.bits,h=$.lencode,v=$.distcode,y=(1<<$.lenbits)-1,T=(1<<$.distbits)-1;e:do{m<15&&(b+=E[n++]<<m,m+=8,b+=E[n++]<<m,m+=8),S=h[b&y];t:for(;;){if(w=S>>>24,b>>>=w,m-=w,w=S>>>16&255,w===0)N[s++]=S&65535;else if(w&16){C=S&65535,w&=15,w&&(m<w&&(b+=E[n++]<<m,m+=8),C+=b&(1<<w)-1,b>>>=w,m-=w),m<15&&(b+=E[n++]<<m,m+=8,b+=E[n++]<<m,m+=8),S=v[b&T];r:for(;;){if(w=S>>>24,b>>>=w,m-=w,w=S>>>16&255,w&16){if(k=S&65535,w&=15,m<w&&(b+=E[n++]<<m,m+=8,m<w&&(b+=E[n++]<<m,m+=8)),k+=b&(1<<w)-1,k>l){t.msg="invalid distance too far back",$.mode=Qc;break e}if(b>>>=w,m-=w,w=s-o,k>w){if(w=k-w,w>c&&$.sane){t.msg="invalid distance too far back",$.mode=Qc;break e}if(f=0,O=p,d===0){if(f+=u-w,w<C){C-=w;do N[s++]=p[f++];while(--w);f=s-k,O=N}}else if(d<w){if(f+=u+d-w,w-=d,w<C){C-=w;do N[s++]=p[f++];while(--w);if(f=0,d<C){w=d,C-=w;do N[s++]=p[f++];while(--w);f=s-k,O=N}}}else if(f+=d-w,w<C){C-=w;do N[s++]=p[f++];while(--w);f=s-k,O=N}for(;C>2;)N[s++]=O[f++],N[s++]=O[f++],N[s++]=O[f++],C-=3;C&&(N[s++]=O[f++],C>1&&(N[s++]=O[f++]))}else{f=s-k;do N[s++]=N[f++],N[s++]=N[f++],N[s++]=N[f++],C-=3;while(C>2);C&&(N[s++]=N[f++],C>1&&(N[s++]=N[f++]))}}else if((w&64)===0){S=v[(S&65535)+(b&(1<<w)-1)];continue r}else{t.msg="invalid distance code",$.mode=Qc;break e}break}}else if((w&64)===0){S=h[(S&65535)+(b&(1<<w)-1)];continue t}else if(w&32){$.mode=wD;break e}else{t.msg="invalid literal/length code",$.mode=Qc;break e}break}}while(n<a&&s<i);C=m>>3,n-=C,m-=C<<3,b&=(1<<m)-1,t.next_in=n,t.next_out=s,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=s<i?257+(i-s):257-(s-i),$.hold=b,$.bits=m};const ji=15,L_=852,M_=592,D_=0,Vm=1,N_=2,SD=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),TD=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xD=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),CD=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var cu=(e,t,r,n,a,s,o,i)=>{const l=i.bits;let u=0,c=0,d=0,p=0,b=0,m=0,h=0,v=0,y=0,T=0,S,w,C,k,f,O=null,E;const N=new Uint16Array(ji+1),$=new Uint16Array(ji+1);let L=null,B,F,R;for(u=0;u<=ji;u++)N[u]=0;for(c=0;c<n;c++)N[t[r+c]]++;for(b=l,p=ji;p>=1&&N[p]===0;p--);if(b>p&&(b=p),p===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,i.bits=1,0;for(d=1;d<p&&N[d]===0;d++);for(b<d&&(b=d),v=1,u=1;u<=ji;u++)if(v<<=1,v-=N[u],v<0)return-1;if(v>0&&(e===D_||p!==1))return-1;for($[1]=0,u=1;u<ji;u++)$[u+1]=$[u]+N[u];for(c=0;c<n;c++)t[r+c]!==0&&(o[$[t[r+c]]++]=c);if(e===D_?(O=L=o,E=20):e===Vm?(O=SD,L=TD,E=257):(O=xD,L=CD,E=0),T=0,c=0,u=d,f=s,m=b,h=0,C=-1,y=1<<b,k=y-1,e===Vm&&y>L_||e===N_&&y>M_)return 1;for(;;){B=u-h,o[c]+1<E?(F=0,R=o[c]):o[c]>=E?(F=L[o[c]-E],R=O[o[c]-E]):(F=96,R=0),S=1<<u-h,w=1<<m,d=w;do w-=S,a[f+(T>>h)+w]=B<<24|F<<16|R|0;while(w!==0);for(S=1<<u-1;T&S;)S>>=1;if(S!==0?(T&=S-1,T+=S):T=0,c++,--N[u]===0){if(u===p)break;u=t[r+o[c]]}if(u>b&&(T&k)!==C){for(h===0&&(h=b),f+=d,m=u-h,v=1<<m;m+h<p&&(v-=N[m+h],!(v<=0));)m++,v<<=1;if(y+=1<<m,e===Vm&&y>L_||e===N_&&y>M_)return 1;C=T&k,a[C]=b<<24|m<<16|f-s|0}}return T!==0&&(a[f+T]=u-h<<24|64<<16|0),i.bits=b,0};const kD=0,F_=1,B_=2,{Z_FINISH:j_,Z_BLOCK:ID,Z_TREES:Zc,Z_OK:jo,Z_STREAM_END:AD,Z_NEED_DICT:OD,Z_STREAM_ERROR:ua,Z_DATA_ERROR:U_,Z_MEM_ERROR:q_,Z_BUF_ERROR:PD,Z_DEFLATED:V_}=tu,ed=16180,H_=16181,z_=16182,W_=16183,K_=16184,G_=16185,Y_=16186,J_=16187,X_=16188,Q_=16189,td=16190,Os=16191,Hm=16192,Z_=16193,zm=16194,eS=16195,tS=16196,rS=16197,nS=16198,rd=16199,nd=16200,aS=16201,sS=16202,oS=16203,iS=16204,lS=16205,Wm=16206,uS=16207,cS=16208,Pr=16209,dS=16210,fS=16211,ED=852,$D=592,RD=15,pS=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function LD(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Uo=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<ed||t.mode>fS?1:0},hS=e=>{if(Uo(e))return ua;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=ed,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(ED),t.distcode=t.distdyn=new Int32Array($D),t.sane=1,t.back=-1,jo},mS=e=>{if(Uo(e))return ua;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,hS(e)},gS=(e,t)=>{let r;if(Uo(e))return ua;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ua:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,mS(e))},vS=(e,t)=>{if(!e)return ua;const r=new LD;e.state=r,r.strm=e,r.window=null,r.mode=ed;const n=gS(e,t);return n!==jo&&(e.state=null),n},MD=e=>vS(e,RD);let yS=!0,Km,Gm;const DD=e=>{if(yS){Km=new Int32Array(512),Gm=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(cu(F_,e.lens,0,288,Km,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;cu(B_,e.lens,0,32,Gm,0,e.work,{bits:5}),yS=!1}e.lencode=Km,e.lenbits=9,e.distcode=Gm,e.distbits=5},bS=(e,t,r,n)=>{let a;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(t.subarray(r-s.wsize,r),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(t.subarray(r-n,r-n+a),s.wnext),n-=a,n?(s.window.set(t.subarray(r-n,r),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},ND=(e,t)=>{let r,n,a,s,o,i,l,u,c,d,p,b,m,h,v=0,y,T,S,w,C,k,f,O;const E=new Uint8Array(4);let N,$;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Uo(e)||!e.output||!e.input&&e.avail_in!==0)return ua;r=e.state,r.mode===Os&&(r.mode=Hm),o=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,n=e.input,i=e.avail_in,u=r.hold,c=r.bits,d=i,p=l,O=jo;e:for(;;)switch(r.mode){case ed:if(r.wrap===0){r.mode=Hm;break}for(;c<16;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,E[0]=u&255,E[1]=u>>>8&255,r.check=Qr(r.check,E,2,0),u=0,c=0,r.mode=H_;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=Pr;break}if((u&15)!==V_){e.msg="unknown compression method",r.mode=Pr;break}if(u>>>=4,c-=4,f=(u&15)+8,r.wbits===0&&(r.wbits=f),f>15||f>r.wbits){e.msg="invalid window size",r.mode=Pr;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=u&512?Q_:Os,u=0,c=0;break;case H_:for(;c<16;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(r.flags=u,(r.flags&255)!==V_){e.msg="unknown compression method",r.mode=Pr;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Pr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Qr(r.check,E,2,0)),u=0,c=0,r.mode=z_;case z_:for(;c<32;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,E[2]=u>>>16&255,E[3]=u>>>24&255,r.check=Qr(r.check,E,4,0)),u=0,c=0,r.mode=W_;case W_:for(;c<16;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Qr(r.check,E,2,0)),u=0,c=0,r.mode=K_;case K_:if(r.flags&1024){for(;c<16;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(E[0]=u&255,E[1]=u>>>8&255,r.check=Qr(r.check,E,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=G_;case G_:if(r.flags&1024&&(b=r.length,b>i&&(b=i),b&&(r.head&&(f=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(s,s+b),f)),r.flags&512&&r.wrap&4&&(r.check=Qr(r.check,n,b,s)),i-=b,s+=b,r.length-=b),r.length))break e;r.length=0,r.mode=Y_;case Y_:if(r.flags&2048){if(i===0)break e;b=0;do f=n[s+b++],r.head&&f&&r.length<65536&&(r.head.name+=String.fromCharCode(f));while(f&&b<i);if(r.flags&512&&r.wrap&4&&(r.check=Qr(r.check,n,b,s)),i-=b,s+=b,f)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=J_;case J_:if(r.flags&4096){if(i===0)break e;b=0;do f=n[s+b++],r.head&&f&&r.length<65536&&(r.head.comment+=String.fromCharCode(f));while(f&&b<i);if(r.flags&512&&r.wrap&4&&(r.check=Qr(r.check,n,b,s)),i-=b,s+=b,f)break e}else r.head&&(r.head.comment=null);r.mode=X_;case X_:if(r.flags&512){for(;c<16;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(r.wrap&4&&u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Pr;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Os;break;case Q_:for(;c<32;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}e.adler=r.check=pS(u),u=0,c=0,r.mode=td;case td:if(r.havedict===0)return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=i,r.hold=u,r.bits=c,OD;e.adler=r.check=1,r.mode=Os;case Os:if(t===ID||t===Zc)break e;case Hm:if(r.last){u>>>=c&7,c-=c&7,r.mode=Wm;break}for(;c<3;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}switch(r.last=u&1,u>>>=1,c-=1,u&3){case 0:r.mode=Z_;break;case 1:if(DD(r),r.mode=rd,t===Zc){u>>>=2,c-=2;break e}break;case 2:r.mode=tS;break;case 3:e.msg="invalid block type",r.mode=Pr}u>>>=2,c-=2;break;case Z_:for(u>>>=c&7,c-=c&7;c<32;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Pr;break}if(r.length=u&65535,u=0,c=0,r.mode=zm,t===Zc)break e;case zm:r.mode=eS;case eS:if(b=r.length,b){if(b>i&&(b=i),b>l&&(b=l),b===0)break e;a.set(n.subarray(s,s+b),o),i-=b,s+=b,l-=b,o+=b,r.length-=b;break}r.mode=Os;break;case tS:for(;c<14;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(r.nlen=(u&31)+257,u>>>=5,c-=5,r.ndist=(u&31)+1,u>>>=5,c-=5,r.ncode=(u&15)+4,u>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Pr;break}r.have=0,r.mode=rS;case rS:for(;r.have<r.ncode;){for(;c<3;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}r.lens[L[r.have++]]=u&7,u>>>=3,c-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,N={bits:r.lenbits},O=cu(kD,r.lens,0,19,r.lencode,0,r.work,N),r.lenbits=N.bits,O){e.msg="invalid code lengths set",r.mode=Pr;break}r.have=0,r.mode=nS;case nS:for(;r.have<r.nlen+r.ndist;){for(;v=r.lencode[u&(1<<r.lenbits)-1],y=v>>>24,T=v>>>16&255,S=v&65535,!(y<=c);){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(S<16)u>>>=y,c-=y,r.lens[r.have++]=S;else{if(S===16){for($=y+2;c<$;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(u>>>=y,c-=y,r.have===0){e.msg="invalid bit length repeat",r.mode=Pr;break}f=r.lens[r.have-1],b=3+(u&3),u>>>=2,c-=2}else if(S===17){for($=y+3;c<$;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}u>>>=y,c-=y,f=0,b=3+(u&7),u>>>=3,c-=3}else{for($=y+7;c<$;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}u>>>=y,c-=y,f=0,b=11+(u&127),u>>>=7,c-=7}if(r.have+b>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Pr;break}for(;b--;)r.lens[r.have++]=f}}if(r.mode===Pr)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Pr;break}if(r.lenbits=9,N={bits:r.lenbits},O=cu(F_,r.lens,0,r.nlen,r.lencode,0,r.work,N),r.lenbits=N.bits,O){e.msg="invalid literal/lengths set",r.mode=Pr;break}if(r.distbits=6,r.distcode=r.distdyn,N={bits:r.distbits},O=cu(B_,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,N),r.distbits=N.bits,O){e.msg="invalid distances set",r.mode=Pr;break}if(r.mode=rd,t===Zc)break e;case rd:r.mode=nd;case nd:if(i>=6&&l>=258){e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=i,r.hold=u,r.bits=c,_D(e,p),o=e.next_out,a=e.output,l=e.avail_out,s=e.next_in,n=e.input,i=e.avail_in,u=r.hold,c=r.bits,r.mode===Os&&(r.back=-1);break}for(r.back=0;v=r.lencode[u&(1<<r.lenbits)-1],y=v>>>24,T=v>>>16&255,S=v&65535,!(y<=c);){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(T&&(T&240)===0){for(w=y,C=T,k=S;v=r.lencode[k+((u&(1<<w+C)-1)>>w)],y=v>>>24,T=v>>>16&255,S=v&65535,!(w+y<=c);){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}u>>>=w,c-=w,r.back+=w}if(u>>>=y,c-=y,r.back+=y,r.length=S,T===0){r.mode=lS;break}if(T&32){r.back=-1,r.mode=Os;break}if(T&64){e.msg="invalid literal/length code",r.mode=Pr;break}r.extra=T&15,r.mode=aS;case aS:if(r.extra){for($=r.extra;c<$;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=sS;case sS:for(;v=r.distcode[u&(1<<r.distbits)-1],y=v>>>24,T=v>>>16&255,S=v&65535,!(y<=c);){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if((T&240)===0){for(w=y,C=T,k=S;v=r.distcode[k+((u&(1<<w+C)-1)>>w)],y=v>>>24,T=v>>>16&255,S=v&65535,!(w+y<=c);){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}u>>>=w,c-=w,r.back+=w}if(u>>>=y,c-=y,r.back+=y,T&64){e.msg="invalid distance code",r.mode=Pr;break}r.offset=S,r.extra=T&15,r.mode=oS;case oS:if(r.extra){for($=r.extra;c<$;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Pr;break}r.mode=iS;case iS:if(l===0)break e;if(b=p-l,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Pr;break}b>r.wnext?(b-=r.wnext,m=r.wsize-b):m=r.wnext-b,b>r.length&&(b=r.length),h=r.window}else h=a,m=o-r.offset,b=r.length;b>l&&(b=l),l-=b,r.length-=b;do a[o++]=h[m++];while(--b);r.length===0&&(r.mode=nd);break;case lS:if(l===0)break e;a[o++]=r.length,l--,r.mode=nd;break;case Wm:if(r.wrap){for(;c<32;){if(i===0)break e;i--,u|=n[s++]<<c,c+=8}if(p-=l,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Qr(r.check,a,p,o-p):eu(r.check,a,p,o-p)),p=l,r.wrap&4&&(r.flags?u:pS(u))!==r.check){e.msg="incorrect data check",r.mode=Pr;break}u=0,c=0}r.mode=uS;case uS:if(r.wrap&&r.flags){for(;c<32;){if(i===0)break e;i--,u+=n[s++]<<c,c+=8}if(r.wrap&4&&u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Pr;break}u=0,c=0}r.mode=cS;case cS:O=AD;break e;case Pr:O=U_;break e;case dS:return q_;case fS:default:return ua}return e.next_out=o,e.avail_out=l,e.next_in=s,e.avail_in=i,r.hold=u,r.bits=c,(r.wsize||p!==e.avail_out&&r.mode<Pr&&(r.mode<Wm||t!==j_))&&bS(e,e.output,e.next_out,p-e.avail_out),d-=e.avail_in,p-=e.avail_out,e.total_in+=d,e.total_out+=p,r.total+=p,r.wrap&4&&p&&(e.adler=r.check=r.flags?Qr(r.check,a,p,e.next_out-p):eu(r.check,a,p,e.next_out-p)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Os?128:0)+(r.mode===rd||r.mode===zm?256:0),(d===0&&p===0||t===j_)&&O===jo&&(O=PD),O},FD=e=>{if(Uo(e))return ua;let t=e.state;return t.window&&(t.window=null),e.state=null,jo},BD=(e,t)=>{if(Uo(e))return ua;const r=e.state;return(r.wrap&2)===0?ua:(r.head=t,t.done=!1,jo)},jD=(e,t)=>{const r=t.length;let n,a,s;return Uo(e)||(n=e.state,n.wrap!==0&&n.mode!==td)?ua:n.mode===td&&(a=1,a=eu(a,t,r,0),a!==n.check)?U_:(s=bS(e,t,r,r),s?(n.mode=dS,q_):(n.havedict=1,jo))};var UD=mS,qD=gS,VD=hS,HD=MD,zD=vS,WD=ND,KD=FD,GD=BD,YD=jD,JD="pako inflate (from Nodeca project)",Ps={inflateReset:UD,inflateReset2:qD,inflateResetKeep:VD,inflateInit:HD,inflateInit2:zD,inflate:WD,inflateEnd:KD,inflateGetHeader:GD,inflateSetDictionary:YD,inflateInfo:JD};function XD(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var QD=XD;const wS=Object.prototype.toString,{Z_NO_FLUSH:ZD,Z_FINISH:eN,Z_OK:du,Z_STREAM_END:Ym,Z_NEED_DICT:Jm,Z_STREAM_ERROR:tN,Z_DATA_ERROR:_S,Z_MEM_ERROR:rN}=tu;function fu(e){this.options=Jc.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new $_,this.strm.avail_out=0;let r=Ps.inflateInit2(this.strm,t.windowBits);if(r!==du)throw new Error(Do[r]);if(this.header=new QD,Ps.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=lu.string2buf(t.dictionary):wS.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Ps.inflateSetDictionary(this.strm,t.dictionary),r!==du)))throw new Error(Do[r])}fu.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let s,o,i;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?eN:ZD,wS.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),s=Ps.inflate(r,o),s===Jm&&a&&(s=Ps.inflateSetDictionary(r,a),s===du?s=Ps.inflate(r,o):s===_S&&(s=Jm));r.avail_in>0&&s===Ym&&r.state.wrap>0&&e[r.next_in]!==0;)Ps.inflateReset(r),s=Ps.inflate(r,o);switch(s){case tN:case _S:case Jm:case rN:return this.onEnd(s),this.ended=!0,!1}if(i=r.avail_out,r.next_out&&(r.avail_out===0||s===Ym))if(this.options.to==="string"){let l=lu.utf8border(r.output,r.next_out),u=r.next_out-l,c=lu.buf2string(r.output,l);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(l,l+u),0),this.onData(c)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(s===du&&i===0)){if(s===Ym)return s=Ps.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(r.avail_in===0)break}}return!0},fu.prototype.onData=function(e){this.chunks.push(e)},fu.prototype.onEnd=function(e){e===du&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Jc.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Xm(e,t){const r=new fu(t);if(r.push(e),r.err)throw r.msg||Do[r.err];return r.result}function nN(e,t){return t=t||{},t.raw=!0,Xm(e,t)}var aN=fu,sN=Xm,oN=nN,iN=Xm,lN={Inflate:aN,inflate:sN,inflateRaw:oN,ungzip:iN};const{Deflate:uN,deflate:cN,deflateRaw:dN,gzip:fN}=bD,{Inflate:pN,inflate:hN,inflateRaw:mN,ungzip:gN}=lN;var vN=uN,yN=cN,bN=dN,wN=fN,_N=pN,SN=hN,TN=mN,xN=gN,CN=tu,SS={Deflate:vN,deflate:yN,deflateRaw:bN,gzip:wN,Inflate:_N,inflate:SN,inflateRaw:TN,ungzip:xN,constants:CN};function kN(e){if(Aa(e))return e;const t=typeof e!="string"&&typeof e!="number"?JSON.stringify(e):e,r=encodeURIComponent(t),n=SS.gzip(r),a=Array.from(n);let s="";return a.forEach(o=>{s+=String.fromCharCode(o)}),encodeURIComponent(btoa(s))}const ad=8*1024;function IN(e){const r=atob(decodeURIComponent(e)).split("").map(u=>u.charCodeAt(0)),n=new Uint8Array(r),a=SS.ungzip(n);let s="",o;for(o=0;o<a.length/ad;o++)s+=String.fromCharCode(...a.slice(o*ad,(o+1)*ad));s+=String.fromCharCode(...a.slice(o*ad));const i=decodeURIComponent(s);let l="";try{l=JSON.parse(i)}catch{l=i}return l}function Qm(e,t="https://kuajing-plw.happyporsche.com"){return M6(e)?e:`${t}${e}`}async function pu(e){const{url:t,method:r="GET",dataType:n="json",params:a,body:s=null,baseUrl:o,...i}=e,l=Qm(t,o),u=a?`${l}?${new URLSearchParams(a).toString()}`:l,c={...i,body:s,method:r};return await fetch(u,c).then(p=>n==="base64"?PN(p):n==="json"?p.json():ON(p))}const AN=300*1e3;async function pn(e){const{data:t,headers:r,dataType:n="json",...a}=e,{cacheKey:s,cacheMaxAge:o,isZip:i}=e,l=Date.now();if(s){const d=await Ze.getItem(s);if(d&&d.expireTime>l)return d.res}const u=i?IN(t):t,c=await pu({...a,dataType:n,body:u&&eo.stringify(u),headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",...r}});if(s){const p={expireTime:l+(o||AN),res:c};Ze.setItem(s,p)}if(c.result==="success")return c;throw c}function Rn(e){return new Promise((t,r)=>{const{url:n,method:a="GET",data:s,params:o,headers:i={},xhrFields:l={}}=e,u=new XMLHttpRequest;u.addEventListener("readystatechange",()=>{u.readyState===4&&(u.status===200?t(u.response):r(u.response))}),u.addEventListener("error",d=>{r(d)});const c=o?[n,eo.stringify(o)].join("?"):n;u.open(a,c);for(const[d,p]of Object.entries(i))u.setRequestHeader(d,p);for(const[d,p]of Object.entries(l))u[d]=p;u.send(lh(s)?eo.stringify(s):s)})}async function ON(e){var t;return(t=e.headers.get("Content-Type"))!=null&&t.includes("GBK")?e.blob().then(r=>{const{promise:n,resolve:a,reject:s}=wm(),o=new FileReader;return o.onload=()=>{a(o.result)},o.onerror=i=>{s(i)},o.readAsText(r,"GBK"),n}):await e.text()}async function PN(e){return e.blob().then(t=>{const{promise:r,resolve:n,reject:a}=wm(),s=new FileReader;return s.onload=function(o){var l;const i=(l=o==null?void 0:o.target)==null?void 0:l.result;n(i)},s.onerror=o=>{a(o)},s.readAsDataURL(t),r})}var sd={exports:{}},EN=sd.exports,TS;function $N(){return TS||(TS=1,(function(e,t){(function(r,n){e.exports=n()})(EN,(function(){var r=1e3,n=6e4,a=36e5,s="millisecond",o="second",i="minute",l="hour",u="day",c="week",d="month",p="quarter",b="year",m="date",h="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(F){var R=["th","st","nd","rd"],H=F%100;return"["+F+(R[(H-20)%10]||R[H]||R[0])+"]"}},S=function(F,R,H){var q=String(F);return!q||q.length>=R?F:""+Array(R+1-q.length).join(H)+F},w={s:S,z:function(F){var R=-F.utcOffset(),H=Math.abs(R),q=Math.floor(H/60),M=H%60;return(R<=0?"+":"-")+S(q,2,"0")+":"+S(M,2,"0")},m:function F(R,H){if(R.date()<H.date())return-F(H,R);var q=12*(H.year()-R.year())+(H.month()-R.month()),M=R.clone().add(q,d),D=H-M<0,Y=R.clone().add(q+(D?-1:1),d);return+(-(q+(H-M)/(D?M-Y:Y-M))||0)},a:function(F){return F<0?Math.ceil(F)||0:Math.floor(F)},p:function(F){return{M:d,y:b,w:c,d:u,D:m,h:l,m:i,s:o,ms:s,Q:p}[F]||String(F||"").toLowerCase().replace(/s$/,"")},u:function(F){return F===void 0}},C="en",k={};k[C]=T;var f="$isDayjsObject",O=function(F){return F instanceof L||!(!F||!F[f])},E=function F(R,H,q){var M;if(!R)return C;if(typeof R=="string"){var D=R.toLowerCase();k[D]&&(M=D),H&&(k[D]=H,M=D);var Y=R.split("-");if(!M&&Y.length>1)return F(Y[0])}else{var Z=R.name;k[Z]=R,M=Z}return!q&&M&&(C=M),M||!q&&C},N=function(F,R){if(O(F))return F.clone();var H=typeof R=="object"?R:{};return H.date=F,H.args=arguments,new L(H)},$=w;$.l=E,$.i=O,$.w=function(F,R){return N(F,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var L=(function(){function F(H){this.$L=E(H.locale,null,!0),this.parse(H),this.$x=this.$x||H.x||{},this[f]=!0}var R=F.prototype;return R.parse=function(H){this.$d=(function(q){var M=q.date,D=q.utc;if(M===null)return new Date(NaN);if($.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var Y=M.match(v);if(Y){var Z=Y[2]-1||0,se=(Y[7]||"0").substring(0,3);return D?new Date(Date.UTC(Y[1],Z,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,se)):new Date(Y[1],Z,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,se)}}return new Date(M)})(H),this.init()},R.init=function(){var H=this.$d;this.$y=H.getFullYear(),this.$M=H.getMonth(),this.$D=H.getDate(),this.$W=H.getDay(),this.$H=H.getHours(),this.$m=H.getMinutes(),this.$s=H.getSeconds(),this.$ms=H.getMilliseconds()},R.$utils=function(){return $},R.isValid=function(){return this.$d.toString()!==h},R.isSame=function(H,q){var M=N(H);return this.startOf(q)<=M&&M<=this.endOf(q)},R.isAfter=function(H,q){return N(H)<this.startOf(q)},R.isBefore=function(H,q){return this.endOf(q)<N(H)},R.$g=function(H,q,M){return $.u(H)?this[q]:this.set(M,H)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(H,q){var M=this,D=!!$.u(q)||q,Y=$.p(H),Z=function(ze,Ne){var rt=$.w(M.$u?Date.UTC(M.$y,Ne,ze):new Date(M.$y,Ne,ze),M);return D?rt:rt.endOf(u)},se=function(ze,Ne){return $.w(M.toDate()[ze].apply(M.toDate("s"),(D?[0,0,0,0]:[23,59,59,999]).slice(Ne)),M)},ne=this.$W,me=this.$M,ve=this.$D,We="set"+(this.$u?"UTC":"");switch(Y){case b:return D?Z(1,0):Z(31,11);case d:return D?Z(1,me):Z(0,me+1);case c:var Ke=this.$locale().weekStart||0,xe=(ne<Ke?ne+7:ne)-Ke;return Z(D?ve-xe:ve+(6-xe),me);case u:case m:return se(We+"Hours",0);case l:return se(We+"Minutes",1);case i:return se(We+"Seconds",2);case o:return se(We+"Milliseconds",3);default:return this.clone()}},R.endOf=function(H){return this.startOf(H,!1)},R.$set=function(H,q){var M,D=$.p(H),Y="set"+(this.$u?"UTC":""),Z=(M={},M[u]=Y+"Date",M[m]=Y+"Date",M[d]=Y+"Month",M[b]=Y+"FullYear",M[l]=Y+"Hours",M[i]=Y+"Minutes",M[o]=Y+"Seconds",M[s]=Y+"Milliseconds",M)[D],se=D===u?this.$D+(q-this.$W):q;if(D===d||D===b){var ne=this.clone().set(m,1);ne.$d[Z](se),ne.init(),this.$d=ne.set(m,Math.min(this.$D,ne.daysInMonth())).$d}else Z&&this.$d[Z](se);return this.init(),this},R.set=function(H,q){return this.clone().$set(H,q)},R.get=function(H){return this[$.p(H)]()},R.add=function(H,q){var M,D=this;H=Number(H);var Y=$.p(q),Z=function(me){var ve=N(D);return $.w(ve.date(ve.date()+Math.round(me*H)),D)};if(Y===d)return this.set(d,this.$M+H);if(Y===b)return this.set(b,this.$y+H);if(Y===u)return Z(1);if(Y===c)return Z(7);var se=(M={},M[i]=n,M[l]=a,M[o]=r,M)[Y]||1,ne=this.$d.getTime()+H*se;return $.w(ne,this)},R.subtract=function(H,q){return this.add(-1*H,q)},R.format=function(H){var q=this,M=this.$locale();if(!this.isValid())return M.invalidDate||h;var D=H||"YYYY-MM-DDTHH:mm:ssZ",Y=$.z(this),Z=this.$H,se=this.$m,ne=this.$M,me=M.weekdays,ve=M.months,We=M.meridiem,Ke=function(Ne,rt,X,re){return Ne&&(Ne[rt]||Ne(q,D))||X[rt].slice(0,re)},xe=function(Ne){return $.s(Z%12||12,Ne,"0")},ze=We||function(Ne,rt,X){var re=Ne<12?"AM":"PM";return X?re.toLowerCase():re};return D.replace(y,(function(Ne,rt){return rt||(function(X){switch(X){case"YY":return String(q.$y).slice(-2);case"YYYY":return $.s(q.$y,4,"0");case"M":return ne+1;case"MM":return $.s(ne+1,2,"0");case"MMM":return Ke(M.monthsShort,ne,ve,3);case"MMMM":return Ke(ve,ne);case"D":return q.$D;case"DD":return $.s(q.$D,2,"0");case"d":return String(q.$W);case"dd":return Ke(M.weekdaysMin,q.$W,me,2);case"ddd":return Ke(M.weekdaysShort,q.$W,me,3);case"dddd":return me[q.$W];case"H":return String(Z);case"HH":return $.s(Z,2,"0");case"h":return xe(1);case"hh":return xe(2);case"a":return ze(Z,se,!0);case"A":return ze(Z,se,!1);case"m":return String(se);case"mm":return $.s(se,2,"0");case"s":return String(q.$s);case"ss":return $.s(q.$s,2,"0");case"SSS":return $.s(q.$ms,3,"0");case"Z":return Y}return null})(Ne)||Y.replace(":","")}))},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(H,q,M){var D,Y=this,Z=$.p(q),se=N(H),ne=(se.utcOffset()-this.utcOffset())*n,me=this-se,ve=function(){return $.m(Y,se)};switch(Z){case b:D=ve()/12;break;case d:D=ve();break;case p:D=ve()/3;break;case c:D=(me-ne)/6048e5;break;case u:D=(me-ne)/864e5;break;case l:D=me/a;break;case i:D=me/n;break;case o:D=me/r;break;default:D=me}return M?D:$.a(D)},R.daysInMonth=function(){return this.endOf(d).$D},R.$locale=function(){return k[this.$L]},R.locale=function(H,q){if(!H)return this.$L;var M=this.clone(),D=E(H,q,!0);return D&&(M.$L=D),M},R.clone=function(){return $.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},F})(),B=L.prototype;return N.prototype=B,[["$ms",s],["$s",o],["$m",i],["$H",l],["$W",u],["$M",d],["$y",b],["$D",m]].forEach((function(F){B[F[1]]=function(R){return this.$g(R,F[0],F[1])}})),N.extend=function(F,R){return F.$i||(F(R,L,N),F.$i=!0),N},N.locale=E,N.isDayjs=O,N.unix=function(F){return N(1e3*F)},N.en=k[C],N.Ls=k,N.p={},N}))})(sd)),sd.exports}var RN=$N();const Ve=Sn(RN),LN=e=>e;async function Ui(e){return await Ze.getItem(`local:${e}`)||{}}function od(e,t){Ze.setItem(`local:${e}`,t)}function yr(e=0){return e?Ve().add(e,"s").format("YYYY-MM-DD HH:mm:ss"):Ve().format("YYYY-MM-DD HH:mm:ss")}function hr(e=""){return{result:"success",reason:e}}function ir(e){return{result:"fail",reason:e}}function Yt(e){switch(typeof e){case"string":return e;case"object":return e.reason??e.message;default:return"未知错误"}}let Zm=null;const MN=()=>{if(!Zm){const e=Wn.runtime.getManifest();Zm={"X-TG":"earth","X-VS":e.version,"X-MV":e.manifest_version}}return Zm},Ht=e=>pn({headers:MN(),...e}),DN=e=>e,ca="https://erp.91miaoshou.com/api",qo="https://sso.geiwohuo.com",NN="gmt_order_delivery",FN="gmt_settlement";async function Vo(e){const{url:t,data:r=null,type:n="POST"}=e||{},a={};n==="POST"?a.body=r&&JSON.stringify(r):a.params=r||void 0;const s=await pu({url:t,method:n,headers:{"content-type":"application/json;charset=UTF-8"},...a}),o=s?s.msg:"";return(o?!+o.includes("子系统登录重定向"):1)?s:Promise.reject("未登录SHEIN后台")}function xS(e,t){const r=new Date(e),n=new Date(r.toISOString()),a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hour12:!1},o=new Intl.DateTimeFormat("en-US",a).format(n),[i,l]=o.split(", "),[u,c,d]=i.split("/").map(h=>h.padStart(2,"0")),[p,b,m]=l.split(":").map(h=>h.padStart(2,"0"));return`${d}-${u}-${c} ${p}:${b}:${m}`}const eg="local:crawlSheinChoiceMallInfoList",CS="local:crawlSheinChoiceTabId";let tg=class extends Error{constructor(r,n){super(r);he(this,"sleepSeconds");this.name=this.constructor.name,this.sleepSeconds=n,Error.captureStackTrace(this,this.constructor)}};const da={isDebug:!1,crawlTabId:null,localData:{},crawlQueue:null};let id=class{constructor(t,r=null){he(this,"earthUrlsMap",{updateCrawlRequestStatus:`${ca}/platform/shein_choice/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${ca}/platform/shein_choice/stat/crawl/init_crawl_request_detail`});he(this,"mallId");he(this,"requestId");he(this,"crawlTaskKey");he(this,"crawlTaskNameAndRetKey");he(this,"crawlTaskNameAndLogKey");he(this,"crawlTaskObj",{});he(this,"crawlRequestIdAndTaskNameAndRetObj");he(this,"crawlRequestIdAndTaskNameAndLogObj");this.mallId=t,this.requestId=r,this.crawlTaskKey=`crawl_shein_choice_task_${this.mallId}`,this.crawlTaskNameAndRetKey=`crawl_shein_choice_task_ret_${this.mallId}`,this.crawlTaskNameAndLogKey=`crawl_shein_choice_task_log_${this.mallId}`}async init(){this.crawlTaskObj=await Ui(this.crawlTaskKey),this.crawlRequestIdAndTaskNameAndRetObj=await this.initCacheData(this.crawlTaskNameAndRetKey),this.crawlRequestIdAndTaskNameAndLogObj=await this.initCacheData(this.crawlTaskNameAndLogKey)}resetAllTaskCount(t){this.crawlTaskObj.status=null,this.crawlTaskObj.requestId=this.requestId,this.crawlTaskObj.allTaskCount=t,this.crawlTaskObj.finishTaskCount=0;for(const r in this.crawlRequestIdAndTaskNameAndRetObj){const n=this.crawlRequestIdAndTaskNameAndRetObj[r]||{};for(const a in n)n[a]&&n[a].result==="success"&&this.crawlTaskObj.finishTaskCount++}this.setItem(this.crawlTaskKey,this.crawlTaskObj)}incrFinishTaskCount(t){this.crawlTaskObj.finishTaskCount+=t,this.setItem(this.crawlTaskKey,this.crawlTaskObj)}async getCrawlInfo(){var c;const t={mallId:this.mallId,status:null,progressText:"",progressRate:""};(((c=da.crawlQueue)==null?void 0:c.crawlQueueList)||[]).find(d=>`${d.mallId}`==`${this.mallId}`)&&(t.status="processing");const{requestId:a,currentTaskName:s,progressText:o,allTaskCount:i,finishTaskCount:l,status:u}=this.crawlTaskObj;return this.requestId&&`${this.requestId}`==`${a}`&&(t.progressText=`【${s}】：${o}`,t.progressRate=i>0?Math.floor(l/i*100):0,u==="success"?t.progressText="采集完成":u==="fail"&&(t.progressText=`采集部分失败：${t.reason||""}`)),console.debug("CrawlInfo",t),t}async updateRequestStatus(t,r){return pn({url:this.earthUrlsMap.updateCrawlRequestStatus,method:"POST",data:{requestId:t,status:r.result,reason:r.reason}})}async saveRequestDetail(t,r){return pn({url:this.earthUrlsMap.initCrawlRequestDetail,method:"POST",data:{requestId:t,desc:r}})}async initCacheData(t){const r=await Ui(t);let n={};for(const s in r)if(!this.requestId||`${this.requestId}`==`${s}`){n=r[s];break}const a={};return a[this.requestId]=n,a}setItem(t,r){this.requestId&&od(t,r),this.sendToClientTab()}async sendToClientTab(){if(!da.crawlTabId)return;const t=await this.getCrawlInfo();try{const r=await Ze.getItem(eg)||[],{mallId:n}=t,a=r.reduce((s,o)=>(`${o.id}`==`${n}`?s.push({...o,...t}):s.push(o),s),[]);Ze.setItem(eg,a)}catch(r){da.crawlTabId=null,console.debug(r)}}isTaskSuccess(t,r){const n=this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||{};return!!(r&&n[r]&&n[r].result==="success"||n.result==="success")}async updateRequestRet(t){if(this.crawlTaskObj.status=t==null?void 0:t.result,this.crawlTaskObj.reason=t==null?void 0:t.reason,this.setItem(this.crawlTaskKey,this.crawlTaskObj),(await this.updateRequestStatus(this.requestId,t)).result!=="success")throw new Error(`更新采集结果:${t.reason}`)}async saveTaskSubTaskRet(t,r,n){this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]={}),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t][r]=n,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj);let a="";n.result==="success"?a="采集成功":a=`采集失败，原因：${n.reason}`,await this.updateTaskProgress(t,r+a)}async saveTaskRet(t,r){let n=t,a="";r.result==="success"?(n+="，采集成功",a="采集成功"):(n+=`，采集失败，原因：${r.reason}`,a=`采集失败，原因：${r.reason}`),await this.updateTaskProgress(t,a);const s=await this.saveRequestDetail(this.requestId,n);if(s.result!=="success")throw new Error(`保存采集详情失败:${s.reason}`);r.canRetry||this.incrFinishTaskCount(1),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]=r,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj)}startTask(t){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText="开始采集",this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,"开始采集")}updateTaskProgress(t,r){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText=r,this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,r)}async debugLog(t,r){da.isDebug&&(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]=[]),this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t].push({date:yr(),desc:r}),this.setItem(this.crawlTaskNameAndLogKey,this.crawlRequestIdAndTaskNameAndLogObj))}};class kS{constructor({mallId:t,mallName:r,action:n,mallType:a,bindShopId:s,authAppNameList:o,startDate:i,endDate:l,requestId:u}){he(this,"earthUrlsMap",{initCrawlRequest:`${ca}/platform/shein_choice/stat/crawl/init_crawl_request`,updateCrawlRequestStatus:`${ca}/platform/shein_choice/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${ca}/platform/shein_choice/stat/crawl/init_crawl_request_detail`,getFullAccountName:`${ca}/auth/account/get_full_account_name`,getAccountInfo:`${ca}/auth/account/get_account_info`,createSheinChoiceImportTask:`${ca}/order/data/import_cost/createSheinChoiceImportTask`});he(this,"earthChoiceUrlMap",{saveMallLastRsyncTime:`${ca}/platform/shein_choice/stat/crawl/saveMallLastRsyncTime`,saveCrawlWaitSettlementData:`${ca}/platform/pddkj_choice/stat/crawl/saveCrawlWaitSettlementData`});he(this,"sheinChoiceUrlMap",{getUserInfo:`${qo}/sso-prefix/auth/getUser`,getFileExportList:`${qo}/sso/common/fileExport/list`,getTimezoneList:`${qo}/sso/public/account/timezoneList`,exportPlatformWaitPayCheckDetail:`${qo}/gspJob/common/file/export/exportPlatformWaitPayCheckDetail`,exportPlatformPayedCheckDetail:`${qo}/gspJob/common/file/export/exportPlatformPayedCheckDetail`,getFileUrl:`${qo}/sso/common/fileExport/getFileUrl`});he(this,"requestId");he(this,"mallId");he(this,"mallName");he(this,"action");he(this,"mallType");he(this,"bindShopId");he(this,"authAppNameList");he(this,"startDate");he(this,"endDate");he(this,"crawlLogObj",{});this.requestId=u,this.mallId=t,this.mallName=r,this.action=n,this.mallType=a,this.bindShopId=s,this.authAppNameList=o||[],this.startDate=i,this.endDate=l,(!this.startDate||!this.endDate)&&(this.startDate=Ve().subtract(30,"day").format("YYYY-MM-DD"),this.endDate=Ve().format("YYYY-MM-DD"))}async startCrawl(){console.debug("startCrawl");try{if(!this.mallId)throw new Error("店铺为空");if(!this.bindShopId)throw new Error("绑定店铺为空");if(!this.requestId)throw new Error("采集日志ID为空");this.crawlLogObj=new id(this.mallId,this.requestId),await this.crawlLogObj.init(),this.crawlLogObj.resetAllTaskCount(2),await this.startCrawlChoiceWaitPayList(this.mallId,this.startDate,this.endDate),await this.startCrawlChoicePayedList(this.mallId,this.startDate,this.endDate),await this.crawlLogObj.updateRequestRet(hr())}catch(t){if(this.crawlLogObj)await this.crawlLogObj.updateRequestRet(ir(Yt(t)));else throw t}}async startCrawlChoiceWaitPayList(t,r,n){const a="财务/我的收入/待结算收入",s="waitPayList";if(!this.crawlLogObj.isTaskSuccess(a))try{await this.crawlLogObj.startTask(a);const o=Date.now();let i=!1;const l={};let u={};const c=Ve(r).format("YYYY-MM-DD 00:00:00"),d=Ve(n).format("YYYY-MM-DD 23:59:59"),p=this.buildExportTaskHash(c,d,s);let b={result:"fail",reason:""};const m="hasTaskHashAndTaskIdMap";for(;!i;){if(Date.now()-o>18e4)throw new tg("导出等待超时",180);i=!0,u[p]||(u=Ui(m));const v=await this.getCurrentTimezoneInfo(),y=v.timezone,T=this.getCurrentUTC(v.defaultTimezone),S=yr(),w=xS(S,y),C=Ve(w).format("YYYY-MM-DD 00:00:00"),k=Ve(w).format("YYYY-MM-DD 23:59:59"),O=(await this.getFileExportList(C,k)).find(E=>{const N=new Date(this.convertToBeijingTime(E.createTime,T)).getTime(),$=E.fileName.includes("待结算账单");return N<=(l[p]||0)+6e4&&$||u[p]});if(O)if(`${O.fileStatus}`=="1"){u[p]=O.id,od(m,u);const E=await this.getFileUrl(O.id);if(!E)throw new Error("获取下载地址为空");const N={gmtOrderDateStart:c,gmtOrderDateEnd:d,orderDateType:NN,shopId:this.bindShopId,file:await this.getFileBase64(E),filename:O.id,requestId:this.requestId};b=await Ht({url:this.earthUrlsMap.createSheinChoiceImportTask,method:"POST",data:N})}else i=!1;else i=!1,await this.exportPlatformWaitPayCheckDetail(c,d),l[p]||(l[p]=new Date(yr()).getTime());await Je(5e3)}await this.saveMallLastRsyncTime(t,s),await this.crawlLogObj.saveTaskRet(a,b)}catch(o){await this.crawlLogObj.saveTaskRet(a,ir(Yt(o)))}}async startCrawlChoicePayedList(t,r,n){const a="财务/我的收入/已完成结算收入",s="payedList";if(!this.crawlLogObj.isTaskSuccess(a))try{await this.crawlLogObj.startTask(a);const o=Date.now();let i=!1;const l={};let u={};const c=Ve(r).format("YYYY-MM-DD 00:00:00"),d=Ve(n).format("YYYY-MM-DD 23:59:59"),p=this.buildExportTaskHash(c,d,s);let b={result:"fail",reason:""};const m="hasTaskHashAndTaskIdMap";for(;!i;){if(Date.now()-o>18e4)throw new tg("导出等待超时",180);i=!0,u[p]||(u=Ui(m));const v=await this.getCurrentTimezoneInfo(),y=v.timezone,T=this.getCurrentUTC(v.defaultTimezone),S=yr(),w=xS(S,y),C=Ve(w).format("YYYY-MM-DD 00:00:00"),k=Ve(w).format("YYYY-MM-DD 23:59:59"),O=(await this.getFileExportList(C,k)).find(E=>{const N=new Date(this.convertToBeijingTime(E.createTime,T)).getTime(),$=E.fileName.includes("已完成账单");return N<=(l[p]||0)+6e4&&$||u[p]});if(O)if(`${O.fileStatus}`=="1"){u[p]=O.id,od(m,u);const E=await this.getFileUrl(O.id);if(!E)throw new Error("获取下载地址为空");const N={gmtOrderDateStart:c,gmtOrderDateEnd:d,orderDateType:FN,shopId:this.bindShopId,file:await this.getFileBase64(E),filename:O.id,requestId:this.requestId};b=await Ht({url:this.earthUrlsMap.createSheinChoiceImportTask,method:"POST",data:N})}else i=!1;else i=!1,l[p]||(await this.exportPlatformPayedCheckDetail(c,d),l[p]=new Date(yr()).getTime());await Je(5e3)}await this.saveMallLastRsyncTime(t,s),await this.crawlLogObj.saveTaskRet(a,b)}catch(o){await this.crawlLogObj.saveTaskRet(a,ir(Yt(o)))}}async getTimezoneList(){var n;const t=this.sheinChoiceUrlMap.getTimezoneList,r=await Vo({url:t,type:"GET",data:{page:1,perPage:20}});if(`${r==null?void 0:r.code}`!="0")throw new Error(r.msg);return(n=r==null?void 0:r.info)==null?void 0:n.list}async getCurrentTimezoneInfo(){const t=await this.getUserInfo(),r=t.timezone;return t.utcTimezone?{timezone:r,defaultTimezone:t.utcTimezone}:(await this.getTimezoneList()).find(a=>`${a.timezone}`==`${r}`)}async getUserInfo(){const t=this.sheinChoiceUrlMap.getUserInfo,r=await Vo({url:t,type:"GET"});if(`${r==null?void 0:r.code}`!="0")throw new Error(r.msg);return r.info}async getFileExportList(t,r){var s;const n=this.sheinChoiceUrlMap.getFileExportList,a=await Vo({url:n,data:{createTimeStart:t,createTimeEnd:r,page:1,perPage:20}});if(`${a==null?void 0:a.code}`!="0")throw new Error(a.msg);return(s=a==null?void 0:a.info)==null?void 0:s.data}convertToBeijingTime(t,r){const n=new Date(t),a=new Date(n.toUTCString()),s=480,o=r*60,i=new Date(a.getTime()+(s-o)*60*1e3);return Ve(i).format("YYYY-MM-DD HH:mm:ss")}getCurrentUTC(t){return t.replace(/UTC|UCT/g,"")}buildExportTaskHash(t,r,n){return`${t}-${r}-${n}`}async getFileUrl(t){var a;const r=this.sheinChoiceUrlMap.getFileUrl,n=await Vo({url:r,type:"GET",data:{id:t}});if(`${n==null?void 0:n.code}`!="0")throw new Error(n.msg);return(a=n==null?void 0:n.info)==null?void 0:a.url}async exportPlatformWaitPayCheckDetail(t,r){var s;const n=this.sheinChoiceUrlMap.exportPlatformWaitPayCheckDetail,a=await Vo({url:n,type:"POST",data:{type:28,mode:2,orderDeliveryBeginTime:t,orderDeliveryEndTime:r}});if(`${a==null?void 0:a.code}`!="0")throw new Error(a.msg);return(s=a==null?void 0:a.info)==null?void 0:s.data}async exportPlatformPayedCheckDetail(t,r){const n=this.sheinChoiceUrlMap.exportPlatformPayedCheckDetail,a=await Vo({url:n,type:"POST",data:{type:28,mode:2,payBeginTime:t,payEndTime:r}});if(`${a==null?void 0:a.code}`!="0")throw new Error(a.msg);return a.info.data}async getFileBase64(t){const n=await(await fetch(t)).blob();return await this.transBlobToBase64(n)}transBlobToBase64(t){return new Promise(r=>{const n=new FileReader;n.onload=function(a){var o;let s=(o=a==null?void 0:a.target)==null?void 0:o.result;s&&s.indexOf("base64,")>0&&(s=s.split("base64,")[1]),r(s)},n.readAsDataURL(t)})}async saveMallLastRsyncTime(t,r){return await pn({url:this.earthChoiceUrlMap.saveMallLastRsyncTime,method:"POST",data:{mallId:t,rsyncType:r}})}}let IS=class{constructor(){he(this,"earthUrlsMap",{getCrawlTaskUrl:`${ca}/platform/shein_choice/stat/crawl/get_crawl_task`,initCrawlRequest:`${ca}/platform/shein_choice/stat/crawl/init_crawl_request`});he(this,"runStatus","wait");he(this,"crawlQueueList",[]);he(this,"isRunning",!1);he(this,"nextAutoCrawlTime",0)}getAllWindows(){return new Promise(t=>{Wn.windows.getAll({},r=>{t(r)})})}async run(t){console.debug("CrawlQueue run");try{if(this.runStatus="process",!da.crawlTabId){let r=await Ze.getItem(CS);r=r?Number.parseInt(r):null,r=Wl(r)?null:r,da.crawlTabId=r}for(;;){const n=(await this.getAllWindows()).length;if(console.debug("打开窗口数量",n),n>0){await this.autoCrawl();let a=await this.getTaskTs();const s=await Ze.getItem("local:newTs");if(s&&(a=s,Ze.removeItem("local:newTs")),a&&a>t){this.runStatus="waitStop";break}}await Je(900*1e3)}return new Promise(r=>{const n=setInterval(()=>{console.debug("wait stop"),this.isRunning===!1&&(clearInterval(n),console.debug("task stop"),r(!0))},3e3)})}catch(r){throw this.runStatus="waitStop",r}}async autoCrawl(){if(Date.now()<this.nextAutoCrawlTime)return;da.isDebug?this.nextAutoCrawlTime=Date.now()+1e3*60:this.nextAutoCrawlTime=Date.now()+1e3*3600;try{const r=await pn({url:this.earthUrlsMap.getCrawlTaskUrl,method:"GET"}),n=(r==null?void 0:r.taskList)||[];if(n.length){const a=await this.getSheinChoiceBackendLoginInfo();for(const s of n)`${s.mallId}`==`${a==null?void 0:a.supplierId}`&&(s.mallName=a.supplierUserName,s.platform="sheinChoice",this.addCrawlQueueByTask(s))}console.debug(yr(),"crawlQueueList",this.crawlQueueList)}catch(r){console.debug(yr(),"autoCrawl fail",r)}}async getTaskTs(){const t=await pn({url:"http://plw.szchengji-inc.com/open/plugin/getBgTaskCodeTs",method:"GET"});return t==null?void 0:t.ts}addCrawlQueueByTask(t){console.debug("addCrawlQueueByTask",t);const{mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,host:i}=t;this.addCrawlQueue({mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,action:"auto",host:i})}async addCrawlQueue(t){const{mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,startDate:i,endDate:l,action:u,gmtExec:c,host:d}=t||{},p=this.crawlQueueList.find(m=>`${m.mallId}`==`${r}`);(!p||p.locked===0)&&(this.crawlQueueList=this.crawlQueueList.filter(m=>`${m.mallId}`!=`${r}`),this.crawlQueueList.push({mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,startDate:i,endDate:l,action:u||"auto",retryTimes:0,locked:0,gmtExec:c||yr(),gmtLock:null,requestId:p&&p.requestId,host:d}),this.crawlQueueList.sort((m,h)=>new Date(m.gmtExec).getTime()-new Date(h.gmtExec).getTime()));const b=new id(r);await b.init(),b.sendToClientTab(),this.start()}async getSheinChoiceBackendLoginInfo(){const t=`${qo}/sso-prefix/auth/getUser`;try{const r=await pu({url:t}),n=r?r.msg:"";return(n?!+n.includes("子系统登录重定向"):1)?Promise.resolve(r):Promise.reject("未登录Shein后台")}catch{return Promise.resolve({})}}async start(){if(console.debug("start"),!this.isRunning){for(console.debug(yr(),"start process queue"),this.isRunning=!0;;){let t=null;try{if(t=await this.lockQueue(),console.debug(yr(),"lock queue",t),t){const r=await this.processQueue(t);console.debug(yr(),"processQueue",r),await this.clearQueue(t,r)}else if(this.crawlQueueList.length>0)console.debug(yr(),"lock empty,sleep"),await Je(10*1e3);else{console.debug(yr(),"stop timer");break}}catch(r){console.debug(yr(),"processQueue exception",t,r)}if(this.runStatus==="waitStop")break}this.isRunning=!1}}async lockQueue(){this.crawlQueueList=this.crawlQueueList.filter(n=>n.retryTimes<5);const t=yr(),r=this.crawlQueueList.find(n=>n.locked===0&&n.gmtExec<=t);if(r){if(!r.requestId){const n=await this.initRequestId(r);if(n.result==="success")r.requestId=n.requestId;else return r.retryTimes++,null}r.locked=1,r.gmtLock=t}return r}async processQueue(t){try{return await new kS(t).startCrawl(),{result:"success",reason:""}}catch(r){return r instanceof tg?{result:"fail",canRetry:!0,sleepSeconds:(r==null?void 0:r.sleepSeconds)||1800,reason:r.message}:{result:"fail",canRetry:!1,sleepSeconds:0,reason:Yt(r)}}}async clearQueue(t,r){if(r.canRetry){const a=this.crawlQueueList.find(s=>`${s.mallId}`==`${t.mallId}`);a.retryTimes++,a.locked=0,a.gmtExec=yr(r.sleepSeconds||1800)}else this.crawlQueueList=this.crawlQueueList.filter(a=>`${a.mallId}`!=`${t.mallId}`);const n=new id(t.mallId,t.requestId);await n.init(),n.sendToClientTab()}initRequestId({mallId:t,mallName:r,action:n}){return pn({url:this.earthUrlsMap.initCrawlRequest,method:"POST",data:{mallId:t,mallName:r,action:n}})}};const AS=Object.freeze(Object.defineProperty({__proto__:null,CrawlLog:id,CrawlQueue:IS,CrawlSheinChoice:kS,CrawlTask:class{async run(){console.debug("sheinChoiceCrawlTask"),da.crawlQueue||(da.crawlQueue=new IS,await Ze.getItem("local:crawlDebug")&&(da.isDebug=!0));try{for(;;){const{ts:t,result:r}=await this.getTaskCode();if(console.debug("getSheinChoiceTaskCode",t),r==="success"){if(await da.crawlQueue.run(t)!==!0)throw new Error("返回不是true");await Je(5*1e3)}else await Je(3600*1e3)}}catch(t){Ze.setItem("local:bgTaskFail",`异常:${Date.now()}:${t==null?void 0:t.message}`)}}async getTaskCode(){return pn({url:"http://plw.szchengji-inc.com/open/plugin/getBgTaskCode",method:"GET"})}},LOCAL_CRAWL_MALL_INFO_LIST:eg,LOCAL_CRAWL_SHEIN_CHOICE_TAB_ID:CS,_globalCrawlData:da,ajaxSheinChoice:Vo},Symbol.toStringTag,{value:"Module"})),rg=Object.freeze(Object.defineProperty({__proto__:null,source:"temu"},Symbol.toStringTag,{value:"Module"})),Ft="https://erp.91miaoshou.com/api",ng="eprFee",OS="eprFeeRefund",ld="gmt_settlement",BN="returnWaybillFee",PS="tradeIncome",ES="freightIncome",$S="afterSalesRefund",RS="freightRefundAmount",LS="illegalDeduction",MS="otherFee",jN="shipWaybillFee",ag="gmt_order_start",UN="afterSalesCompensationDeduction",qN="labelingServiceFee",VN="pickupServiceFee",HN="returnServiceFee",zN="returnGoodsSortingPackingFee",WN="postDiscountTax",KN="platformSubsidy",GN="taxRefund",YN="waybillFee",JN="refundQuantity",XN="local:temuAntiContent";async function Tt(e){let{mallId:t,url:r,data:n=null,retryTimes:a=0,antiContentStr:s}=e;const o=await pu({url:r,method:"POST",body:n&&JSON.stringify(n),headers:{Accept:"*/*","Anti-Content":s,"content-type":"application/json",Mallid:t}});return o.error_code&&(o.errorCode=o.error_code,o.errorMsg=o.error_msg),o.errorCode===40001&&(o.errorMsg||(o.errorMsg="登录过期，请重新登录")),o.errorCode===4000004&&(o.errorMsg||"").includes("请稍后重试")&&a<3?(await Je(3e3),a++,await Tt({mallId:t,url:r,data:n,retryTimes:a,antiContentStr:s})):o}async function Es(e){let{mallId:t,url:r,data:n=null,retryTimes:a=0}=e;const s=await pu({url:r,method:"POST",body:n&&JSON.stringify(n),headers:{"content-type":"application/json;charset=UTF-8"}});return s.errorCode===40001&&(s.errorMsg||(s.errorMsg="登录过期，请重新登录")),s.errorCode===4000004&&(s.errorMsg||"").includes("请稍后重试")&&a<3?(console.debug("请求频繁，等待3s后重试..."),await Je(3e3),a++,await Es({mallId:t,url:r,data:n,retryTimes:a})):s}function wt(e,t="seller"){return`${DS(t).host||""}${e}`}function QN(e){return`https://agentseller.temu.com${e}`}function Oa(e){return DS(e).name||""}function DS(e){return{seller:{name:"seller",host:"https://seller.kuajingmaihuo.com"},us:{name:"美国",host:"https://agentseller-us.temu.com"},global:{name:"全球",host:"https://agentseller.temu.com"},eu:{name:"欧区",host:"https://agentseller-eu.temu.com"}}[e]||{}}function ZN(e){try{return JSON.parse(e)}catch{return{}}}function NS(e,t){let r=0,n=0;const a=[];for(const s in e)n++,a[r]=a[r]||{},a[r][s]=e[s],n===t&&(r++,n=0);return a}function FS(e){if(!e)return 0;let t=e.replace(/,/g,"").replace(/[^\d.-]/g,"");t.includes(".")||(t+=".00");const r=Number.parseFloat(t).toFixed(2);return Wl(r)?0:r}const sg="local:crawlMallInfoList",BS="local:crawlTabId";class Cn extends Error{constructor(r,n){super(r);he(this,"sleepSeconds");this.name=this.constructor.name,this.sleepSeconds=n,Error.captureStackTrace(this,this.constructor)}}const Er={isDebug:!1,crawlTabId:null,localData:{},crawlQueue:null};class ud{constructor(t,r=null){he(this,"earthUrlsMap",{updateCrawlRequestStatus:`${Ft}/platform/pddkj/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${Ft}/platform/pddkj/stat/crawl/init_crawl_request_detail`});he(this,"mallId");he(this,"requestId");he(this,"crawlTaskKey");he(this,"crawlTaskNameAndRetKey");he(this,"crawlTaskNameAndLogKey");he(this,"crawlTaskObj",{});he(this,"crawlRequestIdAndTaskNameAndRetObj");he(this,"crawlRequestIdAndTaskNameAndLogObj");this.mallId=t,this.requestId=r,this.crawlTaskKey=`crawl_task_${this.mallId}`,this.crawlTaskNameAndRetKey=`crawl_task_ret_${this.mallId}`,this.crawlTaskNameAndLogKey=`crawl_task_log_${this.mallId}`}async init(){this.crawlTaskObj=await Ui(this.crawlTaskKey),this.crawlRequestIdAndTaskNameAndRetObj=await this.initCacheData(this.crawlTaskNameAndRetKey),this.crawlRequestIdAndTaskNameAndLogObj=await this.initCacheData(this.crawlTaskNameAndLogKey)}resetAllTaskCount(t){this.crawlTaskObj.status=null,this.crawlTaskObj.requestId=this.requestId,this.crawlTaskObj.allTaskCount=t,this.crawlTaskObj.finishTaskCount=0;for(const r in this.crawlRequestIdAndTaskNameAndRetObj){const n=this.crawlRequestIdAndTaskNameAndRetObj[r]||{};for(const a in n)n[a]&&n[a].result==="success"&&this.crawlTaskObj.finishTaskCount++}this.setItem(this.crawlTaskKey,this.crawlTaskObj)}incrFinishTaskCount(t){this.crawlTaskObj.finishTaskCount+=t,this.setItem(this.crawlTaskKey,this.crawlTaskObj)}async getCrawlInfo(){var c;const t={mallId:this.mallId,status:null,progressText:"",progressRate:""};(((c=Er.crawlQueue)==null?void 0:c.crawlQueueList)||[]).find(d=>`${d.mallId}`==`${this.mallId}`)&&(t.status="processing");const{requestId:a,currentTaskName:s,progressText:o,allTaskCount:i,finishTaskCount:l,status:u}=this.crawlTaskObj;return this.requestId&&`${this.requestId}`==`${a}`&&(t.progressText=`【${s}】：${o}`,t.progressRate=i>0?Math.floor(l/i*100):0,u==="success"?t.progressText="采集完成":u==="fail"&&(t.progressText=`采集部分失败：${t.reason||""}`)),console.debug("CrawlInfo",t),t}async updateRequestStatus(t,r){return pn({url:this.earthUrlsMap.updateCrawlRequestStatus,method:"POST",data:{requestId:t,status:r.result,reason:r.reason}})}async saveRequestDetail(t,r){return pn({url:this.earthUrlsMap.initCrawlRequestDetail,method:"POST",data:{requestId:t,desc:r}})}async initCacheData(t){const r=await Ui(t);let n={};for(const s in r)if(!this.requestId||`${this.requestId}`==`${s}`){n=r[s];break}const a={};return a[this.requestId]=n,a}setItem(t,r){this.requestId&&od(t,r),this.sendToClientTab()}async sendToClientTab(){if(!Er.crawlTabId)return;const t=await this.getCrawlInfo();try{const r=await Ze.getItem(sg)||[],{mallId:n}=t,a=r.reduce((s,o)=>(`${o.id}`==`${n}`?s.push({...o,...t}):s.push(o),s),[]);Ze.setItem(sg,a)}catch(r){Er.crawlTabId=null,console.debug(r)}}isTaskSuccess(t,r){const n=this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||{};return!!(r&&n[r]&&n[r].result==="success"||n.result==="success")}async updateRequestRet(t){if(this.crawlTaskObj.status=t==null?void 0:t.result,this.crawlTaskObj.reason=t==null?void 0:t.reason,this.setItem(this.crawlTaskKey,this.crawlTaskObj),(await this.updateRequestStatus(this.requestId,t)).result!=="success")throw new Error(`更新采集结果:${t.reason}`)}async saveTaskSubTaskRet(t,r,n){this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]={}),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t][r]=n,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj);let a="";n.result==="success"?a="采集成功":a=`采集失败，原因：${n.reason}`,await this.updateTaskProgress(t,r+a)}async saveTaskRet(t,r){let n=t,a="";if(r.result==="success"){const{isShowSuccessReason:o,reason:i}=r;let l="";o&&i&&(l=`(${i||""})`),n+=`，采集成功${l}`,a=`采集成功${l}`}else n+=`，采集失败，原因：${r.reason}`,a=`采集失败，原因：${r.reason}`;await this.updateTaskProgress(t,a);const s=await this.saveRequestDetail(this.requestId,n);if(s.result!=="success")throw new Error(`保存采集详情失败:${s.reason}`);r.canRetry||this.incrFinishTaskCount(1),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]=r,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj)}startTask(t){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText="开始采集",this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,"开始采集")}updateTaskProgress(t,r){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText=r,this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,r)}async debugLog(t,r){Er.isDebug&&(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]=[]),this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t].push({date:yr(),desc:r}),this.setItem(this.crawlTaskNameAndLogKey,this.crawlRequestIdAndTaskNameAndLogObj))}}class jS{constructor({mallId:t,mallName:r,action:n,mallType:a,bindShopId:s,authAppNameList:o,startDate:i,endDate:l,requestId:u,antiContentStr:c,host:d}){he(this,"earthUrlsMap",{getShopWithBindMallList:`${Ft}/platform/pddkj/stat/crawl/get_crawl_shop_with_bind_mall_list`,bindTemuMall:`${Ft}/platform/pddkj/shop/shop/bind_pddkj_mall`,unbindTemuMall:`${Ft}/platform/pddkj/shop/shop/unbind_pddkj_mall`,uploadSettlement:`${Ft}/platform/pddkj/stat/crawl/upload_settlement_excel`,saveMallGmtLastRsyncSettlement:`${Ft}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_settlement`,uploadSaleManageList:`${Ft}/platform/pddkj/stat/crawl/upload_sale_manage_list`,saveMallGmtLastRsyncSaleManage:`${Ft}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_sale_manage`,uploadAfterSaleList:`${Ft}/platform/pddkj/stat/crawl/upload_after_sale_list`,saveMallGmtLastRsyncAfterSale:`${Ft}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_after_sale`,initCrawlRequest:`${Ft}/platform/pddkj/stat/crawl/init_crawl_request`,updateCrawlRequestStatus:`${Ft}/platform/pddkj/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${Ft}/platform/pddkj/stat/crawl/init_crawl_request_detail`,getFullAccountName:`${Ft}/auth/account/get_full_account_name`,getAccountInfo:`${Ft}/auth/account/get_account_info`,createPddkjChoiceImportTask:`${Ft}/order/data/import_cost/createPddkjChoiceImportTask`,uploadProductSale:`${Ft}/platform/pddkj/stat/crawl/upload_product_sale`,uploadProductQualityScoreUrl:`${Ft}/platform/pddkj/stat/crawl/uploadProductQualityScore`,uploadLongTermActivityUrl:`${Ft}/platform/pddkj/stat/crawl/upload_long_term_activity`,uploadAppliedActivityUrl:`${Ft}/platform/pddkj/stat/crawl/upload_applied_activity`,getCrawlTaskUrl:`${Ft}/platform/pddkj/stat/crawl/upload_applied_activity`,uploadCustomizePic:`${Ft}/platform/pddkj/stat/crawl/upload_customize_pic`,uploadCustomizeGoodsList:`${Ft}/platform/pddkj/stat/crawl/upload_customize_goods_list`,batchAddGoodsRiskTags:`${Ft}/warehouse/pddkj_prepare_goods/batch_add_goods_risk_tags`,clearInvalidGoodsRiskTags:`${Ft}/warehouse/pddkj_prepare_goods/clear_invalid_goods_risk_tags`,getTimestamp:`${Ft}/home/home/getTimestamp`,createPddkjImportTask:`${Ft}/order/data/import_cost/createPddkjImportTask`,uploadProductSkuQualityScoreUrl:`${Ft}/platform/pddkj/stat/crawl/uploadProductSkuQualityScore`,saveAccountOverview:`${Ft}/platform/pddkj/stat/crawl/saveAccountOverview`,saveAccountWaitSettleAmount:`${Ft}/platform/pddkj_choice/stat/crawl/saveAccountWaitSettleAmount`,saveAccountLimitationOfFunds:`${Ft}/platform/pddkj/stat/crawl/saveAccountLimitationOfFunds`,savePddkjCrawlDataParseTask:`${Ft}/platform/pddkj/stat/crawl/savePddkjCrawlDataParseTask`});he(this,"earthChoiceUrlMap",{saveMallLastRsyncTime:`${Ft}/platform/pddkj_choice/stat/crawl/saveMallLastRsyncTime`,uploadProductList:`${Ft}/platform/pddkj_choice/stat/crawl/uploadProductList`,uploadSettlement:`${Ft}/platform/pddkj_choice/stat/crawl/uploadSettlementExcel`,saveCrawlWaitSettlementData:`${Ft}/platform/pddkj_choice/stat/crawl/saveCrawlWaitSettlementData`,uploadProductActivityPriceList:`${Ft}/platform/pddkj_choice/stat/crawl/uploadProductActivityPriceList`,uploadProductQualityScoreUrl:`${Ft}/platform/pddkj_choice/stat/crawl/uploadProductQualityScore`});he(this,"earthLocalUrlMap",{uploadLocalOrderSkuList:`${Ft}/platform/pddkj_local/stat/crawl/uploadLocalOrderSkuList`,uploadLocalOrderReport:`${Ft}/platform/pddkj_local/stat/crawl/uploadLocalOrderReport`,createPddkjLocalImportTask:`${Ft}/order/data/import_cost/createPddkjLocalImportTask`});he(this,"requestId");he(this,"mallId");he(this,"mallName");he(this,"action");he(this,"mallType");he(this,"bindShopId");he(this,"authAppNameList");he(this,"startDate");he(this,"endDate");he(this,"crawlLogObj",{});he(this,"antiContentStr");he(this,"host");he(this,"handleCountResult",({error:t,resultsMap:r,customProductSkuId:n})=>{const a=Yt(t);r.failReasonMap[a]||(r.failReasonMap[a]=[]),r.failReasonMap[a].includes(n)||r.failReasonMap[a].push(n)});he(this,"formatCustomizeResultRet",t=>{const{total:r=0,failReasonMap:n={}}=t,{tips:a,failIds:s}=Object.entries(n).reduce((u,[c,d=[]],p)=>(u.tips.push(`${p+1}.${c}`),u.failIds.push(...d),u),{tips:[],failIds:[]}),o=Xw(s).length;let i="success",l=o>0?`其中${o}个定制品采集失败，原因：${a.join(";")}`:"";return o>0&&o>=r&&(i="fail",l="采集失败"),{result:i,reason:l,isShowSuccessReason:!0}});this.requestId=u,this.mallId=t,this.mallName=r,this.action=n,this.mallType=a,this.bindShopId=s,this.authAppNameList=o||[],this.startDate=i,this.endDate=l,this.antiContentStr=c,this.host=d,(!this.startDate||!this.endDate)&&(this.startDate=Ve().subtract(30,"day").format("YYYY-MM-DD"),this.endDate=Ve().format("YYYY-MM-DD"))}async startCrawl(){console.debug("startCrawl");try{if(!this.mallId)throw new Error("店铺为空");if(!this.bindShopId)throw new Error("绑定店铺为空");if(!this.requestId)throw new Error("采集日志ID为空");if(this.crawlLogObj=new ud(this.mallId,this.requestId),await this.crawlLogObj.init(),this.mallType==="pddkj")this.crawlLogObj.resetAllTaskCount(22),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"eu"),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"global"),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"us"),await this.startCrawlLongTermActivityList(this.mallId),await this.startCrawlAppliedActivityList(this.mallId),await this.startCrawlSaleManage(this.mallId),await this.startRsyncRiskTag(this.mallId),await this.startRsyncCustomizeOrderSkuInfo(this.mallId,this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"us",this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlEprProxyPaymentServiceFeeWait(this.mallId,"eu"),await this.startCrawlEprProxyPaymentServiceFee(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlEprFee(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlStockingPenalty(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlQualityAccidentViolationDeduction(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlBill(this.mallId,this.startDate,this.endDate),await this.startCrawlFulfillmentBill(this.mallId,1,this.startDate,this.endDate),await this.startCrawlFulfillmentBill(this.mallId,2,this.startDate,this.endDate),await this.startCrawlAccountOverview(this.mallId),await this.startCrawlFundFrozen(this.mallId);else if(this.mallType==="pddkjChoice"){const t={pddkjChoiceOrder:"us",pddkjChoiceEuOrder:"eu",pddkjChoiceGlobalOrder:"global"};this.crawlLogObj.resetAllTaskCount(9+this.authAppNameList.length*5),await this.startCrawlChoiceProductList(this.mallId),await this.startCrawlChoiceAppliedActivityList(this.mallId),await this.startCrawlChoicelongTermEnrollmentList(this.mallId),await this.startCrawlChoiceErpFee(this.mallId,this.startDate,this.endDate),await this.startRsyncRiskTag(this.mallId);for(const r of this.authAppNameList){const n=t[r];await this.startCrawlChoiceGoodsQuantityScoreDt(this.mallId,n),await this.startCrawlChoiceStmlLogistics(this.mallId,n,this.startDate,this.endDate),await this.startCrawlChoiceStmlReverseLogistics(this.mallId,n,this.startDate,this.endDate,1),await this.startCrawlChoiceStmlReverseLogistics(this.mallId,n,this.startDate,this.endDate,2),await this.startCrawlWaitSettlementData(this.mallId,n,this.startDate,this.endDate)}await this.startCrawlChoiceTransactionRevenue(this.mallId,this.startDate,this.endDate),await this.startCrawlAccountOverview(this.mallId),await this.startCrawlFundFrozen(this.mallId)}else if(this.mallType==="pddkjLocal")this.crawlLogObj.resetAllTaskCount(3),await this.startCrawlLocalOrderList(this.mallId,this.startDate,this.endDate),await this.startCrawlLocalOrderReport(this.mallId,this.startDate,this.endDate),await this.startCrawlLocalBillReport(this.mallId,this.startDate,this.endDate);else throw new Error(`店铺类型错误${this.mallType}`);await this.crawlLogObj.updateRequestRet(hr())}catch(t){if(this.crawlLogObj)await this.crawlLogObj.updateRequestRet(ir(Yt(t)));else throw t}}async startCrawlChoiceProductList(t){var a;const r="销售管理";if(this.crawlLogObj.isTaskSuccess(r))return;const n=Er;try{await this.crawlLogObj.startTask(r);const s=QN("/visage-agent-seller/product/skc/pageQuery"),o=20;let i=1,l=0,u=0;do{const c=await Tt({mallId:t,url:s,data:{page:i,pageSize:o},antiContentStr:this.antiContentStr});if(c.errorCode!==1e6)throw new Error(c.errorMsg);if(!c.result)break;const d=[];l||(l=((a=c.result)==null?void 0:a.total)||0,u=Math.max(1,Math.ceil(l/o)));const p=c.result,b=(p==null?void 0:p.pageItems)||[];for(const h of b){const{productId:v,productSkcId:y}=h||{},T={productId:v,productSkcId:y,productSkuSummaries:[]},S=h.productSkuSummaries;if(S)for(const w of S){const k={...Lo(w,["productSkuId","extCode","supplierPrice","supplierPriceUS","siteSupplierPrices"]),currency:w.currencyType};T.productSkuSummaries.push(k)}d.push(T)}const m=await Ht({url:this.earthChoiceUrlMap.uploadProductList,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(d),filename:`${r}-第${i}页`,requestId:this.requestId,shopId:this.bindShopId}});if(m.result!=="success")throw new Error(m.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${i}/${u}页`),await Je(3e3),n.isDebug&&i===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}i++}while((i-1)*o<l);await this.saveMallLastRsyncTime(t,"productList"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(s){await this.crawlLogObj.saveTaskRet(r,ir(Yt(s)))}}async startCrawlChoiceAppliedActivityList(t){var a,s;const r="店铺营销/报名记录/专题活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const n=Er;try{await this.crawlLogObj.startTask(r);const o=wt("/marvel-mms/cn/api/kiana/gambit/marketing/activity/product/applied/list"),i=10;let l=1,u=0,c=0;do{const d=await Tt({mallId:t,url:o,data:{pageNo:l,pageSize:i},antiContentStr:this.antiContentStr});if(d.errorCode!==1e6)throw new Error(d.errorMsg);if(!d.result)break;const p=[];u||(u=((a=d.result)==null?void 0:a.total)||0,c=Math.max(1,Math.ceil(u/i)));const b=d.result,m=(b==null?void 0:b.productList)||[];for(const v of m){const{productId:y,activityStartTime:T,activityEndTime:S,id:w,sessionStatus:C,skcList:k=[]}=v||{};for(const f of k){const O=f.skcId;for(const E of f.skuList){const{skuId:N,currency:$,extCode:L}=E||{};let B=E.activityPrice,F=!1;if(Mr(E.sitePriceList))for(const H of E.sitePriceList)H.siteName==="美国站"&&(B=H.activityPrice,F=!0);Mr(E.sitePriceList)&&E.sitePriceList.length&&F===!1&&(B=(s=E.sitePriceList[0])==null?void 0:s.activityPrice);const R={productId:y,productSkcId:O,productSkuId:N,currency:$,extCode:L,activityPrice:B,activityStartTime:T,activityEndTime:S,activityId:w,sessionStatus:C};p.push(R)}}}const h=await Ht({url:this.earthChoiceUrlMap.uploadProductActivityPriceList,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(p),filename:`${r}-第${l}页`,requestId:this.requestId,shopId:this.bindShopId}});if(h.result!=="success")throw new Error(h.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${l}/${c}页`),await Je(3e3),n.isDebug&&l===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}l++}while((l-1)*i<u);await this.saveMallLastRsyncTime(t,"activityPrice"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(o){await this.crawlLogObj.saveTaskRet(r,ir(Yt(o)))}}async startCrawlChoicelongTermEnrollmentList(t){var a;const r="店铺营销/报名记录/长期活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const n=Er;try{await this.crawlLogObj.startTask(r);const s=wt("/marvel-mms/cn/api/kiana/gambit/marketing/enroll/list"),o=50;let i=1,l=0,u=0,c=0;do{const d=await Tt({mallId:t,url:s,data:{pageNo:i,pageSize:o},antiContentStr:this.antiContentStr});if(d.errorCode!==1e6){if(i>1&&d.errorMsg==="Operation too frequent, please try again later"){if(c++,c>5)throw new Error(`${d.errorMsg} retry 5 times 合计${l} page=${i}`);await Je(5e3*c);continue}throw new Error(d.errorMsg)}if(c=0,!d.result)break;const p=[];l||(l=((a=d.result)==null?void 0:a.total)||0,u=Math.max(1,Math.ceil(l/o)));const m=d.result.list??[];for(const v of m){const{productId:y,sessionStartTime:T,sessionEndTime:S,enrollId:w,sessionStatus:C,skcList:k=[]}=v||{};for(const f of k){const O=f.skcId;for(const E of f.skuList){const{skuId:N,currency:$,extCode:L}=E||{};let B=E.activityPrice,F=!1;if(Mr(E.sitePriceList))for(const H of E.sitePriceList)H.siteName==="美国站"&&(B=H.activityPrice,F=!0);Mr(E.sitePriceList)&&E.sitePriceList.length&&F===!1&&(B=E.sitePriceList[0].activityPrice);const R={productId:y,productSkcId:O,productSkuId:N,currency:$,extCode:L,activityPrice:B,activityStartTime:T,activityEndTime:S,activityId:w,sessionStatus:C};p.push(R)}}}const h=await Ht({url:this.earthChoiceUrlMap.uploadProductActivityPriceList,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(p),filename:`${r}-第${i}页`,requestId:this.requestId,shopId:this.bindShopId}});if(h.result!=="success")throw new Error(h.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${i}/${u}页`),await Je(5e3),n.isDebug&&i===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}i++}while((i-1)*o<l);await this.saveMallLastRsyncTime(t,"activityPrice"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(s){await this.crawlLogObj.saveTaskRet(r,ir(Yt(s)))}}async startCrawlChoiceErpFee(t,r,n){var o,i;const s=`账户资金/EPR费用管理-${Oa("eu")}`;if(!this.crawlLogObj.isTaskSuccess(s))try{const l=Date.now();await this.crawlLogObj.startTask(s),await this.loginMallAgent(t,"eu");let u=!1;const c={},d=[{taskType:18,taskTypeName:"商品环保费"},{taskType:19,taskTypeName:"物流包装环保费"}],p=[{exportType:2,exportTypeName:"已扣费"},{exportType:4,exportTypeName:"已退费"}];for(;!u;){if(Date.now()-l>3e5)throw new Cn("导出等待超时",300);u=!0;for(const b of this.groupBy30Days(r,n))for(const{taskType:m,taskTypeName:h}of d){const v=await this.getChoiceExportHistory(t,"eu",m);for(const{exportType:y,exportTypeName:T}of p){const S=h+T;if(this.crawlLogObj.isTaskSuccess(s,S))continue;const w=v.find(C=>`${C.exportType}`==`${y}`&&C.expireTime>Date.now()&&`${C.financeStartTime}`==`${b.start.getTime()}`&&`${C.financeEndTime}`==`${b.end.getTime()}`);if(w)if(+w.status==2){const C=wt("/api/merchant/file/export/download","eu"),k=await Tt({mallId:t,url:C,data:{taskType:m,id:w.id},antiContentStr:this.antiContentStr});if(k.errorMsg)throw new Error(k.errorMsg);if(!((o=k.result)!=null&&o.fileUrl))throw new Error("获取下载地址失败");const f=(i=k.result)==null?void 0:i.fileUrl;let O=[];y===2?O=[ng]:y===4&&(O=[OS]);const E={feeTypeList:O,gmtOrderDateStart:this.timestampTranDate(w.financeStartTime),gmtOrderDateEnd:this.timestampTranDate(w.financeEndTime),orderDateType:ld,shopId:this.bindShopId,file:await this.getFileBase64(f),filename:`${w.id}-${s}`,requestId:this.requestId},N=await Ht({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:E});await this.crawlLogObj.saveTaskSubTaskRet(s,S,N)}else u=!1;else{u=!1;const C={exportType:y,taskType:m,financeStartTime:b.start.getTime(),financeEndTime:b.end.getTime()};if(!c[`${C.exportType}-${C.taskType}-${C.financeStartTime}-${C.financeEndTime}}`]){const k=wt("/api/merchant/file/export","eu"),f=await Tt({mallId:t,url:k,data:C,antiContentStr:this.antiContentStr});if(f.errorCode!==1e6&&f.errorMsg!=="导出任务已存在, 请勿重复创建, 请前往【导出历史】查看")throw new Error(f.errorMsg);c[`${C.taskType}-${C.taskType}-${C.financeStartTime}-${C.financeEndTime}}`]=!0}}}}await Je(5e3)}await this.saveMallLastRsyncTime(t,"eprFee"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(l){await this.crawlLogObj.saveTaskRet(s,ir(Yt(l)))}}async startCrawlChoiceGoodsQuantityScoreDt(t,r){const n=`品质分-${Oa(r)}`;try{if(this.crawlLogObj.isTaskSuccess(n))return;const a=r==="eu";await this.crawlLogObj.startTask(n),await this.loginMallAgent(t,r);const s=wt("/bg-luna-agent-seller/goods/quality/semiHosted/qualityScore/count",r),o=await Tt({mallId:t,url:s,data:{page:1,pageSize:10,qualityScoreEnum:2},antiContentStr:this.antiContentStr});if(o.errorCode!==1e6)throw new Error(o.errorMsg);const i=await Ht({url:this.earthUrlsMap.uploadProductQualityScoreUrl,method:"POST",data:{mallId:t,region:r,uploadDataList:JSON.stringify(o.result),filename:n,requestId:this.requestId,shopId:this.bindShopId}});if(i.result!=="success")throw new Error(i.reason);await this.saveMallLastRsyncTime(t,a?"goodsQuantityScore":"goodsQuantityScoreEu"),await this.crawlLogObj.saveTaskRet(n,hr())}catch(a){await this.crawlLogObj.saveTaskRet(n,ir(Yt(a)))}}async startCrawlChoiceStmlReverseLogistics(t,r,n,a,s){const o=`账户资金/退货面单费-${Oa(r)}-${s===1?"商家仓":"temu仓"}`;if(!this.crawlLogObj.isTaskSuccess(o))try{const i={},l=Date.now();let u=!1,c=!1;for(;!u;){if(Date.now()-l>3e5)throw new Cn("导出等待超时",300);u=!0,c||(await this.loginMallAgent(t,r),c=!0);const d=await this.queryStmlReverseLogisticsTask(t,r,s);for(const p of this.groupBy30Days(n,a)){const b={deductTypeList:[1,2,3],deductDesc:["支出","调整(支出)","调整(退款)"],deductTimeBegin:p.start.getTime(),deductTimeEnd:p.end.getTime(),rangeTime:`导出任务生成时间: ${this.formatToBeijingDate(p.start,"YYYY-MM-DD")} ~ ${this.formatToBeijingDate(p.end,"YYYY-MM-DD")}`},m=b.rangeTime;if(this.crawlLogObj.isTaskSuccess(o,m))continue;const h={ext:JSON.stringify(b)},v=d.find(y=>Ro(ZN(y.ext),b)&&Date.now()-new Date(y.createdAt).getTime()<24*3600*1e3&&!(y.isFinished&&!y.isSuccess));if(v)if(v.isFinished){const y=JSON.parse(v.ext),T={gmtOrderDateStart:this.timestampTranDate(y.deductTimeBegin),gmtOrderDateEnd:this.timestampTranDate(y.deductTimeEnd),feeTypeList:[BN],orderDateType:ld,shopId:this.bindShopId,file:await this.getFileBase64(v.downloadUrl),filename:`${v.id}-${o}`,requestId:this.requestId},S=await Ht({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:T});await this.crawlLogObj.saveTaskSubTaskRet(o,m,S)}else u=!1;else if(u=!1,!i[`${b.deductTimeBegin}-${b.deductTimeEnd}`]){let y=wt("/portal/sunce/seller/center/bill/download/async",r);r==="us"&&(y=wt("/portal/udp/sunce/seller/center/bill/download/async",r)),s===2&&(y=wt("/portal/sunquan/seller/center/bill/download/async",r),r==="us"&&(y=wt("/portal/udp/sunquan/seller/center/bill/download/async",r))),await Tt({mallId:t,url:y,data:h,antiContentStr:this.antiContentStr}),i[`${b.deductTimeBegin}-${b.deductTimeEnd}`]=!0}}await Je(1e4)}await this.saveMallLastRsyncTime(t,"stmlReverseLogistics"),await this.crawlLogObj.saveTaskRet(o,hr())}catch(i){await this.crawlLogObj.saveTaskRet(o,ir(Yt(i)))}}async queryStmlReverseLogisticsTask(t,r,n){var o;let a=wt("/portal/sunce/seller/center/bill/task/list",r);r==="us"&&(a=wt("/portal/udp/sunce/seller/center/bill/task/list",r)),n===2&&(a=wt("/portal/sunquan/seller/center/bill/task/list",r),r==="us"&&(a=wt("/portal/udp/sunquan/seller/center/bill/task/list",r)));const s=await Tt({mallId:t,url:a,data:{pageNum:1,pageSize:10},antiContentStr:this.antiContentStr});if(s.errorMsg)throw new Error(s.errorMsg);return((o=s.result)==null?void 0:o.excelCommonTaskList)||[]}async startCrawlChoiceStmlLogistics(t,r,n,a){const s=`账户资金/发货面单费-${Oa(r)}`;if(!this.crawlLogObj.isTaskSuccess(s))try{let o=!1,i=!1;const l={},u=Date.now();for(;!o;){if(Date.now()-u>3e5)throw new Cn("导出等待超时",300);o=!0,i||(await this.loginMallAgent(t,r),i=!0);const c=await this.queryStmlLogisticsTask(t,r);for(const d of this.groupBy30Days(n,a)){const p={req:{deductTimeBegin:d.start.getTime(),deductTimeEnd:d.end.getTime(),reconciliationTypeList:[1,2,3,5,6,7,8]},requestStr:JSON.stringify([{label:"账单类型",value:["支出","调整(支出)","调整(退款)","物流商赔偿款","揽收支出","揽收调整(支出)","揽收调整(退款)"]},`账单支出/退款时间: ${this.formatToBeijingDate(d.start,"YYYY-MM-DD")} ~ ${this.formatToBeijingDate(d.end,"YYYY-MM-DD")}`])},b=`${p.req.deductTimeBegin}-${p.req.deductTimeEnd}`;if(this.crawlLogObj.isTaskSuccess(s,b))continue;const m=c.find(h=>h.isFinished&&h.isSuccess&&h.taskId===l[b]);if(m)if(m.isFinished){let h=JSON.parse(m.requestStr);h=h[1].replace("账单支出/退款时间: ","").replaceAll(" ",""),h=h.split("~");const v=`${h[0]} 00:00:00`,y=`${h[1]} 23:59:59`,T={gmtOrderDateStart:v,gmtOrderDateEnd:y,feeTypeList:[jN],orderDateType:ld,shopId:this.bindShopId,file:await this.getFileBase64(m.downloadUrl),filename:`${m.taskId}-${b}-${r}`,mallId:t,region:r,platform:this.mallType,requestId:this.requestId,fundType:"发货面单费",fundStatus:3},S=await Ht({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:T});await this.crawlLogObj.saveTaskSubTaskRet(s,b,S)}else o=!1;else if(o=!1,!l[b]){let h=wt("/portal/selene/seller/portal/recon/download",r);r==="us"&&(h=wt("/api/udp/yuanbenchu/seller_central/recon_bill/download/async",r));const v=await Tt({mallId:t,url:h,data:p,antiContentStr:this.antiContentStr});if(v.errorMsg)throw new Error(v.errorMsg);l[b]=v.result.taskId}}await Je(1e4)}await this.saveMallLastRsyncTime(t,"stmlLogistics"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(o){await this.crawlLogObj.saveTaskRet(s,ir(Yt(o)))}}async queryStmlLogisticsTask(t,r){let n=wt("/portal/selene/seller/portal/recon/download_list",r);r==="us"&&(n=wt("/api/udp/yuanbenchu/seller_central/recon_bill/task/info",r));const a=await Tt({mallId:t,url:n,data:{pageNum:1,pageSize:10},antiContentStr:this.antiContentStr});if(a.errorMsg)throw new Error(a.errorMsg);return a.result.excelCommonTaskList}async startCrawlChoiceTransactionRevenue(t,r,n){var s;const a="账户资金/对账中心/财务明细/财务详情 交易收入";if(!this.crawlLogObj.isTaskSuccess(a))try{const o=Date.now(),i={};let l=!1;for(;!l;){if(Date.now()-o>3e5)throw new Cn("导出等待超时",300);l=!0;const u=await this.getChoiceTransactionRevenueExportHistoryTaskList(t);for(const c of this.groupBy30Days(r,n)){const d=`${c.start.getTime()}-${c.end.getTime()}`;if(this.crawlLogObj.isTaskSuccess(a,d))continue;const p=u.find(b=>`${b.searchExportTimeBegin}`==`${c.start.getTime()}`&&`${b.searchExportTimeEnd}`==`${c.end.getTime()}`&&b.expireTime>Date.now()&&+b.status==2);if(p)for(const b of["seller","global","us","eu"]){let m={};if(b==="seller"){const C={taskType:19,id:p.id},k=wt("/api/merchant/file/export/download",b);m=await Tt({mallId:t,url:k,data:C,antiContentStr:this.antiContentStr})}else m=await this.getAgentBillFile(t,b,p);if(m.errorCode!==1e6)throw new Error(m.errorMsg);const h=(s=m.result)==null?void 0:s.fileUrl;if(!h)throw new Error("获取下载地址为空");const v=await this.getFileBase64(h),y=`${d}-${b}-${p.id}`;await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:b,platform:this.mallType,filename:y,file:v,requestId:this.requestId,fundType:"结算明细",fundStatus:3,gmtBillStart:this.formatToBeijingDate(c.start),gmtBillEnd:this.formatToBeijingDate(c.end)}});const T={feeTypeList:[PS,$S,ES,RS,LS,MS],gmtOrderDateStart:this.timestampTranDate(p.searchExportTimeBegin),gmtOrderDateEnd:this.timestampTranDate(p.searchExportTimeEnd),orderDateType:ld,shopId:this.bindShopId,file:v,filename:y},S=await Ht({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:T});await this.crawlLogObj.saveTaskSubTaskRet(a,d,S)}else if(l=!1,!i[d]){const b={fundDetailExport:!0,taskType:19,beginTime:c.start.getTime(),endTime:c.end.getTime()},m=wt("/api/merchant/file/export"),h=await Tt({mallId:t,url:m,data:b,antiContentStr:this.antiContentStr});if(h.errorMsg)throw new Error(h.errorMsg);i[d]=!0}}await Je(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(a,hr())}catch(o){await this.crawlLogObj.saveTaskRet(a,ir(Yt(o)))}}async startCrawlGoodsQuantityScoreDt(t,r){const n=`品质分-${Oa(r)}`;try{if(this.crawlLogObj.isTaskSuccess(n))return;const a=Er,s=r==="eu";await this.crawlLogObj.startTask(n),await this.loginMallAgent(t,r);let o=wt("/bg-luna-agent-seller/goods/quality/supplyChain/qualityScore/count",r);const i=await Tt({mallId:t,url:o,data:{page:1,pageSize:10,qualityScoreEnum:2},antiContentStr:this.antiContentStr});if(i.errorCode!==1e6)throw new Error(i.errorMsg);const l=await Ht({url:this.earthUrlsMap.uploadProductQualityScoreUrl,method:"POST",data:{mallId:t,region:r,isEu:s?1:0,uploadDataList:JSON.stringify(i.result),filename:n,requestId:this.requestId,shopId:this.bindShopId}});if(l.result!=="success")throw new Error(l.reason);o=wt("/bg-luna-agent-seller/goods/quality/supplyChain/qualityMetrics/pageQuery",r);for(const u of[1,2,3,4]){let c=1;const d=10;let p=0,b=0;do{const m=await Tt({mallId:t,url:o,data:{page:c,pageSize:d,qualityScoreEnum:u},antiContentStr:this.antiContentStr});if(m.errorCode!==1e6)throw new Error(m.errorMsg);if(!m.result)break;p||(p=m.result.total,b=Math.max(1,Math.ceil(p/d)));const v=m.result.pageItems,y=await Ht({url:this.earthUrlsMap.uploadProductSkuQualityScoreUrl,method:"POST",data:{mallId:t,region:r,qualityScoreEnum:u,uploadDataList:JSON.stringify(v)}});if(y.result!=="success")throw new Error(y.reason);await this.crawlLogObj.updateTaskProgress(n,`第${c}/${b}页`),await Je(3e3),a.isDebug&&c===2&&this.crawlLogObj.debugLog(n,"debug模式只取两页"),c++}while((c-1)*d<p)}await this.saveMallLastRsyncTime(t,s?"goodsQuantityScore":"goodsQuantityScoreEu"),await this.crawlLogObj.saveTaskRet(n,hr())}catch(a){await this.crawlLogObj.saveTaskRet(n,ir(Yt(a)))}}async startCrawlLongTermActivityList(t){var a;const r="店铺营销/报名记录/长期活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const n=Er;try{await this.crawlLogObj.startTask(r);const s=wt("/marvel-mms/cn/api/kiana/gambit/marketing/enroll/list"),o=40;let i=1,l=0,u=0,c=0;do{const d=await Tt({mallId:t,url:s,data:{pageNo:i,pageSize:o,sessionStatusTag:3},antiContentStr:this.antiContentStr});if(d.errorCode!==1e6){if(i>1&&d.errorMsg==="Operation too frequent, please try again later"){if(c++,c>5)throw new Error(`${d.errorMsg} retry 5 times 合计${l} page=${i}`);await Je(5e3*c);continue}throw new Error(d.errorMsg)}if(c=0,!d.result)break;const p=[];l||(l=((a=d.result)==null?void 0:a.total)||0,u=Math.max(1,Math.ceil(l/o)));const b=d.result,m=(b==null?void 0:b.list)||[];for(const v of m){const y=Lo(v,["activityStock","remainingActivityStock","sessionEndTime","sessionStartTime","enrollId","productId","skcList"]);p.push(y)}const h=await Ht({url:this.earthUrlsMap.uploadLongTermActivityUrl,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(p),filename:`${r}-第${i}页`,requestId:this.requestId,shopId:this.bindShopId}});if(h.result!=="success")throw new Error(h.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${i}/${u}页`),await Je(5e3),n.isDebug&&i===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}i++}while((i-1)*o<l);await this.saveMallLastRsyncTime(t,"longTermActivity"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(s){await this.crawlLogObj.saveTaskRet(r,ir(Yt(s)))}}async startCrawlAppliedActivityList(t){var a;const r="店铺营销/报名记录/专题活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const n=Er;try{await this.crawlLogObj.startTask(r);const s=wt("/marvel-mms/cn/api/kiana/gambit/marketing/activity/product/applied/list"),o=10;let i=1,l=0,u=0;do{const c=await Tt({mallId:t,url:s,data:{pageNo:i,pageSize:o,sessionStatusTag:3},antiContentStr:this.antiContentStr});if(c.errorCode!==1e6)throw new Error(c.errorMsg);if(!c.result)break;const d=[];l||(l=((a=c.result)==null?void 0:a.total)||0,u=Math.max(1,Math.ceil(l/o)));const p=c.result,b=(p==null?void 0:p.productList)||[];for(const h of b){const y={...Lo(h,["id","productId","activityStock","activityStartTime","activityEndTime","skcList"]),remainingActivityStock:0};d.push(y)}const m=await Ht({url:this.earthUrlsMap.uploadAppliedActivityUrl,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(d),filename:`${r}-第${i}页`,requestId:this.requestId,shopId:this.bindShopId}});if(m.result!=="success")throw new Error(m.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${i}/${u}页`),await Je(3e3),n.isDebug&&i===2){await this.crawlLogObj.debugLog(r,"debug模式只取两页");break}i++}while((i-1)*o<l);await this.saveMallLastRsyncTime(t,"appliedActivity"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(s){await this.crawlLogObj.saveTaskRet(r,ir(Yt(s)))}}async startCrawlSaleManage(t){var a;const r="销售管理/申报价格+销量";if(this.crawlLogObj.isTaskSuccess(r))return;const n=Er;try{await this.crawlLogObj.startTask(r);const s=wt("/marvel-mms/cn/api/kiana/venom/sales/management/listWarehouse"),o=!0,i=20;let l=1,u=0,c=0;do{let d=await Tt({mallId:t,url:s,data:{isLack:0,pageNo:l,pageSize:i,priceAdjustRecentDays:7},antiContentStr:this.antiContentStr});const p=[];if(d.errorCode!==1e6)throw new Error(d.errorMsg);u||(u=((a=d.result)==null?void 0:a.total)||0,c=Math.max(1,Math.ceil(u/i)));const b=d.result,m=(b==null?void 0:b.subOrderList)||[];for(const h of m){const v=h.skuQuantityDetailList||[];let y=!1,T={};if(o){const C=[];for(const k of v)C.push(k.productSkuId),k.lastThirtyDaysSaleVolume>0&&(y=!0);if(y){const k=this.getPastDate(31),f=this.getPastDate(1);T=await this.getProductSkuIdAndDtSaleListMap(t,C,k,f),await Je(300)}else{const k=[];for(let f=31;f>0;f--)k.push({date:this.getPastDate(f),sale:0});for(const f of C)T[f]=k}}const w={...Lo(h,["productId","productSkcId","commentNum","mark","onSalesDurationOffline"]),skuQuantityDetailList:[]};for(const C of v){const k=Lo(C,["productSkuId","className","supplierPrice","currencyType"]);o&&(k.dtSaleList=T[k.productSkuId]),w.skuQuantityDetailList.push(k)}p.push(w)}if(d=await Ht({url:this.earthUrlsMap.uploadSaleManageList,method:"POST",data:{mallId:t,isNeedRsyncProductSale:1,uploadDataList:JSON.stringify(p),requestId:this.requestId,filename:`${r}-第${l}页`,shopId:this.bindShopId}}),d.result!=="success")throw new Error(d.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${l}/${c}页`),await Je(3e3),n.isDebug&&l===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}l++}while((l-1)*i<u);await this.saveMallLastRsyncTime(t,"saleManage"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(s){await this.crawlLogObj.saveTaskRet(r,ir(Yt(s)))}}async startRsyncCustomizeOrderSkuInfo(t,r,n){var i,l;const a="备货单定制品内容";if(this.crawlLogObj.isTaskSuccess(a))return;const s={total:0,successCount:0,failCount:0,failReasonMap:{}},o=Er;try{await this.crawlLogObj.startTask(a);for(const u of this.groupBy30Days(r,n)){const c=wt("/oms/bg/venom/api/supplier/purchase/manager/querySubOrderList"),d={beginTime:u.start.getTime(),endTime:u.end.getTime()},p="global",b=20;let m=1,h=0,v=0;await this.loginMallAgent(t,p);do{const y=await Tt({mallId:t,url:c,data:{pageNo:m,pageSize:b,purchaseTimeFrom:d.beginTime,purchaseTimeTo:d.endTime,oneDimensionSort:{firstOrderByDesc:1,firstOrderByParam:"createdAt"},isCustomGoods:!0},antiContentStr:this.antiContentStr});if(y.errorCode===1e6){h||(h=((i=y.result)==null?void 0:i.total)||0,v=Math.max(1,Math.ceil(h/b))),await this.crawlLogObj.updateTaskProgress(a,`第${m}/${v}页`);const T=y.result,S=(T==null?void 0:T.subOrderForSupplierList)||[],w=[];for(const C of S)C.subPurchaseOrderSn&&((l=C.subPurchaseOrderSn)==null?void 0:l.length)>0&&!w.includes(C.subPurchaseOrderSn)&&w.push(C.subPurchaseOrderSn);await this.rsyncCustomOrderSkuInfo(t,p,w,s)}else throw new Error(y.errorMsg);if(await Je(3e3),o.isDebug&&m===2){console.warn("debug模式只取两页");break}m++}while((m-1)*b<h)}await this.saveMallLastRsyncTime(t,"customizeOrderSkuInfo"),await this.crawlLogObj.saveTaskRet(a,this.formatCustomizeResultRet(s))}catch(u){await this.crawlLogObj.saveTaskRet(a,ir(Yt(u)))}}async startCrawlRegionSettlement(t,r,n,a){var o;const s=`结算数据-${Oa(r)}`;if(!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s);const i=Date.now(),l=1,u=2,c=3,d={[l]:{type:l,desc:"待处理款项",breadcrumb:"结算数据/待结算/导出明细"},[u]:{type:u,desc:"结算中款项",breadcrumb:"结算数据/结算中/导出明细"},[c]:{type:c,desc:"已到账款项",breadcrumb:"结算数据/已到账/导出明细"}};await this.loginMallAgent(t,r);const p={};let b=!1;for(;!b;){if(Date.now()-i>3e5)throw new Cn("导出等待超时",300);b=!0;const m=await this.getSettlementExportHistoryTaskList(t,r);for(const h in d){let v=n,y=a;(+h===l||+h===u)&&(v=a,y=a);for(const T of this.groupBy30Days(v,y)){let S=this.formatToBeijingDate(T.start,"YYYY-MM-DD"),w=this.formatToBeijingDate(T.end,"YYYY-MM-DD");(+h===l||+h===u)&&(S=a,w=a);const C=`${S} ${w} ${d[h].desc}`;if(this.crawlLogObj.isTaskSuccess(s,C))continue;const k=m.find(f=>`${f.settleDataType}`==`${h}`&&f.status==2&&f.id==p[C]);if(k){await this.crawlLogObj.debugLog(s,`${C}:找到导出任务${JSON.stringify(k)}`);const f=wt("/api/merchant/file/export/download",r);let O=await Tt({mallId:t,url:f,data:{id:k.id,taskType:12},antiContentStr:this.antiContentStr});const E=(o=O.result)==null?void 0:o.fileUrl,N=`${s}-${C}-${k.id}`,$=await this.getFileBase64(E);O=await Ht({url:this.earthUrlsMap.uploadSettlement,method:"POST",data:{taskId:k.id,fundType:k.settleDataType,mallId:t,gmtExportBegin:k.beginDate,gmtExportEnd:k.endDate,region:r,filename:N,file:$,requestId:this.requestId}}),await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,filename:N,platform:this.mallType,file:$,requestId:this.requestId,fundType:"结算明细",fundStatus:h,gmtBillStart:this.formatToBeijingDate(T.start),gmtBillEnd:this.formatToBeijingDate(T.end)}}),await this.crawlLogObj.saveTaskSubTaskRet(s,C,O)}else if(b=!1,!p[C]){await this.crawlLogObj.debugLog(s,`${C}:创建导出`);const f=wt("/api/merchant/file/export",r),O={settleDataType:Number.parseInt(h),taskType:12};+h===c&&(O.beginDate=S,O.endDate=w);const E=await Tt({mallId:t,url:f,data:O,antiContentStr:this.antiContentStr});if(E.errorMsg)throw new Error(E.errorMsg);p[C]=E.result}}}await Je(5e3)}await this.saveMallLastRsyncTime(t,"settlement"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(i){await this.crawlLogObj.saveTaskRet(s,ir(Yt(i)))}}async startCrawlEprProxyPaymentServiceFee(t,r,n,a){var o;const s=`EPR代付服务费-已扣费-${Oa(r)}`;if(!this.crawlLogObj.isTaskSuccess(s))try{const i=Date.now();await this.crawlLogObj.startTask(s),await this.loginMallAgent(t,r);let l=!1;const u=16,c={};for(;!l;){if(Date.now()-i>3e5)throw new Cn("导出等待超时",300);l=!0;const d=await this.queryExportHistory(t,r,u);for(const p of this.groupBy30Days(n,a)){const b=this.formatToBeijingDate(p.start,"YYYY-MM-DD"),m=this.formatToBeijingDate(p.end,"YYYY-MM-DD"),h=`${b}-${m}`;if(this.crawlLogObj.isTaskSuccess(s,h))continue;const v=d.find(y=>`${y.financeDateStart}`==`${b}`&&`${y.financeDateEnd}`==`${m}`&&+y.status==2);if(v){const y=wt("/api/merchant/file/export/download",r);let T=await Tt({mallId:t,url:y,data:{id:v.id,taskType:u},antiContentStr:this.antiContentStr});const S=(o=T.result)==null?void 0:o.fileUrl,w=await this.getFileBase64(S),C=`${h}-${v.id}`;T=await Ht({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:{feeTypeList:[ng],gmtOrderDateStart:p.start,gmtOrderDateEnd:p.end,orderDateType:ag,shopId:this.bindShopId,filename:C,file:w,requestId:this.requestId}}),await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,filename:C,file:w,platform:this.mallType,requestId:this.requestId,fundType:"代付服务费",fundStatus:3,gmtBillStart:this.formatToBeijingDate(p.start),gmtBillEnd:this.formatToBeijingDate(p.end)}}),await this.crawlLogObj.saveTaskSubTaskRet(s,h,T)}else if(l=!1,!c[h]){await this.crawlLogObj.debugLog(s,`${h}:创建导出`);const y=wt("/api/merchant/file/export",r),S=await Tt({mallId:t,url:y,data:{billingCycleList:[],taskType:u,financeDateStart:b,financeDateEnd:m},antiContentStr:this.antiContentStr});if(S.errorMsg)throw new Error(S.errorMsg);c[h]=!0}}await Je(5e3)}await this.saveMallLastRsyncTime(t,"pddkj_eprFee"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(i){await this.crawlLogObj.saveTaskRet(s,ir(Yt(i)))}}async startCrawlEprFee(t,r,n,a){const s=`EPR费用-${Oa(r)}`;if(!this.crawlLogObj.isTaskSuccess(s))try{const o=Date.now();await this.crawlLogObj.startTask(s),await this.loginMallAgent(t,r);let i=!1;const l={};for(;!i;){if(Date.now()-o>3e5)throw new Cn("导出等待超时",300);i=!0;for(const u of[18,19]){const c=await this.queryExportHistory(t,r,u);let d="商品环保费";u===19&&(d="物流包装环保费");for(const p of[1,2,4])for(const b of this.groupBy30Days(n,a)){const m=this.formatToBeijingDate(b.start,"YYYY-MM-DD"),h=this.formatToBeijingDate(b.end,"YYYY-MM-DD"),v=`${m}-${h}-${u}-${p}`;if(this.crawlLogObj.isTaskSuccess(s,v))continue;const y=c.find(T=>`${T.financeStartTime}`==`${b.start.getTime()}`&&`${T.financeEndTime}`==`${b.end.getTime()}`&&+T.status==2&&`${T.exportType}`==`${p}`);if(y){const T=wt("/api/merchant/file/export/download",r);let S=await Tt({mallId:t,url:T,data:{id:y.id,taskType:u},antiContentStr:this.antiContentStr});const w=S.result.fileUrl;let C=[ng];p===4&&(C=[OS]);const k=`${v}-${y.id}`,f=await this.getFileBase64(w);(p===2||p===4)&&(S=await Ht({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:{feeTypeList:C,gmtOrderDateStart:this.formatToBeijingDate(b.start),gmtOrderDateEnd:this.formatToBeijingDate(b.end),orderDateType:ag,shopId:this.bindShopId,filename:k,file:f,requestId:this.requestId}})),(p===1||p===2)&&(S=await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,filename:k,file:f,platform:this.mallType,requestId:this.requestId,fundType:d,fundStatus:p===2?3:1,gmtBillStart:this.formatToBeijingDate(b.start),gmtBillEnd:this.formatToBeijingDate(b.end)}})),await this.crawlLogObj.saveTaskSubTaskRet(s,v,S)}else if(i=!1,!l[v]){await this.crawlLogObj.debugLog(s,`${v}:创建导出`);const T=wt("/api/merchant/file/export",r),S={exportType:p,taskType:u,financeStartTime:b.start.getTime(),financeEndTime:b.end.getTime()},w=await Tt({mallId:t,url:T,data:S,antiContentStr:this.antiContentStr});if(w.errorMsg)throw new Error(w.errorMsg);l[v]=!0}}}await Je(5e3)}await this.saveMallLastRsyncTime(t,"pddkj_eprFee"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(o){await this.crawlLogObj.saveTaskRet(s,ir(Yt(o)))}}async startCrawlStockingPenalty(t,r,n,a){const s="账户资金-违规信息-备货违规",o="备货违规";if(!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s),await this.loginMallAgent(t,r);const l=[];for(const c of this.groupBy30Days(n,a)){const d=c.start.getTime(),p=c.end.getTime();let b=1;const m=50,h=0;let v=0;const y=[],T=wt("/mms/api/andes/punish/seller/queryPurchasePunishList",r);do{const w=await Tt({mallId:t,url:T,data:{pageNo:b,pageSize:m,punishTabCode:h,status:3,startDateFrom:d,startDateTo:p},antiContentStr:this.antiContentStr});if(w.errorMsg)throw new Error(w.errorMsg);const C=w.result,k=C.list;if(k)for(const f of k)y.push(f);v=C.total,b++,await Je(2e3)}while(y.length<v);for(const S of y)l.push(S)}const u=await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,file:"",platform:this.mallType,requestId:this.requestId,fundType:o,fundStatus:3,data:l,filename:s,gmtBillStart:n,gmtBillEnd:`${a} 23:59:59`}});if(u.result!=="success")throw new Error(u.reason);await this.saveMallLastRsyncTime(t,"stockingPenalty"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(l){await this.crawlLogObj.saveTaskRet(s,ir(Yt(l)))}}async startCrawlQualityAccidentViolationDeduction(t,r,n,a){const s="账户资金-违规信息-质量事故违规",o="质量事故违规";if(!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s),await this.loginMallAgent(t,r);const l=[];for(const c of this.groupBy30Days(n,a)){const d=c.start.getTime(),p=c.end.getTime();let b=1;const m=50,h=2;let v=0;const y=[],T=wt("/mms/api/andes/punish/seller/listPunishRecord",r);do{const w=await Tt({mallId:t,url:T,data:{pageNo:b,pageSize:m,punishTabCode:h,status:3,startDateFrom:d,startDateTo:p},antiContentStr:this.antiContentStr});if(w.errorMsg)throw new Error(w.errorMsg);const C=w.result,k=C.list;if(k)for(const f of k)y.push(f);v=C.total,b++,await Je(2e3)}while(y.length<v);for(const S of y)l.push(S)}const u=await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,file:"",platform:this.mallType,requestId:this.requestId,fundType:o,fundStatus:3,data:l,filename:s,gmtBillStart:n,gmtBillEnd:`${a} 23:59:59`}});if(u.result!=="success")throw new Error(u.reason);await this.saveMallLastRsyncTime(t,"qualityAccidentViolationDeduction"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(l){await this.crawlLogObj.saveTaskRet(s,ir(Yt(l)))}}async startCrawlBill(t,r,n){const a="账务明细";if(!this.crawlLogObj.isTaskSuccess(a))try{await this.crawlLogObj.startTask(a);const s=Date.now();let o=!1;const i={};for(;!o;){if(Date.now()-s>3e5)throw new Cn("导出等待超时",300);o=!0;const l=await this.getChoiceTransactionRevenueExportHistoryTaskList(t);for(const u of this.groupBy30Days(r,n)){const c=`${u.start.getTime()}-${u.end.getTime()}`;if(this.crawlLogObj.isTaskSuccess(a,c))continue;const d=l.find(p=>`${p.searchExportTimeBegin}`==`${u.start.getTime()}`&&`${p.searchExportTimeEnd}`==`${u.end.getTime()}`&&+p.status==2);if(d)for(const p of["seller","global","us","eu"]){let b={};if(p==="seller"){const w={taskType:19,id:d.id},C=wt("/api/merchant/file/export/download",p);b=await Tt({mallId:t,url:C,data:w,antiContentStr:this.antiContentStr})}else b=await this.getAgentBillFile(t,p,d);if(b.errorCode!==1e6)throw new Error(b.errorMsg);const m=b.result.fileUrl;if(!m)throw new Error("获取下载地址为空");const h=`${a}-${c}-${p}-${d.id}`,v=await this.getFileBase64(m),y={feeTypeList:[UN,qN,MS],gmtOrderDateStart:this.timestampTranDate(d.searchExportTimeBegin),gmtOrderDateEnd:this.timestampTranDate(d.searchExportTimeEnd),orderDateType:ag,shopId:this.bindShopId,file:v,filename:h,requestId:this.requestId};await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:p,filename:h,platform:this.mallType,file:v,requestId:this.requestId,fundType:"结算明细",fundStatus:3,gmtBillStart:this.formatToBeijingDate(u.start),gmtBillEnd:this.formatToBeijingDate(u.end)}});const T=await Ht({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:y});await this.crawlLogObj.saveTaskSubTaskRet(a,c,T)}else if(o=!1,!i[c]){const p={fundDetailExport:!0,taskType:19,beginTime:u.start.getTime(),endTime:u.end.getTime()},b=wt("/api/merchant/file/export"),m=await Tt({mallId:t,url:b,data:p,antiContentStr:this.antiContentStr});if(m.errorMsg)throw new Error(m.errorMsg);i[c]=!0}}await Je(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(a,hr())}catch(s){await this.crawlLogObj.saveTaskRet(a,ir(Yt(s)))}}async startCrawlFulfillmentBill(t,r,n,a){let s="履约服务账单/已缴费数据";if(r===1&&(s="履约服务账单/待缴费数据"),!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s);const o=Date.now();let i=!1;const l={},u=13,c="seller",d=await this.queryExportHistory(t,c,u),p=zw(d,"id");for(;!i;){if(Date.now()-o>3e5)throw new Cn("导出等待超时",300);i=!0;const m=(await this.queryExportHistory(t,c,u)).find(h=>!p[h.id]&&+h.status==2);if(m){const h=wt("/api/merchant/file/export/download",c),v=await Tt({mallId:t,url:h,data:{id:m.id,taskType:u},antiContentStr:this.antiContentStr});if(v.errorCode!==1e6)throw new Error(v.errorMsg);const y=v.result.fileUrl;if(!y)throw new Error("获取下载地址为空");const T=await this.getFileBase64(y),S=`${m.fundTypeDesc}-${m.id}`;let w;if(r===2){const k={feeTypeList:[VN,HN,zN],shopId:this.bindShopId,file:T,filename:S,requestId:this.requestId};w=await Ht({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:k})}const C=await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:c,file:"",platform:this.mallType,requestId:this.requestId,fundType:"履约服务账单明细",fundStatus:r===2?3:1,gmtBillStart:n,gmtBillEnd:a}});await this.crawlLogObj.saveTaskSubTaskRet(s,"",w??C)}else if(i=!1,!l[s]){const h={taskType:u,billStatus:r,mallId:t,pageNum:1,pageSize:20},v=wt("/api/merchant/file/express/export"),y=await Tt({mallId:t,url:v,data:h,antiContentStr:this.antiContentStr});if(y.errorMsg)throw new Error(y.errorMsg);l[s]=!0}await Je(5e3)}await this.saveMallLastRsyncTime(t,"fulfillmentBill"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(o){await this.crawlLogObj.saveTaskRet(s,ir(Yt(o)))}}async getSettlementExportHistoryTaskList(t,r){var s;const n=wt("/api/merchant/file/export/history/page",r);return((s=(await Tt({mallId:t,url:n,data:{pageNum:1,pageSize:10,taskType:12},antiContentStr:this.antiContentStr})).result)==null?void 0:s.merchantMerchantFileExportHistoryList)||[]}async rsyncCustomOrderSkuInfo(t,r,n,a){var d;if(!n||n.length===0)return;const s=Er,o=wt("/bg-luna-agent-seller/product/customizeSku/pageQuery",r),i=20;let l=1,u=0,c=0;do{const p=await Tt({mallId:t,url:o,data:{page:l,pageSize:i,subPurchaseOrderSns:n},antiContentStr:this.antiContentStr}),b=[];if(p.errorCode===1e6){u||(u=((d=p.result)==null?void 0:d.total)||0,c=Math.max(1,Math.ceil(u/i)));const m=p.result,h=(m==null?void 0:m.pageItems)||[];for(const v of h){const y=await this.buildCustomizeUploadData(t,v);b.push(y)}if(a.total+=b.length,b.length>0){await this.replaceCustomizePicUrlWithFetchInfo(b,a),await this.replaceCustomizePicFetchInfoWithUploadUrlEntity(b,a);const v=await Ht({url:this.earthUrlsMap.uploadCustomizeGoodsList,method:"POST",data:{data:JSON.stringify(b),requestId:this.requestId,filename:`备货单定制品内容-${l}`,shopId:this.bindShopId}});if(v.result!=="success")throw new Error(v.reason)}}else throw new Error(p.errorMsg);if(console.debug(`采集定制品内容，${l}/${c}页完成`),await Je(3e3),s.isDebug&&l===2){console.warn("debug模式只取两页");break}l++}while((l-1)*i<u)}async replaceCustomizePicFetchInfoWithUploadUrlEntity(t,r){const n=Mc(t,2),a=async(s,o)=>{const i=[];for(const u of s)for(const c in u[o]){const d=u[o][c],p=new Promise(b=>{(async()=>{try{const m=await Ht({url:this.earthUrlsMap.uploadCustomizePic,method:"POST",data:{ext:d.ext,sku:u.customProductSkuId,mallId:u.mallId,file:d.base64}});if(m.result!=="success")throw new Error(m.reason);u[o][c]=m.entity}catch(m){u[o][c]="",this.handleCountResult({error:m,resultsMap:r,customProductSkuId:u.customProductSkuId})}b(!0)})()});i.push(p)}const l=Mc(i,6);for(const u of l)await Promise.all(u).catch(()=>{})};for(const s of n)await a(s,"originalImgUrls"),await a(s,"previewImgUrls"),await a(s,"regionImgUrls")}async buildCustomizeUploadData(t,r){var d,p,b,m,h,v;const n=r.subPurchaseOrderSnList,a=r.personalProductSkuId,s=(d=r.productSkuCustomization)==null?void 0:d.customizationTmplSurfaces,o=((p=r.productSkuCustomization)==null?void 0:p.customizedPreviewItems)||[],i=[],l=[],u=[];let c=null;for(const y of o){if(`${y.previewType}`=="3"){i.push(y.imageUrlDisplay),c=y.customizedText;continue}if(`${y.previewType}`=="1"){l.push(y.imageUrlDisplay);for(const T of s)for(const S of(T==null?void 0:T.regions)||[]){const w=`${y.imageUrlDisplay}&imageMogr2/cut/${(b=S.dimension)==null?void 0:b.width}x${(m=S.dimension)==null?void 0:m.height}x${(h=S.position)==null?void 0:h.x}x${(v=S.position)==null?void 0:v.y}`;u.push(w)}continue}}return{mallId:t,subPurchaseOrderSns:n,customProductSkuId:a,originalImgUrls:i,previewImgUrls:l,regionImgUrls:u,customText:c}}async replaceCustomizePicUrlWithFetchInfo(t,r){const n={},a=[];for(const i of t){const l=[...i.originalImgUrls,...i.previewImgUrls,...i.regionImgUrls].map(u=>({url:u,customProductSkuId:i.customProductSkuId}));a.push(...l)}const s=Mc(a,6);for(const i of s){const l=[];for(const{url:u,customProductSkuId:c}of i){const d=new Promise(p=>{(async()=>{try{const b=u.substring(u.lastIndexOf(".")+1).toLowerCase().split("?")[0],m=await this.fetchSkuCustomizePic(u);m&&(n[u]={base64:m,ext:b}),p(!0)}catch(b){this.handleCountResult({error:b,resultsMap:r,customProductSkuId:c}),p(!0)}})()});l.push(d)}await Promise.all(l),await Je(2e3)}const o=(i,l)=>{const u=[];for(const c of i[l])n[c]&&u.push(n[c]);i[l]=u};for(const i of t)o(i,"originalImgUrls"),o(i,"previewImgUrls"),o(i,"regionImgUrls")}async fetchSkuCustomizePic(t){let r=null;try{r=await fetch(t)}catch{const s="采集图片失败，尝试切换合适的网络环境后再进行操作";throw new Error(s)}if(!r||!r.ok)return!1;const n=await r.blob();return await new Promise(s=>{const o=new FileReader;o.onload=function(i){var u;let l=(u=i==null?void 0:i.target)==null?void 0:u.result;if(l&&l.indexOf("base64,")>0)l=l.split("base64,")[1];else{let d=(JSON.parse(l)||{}).message;if(d)throw d.includes("Too many request")&&(d="请求获取定制品图片接口过于频繁，请稍后再试"),new Error(d)}s(l)},o.readAsDataURL(n)})}getPastDate(t){return Ve().subtract(t,"day").format("YYYY-MM-DD")}async getProductSkuIdAndDtSaleListMap(t,r,n,a){const s=wt("/oms/bg/venom/api/supplier/sales/management/querySkuSalesNumber"),o=await Tt({mallId:t,url:s,data:{endDate:a,startDate:n,productSkuIds:r},antiContentStr:this.antiContentStr});if(o.errorCode!==1e6)throw new Error(o.errorMsg);const i={};for(const l of o.result||[])i[l.prodSkuId]||(i[l.prodSkuId]=[]),i[l.prodSkuId].push({date:l.date,sale:l.salesNumber});return i}async getChoiceTransactionRevenueExportHistoryTaskList(t){var a;const r=wt("/api/merchant/file/export/history/page"),n=await Tt({mallId:t,url:r,data:{pageNum:1,pageSize:10,taskType:19},antiContentStr:this.antiContentStr});if(n.errorMsg)throw new Error(n.errorMsg);return((a=n.result)==null?void 0:a.merchantMerchantFileExportHistoryList)||[]}async getAgentBillFile(t,r,n){await this.loginMallAgent(t,r);const a=31;let s={taskType:a,params:n.agentSellerExportParams,sign:n.agentSellerExportSign},o=wt("/api/merchant/file/export",r),i=await Tt({mallId:t,url:o,data:s,antiContentStr:this.antiContentStr});if(i.errorMsg&&i.errorMsg!=="导出任务已存在, 请勿重复创建, 请前往【导出历史】查看")throw new Error(i.errorMsg);const l=i.result,u=Date.now();i={};do{if(s={id:l,taskType:a},o=wt("/api/merchant/file/export/download",r),i=await Tt({mallId:t,url:o,data:s,antiContentStr:this.antiContentStr}),i.errorCode===1e6)break;if(i.errorMsg!=="导出任务未完成")throw new Error(i.errorMsg);if(await Je(5e3),Date.now()-u>3e5)throw new Cn("导出等待超时",300)}while(!0);return i}async saveMallLastRsyncTime(t,r){return await pn({url:this.earthChoiceUrlMap.saveMallLastRsyncTime,method:"POST",data:{mallId:t,rsyncType:r}})}async loginMallAgent(t,r){var l;let n=wt("/bg/quiet/api/auth/obtainCode");const a=await Tt({mallId:t,url:n,data:{redirectUrl:wt("/main/authentication",r)},antiContentStr:this.antiContentStr});if(a.errorCode!==1e6)throw new Error(`自动登录卖家中心失败1:${a.errorMsg}`);n=wt("/api/seller/auth/loginByCode",r);const s={code:(l=a.result)==null?void 0:l.code,confirm:!0,targetMallId:t},o=2;let i=0;for(;i<o;)try{const u=await Tt({mallId:t,url:n,data:s,antiContentStr:this.antiContentStr});if(u.errorCode!==1e6)throw new Error(`自动登录卖家中心失败:${u.errorMsg}`===void 0?JSON.stringify(u):u.errorMsg);return}catch(u){if(i++,i<o)await Je(3e3);else throw new Error(`自动登录卖家中心失败e:${Yt(u)}`)}}async startRsyncRiskTag(t){await this.loginMallAgent(t,"global");const r={};await this.startRsyncCompliantLivePhotos(r,t),await this.startRsyncComplianceProperty(r,t),await this.uploadSpuRiskTags(r),await this.saveMallLastRsyncTime(t,"riskTag")}async startRsyncCompliantLivePhotos(t,r){var s,o;const n="合规中心/商品实拍图";if(this.crawlLogObj.isTaskSuccess(n))return;const a=Er;try{await this.crawlLogObj.startTask(n);const i=wt("/api/flash/real_picture/list","global"),l=20;let u=1,c=0,d=0;do{const p=await Tt({mallId:r,url:i,data:{page:u,page_size:l},antiContentStr:this.antiContentStr});if(p.errorCode!==1e6)throw new Error(p.errorMsg);c||(c=Math.min(200,((s=p.result)==null?void 0:s.total)||0),d=Math.max(1,Math.ceil(c/l)));const b=((o=p.result)==null?void 0:o.items)||[];for(const m of b)this.addSpuRiskTag(t,m.spu_id,40001);if(await this.crawlLogObj.updateTaskProgress(n,`第${u}/${d}页`),await Je(3e3),a.isDebug&&u===2){this.crawlLogObj.debugLog(n,"debug模式只取两页");break}u++}while((u-1)*l<c);await this.crawlLogObj.saveTaskRet(n,hr())}catch(i){await this.crawlLogObj.saveTaskRet(n,ir(Yt(i)))}}async startRsyncComplianceProperty(t,r){var s,o;const n="合规中心/商品合规信息";if(this.crawlLogObj.isTaskSuccess(n))return;const a=Er;try{this.crawlLogObj.startTask(n);const i=wt("/ms/bg-flux-ms/compliance_property/page_query","global"),l=20;let u=1,c=0,d=0;do{const p=await Tt({mallId:r,url:i,data:{page_num:u,page_size:l,type:2},antiContentStr:this.antiContentStr});if(p.errorCode!==1e6)throw new Error(p.errorMsg);c||(c=Math.min(200,((s=p.result)==null?void 0:s.total)||0),d=Math.max(1,Math.ceil(c/l)));const b=((o=p.result)==null?void 0:o.data)||[];for(const m of b)this.addSpuRiskTag(t,m.spu_id,40001);if(this.crawlLogObj.updateTaskProgress(n,`第${u}/${d}页`),await Je(3e3),a.isDebug&&u===2){this.crawlLogObj.debugLog(n,"debug模式只取两页");break}u++}while((u-1)*l<c);await this.crawlLogObj.saveTaskRet(n,hr())}catch(i){await this.crawlLogObj.saveTaskRet(n,ir(Yt(i)))}}async uploadSpuRiskTags(t){const n=(await Ht({url:this.earthUrlsMap.getTimestamp,method:"GET"})).timestamp,a=NS(t,50);for(const s of a)await Ht({url:this.earthUrlsMap.batchAddGoodsRiskTags,method:"POST",data:{productIdAndTagValuesMap:s,batchAddTimestamp:n,filename:"风险标签",requestId:this.requestId,shopId:this.bindShopId}});await Ht({url:this.earthUrlsMap.clearInvalidGoodsRiskTags,method:"POST",data:{batchAddTimestamp:n}})}addSpuRiskTag(t,r,n){if(r&&n){if(!t[r])t[r]=[];else if(t[r].includes(n))return;t[r].push(n)}}coverToBeijingDate(t){if(typeof t==="string"){const n=new Date(`${t} UTC+08:00`).toISOString();return new Date(n)}else throw new Error(`${t} 数据格式异常`)}formatToBeijingDate(t,r="YYYY-MM-DD HH:mm:ss"){console.debug("formatToBeijingDate",t,r);const n={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Shanghai",hour12:!1},s=new Intl.DateTimeFormat("en-US",n).format(t),[o,i]=s.split(", "),[l,u,c]=o.split("/").map(m=>m.padStart(2,"0")),[d,p,b]=i.split(":").map(m=>m.padStart(2,"0"));return r.replace("YYYY",c).replace("MM",l).replace("DD",u).replace("HH",d).replace("mm",p).replace("ss",b)}groupBy30Days(t,r){const n=[];r=this.coverToBeijingDate(`${r} 23:59:59`);let a=this.coverToBeijingDate(`${t} 00:00:00`);for(;a.getTime()<=r.getTime();){const s=a;let o=new Date(s.getTime()+30*86400*1e3+86399*1e3);if(o.getTime()>r.getTime()&&(o=r),a.getTime()===o.getTime())break;const i={start:s,end:o};n.push(i),a=new Date(s.getTime()+26784e5)}return n}async getChoiceExportHistory(t,r,n){var o;const a=wt("/api/merchant/file/export/history/page",r),s=await Tt({mallId:t,url:a,data:{pageNum:1,pageSize:20,taskType:n},antiContentStr:this.antiContentStr});if(s.errorMsg)throw new Error(s.errorMsg);return((o=s.result)==null?void 0:o.merchantMerchantFileExportHistoryList)||[]}timestampTranDate(t,r="YYYY-MM-DD HH:mm:ss"){let n="";switch(typeof t){case"string":Wl(t)||(n=Ve(+t).format(r||"YYYY-MM-DD"),(n.includes("1970")||+t<5e3)&&(n=Ve(t).format(r||"YYYY")),t=n);break;case"number":t=Ve(t).format(r||"YYYY-MM-DD");break;case"object":if(Mr(t))for(let a=0;a<t.length;a++)Wl(t[a])||(n=Ve(+t[a]).format(r||"YYYY-MM-DD"),(n.includes("1970")||+t[a]<5e3)&&(n=Ve(t[a]).format(r||"YYYY")),t[a]=n);break}return t}async getFileBase64(t){if(!t)return"";const n=await(await fetch(t)).blob();return await this.transBlobToBase64(n)}transBlobToBase64(t){return new Promise(r=>{const n=new FileReader;n.onload=function(a){var o;let s=(o=a==null?void 0:a.target)==null?void 0:o.result;s&&s.indexOf("base64,")>0&&(s=s.split("base64,")[1]),r(s)},n.readAsDataURL(t)})}checkExportHistoryTaskDateIsValid(t){const r={financeDateStart:"YYYY-MM-DD",financeDateEnd:"YYYY-MM-DD"},n={"YYYY-MM-DD":/^\d{4}-\d{2}-\d{2}$/};return Object.keys(r).every(a=>{const s=r[a];if(t[a]){const o=new Date(t[a]);return Number.isNaN(o.getTime())?n[s].test(t[a]):!1}return!0})}async queryExportHistory(t,r,n,a=0){var u;const s=wt("/api/merchant/file/export/history/page",r),o=await Tt({mallId:t,url:s,data:{pageNum:1,pageSize:20,taskType:n},antiContentStr:this.antiContentStr});if(o.errorMsg)throw new Error(o.errorMsg);const i=((u=o.result)==null?void 0:u.merchantMerchantFileExportHistoryList)||[],l=[];for(const c of i){const{status:d}=c;if(+d==1){if(!this.checkExportHistoryTaskDateIsValid(c))continue;if(await Je(5e3),a++,a>60)throw new Cn("导出任务超时",300);return await this.queryExportHistory(t,r,n,a)}+d==2&&l.push(c)}return l}async startCrawlLocalOrderList(t,r,n){var o,i;const a="订单/管理订单";if(this.crawlLogObj.isTaskSuccess(a))return;const s=Er;try{n=new Date(n),n.setHours(23,59,59),r=new Date(r),r.setHours(0,0,0),this.crawlLogObj.startTask(a);const l=[];for(const b of[1,2,3,4]){let m=1;const h=10;let v=0,y=0;do{const T=await Es({mallId:t,url:`${this.host}/mms/kirogi/local/recentOrderList`,data:{packageAbnormalTypeList:[],pageNumber:m,pageSize:h,parentOrderTimeEnd:n.getTime()/1e3,parentOrderTimeStart:r.getTime()/1e3,queryType:b,sortType:1}});if(T.success!==!0)throw new Error(T.errorMsg);v||(v=Math.min(200,(o=T.result)==null?void 0:o.totalItemNum),y=Math.max(1,Math.ceil(v/h)));const S=((i=T.result)==null?void 0:i.pageItems)||[];for(const C of S){const f=C.parentOrderMap.poCurrencyExchangeInfo.storeSettlementCurrency;for(const O of C.orderList)l.push({orderSn:O.orderSn,orderSkuId:O.skuId,orderProductId:O.goodsId,localOrderStatus:O.localOrderStatus,goodsRetailPrice:FS(O.goodsRetailPrice),goodsBasePrice:FS(O.goodsBasePrice),quantity:O.quantity,shippedQuantity:O.shippedQuantity,currency:f})}let w;switch(b){case 4:w="已发货";break;case 3:w="已取消";break;case 2:w="未发货";break;case 1:w="平台处理中";break}if(this.crawlLogObj.updateTaskProgress(a,`${w} 第${m}/${y}页`),await Je(3e3),s.isDebug&&m===2){this.crawlLogObj.debugLog(a,"debug模式只取两页");break}m++}while((m-1)*h<v)}const c=(await pn({url:this.earthUrlsMap.getTimestamp,method:"GET"})).timestamp,d=NS(l,50);let p=0;for(const b of d)await Ht({url:this.earthLocalUrlMap.uploadLocalOrderSkuList,method:"POST",data:{shopId:this.bindShopId,orderSkuList:b,batchAddTimestamp:c,requestId:this.requestId,filename:`${a}-${p}`}}),p++;await this.saveMallLastRsyncTime(t,"localOrder"),await this.crawlLogObj.saveTaskRet(a,hr())}catch(l){await this.crawlLogObj.saveTaskRet(a,ir(Yt(l)))}}async startCrawlLocalOrderReport(t,r,n){var s;const a="订单/订单报告";if(!this.crawlLogObj.isTaskSuccess(a))try{const o=Date.now();this.crawlLogObj.startTask(a);let i=!1;for(n=new Date(n),n.setHours(23,59,59),r=new Date(r),r.setHours(0,0,0);!i;){if(Date.now()-o>3e5)throw new Cn("导出等待超时",300);i=!0;const u=(await this.getLocalOrderExportTaskList(t)).find(c=>new Date(c.jobApplyTimeStr).getTime()>o&&`${c.jobStatus}`=="1");if(u){const c=await Es({mallId:t,url:`${this.host}/mms/kirogi/local/export/task/download`,data:{jobId:u.jobId}});if(c.success!==!0)throw new Error(c.errorMsg);const d=(s=c.result)==null?void 0:s.downloadUrl;if(!d)throw new Error("获取下载地址为空");const p={gmtOrderDateStart:this.timestampTranDate(r),gmtOrderDateEnd:this.timestampTranDate(n),shopId:this.bindShopId,file:await this.getFileBase64(d)};await Ht({url:this.earthLocalUrlMap.uploadLocalOrderReport,method:"POST",data:p})}else{i=!1;const c={parentOrderStatusList:[1,2,4,41,5,51,3],parentOrderTimeEnd:n.getTime()/1e3,parentOrderTimeStart:r.getTime()/1e3},d=`${this.host}/mms/kirogi/local/export/addOrdersExportTask`,p=await Es({mallId:t,url:d,data:c});if(p.success!==!0)throw new Error(p.errorMsg)}await Je(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(a,hr())}catch(o){await this.crawlLogObj.saveTaskRet(a,ir(Yt(o)))}}getThreeDaysAgoLastSecond(){const t=new Date,r=new Date(t);return r.setDate(r.getDate()-3),r.setHours(23,59,59),r}async startCrawlLocalBillReport(t,r,n){var s;const a="财务/报告库";if(!this.crawlLogObj.isTaskSuccess(a))try{const o=Date.now();this.crawlLogObj.startTask(a);let i=!1;const l={};n=new Date(n),n.setHours(23,59,59);const u=this.getThreeDaysAgoLastSecond();for(n.getTime()>u.getTime()&&(n=u),r=new Date(r),r.setHours(0,0,0);!i;){if(Date.now()-o>3e5)throw new Cn("导出等待超时",300);i=!0;const d=(await this.getLocalBillExportTaskList(t)).find(p=>`${p.end_time_stamp}`==`${n.getTime()}`&&`${p.start_time_stamp}`==`${r.getTime()}`&&`${p.status}`=="1");if(d){const p=await Es({mallId:t,url:`${this.host}/mms/statement/export/task/result`,data:{flowId:d.flow_id}});if(p.success!==!0)throw new Error(p.error_msg);const b=(s=p.result)==null?void 0:s.file_url;if(!b)throw new Error("获取下载地址为空");const m={feeTypeList:[PS,ES,WN,KN,$S,YN,LS,RS,GN,JN],shopId:this.bindShopId,file:await this.getFileBase64(b),filename:d.flow_id,gmtOrderDateStart:this.timestampTranDate(r.getTime()),gmtOrderDateEnd:this.timestampTranDate(n.getTime())};await Ht({url:this.earthLocalUrlMap.createPddkjLocalImportTask,data:m,method:"POST"})}else if(i=!1,!l[a]){const p={beginCreateTime:r.getTime(),endCreateTime:n.getTime()},b=`${this.host}/mms/statement/export/task/create`,m=await Es({mallId:t,url:b,data:p});if(m.success!==!0)throw new Error(m.error_msg);l[a]=!0}await Je(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(a,hr())}catch(o){await this.crawlLogObj.saveTaskRet(a,ir(Yt(o)))}}async getLocalBillExportTaskList(t){const r=`${this.host}/mms/statement/export/task/list`,n=await Es({mallId:t,url:r,data:{page:1,size:10}});if(n.success!==!0)throw new Error(n.errorMsg);return n.result.export_task_list}async getLocalOrderExportTaskList(t){const r=`${this.host}/mms/kirogi/local/export/listOrdersExportTask`,n=await Es({mallId:t,url:r,data:{pageNumber:1,pageSize:10}});if(n.success!==!0)throw new Error(n.errorMsg);return n.result.pageItems}async startCrawlAccountOverview(t){const r="账户资金/资金中心-货款账户";if(!this.crawlLogObj.isTaskSuccess(r))try{await this.crawlLogObj.startTask(r);const n=wt("/api/merchant/payment/account/amount/info");let a=await Tt({mallId:t,url:n,data:{},antiContentStr:this.antiContentStr});if(a.errorCode!==1e6)throw new Error(a.errorMsg);const{currency:s,totalAmount:o,availableBalance:i,mallDepositLimitAmount:l}=a.result||{},u={mallId:t,shopId:this.bindShopId,requestId:this.requestId,region:"seller",totalAmount:o,availableAmount:i,accountReservedAmount:l,currency:s};if(a=await Ht({url:this.earthUrlsMap.saveAccountOverview,method:"POST",data:u}),a.result!=="success")throw new Error(a.reason);await this.saveMallLastRsyncTime(t,"accountOverview"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(n){await this.crawlLogObj.saveTaskRet(r,ir(Yt(n)))}}removeCurrencyUnit(t){return t.replace(/[^\d.-]/g,"")}async startCrawlFundFrozen(t){var n;const r="账户资金/资金限制";if(!this.crawlLogObj.isTaskSuccess(r))try{await this.crawlLogObj.startTask(r);for(const a of["global","us","eu"]){await this.loginMallAgent(t,a);const s=wt("/api/merchant/fund-frozen/rules",a);let o=await Tt({mallId:t,url:s,data:{},antiContentStr:this.antiContentStr});if(o.errorCode!==1e6)throw new Error(o.errorMsg);const i=((n=o.result)==null?void 0:n.rules)||[],l=[];for(const u of i){const{frozenType:c,reason:d}=u;await this.crawlLogObj.updateTaskProgress(r,`采集${Oa(a)}-${d}`);const p=10;let b=1,m=0;do{const h=await Tt({mallId:t,url:wt("/api/merchant/fund-frozen/details",a),data:{frozenType:c,pageNum:b,pageSize:p},antiContentStr:this.antiContentStr});if(h.errorCode!==1e6)throw new Error(h.errorMsg);if(!h.result)break;const{detailsRowCount:v,detailsColumns:y,detailsRows:T}=h.result;m||(m=v||0),b===1&&Object.assign(u,{detailsRowCount:v,detailsColumns:y,detailsRows:[]});for(const S of T)S.amount=this.removeCurrencyUnit(S.amount),u.detailsRows.push(S);await Je(3e3),b++}while((b-1)*p<m);l.push({...u,amount:this.removeCurrencyUnit(u.amount)})}if(l.length>0&&(o=await Ht({url:this.earthUrlsMap.saveAccountLimitationOfFunds,method:"POST",data:{mallId:t,shopId:this.bindShopId,region:a,requestId:this.requestId,list:l}}),o.result!=="success"))throw new Error(o.reason)}await this.saveMallLastRsyncTime(t,"fundFrozen"),await this.crawlLogObj.saveTaskRet(r,hr())}catch(a){await this.crawlLogObj.saveTaskRet(r,ir(Yt(a)))}}async startCrawlWaitSettlementData(t,r,n,a){const s=`账户资金-结算数据-${Oa(r)}`;if(!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s),await this.loginMallAgent(t,r);const o=wt("/api/xiaowenhou/settle-flow/sm/unsettle/page-query",r),i=await Tt({mallId:t,url:o,data:{orderCreateTimeEnd:a,orderCreateTimeStart:n,pageNum:1,pageSize:20},antiContentStr:this.antiContentStr});if(i.success!==!0)throw new Error(i.errorMsg);const l=i.result||{},u=l.totalAmount||{},c=l.productPaymentTotalAmount||{},d=l.productRefundTotalAmount||{},p=l.shippingPaymentTotalAmount||{},b=l.shippingRefundTotalAmount||{},m={mallId:t,shopId:this.bindShopId,requestId:this.requestId,region:r,waitSettleAmount:u.value,currency:u.currencyCode,productPaymentTotalAmount:c.value,productPaymentTotalAmountCurrency:c.currencyCode,productRefundTotalAmount:d.value,productRefundTotalAmountCurrency:d.currencyCode,shippingPaymentTotalAmount:p.value,shippingPaymentTotalAmountCurrency:p.currencyCode,shippingRefundTotalAmount:b.value,shippingRefundTotalAmountCurrency:b.currencyCode};await Ht({url:this.earthUrlsMap.saveAccountWaitSettleAmount,method:"POST",data:m}),await this.saveMallLastRsyncTime(t,"accountOverview"),await this.crawlLogObj.saveTaskRet(s,hr())}catch(o){await this.crawlLogObj.saveTaskRet(s,ir(Yt(o)))}}async startCrawlEprProxyPaymentServiceFeeWait(t,r){var a;const n=`EPR代付服务费-待扣费-${Oa(r)}`;if(!this.crawlLogObj.isTaskSuccess(n))try{const s=Date.now();await this.crawlLogObj.startTask(n),await this.loginMallAgent(t,r);let o=!1;const i=15;for(;!o;){if(Date.now()-s>3e5)throw new Cn("导出等待超时",300);o=!0;const u=(await this.queryExportHistory(t,r,i)).find(c=>c.status==2);if(u){const c=wt("/api/merchant/file/export/download",r),p=(a=(await Tt({mallId:t,url:c,data:{id:u.id,taskType:i},antiContentStr:this.antiContentStr})).result)==null?void 0:a.fileUrl,b=await this.getFileBase64(p),m=n;await Ht({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,filename:m,file:b,platform:this.mallType,requestId:this.requestId,fundType:"代付服务费",fundStatus:1}})}else{o=!1,await this.crawlLogObj.debugLog(n,"创建导出");const c=wt("/api/merchant/file/export",r),p=await Tt({mallId:t,url:c,data:{billingCycleList:[],taskType:i},antiContentStr:this.antiContentStr});if(p.errorMsg)throw new Error(p.errorMsg)}}await this.crawlLogObj.saveTaskRet(n,hr())}catch(s){await this.crawlLogObj.saveTaskRet(n,ir(Yt(s)))}}}class US{constructor(t){he(this,"earthUrlsMap",{getCrawlTaskUrl:`${Ft}/platform/pddkj/stat/crawl/get_crawl_task`,initCrawlRequest:`${Ft}/platform/pddkj/stat/crawl/init_crawl_request`});he(this,"runStatus","wait");he(this,"crawlQueueList",[]);he(this,"isRunning",!1);he(this,"nextAutoCrawlTime",0);he(this,"antiContentStr");this.antiContentStr=t}getAllWindows(){return new Promise(t=>{Wn.windows.getAll({},r=>{t(r)})})}async run(t){console.debug("CrawlQueue run");try{if(this.runStatus="process",!Er.crawlTabId){let r=await Ze.getItem(BS);r=r?Number.parseInt(r):null,r=Wl(r)?null:r,Er.crawlTabId=r}for(;;){const n=(await this.getAllWindows()).length;if(console.debug("打开窗口数量",n),n>0){await this.autoCrawl();let a=await this.getTaskTs();const s=await Ze.getItem("local:newTs");if(s&&(a=s,Ze.removeItem("local:newTs")),a&&a>t){this.runStatus="waitStop";break}}await Je(9e5)}return new Promise(r=>{const n=setInterval(()=>{console.debug("wait stop"),this.isRunning===!1&&(clearInterval(n),console.debug("task stop"),r(!0))},3e3)})}catch(r){throw this.runStatus="waitStop",r}}async autoCrawl(){if(Date.now()<this.nextAutoCrawlTime)return;Er.isDebug?this.nextAutoCrawlTime=Date.now()+6e4:this.nextAutoCrawlTime=Date.now()+36e5;try{const r=await pn({url:this.earthUrlsMap.getCrawlTaskUrl,method:"GET"}),n=(r==null?void 0:r.taskList)||[];if(n.length){const a=await this.getTemuMallMap();for(const s of n){const o=a[s.mallId];o&&(s.mallName=o.mallName,this.addCrawlQueueByTask(s))}}console.debug(yr(),"crawlQueueList",this.crawlQueueList)}catch(r){console.debug(yr(),"autoCrawl fail",r)}}async getTaskTs(){const t=await pn({url:"/open/plugin/getBgTaskCodeTs",method:"GET"});return t==null?void 0:t.ts}addCrawlQueueByTask(t){console.debug("addCrawlQueueByTask",t);const{mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,host:i}=t;this.addCrawlQueue({mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,action:"auto",host:i})}async addCrawlQueue(t){const{mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,startDate:i,endDate:l,action:u,gmtExec:c,host:d}=t||{},p=this.crawlQueueList.find(m=>`${m.mallId}`==`${r}`);(!p||p.locked===0)&&(this.crawlQueueList=this.crawlQueueList.filter(m=>`${m.mallId}`!=`${r}`),this.crawlQueueList.push({mallId:r,mallName:n,mallType:a,bindShopId:s,authAppNameList:o,startDate:i,endDate:l,action:u||"auto",retryTimes:0,locked:0,gmtExec:c||yr(),gmtLock:null,requestId:p&&p.requestId,host:d}),this.crawlQueueList.sort((m,h)=>new Date(m.gmtExec).getTime()-new Date(h.gmtExec).getTime()));const b=new ud(r);await b.init(),b.sendToClientTab(),this.start()}async getTemuMallMap(){const t=wt("/bg/quiet/api/mms/userInfo"),r=await Tt({url:t,antiContentStr:this.antiContentStr}),n={};if(r.result&&r.result.companyList&&r.result.companyList.length)for(const a of r.result.companyList)for(const s of a.malInfoList||[])n[s.mallId]=s;return n}async start(){if(console.debug("start"),!this.isRunning){for(console.debug(yr(),"start process queue"),this.isRunning=!0;;){let t=null;try{if(t=await this.lockQueue(),console.debug(yr(),"lock queue",t),t){const r=await this.processQueue(t);console.debug(yr(),"processQueue",r),await this.clearQueue(t,r)}else if(this.crawlQueueList.length>0)console.debug(yr(),"lock empty,sleep"),await Je(1e4);else{console.debug(yr(),"stop timer");break}}catch(r){console.debug(yr(),"processQueue exception",t,r)}if(this.runStatus==="waitStop")break}this.isRunning=!1}}async lockQueue(){this.crawlQueueList=this.crawlQueueList.filter(n=>n.retryTimes<5);const t=yr(),r=this.crawlQueueList.find(n=>n.locked===0&&n.gmtExec<=t);if(r){if(!r.requestId){const n=await this.initRequestId(r);if(n.result==="success")r.requestId=n.requestId;else return r.retryTimes++,null}r.locked=1,r.gmtLock=t}return r}async processQueue(t){try{return await new jS({...t,antiContentStr:this.antiContentStr}).startCrawl(),{result:"success",reason:""}}catch(r){return r instanceof Cn?{result:"fail",canRetry:!0,sleepSeconds:(r==null?void 0:r.sleepSeconds)||1800,reason:r.message}:{result:"fail",canRetry:!1,sleepSeconds:0,reason:Yt(r)}}}async clearQueue(t,r){if(r.canRetry){const a=this.crawlQueueList.find(s=>`${s.mallId}`==`${t.mallId}`);a.retryTimes++,a.locked=0,a.gmtExec=yr(r.sleepSeconds||1800)}else this.crawlQueueList=this.crawlQueueList.filter(a=>`${a.mallId}`!=`${t.mallId}`);const n=new ud(t.mallId,t.requestId);await n.init(),n.sendToClientTab()}initRequestId({mallId:t,mallName:r,action:n}){return pn({url:this.earthUrlsMap.initCrawlRequest,method:"POST",data:{mallId:t,mallName:r,action:n}})}}class e4{constructor(t){he(this,"antiContentStr");this.antiContentStr=t}async run(){console.debug("CrawlTask"),Er.crawlQueue||(Er.crawlQueue=new US(this.antiContentStr),await Ze.getItem("local:crawlDebug")&&(Er.isDebug=!0));try{for(;;){const{ts:t,result:r}=await this.getTaskCode();if(console.debug("getTaskCode",t),r==="success"){if(await Er.crawlQueue.run(t)!==!0)throw new Error("返回不是true");await Je(5e3)}else await Je(36e5)}}catch(t){Ze.setItem("local:bgTaskFail",`异常:${Date.now()}:${t==null?void 0:t.message}`)}}async getTaskCode(){return pn({url:"/open/plugin/getBgTaskCode",method:"GET"})}}const og=Object.freeze(Object.defineProperty({__proto__:null,CrawlLog:ud,CrawlQueue:US,CrawlTask:e4,CrawlTemu:jS,LOCAL_CRAWL_MALL_INFO_LIST:sg,LOCAL_CRAWL_TAB_ID:BS,LOCAL_TEMU_ANTI_CONTENT:XN,_globalCrawlData:Er,ajaxPddkjAgent:Tt,ajaxPddkjLocal:Es},Symbol.toStringTag,{value:"Module"})),Ho="1688",t4={verticalAttributesMap:{_F_b_kj_dc:"mskjzs",xx:"zying"}};var cd={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var r4=cd.exports,qS;function n4(){return qS||(qS=1,(function(e){(function(t,r){e.exports=t.document?r(t,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return r(n)}})(typeof window<"u"?window:r4,function(t,r){var n=[],a=Object.getPrototypeOf,s=n.slice,o=n.flat?function(g){return n.flat.call(g)}:function(g){return n.concat.apply([],g)},i=n.push,l=n.indexOf,u={},c=u.toString,d=u.hasOwnProperty,p=d.toString,b=p.call(Object),m={},h=function(x){return typeof x=="function"&&typeof x.nodeType!="number"&&typeof x.item!="function"},v=function(x){return x!=null&&x===x.window},y=t.document,T={type:!0,src:!0,nonce:!0,noModule:!0};function S(g,x,A){A=A||y;var P,j,U=A.createElement("script");if(U.text=g,x)for(P in T)j=x[P]||x.getAttribute&&x.getAttribute(P),j&&U.setAttribute(P,j);A.head.appendChild(U).parentNode.removeChild(U)}function w(g){return g==null?g+"":typeof g=="object"||typeof g=="function"?u[c.call(g)]||"object":typeof g}var C="3.7.1",k=/HTML$/i,f=function(g,x){return new f.fn.init(g,x)};f.fn=f.prototype={jquery:C,constructor:f,length:0,toArray:function(){return s.call(this)},get:function(g){return g==null?s.call(this):g<0?this[g+this.length]:this[g]},pushStack:function(g){var x=f.merge(this.constructor(),g);return x.prevObject=this,x},each:function(g){return f.each(this,g)},map:function(g){return this.pushStack(f.map(this,function(x,A){return g.call(x,A,x)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(f.grep(this,function(g,x){return(x+1)%2}))},odd:function(){return this.pushStack(f.grep(this,function(g,x){return x%2}))},eq:function(g){var x=this.length,A=+g+(g<0?x:0);return this.pushStack(A>=0&&A<x?[this[A]]:[])},end:function(){return this.prevObject||this.constructor()},push:i,sort:n.sort,splice:n.splice},f.extend=f.fn.extend=function(){var g,x,A,P,j,U,z=arguments[0]||{},oe=1,ae=arguments.length,pe=!1;for(typeof z=="boolean"&&(pe=z,z=arguments[oe]||{},oe++),typeof z!="object"&&!h(z)&&(z={}),oe===ae&&(z=this,oe--);oe<ae;oe++)if((g=arguments[oe])!=null)for(x in g)P=g[x],!(x==="__proto__"||z===P)&&(pe&&P&&(f.isPlainObject(P)||(j=Array.isArray(P)))?(A=z[x],j&&!Array.isArray(A)?U=[]:!j&&!f.isPlainObject(A)?U={}:U=A,j=!1,z[x]=f.extend(pe,U,P)):P!==void 0&&(z[x]=P));return z},f.extend({expando:"jQuery"+(C+Math.random()).replace(/\D/g,""),isReady:!0,error:function(g){throw new Error(g)},noop:function(){},isPlainObject:function(g){var x,A;return!g||c.call(g)!=="[object Object]"?!1:(x=a(g),x?(A=d.call(x,"constructor")&&x.constructor,typeof A=="function"&&p.call(A)===b):!0)},isEmptyObject:function(g){var x;for(x in g)return!1;return!0},globalEval:function(g,x,A){S(g,{nonce:x&&x.nonce},A)},each:function(g,x){var A,P=0;if(O(g))for(A=g.length;P<A&&x.call(g[P],P,g[P])!==!1;P++);else for(P in g)if(x.call(g[P],P,g[P])===!1)break;return g},text:function(g){var x,A="",P=0,j=g.nodeType;if(!j)for(;x=g[P++];)A+=f.text(x);return j===1||j===11?g.textContent:j===9?g.documentElement.textContent:j===3||j===4?g.nodeValue:A},makeArray:function(g,x){var A=x||[];return g!=null&&(O(Object(g))?f.merge(A,typeof g=="string"?[g]:g):i.call(A,g)),A},inArray:function(g,x,A){return x==null?-1:l.call(x,g,A)},isXMLDoc:function(g){var x=g&&g.namespaceURI,A=g&&(g.ownerDocument||g).documentElement;return!k.test(x||A&&A.nodeName||"HTML")},merge:function(g,x){for(var A=+x.length,P=0,j=g.length;P<A;P++)g[j++]=x[P];return g.length=j,g},grep:function(g,x,A){for(var P,j=[],U=0,z=g.length,oe=!A;U<z;U++)P=!x(g[U],U),P!==oe&&j.push(g[U]);return j},map:function(g,x,A){var P,j,U=0,z=[];if(O(g))for(P=g.length;U<P;U++)j=x(g[U],U,A),j!=null&&z.push(j);else for(U in g)j=x(g[U],U,A),j!=null&&z.push(j);return o(z)},guid:1,support:m}),typeof Symbol=="function"&&(f.fn[Symbol.iterator]=n[Symbol.iterator]),f.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(g,x){u["[object "+x+"]"]=x.toLowerCase()});function O(g){var x=!!g&&"length"in g&&g.length,A=w(g);return h(g)||v(g)?!1:A==="array"||x===0||typeof x=="number"&&x>0&&x-1 in g}function E(g,x){return g.nodeName&&g.nodeName.toLowerCase()===x.toLowerCase()}var N=n.pop,$=n.sort,L=n.splice,B="[\\x20\\t\\r\\n\\f]",F=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g");f.contains=function(g,x){var A=x&&x.parentNode;return g===A||!!(A&&A.nodeType===1&&(g.contains?g.contains(A):g.compareDocumentPosition&&g.compareDocumentPosition(A)&16))};var R=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function H(g,x){return x?g==="\0"?"�":g.slice(0,-1)+"\\"+g.charCodeAt(g.length-1).toString(16)+" ":"\\"+g}f.escapeSelector=function(g){return(g+"").replace(R,H)};var q=y,M=i;(function(){var g,x,A,P,j,U=M,z,oe,ae,pe,Ee,Be=f.expando,we=0,Qe=0,Mt=Lp(),or=Lp(),zt=Lp(),dn=Lp(),Xr=function(te,de){return te===de&&(j=!0),0},vs="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ys="(?:\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",tr="\\["+B+"*("+ys+")(?:"+B+"*([*^$|!~]?=)"+B+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ys+"))|)"+B+"*\\]",xi=":("+ys+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+tr+")*)|.*)\\)|)",ur=new RegExp(B+"+","g"),Br=new RegExp("^"+B+"*,"+B+"*"),vc=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),ib=new RegExp(B+"|>"),bs=new RegExp(xi),yc=new RegExp("^"+ys+"$"),ws={ID:new RegExp("^#("+ys+")"),CLASS:new RegExp("^\\.("+ys+")"),TAG:new RegExp("^("+ys+"|[*])"),ATTR:new RegExp("^"+tr),PSEUDO:new RegExp("^"+xi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+vs+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},Co=/^(?:input|select|textarea|button)$/i,ko=/^h\d$/i,Ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,lb=/[+~]/,Xs=new RegExp("\\\\[\\da-fA-F]{1,6}"+B+"?|\\\\([^\\r\\n\\f])","g"),Qs=function(te,de){var be="0x"+te.slice(1)-65536;return de||(be<0?String.fromCharCode(be+65536):String.fromCharCode(be>>10|55296,be&1023|56320))},MZ=function(){Io()},DZ=Dp(function(te){return te.disabled===!0&&E(te,"fieldset")},{dir:"parentNode",next:"legend"});function NZ(){try{return z.activeElement}catch{}}try{U.apply(n=s.call(q.childNodes),q.childNodes),n[q.childNodes.length].nodeType}catch{U={apply:function(de,be){M.apply(de,s.call(be))},call:function(de){M.apply(de,s.call(arguments,1))}}}function vr(te,de,be,Ie){var Fe,st,lt,yt,ut,Xt,$t,Nt=de&&de.ownerDocument,Qt=de?de.nodeType:9;if(be=be||[],typeof te!="string"||!te||Qt!==1&&Qt!==9&&Qt!==11)return be;if(!Ie&&(Io(de),de=de||z,ae)){if(Qt!==11&&(ut=Ta.exec(te)))if(Fe=ut[1]){if(Qt===9)if(lt=de.getElementById(Fe)){if(lt.id===Fe)return U.call(be,lt),be}else return be;else if(Nt&&(lt=Nt.getElementById(Fe))&&vr.contains(de,lt)&&lt.id===Fe)return U.call(be,lt),be}else{if(ut[2])return U.apply(be,de.getElementsByTagName(te)),be;if((Fe=ut[3])&&de.getElementsByClassName)return U.apply(be,de.getElementsByClassName(Fe)),be}if(!dn[te+" "]&&(!pe||!pe.test(te))){if($t=te,Nt=de,Qt===1&&(ib.test(te)||vc.test(te))){for(Nt=lb.test(te)&&ub(de.parentNode)||de,(Nt!=de||!m.scope)&&((yt=de.getAttribute("id"))?yt=f.escapeSelector(yt):de.setAttribute("id",yt=Be)),Xt=bc(te),st=Xt.length;st--;)Xt[st]=(yt?"#"+yt:":scope")+" "+Mp(Xt[st]);$t=Xt.join(",")}try{return U.apply(be,Nt.querySelectorAll($t)),be}catch{dn(te,!0)}finally{yt===Be&&de.removeAttribute("id")}}}return f2(te.replace(F,"$1"),de,be,Ie)}function Lp(){var te=[];function de(be,Ie){return te.push(be+" ")>x.cacheLength&&delete de[te.shift()],de[be+" "]=Ie}return de}function Wa(te){return te[Be]=!0,te}function El(te){var de=z.createElement("fieldset");try{return!!te(de)}catch{return!1}finally{de.parentNode&&de.parentNode.removeChild(de),de=null}}function FZ(te){return function(de){return E(de,"input")&&de.type===te}}function BZ(te){return function(de){return(E(de,"input")||E(de,"button"))&&de.type===te}}function c2(te){return function(de){return"form"in de?de.parentNode&&de.disabled===!1?"label"in de?"label"in de.parentNode?de.parentNode.disabled===te:de.disabled===te:de.isDisabled===te||de.isDisabled!==!te&&DZ(de)===te:de.disabled===te:"label"in de?de.disabled===te:!1}}function Ci(te){return Wa(function(de){return de=+de,Wa(function(be,Ie){for(var Fe,st=te([],be.length,de),lt=st.length;lt--;)be[Fe=st[lt]]&&(be[Fe]=!(Ie[Fe]=be[Fe]))})})}function ub(te){return te&&typeof te.getElementsByTagName<"u"&&te}function Io(te){var de,be=te?te.ownerDocument||te:q;return be==z||be.nodeType!==9||!be.documentElement||(z=be,oe=z.documentElement,ae=!f.isXMLDoc(z),Ee=oe.matches||oe.webkitMatchesSelector||oe.msMatchesSelector,oe.msMatchesSelector&&q!=z&&(de=z.defaultView)&&de.top!==de&&de.addEventListener("unload",MZ),m.getById=El(function(Ie){return oe.appendChild(Ie).id=f.expando,!z.getElementsByName||!z.getElementsByName(f.expando).length}),m.disconnectedMatch=El(function(Ie){return Ee.call(Ie,"*")}),m.scope=El(function(){return z.querySelectorAll(":scope")}),m.cssHas=El(function(){try{return z.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),m.getById?(x.filter.ID=function(Ie){var Fe=Ie.replace(Xs,Qs);return function(st){return st.getAttribute("id")===Fe}},x.find.ID=function(Ie,Fe){if(typeof Fe.getElementById<"u"&&ae){var st=Fe.getElementById(Ie);return st?[st]:[]}}):(x.filter.ID=function(Ie){var Fe=Ie.replace(Xs,Qs);return function(st){var lt=typeof st.getAttributeNode<"u"&&st.getAttributeNode("id");return lt&&lt.value===Fe}},x.find.ID=function(Ie,Fe){if(typeof Fe.getElementById<"u"&&ae){var st,lt,yt,ut=Fe.getElementById(Ie);if(ut){if(st=ut.getAttributeNode("id"),st&&st.value===Ie)return[ut];for(yt=Fe.getElementsByName(Ie),lt=0;ut=yt[lt++];)if(st=ut.getAttributeNode("id"),st&&st.value===Ie)return[ut]}return[]}}),x.find.TAG=function(Ie,Fe){return typeof Fe.getElementsByTagName<"u"?Fe.getElementsByTagName(Ie):Fe.querySelectorAll(Ie)},x.find.CLASS=function(Ie,Fe){if(typeof Fe.getElementsByClassName<"u"&&ae)return Fe.getElementsByClassName(Ie)},pe=[],El(function(Ie){var Fe;oe.appendChild(Ie).innerHTML="<a id='"+Be+"' href='' disabled='disabled'></a><select id='"+Be+"-\r\\' disabled='disabled'><option selected=''></option></select>",Ie.querySelectorAll("[selected]").length||pe.push("\\["+B+"*(?:value|"+vs+")"),Ie.querySelectorAll("[id~="+Be+"-]").length||pe.push("~="),Ie.querySelectorAll("a#"+Be+"+*").length||pe.push(".#.+[+~]"),Ie.querySelectorAll(":checked").length||pe.push(":checked"),Fe=z.createElement("input"),Fe.setAttribute("type","hidden"),Ie.appendChild(Fe).setAttribute("name","D"),oe.appendChild(Ie).disabled=!0,Ie.querySelectorAll(":disabled").length!==2&&pe.push(":enabled",":disabled"),Fe=z.createElement("input"),Fe.setAttribute("name",""),Ie.appendChild(Fe),Ie.querySelectorAll("[name='']").length||pe.push("\\["+B+"*name"+B+"*="+B+`*(?:''|"")`)}),m.cssHas||pe.push(":has"),pe=pe.length&&new RegExp(pe.join("|")),Xr=function(Ie,Fe){if(Ie===Fe)return j=!0,0;var st=!Ie.compareDocumentPosition-!Fe.compareDocumentPosition;return st||(st=(Ie.ownerDocument||Ie)==(Fe.ownerDocument||Fe)?Ie.compareDocumentPosition(Fe):1,st&1||!m.sortDetached&&Fe.compareDocumentPosition(Ie)===st?Ie===z||Ie.ownerDocument==q&&vr.contains(q,Ie)?-1:Fe===z||Fe.ownerDocument==q&&vr.contains(q,Fe)?1:P?l.call(P,Ie)-l.call(P,Fe):0:st&4?-1:1)}),z}vr.matches=function(te,de){return vr(te,null,null,de)},vr.matchesSelector=function(te,de){if(Io(te),ae&&!dn[de+" "]&&(!pe||!pe.test(de)))try{var be=Ee.call(te,de);if(be||m.disconnectedMatch||te.document&&te.document.nodeType!==11)return be}catch{dn(de,!0)}return vr(de,z,null,[te]).length>0},vr.contains=function(te,de){return(te.ownerDocument||te)!=z&&Io(te),f.contains(te,de)},vr.attr=function(te,de){(te.ownerDocument||te)!=z&&Io(te);var be=x.attrHandle[de.toLowerCase()],Ie=be&&d.call(x.attrHandle,de.toLowerCase())?be(te,de,!ae):void 0;return Ie!==void 0?Ie:te.getAttribute(de)},vr.error=function(te){throw new Error("Syntax error, unrecognized expression: "+te)},f.uniqueSort=function(te){var de,be=[],Ie=0,Fe=0;if(j=!m.sortStable,P=!m.sortStable&&s.call(te,0),$.call(te,Xr),j){for(;de=te[Fe++];)de===te[Fe]&&(Ie=be.push(Fe));for(;Ie--;)L.call(te,be[Ie],1)}return P=null,te},f.fn.uniqueSort=function(){return this.pushStack(f.uniqueSort(s.apply(this)))},x=f.expr={cacheLength:50,createPseudo:Wa,match:ws,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(te){return te[1]=te[1].replace(Xs,Qs),te[3]=(te[3]||te[4]||te[5]||"").replace(Xs,Qs),te[2]==="~="&&(te[3]=" "+te[3]+" "),te.slice(0,4)},CHILD:function(te){return te[1]=te[1].toLowerCase(),te[1].slice(0,3)==="nth"?(te[3]||vr.error(te[0]),te[4]=+(te[4]?te[5]+(te[6]||1):2*(te[3]==="even"||te[3]==="odd")),te[5]=+(te[7]+te[8]||te[3]==="odd")):te[3]&&vr.error(te[0]),te},PSEUDO:function(te){var de,be=!te[6]&&te[2];return ws.CHILD.test(te[0])?null:(te[3]?te[2]=te[4]||te[5]||"":be&&bs.test(be)&&(de=bc(be,!0))&&(de=be.indexOf(")",be.length-de)-be.length)&&(te[0]=te[0].slice(0,de),te[2]=be.slice(0,de)),te.slice(0,3))}},filter:{TAG:function(te){var de=te.replace(Xs,Qs).toLowerCase();return te==="*"?function(){return!0}:function(be){return E(be,de)}},CLASS:function(te){var de=Mt[te+" "];return de||(de=new RegExp("(^|"+B+")"+te+"("+B+"|$)"))&&Mt(te,function(be){return de.test(typeof be.className=="string"&&be.className||typeof be.getAttribute<"u"&&be.getAttribute("class")||"")})},ATTR:function(te,de,be){return function(Ie){var Fe=vr.attr(Ie,te);return Fe==null?de==="!=":de?(Fe+="",de==="="?Fe===be:de==="!="?Fe!==be:de==="^="?be&&Fe.indexOf(be)===0:de==="*="?be&&Fe.indexOf(be)>-1:de==="$="?be&&Fe.slice(-be.length)===be:de==="~="?(" "+Fe.replace(ur," ")+" ").indexOf(be)>-1:de==="|="?Fe===be||Fe.slice(0,be.length+1)===be+"-":!1):!0}},CHILD:function(te,de,be,Ie,Fe){var st=te.slice(0,3)!=="nth",lt=te.slice(-4)!=="last",yt=de==="of-type";return Ie===1&&Fe===0?function(ut){return!!ut.parentNode}:function(ut,Xt,$t){var Nt,Qt,kt,Tr,zn,_n=st!==lt?"nextSibling":"previousSibling",xa=ut.parentNode,_s=yt&&ut.nodeName.toLowerCase(),$l=!$t&&!yt,Pn=!1;if(xa){if(st){for(;_n;){for(kt=ut;kt=kt[_n];)if(yt?E(kt,_s):kt.nodeType===1)return!1;zn=_n=te==="only"&&!zn&&"nextSibling"}return!0}if(zn=[lt?xa.firstChild:xa.lastChild],lt&&$l){for(Qt=xa[Be]||(xa[Be]={}),Nt=Qt[te]||[],Tr=Nt[0]===we&&Nt[1],Pn=Tr&&Nt[2],kt=Tr&&xa.childNodes[Tr];kt=++Tr&&kt&&kt[_n]||(Pn=Tr=0)||zn.pop();)if(kt.nodeType===1&&++Pn&&kt===ut){Qt[te]=[we,Tr,Pn];break}}else if($l&&(Qt=ut[Be]||(ut[Be]={}),Nt=Qt[te]||[],Tr=Nt[0]===we&&Nt[1],Pn=Tr),Pn===!1)for(;(kt=++Tr&&kt&&kt[_n]||(Pn=Tr=0)||zn.pop())&&!((yt?E(kt,_s):kt.nodeType===1)&&++Pn&&($l&&(Qt=kt[Be]||(kt[Be]={}),Qt[te]=[we,Pn]),kt===ut)););return Pn-=Fe,Pn===Ie||Pn%Ie===0&&Pn/Ie>=0}}},PSEUDO:function(te,de){var be,Ie=x.pseudos[te]||x.setFilters[te.toLowerCase()]||vr.error("unsupported pseudo: "+te);return Ie[Be]?Ie(de):Ie.length>1?(be=[te,te,"",de],x.setFilters.hasOwnProperty(te.toLowerCase())?Wa(function(Fe,st){for(var lt,yt=Ie(Fe,de),ut=yt.length;ut--;)lt=l.call(Fe,yt[ut]),Fe[lt]=!(st[lt]=yt[ut])}):function(Fe){return Ie(Fe,0,be)}):Ie}},pseudos:{not:Wa(function(te){var de=[],be=[],Ie=pb(te.replace(F,"$1"));return Ie[Be]?Wa(function(Fe,st,lt,yt){for(var ut,Xt=Ie(Fe,null,yt,[]),$t=Fe.length;$t--;)(ut=Xt[$t])&&(Fe[$t]=!(st[$t]=ut))}):function(Fe,st,lt){return de[0]=Fe,Ie(de,null,lt,be),de[0]=null,!be.pop()}}),has:Wa(function(te){return function(de){return vr(te,de).length>0}}),contains:Wa(function(te){return te=te.replace(Xs,Qs),function(de){return(de.textContent||f.text(de)).indexOf(te)>-1}}),lang:Wa(function(te){return yc.test(te||"")||vr.error("unsupported lang: "+te),te=te.replace(Xs,Qs).toLowerCase(),function(de){var be;do if(be=ae?de.lang:de.getAttribute("xml:lang")||de.getAttribute("lang"))return be=be.toLowerCase(),be===te||be.indexOf(te+"-")===0;while((de=de.parentNode)&&de.nodeType===1);return!1}}),target:function(te){var de=t.location&&t.location.hash;return de&&de.slice(1)===te.id},root:function(te){return te===oe},focus:function(te){return te===NZ()&&z.hasFocus()&&!!(te.type||te.href||~te.tabIndex)},enabled:c2(!1),disabled:c2(!0),checked:function(te){return E(te,"input")&&!!te.checked||E(te,"option")&&!!te.selected},selected:function(te){return te.parentNode&&te.parentNode.selectedIndex,te.selected===!0},empty:function(te){for(te=te.firstChild;te;te=te.nextSibling)if(te.nodeType<6)return!1;return!0},parent:function(te){return!x.pseudos.empty(te)},header:function(te){return ko.test(te.nodeName)},input:function(te){return Co.test(te.nodeName)},button:function(te){return E(te,"input")&&te.type==="button"||E(te,"button")},text:function(te){var de;return E(te,"input")&&te.type==="text"&&((de=te.getAttribute("type"))==null||de.toLowerCase()==="text")},first:Ci(function(){return[0]}),last:Ci(function(te,de){return[de-1]}),eq:Ci(function(te,de,be){return[be<0?be+de:be]}),even:Ci(function(te,de){for(var be=0;be<de;be+=2)te.push(be);return te}),odd:Ci(function(te,de){for(var be=1;be<de;be+=2)te.push(be);return te}),lt:Ci(function(te,de,be){var Ie;for(be<0?Ie=be+de:be>de?Ie=de:Ie=be;--Ie>=0;)te.push(Ie);return te}),gt:Ci(function(te,de,be){for(var Ie=be<0?be+de:be;++Ie<de;)te.push(Ie);return te})}},x.pseudos.nth=x.pseudos.eq;for(g in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[g]=FZ(g);for(g in{submit:!0,reset:!0})x.pseudos[g]=BZ(g);function d2(){}d2.prototype=x.filters=x.pseudos,x.setFilters=new d2;function bc(te,de){var be,Ie,Fe,st,lt,yt,ut,Xt=or[te+" "];if(Xt)return de?0:Xt.slice(0);for(lt=te,yt=[],ut=x.preFilter;lt;){(!be||(Ie=Br.exec(lt)))&&(Ie&&(lt=lt.slice(Ie[0].length)||lt),yt.push(Fe=[])),be=!1,(Ie=vc.exec(lt))&&(be=Ie.shift(),Fe.push({value:be,type:Ie[0].replace(F," ")}),lt=lt.slice(be.length));for(st in x.filter)(Ie=ws[st].exec(lt))&&(!ut[st]||(Ie=ut[st](Ie)))&&(be=Ie.shift(),Fe.push({value:be,type:st,matches:Ie}),lt=lt.slice(be.length));if(!be)break}return de?lt.length:lt?vr.error(te):or(te,yt).slice(0)}function Mp(te){for(var de=0,be=te.length,Ie="";de<be;de++)Ie+=te[de].value;return Ie}function Dp(te,de,be){var Ie=de.dir,Fe=de.next,st=Fe||Ie,lt=be&&st==="parentNode",yt=Qe++;return de.first?function(ut,Xt,$t){for(;ut=ut[Ie];)if(ut.nodeType===1||lt)return te(ut,Xt,$t);return!1}:function(ut,Xt,$t){var Nt,Qt,kt=[we,yt];if($t){for(;ut=ut[Ie];)if((ut.nodeType===1||lt)&&te(ut,Xt,$t))return!0}else for(;ut=ut[Ie];)if(ut.nodeType===1||lt)if(Qt=ut[Be]||(ut[Be]={}),Fe&&E(ut,Fe))ut=ut[Ie]||ut;else{if((Nt=Qt[st])&&Nt[0]===we&&Nt[1]===yt)return kt[2]=Nt[2];if(Qt[st]=kt,kt[2]=te(ut,Xt,$t))return!0}return!1}}function cb(te){return te.length>1?function(de,be,Ie){for(var Fe=te.length;Fe--;)if(!te[Fe](de,be,Ie))return!1;return!0}:te[0]}function jZ(te,de,be){for(var Ie=0,Fe=de.length;Ie<Fe;Ie++)vr(te,de[Ie],be);return be}function Np(te,de,be,Ie,Fe){for(var st,lt=[],yt=0,ut=te.length,Xt=de!=null;yt<ut;yt++)(st=te[yt])&&(!be||be(st,Ie,Fe))&&(lt.push(st),Xt&&de.push(yt));return lt}function db(te,de,be,Ie,Fe,st){return Ie&&!Ie[Be]&&(Ie=db(Ie)),Fe&&!Fe[Be]&&(Fe=db(Fe,st)),Wa(function(lt,yt,ut,Xt){var $t,Nt,Qt,kt,Tr=[],zn=[],_n=yt.length,xa=lt||jZ(de||"*",ut.nodeType?[ut]:ut,[]),_s=te&&(lt||!de)?Np(xa,Tr,te,ut,Xt):xa;if(be?(kt=Fe||(lt?te:_n||Ie)?[]:yt,be(_s,kt,ut,Xt)):kt=_s,Ie)for($t=Np(kt,zn),Ie($t,[],ut,Xt),Nt=$t.length;Nt--;)(Qt=$t[Nt])&&(kt[zn[Nt]]=!(_s[zn[Nt]]=Qt));if(lt){if(Fe||te){if(Fe){for($t=[],Nt=kt.length;Nt--;)(Qt=kt[Nt])&&$t.push(_s[Nt]=Qt);Fe(null,kt=[],$t,Xt)}for(Nt=kt.length;Nt--;)(Qt=kt[Nt])&&($t=Fe?l.call(lt,Qt):Tr[Nt])>-1&&(lt[$t]=!(yt[$t]=Qt))}}else kt=Np(kt===yt?kt.splice(_n,kt.length):kt),Fe?Fe(null,yt,kt,Xt):U.apply(yt,kt)})}function fb(te){for(var de,be,Ie,Fe=te.length,st=x.relative[te[0].type],lt=st||x.relative[" "],yt=st?1:0,ut=Dp(function(Nt){return Nt===de},lt,!0),Xt=Dp(function(Nt){return l.call(de,Nt)>-1},lt,!0),$t=[function(Nt,Qt,kt){var Tr=!st&&(kt||Qt!=A)||((de=Qt).nodeType?ut(Nt,Qt,kt):Xt(Nt,Qt,kt));return de=null,Tr}];yt<Fe;yt++)if(be=x.relative[te[yt].type])$t=[Dp(cb($t),be)];else{if(be=x.filter[te[yt].type].apply(null,te[yt].matches),be[Be]){for(Ie=++yt;Ie<Fe&&!x.relative[te[Ie].type];Ie++);return db(yt>1&&cb($t),yt>1&&Mp(te.slice(0,yt-1).concat({value:te[yt-2].type===" "?"*":""})).replace(F,"$1"),be,yt<Ie&&fb(te.slice(yt,Ie)),Ie<Fe&&fb(te=te.slice(Ie)),Ie<Fe&&Mp(te))}$t.push(be)}return cb($t)}function UZ(te,de){var be=de.length>0,Ie=te.length>0,Fe=function(st,lt,yt,ut,Xt){var $t,Nt,Qt,kt=0,Tr="0",zn=st&&[],_n=[],xa=A,_s=st||Ie&&x.find.TAG("*",Xt),$l=we+=xa==null?1:Math.random()||.1,Pn=_s.length;for(Xt&&(A=lt==z||lt||Xt);Tr!==Pn&&($t=_s[Tr])!=null;Tr++){if(Ie&&$t){for(Nt=0,!lt&&$t.ownerDocument!=z&&(Io($t),yt=!ae);Qt=te[Nt++];)if(Qt($t,lt||z,yt)){U.call(ut,$t);break}Xt&&(we=$l)}be&&(($t=!Qt&&$t)&&kt--,st&&zn.push($t))}if(kt+=Tr,be&&Tr!==kt){for(Nt=0;Qt=de[Nt++];)Qt(zn,_n,lt,yt);if(st){if(kt>0)for(;Tr--;)zn[Tr]||_n[Tr]||(_n[Tr]=N.call(ut));_n=Np(_n)}U.apply(ut,_n),Xt&&!st&&_n.length>0&&kt+de.length>1&&f.uniqueSort(ut)}return Xt&&(we=$l,A=xa),zn};return be?Wa(Fe):Fe}function pb(te,de){var be,Ie=[],Fe=[],st=zt[te+" "];if(!st){for(de||(de=bc(te)),be=de.length;be--;)st=fb(de[be]),st[Be]?Ie.push(st):Fe.push(st);st=zt(te,UZ(Fe,Ie)),st.selector=te}return st}function f2(te,de,be,Ie){var Fe,st,lt,yt,ut,Xt=typeof te=="function"&&te,$t=!Ie&&bc(te=Xt.selector||te);if(be=be||[],$t.length===1){if(st=$t[0]=$t[0].slice(0),st.length>2&&(lt=st[0]).type==="ID"&&de.nodeType===9&&ae&&x.relative[st[1].type]){if(de=(x.find.ID(lt.matches[0].replace(Xs,Qs),de)||[])[0],de)Xt&&(de=de.parentNode);else return be;te=te.slice(st.shift().value.length)}for(Fe=ws.needsContext.test(te)?0:st.length;Fe--&&(lt=st[Fe],!x.relative[yt=lt.type]);)if((ut=x.find[yt])&&(Ie=ut(lt.matches[0].replace(Xs,Qs),lb.test(st[0].type)&&ub(de.parentNode)||de))){if(st.splice(Fe,1),te=Ie.length&&Mp(st),!te)return U.apply(be,Ie),be;break}}return(Xt||pb(te,$t))(Ie,de,!ae,be,!de||lb.test(te)&&ub(de.parentNode)||de),be}m.sortStable=Be.split("").sort(Xr).join("")===Be,Io(),m.sortDetached=El(function(te){return te.compareDocumentPosition(z.createElement("fieldset"))&1}),f.find=vr,f.expr[":"]=f.expr.pseudos,f.unique=f.uniqueSort,vr.compile=pb,vr.select=f2,vr.setDocument=Io,vr.tokenize=bc,vr.escape=f.escapeSelector,vr.getText=f.text,vr.isXML=f.isXMLDoc,vr.selectors=f.expr,vr.support=f.support,vr.uniqueSort=f.uniqueSort})();var D=function(g,x,A){for(var P=[],j=A!==void 0;(g=g[x])&&g.nodeType!==9;)if(g.nodeType===1){if(j&&f(g).is(A))break;P.push(g)}return P},Y=function(g,x){for(var A=[];g;g=g.nextSibling)g.nodeType===1&&g!==x&&A.push(g);return A},Z=f.expr.match.needsContext,se=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ne(g,x,A){return h(x)?f.grep(g,function(P,j){return!!x.call(P,j,P)!==A}):x.nodeType?f.grep(g,function(P){return P===x!==A}):typeof x!="string"?f.grep(g,function(P){return l.call(x,P)>-1!==A}):f.filter(x,g,A)}f.filter=function(g,x,A){var P=x[0];return A&&(g=":not("+g+")"),x.length===1&&P.nodeType===1?f.find.matchesSelector(P,g)?[P]:[]:f.find.matches(g,f.grep(x,function(j){return j.nodeType===1}))},f.fn.extend({find:function(g){var x,A,P=this.length,j=this;if(typeof g!="string")return this.pushStack(f(g).filter(function(){for(x=0;x<P;x++)if(f.contains(j[x],this))return!0}));for(A=this.pushStack([]),x=0;x<P;x++)f.find(g,j[x],A);return P>1?f.uniqueSort(A):A},filter:function(g){return this.pushStack(ne(this,g||[],!1))},not:function(g){return this.pushStack(ne(this,g||[],!0))},is:function(g){return!!ne(this,typeof g=="string"&&Z.test(g)?f(g):g||[],!1).length}});var me,ve=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,We=f.fn.init=function(g,x,A){var P,j;if(!g)return this;if(A=A||me,typeof g=="string")if(g[0]==="<"&&g[g.length-1]===">"&&g.length>=3?P=[null,g,null]:P=ve.exec(g),P&&(P[1]||!x))if(P[1]){if(x=x instanceof f?x[0]:x,f.merge(this,f.parseHTML(P[1],x&&x.nodeType?x.ownerDocument||x:y,!0)),se.test(P[1])&&f.isPlainObject(x))for(P in x)h(this[P])?this[P](x[P]):this.attr(P,x[P]);return this}else return j=y.getElementById(P[2]),j&&(this[0]=j,this.length=1),this;else return!x||x.jquery?(x||A).find(g):this.constructor(x).find(g);else{if(g.nodeType)return this[0]=g,this.length=1,this;if(h(g))return A.ready!==void 0?A.ready(g):g(f)}return f.makeArray(g,this)};We.prototype=f.fn,me=f(y);var Ke=/^(?:parents|prev(?:Until|All))/,xe={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({has:function(g){var x=f(g,this),A=x.length;return this.filter(function(){for(var P=0;P<A;P++)if(f.contains(this,x[P]))return!0})},closest:function(g,x){var A,P=0,j=this.length,U=[],z=typeof g!="string"&&f(g);if(!Z.test(g)){for(;P<j;P++)for(A=this[P];A&&A!==x;A=A.parentNode)if(A.nodeType<11&&(z?z.index(A)>-1:A.nodeType===1&&f.find.matchesSelector(A,g))){U.push(A);break}}return this.pushStack(U.length>1?f.uniqueSort(U):U)},index:function(g){return g?typeof g=="string"?l.call(f(g),this[0]):l.call(this,g.jquery?g[0]:g):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(g,x){return this.pushStack(f.uniqueSort(f.merge(this.get(),f(g,x))))},addBack:function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}});function ze(g,x){for(;(g=g[x])&&g.nodeType!==1;);return g}f.each({parent:function(g){var x=g.parentNode;return x&&x.nodeType!==11?x:null},parents:function(g){return D(g,"parentNode")},parentsUntil:function(g,x,A){return D(g,"parentNode",A)},next:function(g){return ze(g,"nextSibling")},prev:function(g){return ze(g,"previousSibling")},nextAll:function(g){return D(g,"nextSibling")},prevAll:function(g){return D(g,"previousSibling")},nextUntil:function(g,x,A){return D(g,"nextSibling",A)},prevUntil:function(g,x,A){return D(g,"previousSibling",A)},siblings:function(g){return Y((g.parentNode||{}).firstChild,g)},children:function(g){return Y(g.firstChild)},contents:function(g){return g.contentDocument!=null&&a(g.contentDocument)?g.contentDocument:(E(g,"template")&&(g=g.content||g),f.merge([],g.childNodes))}},function(g,x){f.fn[g]=function(A,P){var j=f.map(this,x,A);return g.slice(-5)!=="Until"&&(P=A),P&&typeof P=="string"&&(j=f.filter(P,j)),this.length>1&&(xe[g]||f.uniqueSort(j),Ke.test(g)&&j.reverse()),this.pushStack(j)}});var Ne=/[^\x20\t\r\n\f]+/g;function rt(g){var x={};return f.each(g.match(Ne)||[],function(A,P){x[P]=!0}),x}f.Callbacks=function(g){g=typeof g=="string"?rt(g):f.extend({},g);var x,A,P,j,U=[],z=[],oe=-1,ae=function(){for(j=j||g.once,P=x=!0;z.length;oe=-1)for(A=z.shift();++oe<U.length;)U[oe].apply(A[0],A[1])===!1&&g.stopOnFalse&&(oe=U.length,A=!1);g.memory||(A=!1),x=!1,j&&(A?U=[]:U="")},pe={add:function(){return U&&(A&&!x&&(oe=U.length-1,z.push(A)),(function Ee(Be){f.each(Be,function(we,Qe){h(Qe)?(!g.unique||!pe.has(Qe))&&U.push(Qe):Qe&&Qe.length&&w(Qe)!=="string"&&Ee(Qe)})})(arguments),A&&!x&&ae()),this},remove:function(){return f.each(arguments,function(Ee,Be){for(var we;(we=f.inArray(Be,U,we))>-1;)U.splice(we,1),we<=oe&&oe--}),this},has:function(Ee){return Ee?f.inArray(Ee,U)>-1:U.length>0},empty:function(){return U&&(U=[]),this},disable:function(){return j=z=[],U=A="",this},disabled:function(){return!U},lock:function(){return j=z=[],!A&&!x&&(U=A=""),this},locked:function(){return!!j},fireWith:function(Ee,Be){return j||(Be=Be||[],Be=[Ee,Be.slice?Be.slice():Be],z.push(Be),x||ae()),this},fire:function(){return pe.fireWith(this,arguments),this},fired:function(){return!!P}};return pe};function X(g){return g}function re(g){throw g}function ge(g,x,A,P){var j;try{g&&h(j=g.promise)?j.call(g).done(x).fail(A):g&&h(j=g.then)?j.call(g,x,A):x.apply(void 0,[g].slice(P))}catch(U){A.apply(void 0,[U])}}f.extend({Deferred:function(g){var x=[["notify","progress",f.Callbacks("memory"),f.Callbacks("memory"),2],["resolve","done",f.Callbacks("once memory"),f.Callbacks("once memory"),0,"resolved"],["reject","fail",f.Callbacks("once memory"),f.Callbacks("once memory"),1,"rejected"]],A="pending",P={state:function(){return A},always:function(){return j.done(arguments).fail(arguments),this},catch:function(U){return P.then(null,U)},pipe:function(){var U=arguments;return f.Deferred(function(z){f.each(x,function(oe,ae){var pe=h(U[ae[4]])&&U[ae[4]];j[ae[1]](function(){var Ee=pe&&pe.apply(this,arguments);Ee&&h(Ee.promise)?Ee.promise().progress(z.notify).done(z.resolve).fail(z.reject):z[ae[0]+"With"](this,pe?[Ee]:arguments)})}),U=null}).promise()},then:function(U,z,oe){var ae=0;function pe(Ee,Be,we,Qe){return function(){var Mt=this,or=arguments,zt=function(){var Xr,vs;if(!(Ee<ae)){if(Xr=we.apply(Mt,or),Xr===Be.promise())throw new TypeError("Thenable self-resolution");vs=Xr&&(typeof Xr=="object"||typeof Xr=="function")&&Xr.then,h(vs)?Qe?vs.call(Xr,pe(ae,Be,X,Qe),pe(ae,Be,re,Qe)):(ae++,vs.call(Xr,pe(ae,Be,X,Qe),pe(ae,Be,re,Qe),pe(ae,Be,X,Be.notifyWith))):(we!==X&&(Mt=void 0,or=[Xr]),(Qe||Be.resolveWith)(Mt,or))}},dn=Qe?zt:function(){try{zt()}catch(Xr){f.Deferred.exceptionHook&&f.Deferred.exceptionHook(Xr,dn.error),Ee+1>=ae&&(we!==re&&(Mt=void 0,or=[Xr]),Be.rejectWith(Mt,or))}};Ee?dn():(f.Deferred.getErrorHook?dn.error=f.Deferred.getErrorHook():f.Deferred.getStackHook&&(dn.error=f.Deferred.getStackHook()),t.setTimeout(dn))}}return f.Deferred(function(Ee){x[0][3].add(pe(0,Ee,h(oe)?oe:X,Ee.notifyWith)),x[1][3].add(pe(0,Ee,h(U)?U:X)),x[2][3].add(pe(0,Ee,h(z)?z:re))}).promise()},promise:function(U){return U!=null?f.extend(U,P):P}},j={};return f.each(x,function(U,z){var oe=z[2],ae=z[5];P[z[1]]=oe.add,ae&&oe.add(function(){A=ae},x[3-U][2].disable,x[3-U][3].disable,x[0][2].lock,x[0][3].lock),oe.add(z[3].fire),j[z[0]]=function(){return j[z[0]+"With"](this===j?void 0:this,arguments),this},j[z[0]+"With"]=oe.fireWith}),P.promise(j),g&&g.call(j,j),j},when:function(g){var x=arguments.length,A=x,P=Array(A),j=s.call(arguments),U=f.Deferred(),z=function(oe){return function(ae){P[oe]=this,j[oe]=arguments.length>1?s.call(arguments):ae,--x||U.resolveWith(P,j)}};if(x<=1&&(ge(g,U.done(z(A)).resolve,U.reject,!x),U.state()==="pending"||h(j[A]&&j[A].then)))return U.then();for(;A--;)ge(j[A],z(A),U.reject);return U.promise()}});var Re=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;f.Deferred.exceptionHook=function(g,x){t.console&&t.console.warn&&g&&Re.test(g.name)&&t.console.warn("jQuery.Deferred exception: "+g.message,g.stack,x)},f.readyException=function(g){t.setTimeout(function(){throw g})};var Se=f.Deferred();f.fn.ready=function(g){return Se.then(g).catch(function(x){f.readyException(x)}),this},f.extend({isReady:!1,readyWait:1,ready:function(g){(g===!0?--f.readyWait:f.isReady)||(f.isReady=!0,!(g!==!0&&--f.readyWait>0)&&Se.resolveWith(y,[f]))}}),f.ready.then=Se.then;function ke(){y.removeEventListener("DOMContentLoaded",ke),t.removeEventListener("load",ke),f.ready()}y.readyState==="complete"||y.readyState!=="loading"&&!y.documentElement.doScroll?t.setTimeout(f.ready):(y.addEventListener("DOMContentLoaded",ke),t.addEventListener("load",ke));var qe=function(g,x,A,P,j,U,z){var oe=0,ae=g.length,pe=A==null;if(w(A)==="object"){j=!0;for(oe in A)qe(g,x,oe,A[oe],!0,U,z)}else if(P!==void 0&&(j=!0,h(P)||(z=!0),pe&&(z?(x.call(g,P),x=null):(pe=x,x=function(Ee,Be,we){return pe.call(f(Ee),we)})),x))for(;oe<ae;oe++)x(g[oe],A,z?P:P.call(g[oe],oe,x(g[oe],A)));return j?g:pe?x.call(g):ae?x(g[0],A):U},Pe=/^-ms-/,Me=/-([a-z])/g;function $e(g,x){return x.toUpperCase()}function nt(g){return g.replace(Pe,"ms-").replace(Me,$e)}var Ge=function(g){return g.nodeType===1||g.nodeType===9||!+g.nodeType};function ye(){this.expando=f.expando+ye.uid++}ye.uid=1,ye.prototype={cache:function(g){var x=g[this.expando];return x||(x={},Ge(g)&&(g.nodeType?g[this.expando]=x:Object.defineProperty(g,this.expando,{value:x,configurable:!0}))),x},set:function(g,x,A){var P,j=this.cache(g);if(typeof x=="string")j[nt(x)]=A;else for(P in x)j[nt(P)]=x[P];return j},get:function(g,x){return x===void 0?this.cache(g):g[this.expando]&&g[this.expando][nt(x)]},access:function(g,x,A){return x===void 0||x&&typeof x=="string"&&A===void 0?this.get(g,x):(this.set(g,x,A),A!==void 0?A:x)},remove:function(g,x){var A,P=g[this.expando];if(P!==void 0){if(x!==void 0)for(Array.isArray(x)?x=x.map(nt):(x=nt(x),x=x in P?[x]:x.match(Ne)||[]),A=x.length;A--;)delete P[x[A]];(x===void 0||f.isEmptyObject(P))&&(g.nodeType?g[this.expando]=void 0:delete g[this.expando])}},hasData:function(g){var x=g[this.expando];return x!==void 0&&!f.isEmptyObject(x)}};var Ce=new ye,it=new ye,Et=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,bt=/[A-Z]/g;function pr(g){return g==="true"?!0:g==="false"?!1:g==="null"?null:g===+g+""?+g:Et.test(g)?JSON.parse(g):g}function Ot(g,x,A){var P;if(A===void 0&&g.nodeType===1)if(P="data-"+x.replace(bt,"-$&").toLowerCase(),A=g.getAttribute(P),typeof A=="string"){try{A=pr(A)}catch{}it.set(g,x,A)}else A=void 0;return A}f.extend({hasData:function(g){return it.hasData(g)||Ce.hasData(g)},data:function(g,x,A){return it.access(g,x,A)},removeData:function(g,x){it.remove(g,x)},_data:function(g,x,A){return Ce.access(g,x,A)},_removeData:function(g,x){Ce.remove(g,x)}}),f.fn.extend({data:function(g,x){var A,P,j,U=this[0],z=U&&U.attributes;if(g===void 0){if(this.length&&(j=it.get(U),U.nodeType===1&&!Ce.get(U,"hasDataAttrs"))){for(A=z.length;A--;)z[A]&&(P=z[A].name,P.indexOf("data-")===0&&(P=nt(P.slice(5)),Ot(U,P,j[P])));Ce.set(U,"hasDataAttrs",!0)}return j}return typeof g=="object"?this.each(function(){it.set(this,g)}):qe(this,function(oe){var ae;if(U&&oe===void 0)return ae=it.get(U,g),ae!==void 0||(ae=Ot(U,g),ae!==void 0)?ae:void 0;this.each(function(){it.set(this,g,oe)})},null,x,arguments.length>1,null,!0)},removeData:function(g){return this.each(function(){it.remove(this,g)})}}),f.extend({queue:function(g,x,A){var P;if(g)return x=(x||"fx")+"queue",P=Ce.get(g,x),A&&(!P||Array.isArray(A)?P=Ce.access(g,x,f.makeArray(A)):P.push(A)),P||[]},dequeue:function(g,x){x=x||"fx";var A=f.queue(g,x),P=A.length,j=A.shift(),U=f._queueHooks(g,x),z=function(){f.dequeue(g,x)};j==="inprogress"&&(j=A.shift(),P--),j&&(x==="fx"&&A.unshift("inprogress"),delete U.stop,j.call(g,z,U)),!P&&U&&U.empty.fire()},_queueHooks:function(g,x){var A=x+"queueHooks";return Ce.get(g,A)||Ce.access(g,A,{empty:f.Callbacks("once memory").add(function(){Ce.remove(g,[x+"queue",A])})})}}),f.fn.extend({queue:function(g,x){var A=2;return typeof g!="string"&&(x=g,g="fx",A--),arguments.length<A?f.queue(this[0],g):x===void 0?this:this.each(function(){var P=f.queue(this,g,x);f._queueHooks(this,g),g==="fx"&&P[0]!=="inprogress"&&f.dequeue(this,g)})},dequeue:function(g){return this.each(function(){f.dequeue(this,g)})},clearQueue:function(g){return this.queue(g||"fx",[])},promise:function(g,x){var A,P=1,j=f.Deferred(),U=this,z=this.length,oe=function(){--P||j.resolveWith(U,[U])};for(typeof g!="string"&&(x=g,g=void 0),g=g||"fx";z--;)A=Ce.get(U[z],g+"queueHooks"),A&&A.empty&&(P++,A.empty.add(oe));return oe(),j.promise(x)}});var kr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,mr=new RegExp("^(?:([+-])=|)("+kr+")([a-z%]*)$","i"),ce=["Top","Right","Bottom","Left"],fe=y.documentElement,J=function(g){return f.contains(g.ownerDocument,g)},V={composed:!0};fe.getRootNode&&(J=function(g){return f.contains(g.ownerDocument,g)||g.getRootNode(V)===g.ownerDocument});var _e=function(g,x){return g=x||g,g.style.display==="none"||g.style.display===""&&J(g)&&f.css(g,"display")==="none"};function Xe(g,x,A,P){var j,U,z=20,oe=P?function(){return P.cur()}:function(){return f.css(g,x,"")},ae=oe(),pe=A&&A[3]||(f.cssNumber[x]?"":"px"),Ee=g.nodeType&&(f.cssNumber[x]||pe!=="px"&&+ae)&&mr.exec(f.css(g,x));if(Ee&&Ee[3]!==pe){for(ae=ae/2,pe=pe||Ee[3],Ee=+ae||1;z--;)f.style(g,x,Ee+pe),(1-U)*(1-(U=oe()/ae||.5))<=0&&(z=0),Ee=Ee/U;Ee=Ee*2,f.style(g,x,Ee+pe),A=A||[]}return A&&(Ee=+Ee||+ae||0,j=A[1]?Ee+(A[1]+1)*A[2]:+A[2],P&&(P.unit=pe,P.start=Ee,P.end=j)),j}var dt={};function gt(g){var x,A=g.ownerDocument,P=g.nodeName,j=dt[P];return j||(x=A.body.appendChild(A.createElement(P)),j=f.css(x,"display"),x.parentNode.removeChild(x),j==="none"&&(j="block"),dt[P]=j,j)}function gr(g,x){for(var A,P,j=[],U=0,z=g.length;U<z;U++)P=g[U],P.style&&(A=P.style.display,x?(A==="none"&&(j[U]=Ce.get(P,"display")||null,j[U]||(P.style.display="")),P.style.display===""&&_e(P)&&(j[U]=gt(P))):A!=="none"&&(j[U]="none",Ce.set(P,"display",A)));for(U=0;U<z;U++)j[U]!=null&&(g[U].style.display=j[U]);return g}f.fn.extend({show:function(){return gr(this,!0)},hide:function(){return gr(this)},toggle:function(g){return typeof g=="boolean"?g?this.show():this.hide():this.each(function(){_e(this)?f(this).show():f(this).hide()})}});var Ir=/^(?:checkbox|radio)$/i,Ar=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Gr=/^$|^module$|\/(?:java|ecma)script/i;(function(){var g=y.createDocumentFragment(),x=g.appendChild(y.createElement("div")),A=y.createElement("input");A.setAttribute("type","radio"),A.setAttribute("checked","checked"),A.setAttribute("name","t"),x.appendChild(A),m.checkClone=x.cloneNode(!0).cloneNode(!0).lastChild.checked,x.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!x.cloneNode(!0).lastChild.defaultValue,x.innerHTML="<option></option>",m.option=!!x.lastChild})();var Lt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,m.option||(Lt.optgroup=Lt.option=[1,"<select multiple='multiple'>","</select>"]);function sr(g,x){var A;return typeof g.getElementsByTagName<"u"?A=g.getElementsByTagName(x||"*"):typeof g.querySelectorAll<"u"?A=g.querySelectorAll(x||"*"):A=[],x===void 0||x&&E(g,x)?f.merge([g],A):A}function rn(g,x){for(var A=0,P=g.length;A<P;A++)Ce.set(g[A],"globalEval",!x||Ce.get(x[A],"globalEval"))}var Al=/<|&#?\w+;/;function hs(g,x,A,P,j){for(var U,z,oe,ae,pe,Ee,Be=x.createDocumentFragment(),we=[],Qe=0,Mt=g.length;Qe<Mt;Qe++)if(U=g[Qe],U||U===0)if(w(U)==="object")f.merge(we,U.nodeType?[U]:U);else if(!Al.test(U))we.push(x.createTextNode(U));else{for(z=z||Be.appendChild(x.createElement("div")),oe=(Ar.exec(U)||["",""])[1].toLowerCase(),ae=Lt[oe]||Lt._default,z.innerHTML=ae[1]+f.htmlPrefilter(U)+ae[2],Ee=ae[0];Ee--;)z=z.lastChild;f.merge(we,z.childNodes),z=Be.firstChild,z.textContent=""}for(Be.textContent="",Qe=0;U=we[Qe++];){if(P&&f.inArray(U,P)>-1){j&&j.push(U);continue}if(pe=J(U),z=sr(Be.appendChild(U),"script"),pe&&rn(z),A)for(Ee=0;U=z[Ee++];)Gr.test(U.type||"")&&A.push(U)}return Be}var yi=/^([^.]*)(?:\.(.+)|)/;function Un(){return!0}function Sa(){return!1}function Ha(g,x,A,P,j,U){var z,oe;if(typeof x=="object"){typeof A!="string"&&(P=P||A,A=void 0);for(oe in x)Ha(g,oe,A,P,x[oe],U);return g}if(P==null&&j==null?(j=A,P=A=void 0):j==null&&(typeof A=="string"?(j=P,P=void 0):(j=P,P=A,A=void 0)),j===!1)j=Sa;else if(!j)return g;return U===1&&(z=j,j=function(ae){return f().off(ae),z.apply(this,arguments)},j.guid=z.guid||(z.guid=f.guid++)),g.each(function(){f.event.add(this,x,j,P,A)})}f.event={global:{},add:function(g,x,A,P,j){var U,z,oe,ae,pe,Ee,Be,we,Qe,Mt,or,zt=Ce.get(g);if(Ge(g))for(A.handler&&(U=A,A=U.handler,j=U.selector),j&&f.find.matchesSelector(fe,j),A.guid||(A.guid=f.guid++),(ae=zt.events)||(ae=zt.events=Object.create(null)),(z=zt.handle)||(z=zt.handle=function(dn){return typeof f<"u"&&f.event.triggered!==dn.type?f.event.dispatch.apply(g,arguments):void 0}),x=(x||"").match(Ne)||[""],pe=x.length;pe--;)oe=yi.exec(x[pe])||[],Qe=or=oe[1],Mt=(oe[2]||"").split(".").sort(),Qe&&(Be=f.event.special[Qe]||{},Qe=(j?Be.delegateType:Be.bindType)||Qe,Be=f.event.special[Qe]||{},Ee=f.extend({type:Qe,origType:or,data:P,handler:A,guid:A.guid,selector:j,needsContext:j&&f.expr.match.needsContext.test(j),namespace:Mt.join(".")},U),(we=ae[Qe])||(we=ae[Qe]=[],we.delegateCount=0,(!Be.setup||Be.setup.call(g,P,Mt,z)===!1)&&g.addEventListener&&g.addEventListener(Qe,z)),Be.add&&(Be.add.call(g,Ee),Ee.handler.guid||(Ee.handler.guid=A.guid)),j?we.splice(we.delegateCount++,0,Ee):we.push(Ee),f.event.global[Qe]=!0)},remove:function(g,x,A,P,j){var U,z,oe,ae,pe,Ee,Be,we,Qe,Mt,or,zt=Ce.hasData(g)&&Ce.get(g);if(!(!zt||!(ae=zt.events))){for(x=(x||"").match(Ne)||[""],pe=x.length;pe--;){if(oe=yi.exec(x[pe])||[],Qe=or=oe[1],Mt=(oe[2]||"").split(".").sort(),!Qe){for(Qe in ae)f.event.remove(g,Qe+x[pe],A,P,!0);continue}for(Be=f.event.special[Qe]||{},Qe=(P?Be.delegateType:Be.bindType)||Qe,we=ae[Qe]||[],oe=oe[2]&&new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"),z=U=we.length;U--;)Ee=we[U],(j||or===Ee.origType)&&(!A||A.guid===Ee.guid)&&(!oe||oe.test(Ee.namespace))&&(!P||P===Ee.selector||P==="**"&&Ee.selector)&&(we.splice(U,1),Ee.selector&&we.delegateCount--,Be.remove&&Be.remove.call(g,Ee));z&&!we.length&&((!Be.teardown||Be.teardown.call(g,Mt,zt.handle)===!1)&&f.removeEvent(g,Qe,zt.handle),delete ae[Qe])}f.isEmptyObject(ae)&&Ce.remove(g,"handle events")}},dispatch:function(g){var x,A,P,j,U,z,oe=new Array(arguments.length),ae=f.event.fix(g),pe=(Ce.get(this,"events")||Object.create(null))[ae.type]||[],Ee=f.event.special[ae.type]||{};for(oe[0]=ae,x=1;x<arguments.length;x++)oe[x]=arguments[x];if(ae.delegateTarget=this,!(Ee.preDispatch&&Ee.preDispatch.call(this,ae)===!1)){for(z=f.event.handlers.call(this,ae,pe),x=0;(j=z[x++])&&!ae.isPropagationStopped();)for(ae.currentTarget=j.elem,A=0;(U=j.handlers[A++])&&!ae.isImmediatePropagationStopped();)(!ae.rnamespace||U.namespace===!1||ae.rnamespace.test(U.namespace))&&(ae.handleObj=U,ae.data=U.data,P=((f.event.special[U.origType]||{}).handle||U.handler).apply(j.elem,oe),P!==void 0&&(ae.result=P)===!1&&(ae.preventDefault(),ae.stopPropagation()));return Ee.postDispatch&&Ee.postDispatch.call(this,ae),ae.result}},handlers:function(g,x){var A,P,j,U,z,oe=[],ae=x.delegateCount,pe=g.target;if(ae&&pe.nodeType&&!(g.type==="click"&&g.button>=1)){for(;pe!==this;pe=pe.parentNode||this)if(pe.nodeType===1&&!(g.type==="click"&&pe.disabled===!0)){for(U=[],z={},A=0;A<ae;A++)P=x[A],j=P.selector+" ",z[j]===void 0&&(z[j]=P.needsContext?f(j,this).index(pe)>-1:f.find(j,this,null,[pe]).length),z[j]&&U.push(P);U.length&&oe.push({elem:pe,handlers:U})}}return pe=this,ae<x.length&&oe.push({elem:pe,handlers:x.slice(ae)}),oe},addProp:function(g,x){Object.defineProperty(f.Event.prototype,g,{enumerable:!0,configurable:!0,get:h(x)?function(){if(this.originalEvent)return x(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[g]},set:function(A){Object.defineProperty(this,g,{enumerable:!0,configurable:!0,writable:!0,value:A})}})},fix:function(g){return g[f.expando]?g:new f.Event(g)},special:{load:{noBubble:!0},click:{setup:function(g){var x=this||g;return Ir.test(x.type)&&x.click&&E(x,"input")&&ms(x,"click",!0),!1},trigger:function(g){var x=this||g;return Ir.test(x.type)&&x.click&&E(x,"input")&&ms(x,"click"),!0},_default:function(g){var x=g.target;return Ir.test(x.type)&&x.click&&E(x,"input")&&Ce.get(x,"click")||E(x,"a")}},beforeunload:{postDispatch:function(g){g.result!==void 0&&g.originalEvent&&(g.originalEvent.returnValue=g.result)}}}};function ms(g,x,A){if(!A){Ce.get(g,x)===void 0&&f.event.add(g,x,Un);return}Ce.set(g,x,!1),f.event.add(g,x,{namespace:!1,handler:function(P){var j,U=Ce.get(this,x);if(P.isTrigger&1&&this[x]){if(U)(f.event.special[x]||{}).delegateType&&P.stopPropagation();else if(U=s.call(arguments),Ce.set(this,x,U),this[x](),j=Ce.get(this,x),Ce.set(this,x,!1),U!==j)return P.stopImmediatePropagation(),P.preventDefault(),j}else U&&(Ce.set(this,x,f.event.trigger(U[0],U.slice(1),this)),P.stopPropagation(),P.isImmediatePropagationStopped=Un)}})}f.removeEvent=function(g,x,A){g.removeEventListener&&g.removeEventListener(x,A)},f.Event=function(g,x){if(!(this instanceof f.Event))return new f.Event(g,x);g&&g.type?(this.originalEvent=g,this.type=g.type,this.isDefaultPrevented=g.defaultPrevented||g.defaultPrevented===void 0&&g.returnValue===!1?Un:Sa,this.target=g.target&&g.target.nodeType===3?g.target.parentNode:g.target,this.currentTarget=g.currentTarget,this.relatedTarget=g.relatedTarget):this.type=g,x&&f.extend(this,x),this.timeStamp=g&&g.timeStamp||Date.now(),this[f.expando]=!0},f.Event.prototype={constructor:f.Event,isDefaultPrevented:Sa,isPropagationStopped:Sa,isImmediatePropagationStopped:Sa,isSimulated:!1,preventDefault:function(){var g=this.originalEvent;this.isDefaultPrevented=Un,g&&!this.isSimulated&&g.preventDefault()},stopPropagation:function(){var g=this.originalEvent;this.isPropagationStopped=Un,g&&!this.isSimulated&&g.stopPropagation()},stopImmediatePropagation:function(){var g=this.originalEvent;this.isImmediatePropagationStopped=Un,g&&!this.isSimulated&&g.stopImmediatePropagation(),this.stopPropagation()}},f.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},f.event.addProp),f.each({focus:"focusin",blur:"focusout"},function(g,x){function A(P){if(y.documentMode){var j=Ce.get(this,"handle"),U=f.event.fix(P);U.type=P.type==="focusin"?"focus":"blur",U.isSimulated=!0,j(P),U.target===U.currentTarget&&j(U)}else f.event.simulate(x,P.target,f.event.fix(P))}f.event.special[g]={setup:function(){var P;if(ms(this,g,!0),y.documentMode)P=Ce.get(this,x),P||this.addEventListener(x,A),Ce.set(this,x,(P||0)+1);else return!1},trigger:function(){return ms(this,g),!0},teardown:function(){var P;if(y.documentMode)P=Ce.get(this,x)-1,P?Ce.set(this,x,P):(this.removeEventListener(x,A),Ce.remove(this,x));else return!1},_default:function(P){return Ce.get(P.target,g)},delegateType:x},f.event.special[x]={setup:function(){var P=this.ownerDocument||this.document||this,j=y.documentMode?this:P,U=Ce.get(j,x);U||(y.documentMode?this.addEventListener(x,A):P.addEventListener(g,A,!0)),Ce.set(j,x,(U||0)+1)},teardown:function(){var P=this.ownerDocument||this.document||this,j=y.documentMode?this:P,U=Ce.get(j,x)-1;U?Ce.set(j,x,U):(y.documentMode?this.removeEventListener(x,A):P.removeEventListener(g,A,!0),Ce.remove(j,x))}}}),f.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(g,x){f.event.special[g]={delegateType:x,bindType:x,handle:function(A){var P,j=this,U=A.relatedTarget,z=A.handleObj;return(!U||U!==j&&!f.contains(j,U))&&(A.type=z.origType,P=z.handler.apply(this,arguments),A.type=x),P}}}),f.fn.extend({on:function(g,x,A,P){return Ha(this,g,x,A,P)},one:function(g,x,A,P){return Ha(this,g,x,A,P,1)},off:function(g,x,A){var P,j;if(g&&g.preventDefault&&g.handleObj)return P=g.handleObj,f(g.delegateTarget).off(P.namespace?P.origType+"."+P.namespace:P.origType,P.selector,P.handler),this;if(typeof g=="object"){for(j in g)this.off(j,x,g[j]);return this}return(x===!1||typeof x=="function")&&(A=x,x=void 0),A===!1&&(A=Sa),this.each(function(){f.event.remove(this,g,A,x)})}});var bi=/<script|<style|<link/i,Ol=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function at(g,x){return E(g,"table")&&E(x.nodeType!==11?x:x.firstChild,"tr")&&f(g).children("tbody")[0]||g}function Bt(g){return g.type=(g.getAttribute("type")!==null)+"/"+g.type,g}function Or(g){return(g.type||"").slice(0,5)==="true/"?g.type=g.type.slice(5):g.removeAttribute("type"),g}function Yr(g,x){var A,P,j,U,z,oe,ae;if(x.nodeType===1){if(Ce.hasData(g)&&(U=Ce.get(g),ae=U.events,ae)){Ce.remove(x,"handle events");for(j in ae)for(A=0,P=ae[j].length;A<P;A++)f.event.add(x,j,ae[j][A])}it.hasData(g)&&(z=it.access(g),oe=f.extend({},z),it.set(x,oe))}}function gs(g,x){var A=x.nodeName.toLowerCase();A==="input"&&Ir.test(g.type)?x.checked=g.checked:(A==="input"||A==="textarea")&&(x.defaultValue=g.defaultValue)}function Jr(g,x,A,P){x=o(x);var j,U,z,oe,ae,pe,Ee=0,Be=g.length,we=Be-1,Qe=x[0],Mt=h(Qe);if(Mt||Be>1&&typeof Qe=="string"&&!m.checkClone&&Ol.test(Qe))return g.each(function(or){var zt=g.eq(or);Mt&&(x[0]=Qe.call(this,or,zt.html())),Jr(zt,x,A,P)});if(Be&&(j=hs(x,g[0].ownerDocument,!1,g,P),U=j.firstChild,j.childNodes.length===1&&(j=U),U||P)){for(z=f.map(sr(j,"script"),Bt),oe=z.length;Ee<Be;Ee++)ae=j,Ee!==we&&(ae=f.clone(ae,!0,!0),oe&&f.merge(z,sr(ae,"script"))),A.call(g[Ee],ae,Ee);if(oe)for(pe=z[z.length-1].ownerDocument,f.map(z,Or),Ee=0;Ee<oe;Ee++)ae=z[Ee],Gr.test(ae.type||"")&&!Ce.access(ae,"globalEval")&&f.contains(pe,ae)&&(ae.src&&(ae.type||"").toLowerCase()!=="module"?f._evalUrl&&!ae.noModule&&f._evalUrl(ae.src,{nonce:ae.nonce||ae.getAttribute("nonce")},pe):S(ae.textContent.replace(Ae,""),ae,pe))}return g}function qn(g,x,A){for(var P,j=x?f.filter(x,g):g,U=0;(P=j[U])!=null;U++)!A&&P.nodeType===1&&f.cleanData(sr(P)),P.parentNode&&(A&&J(P)&&rn(sr(P,"script")),P.parentNode.removeChild(P));return g}f.extend({htmlPrefilter:function(g){return g},clone:function(g,x,A){var P,j,U,z,oe=g.cloneNode(!0),ae=J(g);if(!m.noCloneChecked&&(g.nodeType===1||g.nodeType===11)&&!f.isXMLDoc(g))for(z=sr(oe),U=sr(g),P=0,j=U.length;P<j;P++)gs(U[P],z[P]);if(x)if(A)for(U=U||sr(g),z=z||sr(oe),P=0,j=U.length;P<j;P++)Yr(U[P],z[P]);else Yr(g,oe);return z=sr(oe,"script"),z.length>0&&rn(z,!ae&&sr(g,"script")),oe},cleanData:function(g){for(var x,A,P,j=f.event.special,U=0;(A=g[U])!==void 0;U++)if(Ge(A)){if(x=A[Ce.expando]){if(x.events)for(P in x.events)j[P]?f.event.remove(A,P):f.removeEvent(A,P,x.handle);A[Ce.expando]=void 0}A[it.expando]&&(A[it.expando]=void 0)}}}),f.fn.extend({detach:function(g){return qn(this,g,!0)},remove:function(g){return qn(this,g)},text:function(g){return qe(this,function(x){return x===void 0?f.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=x)})},null,g,arguments.length)},append:function(){return Jr(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var x=at(this,g);x.appendChild(g)}})},prepend:function(){return Jr(this,arguments,function(g){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var x=at(this,g);x.insertBefore(g,x.firstChild)}})},before:function(){return Jr(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this)})},after:function(){return Jr(this,arguments,function(g){this.parentNode&&this.parentNode.insertBefore(g,this.nextSibling)})},empty:function(){for(var g,x=0;(g=this[x])!=null;x++)g.nodeType===1&&(f.cleanData(sr(g,!1)),g.textContent="");return this},clone:function(g,x){return g=g??!1,x=x??g,this.map(function(){return f.clone(this,g,x)})},html:function(g){return qe(this,function(x){var A=this[0]||{},P=0,j=this.length;if(x===void 0&&A.nodeType===1)return A.innerHTML;if(typeof x=="string"&&!bi.test(x)&&!Lt[(Ar.exec(x)||["",""])[1].toLowerCase()]){x=f.htmlPrefilter(x);try{for(;P<j;P++)A=this[P]||{},A.nodeType===1&&(f.cleanData(sr(A,!1)),A.innerHTML=x);A=0}catch{}}A&&this.empty().append(x)},null,g,arguments.length)},replaceWith:function(){var g=[];return Jr(this,arguments,function(x){var A=this.parentNode;f.inArray(this,g)<0&&(f.cleanData(sr(this)),A&&A.replaceChild(x,this))},g)}}),f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(g,x){f.fn[g]=function(A){for(var P,j=[],U=f(A),z=U.length-1,oe=0;oe<=z;oe++)P=oe===z?this:this.clone(!0),f(U[oe])[x](P),i.apply(j,P.get());return this.pushStack(j)}});var Vn=new RegExp("^("+kr+")(?!px)[a-z%]+$","i"),wi=/^--/,_i=function(g){var x=g.ownerDocument.defaultView;return(!x||!x.opener)&&(x=t),x.getComputedStyle(g)},HP=function(g,x,A){var P,j,U={};for(j in x)U[j]=g.style[j],g.style[j]=x[j];P=A.call(g);for(j in x)g.style[j]=U[j];return P},lZ=new RegExp(ce.join("|"),"i");(function(){function g(){if(pe){ae.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",pe.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",fe.appendChild(ae).appendChild(pe);var Ee=t.getComputedStyle(pe);A=Ee.top!=="1%",oe=x(Ee.marginLeft)===12,pe.style.right="60%",U=x(Ee.right)===36,P=x(Ee.width)===36,pe.style.position="absolute",j=x(pe.offsetWidth/3)===12,fe.removeChild(ae),pe=null}}function x(Ee){return Math.round(parseFloat(Ee))}var A,P,j,U,z,oe,ae=y.createElement("div"),pe=y.createElement("div");pe.style&&(pe.style.backgroundClip="content-box",pe.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle=pe.style.backgroundClip==="content-box",f.extend(m,{boxSizingReliable:function(){return g(),P},pixelBoxStyles:function(){return g(),U},pixelPosition:function(){return g(),A},reliableMarginLeft:function(){return g(),oe},scrollboxSize:function(){return g(),j},reliableTrDimensions:function(){var Ee,Be,we,Qe;return z==null&&(Ee=y.createElement("table"),Be=y.createElement("tr"),we=y.createElement("div"),Ee.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Be.style.cssText="box-sizing:content-box;border:1px solid",Be.style.height="1px",we.style.height="9px",we.style.display="block",fe.appendChild(Ee).appendChild(Be).appendChild(we),Qe=t.getComputedStyle(Be),z=parseInt(Qe.height,10)+parseInt(Qe.borderTopWidth,10)+parseInt(Qe.borderBottomWidth,10)===Be.offsetHeight,fe.removeChild(Ee)),z}}))})();function pc(g,x,A){var P,j,U,z,oe=wi.test(x),ae=g.style;return A=A||_i(g),A&&(z=A.getPropertyValue(x)||A[x],oe&&z&&(z=z.replace(F,"$1")||void 0),z===""&&!J(g)&&(z=f.style(g,x)),!m.pixelBoxStyles()&&Vn.test(z)&&lZ.test(x)&&(P=ae.width,j=ae.minWidth,U=ae.maxWidth,ae.minWidth=ae.maxWidth=ae.width=z,z=A.width,ae.width=P,ae.minWidth=j,ae.maxWidth=U)),z!==void 0?z+"":z}function zP(g,x){return{get:function(){if(g()){delete this.get;return}return(this.get=x).apply(this,arguments)}}}var WP=["Webkit","Moz","ms"],KP=y.createElement("div").style,GP={};function uZ(g){for(var x=g[0].toUpperCase()+g.slice(1),A=WP.length;A--;)if(g=WP[A]+x,g in KP)return g}function X0(g){var x=f.cssProps[g]||GP[g];return x||(g in KP?g:GP[g]=uZ(g)||g)}var cZ=/^(none|table(?!-c[ea]).+)/,dZ={position:"absolute",visibility:"hidden",display:"block"},YP={letterSpacing:"0",fontWeight:"400"};function JP(g,x,A){var P=mr.exec(x);return P?Math.max(0,P[2]-(A||0))+(P[3]||"px"):x}function Q0(g,x,A,P,j,U){var z=x==="width"?1:0,oe=0,ae=0,pe=0;if(A===(P?"border":"content"))return 0;for(;z<4;z+=2)A==="margin"&&(pe+=f.css(g,A+ce[z],!0,j)),P?(A==="content"&&(ae-=f.css(g,"padding"+ce[z],!0,j)),A!=="margin"&&(ae-=f.css(g,"border"+ce[z]+"Width",!0,j))):(ae+=f.css(g,"padding"+ce[z],!0,j),A!=="padding"?ae+=f.css(g,"border"+ce[z]+"Width",!0,j):oe+=f.css(g,"border"+ce[z]+"Width",!0,j));return!P&&U>=0&&(ae+=Math.max(0,Math.ceil(g["offset"+x[0].toUpperCase()+x.slice(1)]-U-ae-oe-.5))||0),ae+pe}function XP(g,x,A){var P=_i(g),j=!m.boxSizingReliable()||A,U=j&&f.css(g,"boxSizing",!1,P)==="border-box",z=U,oe=pc(g,x,P),ae="offset"+x[0].toUpperCase()+x.slice(1);if(Vn.test(oe)){if(!A)return oe;oe="auto"}return(!m.boxSizingReliable()&&U||!m.reliableTrDimensions()&&E(g,"tr")||oe==="auto"||!parseFloat(oe)&&f.css(g,"display",!1,P)==="inline")&&g.getClientRects().length&&(U=f.css(g,"boxSizing",!1,P)==="border-box",z=ae in g,z&&(oe=g[ae])),oe=parseFloat(oe)||0,oe+Q0(g,x,A||(U?"border":"content"),z,P,oe)+"px"}f.extend({cssHooks:{opacity:{get:function(g,x){if(x){var A=pc(g,"opacity");return A===""?"1":A}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(g,x,A,P){if(!(!g||g.nodeType===3||g.nodeType===8||!g.style)){var j,U,z,oe=nt(x),ae=wi.test(x),pe=g.style;if(ae||(x=X0(oe)),z=f.cssHooks[x]||f.cssHooks[oe],A!==void 0){if(U=typeof A,U==="string"&&(j=mr.exec(A))&&j[1]&&(A=Xe(g,x,j),U="number"),A==null||A!==A)return;U==="number"&&!ae&&(A+=j&&j[3]||(f.cssNumber[oe]?"":"px")),!m.clearCloneStyle&&A===""&&x.indexOf("background")===0&&(pe[x]="inherit"),(!z||!("set"in z)||(A=z.set(g,A,P))!==void 0)&&(ae?pe.setProperty(x,A):pe[x]=A)}else return z&&"get"in z&&(j=z.get(g,!1,P))!==void 0?j:pe[x]}},css:function(g,x,A,P){var j,U,z,oe=nt(x),ae=wi.test(x);return ae||(x=X0(oe)),z=f.cssHooks[x]||f.cssHooks[oe],z&&"get"in z&&(j=z.get(g,!0,A)),j===void 0&&(j=pc(g,x,P)),j==="normal"&&x in YP&&(j=YP[x]),A===""||A?(U=parseFloat(j),A===!0||isFinite(U)?U||0:j):j}}),f.each(["height","width"],function(g,x){f.cssHooks[x]={get:function(A,P,j){if(P)return cZ.test(f.css(A,"display"))&&(!A.getClientRects().length||!A.getBoundingClientRect().width)?HP(A,dZ,function(){return XP(A,x,j)}):XP(A,x,j)},set:function(A,P,j){var U,z=_i(A),oe=!m.scrollboxSize()&&z.position==="absolute",ae=oe||j,pe=ae&&f.css(A,"boxSizing",!1,z)==="border-box",Ee=j?Q0(A,x,j,pe,z):0;return pe&&oe&&(Ee-=Math.ceil(A["offset"+x[0].toUpperCase()+x.slice(1)]-parseFloat(z[x])-Q0(A,x,"border",!1,z)-.5)),Ee&&(U=mr.exec(P))&&(U[3]||"px")!=="px"&&(A.style[x]=P,P=f.css(A,x)),JP(A,P,Ee)}}}),f.cssHooks.marginLeft=zP(m.reliableMarginLeft,function(g,x){if(x)return(parseFloat(pc(g,"marginLeft"))||g.getBoundingClientRect().left-HP(g,{marginLeft:0},function(){return g.getBoundingClientRect().left}))+"px"}),f.each({margin:"",padding:"",border:"Width"},function(g,x){f.cssHooks[g+x]={expand:function(A){for(var P=0,j={},U=typeof A=="string"?A.split(" "):[A];P<4;P++)j[g+ce[P]+x]=U[P]||U[P-2]||U[0];return j}},g!=="margin"&&(f.cssHooks[g+x].set=JP)}),f.fn.extend({css:function(g,x){return qe(this,function(A,P,j){var U,z,oe={},ae=0;if(Array.isArray(P)){for(U=_i(A),z=P.length;ae<z;ae++)oe[P[ae]]=f.css(A,P[ae],!1,U);return oe}return j!==void 0?f.style(A,P,j):f.css(A,P)},g,x,arguments.length>1)}});function Hn(g,x,A,P,j){return new Hn.prototype.init(g,x,A,P,j)}f.Tween=Hn,Hn.prototype={constructor:Hn,init:function(g,x,A,P,j,U){this.elem=g,this.prop=A,this.easing=j||f.easing._default,this.options=x,this.start=this.now=this.cur(),this.end=P,this.unit=U||(f.cssNumber[A]?"":"px")},cur:function(){var g=Hn.propHooks[this.prop];return g&&g.get?g.get(this):Hn.propHooks._default.get(this)},run:function(g){var x,A=Hn.propHooks[this.prop];return this.options.duration?this.pos=x=f.easing[this.easing](g,this.options.duration*g,0,1,this.options.duration):this.pos=x=g,this.now=(this.end-this.start)*x+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),A&&A.set?A.set(this):Hn.propHooks._default.set(this),this}},Hn.prototype.init.prototype=Hn.prototype,Hn.propHooks={_default:{get:function(g){var x;return g.elem.nodeType!==1||g.elem[g.prop]!=null&&g.elem.style[g.prop]==null?g.elem[g.prop]:(x=f.css(g.elem,g.prop,""),!x||x==="auto"?0:x)},set:function(g){f.fx.step[g.prop]?f.fx.step[g.prop](g):g.elem.nodeType===1&&(f.cssHooks[g.prop]||g.elem.style[X0(g.prop)]!=null)?f.style(g.elem,g.prop,g.now+g.unit):g.elem[g.prop]=g.now}}},Hn.propHooks.scrollTop=Hn.propHooks.scrollLeft={set:function(g){g.elem.nodeType&&g.elem.parentNode&&(g.elem[g.prop]=g.now)}},f.easing={linear:function(g){return g},swing:function(g){return .5-Math.cos(g*Math.PI)/2},_default:"swing"},f.fx=Hn.prototype.init,f.fx.step={};var Pl,$p,fZ=/^(?:toggle|show|hide)$/,pZ=/queueHooks$/;function Z0(){$p&&(y.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Z0):t.setTimeout(Z0,f.fx.interval),f.fx.tick())}function QP(){return t.setTimeout(function(){Pl=void 0}),Pl=Date.now()}function Rp(g,x){var A,P=0,j={height:g};for(x=x?1:0;P<4;P+=2-x)A=ce[P],j["margin"+A]=j["padding"+A]=g;return x&&(j.opacity=j.width=g),j}function ZP(g,x,A){for(var P,j=(za.tweeners[x]||[]).concat(za.tweeners["*"]),U=0,z=j.length;U<z;U++)if(P=j[U].call(A,x,g))return P}function hZ(g,x,A){var P,j,U,z,oe,ae,pe,Ee,Be="width"in x||"height"in x,we=this,Qe={},Mt=g.style,or=g.nodeType&&_e(g),zt=Ce.get(g,"fxshow");A.queue||(z=f._queueHooks(g,"fx"),z.unqueued==null&&(z.unqueued=0,oe=z.empty.fire,z.empty.fire=function(){z.unqueued||oe()}),z.unqueued++,we.always(function(){we.always(function(){z.unqueued--,f.queue(g,"fx").length||z.empty.fire()})}));for(P in x)if(j=x[P],fZ.test(j)){if(delete x[P],U=U||j==="toggle",j===(or?"hide":"show"))if(j==="show"&&zt&&zt[P]!==void 0)or=!0;else continue;Qe[P]=zt&&zt[P]||f.style(g,P)}if(ae=!f.isEmptyObject(x),!(!ae&&f.isEmptyObject(Qe))){Be&&g.nodeType===1&&(A.overflow=[Mt.overflow,Mt.overflowX,Mt.overflowY],pe=zt&&zt.display,pe==null&&(pe=Ce.get(g,"display")),Ee=f.css(g,"display"),Ee==="none"&&(pe?Ee=pe:(gr([g],!0),pe=g.style.display||pe,Ee=f.css(g,"display"),gr([g]))),(Ee==="inline"||Ee==="inline-block"&&pe!=null)&&f.css(g,"float")==="none"&&(ae||(we.done(function(){Mt.display=pe}),pe==null&&(Ee=Mt.display,pe=Ee==="none"?"":Ee)),Mt.display="inline-block")),A.overflow&&(Mt.overflow="hidden",we.always(function(){Mt.overflow=A.overflow[0],Mt.overflowX=A.overflow[1],Mt.overflowY=A.overflow[2]})),ae=!1;for(P in Qe)ae||(zt?"hidden"in zt&&(or=zt.hidden):zt=Ce.access(g,"fxshow",{display:pe}),U&&(zt.hidden=!or),or&&gr([g],!0),we.done(function(){or||gr([g]),Ce.remove(g,"fxshow");for(P in Qe)f.style(g,P,Qe[P])})),ae=ZP(or?zt[P]:0,P,we),P in zt||(zt[P]=ae.start,or&&(ae.end=ae.start,ae.start=0))}}function mZ(g,x){var A,P,j,U,z;for(A in g)if(P=nt(A),j=x[P],U=g[A],Array.isArray(U)&&(j=U[1],U=g[A]=U[0]),A!==P&&(g[P]=U,delete g[A]),z=f.cssHooks[P],z&&"expand"in z){U=z.expand(U),delete g[P];for(A in U)A in g||(g[A]=U[A],x[A]=j)}else x[P]=j}function za(g,x,A){var P,j,U=0,z=za.prefilters.length,oe=f.Deferred().always(function(){delete ae.elem}),ae=function(){if(j)return!1;for(var Be=Pl||QP(),we=Math.max(0,pe.startTime+pe.duration-Be),Qe=we/pe.duration||0,Mt=1-Qe,or=0,zt=pe.tweens.length;or<zt;or++)pe.tweens[or].run(Mt);return oe.notifyWith(g,[pe,Mt,we]),Mt<1&&zt?we:(zt||oe.notifyWith(g,[pe,1,0]),oe.resolveWith(g,[pe]),!1)},pe=oe.promise({elem:g,props:f.extend({},x),opts:f.extend(!0,{specialEasing:{},easing:f.easing._default},A),originalProperties:x,originalOptions:A,startTime:Pl||QP(),duration:A.duration,tweens:[],createTween:function(Be,we){var Qe=f.Tween(g,pe.opts,Be,we,pe.opts.specialEasing[Be]||pe.opts.easing);return pe.tweens.push(Qe),Qe},stop:function(Be){var we=0,Qe=Be?pe.tweens.length:0;if(j)return this;for(j=!0;we<Qe;we++)pe.tweens[we].run(1);return Be?(oe.notifyWith(g,[pe,1,0]),oe.resolveWith(g,[pe,Be])):oe.rejectWith(g,[pe,Be]),this}}),Ee=pe.props;for(mZ(Ee,pe.opts.specialEasing);U<z;U++)if(P=za.prefilters[U].call(pe,g,Ee,pe.opts),P)return h(P.stop)&&(f._queueHooks(pe.elem,pe.opts.queue).stop=P.stop.bind(P)),P;return f.map(Ee,ZP,pe),h(pe.opts.start)&&pe.opts.start.call(g,pe),pe.progress(pe.opts.progress).done(pe.opts.done,pe.opts.complete).fail(pe.opts.fail).always(pe.opts.always),f.fx.timer(f.extend(ae,{elem:g,anim:pe,queue:pe.opts.queue})),pe}f.Animation=f.extend(za,{tweeners:{"*":[function(g,x){var A=this.createTween(g,x);return Xe(A.elem,g,mr.exec(x),A),A}]},tweener:function(g,x){h(g)?(x=g,g=["*"]):g=g.match(Ne);for(var A,P=0,j=g.length;P<j;P++)A=g[P],za.tweeners[A]=za.tweeners[A]||[],za.tweeners[A].unshift(x)},prefilters:[hZ],prefilter:function(g,x){x?za.prefilters.unshift(g):za.prefilters.push(g)}}),f.speed=function(g,x,A){var P=g&&typeof g=="object"?f.extend({},g):{complete:A||!A&&x||h(g)&&g,duration:g,easing:A&&x||x&&!h(x)&&x};return f.fx.off?P.duration=0:typeof P.duration!="number"&&(P.duration in f.fx.speeds?P.duration=f.fx.speeds[P.duration]:P.duration=f.fx.speeds._default),(P.queue==null||P.queue===!0)&&(P.queue="fx"),P.old=P.complete,P.complete=function(){h(P.old)&&P.old.call(this),P.queue&&f.dequeue(this,P.queue)},P},f.fn.extend({fadeTo:function(g,x,A,P){return this.filter(_e).css("opacity",0).show().end().animate({opacity:x},g,A,P)},animate:function(g,x,A,P){var j=f.isEmptyObject(g),U=f.speed(x,A,P),z=function(){var oe=za(this,f.extend({},g),U);(j||Ce.get(this,"finish"))&&oe.stop(!0)};return z.finish=z,j||U.queue===!1?this.each(z):this.queue(U.queue,z)},stop:function(g,x,A){var P=function(j){var U=j.stop;delete j.stop,U(A)};return typeof g!="string"&&(A=x,x=g,g=void 0),x&&this.queue(g||"fx",[]),this.each(function(){var j=!0,U=g!=null&&g+"queueHooks",z=f.timers,oe=Ce.get(this);if(U)oe[U]&&oe[U].stop&&P(oe[U]);else for(U in oe)oe[U]&&oe[U].stop&&pZ.test(U)&&P(oe[U]);for(U=z.length;U--;)z[U].elem===this&&(g==null||z[U].queue===g)&&(z[U].anim.stop(A),j=!1,z.splice(U,1));(j||!A)&&f.dequeue(this,g)})},finish:function(g){return g!==!1&&(g=g||"fx"),this.each(function(){var x,A=Ce.get(this),P=A[g+"queue"],j=A[g+"queueHooks"],U=f.timers,z=P?P.length:0;for(A.finish=!0,f.queue(this,g,[]),j&&j.stop&&j.stop.call(this,!0),x=U.length;x--;)U[x].elem===this&&U[x].queue===g&&(U[x].anim.stop(!0),U.splice(x,1));for(x=0;x<z;x++)P[x]&&P[x].finish&&P[x].finish.call(this);delete A.finish})}}),f.each(["toggle","show","hide"],function(g,x){var A=f.fn[x];f.fn[x]=function(P,j,U){return P==null||typeof P=="boolean"?A.apply(this,arguments):this.animate(Rp(x,!0),P,j,U)}}),f.each({slideDown:Rp("show"),slideUp:Rp("hide"),slideToggle:Rp("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(g,x){f.fn[g]=function(A,P,j){return this.animate(x,A,P,j)}}),f.timers=[],f.fx.tick=function(){var g,x=0,A=f.timers;for(Pl=Date.now();x<A.length;x++)g=A[x],!g()&&A[x]===g&&A.splice(x--,1);A.length||f.fx.stop(),Pl=void 0},f.fx.timer=function(g){f.timers.push(g),f.fx.start()},f.fx.interval=13,f.fx.start=function(){$p||($p=!0,Z0())},f.fx.stop=function(){$p=null},f.fx.speeds={slow:600,fast:200,_default:400},f.fn.delay=function(g,x){return g=f.fx&&f.fx.speeds[g]||g,x=x||"fx",this.queue(x,function(A,P){var j=t.setTimeout(A,g);P.stop=function(){t.clearTimeout(j)}})},(function(){var g=y.createElement("input"),x=y.createElement("select"),A=x.appendChild(y.createElement("option"));g.type="checkbox",m.checkOn=g.value!=="",m.optSelected=A.selected,g=y.createElement("input"),g.value="t",g.type="radio",m.radioValue=g.value==="t"})();var e2,hc=f.expr.attrHandle;f.fn.extend({attr:function(g,x){return qe(this,f.attr,g,x,arguments.length>1)},removeAttr:function(g){return this.each(function(){f.removeAttr(this,g)})}}),f.extend({attr:function(g,x,A){var P,j,U=g.nodeType;if(!(U===3||U===8||U===2)){if(typeof g.getAttribute>"u")return f.prop(g,x,A);if((U!==1||!f.isXMLDoc(g))&&(j=f.attrHooks[x.toLowerCase()]||(f.expr.match.bool.test(x)?e2:void 0)),A!==void 0){if(A===null){f.removeAttr(g,x);return}return j&&"set"in j&&(P=j.set(g,A,x))!==void 0?P:(g.setAttribute(x,A+""),A)}return j&&"get"in j&&(P=j.get(g,x))!==null?P:(P=f.find.attr(g,x),P??void 0)}},attrHooks:{type:{set:function(g,x){if(!m.radioValue&&x==="radio"&&E(g,"input")){var A=g.value;return g.setAttribute("type",x),A&&(g.value=A),x}}}},removeAttr:function(g,x){var A,P=0,j=x&&x.match(Ne);if(j&&g.nodeType===1)for(;A=j[P++];)g.removeAttribute(A)}}),e2={set:function(g,x,A){return x===!1?f.removeAttr(g,A):g.setAttribute(A,A),A}},f.each(f.expr.match.bool.source.match(/\w+/g),function(g,x){var A=hc[x]||f.find.attr;hc[x]=function(P,j,U){var z,oe,ae=j.toLowerCase();return U||(oe=hc[ae],hc[ae]=z,z=A(P,j,U)!=null?ae:null,hc[ae]=oe),z}});var gZ=/^(?:input|select|textarea|button)$/i,vZ=/^(?:a|area)$/i;f.fn.extend({prop:function(g,x){return qe(this,f.prop,g,x,arguments.length>1)},removeProp:function(g){return this.each(function(){delete this[f.propFix[g]||g]})}}),f.extend({prop:function(g,x,A){var P,j,U=g.nodeType;if(!(U===3||U===8||U===2))return(U!==1||!f.isXMLDoc(g))&&(x=f.propFix[x]||x,j=f.propHooks[x]),A!==void 0?j&&"set"in j&&(P=j.set(g,A,x))!==void 0?P:g[x]=A:j&&"get"in j&&(P=j.get(g,x))!==null?P:g[x]},propHooks:{tabIndex:{get:function(g){var x=f.find.attr(g,"tabindex");return x?parseInt(x,10):gZ.test(g.nodeName)||vZ.test(g.nodeName)&&g.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(f.propHooks.selected={get:function(g){var x=g.parentNode;return x&&x.parentNode&&x.parentNode.selectedIndex,null},set:function(g){var x=g.parentNode;x&&(x.selectedIndex,x.parentNode&&x.parentNode.selectedIndex)}}),f.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){f.propFix[this.toLowerCase()]=this});function Si(g){var x=g.match(Ne)||[];return x.join(" ")}function Ti(g){return g.getAttribute&&g.getAttribute("class")||""}function eb(g){return Array.isArray(g)?g:typeof g=="string"?g.match(Ne)||[]:[]}f.fn.extend({addClass:function(g){var x,A,P,j,U,z;return h(g)?this.each(function(oe){f(this).addClass(g.call(this,oe,Ti(this)))}):(x=eb(g),x.length?this.each(function(){if(P=Ti(this),A=this.nodeType===1&&" "+Si(P)+" ",A){for(U=0;U<x.length;U++)j=x[U],A.indexOf(" "+j+" ")<0&&(A+=j+" ");z=Si(A),P!==z&&this.setAttribute("class",z)}}):this)},removeClass:function(g){var x,A,P,j,U,z;return h(g)?this.each(function(oe){f(this).removeClass(g.call(this,oe,Ti(this)))}):arguments.length?(x=eb(g),x.length?this.each(function(){if(P=Ti(this),A=this.nodeType===1&&" "+Si(P)+" ",A){for(U=0;U<x.length;U++)for(j=x[U];A.indexOf(" "+j+" ")>-1;)A=A.replace(" "+j+" "," ");z=Si(A),P!==z&&this.setAttribute("class",z)}}):this):this.attr("class","")},toggleClass:function(g,x){var A,P,j,U,z=typeof g,oe=z==="string"||Array.isArray(g);return h(g)?this.each(function(ae){f(this).toggleClass(g.call(this,ae,Ti(this),x),x)}):typeof x=="boolean"&&oe?x?this.addClass(g):this.removeClass(g):(A=eb(g),this.each(function(){if(oe)for(U=f(this),j=0;j<A.length;j++)P=A[j],U.hasClass(P)?U.removeClass(P):U.addClass(P);else(g===void 0||z==="boolean")&&(P=Ti(this),P&&Ce.set(this,"__className__",P),this.setAttribute&&this.setAttribute("class",P||g===!1?"":Ce.get(this,"__className__")||""))}))},hasClass:function(g){var x,A,P=0;for(x=" "+g+" ";A=this[P++];)if(A.nodeType===1&&(" "+Si(Ti(A))+" ").indexOf(x)>-1)return!0;return!1}});var yZ=/\r/g;f.fn.extend({val:function(g){var x,A,P,j=this[0];return arguments.length?(P=h(g),this.each(function(U){var z;this.nodeType===1&&(P?z=g.call(this,U,f(this).val()):z=g,z==null?z="":typeof z=="number"?z+="":Array.isArray(z)&&(z=f.map(z,function(oe){return oe==null?"":oe+""})),x=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()],(!x||!("set"in x)||x.set(this,z,"value")===void 0)&&(this.value=z))})):j?(x=f.valHooks[j.type]||f.valHooks[j.nodeName.toLowerCase()],x&&"get"in x&&(A=x.get(j,"value"))!==void 0?A:(A=j.value,typeof A=="string"?A.replace(yZ,""):A??"")):void 0}}),f.extend({valHooks:{option:{get:function(g){var x=f.find.attr(g,"value");return x??Si(f.text(g))}},select:{get:function(g){var x,A,P,j=g.options,U=g.selectedIndex,z=g.type==="select-one",oe=z?null:[],ae=z?U+1:j.length;for(U<0?P=ae:P=z?U:0;P<ae;P++)if(A=j[P],(A.selected||P===U)&&!A.disabled&&(!A.parentNode.disabled||!E(A.parentNode,"optgroup"))){if(x=f(A).val(),z)return x;oe.push(x)}return oe},set:function(g,x){for(var A,P,j=g.options,U=f.makeArray(x),z=j.length;z--;)P=j[z],(P.selected=f.inArray(f.valHooks.option.get(P),U)>-1)&&(A=!0);return A||(g.selectedIndex=-1),U}}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(g,x){if(Array.isArray(x))return g.checked=f.inArray(f(g).val(),x)>-1}},m.checkOn||(f.valHooks[this].get=function(g){return g.getAttribute("value")===null?"on":g.value})});var mc=t.location,t2={guid:Date.now()},tb=/\?/;f.parseXML=function(g){var x,A;if(!g||typeof g!="string")return null;try{x=new t.DOMParser().parseFromString(g,"text/xml")}catch{}return A=x&&x.getElementsByTagName("parsererror")[0],(!x||A)&&f.error("Invalid XML: "+(A?f.map(A.childNodes,function(P){return P.textContent}).join(`
`):g)),x};var r2=/^(?:focusinfocus|focusoutblur)$/,n2=function(g){g.stopPropagation()};f.extend(f.event,{trigger:function(g,x,A,P){var j,U,z,oe,ae,pe,Ee,Be,we=[A||y],Qe=d.call(g,"type")?g.type:g,Mt=d.call(g,"namespace")?g.namespace.split("."):[];if(U=Be=z=A=A||y,!(A.nodeType===3||A.nodeType===8)&&!r2.test(Qe+f.event.triggered)&&(Qe.indexOf(".")>-1&&(Mt=Qe.split("."),Qe=Mt.shift(),Mt.sort()),ae=Qe.indexOf(":")<0&&"on"+Qe,g=g[f.expando]?g:new f.Event(Qe,typeof g=="object"&&g),g.isTrigger=P?2:3,g.namespace=Mt.join("."),g.rnamespace=g.namespace?new RegExp("(^|\\.)"+Mt.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,g.result=void 0,g.target||(g.target=A),x=x==null?[g]:f.makeArray(x,[g]),Ee=f.event.special[Qe]||{},!(!P&&Ee.trigger&&Ee.trigger.apply(A,x)===!1))){if(!P&&!Ee.noBubble&&!v(A)){for(oe=Ee.delegateType||Qe,r2.test(oe+Qe)||(U=U.parentNode);U;U=U.parentNode)we.push(U),z=U;z===(A.ownerDocument||y)&&we.push(z.defaultView||z.parentWindow||t)}for(j=0;(U=we[j++])&&!g.isPropagationStopped();)Be=U,g.type=j>1?oe:Ee.bindType||Qe,pe=(Ce.get(U,"events")||Object.create(null))[g.type]&&Ce.get(U,"handle"),pe&&pe.apply(U,x),pe=ae&&U[ae],pe&&pe.apply&&Ge(U)&&(g.result=pe.apply(U,x),g.result===!1&&g.preventDefault());return g.type=Qe,!P&&!g.isDefaultPrevented()&&(!Ee._default||Ee._default.apply(we.pop(),x)===!1)&&Ge(A)&&ae&&h(A[Qe])&&!v(A)&&(z=A[ae],z&&(A[ae]=null),f.event.triggered=Qe,g.isPropagationStopped()&&Be.addEventListener(Qe,n2),A[Qe](),g.isPropagationStopped()&&Be.removeEventListener(Qe,n2),f.event.triggered=void 0,z&&(A[ae]=z)),g.result}},simulate:function(g,x,A){var P=f.extend(new f.Event,A,{type:g,isSimulated:!0});f.event.trigger(P,null,x)}}),f.fn.extend({trigger:function(g,x){return this.each(function(){f.event.trigger(g,x,this)})},triggerHandler:function(g,x){var A=this[0];if(A)return f.event.trigger(g,x,A,!0)}});var bZ=/\[\]$/,a2=/\r?\n/g,wZ=/^(?:submit|button|image|reset|file)$/i,_Z=/^(?:input|select|textarea|keygen)/i;function rb(g,x,A,P){var j;if(Array.isArray(x))f.each(x,function(U,z){A||bZ.test(g)?P(g,z):rb(g+"["+(typeof z=="object"&&z!=null?U:"")+"]",z,A,P)});else if(!A&&w(x)==="object")for(j in x)rb(g+"["+j+"]",x[j],A,P);else P(g,x)}f.param=function(g,x){var A,P=[],j=function(U,z){var oe=h(z)?z():z;P[P.length]=encodeURIComponent(U)+"="+encodeURIComponent(oe??"")};if(g==null)return"";if(Array.isArray(g)||g.jquery&&!f.isPlainObject(g))f.each(g,function(){j(this.name,this.value)});else for(A in g)rb(A,g[A],x,j);return P.join("&")},f.fn.extend({serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var g=f.prop(this,"elements");return g?f.makeArray(g):this}).filter(function(){var g=this.type;return this.name&&!f(this).is(":disabled")&&_Z.test(this.nodeName)&&!wZ.test(g)&&(this.checked||!Ir.test(g))}).map(function(g,x){var A=f(this).val();return A==null?null:Array.isArray(A)?f.map(A,function(P){return{name:x.name,value:P.replace(a2,`\r
`)}}):{name:x.name,value:A.replace(a2,`\r
`)}}).get()}});var SZ=/%20/g,TZ=/#.*$/,xZ=/([?&])_=[^&]*/,CZ=/^(.*?):[ \t]*([^\r\n]*)$/mg,kZ=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,IZ=/^(?:GET|HEAD)$/,AZ=/^\/\//,s2={},nb={},o2="*/".concat("*"),ab=y.createElement("a");ab.href=mc.href;function i2(g){return function(x,A){typeof x!="string"&&(A=x,x="*");var P,j=0,U=x.toLowerCase().match(Ne)||[];if(h(A))for(;P=U[j++];)P[0]==="+"?(P=P.slice(1)||"*",(g[P]=g[P]||[]).unshift(A)):(g[P]=g[P]||[]).push(A)}}function l2(g,x,A,P){var j={},U=g===nb;function z(oe){var ae;return j[oe]=!0,f.each(g[oe]||[],function(pe,Ee){var Be=Ee(x,A,P);if(typeof Be=="string"&&!U&&!j[Be])return x.dataTypes.unshift(Be),z(Be),!1;if(U)return!(ae=Be)}),ae}return z(x.dataTypes[0])||!j["*"]&&z("*")}function sb(g,x){var A,P,j=f.ajaxSettings.flatOptions||{};for(A in x)x[A]!==void 0&&((j[A]?g:P||(P={}))[A]=x[A]);return P&&f.extend(!0,g,P),g}function OZ(g,x,A){for(var P,j,U,z,oe=g.contents,ae=g.dataTypes;ae[0]==="*";)ae.shift(),P===void 0&&(P=g.mimeType||x.getResponseHeader("Content-Type"));if(P){for(j in oe)if(oe[j]&&oe[j].test(P)){ae.unshift(j);break}}if(ae[0]in A)U=ae[0];else{for(j in A){if(!ae[0]||g.converters[j+" "+ae[0]]){U=j;break}z||(z=j)}U=U||z}if(U)return U!==ae[0]&&ae.unshift(U),A[U]}function PZ(g,x,A,P){var j,U,z,oe,ae,pe={},Ee=g.dataTypes.slice();if(Ee[1])for(z in g.converters)pe[z.toLowerCase()]=g.converters[z];for(U=Ee.shift();U;)if(g.responseFields[U]&&(A[g.responseFields[U]]=x),!ae&&P&&g.dataFilter&&(x=g.dataFilter(x,g.dataType)),ae=U,U=Ee.shift(),U){if(U==="*")U=ae;else if(ae!=="*"&&ae!==U){if(z=pe[ae+" "+U]||pe["* "+U],!z){for(j in pe)if(oe=j.split(" "),oe[1]===U&&(z=pe[ae+" "+oe[0]]||pe["* "+oe[0]],z)){z===!0?z=pe[j]:pe[j]!==!0&&(U=oe[0],Ee.unshift(oe[1]));break}}if(z!==!0)if(z&&g.throws)x=z(x);else try{x=z(x)}catch(Be){return{state:"parsererror",error:z?Be:"No conversion from "+ae+" to "+U}}}}return{state:"success",data:x}}f.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mc.href,type:"GET",isLocal:kZ.test(mc.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":o2,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":f.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(g,x){return x?sb(sb(g,f.ajaxSettings),x):sb(f.ajaxSettings,g)},ajaxPrefilter:i2(s2),ajaxTransport:i2(nb),ajax:function(g,x){typeof g=="object"&&(x=g,g=void 0),x=x||{};var A,P,j,U,z,oe,ae,pe,Ee,Be,we=f.ajaxSetup({},x),Qe=we.context||we,Mt=we.context&&(Qe.nodeType||Qe.jquery)?f(Qe):f.event,or=f.Deferred(),zt=f.Callbacks("once memory"),dn=we.statusCode||{},Xr={},vs={},ys="canceled",tr={readyState:0,getResponseHeader:function(ur){var Br;if(ae){if(!U)for(U={};Br=CZ.exec(j);)U[Br[1].toLowerCase()+" "]=(U[Br[1].toLowerCase()+" "]||[]).concat(Br[2]);Br=U[ur.toLowerCase()+" "]}return Br==null?null:Br.join(", ")},getAllResponseHeaders:function(){return ae?j:null},setRequestHeader:function(ur,Br){return ae==null&&(ur=vs[ur.toLowerCase()]=vs[ur.toLowerCase()]||ur,Xr[ur]=Br),this},overrideMimeType:function(ur){return ae==null&&(we.mimeType=ur),this},statusCode:function(ur){var Br;if(ur)if(ae)tr.always(ur[tr.status]);else for(Br in ur)dn[Br]=[dn[Br],ur[Br]];return this},abort:function(ur){var Br=ur||ys;return A&&A.abort(Br),xi(0,Br),this}};if(or.promise(tr),we.url=((g||we.url||mc.href)+"").replace(AZ,mc.protocol+"//"),we.type=x.method||x.type||we.method||we.type,we.dataTypes=(we.dataType||"*").toLowerCase().match(Ne)||[""],we.crossDomain==null){oe=y.createElement("a");try{oe.href=we.url,oe.href=oe.href,we.crossDomain=ab.protocol+"//"+ab.host!=oe.protocol+"//"+oe.host}catch{we.crossDomain=!0}}if(we.data&&we.processData&&typeof we.data!="string"&&(we.data=f.param(we.data,we.traditional)),l2(s2,we,x,tr),ae)return tr;pe=f.event&&we.global,pe&&f.active++===0&&f.event.trigger("ajaxStart"),we.type=we.type.toUpperCase(),we.hasContent=!IZ.test(we.type),P=we.url.replace(TZ,""),we.hasContent?we.data&&we.processData&&(we.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(we.data=we.data.replace(SZ,"+")):(Be=we.url.slice(P.length),we.data&&(we.processData||typeof we.data=="string")&&(P+=(tb.test(P)?"&":"?")+we.data,delete we.data),we.cache===!1&&(P=P.replace(xZ,"$1"),Be=(tb.test(P)?"&":"?")+"_="+t2.guid+++Be),we.url=P+Be),we.ifModified&&(f.lastModified[P]&&tr.setRequestHeader("If-Modified-Since",f.lastModified[P]),f.etag[P]&&tr.setRequestHeader("If-None-Match",f.etag[P])),(we.data&&we.hasContent&&we.contentType!==!1||x.contentType)&&tr.setRequestHeader("Content-Type",we.contentType),tr.setRequestHeader("Accept",we.dataTypes[0]&&we.accepts[we.dataTypes[0]]?we.accepts[we.dataTypes[0]]+(we.dataTypes[0]!=="*"?", "+o2+"; q=0.01":""):we.accepts["*"]);for(Ee in we.headers)tr.setRequestHeader(Ee,we.headers[Ee]);if(we.beforeSend&&(we.beforeSend.call(Qe,tr,we)===!1||ae))return tr.abort();if(ys="abort",zt.add(we.complete),tr.done(we.success),tr.fail(we.error),A=l2(nb,we,x,tr),!A)xi(-1,"No Transport");else{if(tr.readyState=1,pe&&Mt.trigger("ajaxSend",[tr,we]),ae)return tr;we.async&&we.timeout>0&&(z=t.setTimeout(function(){tr.abort("timeout")},we.timeout));try{ae=!1,A.send(Xr,xi)}catch(ur){if(ae)throw ur;xi(-1,ur)}}function xi(ur,Br,vc,ib){var bs,yc,ws,Co,ko,Ta=Br;ae||(ae=!0,z&&t.clearTimeout(z),A=void 0,j=ib||"",tr.readyState=ur>0?4:0,bs=ur>=200&&ur<300||ur===304,vc&&(Co=OZ(we,tr,vc)),!bs&&f.inArray("script",we.dataTypes)>-1&&f.inArray("json",we.dataTypes)<0&&(we.converters["text script"]=function(){}),Co=PZ(we,Co,tr,bs),bs?(we.ifModified&&(ko=tr.getResponseHeader("Last-Modified"),ko&&(f.lastModified[P]=ko),ko=tr.getResponseHeader("etag"),ko&&(f.etag[P]=ko)),ur===204||we.type==="HEAD"?Ta="nocontent":ur===304?Ta="notmodified":(Ta=Co.state,yc=Co.data,ws=Co.error,bs=!ws)):(ws=Ta,(ur||!Ta)&&(Ta="error",ur<0&&(ur=0))),tr.status=ur,tr.statusText=(Br||Ta)+"",bs?or.resolveWith(Qe,[yc,Ta,tr]):or.rejectWith(Qe,[tr,Ta,ws]),tr.statusCode(dn),dn=void 0,pe&&Mt.trigger(bs?"ajaxSuccess":"ajaxError",[tr,we,bs?yc:ws]),zt.fireWith(Qe,[tr,Ta]),pe&&(Mt.trigger("ajaxComplete",[tr,we]),--f.active||f.event.trigger("ajaxStop")))}return tr},getJSON:function(g,x,A){return f.get(g,x,A,"json")},getScript:function(g,x){return f.get(g,void 0,x,"script")}}),f.each(["get","post"],function(g,x){f[x]=function(A,P,j,U){return h(P)&&(U=U||j,j=P,P=void 0),f.ajax(f.extend({url:A,type:x,dataType:U,data:P,success:j},f.isPlainObject(A)&&A))}}),f.ajaxPrefilter(function(g){var x;for(x in g.headers)x.toLowerCase()==="content-type"&&(g.contentType=g.headers[x]||"")}),f._evalUrl=function(g,x,A){return f.ajax({url:g,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(P){f.globalEval(P,x,A)}})},f.fn.extend({wrapAll:function(g){var x;return this[0]&&(h(g)&&(g=g.call(this[0])),x=f(g,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&x.insertBefore(this[0]),x.map(function(){for(var A=this;A.firstElementChild;)A=A.firstElementChild;return A}).append(this)),this},wrapInner:function(g){return h(g)?this.each(function(x){f(this).wrapInner(g.call(this,x))}):this.each(function(){var x=f(this),A=x.contents();A.length?A.wrapAll(g):x.append(g)})},wrap:function(g){var x=h(g);return this.each(function(A){f(this).wrapAll(x?g.call(this,A):g)})},unwrap:function(g){return this.parent(g).not("body").each(function(){f(this).replaceWith(this.childNodes)}),this}}),f.expr.pseudos.hidden=function(g){return!f.expr.pseudos.visible(g)},f.expr.pseudos.visible=function(g){return!!(g.offsetWidth||g.offsetHeight||g.getClientRects().length)},f.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var EZ={0:200,1223:204},gc=f.ajaxSettings.xhr();m.cors=!!gc&&"withCredentials"in gc,m.ajax=gc=!!gc,f.ajaxTransport(function(g){var x,A;if(m.cors||gc&&!g.crossDomain)return{send:function(P,j){var U,z=g.xhr();if(z.open(g.type,g.url,g.async,g.username,g.password),g.xhrFields)for(U in g.xhrFields)z[U]=g.xhrFields[U];g.mimeType&&z.overrideMimeType&&z.overrideMimeType(g.mimeType),!g.crossDomain&&!P["X-Requested-With"]&&(P["X-Requested-With"]="XMLHttpRequest");for(U in P)z.setRequestHeader(U,P[U]);x=function(oe){return function(){x&&(x=A=z.onload=z.onerror=z.onabort=z.ontimeout=z.onreadystatechange=null,oe==="abort"?z.abort():oe==="error"?typeof z.status!="number"?j(0,"error"):j(z.status,z.statusText):j(EZ[z.status]||z.status,z.statusText,(z.responseType||"text")!=="text"||typeof z.responseText!="string"?{binary:z.response}:{text:z.responseText},z.getAllResponseHeaders()))}},z.onload=x(),A=z.onerror=z.ontimeout=x("error"),z.onabort!==void 0?z.onabort=A:z.onreadystatechange=function(){z.readyState===4&&t.setTimeout(function(){x&&A()})},x=x("abort");try{z.send(g.hasContent&&g.data||null)}catch(oe){if(x)throw oe}},abort:function(){x&&x()}}}),f.ajaxPrefilter(function(g){g.crossDomain&&(g.contents.script=!1)}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(g){return f.globalEval(g),g}}}),f.ajaxPrefilter("script",function(g){g.cache===void 0&&(g.cache=!1),g.crossDomain&&(g.type="GET")}),f.ajaxTransport("script",function(g){if(g.crossDomain||g.scriptAttrs){var x,A;return{send:function(P,j){x=f("<script>").attr(g.scriptAttrs||{}).prop({charset:g.scriptCharset,src:g.url}).on("load error",A=function(U){x.remove(),A=null,U&&j(U.type==="error"?404:200,U.type)}),y.head.appendChild(x[0])},abort:function(){A&&A()}}}});var u2=[],ob=/(=)\?(?=&|$)|\?\?/;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var g=u2.pop()||f.expando+"_"+t2.guid++;return this[g]=!0,g}}),f.ajaxPrefilter("json jsonp",function(g,x,A){var P,j,U,z=g.jsonp!==!1&&(ob.test(g.url)?"url":typeof g.data=="string"&&(g.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&ob.test(g.data)&&"data");if(z||g.dataTypes[0]==="jsonp")return P=g.jsonpCallback=h(g.jsonpCallback)?g.jsonpCallback():g.jsonpCallback,z?g[z]=g[z].replace(ob,"$1"+P):g.jsonp!==!1&&(g.url+=(tb.test(g.url)?"&":"?")+g.jsonp+"="+P),g.converters["script json"]=function(){return U||f.error(P+" was not called"),U[0]},g.dataTypes[0]="json",j=t[P],t[P]=function(){U=arguments},A.always(function(){j===void 0?f(t).removeProp(P):t[P]=j,g[P]&&(g.jsonpCallback=x.jsonpCallback,u2.push(P)),U&&h(j)&&j(U[0]),U=j=void 0}),"script"}),m.createHTMLDocument=(function(){var g=y.implementation.createHTMLDocument("").body;return g.innerHTML="<form></form><form></form>",g.childNodes.length===2})(),f.parseHTML=function(g,x,A){if(typeof g!="string")return[];typeof x=="boolean"&&(A=x,x=!1);var P,j,U;return x||(m.createHTMLDocument?(x=y.implementation.createHTMLDocument(""),P=x.createElement("base"),P.href=y.location.href,x.head.appendChild(P)):x=y),j=se.exec(g),U=!A&&[],j?[x.createElement(j[1])]:(j=hs([g],x,U),U&&U.length&&f(U).remove(),f.merge([],j.childNodes))},f.fn.load=function(g,x,A){var P,j,U,z=this,oe=g.indexOf(" ");return oe>-1&&(P=Si(g.slice(oe)),g=g.slice(0,oe)),h(x)?(A=x,x=void 0):x&&typeof x=="object"&&(j="POST"),z.length>0&&f.ajax({url:g,type:j||"GET",dataType:"html",data:x}).done(function(ae){U=arguments,z.html(P?f("<div>").append(f.parseHTML(ae)).find(P):ae)}).always(A&&function(ae,pe){z.each(function(){A.apply(this,U||[ae.responseText,pe,ae])})}),this},f.expr.pseudos.animated=function(g){return f.grep(f.timers,function(x){return g===x.elem}).length},f.offset={setOffset:function(g,x,A){var P,j,U,z,oe,ae,pe,Ee=f.css(g,"position"),Be=f(g),we={};Ee==="static"&&(g.style.position="relative"),oe=Be.offset(),U=f.css(g,"top"),ae=f.css(g,"left"),pe=(Ee==="absolute"||Ee==="fixed")&&(U+ae).indexOf("auto")>-1,pe?(P=Be.position(),z=P.top,j=P.left):(z=parseFloat(U)||0,j=parseFloat(ae)||0),h(x)&&(x=x.call(g,A,f.extend({},oe))),x.top!=null&&(we.top=x.top-oe.top+z),x.left!=null&&(we.left=x.left-oe.left+j),"using"in x?x.using.call(g,we):Be.css(we)}},f.fn.extend({offset:function(g){if(arguments.length)return g===void 0?this:this.each(function(j){f.offset.setOffset(this,g,j)});var x,A,P=this[0];if(P)return P.getClientRects().length?(x=P.getBoundingClientRect(),A=P.ownerDocument.defaultView,{top:x.top+A.pageYOffset,left:x.left+A.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var g,x,A,P=this[0],j={top:0,left:0};if(f.css(P,"position")==="fixed")x=P.getBoundingClientRect();else{for(x=this.offset(),A=P.ownerDocument,g=P.offsetParent||A.documentElement;g&&(g===A.body||g===A.documentElement)&&f.css(g,"position")==="static";)g=g.parentNode;g&&g!==P&&g.nodeType===1&&(j=f(g).offset(),j.top+=f.css(g,"borderTopWidth",!0),j.left+=f.css(g,"borderLeftWidth",!0))}return{top:x.top-j.top-f.css(P,"marginTop",!0),left:x.left-j.left-f.css(P,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var g=this.offsetParent;g&&f.css(g,"position")==="static";)g=g.offsetParent;return g||fe})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(g,x){var A=x==="pageYOffset";f.fn[g]=function(P){return qe(this,function(j,U,z){var oe;if(v(j)?oe=j:j.nodeType===9&&(oe=j.defaultView),z===void 0)return oe?oe[x]:j[U];oe?oe.scrollTo(A?oe.pageXOffset:z,A?z:oe.pageYOffset):j[U]=z},g,P,arguments.length)}}),f.each(["top","left"],function(g,x){f.cssHooks[x]=zP(m.pixelPosition,function(A,P){if(P)return P=pc(A,x),Vn.test(P)?f(A).position()[x]+"px":P})}),f.each({Height:"height",Width:"width"},function(g,x){f.each({padding:"inner"+g,content:x,"":"outer"+g},function(A,P){f.fn[P]=function(j,U){var z=arguments.length&&(A||typeof j!="boolean"),oe=A||(j===!0||U===!0?"margin":"border");return qe(this,function(ae,pe,Ee){var Be;return v(ae)?P.indexOf("outer")===0?ae["inner"+g]:ae.document.documentElement["client"+g]:ae.nodeType===9?(Be=ae.documentElement,Math.max(ae.body["scroll"+g],Be["scroll"+g],ae.body["offset"+g],Be["offset"+g],Be["client"+g])):Ee===void 0?f.css(ae,pe,oe):f.style(ae,pe,Ee,oe)},x,z?j:void 0,z)}})}),f.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(g,x){f.fn[x]=function(A){return this.on(x,A)}}),f.fn.extend({bind:function(g,x,A){return this.on(g,null,x,A)},unbind:function(g,x){return this.off(g,null,x)},delegate:function(g,x,A,P){return this.on(x,g,A,P)},undelegate:function(g,x,A){return arguments.length===1?this.off(g,"**"):this.off(x,g||"**",A)},hover:function(g,x){return this.on("mouseenter",g).on("mouseleave",x||g)}}),f.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(g,x){f.fn[x]=function(A,P){return arguments.length>0?this.on(x,null,A,P):this.trigger(x)}});var $Z=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;f.proxy=function(g,x){var A,P,j;if(typeof x=="string"&&(A=g[x],x=g,g=A),!!h(g))return P=s.call(arguments,2),j=function(){return g.apply(x||this,P.concat(s.call(arguments)))},j.guid=g.guid=g.guid||f.guid++,j},f.holdReady=function(g){g?f.readyWait++:f.ready(!0)},f.isArray=Array.isArray,f.parseJSON=JSON.parse,f.nodeName=E,f.isFunction=h,f.isWindow=v,f.camelCase=nt,f.type=w,f.now=Date.now,f.isNumeric=function(g){var x=f.type(g);return(x==="number"||x==="string")&&!isNaN(g-parseFloat(g))},f.trim=function(g){return g==null?"":(g+"").replace($Z,"$1")};var RZ=t.jQuery,LZ=t.$;return f.noConflict=function(g){return t.$===f&&(t.$=LZ),g&&t.jQuery===f&&(t.jQuery=RZ),f},typeof r>"u"&&(t.jQuery=t.$=f),f})})(cd)),cd.exports}var a4=n4();const I=Sn(a4),s4=(e=location.href)=>/.+1688\.com\/offer\/\d+\.htm/.test(e),o4=(e=location.href)=>/cart\.1688\.com\/cart\.htm/.test(e),i4=(e=location.href)=>/order\.1688\.com\/order\/(smart_make_order|smart_commit_order)\.htm|1688\.com\/page\/placeOrder\.html/.test(e),l4=(e=location.href)=>/trade\.1688\.com\/order\/trade_flow\.htm|1688\.com\/page\/cashier\.html/.test(e),u4=(e=location.href)=>/air\.1688\.com\/app\/ctf-page\/(pay-result|payment-cashier-pc-air)\/(pay-result|cashier)\.htm/.test(e),c4=(e=location.href)=>/s\.1688\.com\/(selloffer\/offer_search\.htm|youyuan\/index\.htm\?tab=imageSearch)/.test(e),d4=e=>e.includes(`extId=${t4}`);function f4(e){if(!e)return{};const t=e.skuModel.skuInfoMap||{},r=e.skuModel.skuProps||[],a=(e.skuModel.skuPriceScale||"").split("-"),s=Math.max(...a),o={},i={};for(const l of r){const u=l.value;for(const c of u){const d=c.name;i[d]=c.imageUrl}}for(const l in t){const u=t[l],c=l.split("&gt;");for(const d of c)i[d]&&(u.imageUrl=i[d]);u.price||(u.price=s),o[u.specId]=u}return o}function p4(){if(I(".gyp-order-price-text").length>0)return h4();if(I(".total-seletion-count").length>0)return m4();const e=I(".total-count").text().replace(/\D/g,""),t=I(".total-price").find(".value").text().replace(/[^0-9.]/g,""),r=I(".postage-value").text().replace(/[^0-9.]/g,"");return{totalCount:e,totalProductFee:t,postageFee:r}}function h4(){const e=I(".gyp-order-num-text").text().replace(/\D/g,""),t=I(".gyp-order-price-text").text().replace(/[^0-9.]/g,"");return{totalCount:e,totalProductFee:t,postageFee:""}}function m4(){const t=I(".total-seletion-count").find("strong").eq(-1).text().replace(/\D/g,""),r=I(".total-price").find("strong").text().replace(/[^0-9.]/g,""),n=I(".total-freight-fee").find("strong").text().replace(/[^0-9.]/g,"");return{totalCount:t,totalProductFee:r,postageFee:n}}async function VS(e){const t=await os(e);return(t==null?void 0:t.value)||null}async function ig(){let e="";try{e=await VS({name:"__cn_logon_id__",url:"https://trade.1688.com/order/new_step_order_detail.htm"}),e&&(e=decodeURIComponent(e)),window.console.log("get1688UserLoginUsername success",e)}catch(t){window.console.error("get1688UserLoginUsername fail",t),e=""}return e}function lg(){return Dr({url:"https://wuliu.1688.com/foundation/receive_address_manager.htm",method:"GET",dataType:"text"})}function HS(e,t=""){const r=e.consignee,n={appName:e.appInfo.appName,venderId:e.venderId,orderId:e.orderId,fullname:r.fullname,mobile:r.mobile,province:r.province,city:r.city,county:r.county,address:r.address,purchasePlatform:e.purchasePlatform,errorInfo:t};return Jt({url:"/order/purchase_order/save_address_match_error",method:"POST",data:n})}function zS(){let e=0,t,r;const n=I("#mod-detail-price").find(".d-content");n.length>0&&(n.text().includes("起批量")&&(t=I.trim(n.find(".amount").find("td:eq(1)").find(".value").text().replace(/(>)|(≥)/g,"")),r=t.split("-"),r.length>0&&r[0]&&(e=Rl(r[0],0))),n.find(".discount-container").length>0&&(t=I.trim(n.find(".amount").find(".value").text().replace(/(>)|(≥)/g,"")),r=t.split("-"),r.length>0&&r[0]&&(e=Rl(r[0],0))));let a=I(".price-container");if(a.length>0&&a.text().includes("起批")&&(t=I.trim(a.find(".price-begin").find(".value").text().replace(/(>)|(≥)/g,"")),r=t.split("-"),r.length>0&&r[0]&&(e=Rl(r[0],0))),a=I(".price-wrapper"),a.length||(a=I(".range-price")),a.length>0&&a.text().includes("起批")){let s=a.find(".unit-text");s.length||(s=a.find("p")),t=I.trim(a.find(".unit-text").text()),r=/\d+/.exec(t),r.length>0&&r[0]&&(e=Rl(r[0],0))}if(!e&&I(".mod-detail-info-minimum .obj-amount").length>0){const s=I(".mod-detail-info-minimum .obj-amount").text().trim();e=Number.parseInt(s)}return e&&e>0?e:0}function WS(){const e=I(".address-info"),t=I.trim(e.find(".line-label-address").text()),r=I.trim(e.find(".person-icon").parent().text()),n=I.trim(e.find(".line-label-phone").parent().text());return`${r},${n},${t}`}function KS(){let e=I.trim(I(".due-total.text-stress:eq(0)").text());if(!e&&I(".commit-container .amount-container")){const t=I(".commit-container .amount-container"),r=t.find(".dollar").text()||"",n=t.find(".cent").text()||"";e=`${r}${n}`}return e.replace(",","")}function GS(){return I.trim(I(".line-label-address .valid-error").text())||""}function YS(){I(document).find(".checkout-operate").find(".make-order").length>0?I(document).find(".checkout-operate").find(".make-order")[0].click():I(document).find(".J_checkRelatePurchaseBtn")[0].click()}function JS(e){const t=R2();if(!t||t<119)return"";e.partitionKey={topLevelSite:"https://1688.com"},t>=130&&(e.partitionKey.hasCrossSiteAncestor=!1)}const g4=Object.freeze(Object.defineProperty({__proto__:null,add1688CookieDetailPartitionKey:JS,extIdValidator:d4,get1688FullAddress:WS,get1688MinPurchaseNum:zS,get1688TotalPrice:KS,get1688UserLoginUsername:ig,get1688ValidErrorMsg:GS,getCookieValue:VS,getCsrfToken:lg,getPriceInfo:p4,getSpecIdAndSkuInfoMap:f4,matchCartPage:o4,matchConfirmPage:i4,matchDetailPage:s4,matchPaySuccessPage:u4,matchSearchSameGoodsPage:c4,matchWaitPayPage:l4,saveAddressMatchError:HS,triggerSubmitOrderBtn:YS},Symbol.toStringTag,{value:"Module"})),Qa="taobao";/**
* @vue/shared v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ug(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const cr={},qi=[],jr=()=>{},XS=()=>!1,dd=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),cg=e=>e.startsWith("onUpdate:"),Hr=Object.assign,dg=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},v4=Object.prototype.hasOwnProperty,Wt=(e,t)=>v4.call(e,t),Ue=Array.isArray,Vi=e=>hu(e)==="[object Map]",fd=e=>hu(e)==="[object Set]",pd=e=>hu(e)==="[object Date]",et=e=>typeof e=="function",mt=e=>typeof e=="string",Pa=e=>typeof e=="symbol",Rt=e=>e!==null&&typeof e=="object",QS=e=>(Rt(e)||et(e))&&et(e.then)&&et(e.catch),ZS=Object.prototype.toString,hu=e=>ZS.call(e),y4=e=>hu(e).slice(8,-1),fg=e=>hu(e)==="[object Object]",pg=e=>mt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,mu=ug(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),hd=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},b4=/-\w/g,Ln=hd(e=>e.replace(b4,t=>t.slice(1).toUpperCase())),w4=/\B([A-Z])/g,$s=hd(e=>e.replace(w4,"-$1").toLowerCase()),md=hd(e=>e.charAt(0).toUpperCase()+e.slice(1)),gd=hd(e=>e?`on${md(e)}`:""),Mn=(e,t)=>!Object.is(e,t),vd=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},eT=(e,t,r,n=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:n,value:r})},hg=e=>{const t=parseFloat(e);return isNaN(t)?e:t},_4=e=>{const t=mt(e)?Number(e):NaN;return isNaN(t)?e:t};let tT;const yd=()=>tT||(tT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Dt(e){if(Ue(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],a=mt(n)?C4(n):Dt(n);if(a)for(const s in a)t[s]=a[s]}return t}else if(mt(e)||Rt(e))return e}const S4=/;(?![^(]*\))/g,T4=/:([^]+)/,x4=/\/\*[^]*?\*\//g;function C4(e){const t={};return e.replace(x4,"").split(S4).forEach(r=>{if(r){const n=r.split(T4);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Q(e){let t="";if(mt(e))t=e;else if(Ue(e))for(let r=0;r<e.length;r++){const n=Q(e[r]);n&&(t+=n+" ")}else if(Rt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function rT(e){if(!e)return null;let{class:t,style:r}=e;return t&&!mt(t)&&(e.class=Q(t)),r&&(e.style=Dt(r)),e}const k4=ug("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function nT(e){return!!e||e===""}function I4(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=bd(e[n],t[n]);return r}function bd(e,t){if(e===t)return!0;let r=pd(e),n=pd(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Pa(e),n=Pa(t),r||n)return e===t;if(r=Ue(e),n=Ue(t),r||n)return r&&n?I4(e,t):!1;if(r=Rt(e),n=Rt(t),r||n){if(!r||!n)return!1;const a=Object.keys(e).length,s=Object.keys(t).length;if(a!==s)return!1;for(const o in e){const i=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(i&&!l||!i&&l||!bd(e[o],t[o]))return!1}}return String(e)===String(t)}function aT(e,t){return e.findIndex(r=>bd(r,t))}const sT=e=>!!(e&&e.__v_isRef===!0),He=e=>mt(e)?e:e==null?"":Ue(e)||Rt(e)&&(e.toString===ZS||!et(e.toString))?sT(e)?He(e.value):JSON.stringify(e,oT,2):String(e),oT=(e,t)=>sT(t)?oT(e,t.value):Vi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,a],s)=>(r[mg(n,s)+" =>"]=a,r),{})}:fd(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>mg(r))}:Pa(t)?mg(t):Rt(t)&&!Ue(t)&&!fg(t)?String(t):t,mg=(e,t="")=>{var r;return Pa(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let hn;class A4{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=hn,!t&&hn&&(this.index=(hn.scopes||(hn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=hn;try{return hn=this,t()}finally{hn=r}}}on(){++this._on===1&&(this.prevScope=hn,hn=this)}off(){this._on>0&&--this._on===0&&(hn=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(this.effects.length=0,r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const a=this.parent.scopes.pop();a&&a!==this&&(this.parent.scopes[this.index]=a,a.index=this.index)}this.parent=void 0}}}function gg(){return hn}function vg(e,t=!1){hn&&hn.cleanups.push(e)}let _r;const yg=new WeakSet;class iT{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,hn&&hn.active&&hn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,yg.has(this)&&(yg.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||uT(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,hT(this),cT(this);const t=_r,r=Ea;_r=this,Ea=!0;try{return this.fn()}finally{dT(this),_r=t,Ea=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Sg(t);this.deps=this.depsTail=void 0,hT(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?yg.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_g(this)&&this.run()}get dirty(){return _g(this)}}let lT=0,gu,vu;function uT(e,t=!1){if(e.flags|=8,t){e.next=vu,vu=e;return}e.next=gu,gu=e}function bg(){lT++}function wg(){if(--lT>0)return;if(vu){let t=vu;for(vu=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;gu;){let t=gu;for(gu=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(n){e||(e=n)}t=r}}if(e)throw e}function cT(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function dT(e){let t,r=e.depsTail,n=r;for(;n;){const a=n.prevDep;n.version===-1?(n===r&&(r=a),Sg(n),O4(n)):t=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=a}e.deps=t,e.depsTail=r}function _g(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(fT(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function fT(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===yu)||(e.globalVersion=yu,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!_g(e))))return;e.flags|=2;const t=e.dep,r=_r,n=Ea;_r=e,Ea=!0;try{cT(e);const a=e.fn(e._value);(t.version===0||Mn(a,e._value))&&(e.flags|=128,e._value=a,t.version++)}catch(a){throw t.version++,a}finally{_r=r,Ea=n,dT(e),e.flags&=-3}}function Sg(e,t=!1){const{dep:r,prevSub:n,nextSub:a}=e;if(n&&(n.nextSub=a,e.prevSub=void 0),a&&(a.prevSub=n,e.nextSub=void 0),r.subs===e&&(r.subs=n,!n&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)Sg(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function O4(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let Ea=!0;const pT=[];function Za(){pT.push(Ea),Ea=!1}function es(){const e=pT.pop();Ea=e===void 0?!0:e}function hT(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=_r;_r=void 0;try{t()}finally{_r=r}}}let yu=0,P4=class{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class wd{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!_r||!Ea||_r===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==_r)r=this.activeLink=new P4(_r,this),_r.deps?(r.prevDep=_r.depsTail,_r.depsTail.nextDep=r,_r.depsTail=r):_r.deps=_r.depsTail=r,mT(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const n=r.nextDep;n.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=n),r.prevDep=_r.depsTail,r.nextDep=void 0,_r.depsTail.nextDep=r,_r.depsTail=r,_r.deps===r&&(_r.deps=n)}return r}trigger(t){this.version++,yu++,this.notify(t)}notify(t){bg();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{wg()}}}function mT(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let n=t.deps;n;n=n.nextDep)mT(n)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const _d=new WeakMap,zo=Symbol(""),Tg=Symbol(""),bu=Symbol("");function mn(e,t,r){if(Ea&&_r){let n=_d.get(e);n||_d.set(e,n=new Map);let a=n.get(r);a||(n.set(r,a=new wd),a.map=n,a.key=r),a.track()}}function Rs(e,t,r,n,a,s){const o=_d.get(e);if(!o){yu++;return}const i=l=>{l&&l.trigger()};if(bg(),t==="clear")o.forEach(i);else{const l=Ue(e),u=l&&pg(r);if(l&&r==="length"){const c=Number(n);o.forEach((d,p)=>{(p==="length"||p===bu||!Pa(p)&&p>=c)&&i(d)})}else switch((r!==void 0||o.has(void 0))&&i(o.get(r)),u&&i(o.get(bu)),t){case"add":l?u&&i(o.get("length")):(i(o.get(zo)),Vi(e)&&i(o.get(Tg)));break;case"delete":l||(i(o.get(zo)),Vi(e)&&i(o.get(Tg)));break;case"set":Vi(e)&&i(o.get(zo));break}}wg()}function E4(e,t){const r=_d.get(e);return r&&r.get(t)}function Hi(e){const t=Gt(e);return t===e?t:(mn(t,"iterate",bu),fa(e)?t:t.map(on))}function Sd(e){return mn(e=Gt(e),"iterate",bu),e}const $4={__proto__:null,[Symbol.iterator](){return xg(this,Symbol.iterator,on)},concat(...e){return Hi(this).concat(...e.map(t=>Ue(t)?Hi(t):t))},entries(){return xg(this,"entries",e=>(e[1]=on(e[1]),e))},every(e,t){return Ls(this,"every",e,t,void 0,arguments)},filter(e,t){return Ls(this,"filter",e,t,r=>r.map(on),arguments)},find(e,t){return Ls(this,"find",e,t,on,arguments)},findIndex(e,t){return Ls(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ls(this,"findLast",e,t,on,arguments)},findLastIndex(e,t){return Ls(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ls(this,"forEach",e,t,void 0,arguments)},includes(...e){return Cg(this,"includes",e)},indexOf(...e){return Cg(this,"indexOf",e)},join(e){return Hi(this).join(e)},lastIndexOf(...e){return Cg(this,"lastIndexOf",e)},map(e,t){return Ls(this,"map",e,t,void 0,arguments)},pop(){return wu(this,"pop")},push(...e){return wu(this,"push",e)},reduce(e,...t){return gT(this,"reduce",e,t)},reduceRight(e,...t){return gT(this,"reduceRight",e,t)},shift(){return wu(this,"shift")},some(e,t){return Ls(this,"some",e,t,void 0,arguments)},splice(...e){return wu(this,"splice",e)},toReversed(){return Hi(this).toReversed()},toSorted(e){return Hi(this).toSorted(e)},toSpliced(...e){return Hi(this).toSpliced(...e)},unshift(...e){return wu(this,"unshift",e)},values(){return xg(this,"values",on)}};function xg(e,t,r){const n=Sd(e),a=n[t]();return n!==e&&!fa(e)&&(a._next=a.next,a.next=()=>{const s=a._next();return s.value&&(s.value=r(s.value)),s}),a}const R4=Array.prototype;function Ls(e,t,r,n,a,s){const o=Sd(e),i=o!==e&&!fa(e),l=o[t];if(l!==R4[t]){const d=l.apply(e,s);return i?on(d):d}let u=r;o!==e&&(i?u=function(d,p){return r.call(this,on(d),p,e)}:r.length>2&&(u=function(d,p){return r.call(this,d,p,e)}));const c=l.call(o,u,n);return i&&a?a(c):c}function gT(e,t,r,n){const a=Sd(e);let s=r;return a!==e&&(fa(e)?r.length>3&&(s=function(o,i,l){return r.call(this,o,i,l,e)}):s=function(o,i,l){return r.call(this,o,on(i),l,e)}),a[t](s,...n)}function Cg(e,t,r){const n=Gt(e);mn(n,"iterate",bu);const a=n[t](...r);return(a===-1||a===!1)&&Ig(r[0])?(r[0]=Gt(r[0]),n[t](...r)):a}function wu(e,t,r=[]){Za(),bg();const n=Gt(e)[t].apply(e,r);return wg(),es(),n}const L4=ug("__proto__,__v_isRef,__isVue"),vT=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pa));function M4(e){Pa(e)||(e=String(e));const t=Gt(this);return mn(t,"has",e),t.hasOwnProperty(e)}class yT{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,n){if(r==="__v_skip")return t.__v_skip;const a=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!a;if(r==="__v_isReadonly")return a;if(r==="__v_isShallow")return s;if(r==="__v_raw")return n===(a?s?xT:TT:s?ST:_T).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=Ue(t);if(!a){let l;if(o&&(l=$4[r]))return l;if(r==="hasOwnProperty")return M4}const i=Reflect.get(t,r,lr(t)?t:n);return(Pa(r)?vT.has(r):L4(r))||(a||mn(t,"get",r),s)?i:lr(i)?o&&pg(r)?i:i.value:Rt(i)?a?_u(i):sn(i):i}}class bT extends yT{constructor(t=!1){super(!1,t)}set(t,r,n,a){let s=t[r];if(!this._isShallow){const l=io(s);if(!fa(n)&&!io(n)&&(s=Gt(s),n=Gt(n)),!Ue(t)&&lr(s)&&!lr(n))return l||(s.value=n),!0}const o=Ue(t)&&pg(r)?Number(r)<t.length:Wt(t,r),i=Reflect.set(t,r,n,lr(t)?t:a);return t===Gt(a)&&(o?Mn(n,s)&&Rs(t,"set",r,n):Rs(t,"add",r,n)),i}deleteProperty(t,r){const n=Wt(t,r);t[r];const a=Reflect.deleteProperty(t,r);return a&&n&&Rs(t,"delete",r,void 0),a}has(t,r){const n=Reflect.has(t,r);return(!Pa(r)||!vT.has(r))&&mn(t,"has",r),n}ownKeys(t){return mn(t,"iterate",Ue(t)?"length":zo),Reflect.ownKeys(t)}}class wT extends yT{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const D4=new bT,N4=new wT,F4=new bT(!0),B4=new wT(!0),kg=e=>e,Td=e=>Reflect.getPrototypeOf(e);function j4(e,t,r){return function(...n){const a=this.__v_raw,s=Gt(a),o=Vi(s),i=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=a[e](...n),c=r?kg:t?Id:on;return!t&&mn(s,"iterate",l?Tg:zo),{next(){const{value:d,done:p}=u.next();return p?{value:d,done:p}:{value:i?[c(d[0]),c(d[1])]:c(d),done:p}},[Symbol.iterator](){return this}}}}function xd(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function U4(e,t){const r={get(a){const s=this.__v_raw,o=Gt(s),i=Gt(a);e||(Mn(a,i)&&mn(o,"get",a),mn(o,"get",i));const{has:l}=Td(o),u=t?kg:e?Id:on;if(l.call(o,a))return u(s.get(a));if(l.call(o,i))return u(s.get(i));s!==o&&s.get(a)},get size(){const a=this.__v_raw;return!e&&mn(Gt(a),"iterate",zo),a.size},has(a){const s=this.__v_raw,o=Gt(s),i=Gt(a);return e||(Mn(a,i)&&mn(o,"has",a),mn(o,"has",i)),a===i?s.has(a):s.has(a)||s.has(i)},forEach(a,s){const o=this,i=o.__v_raw,l=Gt(i),u=t?kg:e?Id:on;return!e&&mn(l,"iterate",zo),i.forEach((c,d)=>a.call(s,u(c),u(d),o))}};return Hr(r,e?{add:xd("add"),set:xd("set"),delete:xd("delete"),clear:xd("clear")}:{add(a){!t&&!fa(a)&&!io(a)&&(a=Gt(a));const s=Gt(this);return Td(s).has.call(s,a)||(s.add(a),Rs(s,"add",a,a)),this},set(a,s){!t&&!fa(s)&&!io(s)&&(s=Gt(s));const o=Gt(this),{has:i,get:l}=Td(o);let u=i.call(o,a);u||(a=Gt(a),u=i.call(o,a));const c=l.call(o,a);return o.set(a,s),u?Mn(s,c)&&Rs(o,"set",a,s):Rs(o,"add",a,s),this},delete(a){const s=Gt(this),{has:o,get:i}=Td(s);let l=o.call(s,a);l||(a=Gt(a),l=o.call(s,a)),i&&i.call(s,a);const u=s.delete(a);return l&&Rs(s,"delete",a,void 0),u},clear(){const a=Gt(this),s=a.size!==0,o=a.clear();return s&&Rs(a,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(a=>{r[a]=j4(a,e,t)}),r}function Cd(e,t){const r=U4(e,t);return(n,a,s)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?n:Reflect.get(Wt(r,a)&&a in n?r:n,a,s)}const q4={get:Cd(!1,!1)},V4={get:Cd(!1,!0)},H4={get:Cd(!0,!1)},z4={get:Cd(!0,!0)},_T=new WeakMap,ST=new WeakMap,TT=new WeakMap,xT=new WeakMap;function W4(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function K4(e){return e.__v_skip||!Object.isExtensible(e)?0:W4(y4(e))}function sn(e){return io(e)?e:kd(e,!1,D4,q4,_T)}function CT(e){return kd(e,!1,F4,V4,ST)}function _u(e){return kd(e,!0,N4,H4,TT)}function see(e){return kd(e,!0,B4,z4,xT)}function kd(e,t,r,n,a){if(!Rt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=K4(e);if(s===0)return e;const o=a.get(e);if(o)return o;const i=new Proxy(e,s===2?n:r);return a.set(e,i),i}function zi(e){return io(e)?zi(e.__v_raw):!!(e&&e.__v_isReactive)}function io(e){return!!(e&&e.__v_isReadonly)}function fa(e){return!!(e&&e.__v_isShallow)}function Ig(e){return e?!!e.__v_raw:!1}function Gt(e){const t=e&&e.__v_raw;return t?Gt(t):e}function Ag(e){return!Wt(e,"__v_skip")&&Object.isExtensible(e)&&eT(e,"__v_skip",!0),e}const on=e=>Rt(e)?sn(e):e,Id=e=>Rt(e)?_u(e):e;function lr(e){return e?e.__v_isRef===!0:!1}function ee(e){return kT(e,!1)}function Zr(e){return kT(e,!0)}function kT(e,t){return lr(e)?e:new G4(e,t)}class G4{constructor(t,r){this.dep=new wd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:Gt(t),this._value=r?t:on(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,n=this.__v_isShallow||fa(t)||io(t);t=n?t:Gt(t),Mn(t,r)&&(this._rawValue=t,this._value=n?t:on(t),this.dep.trigger())}}function _(e){return lr(e)?e.value:e}function ln(e){return et(e)?e():_(e)}const Y4={get:(e,t,r)=>t==="__v_raw"?e:_(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const a=e[t];return lr(a)&&!lr(r)?(a.value=r,!0):Reflect.set(e,t,r,n)}};function IT(e){return zi(e)?e:new Proxy(e,Y4)}class J4{constructor(t){this.__v_isRef=!0,this._value=void 0;const r=this.dep=new wd,{get:n,set:a}=t(r.track.bind(r),r.trigger.bind(r));this._get=n,this._set=a}get value(){return this._value=this._get()}set value(t){this._set(t)}}function X4(e){return new J4(e)}function Ms(e){const t=Ue(e)?new Array(e.length):{};for(const r in e)t[r]=AT(e,r);return t}class Q4{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return E4(Gt(this._object),this._key)}}class Z4{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Nr(e,t,r){return lr(e)?e:et(e)?new Z4(e):Rt(e)&&arguments.length>1?AT(e,t,r):ee(e)}function AT(e,t,r){const n=e[t];return lr(n)?n:new Q4(e,t,r)}class e5{constructor(t,r,n){this.fn=t,this.setter=r,this._value=void 0,this.dep=new wd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=yu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&_r!==this)return uT(this,!0),!0}get value(){const t=this.dep.track();return fT(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function t5(e,t,r=!1){let n,a;return et(e)?n=e:(n=e.get,a=e.set),new e5(n,a,r)}const Ad={},Od=new WeakMap;let Wo;function r5(e,t=!1,r=Wo){if(r){let n=Od.get(r);n||Od.set(r,n=[]),n.push(e)}}function n5(e,t,r=cr){const{immediate:n,deep:a,once:s,scheduler:o,augmentJob:i,call:l}=r,u=w=>a?w:fa(w)||a===!1||a===0?Ds(w,1):Ds(w);let c,d,p,b,m=!1,h=!1;if(lr(e)?(d=()=>e.value,m=fa(e)):zi(e)?(d=()=>u(e),m=!0):Ue(e)?(h=!0,m=e.some(w=>zi(w)||fa(w)),d=()=>e.map(w=>{if(lr(w))return w.value;if(zi(w))return u(w);if(et(w))return l?l(w,2):w()})):et(e)?t?d=l?()=>l(e,2):e:d=()=>{if(p){Za();try{p()}finally{es()}}const w=Wo;Wo=c;try{return l?l(e,3,[b]):e(b)}finally{Wo=w}}:d=jr,t&&a){const w=d,C=a===!0?1/0:a;d=()=>Ds(w(),C)}const v=gg(),y=()=>{c.stop(),v&&v.active&&dg(v.effects,c)};if(s&&t){const w=t;t=(...C)=>{w(...C),y()}}let T=h?new Array(e.length).fill(Ad):Ad;const S=w=>{if(!(!(c.flags&1)||!c.dirty&&!w))if(t){const C=c.run();if(a||m||(h?C.some((k,f)=>Mn(k,T[f])):Mn(C,T))){p&&p();const k=Wo;Wo=c;try{const f=[C,T===Ad?void 0:h&&T[0]===Ad?[]:T,b];T=C,l?l(t,3,f):t(...f)}finally{Wo=k}}}else c.run()};return i&&i(S),c=new iT(d),c.scheduler=o?()=>o(S,!1):S,b=w=>r5(w,!1,c),p=c.onStop=()=>{const w=Od.get(c);if(w){if(l)l(w,4);else for(const C of w)C();Od.delete(c)}},t?n?S(!0):T=c.run():o?o(S.bind(null,!0),!0):c.run(),y.pause=c.pause.bind(c),y.resume=c.resume.bind(c),y.stop=y,y}function Ds(e,t=1/0,r){if(t<=0||!Rt(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,lr(e))Ds(e.value,t,r);else if(Ue(e))for(let n=0;n<e.length;n++)Ds(e[n],t,r);else if(fd(e)||Vi(e))e.forEach(n=>{Ds(n,t,r)});else if(fg(e)){for(const n in e)Ds(e[n],t,r);for(const n of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,n)&&Ds(e[n],t,r)}return e}/**
* @vue/runtime-core v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Su=[];let Og=!1;function oee(e,...t){if(Og)return;Og=!0,Za();const r=Su.length?Su[Su.length-1].component:null,n=r&&r.appContext.config.warnHandler,a=a5();if(n)Wi(n,r,11,[e+t.map(s=>{var o,i;return(i=(o=s.toString)==null?void 0:o.call(s))!=null?i:JSON.stringify(s)}).join(""),r&&r.proxy,a.map(({vnode:s})=>`at <${Nx(r,s.type)}>`).join(`
`),a]);else{const s=[`[Vue warn]: ${e}`,...t];a.length&&s.push(`
`,...s5(a)),console.warn(...s)}es(),Og=!1}function a5(){let e=Su[Su.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const n=e.component&&e.component.parent;e=n&&n.vnode}return t}function s5(e){const t=[];return e.forEach((r,n)=>{t.push(...n===0?[]:[`
`],...o5(r))}),t}function o5({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",n=e.component?e.component.parent==null:!1,a=` at <${Nx(e.component,e.type,n)}`,s=">"+r;return e.props?[a,...i5(e.props),s]:[a+s]}function i5(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(n=>{t.push(...OT(n,e[n]))}),r.length>3&&t.push(" ..."),t}function OT(e,t,r){return mt(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:lr(t)?(t=OT(e,Gt(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):et(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=Gt(t),r?t:[`${e}=`,t])}function Wi(e,t,r,n){try{return n?e(...n):e()}catch(a){Pd(a,t,r)}}function $a(e,t,r,n){if(et(e)){const a=Wi(e,t,r,n);return a&&QS(a)&&a.catch(s=>{Pd(s,t,r)}),a}if(Ue(e)){const a=[];for(let s=0;s<e.length;s++)a.push($a(e[s],t,r,n));return a}}function Pd(e,t,r,n=!0){const a=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||cr;if(t){let i=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${r}`;for(;i;){const c=i.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](e,l,u)===!1)return}i=i.parent}if(s){Za(),Wi(s,null,10,[e,l,u]),es();return}}l5(e,r,a,n,o)}function l5(e,t,r,n=!0,a=!1){if(a)throw e;console.error(e)}const kn=[];let ts=-1;const Ki=[];let lo=null,Gi=0;const PT=Promise.resolve();let Ed=null;function xt(e){const t=Ed||PT;return e?t.then(this?e.bind(this):e):t}function u5(e){let t=ts+1,r=kn.length;for(;t<r;){const n=t+r>>>1,a=kn[n],s=Tu(a);s<e||s===e&&a.flags&2?t=n+1:r=n}return t}function Pg(e){if(!(e.flags&1)){const t=Tu(e),r=kn[kn.length-1];!r||!(e.flags&2)&&t>=Tu(r)?kn.push(e):kn.splice(u5(t),0,e),e.flags|=1,ET()}}function ET(){Ed||(Ed=PT.then(LT))}function c5(e){Ue(e)?Ki.push(...e):lo&&e.id===-1?lo.splice(Gi+1,0,e):e.flags&1||(Ki.push(e),e.flags|=1),ET()}function $T(e,t,r=ts+1){for(;r<kn.length;r++){const n=kn[r];if(n&&n.flags&2){if(e&&n.id!==e.uid)continue;kn.splice(r,1),r--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function RT(e){if(Ki.length){const t=[...new Set(Ki)].sort((r,n)=>Tu(r)-Tu(n));if(Ki.length=0,lo){lo.push(...t);return}for(lo=t,Gi=0;Gi<lo.length;Gi++){const r=lo[Gi];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}lo=null,Gi=0}}const Tu=e=>e.id==null?e.flags&2?-1:1/0:e.id;function LT(e){try{for(ts=0;ts<kn.length;ts++){const t=kn[ts];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Wi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;ts<kn.length;ts++){const t=kn[ts];t&&(t.flags&=-2)}ts=-1,kn.length=0,RT(),Ed=null,(kn.length||Ki.length)&&LT()}}let un=null,MT=null;function $d(e){const t=un;return un=e,MT=e&&e.type.__scopeId||null,t}function ie(e,t=un,r){if(!t||e._n)return e;const n=(...a)=>{n._d&&Wd(-1);const s=$d(t);let o;try{o=e(...a)}finally{$d(s),n._d&&Wd(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function qt(e,t){if(un===null)return e;const r=Yd(un),n=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[s,o,i,l=cr]=t[a];s&&(et(s)&&(s={mounted:s,updated:s}),s.deep&&Ds(o),n.push({dir:s,instance:r,value:o,oldValue:void 0,arg:i,modifiers:l}))}return e}function Ko(e,t,r,n){const a=e.dirs,s=t&&t.dirs;for(let o=0;o<a.length;o++){const i=a[o];s&&(i.oldValue=s[o].value);let l=i.dir[n];l&&(Za(),$a(l,r,8,[e.el,i,e,t]),es())}}const DT=Symbol("_vte"),NT=e=>e.__isTeleport,xu=e=>e&&(e.disabled||e.disabled===""),FT=e=>e&&(e.defer||e.defer===""),BT=e=>typeof SVGElement<"u"&&e instanceof SVGElement,jT=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Eg=(e,t)=>{const r=e&&e.to;return mt(r)?t?t(r):null:r},UT={name:"Teleport",__isTeleport:!0,process(e,t,r,n,a,s,o,i,l,u){const{mc:c,pc:d,pbc:p,o:{insert:b,querySelector:m,createText:h,createComment:v}}=u,y=xu(t.props);let{shapeFlag:T,children:S,dynamicChildren:w}=t;if(e==null){const C=t.el=h(""),k=t.anchor=h("");b(C,r,n),b(k,r,n);const f=(E,N)=>{T&16&&(a&&a.isCE&&(a.ce._teleportTarget=E),c(S,E,N,a,s,o,i,l))},O=()=>{const E=t.target=Eg(t.props,m),N=VT(E,t,h,b);E&&(o!=="svg"&&BT(E)?o="svg":o!=="mathml"&&jT(E)&&(o="mathml"),y||(f(E,N),Ld(t,!1)))};y&&(f(r,k),Ld(t,!0)),FT(t.props)?(t.el.__isMounted=!1,An(()=>{O(),delete t.el.__isMounted},s)):O()}else{if(FT(t.props)&&e.el.__isMounted===!1){An(()=>{UT.process(e,t,r,n,a,s,o,i,l,u)},s);return}t.el=e.el,t.targetStart=e.targetStart;const C=t.anchor=e.anchor,k=t.target=e.target,f=t.targetAnchor=e.targetAnchor,O=xu(e.props),E=O?r:k,N=O?C:f;if(o==="svg"||BT(k)?o="svg":(o==="mathml"||jT(k))&&(o="mathml"),w?(p(e.dynamicChildren,w,E,a,s,o,i),zg(e,t,!0)):l||d(e,t,E,N,a,s,o,i,!1),y)O?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Rd(t,r,C,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const $=t.target=Eg(t.props,m);$&&Rd(t,$,null,u,0)}else O&&Rd(t,k,f,u,1);Ld(t,y)}},remove(e,t,r,{um:n,o:{remove:a}},s){const{shapeFlag:o,children:i,anchor:l,targetStart:u,targetAnchor:c,target:d,props:p}=e;if(d&&(a(u),a(c)),s&&a(l),o&16){const b=s||!xu(p);for(let m=0;m<i.length;m++){const h=i[m];n(h,t,r,b,!!h.dynamicChildren)}}},move:Rd,hydrate:d5};function Rd(e,t,r,{o:{insert:n},m:a},s=2){s===0&&n(e.targetAnchor,t,r);const{el:o,anchor:i,shapeFlag:l,children:u,props:c}=e,d=s===2;if(d&&n(o,t,r),(!d||xu(c))&&l&16)for(let p=0;p<u.length;p++)a(u[p],t,r,2);d&&n(i,t,r)}function d5(e,t,r,n,a,s,{o:{nextSibling:o,parentNode:i,querySelector:l,insert:u,createText:c}},d){function p(h,v,y,T){v.anchor=d(o(h),v,i(h),r,n,a,s),v.targetStart=y,v.targetAnchor=T}const b=t.target=Eg(t.props,l),m=xu(t.props);if(b){const h=b._lpa||b.firstChild;if(t.shapeFlag&16)if(m)p(e,t,h,h&&o(h));else{t.anchor=o(e);let v=h;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")t.targetStart=v;else if(v.data==="teleport anchor"){t.targetAnchor=v,b._lpa=t.targetAnchor&&o(t.targetAnchor);break}}v=o(v)}t.targetAnchor||VT(b,t,c,u),d(h&&o(h),t,b,r,n,a,s)}Ld(t,m)}else m&&t.shapeFlag&16&&p(e,t,e,o(e));return t.anchor&&o(t.anchor)}const qT=UT;function Ld(e,t){const r=e.ctx;if(r&&r.ut){let n,a;for(t?(n=e.el,a=e.anchor):(n=e.targetStart,a=e.targetAnchor);n&&n!==a;)n.nodeType===1&&n.setAttribute("data-v-owner",r.uid),n=n.nextSibling;r.ut()}}function VT(e,t,r,n){const a=t.targetStart=r(""),s=t.targetAnchor=r("");return a[DT]=s,e&&(n(a,e),n(s,e)),s}const Ns=Symbol("_leaveCb"),Md=Symbol("_enterCb");function HT(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Kt(()=>{e.isMounted=!0}),Ur(()=>{e.isUnmounting=!0}),e}const pa=[Function,Array],zT={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:pa,onEnter:pa,onAfterEnter:pa,onEnterCancelled:pa,onBeforeLeave:pa,onLeave:pa,onAfterLeave:pa,onLeaveCancelled:pa,onBeforeAppear:pa,onAppear:pa,onAfterAppear:pa,onAppearCancelled:pa},WT=e=>{const t=e.subTree;return t.component?WT(t.component):t},f5={name:"BaseTransition",props:zT,setup(e,{slots:t}){const r=Vt(),n=HT();return()=>{const a=t.default&&Rg(t.default(),!0);if(!a||!a.length)return;const s=KT(a),o=Gt(e),{mode:i}=o;if(n.isLeaving)return $g(s);const l=YT(s);if(!l)return $g(s);let u=Cu(l,o,n,r,d=>u=d);l.type!==en&&Go(l,u);let c=r.subTree&&YT(r.subTree);if(c&&c.type!==en&&!Xo(c,l)&&WT(r).type!==en){let d=Cu(c,o,n,r);if(Go(c,d),i==="out-in"&&l.type!==en)return n.isLeaving=!0,d.afterLeave=()=>{n.isLeaving=!1,r.job.flags&8||r.update(),delete d.afterLeave,c=void 0},$g(s);i==="in-out"&&l.type!==en?d.delayLeave=(p,b,m)=>{const h=GT(n,c);h[String(c.key)]=c,p[Ns]=()=>{b(),p[Ns]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{m(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return s}}};function KT(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==en){t=r;break}}return t}const p5=f5;function GT(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function Cu(e,t,r,n,a){const{appear:s,mode:o,persisted:i=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:p,onLeave:b,onAfterLeave:m,onLeaveCancelled:h,onBeforeAppear:v,onAppear:y,onAfterAppear:T,onAppearCancelled:S}=t,w=String(e.key),C=GT(r,e),k=(E,N)=>{E&&$a(E,n,9,N)},f=(E,N)=>{const $=N[1];k(E,N),Ue(E)?E.every(L=>L.length<=1)&&$():E.length<=1&&$()},O={mode:o,persisted:i,beforeEnter(E){let N=l;if(!r.isMounted)if(s)N=v||l;else return;E[Ns]&&E[Ns](!0);const $=C[w];$&&Xo(e,$)&&$.el[Ns]&&$.el[Ns](),k(N,[E])},enter(E){let N=u,$=c,L=d;if(!r.isMounted)if(s)N=y||u,$=T||c,L=S||d;else return;let B=!1;const F=E[Md]=R=>{B||(B=!0,R?k(L,[E]):k($,[E]),O.delayedLeave&&O.delayedLeave(),E[Md]=void 0)};N?f(N,[E,F]):F()},leave(E,N){const $=String(e.key);if(E[Md]&&E[Md](!0),r.isUnmounting)return N();k(p,[E]);let L=!1;const B=E[Ns]=F=>{L||(L=!0,N(),F?k(h,[E]):k(m,[E]),E[Ns]=void 0,C[$]===e&&delete C[$])};C[$]=e,b?f(b,[E,B]):B()},clone(E){const N=Cu(E,t,r,n,a);return a&&a(N),N}};return O}function $g(e){if(Fd(e))return e=js(e),e.children=null,e}function YT(e){if(!Fd(e))return NT(e.type)&&e.children?KT(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&et(r.default))return r.default()}}function Go(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Go(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Rg(e,t=!1,r){let n=[],a=0;for(let s=0;s<e.length;s++){let o=e[s];const i=r==null?o.key:String(r)+String(o.key!=null?o.key:s);o.type===pt?(o.patchFlag&128&&a++,n=n.concat(Rg(o.children,t,i))):(t||o.type!==en)&&n.push(i!=null?js(o,{key:i}):o)}if(a>1)for(let s=0;s<n.length;s++)n[s].patchFlag=-2;return n}function Te(e,t){return et(e)?Hr({name:e.name},t,{setup:e}):e}function JT(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function Dd(e){const t=Vt(),r=Zr(null);if(t){const a=t.refs===cr?t.refs={}:t.refs;Object.defineProperty(a,e,{enumerable:!0,get:()=>r.value,set:s=>r.value=s})}return r}const Nd=new WeakMap;function ku(e,t,r,n,a=!1){if(Ue(e)){e.forEach((m,h)=>ku(m,t&&(Ue(t)?t[h]:t),r,n,a));return}if(Yi(n)&&!a){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&ku(e,t,r,n.component.subTree);return}const s=n.shapeFlag&4?Yd(n.component):n.el,o=a?null:s,{i,r:l}=e,u=t&&t.r,c=i.refs===cr?i.refs={}:i.refs,d=i.setupState,p=Gt(d),b=d===cr?XS:m=>Wt(p,m);if(u!=null&&u!==l){if(XT(t),mt(u))c[u]=null,b(u)&&(d[u]=null);else if(lr(u)){u.value=null;const m=t;m.k&&(c[m.k]=null)}}if(et(l))Wi(l,i,12,[o,c]);else{const m=mt(l),h=lr(l);if(m||h){const v=()=>{if(e.f){const y=m?b(l)?d[l]:c[l]:l.value;if(a)Ue(y)&&dg(y,s);else if(Ue(y))y.includes(s)||y.push(s);else if(m)c[l]=[s],b(l)&&(d[l]=c[l]);else{const T=[s];l.value=T,e.k&&(c[e.k]=T)}}else m?(c[l]=o,b(l)&&(d[l]=o)):h&&(l.value=o,e.k&&(c[e.k]=o))};if(o){const y=()=>{v(),Nd.delete(e)};y.id=-1,Nd.set(e,y),An(y,r)}else XT(e),v()}}}function XT(e){const t=Nd.get(e);t&&(t.flags|=8,Nd.delete(e))}yd().requestIdleCallback,yd().cancelIdleCallback;const Yi=e=>!!e.type.__asyncLoader,Fd=e=>e.type.__isKeepAlive;function QT(e,t){ex(e,"a",t)}function ZT(e,t){ex(e,"da",t)}function ex(e,t,r=vn){const n=e.__wdc||(e.__wdc=()=>{let a=r;for(;a;){if(a.isDeactivated)return;a=a.parent}return e()});if(Bd(t,n,r),r){let a=r.parent;for(;a&&a.parent;)Fd(a.parent.vnode)&&h5(n,t,r,a),a=a.parent}}function h5(e,t,r,n){const a=Bd(t,e,n,!0);Yo(()=>{dg(n[t],a)},r)}function Bd(e,t,r=vn,n=!1){if(r){const a=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Za();const i=Eu(r),l=$a(t,r,e,o);return i(),es(),l});return n?a.unshift(s):a.push(s),s}}const Fs=e=>(t,r=vn)=>{(!$u||e==="sp")&&Bd(e,(...n)=>t(...n),r)},jd=Fs("bm"),Kt=Fs("m"),m5=Fs("bu"),Ji=Fs("u"),Ur=Fs("bum"),Yo=Fs("um"),g5=Fs("sp"),v5=Fs("rtg"),y5=Fs("rtc");function b5(e,t=vn){Bd("ec",e,t)}const Lg="components",w5="directives";function Cr(e,t){return Dg(Lg,e,!0,t)||e}const tx=Symbol.for("v-ndc");function br(e){return mt(e)?Dg(Lg,e,!1)||e:e||tx}function Mg(e){return Dg(w5,e)}function Dg(e,t,r=!0,n=!1){const a=un||vn;if(a){const s=a.type;if(e===Lg){const i=Dx(s,!1);if(i&&(i===t||i===Ln(t)||i===md(Ln(t))))return s}const o=rx(a[e]||s[e],t)||rx(a.appContext[e],t);return!o&&n?s:o}}function rx(e,t){return e&&(e[t]||e[Ln(t)]||e[md(Ln(t))])}function $r(e,t,r,n){let a;const s=r,o=Ue(e);if(o||mt(e)){const i=o&&zi(e);let l=!1,u=!1;i&&(l=!fa(e),u=io(e),e=Sd(e)),a=new Array(e.length);for(let c=0,d=e.length;c<d;c++)a[c]=t(l?u?Id(on(e[c])):on(e[c]):e[c],c,void 0,s)}else if(typeof e=="number"){a=new Array(e);for(let i=0;i<e;i++)a[i]=t(i+1,i,void 0,s)}else if(Rt(e))if(e[Symbol.iterator])a=Array.from(e,(i,l)=>t(i,l,void 0,s));else{const i=Object.keys(e);a=new Array(i.length);for(let l=0,u=i.length;l<u;l++){const c=i[l];a[l]=t(e[c],c,l,s)}}else a=[];return a}function nx(e,t){for(let r=0;r<t.length;r++){const n=t[r];if(Ue(n))for(let a=0;a<n.length;a++)e[n[a].name]=n[a].fn;else n&&(e[n.name]=n.key?(...a)=>{const s=n.fn(...a);return s&&(s.key=n.key),s}:n.fn)}return e}function De(e,t,r={},n,a){if(un.ce||un.parent&&Yi(un.parent)&&un.parent.ce)return t!=="default"&&(r.name=t),G(),Le(pt,null,[ue("slot",r,n&&n())],64);let s=e[t];s&&s._c&&(s._d=!1),G();const o=s&&ax(s(r)),i=r.key||o&&o.key,l=Le(pt,{key:(i&&!Pa(i)?i:`_${t}`)+(!o&&n?"_fb":"")},o||(n?n():[]),o&&e._===1?64:-2);return!a&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function ax(e){return e.some(t=>ha(t)?!(t.type===en||t.type===pt&&!ax(t.children)):!0)?e:null}const Ng=e=>e?$x(e)?Yd(e):Ng(e.parent):null,Iu=Hr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ng(e.parent),$root:e=>Ng(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>lx(e),$forceUpdate:e=>e.f||(e.f=()=>{Pg(e.update)}),$nextTick:e=>e.n||(e.n=xt.bind(e.proxy)),$watch:e=>V5.bind(e)}),Fg=(e,t)=>e!==cr&&!e.__isScriptSetup&&Wt(e,t),_5={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:n,data:a,props:s,accessCache:o,type:i,appContext:l}=e;let u;if(t[0]!=="$"){const b=o[t];if(b!==void 0)switch(b){case 1:return n[t];case 2:return a[t];case 4:return r[t];case 3:return s[t]}else{if(Fg(n,t))return o[t]=1,n[t];if(a!==cr&&Wt(a,t))return o[t]=2,a[t];if((u=e.propsOptions[0])&&Wt(u,t))return o[t]=3,s[t];if(r!==cr&&Wt(r,t))return o[t]=4,r[t];Bg&&(o[t]=0)}}const c=Iu[t];let d,p;if(c)return t==="$attrs"&&mn(e.attrs,"get",""),c(e);if((d=i.__cssModules)&&(d=d[t]))return d;if(r!==cr&&Wt(r,t))return o[t]=4,r[t];if(p=l.config.globalProperties,Wt(p,t))return p[t]},set({_:e},t,r){const{data:n,setupState:a,ctx:s}=e;return Fg(a,t)?(a[t]=r,!0):n!==cr&&Wt(n,t)?(n[t]=r,!0):Wt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:a,propsOptions:s,type:o}},i){let l,u;return!!(r[i]||e!==cr&&i[0]!=="$"&&Wt(e,i)||Fg(t,i)||(l=s[0])&&Wt(l,i)||Wt(n,i)||Wt(Iu,i)||Wt(a.config.globalProperties,i)||(u=o.__cssModules)&&u[i])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Wt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Ra(){return sx().slots}function Ud(){return sx().attrs}function sx(e){const t=Vt();return t.setupContext||(t.setupContext=Mx(t))}function qd(e){return Ue(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}function S5(e,t){return!e||!t?e||t:Ue(e)&&Ue(t)?e.concat(t):Hr({},qd(e),qd(t))}let Bg=!0;function T5(e){const t=lx(e),r=e.proxy,n=e.ctx;Bg=!1,t.beforeCreate&&ox(t.beforeCreate,e,"bc");const{data:a,computed:s,methods:o,watch:i,provide:l,inject:u,created:c,beforeMount:d,mounted:p,beforeUpdate:b,updated:m,activated:h,deactivated:v,beforeDestroy:y,beforeUnmount:T,destroyed:S,unmounted:w,render:C,renderTracked:k,renderTriggered:f,errorCaptured:O,serverPrefetch:E,expose:N,inheritAttrs:$,components:L,directives:B,filters:F}=t;if(u&&x5(u,n,null),o)for(const q in o){const M=o[q];et(M)&&(n[q]=M.bind(r))}if(a){const q=a.call(r,r);Rt(q)&&(e.data=sn(q))}if(Bg=!0,s)for(const q in s){const M=s[q],D=et(M)?M.bind(r,r):et(M.get)?M.get.bind(r,r):jr,Y=!et(M)&&et(M.set)?M.set.bind(r):jr,Z=W({get:D,set:Y});Object.defineProperty(n,q,{enumerable:!0,configurable:!0,get:()=>Z.value,set:se=>Z.value=se})}if(i)for(const q in i)ix(i[q],n,r,q);if(l){const q=et(l)?l.call(r):l;Reflect.ownKeys(q).forEach(M=>{Fr(M,q[M])})}c&&ox(c,e,"c");function H(q,M){Ue(M)?M.forEach(D=>q(D.bind(r))):M&&q(M.bind(r))}if(H(jd,d),H(Kt,p),H(m5,b),H(Ji,m),H(QT,h),H(ZT,v),H(b5,O),H(y5,k),H(v5,f),H(Ur,T),H(Yo,w),H(g5,E),Ue(N))if(N.length){const q=e.exposed||(e.exposed={});N.forEach(M=>{Object.defineProperty(q,M,{get:()=>r[M],set:D=>r[M]=D,enumerable:!0})})}else e.exposed||(e.exposed={});C&&e.render===jr&&(e.render=C),$!=null&&(e.inheritAttrs=$),L&&(e.components=L),B&&(e.directives=B),E&&JT(e)}function x5(e,t,r=jr){Ue(e)&&(e=jg(e));for(const n in e){const a=e[n];let s;Rt(a)?"default"in a?s=ft(a.from||n,a.default,!0):s=ft(a.from||n):s=ft(a),lr(s)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[n]=s}}function ox(e,t,r){$a(Ue(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function ix(e,t,r,n){let a=n.includes(".")?Tx(r,n):()=>r[n];if(mt(e)){const s=t[e];et(s)&&tt(a,s)}else if(et(e))tt(a,e.bind(r));else if(Rt(e))if(Ue(e))e.forEach(s=>ix(s,t,r,n));else{const s=et(e.handler)?e.handler.bind(r):t[e.handler];et(s)&&tt(a,s,e)}}function lx(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:a,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,i=s.get(t);let l;return i?l=i:!a.length&&!r&&!n?l=t:(l={},a.length&&a.forEach(u=>Vd(l,u,o,!0)),Vd(l,t,o)),Rt(t)&&s.set(t,l),l}function Vd(e,t,r,n=!1){const{mixins:a,extends:s}=t;s&&Vd(e,s,r,!0),a&&a.forEach(o=>Vd(e,o,r,!0));for(const o in t)if(!(n&&o==="expose")){const i=C5[o]||r&&r[o];e[o]=i?i(e[o],t[o]):t[o]}return e}const C5={data:ux,props:cx,emits:cx,methods:Au,computed:Au,beforeCreate:In,created:In,beforeMount:In,mounted:In,beforeUpdate:In,updated:In,beforeDestroy:In,beforeUnmount:In,destroyed:In,unmounted:In,activated:In,deactivated:In,errorCaptured:In,serverPrefetch:In,components:Au,directives:Au,watch:I5,provide:ux,inject:k5};function ux(e,t){return t?e?function(){return Hr(et(e)?e.call(this,this):e,et(t)?t.call(this,this):t)}:t:e}function k5(e,t){return Au(jg(e),jg(t))}function jg(e){if(Ue(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function In(e,t){return e?[...new Set([].concat(e,t))]:t}function Au(e,t){return e?Hr(Object.create(null),e,t):t}function cx(e,t){return e?Ue(e)&&Ue(t)?[...new Set([...e,...t])]:Hr(Object.create(null),qd(e),qd(t??{})):t}function I5(e,t){if(!e)return t;if(!t)return e;const r=Hr(Object.create(null),e);for(const n in t)r[n]=In(e[n],t[n]);return r}function dx(){return{app:null,config:{isNativeTag:XS,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let A5=0;function O5(e,t){return function(n,a=null){et(n)||(n=Hr({},n)),a!=null&&!Rt(a)&&(a=null);const s=dx(),o=new WeakSet,i=[];let l=!1;const u=s.app={_uid:A5++,_component:n,_props:a,_container:null,_context:s,_instance:null,version:uF,get config(){return s.config},set config(c){},use(c,...d){return o.has(c)||(c&&et(c.install)?(o.add(c),c.install(u,...d)):et(c)&&(o.add(c),c(u,...d))),u},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),u},component(c,d){return d?(s.components[c]=d,u):s.components[c]},directive(c,d){return d?(s.directives[c]=d,u):s.directives[c]},mount(c,d,p){if(!l){const b=u._ceVNode||ue(n,a);return b.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),e(b,c,p),l=!0,u._container=c,c.__vue_app__=u,Yd(b.component)}},onUnmount(c){i.push(c)},unmount(){l&&($a(i,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(c,d){return s.provides[c]=d,u},runWithContext(c){const d=Xi;Xi=u;try{return c()}finally{Xi=d}}};return u}}let Xi=null;function Fr(e,t){if(vn){let r=vn.provides;const n=vn.parent&&vn.parent.provides;n===r&&(r=vn.provides=Object.create(n)),r[e]=t}}function ft(e,t,r=!1){const n=Vt();if(n||Xi){let a=Xi?Xi._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(a&&e in a)return a[e];if(arguments.length>1)return r&&et(t)?t.call(n&&n.proxy):t}}const fx={},px=()=>Object.create(fx),hx=e=>Object.getPrototypeOf(e)===fx;function P5(e,t,r,n=!1){const a={},s=px();e.propsDefaults=Object.create(null),mx(e,t,a,s);for(const o in e.propsOptions[0])o in a||(a[o]=void 0);r?e.props=n?a:CT(a):e.type.props?e.props=a:e.props=s,e.attrs=s}function E5(e,t,r,n){const{props:a,attrs:s,vnode:{patchFlag:o}}=e,i=Gt(a),[l]=e.propsOptions;let u=!1;if((n||o>0)&&!(o&16)){if(o&8){const c=e.vnode.dynamicProps;for(let d=0;d<c.length;d++){let p=c[d];if(zd(e.emitsOptions,p))continue;const b=t[p];if(l)if(Wt(s,p))b!==s[p]&&(s[p]=b,u=!0);else{const m=Ln(p);a[m]=Ug(l,i,m,b,e,!1)}else b!==s[p]&&(s[p]=b,u=!0)}}}else{mx(e,t,a,s)&&(u=!0);let c;for(const d in i)(!t||!Wt(t,d)&&((c=$s(d))===d||!Wt(t,c)))&&(l?r&&(r[d]!==void 0||r[c]!==void 0)&&(a[d]=Ug(l,i,d,void 0,e,!0)):delete a[d]);if(s!==i)for(const d in s)(!t||!Wt(t,d))&&(delete s[d],u=!0)}u&&Rs(e.attrs,"set","")}function mx(e,t,r,n){const[a,s]=e.propsOptions;let o=!1,i;if(t)for(let l in t){if(mu(l))continue;const u=t[l];let c;a&&Wt(a,c=Ln(l))?!s||!s.includes(c)?r[c]=u:(i||(i={}))[c]=u:zd(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,o=!0)}if(s){const l=Gt(r),u=i||cr;for(let c=0;c<s.length;c++){const d=s[c];r[d]=Ug(a,l,d,u[d],e,!Wt(u,d))}}return o}function Ug(e,t,r,n,a,s){const o=e[r];if(o!=null){const i=Wt(o,"default");if(i&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&et(l)){const{propsDefaults:u}=a;if(r in u)n=u[r];else{const c=Eu(a);n=u[r]=l.call(null,t),c()}}else n=l;a.ce&&a.ce._setProp(r,n)}o[0]&&(s&&!i?n=!1:o[1]&&(n===""||n===$s(r))&&(n=!0))}return n}const $5=new WeakMap;function gx(e,t,r=!1){const n=r?$5:t.propsCache,a=n.get(e);if(a)return a;const s=e.props,o={},i=[];let l=!1;if(!et(e)){const c=d=>{l=!0;const[p,b]=gx(d,t,!0);Hr(o,p),b&&i.push(...b)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!s&&!l)return Rt(e)&&n.set(e,qi),qi;if(Ue(s))for(let c=0;c<s.length;c++){const d=Ln(s[c]);vx(d)&&(o[d]=cr)}else if(s)for(const c in s){const d=Ln(c);if(vx(d)){const p=s[c],b=o[d]=Ue(p)||et(p)?{type:p}:Hr({},p),m=b.type;let h=!1,v=!0;if(Ue(m))for(let y=0;y<m.length;++y){const T=m[y],S=et(T)&&T.name;if(S==="Boolean"){h=!0;break}else S==="String"&&(v=!1)}else h=et(m)&&m.name==="Boolean";b[0]=h,b[1]=v,(h||Wt(b,"default"))&&i.push(d)}}const u=[o,i];return Rt(e)&&n.set(e,u),u}function vx(e){return e[0]!=="$"&&!mu(e)}const qg=e=>e==="_"||e==="_ctx"||e==="$stable",Vg=e=>Ue(e)?e.map(rs):[rs(e)],R5=(e,t,r)=>{if(t._n)return t;const n=ie((...a)=>Vg(t(...a)),r);return n._c=!1,n},yx=(e,t,r)=>{const n=e._ctx;for(const a in e){if(qg(a))continue;const s=e[a];if(et(s))t[a]=R5(a,s,n);else if(s!=null){const o=Vg(s);t[a]=()=>o}}},bx=(e,t)=>{const r=Vg(t);e.slots.default=()=>r},wx=(e,t,r)=>{for(const n in t)(r||!qg(n))&&(e[n]=t[n])},L5=(e,t,r)=>{const n=e.slots=px();if(e.vnode.shapeFlag&32){const a=t._;a?(wx(n,t,r),r&&eT(n,"_",a,!0)):yx(t,n)}else t&&bx(e,t)},M5=(e,t,r)=>{const{vnode:n,slots:a}=e;let s=!0,o=cr;if(n.shapeFlag&32){const i=t._;i?r&&i===1?s=!1:wx(a,t,r):(s=!t.$stable,yx(t,a)),o=t}else t&&(bx(e,t),o={default:1});if(s)for(const i in a)!qg(i)&&o[i]==null&&delete a[i]},An=X5;function D5(e){return N5(e)}function N5(e,t){const r=yd();r.__VUE__=!0;const{insert:n,remove:a,patchProp:s,createElement:o,createText:i,createComment:l,setText:u,setElementText:c,parentNode:d,nextSibling:p,setScopeId:b=jr,insertStaticContent:m}=e,h=(X,re,ge,Re=null,Se=null,ke=null,qe=void 0,Pe=null,Me=!!re.dynamicChildren)=>{if(X===re)return;X&&!Xo(X,re)&&(Re=Ke(X),se(X,Se,ke,!0),X=null),re.patchFlag===-2&&(Me=!1,re.dynamicChildren=null);const{type:$e,ref:nt,shapeFlag:Ge}=re;switch($e){case Qi:v(X,re,ge,Re);break;case en:y(X,re,ge,Re);break;case Wg:X==null&&T(re,ge,Re,qe);break;case pt:L(X,re,ge,Re,Se,ke,qe,Pe,Me);break;default:Ge&1?C(X,re,ge,Re,Se,ke,qe,Pe,Me):Ge&6?B(X,re,ge,Re,Se,ke,qe,Pe,Me):(Ge&64||Ge&128)&&$e.process(X,re,ge,Re,Se,ke,qe,Pe,Me,Ne)}nt!=null&&Se?ku(nt,X&&X.ref,ke,re||X,!re):nt==null&&X&&X.ref!=null&&ku(X.ref,null,ke,X,!0)},v=(X,re,ge,Re)=>{if(X==null)n(re.el=i(re.children),ge,Re);else{const Se=re.el=X.el;re.children!==X.children&&u(Se,re.children)}},y=(X,re,ge,Re)=>{X==null?n(re.el=l(re.children||""),ge,Re):re.el=X.el},T=(X,re,ge,Re)=>{[X.el,X.anchor]=m(X.children,re,ge,Re,X.el,X.anchor)},S=({el:X,anchor:re},ge,Re)=>{let Se;for(;X&&X!==re;)Se=p(X),n(X,ge,Re),X=Se;n(re,ge,Re)},w=({el:X,anchor:re})=>{let ge;for(;X&&X!==re;)ge=p(X),a(X),X=ge;a(re)},C=(X,re,ge,Re,Se,ke,qe,Pe,Me)=>{re.type==="svg"?qe="svg":re.type==="math"&&(qe="mathml"),X==null?k(re,ge,Re,Se,ke,qe,Pe,Me):E(X,re,Se,ke,qe,Pe,Me)},k=(X,re,ge,Re,Se,ke,qe,Pe)=>{let Me,$e;const{props:nt,shapeFlag:Ge,transition:ye,dirs:Ce}=X;if(Me=X.el=o(X.type,ke,nt&&nt.is,nt),Ge&8?c(Me,X.children):Ge&16&&O(X.children,Me,null,Re,Se,Hg(X,ke),qe,Pe),Ce&&Ko(X,null,Re,"created"),f(Me,X,X.scopeId,qe,Re),nt){for(const Et in nt)Et!=="value"&&!mu(Et)&&s(Me,Et,null,nt[Et],ke,Re);"value"in nt&&s(Me,"value",null,nt.value,ke),($e=nt.onVnodeBeforeMount)&&ns($e,Re,X)}Ce&&Ko(X,null,Re,"beforeMount");const it=F5(Se,ye);it&&ye.beforeEnter(Me),n(Me,re,ge),(($e=nt&&nt.onVnodeMounted)||it||Ce)&&An(()=>{$e&&ns($e,Re,X),it&&ye.enter(Me),Ce&&Ko(X,null,Re,"mounted")},Se)},f=(X,re,ge,Re,Se)=>{if(ge&&b(X,ge),Re)for(let ke=0;ke<Re.length;ke++)b(X,Re[ke]);if(Se){let ke=Se.subTree;if(re===ke||Ax(ke.type)&&(ke.ssContent===re||ke.ssFallback===re)){const qe=Se.vnode;f(X,qe,qe.scopeId,qe.slotScopeIds,Se.parent)}}},O=(X,re,ge,Re,Se,ke,qe,Pe,Me=0)=>{for(let $e=Me;$e<X.length;$e++){const nt=X[$e]=Pe?uo(X[$e]):rs(X[$e]);h(null,nt,re,ge,Re,Se,ke,qe,Pe)}},E=(X,re,ge,Re,Se,ke,qe)=>{const Pe=re.el=X.el;let{patchFlag:Me,dynamicChildren:$e,dirs:nt}=re;Me|=X.patchFlag&16;const Ge=X.props||cr,ye=re.props||cr;let Ce;if(ge&&Jo(ge,!1),(Ce=ye.onVnodeBeforeUpdate)&&ns(Ce,ge,re,X),nt&&Ko(re,X,ge,"beforeUpdate"),ge&&Jo(ge,!0),(Ge.innerHTML&&ye.innerHTML==null||Ge.textContent&&ye.textContent==null)&&c(Pe,""),$e?N(X.dynamicChildren,$e,Pe,ge,Re,Hg(re,Se),ke):qe||M(X,re,Pe,null,ge,Re,Hg(re,Se),ke,!1),Me>0){if(Me&16)$(Pe,Ge,ye,ge,Se);else if(Me&2&&Ge.class!==ye.class&&s(Pe,"class",null,ye.class,Se),Me&4&&s(Pe,"style",Ge.style,ye.style,Se),Me&8){const it=re.dynamicProps;for(let Et=0;Et<it.length;Et++){const bt=it[Et],pr=Ge[bt],Ot=ye[bt];(Ot!==pr||bt==="value")&&s(Pe,bt,pr,Ot,Se,ge)}}Me&1&&X.children!==re.children&&c(Pe,re.children)}else!qe&&$e==null&&$(Pe,Ge,ye,ge,Se);((Ce=ye.onVnodeUpdated)||nt)&&An(()=>{Ce&&ns(Ce,ge,re,X),nt&&Ko(re,X,ge,"updated")},Re)},N=(X,re,ge,Re,Se,ke,qe)=>{for(let Pe=0;Pe<re.length;Pe++){const Me=X[Pe],$e=re[Pe],nt=Me.el&&(Me.type===pt||!Xo(Me,$e)||Me.shapeFlag&198)?d(Me.el):ge;h(Me,$e,nt,null,Re,Se,ke,qe,!0)}},$=(X,re,ge,Re,Se)=>{if(re!==ge){if(re!==cr)for(const ke in re)!mu(ke)&&!(ke in ge)&&s(X,ke,re[ke],null,Se,Re);for(const ke in ge){if(mu(ke))continue;const qe=ge[ke],Pe=re[ke];qe!==Pe&&ke!=="value"&&s(X,ke,Pe,qe,Se,Re)}"value"in ge&&s(X,"value",re.value,ge.value,Se)}},L=(X,re,ge,Re,Se,ke,qe,Pe,Me)=>{const $e=re.el=X?X.el:i(""),nt=re.anchor=X?X.anchor:i("");let{patchFlag:Ge,dynamicChildren:ye,slotScopeIds:Ce}=re;Ce&&(Pe=Pe?Pe.concat(Ce):Ce),X==null?(n($e,ge,Re),n(nt,ge,Re),O(re.children||[],ge,nt,Se,ke,qe,Pe,Me)):Ge>0&&Ge&64&&ye&&X.dynamicChildren?(N(X.dynamicChildren,ye,ge,Se,ke,qe,Pe),(re.key!=null||Se&&re===Se.subTree)&&zg(X,re,!0)):M(X,re,ge,nt,Se,ke,qe,Pe,Me)},B=(X,re,ge,Re,Se,ke,qe,Pe,Me)=>{re.slotScopeIds=Pe,X==null?re.shapeFlag&512?Se.ctx.activate(re,ge,Re,qe,Me):F(re,ge,Re,Se,ke,qe,Me):R(X,re,Me)},F=(X,re,ge,Re,Se,ke,qe)=>{const Pe=X.component=rF(X,Re,Se);if(Fd(X)&&(Pe.ctx.renderer=Ne),nF(Pe,!1,qe),Pe.asyncDep){if(Se&&Se.registerDep(Pe,H,qe),!X.el){const Me=Pe.subTree=ue(en);y(null,Me,re,ge),X.placeholder=Me.el}}else H(Pe,X,re,ge,Se,ke,qe)},R=(X,re,ge)=>{const Re=re.component=X.component;if(Y5(X,re,ge))if(Re.asyncDep&&!Re.asyncResolved){q(Re,re,ge);return}else Re.next=re,Re.update();else re.el=X.el,Re.vnode=re},H=(X,re,ge,Re,Se,ke,qe)=>{const Pe=()=>{if(X.isMounted){let{next:Ge,bu:ye,u:Ce,parent:it,vnode:Et}=X;{const mr=_x(X);if(mr){Ge&&(Ge.el=Et.el,q(X,Ge,qe)),mr.asyncDep.then(()=>{X.isUnmounted||Pe()});return}}let bt=Ge,pr;Jo(X,!1),Ge?(Ge.el=Et.el,q(X,Ge,qe)):Ge=Et,ye&&vd(ye),(pr=Ge.props&&Ge.props.onVnodeBeforeUpdate)&&ns(pr,it,Ge,Et),Jo(X,!0);const Ot=kx(X),kr=X.subTree;X.subTree=Ot,h(kr,Ot,d(kr.el),Ke(kr),X,Se,ke),Ge.el=Ot.el,bt===null&&J5(X,Ot.el),Ce&&An(Ce,Se),(pr=Ge.props&&Ge.props.onVnodeUpdated)&&An(()=>ns(pr,it,Ge,Et),Se)}else{let Ge;const{el:ye,props:Ce}=re,{bm:it,m:Et,parent:bt,root:pr,type:Ot}=X,kr=Yi(re);Jo(X,!1),it&&vd(it),!kr&&(Ge=Ce&&Ce.onVnodeBeforeMount)&&ns(Ge,bt,re),Jo(X,!0);{pr.ce&&pr.ce._def.shadowRoot!==!1&&pr.ce._injectChildStyle(Ot);const mr=X.subTree=kx(X);h(null,mr,ge,Re,X,Se,ke),re.el=mr.el}if(Et&&An(Et,Se),!kr&&(Ge=Ce&&Ce.onVnodeMounted)){const mr=re;An(()=>ns(Ge,bt,mr),Se)}(re.shapeFlag&256||bt&&Yi(bt.vnode)&&bt.vnode.shapeFlag&256)&&X.a&&An(X.a,Se),X.isMounted=!0,re=ge=Re=null}};X.scope.on();const Me=X.effect=new iT(Pe);X.scope.off();const $e=X.update=Me.run.bind(Me),nt=X.job=Me.runIfDirty.bind(Me);nt.i=X,nt.id=X.uid,Me.scheduler=()=>Pg(nt),Jo(X,!0),$e()},q=(X,re,ge)=>{re.component=X;const Re=X.vnode.props;X.vnode=re,X.next=null,E5(X,re.props,Re,ge),M5(X,re.children,ge),Za(),$T(X),es()},M=(X,re,ge,Re,Se,ke,qe,Pe,Me=!1)=>{const $e=X&&X.children,nt=X?X.shapeFlag:0,Ge=re.children,{patchFlag:ye,shapeFlag:Ce}=re;if(ye>0){if(ye&128){Y($e,Ge,ge,Re,Se,ke,qe,Pe,Me);return}else if(ye&256){D($e,Ge,ge,Re,Se,ke,qe,Pe,Me);return}}Ce&8?(nt&16&&We($e,Se,ke),Ge!==$e&&c(ge,Ge)):nt&16?Ce&16?Y($e,Ge,ge,Re,Se,ke,qe,Pe,Me):We($e,Se,ke,!0):(nt&8&&c(ge,""),Ce&16&&O(Ge,ge,Re,Se,ke,qe,Pe,Me))},D=(X,re,ge,Re,Se,ke,qe,Pe,Me)=>{X=X||qi,re=re||qi;const $e=X.length,nt=re.length,Ge=Math.min($e,nt);let ye;for(ye=0;ye<Ge;ye++){const Ce=re[ye]=Me?uo(re[ye]):rs(re[ye]);h(X[ye],Ce,ge,null,Se,ke,qe,Pe,Me)}$e>nt?We(X,Se,ke,!0,!1,Ge):O(re,ge,Re,Se,ke,qe,Pe,Me,Ge)},Y=(X,re,ge,Re,Se,ke,qe,Pe,Me)=>{let $e=0;const nt=re.length;let Ge=X.length-1,ye=nt-1;for(;$e<=Ge&&$e<=ye;){const Ce=X[$e],it=re[$e]=Me?uo(re[$e]):rs(re[$e]);if(Xo(Ce,it))h(Ce,it,ge,null,Se,ke,qe,Pe,Me);else break;$e++}for(;$e<=Ge&&$e<=ye;){const Ce=X[Ge],it=re[ye]=Me?uo(re[ye]):rs(re[ye]);if(Xo(Ce,it))h(Ce,it,ge,null,Se,ke,qe,Pe,Me);else break;Ge--,ye--}if($e>Ge){if($e<=ye){const Ce=ye+1,it=Ce<nt?re[Ce].el:Re;for(;$e<=ye;)h(null,re[$e]=Me?uo(re[$e]):rs(re[$e]),ge,it,Se,ke,qe,Pe,Me),$e++}}else if($e>ye)for(;$e<=Ge;)se(X[$e],Se,ke,!0),$e++;else{const Ce=$e,it=$e,Et=new Map;for($e=it;$e<=ye;$e++){const J=re[$e]=Me?uo(re[$e]):rs(re[$e]);J.key!=null&&Et.set(J.key,$e)}let bt,pr=0;const Ot=ye-it+1;let kr=!1,mr=0;const ce=new Array(Ot);for($e=0;$e<Ot;$e++)ce[$e]=0;for($e=Ce;$e<=Ge;$e++){const J=X[$e];if(pr>=Ot){se(J,Se,ke,!0);continue}let V;if(J.key!=null)V=Et.get(J.key);else for(bt=it;bt<=ye;bt++)if(ce[bt-it]===0&&Xo(J,re[bt])){V=bt;break}V===void 0?se(J,Se,ke,!0):(ce[V-it]=$e+1,V>=mr?mr=V:kr=!0,h(J,re[V],ge,null,Se,ke,qe,Pe,Me),pr++)}const fe=kr?B5(ce):qi;for(bt=fe.length-1,$e=Ot-1;$e>=0;$e--){const J=it+$e,V=re[J],_e=re[J+1],Xe=J+1<nt?_e.el||_e.placeholder:Re;ce[$e]===0?h(null,V,ge,Xe,Se,ke,qe,Pe,Me):kr&&(bt<0||$e!==fe[bt]?Z(V,ge,Xe,2):bt--)}}},Z=(X,re,ge,Re,Se=null)=>{const{el:ke,type:qe,transition:Pe,children:Me,shapeFlag:$e}=X;if($e&6){Z(X.component.subTree,re,ge,Re);return}if($e&128){X.suspense.move(re,ge,Re);return}if($e&64){qe.move(X,re,ge,Ne);return}if(qe===pt){n(ke,re,ge);for(let Ge=0;Ge<Me.length;Ge++)Z(Me[Ge],re,ge,Re);n(X.anchor,re,ge);return}if(qe===Wg){S(X,re,ge);return}if(Re!==2&&$e&1&&Pe)if(Re===0)Pe.beforeEnter(ke),n(ke,re,ge),An(()=>Pe.enter(ke),Se);else{const{leave:Ge,delayLeave:ye,afterLeave:Ce}=Pe,it=()=>{X.ctx.isUnmounted?a(ke):n(ke,re,ge)},Et=()=>{ke._isLeaving&&ke[Ns](!0),Ge(ke,()=>{it(),Ce&&Ce()})};ye?ye(ke,it,Et):Et()}else n(ke,re,ge)},se=(X,re,ge,Re=!1,Se=!1)=>{const{type:ke,props:qe,ref:Pe,children:Me,dynamicChildren:$e,shapeFlag:nt,patchFlag:Ge,dirs:ye,cacheIndex:Ce}=X;if(Ge===-2&&(Se=!1),Pe!=null&&(Za(),ku(Pe,null,ge,X,!0),es()),Ce!=null&&(re.renderCache[Ce]=void 0),nt&256){re.ctx.deactivate(X);return}const it=nt&1&&ye,Et=!Yi(X);let bt;if(Et&&(bt=qe&&qe.onVnodeBeforeUnmount)&&ns(bt,re,X),nt&6)ve(X.component,ge,Re);else{if(nt&128){X.suspense.unmount(ge,Re);return}it&&Ko(X,null,re,"beforeUnmount"),nt&64?X.type.remove(X,re,ge,Ne,Re):$e&&!$e.hasOnce&&(ke!==pt||Ge>0&&Ge&64)?We($e,re,ge,!1,!0):(ke===pt&&Ge&384||!Se&&nt&16)&&We(Me,re,ge),Re&&ne(X)}(Et&&(bt=qe&&qe.onVnodeUnmounted)||it)&&An(()=>{bt&&ns(bt,re,X),it&&Ko(X,null,re,"unmounted")},ge)},ne=X=>{const{type:re,el:ge,anchor:Re,transition:Se}=X;if(re===pt){me(ge,Re);return}if(re===Wg){w(X);return}const ke=()=>{a(ge),Se&&!Se.persisted&&Se.afterLeave&&Se.afterLeave()};if(X.shapeFlag&1&&Se&&!Se.persisted){const{leave:qe,delayLeave:Pe}=Se,Me=()=>qe(ge,ke);Pe?Pe(X.el,ke,Me):Me()}else ke()},me=(X,re)=>{let ge;for(;X!==re;)ge=p(X),a(X),X=ge;a(re)},ve=(X,re,ge)=>{const{bum:Re,scope:Se,job:ke,subTree:qe,um:Pe,m:Me,a:$e}=X;Sx(Me),Sx($e),Re&&vd(Re),Se.stop(),ke&&(ke.flags|=8,se(qe,X,re,ge)),Pe&&An(Pe,re),An(()=>{X.isUnmounted=!0},re)},We=(X,re,ge,Re=!1,Se=!1,ke=0)=>{for(let qe=ke;qe<X.length;qe++)se(X[qe],re,ge,Re,Se)},Ke=X=>{if(X.shapeFlag&6)return Ke(X.component.subTree);if(X.shapeFlag&128)return X.suspense.next();const re=p(X.anchor||X.el),ge=re&&re[DT];return ge?p(ge):re};let xe=!1;const ze=(X,re,ge)=>{X==null?re._vnode&&se(re._vnode,null,null,!0):h(re._vnode||null,X,re,null,null,null,ge),re._vnode=X,xe||(xe=!0,$T(),RT(),xe=!1)},Ne={p:h,um:se,m:Z,r:ne,mt:F,mc:O,pc:M,pbc:N,n:Ke,o:e};return{render:ze,hydrate:void 0,createApp:O5(ze)}}function Hg({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function Jo({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function F5(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function zg(e,t,r=!1){const n=e.children,a=t.children;if(Ue(n)&&Ue(a))for(let s=0;s<n.length;s++){const o=n[s];let i=a[s];i.shapeFlag&1&&!i.dynamicChildren&&((i.patchFlag<=0||i.patchFlag===32)&&(i=a[s]=uo(a[s]),i.el=o.el),!r&&i.patchFlag!==-2&&zg(o,i)),i.type===Qi&&i.patchFlag!==-1&&(i.el=o.el),i.type===en&&!i.el&&(i.el=o.el)}}function B5(e){const t=e.slice(),r=[0];let n,a,s,o,i;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(a=r[r.length-1],e[a]<u){t[n]=a,r.push(n);continue}for(s=0,o=r.length-1;s<o;)i=s+o>>1,e[r[i]]<u?s=i+1:o=i;u<e[r[s]]&&(s>0&&(t[n]=r[s-1]),r[s]=n)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}function _x(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:_x(t)}function Sx(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const j5=Symbol.for("v-scx"),U5=()=>ft(j5);function Bs(e,t){return Hd(e,null,t)}function q5(e,t){return Hd(e,null,{flush:"sync"})}function tt(e,t,r){return Hd(e,t,r)}function Hd(e,t,r=cr){const{immediate:n,deep:a,flush:s,once:o}=r,i=Hr({},r),l=t&&n||!t&&s!=="post";let u;if($u){if(s==="sync"){const b=U5();u=b.__watcherHandles||(b.__watcherHandles=[])}else if(!l){const b=()=>{};return b.stop=jr,b.resume=jr,b.pause=jr,b}}const c=vn;i.call=(b,m,h)=>$a(b,c,m,h);let d=!1;s==="post"?i.scheduler=b=>{An(b,c&&c.suspense)}:s!=="sync"&&(d=!0,i.scheduler=(b,m)=>{m?b():Pg(b)}),i.augmentJob=b=>{t&&(b.flags|=4),d&&(b.flags|=2,c&&(b.id=c.uid,b.i=c))};const p=n5(e,t,i);return $u&&(u?u.push(p):l&&p()),p}function V5(e,t,r){const n=this.proxy,a=mt(e)?e.includes(".")?Tx(n,e):()=>n[e]:e.bind(n,n);let s;et(t)?s=t:(s=t.handler,r=t);const o=Eu(this),i=Hd(a,s.bind(n),r);return o(),i}function Tx(e,t){const r=t.split(".");return()=>{let n=e;for(let a=0;a<r.length&&n;a++)n=n[r[a]];return n}}function H5(e,t,r=cr){const n=Vt(),a=Ln(t),s=$s(t),o=xx(e,a),i=X4((l,u)=>{let c,d=cr,p;return q5(()=>{const b=e[a];Mn(c,b)&&(c=b,u())}),{get(){return l(),r.get?r.get(c):c},set(b){const m=r.set?r.set(b):b;if(!Mn(m,c)&&!(d!==cr&&Mn(b,d)))return;const h=n.vnode.props;h&&(t in h||a in h||s in h)&&(`onUpdate:${t}`in h||`onUpdate:${a}`in h||`onUpdate:${s}`in h)||(c=b,u()),n.emit(`update:${t}`,m),Mn(b,m)&&Mn(b,d)&&!Mn(m,p)&&u(),d=b,p=m}}});return i[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||cr:i,done:!1}:{done:!0}}}},i}const xx=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ln(t)}Modifiers`]||e[`${$s(t)}Modifiers`];function z5(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||cr;let a=r;const s=t.startsWith("update:"),o=s&&xx(n,t.slice(7));o&&(o.trim&&(a=r.map(c=>mt(c)?c.trim():c)),o.number&&(a=r.map(hg)));let i,l=n[i=gd(t)]||n[i=gd(Ln(t))];!l&&s&&(l=n[i=gd($s(t))]),l&&$a(l,e,6,a);const u=n[i+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[i])return;e.emitted[i]=!0,$a(u,e,6,a)}}const W5=new WeakMap;function Cx(e,t,r=!1){const n=r?W5:t.emitsCache,a=n.get(e);if(a!==void 0)return a;const s=e.emits;let o={},i=!1;if(!et(e)){const l=u=>{const c=Cx(u,t,!0);c&&(i=!0,Hr(o,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!i?(Rt(e)&&n.set(e,null),null):(Ue(s)?s.forEach(l=>o[l]=null):Hr(o,s),Rt(e)&&n.set(e,o),o)}function zd(e,t){return!e||!dd(t)?!1:(t=t.slice(2).replace(/Once$/,""),Wt(e,t[0].toLowerCase()+t.slice(1))||Wt(e,$s(t))||Wt(e,t))}function iee(){}function kx(e){const{type:t,vnode:r,proxy:n,withProxy:a,propsOptions:[s],slots:o,attrs:i,emit:l,render:u,renderCache:c,props:d,data:p,setupState:b,ctx:m,inheritAttrs:h}=e,v=$d(e);let y,T;try{if(r.shapeFlag&4){const w=a||n,C=w;y=rs(u.call(C,w,c,d,b,p,m)),T=i}else{const w=t;y=rs(w.length>1?w(d,{attrs:i,slots:o,emit:l}):w(d,null)),T=t.props?i:K5(i)}}catch(w){Ou.length=0,Pd(w,e,1),y=ue(en)}let S=y;if(T&&h!==!1){const w=Object.keys(T),{shapeFlag:C}=S;w.length&&C&7&&(s&&w.some(cg)&&(T=G5(T,s)),S=js(S,T,!1,!0))}return r.dirs&&(S=js(S,null,!1,!0),S.dirs=S.dirs?S.dirs.concat(r.dirs):r.dirs),r.transition&&Go(S,r.transition),y=S,$d(v),y}const K5=e=>{let t;for(const r in e)(r==="class"||r==="style"||dd(r))&&((t||(t={}))[r]=e[r]);return t},G5=(e,t)=>{const r={};for(const n in e)(!cg(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function Y5(e,t,r){const{props:n,children:a,component:s}=e,{props:o,children:i,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Ix(n,o,u):!!o;if(l&8){const c=t.dynamicProps;for(let d=0;d<c.length;d++){const p=c[d];if(o[p]!==n[p]&&!zd(u,p))return!0}}}else return(a||i)&&(!i||!i.$stable)?!0:n===o?!1:n?o?Ix(n,o,u):!0:!!o;return!1}function Ix(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let a=0;a<n.length;a++){const s=n[a];if(t[s]!==e[s]&&!zd(r,s))return!0}return!1}function J5({vnode:e,parent:t},r){for(;t;){const n=t.subTree;if(n.suspense&&n.suspense.activeBranch===e&&(n.el=e.el),n===e)(e=t.vnode).el=r,t=t.parent;else break}}const Ax=e=>e.__isSuspense;function X5(e,t){t&&t.pendingBranch?Ue(e)?t.effects.push(...e):t.effects.push(e):c5(e)}const pt=Symbol.for("v-fgt"),Qi=Symbol.for("v-txt"),en=Symbol.for("v-cmt"),Wg=Symbol.for("v-stc"),Ou=[];let Xn=null;function G(e=!1){Ou.push(Xn=e?null:[])}function Q5(){Ou.pop(),Xn=Ou[Ou.length-1]||null}let Pu=1;function Wd(e,t=!1){Pu+=e,e<0&&Xn&&t&&(Xn.hasOnce=!0)}function Ox(e){return e.dynamicChildren=Pu>0?Xn||qi:null,Q5(),Pu>0&&Xn&&Xn.push(e),e}function le(e,t,r,n,a,s){return Ox(K(e,t,r,n,a,s,!0))}function Le(e,t,r,n,a){return Ox(ue(e,t,r,n,a,!0))}function ha(e){return e?e.__v_isVNode===!0:!1}function Xo(e,t){return e.type===t.type&&e.key===t.key}const Px=({key:e})=>e??null,Kd=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?mt(e)||lr(e)||et(e)?{i:un,r:e,k:t,f:!!r}:e:null);function K(e,t=null,r=null,n=0,a=null,s=e===pt?0:1,o=!1,i=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Px(t),ref:t&&Kd(t),scopeId:MT,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:a,dynamicChildren:null,appContext:null,ctx:un};return i?(Gg(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=mt(r)?8:16),Pu>0&&!o&&Xn&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Xn.push(l),l}const ue=Z5;function Z5(e,t=null,r=null,n=0,a=null,s=!1){if((!e||e===tx)&&(e=en),ha(e)){const i=js(e,t,!0);return r&&Gg(i,r),Pu>0&&!s&&Xn&&(i.shapeFlag&6?Xn[Xn.indexOf(e)]=i:Xn.push(i)),i.patchFlag=-2,i}if(lF(e)&&(e=e.__vccOpts),t){t=Kg(t);let{class:i,style:l}=t;i&&!mt(i)&&(t.class=Q(i)),Rt(l)&&(Ig(l)&&!Ue(l)&&(l=Hr({},l)),t.style=Dt(l))}const o=mt(e)?1:Ax(e)?128:NT(e)?64:Rt(e)?4:et(e)?2:0;return K(e,t,r,n,a,o,s,!0)}function Kg(e){return e?Ig(e)||hx(e)?Hr({},e):e:null}function js(e,t,r=!1,n=!1){const{props:a,ref:s,patchFlag:o,children:i,transition:l}=e,u=t?gn(a||{},t):a,c={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Px(u),ref:t&&t.ref?r&&s?Ue(s)?s.concat(Kd(t)):[s,Kd(t)]:Kd(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:i,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pt?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&js(e.ssContent),ssFallback:e.ssFallback&&js(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&n&&Go(c,l.clone(c)),c}function ot(e=" ",t=0){return ue(Qi,null,e,t)}function Oe(e="",t=!1){return t?(G(),Le(en,null,e)):ue(en,null,e)}function rs(e){return e==null||typeof e=="boolean"?ue(en):Ue(e)?ue(pt,null,e.slice()):ha(e)?uo(e):ue(Qi,null,String(e))}function uo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:js(e)}function Gg(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ue(t))r=16;else if(typeof t=="object")if(n&65){const a=t.default;a&&(a._c&&(a._d=!1),Gg(e,a()),a._c&&(a._d=!0));return}else{r=32;const a=t._;!a&&!hx(t)?t._ctx=un:a===3&&un&&(un.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else et(t)?(t={default:t,_ctx:un},r=32):(t=String(t),n&64?(r=16,t=[ot(t)]):r=8);e.children=t,e.shapeFlag|=r}function gn(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const a in n)if(a==="class")t.class!==n.class&&(t.class=Q([t.class,n.class]));else if(a==="style")t.style=Dt([t.style,n.style]);else if(dd(a)){const s=t[a],o=n[a];o&&s!==o&&!(Ue(s)&&s.includes(o))&&(t[a]=s?[].concat(s,o):o)}else a!==""&&(t[a]=n[a])}return t}function ns(e,t,r,n=null){$a(e,t,7,[r,n])}const eF=dx();let tF=0;function rF(e,t,r){const n=e.type,a=(t?t.appContext:e.appContext)||eF,s={uid:tF++,vnode:e,type:n,parent:t,appContext:a,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new A4(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(a.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gx(n,a),emitsOptions:Cx(n,a),emit:null,emitted:null,propsDefaults:cr,inheritAttrs:n.inheritAttrs,ctx:cr,data:cr,props:cr,attrs:cr,slots:cr,refs:cr,setupState:cr,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=z5.bind(null,s),e.ce&&e.ce(s),s}let vn=null;const Vt=()=>vn||un;let Gd,Yg;{const e=yd(),t=(r,n)=>{let a;return(a=e[r])||(a=e[r]=[]),a.push(n),s=>{a.length>1?a.forEach(o=>o(s)):a[0](s)}};Gd=t("__VUE_INSTANCE_SETTERS__",r=>vn=r),Yg=t("__VUE_SSR_SETTERS__",r=>$u=r)}const Eu=e=>{const t=vn;return Gd(e),e.scope.on(),()=>{e.scope.off(),Gd(t)}},Ex=()=>{vn&&vn.scope.off(),Gd(null)};function $x(e){return e.vnode.shapeFlag&4}let $u=!1;function nF(e,t=!1,r=!1){t&&Yg(t);const{props:n,children:a}=e.vnode,s=$x(e);P5(e,n,s,t),L5(e,a,r||t);const o=s?aF(e,t):void 0;return t&&Yg(!1),o}function aF(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,_5);const{setup:n}=r;if(n){Za();const a=e.setupContext=n.length>1?Mx(e):null,s=Eu(e),o=Wi(n,e,0,[e.props,a]),i=QS(o);if(es(),s(),(i||e.sp)&&!Yi(e)&&JT(e),i){if(o.then(Ex,Ex),t)return o.then(l=>{Rx(e,l)}).catch(l=>{Pd(l,e,0)});e.asyncDep=o}else Rx(e,o)}else Lx(e)}function Rx(e,t,r){et(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Rt(t)&&(e.setupState=IT(t)),Lx(e)}function Lx(e,t,r){const n=e.type;e.render||(e.render=n.render||jr);{const a=Eu(e);Za();try{T5(e)}finally{es(),a()}}}const sF={get(e,t){return mn(e,"get",""),e[t]}};function Mx(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,sF),slots:e.slots,emit:e.emit,expose:t}}function Yd(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(IT(Ag(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Iu)return Iu[r](e)},has(t,r){return r in t||r in Iu}})):e.proxy}const oF=/(?:^|[-_])\w/g,iF=e=>e.replace(oF,t=>t.toUpperCase()).replace(/[-_]/g,"");function Dx(e,t=!0){return et(e)?e.displayName||e.name:e.name||t&&e.__name}function Nx(e,t,r=!1){let n=Dx(t);if(!n&&t.__file){const a=t.__file.match(/([^/\\]+)\.\w+$/);a&&(n=a[1])}if(!n&&e&&e.parent){const a=s=>{for(const o in s)if(s[o]===t)return o};n=a(e.components||e.parent.type.components)||a(e.appContext.components)}return n?iF(n):r?"App":"Anonymous"}function lF(e){return et(e)&&"__vccOpts"in e}const W=(e,t)=>t5(e,t,$u);function It(e,t,r){const n=(s,o,i)=>{Wd(-1);try{return ue(s,o,i)}finally{Wd(1)}},a=arguments.length;return a===2?Rt(t)&&!Ue(t)?ha(t)?n(e,null,[t]):n(e,t):n(e,null,t):(a>3?r=Array.prototype.slice.call(arguments,2):a===3&&ha(r)&&(r=[r]),n(e,t,r))}const uF="3.5.21",cF=jr;/**
* @vue/runtime-dom v3.5.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jg;const Fx=typeof window<"u"&&window.trustedTypes;if(Fx)try{Jg=Fx.createPolicy("vue",{createHTML:e=>e})}catch{}const Bx=Jg?e=>Jg.createHTML(e):e=>e,dF="http://www.w3.org/2000/svg",fF="http://www.w3.org/1998/Math/MathML",Us=typeof document<"u"?document:null,jx=Us&&Us.createElement("template"),pF={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const a=t==="svg"?Us.createElementNS(dF,e):t==="mathml"?Us.createElementNS(fF,e):r?Us.createElement(e,{is:r}):Us.createElement(e);return e==="select"&&n&&n.multiple!=null&&a.setAttribute("multiple",n.multiple),a},createText:e=>Us.createTextNode(e),createComment:e=>Us.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Us.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,n,a,s){const o=r?r.previousSibling:t.lastChild;if(a&&(a===s||a.nextSibling))for(;t.insertBefore(a.cloneNode(!0),r),!(a===s||!(a=a.nextSibling)););else{jx.innerHTML=Bx(n==="svg"?`<svg>${e}</svg>`:n==="mathml"?`<math>${e}</math>`:e);const i=jx.content;if(n==="svg"||n==="mathml"){const l=i.firstChild;for(;l.firstChild;)i.appendChild(l.firstChild);i.removeChild(l)}t.insertBefore(i,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},co="transition",Ru="animation",Zi=Symbol("_vtc"),Ux={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},qx=Hr({},zT,Ux),ma=(e=>(e.displayName="Transition",e.props=qx,e))((e,{slots:t})=>It(p5,Hx(e),t)),Qo=(e,t=[])=>{Ue(e)?e.forEach(r=>r(...t)):e&&e(...t)},Vx=e=>e?Ue(e)?e.some(t=>t.length>1):e.length>1:!1;function Hx(e){const t={};for(const L in e)L in Ux||(t[L]=e[L]);if(e.css===!1)return t;const{name:r="v",type:n,duration:a,enterFromClass:s=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:i=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:c=i,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:p=`${r}-leave-active`,leaveToClass:b=`${r}-leave-to`}=e,m=hF(a),h=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:T,onEnterCancelled:S,onLeave:w,onLeaveCancelled:C,onBeforeAppear:k=y,onAppear:f=T,onAppearCancelled:O=S}=t,E=(L,B,F,R)=>{L._enterCancelled=R,fo(L,B?c:i),fo(L,B?u:o),F&&F()},N=(L,B)=>{L._isLeaving=!1,fo(L,d),fo(L,b),fo(L,p),B&&B()},$=L=>(B,F)=>{const R=L?f:T,H=()=>E(B,L,F);Qo(R,[B,H]),zx(()=>{fo(B,L?l:s),as(B,L?c:i),Vx(R)||Wx(B,n,h,H)})};return Hr(t,{onBeforeEnter(L){Qo(y,[L]),as(L,s),as(L,o)},onBeforeAppear(L){Qo(k,[L]),as(L,l),as(L,u)},onEnter:$(!1),onAppear:$(!0),onLeave(L,B){L._isLeaving=!0;const F=()=>N(L,B);as(L,d),L._enterCancelled?(as(L,p),Qg()):(Qg(),as(L,p)),zx(()=>{L._isLeaving&&(fo(L,d),as(L,b),Vx(w)||Wx(L,n,v,F))}),Qo(w,[L,F])},onEnterCancelled(L){E(L,!1,void 0,!0),Qo(S,[L])},onAppearCancelled(L){E(L,!0,void 0,!0),Qo(O,[L])},onLeaveCancelled(L){N(L),Qo(C,[L])}})}function hF(e){if(e==null)return null;if(Rt(e))return[Xg(e.enter),Xg(e.leave)];{const t=Xg(e);return[t,t]}}function Xg(e){return _4(e)}function as(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[Zi]||(e[Zi]=new Set)).add(t)}function fo(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const r=e[Zi];r&&(r.delete(t),r.size||(e[Zi]=void 0))}function zx(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let mF=0;function Wx(e,t,r,n){const a=e._endId=++mF,s=()=>{a===e._endId&&n()};if(r!=null)return setTimeout(s,r);const{type:o,timeout:i,propCount:l}=Kx(e,t);if(!o)return n();const u=o+"end";let c=0;const d=()=>{e.removeEventListener(u,p),s()},p=b=>{b.target===e&&++c>=l&&d()};setTimeout(()=>{c<l&&d()},i+1),e.addEventListener(u,p)}function Kx(e,t){const r=window.getComputedStyle(e),n=m=>(r[m]||"").split(", "),a=n(`${co}Delay`),s=n(`${co}Duration`),o=Gx(a,s),i=n(`${Ru}Delay`),l=n(`${Ru}Duration`),u=Gx(i,l);let c=null,d=0,p=0;t===co?o>0&&(c=co,d=o,p=s.length):t===Ru?u>0&&(c=Ru,d=u,p=l.length):(d=Math.max(o,u),c=d>0?o>u?co:Ru:null,p=c?c===co?s.length:l.length:0);const b=c===co&&/\b(?:transform|all)(?:,|$)/.test(n(`${co}Property`).toString());return{type:c,timeout:d,propCount:p,hasTransform:b}}function Gx(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>Yx(r)+Yx(e[n])))}function Yx(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Qg(){return document.body.offsetHeight}function gF(e,t,r){const n=e[Zi];n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const Jd=Symbol("_vod"),Jx=Symbol("_vsh"),Sr={name:"show",beforeMount(e,{value:t},{transition:r}){e[Jd]=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Lu(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Lu(e,!0),n.enter(e)):n.leave(e,()=>{Lu(e,!1)}):Lu(e,t))},beforeUnmount(e,{value:t}){Lu(e,t)}};function Lu(e,t){e.style.display=t?e[Jd]:"none",e[Jx]=!t}const vF=Symbol(""),yF=/(?:^|;)\s*display\s*:/;function bF(e,t,r){const n=e.style,a=mt(r);let s=!1;if(r&&!a){if(t)if(mt(t))for(const o of t.split(";")){const i=o.slice(0,o.indexOf(":")).trim();r[i]==null&&Xd(n,i,"")}else for(const o in t)r[o]==null&&Xd(n,o,"");for(const o in r)o==="display"&&(s=!0),Xd(n,o,r[o])}else if(a){if(t!==r){const o=n[vF];o&&(r+=";"+o),n.cssText=r,s=yF.test(r)}}else t&&e.removeAttribute("style");Jd in e&&(e[Jd]=s?n.display:"",e[Jx]&&(n.display="none"))}const Xx=/\s*!important$/;function Xd(e,t,r){if(Ue(r))r.forEach(n=>Xd(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=wF(e,t);Xx.test(r)?e.setProperty($s(n),r.replace(Xx,""),"important"):e[n]=r}}const Qx=["Webkit","Moz","ms"],Zg={};function wF(e,t){const r=Zg[t];if(r)return r;let n=Ln(t);if(n!=="filter"&&n in e)return Zg[t]=n;n=md(n);for(let a=0;a<Qx.length;a++){const s=Qx[a]+n;if(s in e)return Zg[t]=s}return t}const Zx="http://www.w3.org/1999/xlink";function eC(e,t,r,n,a,s=k4(t)){n&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(Zx,t.slice(6,t.length)):e.setAttributeNS(Zx,t,r):r==null||s&&!nT(r)?e.removeAttribute(t):e.setAttribute(t,s?"":Pa(r)?String(r):r)}function tC(e,t,r,n,a){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?Bx(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const i=s==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(i!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let o=!1;if(r===""||r==null){const i=typeof e[t];i==="boolean"?r=nT(r):r==null&&i==="string"?(r="",o=!0):i==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(a||t)}function Zo(e,t,r,n){e.addEventListener(t,r,n)}function _F(e,t,r,n){e.removeEventListener(t,r,n)}const rC=Symbol("_vei");function SF(e,t,r,n,a=null){const s=e[rC]||(e[rC]={}),o=s[t];if(n&&o)o.value=n;else{const[i,l]=TF(t);if(n){const u=s[t]=kF(n,a);Zo(e,i,u,l)}else o&&(_F(e,i,o,l),s[t]=void 0)}}const nC=/(?:Once|Passive|Capture)$/;function TF(e){let t;if(nC.test(e)){t={};let n;for(;n=e.match(nC);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):$s(e.slice(2)),t]}let ev=0;const xF=Promise.resolve(),CF=()=>ev||(xF.then(()=>ev=0),ev=Date.now());function kF(e,t){const r=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=r.attached)return;$a(IF(n,r.value),t,5,[n])};return r.value=e,r.attached=CF(),r}function IF(e,t){if(Ue(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>a=>!a._stopped&&n&&n(a))}else return t}const aC=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,AF=(e,t,r,n,a,s)=>{const o=a==="svg";t==="class"?gF(e,n,o):t==="style"?bF(e,r,n):dd(t)?cg(t)||SF(e,t,r,n,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):OF(e,t,n,o))?(tC(e,t,n),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&eC(e,t,n,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!mt(n))?tC(e,Ln(t),n,s,t):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),eC(e,t,n,o))};function OF(e,t,r,n){if(n)return!!(t==="innerHTML"||t==="textContent"||t in e&&aC(t)&&et(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const a=e.tagName;if(a==="IMG"||a==="VIDEO"||a==="CANVAS"||a==="SOURCE")return!1}return aC(t)&&mt(r)?!1:t in e}const sC=new WeakMap,oC=new WeakMap,Qd=Symbol("_moveCb"),iC=Symbol("_enterCb"),PF=(e=>(delete e.props.mode,e))({name:"TransitionGroup",props:Hr({},qx,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=Vt(),n=HT();let a,s;return Ji(()=>{if(!a.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!LF(a[0].el,r.vnode.el,o)){a=[];return}a.forEach(EF),a.forEach($F);const i=a.filter(RF);Qg(),i.forEach(l=>{const u=l.el,c=u.style;as(u,o),c.transform=c.webkitTransform=c.transitionDuration="";const d=u[Qd]=p=>{p&&p.target!==u||(!p||p.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",d),u[Qd]=null,fo(u,o))};u.addEventListener("transitionend",d)}),a=[]}),()=>{const o=Gt(e),i=Hx(o);let l=o.tag||pt;if(a=[],s)for(let u=0;u<s.length;u++){const c=s[u];c.el&&c.el instanceof Element&&(a.push(c),Go(c,Cu(c,i,n,r)),sC.set(c,c.el.getBoundingClientRect()))}s=t.default?Rg(t.default()):[];for(let u=0;u<s.length;u++){const c=s[u];c.key!=null&&Go(c,Cu(c,i,n,r))}return ue(l,null,s)}}});function EF(e){const t=e.el;t[Qd]&&t[Qd](),t[iC]&&t[iC]()}function $F(e){oC.set(e,e.el.getBoundingClientRect())}function RF(e){const t=sC.get(e),r=oC.get(e),n=t.left-r.left,a=t.top-r.top;if(n||a){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${n}px,${a}px)`,s.transitionDuration="0s",e}}function LF(e,t,r){const n=e.cloneNode(),a=e[Zi];a&&a.forEach(i=>{i.split(/\s+/).forEach(l=>l&&n.classList.remove(l))}),r.split(/\s+/).forEach(i=>i&&n.classList.add(i)),n.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(n);const{hasTransform:o}=Kx(n);return s.removeChild(n),o}const Zd=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ue(t)?r=>vd(t,r):t};function MF(e){e.target.composing=!0}function lC(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const el=Symbol("_assign"),DF={created(e,{modifiers:{lazy:t,trim:r,number:n}},a){e[el]=Zd(a);const s=n||a.props&&a.props.type==="number";Zo(e,t?"change":"input",o=>{if(o.target.composing)return;let i=e.value;r&&(i=i.trim()),s&&(i=hg(i)),e[el](i)}),r&&Zo(e,"change",()=>{e.value=e.value.trim()}),t||(Zo(e,"compositionstart",MF),Zo(e,"compositionend",lC),Zo(e,"change",lC))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:n,trim:a,number:s}},o){if(e[el]=Zd(o),e.composing)return;const i=(s||e.type==="number")&&!/^0\d/.test(e.value)?hg(e.value):e.value,l=t??"";i!==l&&(document.activeElement===e&&e.type!=="range"&&(n&&t===r||a&&e.value.trim()===l)||(e.value=l))}},ef={deep:!0,created(e,t,r){e[el]=Zd(r),Zo(e,"change",()=>{const n=e._modelValue,a=NF(e),s=e.checked,o=e[el];if(Ue(n)){const i=aT(n,a),l=i!==-1;if(s&&!l)o(n.concat(a));else if(!s&&l){const u=[...n];u.splice(i,1),o(u)}}else if(fd(n)){const i=new Set(n);s?i.add(a):i.delete(a),o(i)}else o(cC(e,s))})},mounted:uC,beforeUpdate(e,t,r){e[el]=Zd(r),uC(e,t,r)}};function uC(e,{value:t,oldValue:r},n){e._modelValue=t;let a;if(Ue(t))a=aT(t,n.props.value)>-1;else if(fd(t))a=t.has(n.props.value);else{if(t===r)return;a=bd(t,cC(e,!0))}e.checked!==a&&(e.checked=a)}function NF(e){return"_value"in e?e._value:e.value}function cC(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const FF=["ctrl","shift","alt","meta"],BF={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>FF.some(r=>e[`${r}Key`]&&!t.includes(r))},Pt=(e,t)=>{const r=e._withMods||(e._withMods={}),n=t.join(".");return r[n]||(r[n]=((a,...s)=>{for(let o=0;o<t.length;o++){const i=BF[t[o]];if(i&&i(a,t))return}return e(a,...s)}))},jF={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Wr=(e,t)=>{const r=e._withKeys||(e._withKeys={}),n=t.join(".");return r[n]||(r[n]=(a=>{if(!("key"in a))return;const s=$s(a.key);if(t.some(o=>o===s||jF[o]===s))return e(a)}))},UF=Hr({patchProp:AF},pF);let dC;function fC(){return dC||(dC=D5(UF))}const po=((...e)=>{fC().render(...e)}),ss=((...e)=>{const t=fC().createApp(...e),{mount:r}=t;return t.mount=n=>{const a=VF(n);if(!a)return;const s=t._component;!et(s)&&!s.render&&!s.template&&(s.template=a.innerHTML),a.nodeType===1&&(a.textContent="");const o=r(a,!1,qF(a));return a instanceof Element&&(a.removeAttribute("v-cloak"),a.setAttribute("data-v-app","")),o},t});function qF(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function VF(e){return mt(e)?document.querySelector(e):e}var tv={},rv={},tf={},nv={exports:{}},pC;function HF(){return pC||(pC=1,(function(e){e.exports=t,t.defunct=function(r){throw new Error("Unexpected character at index "+(this.index-1)+": "+r)};function t(r){typeof r!="function"&&(r=t.defunct);var n=[],a=[],s=0;this.state=0,this.index=0,this.input="",this.addRule=function(i,l,u){var c=i.global;if(!c){var d="g";i.multiline&&(d+="m"),i.ignoreCase&&(d+="i"),i=new RegExp(i.source,d)}return Object.prototype.toString.call(u)!=="[object Array]"&&(u=[0]),a.push({pattern:i,global:c,action:l,start:u}),this},this.setInput=function(i){return s=0,this.state=0,this.index=0,n.length=0,this.input=i,this},this.lex=function(){if(n.length)return n.shift();for(this.reject=!0;this.index<=this.input.length;){for(var i=o.call(this).splice(s),l=this.index;i.length&&this.reject;){var u=i.shift(),c=u.result,d=u.length;this.index+=d,this.reject=!1,s++;var p=u.action.apply(this,c);if(this.reject)this.index=c.index;else if(typeof p<"u")switch(Object.prototype.toString.call(p)){case"[object Array]":n=p.slice(1),p=p[0];default:return d&&(s=0),p}}var b=this.input;if(l<b.length)if(this.reject){s=0;var p=r.call(this,b.charAt(this.index++));if(typeof p<"u")return Object.prototype.toString.call(p)==="[object Array]"?(n=p.slice(1),p[0]):p}else this.index!==l&&(s=0),this.reject=!0;else if(i.length)this.reject=!0;else break}};function o(){for(var i=[],l=0,u=this.state,c=this.index,d=this.input,p=0,b=a.length;p<b;p++){var m=a[p],h=m.start,v=h.length;if(!v||h.indexOf(u)>=0||u%2&&v===1&&!h[0]){var y=m.pattern;y.lastIndex=c;var T=y.exec(d);if(T&&T.index===c){var S=i.push({result:T,action:m.action,length:T[0].length});for(m.global&&(l=S);--S>l;){var w=S-1;if(i[S].length>i[w].length){var C=i[S];i[S]=i[w],i[w]=C}}}}}return i}}})(nv)),nv.exports}var rf={exports:{}},hC={};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var mC;function zF(){return mC||(mC=1,String.fromCodePoint||(function(){var e=(function(){try{var a={},s=Object.defineProperty,o=s(a,a,a)&&s}catch{}return o})(),t=String.fromCharCode,r=Math.floor,n=function(a){var s=16384,o=[],i,l,u=-1,c=arguments.length;if(!c)return"";for(var d="";++u<c;){var p=Number(arguments[u]);if(!isFinite(p)||p<0||p>1114111||r(p)!=p)throw RangeError("Invalid code point: "+p);p<=65535?o.push(p):(p-=65536,i=(p>>10)+55296,l=p%1024+56320,o.push(i,l)),(u+1==c||o.length>s)&&(d+=t.apply(null,o),o.length=0)}return d};e?e(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n})()),hC}var gC;function WF(){return gC||(gC=1,(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,zF();var r=/\\(u\{([0-9A-Fa-f]+)\}|u([0-9A-Fa-f]{4})|x([0-9A-Fa-f]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|(['"tbrnfv0\\]))|\\U([0-9A-Fa-f]{8})/g,n={0:"\0",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","'":"'",'"':'"',"\\":"\\"},a=function(l){return String.fromCodePoint(parseInt(l,16))},s=function(l){return String.fromCodePoint(parseInt(l,8))},o=function(l){return l.replace(r,function(u,c,d,p,b,m,h,v){return d!==void 0?a(d):p!==void 0?a(p):b!==void 0?a(b):m!==void 0?s(m):v!==void 0?a(v):n[h]})};t.default=o,e.exports=t.default})(rf,rf.exports)),rf.exports}var av={};/*! https://mths.be/utf8js v3.0.0 by @mathias */var vC;function KF(){return vC||(vC=1,(function(e){(function(t){var r=String.fromCharCode;function n(h){for(var v=[],y=0,T=h.length,S,w;y<T;)S=h.charCodeAt(y++),S>=55296&&S<=56319&&y<T?(w=h.charCodeAt(y++),(w&64512)==56320?v.push(((S&1023)<<10)+(w&1023)+65536):(v.push(S),y--)):v.push(S);return v}function a(h){for(var v=h.length,y=-1,T,S="";++y<v;)T=h[y],T>65535&&(T-=65536,S+=r(T>>>10&1023|55296),T=56320|T&1023),S+=r(T);return S}function s(h){if(h>=55296&&h<=57343)throw Error("Lone surrogate U+"+h.toString(16).toUpperCase()+" is not a scalar value")}function o(h,v){return r(h>>v&63|128)}function i(h){if((h&4294967168)==0)return r(h);var v="";return(h&4294965248)==0?v=r(h>>6&31|192):(h&4294901760)==0?(s(h),v=r(h>>12&15|224),v+=o(h,6)):(h&4292870144)==0&&(v=r(h>>18&7|240),v+=o(h,12),v+=o(h,6)),v+=r(h&63|128),v}function l(h){for(var v=n(h),y=v.length,T=-1,S,w="";++T<y;)S=v[T],w+=i(S);return w}function u(){if(b>=p)throw Error("Invalid byte index");var h=d[b]&255;if(b++,(h&192)==128)return h&63;throw Error("Invalid continuation byte")}function c(){var h,v,y,T,S;if(b>p)throw Error("Invalid byte index");if(b==p)return!1;if(h=d[b]&255,b++,(h&128)==0)return h;if((h&224)==192){if(v=u(),S=(h&31)<<6|v,S>=128)return S;throw Error("Invalid continuation byte")}if((h&240)==224){if(v=u(),y=u(),S=(h&15)<<12|v<<6|y,S>=2048)return s(S),S;throw Error("Invalid continuation byte")}if((h&248)==240&&(v=u(),y=u(),T=u(),S=(h&7)<<18|v<<12|y<<6|T,S>=65536&&S<=1114111))return S;throw Error("Invalid UTF-8 detected")}var d,p,b;function m(h){d=n(h),p=d.length,b=0;for(var v=[],y;(y=c())!==!1;)v.push(y);return a(v)}t.version="3.0.0",t.encode=l,t.decode=m})(e)})(av)),av}var yC;function GF(){if(yC)return tf;yC=1;const e=HF(),t=WF();KF();const r=6,n=7,a=11,s=12,o=13,i=14,b=[[/\s*:\s*/,-1],[/\s*,\s*/,-2],[/\s*{\s*/,-3],[/\s*}\s*/,o],[/\s*\[\s*/,-4],[/\s*\]\s*/,s],[/\s*\.\s*/,-5]];function m(T){return T=T.replace(/\\\//,"/"),t(T)}function h(T){let S=new e,w=0,C=0;return S.addRule(/"((?:\\.|[^"])*?)($|")/,(k,f)=>(w+=k.length,{type:a,value:m(f),row:C,col:w,single:!1})),S.addRule(/'((?:\\.|[^'])*?)($|'|(",?[ \t]*\n))/,(k,f)=>(w+=k.length,{type:a,value:m(f),row:C,col:w,single:!0})),S.addRule(/[\-0-9]*\.[0-9]*([eE][\+\-]?)?[0-9]*(?:\s*)/,k=>(w+=k.length,{type:r,value:parseFloat(k),row:C,col:w})),S.addRule(/\-?[0-9]+([eE][\+\-]?)[0-9]*(?:\s*)/,k=>(w+=k.length,{type:r,value:parseFloat(k),row:C,col:w})),S.addRule(/\-?[0-9]+(?:\s*)/,k=>(w+=k.length,{type:n,value:parseInt(k),row:C,col:w})),b.forEach(k=>{S.addRule(k[0],f=>(w+=f.length,{type:k[1],value:f,row:C,col:w}))}),S.addRule(/\s/,k=>{k==`
`?(w=0,C++):w+=k.length}),S.addRule(/\S[ \t]*/,k=>(w+=k.length,{type:i,value:k,row:C,col:w})),S.setInput(T),S}tf.lexString=v;function v(T,S){let w=h(T),C="";for(;C=w.lex();)S(C)}tf.getAllTokens=y;function y(T){let S=[];return v(T,function(C){S.push(C)}),S}return tf}var bC;function YF(){if(bC)return rv;bC=1;let e=GF();const t=0,r=1,n=2,a=3,s=4,o=5,i=6,l=7,u=8,c=9,d=10,p=11,b=12,m=13,h=14,v=15,y=-1,T=-2,S=-3,w=-4;function C($){$.peek==null&&Object.defineProperty($,"peek",{enumerable:!1,value:function(){return this[this.length-1]}}),$.last==null&&Object.defineProperty($,"last",{enumerable:!1,value:function(L){return this[this.length-(1+L)]}})}function k($,L){return $&&$.hasOwnProperty("type")&&$.type==L}function f($){}rv.parse=O;function O($,L){let B=[],F=[];C(B),C(F);let R=function(H){F.push(H)};e.lexString($,R),F[0].type==w&&F.last(0).type!=b&&F.push({type:b,value:"]",row:-1,col:-1}),F[0].type==S&&F.last(0).type!=m&&F.push({type:m,value:"}",row:-1,col:-1});for(let H=0;H<F.length;H++)for(""+F[H].type,B.push(F[H]);E(B););return B.length==1&&B[0].type==r&&(B=[{type:d,value:B[0].value}]),N(B[0],L)}function E($){let L=$.pop();switch(L.type){case u:if(L.value.trim()=="true")return $.push({type:a,value:"true"}),!0;if(L.value.trim()=="false")return $.push({type:a,value:"false"}),!0;if(L.value.trim()=="null")return $.push({type:v,value:null}),!0;break;case h:return k($.peek(),u)?($.peek().value+=L.value,!0):($.push({type:u,value:L.value}),!0);case l:return k(L,l)&&k($.peek(),u)?($.peek().value+=L.value,!0):(L.type=v,$.push(L),!0);case p:return L.type=v,L.value=L.value,$.push(L),!0;case a:return L.type=v,L.value=="true"?L.value=!0:L.value=!1,$.push(L),!0;case i:return L.type=v,$.push(L),!0;case v:if(k($.peek(),T))return L.type=o,$.pop(),$.push(L),!0;if(k($.peek(),y))return L.type=s,$.pop(),$.push(L),!0;if(k($.peek(),u)&&k($.last(1),v)){let B=$.pop();return $.peek().value+='"'+B.value+'"',$.peek().value+=L.value,!0}if(k($.peek(),u)&&k($.last(1),n)){let B=$.pop(),F=$.peek().value.pop();return F+='"'+B.value+'"',F+=L.value,$.peek().value.push(F),!0}if(k($.peek(),u)&&k($.last(1),r)){let B=$.pop(),F=$.peek().value.pop();const R=L.single?"'":'"';return F.value+=R+B.value+R,F.value+=L.value,$.peek().value.push(F),!0}if(k($.peek(),u)){let B=$.pop().value;return L.value=B+L.value,$.push(L),!0}break;case c:if(k(L,c)&&k($.peek(),T))return L.type=o,$.pop(),$.push(L),!0;if(k($.peek(),y))return L.type=s,$.pop(),$.push(L),!0;break;case d:if(k($.peek(),T)){let B={type:o,value:L};return $.pop(),$.push(B),!0}if(k($.peek(),y)){let B={type:s,value:L};return $.pop(),$.push(B),!0}if(k($.peek(),u)){let B=$.pop();return $.push({type:t,key:B.value.trim(),value:L}),!0}break;case o:return k($.peek(),n)?($.peek().value.push(L.value),!0):($.push({type:n,value:[L.value]}),!0);case n:if(k($.peek(),v)||k($.peek(),c))return L.value.unshift($.peek().value),$.pop(),$.push(L),!0;if(k($.peek(),d))return L.value.unshift($.peek()),$.pop(),$.push(L),!0;if(k($.peek(),u)&&($.last(1),T)){let B=$.pop();for($.push({type:v,value:B.value}),""+B.value;E($););return $.push(L),!0}if(k($.peek(),n))return $.peek().value.push(L.value[0]),!0;break;case s:if(k($.peek(),u)||k($.peek(),v)||k($.peek(),n)){let B=$.pop();return $.push({type:t,key:B.value,value:L.value}),!0}throw new Error("Got a :value that can't be handled at line "+L.row+":"+L.col);case t:return k($.last(0),T)&&k($.last(1),r)?($.last(1).value.push(L),$.pop(),!0):($.push({type:r,value:[L]}),!0);case r:if(k($.peek(),r))return L.value.forEach(function(B){$.peek().value.push(B)}),!0;break;case b:if(k($.peek(),n)&&k($.last(1),w)){let B=$.pop();return $.pop(),$.push({type:c,value:B.value}),!0}if(k($.peek(),c)&&k($.last(1),w)){let B=$.pop();return $.pop(),$.push({type:c,value:[B.value]}),!0}if(k($.peek(),w))return $.pop(),$.push({type:c,value:[]}),!0;if(k($.peek(),v)&&k($.last(1),w)){let B=$.pop().value;return $.pop(),$.push({type:c,value:[B]}),!0}if(k($.peek(),d)&&k($.last(1),w)){let B=$.pop();return $.pop(),$.push({type:c,value:[B]}),!0}if(k($.peek(),u)&&k($.last(1),T)){let B=$.pop();for($.push({type:v,value:B.value}),""+B.value;E($););return $.push({type:b}),!0}if(k($.peek(),T)&&(k($.last(1),u)||k($.last(1),d)||k($.last(1),v))){for($.pop(),$.push({type:b,value:"]"}),""+JSON.stringify($);E($););return!0}if(k($.peek(),u)&&k($.last(1),w)){let B=$.pop();return $.pop(),$.push({type:c,value:[B.value]}),!0}if(k($.peek(),T)&&k($.last(1),n)){for($.pop(),$.push({type:b}),""+JSON.stringify($);E($););return!0}break;case m:if(k($.peek(),r)&&k($.last(1),S)){let B=$.pop();return $.pop(),$.push({type:d,value:B.value}),!0}if(k($.peek(),S))return $.pop(),$.push({type:d,value:null}),!0;if(k($.peek(),u)&&k($.last(1),y)){let B=$.pop();for($.push({type:v,value:B.value}),""+B.value;E($););return $.push({type:m}),!0}if(k($.peek(),y)){for($.push({type:v,value:null});E($););return $.push({type:m}),!0}if(k($.peek(),T))return $.pop(),$.push({type:m}),!0;throw new Error("Found } that I can't handle at line "+L.row+":"+L.col);case T:if(k($.peek(),T))return!0;if(k($.peek(),u)){const B=$.pop();for($.push({type:v,value:B.value});E($););return $.push(L),!0}if(k($.peek(),y)){for($.push({type:v,value:null});E($););return $.push(L),!0}}return $.push(L),!1}function N($,L){if(["boolean","number","string"].indexOf(typeof $)!=-1)return $;if($===null)return null;if(Array.isArray($)){let F=[];for(;$.length>0;)F.unshift(N($.pop()));return F}if(k($,d)){let F={};return $.value===null?{}:($.value.forEach(function(R){const H=R.key,q=N(R.value);L&&H in F?F[H]={value:F[H],next:q}:F[H]=q}),F)}return k($,c)?N($.value):$.value}return rv}var wC;function JF(){if(wC)return tv;wC=1;let e=YF();tv.parse=t;function t(r,n){let a=!0,s=!1;n&&("fallback"in n&&n[a]===!1&&(a=!1),s="duplicateKeys"in n&&n.duplicateKeys===!0);try{return e.parse(r,s)}catch(o){if(a===!1)throw o;try{let i=JSON.parse(r);return console.warn("dirty-json got valid JSON that failed with the custom parser. We're returning the valid JSON, but please file a bug report here: https://github.com/RyanMarcus/dirty-json/issues  -- the JSON that caused the failure was: "+r),i}catch{throw o}}}return tv}var XF=JF();const Mu=Sn(XF);/*! js-cookie v3.0.5 | MIT */function nf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var QF={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function sv(e,t){function r(a,s,o){if(!(typeof document>"u")){o=nf({},t,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var l in o)o[l]&&(i+="; "+l,o[l]!==!0&&(i+="="+o[l].split(";")[0]));return document.cookie=a+"="+e.write(s,a)+i}}function n(a){if(!(typeof document>"u"||arguments.length&&!a)){for(var s=document.cookie?document.cookie.split("; "):[],o={},i=0;i<s.length;i++){var l=s[i].split("="),u=l.slice(1).join("=");try{var c=decodeURIComponent(l[0]);if(o[c]=e.read(u,c),a===c)break}catch{}}return a?o[a]:o}}return Object.create({set:r,get:n,remove:function(a,s){r(a,"",nf({},s,{expires:-1}))},withAttributes:function(a){return sv(this.converter,nf({},this.attributes,a))},withConverter:function(a){return sv(nf({},this.converter,a),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var ZF=sv(QF,{path:"/"});const eB=(e,t,r)=>{function n(w,C){return w<<C|w>>>32-C}function a(w,C){const k=2147483648&w,f=2147483648&C,O=(1073741823&w)+(1073741823&C);return(w&=1073741824)&(C&=1073741824)?2147483648^O^k^f:w|C?1073741824&O?3221225472^O^k^f:1073741824^O^k^f:O^k^f}function s(w,C,k,f,O,E,N){return w=a(w,a(a(C&k|~C&f,O),N)),a(n(w,E),C)}function o(w,C,k,f,O,E,N){return w=a(w,a(a(C&f|k&~f,O),N)),a(n(w,E),C)}function i(w,C,k,f,O,E,N){return w=a(w,a(a(C^k^f,O),N)),a(n(w,E),C)}function l(w,C,k,f,O,E,N){return w=a(w,a(a(k^(C|~f),O),N)),a(n(w,E),C)}function u(w){for(var C="",k="",f=0;f<=3;f++)C+=(k=`0${(w>>>8*f&255).toString(16)}`).substr(k.length-2,2);return C}for(var c,d,p,b,m=(function(w){for(var C,k=w.length,f=16*(((f=k+8)-f%64)/64+1),O=Array.from({length:f-1}),E=0,N=0;N<k;)E=N%4*8,O[C=(N-N%4)/4]=O[C]|w.charCodeAt(N)<<E,N++;return O[C=(N-N%4)/4]=O[C]|128<<(E=N%4*8),O[f-2]=k<<3,O[f-1]=k>>>29,O})((function(w){w=w.replace(/\r\n/g,`
`);for(var C="",k=0;k<w.length;k++){const f=w.charCodeAt(k);f<128?C+=String.fromCharCode(f):(f>127&&f<2048?C+=String.fromCharCode(f>>6|192):C=(C+=String.fromCharCode(f>>12|224))+String.fromCharCode(f>>6&63|128),C+=String.fromCharCode(63&f|128))}return C})(`${e}&${t}&12574478&${r}`)),h=1732584193,v=4023233417,y=2562383102,T=271733878,S=0;S<m.length;S+=16)h=s(c=h,d=v,p=y,b=T,m[S+0],7,3614090360),T=s(T,h,v,y,m[S+1],12,3905402710),y=s(y,T,h,v,m[S+2],17,606105819),v=s(v,y,T,h,m[S+3],22,3250441966),h=s(h,v,y,T,m[S+4],7,4118548399),T=s(T,h,v,y,m[S+5],12,1200080426),y=s(y,T,h,v,m[S+6],17,2821735955),v=s(v,y,T,h,m[S+7],22,4249261313),h=s(h,v,y,T,m[S+8],7,1770035416),T=s(T,h,v,y,m[S+9],12,2336552879),y=s(y,T,h,v,m[S+10],17,4294925233),v=s(v,y,T,h,m[S+11],22,2304563134),h=s(h,v,y,T,m[S+12],7,1804603682),T=s(T,h,v,y,m[S+13],12,4254626195),y=s(y,T,h,v,m[S+14],17,2792965006),h=o(h,v=s(v,y,T,h,m[S+15],22,1236535329),y,T,m[S+1],5,4129170786),T=o(T,h,v,y,m[S+6],9,3225465664),y=o(y,T,h,v,m[S+11],14,643717713),v=o(v,y,T,h,m[S+0],20,3921069994),h=o(h,v,y,T,m[S+5],5,3593408605),T=o(T,h,v,y,m[S+10],9,38016083),y=o(y,T,h,v,m[S+15],14,3634488961),v=o(v,y,T,h,m[S+4],20,3889429448),h=o(h,v,y,T,m[S+9],5,568446438),T=o(T,h,v,y,m[S+14],9,3275163606),y=o(y,T,h,v,m[S+3],14,4107603335),v=o(v,y,T,h,m[S+8],20,1163531501),h=o(h,v,y,T,m[S+13],5,2850285829),T=o(T,h,v,y,m[S+2],9,4243563512),y=o(y,T,h,v,m[S+7],14,1735328473),h=i(h,v=o(v,y,T,h,m[S+12],20,2368359562),y,T,m[S+5],4,4294588738),T=i(T,h,v,y,m[S+8],11,2272392833),y=i(y,T,h,v,m[S+11],16,1839030562),v=i(v,y,T,h,m[S+14],23,4259657740),h=i(h,v,y,T,m[S+1],4,2763975236),T=i(T,h,v,y,m[S+4],11,1272893353),y=i(y,T,h,v,m[S+7],16,4139469664),v=i(v,y,T,h,m[S+10],23,3200236656),h=i(h,v,y,T,m[S+13],4,681279174),T=i(T,h,v,y,m[S+0],11,3936430074),y=i(y,T,h,v,m[S+3],16,3572445317),v=i(v,y,T,h,m[S+6],23,76029189),h=i(h,v,y,T,m[S+9],4,3654602809),T=i(T,h,v,y,m[S+12],11,3873151461),y=i(y,T,h,v,m[S+15],16,530742520),h=l(h,v=i(v,y,T,h,m[S+2],23,3299628645),y,T,m[S+0],6,4096336452),T=l(T,h,v,y,m[S+7],10,1126891415),y=l(y,T,h,v,m[S+14],15,2878612391),v=l(v,y,T,h,m[S+5],21,4237533241),h=l(h,v,y,T,m[S+12],6,1700485571),T=l(T,h,v,y,m[S+3],10,2399980690),y=l(y,T,h,v,m[S+10],15,4293915773),v=l(v,y,T,h,m[S+1],21,2240044497),h=l(h,v,y,T,m[S+8],6,1873313359),T=l(T,h,v,y,m[S+15],10,4264355552),y=l(y,T,h,v,m[S+6],15,2734768916),v=l(v,y,T,h,m[S+13],21,1309151649),h=l(h,v,y,T,m[S+4],6,4149444226),T=l(T,h,v,y,m[S+11],10,3174756917),y=l(y,T,h,v,m[S+2],15,718787259),v=l(v,y,T,h,m[S+9],21,3951481745),h=a(h,c),v=a(v,d),y=a(y,p),T=a(T,b);return(u(h)+u(v)+u(y)+u(T)).toLowerCase()};function Du({now:e,dataStr:t,cookie:r=null}){const n=r||ZF.get("_m_h5_tk");return eB(n.split("_")[0],e,t)}function af(){return I("#addressCard").length>0}function ov(){return location.hostname.includes(".m.taobao.com")||location.hostname.includes(".m.tmall.com")}function tB(){const e=I("#realPayPC_1"),t=I.trim(e.find(".confirmAddr-addr-user").find(".confirmAddr-addr-bd").text()).replace(/\s+/,","),r=I.trim(e.find(".confirmAddr-addr").find(".confirmAddr-addr-bd").text());let n=[t,r];if(af()&&!r&&I("div[class*=listItemSelect]").length>0){n=[];const a=I("div[class*=listItemSelect]"),s=a.find("div[class*=addressDetail--]").text(),i=a.find("div[class*=addressName--]").text().split(" ");n.push(i[0]?i[0]:""),n.push(i[1]?i[1]:""),n.push(i[2]?i[2]:""),n.push(i[3]?i[3]:""),n.push(I.trim(s)),n.push(I.trim(a.find("div[class*=userInfo--] div").text())),n.push(I.trim(a.find("div[class*=userInfo--] span").text()))}return n.join(",")}function rB(){ov()?I('#submitBlock_1 [view-name="TextView"]').each((e,t)=>{I(t).text().includes("提交订单")&&I(t).trigger("click")}):af()?I(document).find(".J_checkRelatePurchaseBtn")[0].click():I(document).find(".go-btn")[0].click()}function nB(){let e="0";return ov()?e=I('#submitBlock_1 [view-name="TradePriceView"]').text().replace("￥",""):af()?e=I.trim(I("#submitOrder .trade-price-container").text().replace("￥","")):I("#realPayPC_1").length>0?e=I.trim(I("#realPayPC_1").find(".realpay--price").text()):e=I.trim(I(".order-realPay .realPay-price").text()),(+(e||0)).toFixed(2)}function aB(){const e=[];return location.hostname.includes(".m.taobao.com")?(I(".dialog-container .sku-info li.sel").each((t,r)=>{const n=I.trim(I(r).text());n&&e.push(n)}),e):I('div[class^="skuWrapper--"]').length>0?(I('div[class^="skuWrapper--"] div[class*="isSelected--"]').each((t,r)=>{let n=I.trim(I(r).find("span").text());n=n.replace("）",")"),n=n.replace("（","("),n=n.replace("【","["),n=n.replace("】","]"),n=n.replace("，",","),n=n.replace("；",";"),n&&e.push(n)}),e):(I("#J_isku").find(".J_TSaleProp li").each((r,n)=>{const a=I(n);if(a.hasClass("tb-selected")){let s=a.find(".J_appendColorName").text();s||(s=I.trim(a.find("span").text())),e.push(s)}}),e)}function sB(){const e=[];if(ov()){let t="";I('[data-spm^="itemInfo_"] span').each((n,a)=>{(I(a).text().includes("颜色")||I(a).text().includes("尺码"))&&(t=I(a).text())}),t=t.replace(/；/g,";"),t=t.replace(/：/g,":");const r=t.split(";");for(const n in r){const s=r[n].trim().split(":");s.length===2&&e.push(I.trim(s[1]))}return e}else if(af()){let t=/window\.mtopParams =\s*(\{.*\});?/.exec(I("head").html());if(!t||(t=JSON.parse(t[1]),Ut(t)))return e;if(t&&(t!=null&&t.buyNowOldParams)){const r=JSON.parse(t.buyNowOldParams);if(r.paramMap&&r.paramMap.skuInfo){const a=r.paramMap.skuInfo.split(";");for(const s in a){const i=a[s].trim().split(":");i.length===2&&e.push(I.trim(i[1]))}}}return e}else return I(document).find(".order-itemInfo").find(".info-sku").find(".bd").each((r,n)=>{e.push(I.trim(I(n).text()).replace(/&mdash;&mdash;/,"——"))}),e}function _C(e){const t=/biz_order_id=(\d+)/,r=e.match(t),n=r!=null&&r[1]?String(r[1]).replace(/\D/g,""):"";return window.console.log("getTaobaoBizOrderIdFromUrl biz_order_id: ",n),n}class oB{_getSessionData({key:t}){const r=sessionStorage.getItem(t);return["true","false"].includes(r)?r==="true":r}_setSessionData({key:t,value:r}){sessionStorage.setItem(t,r)}_buildVerifyKey(t,r){return`${t}${r?`_${r}`:""}`}_saveTaobaoRequestLog(t){return Jt({url:"/order/purchase_order/save_taobao_request_log",method:"POST",data:t})}_buildVerifyReason({msg:t,detailPageUrl:r,purchaseOrderBuyer:n}){let a=t||"";return r&&(a+=`，<a href="${$2(r)}" class="J_openPurchasePlatformWindow" dt-purchase-account="${n}" dt-purchase-platform="taobao" target="_blank">点此去滑动</a>`),a}async _getTaobaoBuyerNick(){const r=await os({url:"https://buyertrade.taobao.com/trade/itemlist/list_bought_items.htm",name:"_nk_"}).then(n=>n==null?void 0:n.value);return Promise.resolve(r)}async getTaoBaoPurchaseOrderInfo({purchaseOrderSn:t,forceDetail:r=!1,purchaseOrderBuyer:n=""}){const a=await os({name:"x5sec",url:"https://buyertrade.taobao.com/"}).then(o=>o==null?void 0:o.value),s=this._getSessionData({key:"taobaoX5sec"});return a&&a!==s&&(this._setSessionData({key:"taobaoX5sec",value:a}),this._setSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",n),value:!1}),this._setSessionData({key:this._buildVerifyKey("taobaoTradeOrderDetailNeedVerify",n),value:!1})),await this._handleGetTaoBaoPurchaseOrderInfo({purchaseOrderSn:t,purchaseOrderBuyer:n,forceDetail:r})}async _handleGetTaoBaoPurchaseOrderInfo({purchaseOrderSn:t,purchaseOrderBuyer:r,forceDetail:n}){const a=this._getSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",r)}),s=this._getSessionData({key:this._buildVerifyKey("taobaoTradeOrderDetailNeedVerify",r)});let o={},i=[];n?i=["orderDetail"]:(!a&&i.push("asyncBought"),!s&&i.push("orderDetail"),i.length||i.push(Math.random()>.5?"orderDetail":"asyncBought"));for(const u of i)if(o=await this._getPurchaseOrderInfoByApiType(t,r,u),o.apiType=u,je.isSuccess(o)||!(o.reason||"").toString().includes("滑块"))return o;const l=await this._getPurchaseOrderInfoByApiType(t,r,"mobileOrderDetail");return je.isSuccess(l)?(l.apiType="mobileOrderDetail",l):o}async _getPurchaseOrderInfoByApiType(t,r,n){let a={};switch(n){case"orderDetail":a=await this._getPurchaseOrderInfoByTaobaoOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:r}),je.isFail(a)&&a.reason.includes("滑块")?this._setSessionData({key:this._buildVerifyKey("taobaoTradeOrderDetailNeedVerify",r),value:!0}):this._setSessionData({key:this._buildVerifyKey("taobaoTradeOrderDetailNeedVerify",r),value:!1});break;case"asyncBought":a=await this._getPurchaseOrderInfoByAsyncBought({purchaseOrderSn:t,purchaseOrderBuyer:r}),je.isFail(a)&&a.reason.includes("滑块")?this._setSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",r),value:!0}):this._setSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",r),value:!1});break;case"mobileOrderDetail":a=await this._getPurchaseOrderInfoByMobileOrderDetail({purchaseOrderSn:t});break}return a}async _getPurchaseOrderInfoByTaobaoOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:r=""}){const n=await this._getTaobaoBuyerNick();if(!n)return je.failResult("未登录");const a=await this._getTaobaoOrderInfoByTaobaoOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:r});if(je.isFail(a))return a;const s=a.orderInfo,o=s.mainOrder.payInfo.actualFee.value,i=this._parseTaobaoOrderStartTime(s),l=s.mainOrder.subOrders[0].quantity,u=(o/l).toFixed(2),c=s.mainOrder.subOrders[0].itemInfo.auctionUrl,d=this._parseTaobaoConsigneeInfo(s.deliveryInfo),p=this._parseTaobaoItemSkuInfo(s.mainOrder.subOrders),b={purchaseOrderSeller:s.mainOrder.seller.nick,purchaseOrderPayment:o.toString().replace(/(¥|￥|,)+/g,""),purchaseOrderBuyer:unescape(decodeURI(n).replace(/\\/g,"%")),purchaseNum:l,purchasePrice:u,purchaseUrl:c,purchaseOrderFullname:d.fullname,purchaseOrderMobile:d.mobile,purchaseOrderFullAddress:d.fullAddress,purchaseOrderStartTime:i,purchaseOrderStatus:"wait_send",purchaseOrderSku:p};s.mainOrder.statusInfo.text.includes("待付款")||s.mainOrder.statusInfo.text.includes("宝贝已拍下")?b.purchaseOrderStatus="wait_pay":s.mainOrder.statusInfo.text.includes("已发货")?b.purchaseOrderStatus="has_send":s.mainOrder.statusInfo.text.includes("交易已成功")?b.purchaseOrderStatus="finished":s.mainOrder.statusInfo.text.includes("交易关闭")?b.purchaseOrderStatus="cancel":s.mainOrder.statusInfo.text.includes("退款中")&&(b.purchaseOrderStatus="refund"),s.orderBar&&I.each(s.orderBar.nodes,(T,S)=>{S.text==="卖家发货"&&!Ut(S.date)&&(b.purchaseOrderSendTime=S.date)});let m="",h="";if(s.deliveryInfo.logisticsName!=="—"&&(m=s.deliveryInfo.logisticsName),s.deliveryInfo.logisticsNum!=="—"&&(h=s.deliveryInfo.logisticsNum),!m&&I.inArray(b.purchaseOrderStatus,["has_send","finished"])>-1){const T=await this._getTaobaoOrderLogisticsName(t,s.mainOrder.seller.id);je.isSuccess(T)&&T.logisticsName&&T.logisticsName!=="—"&&(m=T.logisticsName)}const v=s.deliveryInfo.asyncLogisticsUrl;if(m==="无需物流")b.logisticsIsAccept=1;else if(v){const T=await this._getTaobaoLogisticsTrace(v);if(T.detailList){const S=T.detailList;S[0].cpName&&S[0].cpName!=="—"&&(m=S[0].cpName),S[0].mailNo&&S[0].mailNo!=="—"&&(h=S[0].mailNo);let w=0;S[0].detail&&I.each(S[0].detail,(C,k)=>{if(Vp(k.desc,k.action))return w=1,!1}),b.logisticsIsAccept=w}}m&&(b.purchaseOrderLogisticsName=m),h&&(b.purchaseOrderWaybillCode=h);let y=b.purchaseOrderStatus==="refund";if(b.purchaseOrderStatus==="cancel")try{y=s.operationsGuide[0].lines[0].content[0].value.includes("退款")}catch(T){window.console.log("check has refund error",T)}if(y){const T=await this._getTaobaoOrderRefundMoney({purchaseOrderSn:t});b.purchaseOrderRefundMoney=T.refundMoney||0}return je.successResult({purchaseOrderInfo:b})}async _getPurchaseOrderInfoByAsyncBought({purchaseOrderSn:t,purchaseOrderBuyer:r=""}){const n=await this._getTaobaoBuyerNick();if(!n)return je.failResult("未登录");const a=await this._getTaobaoOrderInfoByAsyncBought({purchaseOrderSn:t,purchaseOrderBuyer:r});if(je.isFail(a))return a;const s=a.orderInfo,o=s.payInfo.actualFee,i=s.orderInfo.createTime,l=s.subOrders[0].quantity,u=(o/l).toFixed(2),c=s.subOrders[0].itemInfo.snapUrl,d=s.subOrders[0].itemInfo.title,p={purchaseOrderSeller:s.seller.nick,purchaseOrderPayment:o.toString().replace(/(¥|￥|,)+/g,""),purchaseOrderBuyer:n,purchaseNum:l,purchasePrice:u,purchaseUrl:c,purchaseOrderStartTime:i,purchaseOrderStatus:"wait_send",purchaseOrderItemTitle:d};if(s.statusInfo.text.includes("待付款")||s.statusInfo.text.includes("宝贝已拍下")||s.statusInfo.text.includes("商品已拍下")?p.purchaseOrderStatus="wait_pay":s.extra&&s.extra.tradeStatus==="WAIT_BUYER_CONFIRM_GOODS"||s.statusInfo.text.includes("已发货")||s.statusInfo.text.includes("已签收")?p.purchaseOrderStatus="has_send":s.statusInfo.text.includes("交易成功")?p.purchaseOrderStatus="finished":s.statusInfo.text.includes("交易关闭")?p.purchaseOrderStatus="cancel":s.statusInfo.text.includes("退款中")&&(p.purchaseOrderStatus="refund"),!["wait_pay","wait_send","cancel"].includes(p.purchaseOrderStatus)){const h=(await this._getLogisticsInfoByTransitStep({purchaseOrderSn:t})).logisticsInfo||{};Ut(h)||(p.purchaseOrderLogisticsName=h.logisticsName,p.purchaseOrderWaybillCode=h.waybillCode,p.logisticsIsAccept=h.logisticsIsAccept,h.sendTime&&(p.purchaseOrderSendTime=h.sendTime))}let b=p.purchaseOrderStatus==="refund";if(p.purchaseOrderStatus==="cancel")try{I.each(s.subOrders,(m,h)=>{if(I.each(h.operations,(v,y)=>{if(y.text==="查看退款")return b=!0,!1}),b)return!1})}catch(m){window.console.log("check has refund error",m)}if(b){const m=await this._getTaobaoOrderRefundMoney({purchaseOrderSn:t});p.purchaseOrderRefundMoney=m.refundMoney||0}return je.successResult({purchaseOrderInfo:p})}async _getPurchaseOrderInfoByMobileOrderDetail({purchaseOrderSn:t}){try{const r=await this._getTaobaoBuyerNick();if(!r)return je.failResult("未登录");let n=await this._getMobileOrderDetail({purchaseOrderSn:t});if(je.isFail(n)&&n.reason.toString().includes("令牌为空")){const l=this._getMobileOrderCookies();l&&(l._m_h5_tk||l.cookie2)&&(n=await this._getMobileOrderDetail({purchaseOrderSn:t}))}if(je.isFail(n))return n;const a=n.orderDataTypeMap,s=a.status&&(a.status.text||""),o=(a.address&&(a.address.mobilephone||"")).split("-");a.item=a.item||{},a.paydetail=a.paydetail||{},a.orderinfo=a.orderinfo||{},a.seller=a.seller||{};const i={purchaseNum:a.item.quantity,purchaseOrderBuyer:r,purchaseOrderFullAddress:a.address&&a.address.address,purchaseOrderFullname:a.address&&a.address.name,purchaseOrderMobile:o[o.length-1],purchaseOrderPayment:(a.paydetail.actualFee&&(a.paydetail.actualFee.value||"")).replace("￥","").trim(),purchaseOrderSeller:a.seller.nick,purchaseOrderSendTime:a.orderinfo.consignTime&&a.orderinfo.consignTime.value,purchaseOrderStartTime:a.orderinfo.createTime&&a.orderinfo.createTime.value,purchaseOrderStatus:"",purchaseOrderLogisticsName:"",purchaseOrderWaybillCode:"",logisticsIsAccept:"",purchasePrice:(a.item.priceInfo&&(a.item.priceInfo.promotion||"")).replace("￥","").trim(),purchaseUrl:`//trade.taobao.com/trade/detail/tradeSnap.htm?trade_id=${t}`};if(s.includes("等待买家付款")?i.purchaseOrderStatus="wait_pay":s.includes("买家已付款")?i.purchaseOrderStatus="wait_send":s.includes("已发货")?i.purchaseOrderStatus="has_send":s.includes("交易成功")?i.purchaseOrderStatus="finished":s.includes("交易关闭")&&(i.purchaseOrderStatus="cancel"),JSON.stringify(a.suborderop&&(a.suborderop.extra||{})).includes("退款中")&&(i.purchaseOrderStatus="refund"),!["wait_pay","wait_send","cancel"].includes(i.purchaseOrderStatus)){const u=(await this._getLogisticsInfoByTransitStep({purchaseOrderSn:t})).logisticsInfo||{};Ut(u)||(i.purchaseOrderLogisticsName=u.logisticsName,i.purchaseOrderWaybillCode=u.waybillCode,i.logisticsIsAccept=u.logisticsIsAccept,u.sendTime&&(i.purchaseOrderSendTime=u.sendTime))}return je.successResult({purchaseOrderInfo:i})}catch(r){return je.failResult(`获取订单异常:${r==null?void 0:r.message}`)}}async _getTaobaoOrderInfoByTaobaoOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:r=""}){const n=`https://trade.taobao.com/trade/detail/trade_order_detail.htm?route_to=tm1&biz_order_id=${t}`;let a="";try{if(!await this._getTaobaoBuyerNick())return je.failResult("未登录");if(a=await Dr({url:n,dataType:"text"}),!a)return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"fail"}),je.failResult("获取淘宝订单详情失败");if(a.includes("查询的物流详情不属于当前用户"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"not_login"}),je.failResult("未登录");if(a.includes("你无权查看此交易!"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"not_login"}),je.failResult("未登录");if(a.includes("霸下通用 web 页面-验证码"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"verify"}),je.failResult(this._buildVerifyReason({msg:"出现淘宝滑块",detailPageUrl:n,purchaseOrderBuyer:r}));if(a.includes("交易详情-Tmall.com")||a.includes("交易详情-天猫超市")||a.includes("The requested resource resides temporarily under a different URI"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"transfer_tmall"}),je.failResult("该订单平台是天猫");const o=this._parseTaobaoOrderInfo({purchaseOrderSn:t,responseText:a,purchaseOrderBuyer:r});return je.isFail(o)?o.reason.includes("滑块")?this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"verify"}):this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"fail"}):this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"success"}),o}catch(s){return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,responseText:a,responseType:"fail"}),window.console.log(s),je.failResult("解析淘宝订单信息失败")}}_parseTaobaoOrderInfo({purchaseOrderSn:t,responseText:r,purchaseOrderBuyer:n}){let a=null;const s=`https://trade.taobao.com/trade/detail/trade_order_detail.htm?route_to=tm1&biz_order_id=${t}`;try{const o=/JSON\.parse\('(.+)'\)/.exec(r);o&&o[0]&&(a=Mu.parse(decodeURIComponent(o[1].replace(/\\"/g,'"'))))}catch(o){window.console.log("parseTaobaoOrderInfo error",o)}try{if(a==null){let o=!1;return Tb(r,"taobao")&&(o=!0),o?je.failResult(this._buildVerifyReason({msg:"出现淘宝滑块",detailPageUrl:s,purchaseOrderBuyer:n})):je.failResult("解析淘宝订单信息失败")}}catch(o){return window.console.log("判断出现滑块",o),je.failResult(this._buildVerifyReason({msg:"判断出现滑块",detailPageUrl:s,purchaseOrderBuyer:n}))}return je.successResult({orderInfo:a})}async _getTaobaoOrderRefundMoney({purchaseOrderSn:t}){var a,s;const r=`https://refund2.taobao.com/dispute/detail.htm?bizOrderId=${t}&disputeType=1`,n=await Dr({url:r,dataType:"text"});try{const o=/var\s*disputeData\s*=\s*(.+)\s*;/.exec(n);if(!o||!o[1])return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:null,responseText:n,responseType:"match_fail"}),je.failResult("解析淘宝退款信息失败");const i=Mu.parse(I.trim(o[1]));let l=[],u=0;for(const c in i.data){const d=i.data[c];if(!(!d.fields||!d.fields.title||d.fields.title!=="退款金额")){l=d.fields.valueOptions;break}}if(l)for(const c in l){const d=((s=(a=l[c])==null?void 0:a.text)==null?void 0:s.replace("￥","")).toNumber(2);u+=d}return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:null,responseText:n,responseType:"success"}),je.successResult({refundMoney:u})}catch(o){return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:null,responseText:n,responseType:"fail",errorMsg:o}),je.failResult("解析淘宝退款信息失败")}}async _getTaobaoLogisticsTrace(t){t.indexOf("/")===0&&(t=`https:${t}`);const r=await uf({url:t}),n={"set-cookie":xb(r),"content-type":"application/x-www-form-urlencoded;charset=UTF-8","User-Agent":Cb()},a=await Dr({url:t,headers:n});try{const s=JSON.parse(a);return s?(this._saveTaobaoRequestLog({appHost:window.location.host,url:t,header:n,responseText:a,responseType:"success"}),s.success?je.successResult({detailList:s.detailList}):je.failResult(s.debugDesc||s.resultDesc)):(this._saveTaobaoRequestLog({appHost:window.location.host,url:t,header:n,responseText:a,responseType:"fail"}),je.failResult("获取物流数据失败"))}catch(s){return this._saveTaobaoRequestLog({appHost:window.location.host,url:t,header:n,responseText:a,responseType:"fail",errorMsg:s}),je.failResult("解析物流轨迹失败")}}_parseTaobaoOrderStartTime(t){let r="";return t.mainOrder&&I.each(t.mainOrder.orderInfo.lines,(n,a)=>{if(a.content&&I.each(a.content,(s,o)=>{if(!o.value||!o.value.name)return!0;if(o.value.name==="创建时间:")return r=o.value.value,!1}),r)return!1}),r}_parseTaobaoConsigneeInfo(t){let r=t.address||"";t.newAddress&&(r=t.newAddress);const n=/(.+?)，(\d+-)?([\d*]+)，(.+)，(\d*)/.exec(r)||[];return{fullname:n[1],mobile:n[3],fullAddress:n[4]}}_parseTaobaoItemSkuInfo(t){if(!t||t.length===0)return"";const r=[];for(const n in t){const a=t[n].itemInfo,s=[];a&&a.skuText&&I.each(a.skuText,(o,i)=>{I.each(i.content,(l,u)=>{if(!u.value||!u.value.name)return!0;s.push(u.value.value)})}),r.push(s.join("-"))}return r.join(";")}async _getTaobaoOrderLogisticsName(t,r){const n=`https://wuliu.taobao.com/user/order_detail_new.htm?trade_id=${t}&seller_id=${r}`,a=await Rn({url:n,xhrFields:{withCredentials:!0,responseType:"text"}});try{if(!a||a.includes("抱歉，亲的网络貌似出问题了"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:a,responseType:"fail"}),je.failResult("抱歉，亲的网络貌似出问题了");let s={};if(a.includes("无需物流"))this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:a,responseType:"success"}),s=je.successResult({logisticsName:"无需物流"});else{const o=/var\s+cpName\s+=\s+"([^"]+)"/.exec(a);!o||o.length<2?(this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:a,responseType:"match_fail"}),s=je.failResult("匹配淘宝订单发货物流公司失败")):(this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:a,responseType:"success"}),s=je.successResult({logisticsName:o[1]}))}return s}catch(s){return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:a,responseType:"fail",errorMsg:s}),je.failResult("解析物流信息失败")}}async _getTaobaoOrderInfoByAsyncBought(t,r=""){var o;const n="https://buyertrade.taobao.com/trade/itemlist/asyncBought.htm?action=itemlist/BoughtQueryAction&event_submit_do_query=1&_input_charset=utf8",a={headers:{}};let s="";try{if(!await this._getTaobaoBuyerNick())return je.failResult("未登录");const l=await uf({url:"https://buyertrade.taobao.com/trade/itemlist/list_bought_items.htm"}),u={"set-cookie":xb(l),"content-type":"application/x-www-form-urlencoded;charset=UTF-8","User-Agent":Cb()};if(a.headers=u,s=await Rn({url:n,headers:u,method:"POST",data:{buyerNick:"",dateBegin:0,dateEnd:0,itemTitle:t,lastStartRow:"",logisticsService:"",options:0,orderStatus:"",pageNum:1,pageSize:15,queryBizType:"",queryOrder:"desc",rateStatus:"",refund:"",sellerNick:"",auctionTitle:t,prePageNo:1},xhrFields:{withCredentials:!0,responseType:"json"}}),!s)return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:a.headers,responseText:s,responseType:"fail"}),je.failResult("获取淘宝订单列表失败");if(s.includes("<html"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:a.headers,responseText:s,responseType:"not_login"}),je.failResult("未登录");const c=JSON.parse(s);if(c.url){this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:a.headers,responseText:s,responseType:"verify"});const d=je.failResult(this._buildVerifyReason({msg:"判断出现滑块",detailPageUrl:c.url,purchaseOrderBuyer:r}));return d.url=c.url,d}return!c||!c.mainOrders?(this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:a.headers,responseText:s,responseType:"fail"}),je.failResult("获取淘宝订单信息失败")):Ut(c.mainOrders)?(this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:a.headers,responseText:s,responseType:"not_login"}),je.failResult("未登录")):(this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:a.headers,responseText:s,responseType:"success"}),((o=c.mainOrders[0])==null?void 0:o.id)!==t?je.failResult("获取淘宝订单信息失败"):je.successResult({orderInfo:c.mainOrders[0]}))}catch(i){return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:a.headers,responseText:s,responseType:"fail",errorMsg:i}),je.failResult("解析淘宝订单信息失败")}}async _getLogisticsInfoByTransitStep({purchaseOrderSn:t}){try{if(!await this._getTaobaoBuyerNick())return je.failResult("未登录");const n=`https://buyertrade.taobao.com/trade/json/transit_step.do?bizOrderId=${t}`,s=await Dr({url:n,headers:{"content-type":"application/x-www-form-urlencoded;charset=UTF-8","User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.2171.95 Safari/537.36"},method:"POST",dataType:"text"});if(s.includes("<html"))return je.failResult("未登录");if(!s)return je.successResult({logisticsInfo:{}});const o=Mu.parse(s);if(!o)return je.failResult("获取淘宝物流信息失败");const i={};if(o.isSuccess!=="false"){const l=o.expressName||"";let u=0;(l.includes("无需物流")||Vp(s))&&(u=1);let c="";const d=o.address?o.address.length:0;for(let p=d-1;p>=0;p--){const b=o.address[p];if(b.place.includes("等待揽收")){c=b.time;break}}i.logisticsName=l,i.waybillCode=o.expressId||"",i.logisticsIsAccept=u,i.sendTime=c,u===0&&c&&Date.now()-Date.parse(c)>288e5&&(i.orderMaybeCancel=!0)}else i.orderMaybeCancel=!0;return je.successResult({logisticsInfo:i})}catch(r){return window.console.log("getLogisticsInfoByTransitStep error",r),je.failResult("解析淘宝物流信息失败")}}async _getMobileOrderDetail({purchaseOrderSn:t}){const r="https://h5api.m.taobao.com/h5/mtop.order.querydetail/4.0/",n={"content-type":"application/x-www-form-urlencoded;charset=UTF-8","User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_2_3 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.3 Mobile/15E148 Safari/604.1"};let a="";try{const s=this._getMobileOrderCookies(),o=new Date().getTime(),i={bizOrderId:`${t}`,archive:"false",spm:"a212db.index.dt_2.i0",appVersion:"1.0",appName:"tborder"},l=JSON.stringify(i),u=Du({now:o,dataStr:l,cookie:s._m_h5_tk});a=await Rn({url:r,method:"GET",params:{jsv:"2.6.1",appKey:"12574478",t:o,sign:u,api:"mtop.order.querydetail",v:"4.0",ttid:"2018@taobao_h5_7.9.1",isSec:0,ecode:1,AntiFlood:!0,AntiCreep:!0,LoginRequest:!0,needLogin:!0,H5Request:!0,type:"jsonp",dataType:"jsonp",callback:"mtopjsonp1",data:l},xhrFields:{withCredentials:!0,responseType:"text"}});const d=/mtopjsonp1\(([^']+)\)/.exec(a);if(!d||d.length<2)return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:n,responseText:a,responseType:"match_fail"}),je.failResult("匹配淘宝订单发货物流公司失败");const p=JSON.parse(d[1])||{};p.data=p.data||{},p.data.data=p.data.data||{},p.data.data.meta=p.data.data.meta||{},p.data.data.group=p.data.data.group||[];const b=JSON.stringify(p.ret);if(b.includes("Session过期"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:n,responseText:a,responseType:"fail"}),je.failResult("未登录");if(!b.includes("SUCCESS::调用成功"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:n,responseText:a,responseType:"fail"}),je.failResult(`请求接口失败: ${b}`);if(JSON.stringify(p.data.data.meta.page&&(p.data.data.meta.page.fields||{})).includes("tmall"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:n,responseText:a,responseType:"transfer_tmall"}),je.failResult("该订单平台是天猫");const m=p.data.data.group[0]&&p.data.data.group[0][t];if(!m)return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:n,responseText:a,responseType:"match_fail"}),je.failResult("淘宝订单不存在");const h={};return m.forEach(v=>{v.cellData.forEach(y=>{if(y.tag==="item"&&!y.fields.quantity)return!0;h[y.tag]=y.fields})}),this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:n,responseText:a,responseType:"success"}),je.successResult({orderDataTypeMap:h})}catch(s){return this._saveTaobaoRequestLog({appHost:window.location.host,url:r,header:n,responseText:a,responseType:"fail",errorMsg:s}),je.failResult("请求接口异常")}}async _getMobileOrderCookies(){const t="https://member1.taobao.com/member/fresh/deliver_address.htm";return Promise.all([os({url:t,name:"_m_h5_tk"}).then(r=>r==null?void 0:r.value),os({url:t,name:"cookie2"}).then(r=>r==null?void 0:r.value)]).then(([r,n])=>({_m_h5_tk:r,cookie2:n}))}async getTMallPurchaseOrderInfo({purchaseOrderSn:t,forceDetail:r=!1,purchaseOrderBuyer:n=""}){const a=this._getSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",n)}),s=this._getSessionData({key:this._buildVerifyKey("tmallOrderDetailNeedVerify",n)});let o={};return!r&&(!a||s)?(o=await this._getPurchaseOrderInfoByAsyncBought({purchaseOrderSn:t,purchaseOrderBuyer:n}),je.isFail(o)&&o.reason.includes("滑块")?this._setSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",n),value:!0}):this._setSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",n),value:!1}),je.isFail(o)&&(o.reason.includes("滑块")||o.reason==="请求失败")&&(this._setSessionData({key:this._buildVerifyKey("taobaoAsyncBoughtNeedVerify",n),value:!0}),s||(o=await this._getPurchaseOrderInfoByTmallOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:n})))):(o=await this._getPurchaseOrderInfoByTmallOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:n}),je.isFail(o)&&o.reason.includes("滑块")?this._setSessionData({key:this._buildVerifyKey("tmallOrderDetailNeedVerify",n),value:!0}):this._setSessionData({key:this._buildVerifyKey("tmallOrderDetailNeedVerify",n),value:!1}),je.isFail(o)&&o.reason.includes("滑块")&&(this._setSessionData({key:this._buildVerifyKey("tmallOrderDetailNeedVerify",n),value:!0}),!r&&!a&&(o=await this._getPurchaseOrderInfoByAsyncBought({purchaseOrderSn:t,purchaseOrderBuyer:n})))),o}async _getPurchaseOrderInfoByTmallOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:r=""}){const n=await this._getTaobaoBuyerNick();if(!n)return je.failResult("未登录");try{const a=await this._getTmallOrderInfoByTmallOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:r});if(je.isFail(a))return a;const s=a.orderInfo,o=this._parseTmallOrderPayment(s),i=this._parseTmallOrderBasicInfo(s),l=s.orders.list[0].status[0].subOrders[0].quantity,u=(+o/l).toFixed(2),c=s.orders.list[0].status[0].subOrders[0].itemInfo.itemUrl,d=s.basic.lists[0].content[0].text,p=/(.+?),(\d+-)?(\d+),(.+),(\d*)/.exec(d)||{},b=s.orders.list[0].status[0].subOrders[0].itemInfo.title,m={purchaseOrderSeller:i.sellerName,purchaseOrderPayment:o,purchaseOrderBuyer:unescape(decodeURI(n).replace(/\\/g,"%")),purchaseNum:l,purchasePrice:u,purchaseUrl:c,purchaseOrderFullname:p[1],purchaseOrderMobile:p[3],purchaseOrderFullAddress:p[4],purchaseOrderStartTime:i.startTime,purchaseOrderStatus:"wait_send",purchaseOrderItemTitle:b};i.sendTime&&(m.purchaseOrderSendTime=i.sendTime),s.overStatus.status.content[0].text.includes("待付款")||s.overStatus.status.content[0].text.includes("宝贝已拍下")||s.overStatus.status.content[0].text.includes("商品已拍下")?m.purchaseOrderStatus="wait_pay":s.overStatus.status.content[0].text.includes("等待买家确认")?m.purchaseOrderStatus="has_send":s.overStatus.status.content[0].text.includes("交易成功")?m.purchaseOrderStatus="finished":s.overStatus.status.content[0].text.includes("交易关闭")?m.purchaseOrderStatus="cancel":s.overStatus.status.content[0].text.includes("退款中")&&(m.purchaseOrderStatus="refund");let h="",v="",y="";if(s.overStatus&&s.overStatus.prompt){const S=this._parseTmallOrderLogisticsInfo({logisticsInfo:s.overStatus.prompt,isPrompt:!0});h=S.traceUrl,v=S.logisticsName,y=S.waybillCode}if(s.orders&&s.orders.list&&Ut(v)&&Ut(y)){const S=this._parseTmallOrderLogisticsInfo({logisticsInfo:s.orders.list,isPrompt:!1});h=S.traceUrl,v=S.logisticsName,y=S.waybillCode}if(Ut(v)||(m.purchaseOrderLogisticsName=v),Ut(y)||(m.purchaseOrderWaybillCode=y),!v&&I.inArray(m.purchaseOrderStatus,["has_send","finished"])>-1){const w=(await this._getLogisticsInfoByTransitStep({purchaseOrderSn:t})).logisticsInfo||{};Ut(w)||(m.purchaseOrderLogisticsName=w.logisticsName,m.purchaseOrderWaybillCode=w.waybillCode,m.logisticsIsAccept=w.logisticsIsAccept,!m.purchaseOrderSendTime&&w.sendTime&&(m.purchaseOrderSendTime=w.sendTime))}else if(h){const S=await this._getTaobaoLogisticsTrace(h);if(S.detailList){const w=S.detailList;w[0].cpName&&w[0].cpName!=="—"&&(m.purchaseOrderLogisticsName=w[0].cpName),w[0].mailNo&&w[0].mailNo!=="—"&&(m.purchaseOrderWaybillCode=w[0].mailNo);let C=0;w[0].detail&&I.each(w[0].detail,(k,f)=>{if(Vp(f.desc,f.action))return C=1,!1}),m.logisticsIsAccept=C}}let T=m.purchaseOrderStatus==="refund";if(m.purchaseOrderStatus==="cancel")try{T=s.overStatus.prompt[0].content[0].text.includes("退款")}catch(S){window.console.log("check has refund error",S)}if(T){const S=await this._getTaobaoOrderRefundMoney({purchaseOrderSn:t});m.purchaseOrderRefundMoney=S.refundMoney||0}return window.console.log("finish get purchase order info by tmall order detail",m),je.successResult({purchaseOrderInfo:m})}catch(a){return window.console.log("get purchase order info by tmall order detail error",a),je.failResult("获取天猫订单信息失败~")}}async _getTmallOrderInfoByTmallOrderDetail({purchaseOrderSn:t,purchaseOrderBuyer:r=""}){const n=`https://trade.tmall.com/detail/orderDetail.htm?route_to=tm1&bizOrderId=${t}`;try{if(!await this._getTaobaoBuyerNick())return je.failResult("未登录");const s=await Dr({url:n,dataType:"text"});if(!s)return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:s,responseType:"fail"}),je.failResult("获取天猫订单详情失败");if(s.includes("查询的物流详情不属于当前用户"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:s,responseType:"not_login"}),je.failResult("未登录");if(s.includes("你无权查看此交易!"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:s,responseType:"not_login"}),je.failResult("未登录");if(s.includes("霸下通用 web 页面-验证码"))return this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:s,responseType:"verify"}),je.failResult(this._buildVerifyReason({msg:"出现淘宝滑块",detailPageUrl:n,purchaseOrderBuyer:r}));const o=this._parseTmallOrderInfo({purchaseOrderSn:t,detailHtml:s,purchaseOrderBuyer:r});return je.isFail(o)?o.reason.includes("滑块")?this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:s,responseType:"verify"}):this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:s,responseType:"fail"}):this._saveTaobaoRequestLog({appHost:window.location.host,url:n,header:null,responseText:s,responseType:"success"}),o}catch(a){return window.console.error(a),je.failResult("解析天猫订单信息失败")}}_parseTmallOrderPayment(t){let r=0;return t.amount.count&&I.each(t.amount.count,(n,a)=>{a&&I.each(a,(s,o)=>{o&&I.each(o.content,(i,l)=>{if(!$o(l,"data")||!$o(l.data,"money")||$o(l.data,"titleLink")&&I.inArray(l.data.titleLink.text,["实付款","订单总价","需付款"])>-1)return!0;$o(l,"data")&&$o(l.data,"money")&&(r+=+l.data.money.text.replace("￥",""))})})}),r.toFixed(2)}_parseTmallOrderBasicInfo(t){const r={startTime:"",sendTime:"",sellerName:""};return t.basic.lists&&I.each(t.basic.lists,(n,a)=>{a.content&&I.each(a.content,(s,o)=>{if(o.type==="more"&&o.moreList&&I.each(o.moreList,(i,l)=>{l.key==="成交时间"&&(r.startTime=l.content[0].text),l.key==="发货时间"&&(r.sendTime=l.content[0].text)}),a.key==="商家"&&o.type==="html"){const i=I(`<div>${o.text}</div>`);i.find(".short-dd-nick").length>0&&(r.sellerName=i.find(".short-dd-nick").attr("title"))}})}),r}_parseTmallOrderLogisticsInfo({logisticsInfo:t,isPrompt:r=!1}){let n="",a="",s="";function o(i){i.content&&I.each(i.content,(l,u)=>{u.type==="logistic"&&(u.companyName!=="—"&&(a=u.companyName),u.mailNo!=="—"&&(s=u.mailNo),n=u.url)})}return t&&I.each(t,(i,l)=>{if(l.key==="物流"&&r)return o(l),!1;if(!r&&typeof l.logistic<"u")return o(l.logistic),!1}),{traceUrl:n,logisticsName:a,waybillCode:s}}_parseTmallOrderInfo({purchaseOrderSn:t,detailHtml:r,purchaseOrderBuyer:n}){let a=null;const s=`https://trade.tmall.com/detail/orderDetail.htm?route_to=tm1&bizOrderId=${t}`;try{const o=/detailData\s*=\s*(.+?)\s*<\/script/.exec(r);o&&o[1]&&(a=Mu.parse(o[1]))}catch(o){window.console.log("parseTmallOrderInfo error",o)}try{if(a==null){let o=!1;return Tb(r,"tmall")&&(o=!0),o?je.failResult(this._buildVerifyReason({msg:"出现天猫滑块",detailPageUrl:s,purchaseOrderBuyer:n})):je.failResult("解析天猫订单信息失败")}}catch(o){return window.console.log("判断出现滑块",o),je.failResult(this._buildVerifyReason({msg:"判断出现滑块",detailPageUrl:s,purchaseOrderBuyer:n}))}return je.successResult({orderInfo:a})}}const ho="tmall";function iB(){const e=[];return location.hostname.includes(".m.tmall.com")?(I(".sku-wrap .sku-list-wrap .items .checked").each((t,r)=>{const n=I.trim(I(r).text());n&&e.push(n)}),e):(I("#J_DetailMeta").length>0?I("#J_DetailMeta").find(".tb-sku").find(".J_TSaleProp li").each((r,n)=>{const a=I(n);if(a.hasClass("tb-selected")){const s=I.trim(a.find("span").text());e.push(s)}}):I('div[class^="skuWrapper--"]').length>0&&I('div[class^="skuWrapper--"] div[class*="isSelected--"]').each((t,r)=>{const n=I.trim(I(r).find("span").text());e.push(n)}),e.reverse())}const sf="yangkeduo",SC=e=>window.location.href.includes(`${e}/duo_coupon_landing.html`)||window.location.href.includes(`${e}/duo_cms_mall.html`);function tl(){let e=location.hostname;if(document.URL&&document.URL.includes("purchase_webview?purchaseUrl=")){let t=document.URL.split("purchase_webview?purchaseUrl=")[1].split("/")[2];t===null&&(t=decodeURI(document.URL).split("purchase_webview?purchaseUrl=")[1].split("%2F")[2]),e=t}return e}function of(e,t){const r=`https://${e}/`;return Promise.all([os({url:r,name:"pdd_user_id"}).then(n=>n==null?void 0:n.value),os({url:r,name:"PDDAccessToken"}).then(n=>n==null?void 0:n.value)]).then(([n,a])=>{const s={pddUserId:"",pddAccessToken:""};if(n&&a)s.pddUserId=n,s.pddAccessToken=a;else if(t!=null&&t.isRedirectLoginPage){const o=window.location.href.toLowerCase();window.location.href=`https://${e}/login.html?from=${encodeURIComponent(o)}`}return s})}async function lB({pddUserId:e,domain:t,force:r=!1}){const n={nickname:"",userPin:""};try{if(!e||!t)throw new Error("参数错误");const a=await Ze.getItem("local:pddUserIdAndUserInfoMap")||{};if(!r&&a&&a[e])return a[e];for(let s=0;s<3;s++){const o=await Dr({url:`https://mobile.${t}.com/personal_profile.html`,method:"GET",dataType:"text"});if(!o)throw new Error("请求异常");if(o.includes(`window.location.href="https://mobile.${t}.com/personal_profile.html`))continue;const i=/"nickname":"(.+?)",/.exec(o);if(!i||i.length<2)throw new Error("匹配失败");n.nickname=i[1];const l=/"_1tiLwH6D">(.+?)<\/div>/.exec(o);l&&l.length>1&&(n.userPin=l[1]);break}n.nickname!==""&&(a[e]=n,Ze.setItem("local:pddUserIdAndUserInfoMap",a))}catch(a){window.console.error("getPddNickname error",a)}return n}async function iv({locationUrl:e,pddUserId:t,pddAccessToken:r}){try{const n=await Dr({url:`https://${e}/proxy/api/addresses?pdduid=${t}`,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",AccessToken:r}});return n?(window.console.log("获取地址列表成功"),n):(window.console.log("获取地址列表失败"),[])}catch(n){return window.console.log("获取地址列表异常",n),[]}}function uB(e){return window.console.log("checkNeedDelPddAddress",e.pddAddressAddType),e.pddAddressAddType==="addNew"}async function cB({purchaseOrderInfo:e,host:t,pddUserId:r,pddAccessToken:n}){if(!uB(e))return window.console.log("skip deletePddAddress [CommonTool.checkNeedDelPddAddress]"),!1;const a=e.selAddressId;if(!a)return!1;try{const s=await Dr({url:`https://${t}/proxy/api/api/origenes/address/delete/${a}?pdduid=${r}`,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",AccessToken:n}});window.console.log("删除地址结果",s)}catch(s){window.console.log("删除地址异常",s)}}function dB(e,t=""){const r=e.consignee,n={appName:e.appInfo.appName,venderId:e.venderId,orderId:e.orderId,fullname:r.fullname,mobile:r.mobile,province:r.province,city:r.city,county:r.county,address:r.address,purchasePlatform:e.purchasePlatform,errorInfo:t};return Jt({url:"/order/purchase_order/save_address_match_error",method:"POST",data:n})}async function fB({host:e,pddAccessToken:t}){var n;let r=[];try{const a=await Dr({url:`https://${e}/orders.html`,method:"GET",dataType:"text",headers:{AccessToken:t},params:{type:"1",comment_tab:"1",combine_orders:"1",main_orders:"1",refer_page_name:"personal"}}),s=/window.rawData=(\{[^;]+\})/.exec(a),o=JSON.parse((s==null?void 0:s[1])||"")||{};Ut(o)||(r=((n=o.ordersStore)==null?void 0:n.orders)||[])}catch(a){window.console.log("获取订单列表失败",a),r=[]}return r}async function lv(e){const{purchaseOrderInfo:t,handleBuildFillRemarkText:r}=e;try{if(!t||t.purchasePlatform!=="yangkeduo"||!t.purchaseOrderSn)throw new Error("采购单数据错误或者不是采购pdd订单");if(t.notAllowUpdatePddBuyerMemo)throw new Error(`当前采购单状态notAllowUpdatePddBuyerMemo[${t.notAllowUpdatePddBuyerMemo}]不可更新备注`);const n=t.purchaseOrderStatus||"";if(["cancel","finished","refund","has_send"].includes(n))throw new Error(`当前采购单状态[${n}]不可更新备注`);let a;if(t.purchaseItem)a=r(t,"，");else{const l=JSON.parse(JSON.stringify(t));if(l.purchaseOrderItems){const u=[];I.each(l.purchaseOrderItems,(c,d)=>{u.push(d.skuSubName||"")}),l.purchaseItem={skuSubName:u.join(" ")}}a=r(l,"，")}if(!a)throw new Error("构建买家备注为空");const s=t.purchaseOrderSn,o=tl(),i=await of(o);if(!i||!i.pddUserId||!i.pddAccessToken)throw new Error("未登录拼多多");return await Dr({url:`https://mobile.yangkeduo.com/proxy/api/api/debye/update_order_buyer_memo?pdduid=${i.pddUserId}`,method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8",AccessToken:i.pddAccessToken},body:JSON.stringify({order_sn:s,buyer_memo:a})}).catch(l=>{throw window.console.log("拼多多修改备注接口返回修改失败：",l),new Error("拼多多修改备注接口返回修改失败")}),je.successResult({})}catch(n){window.console.log("修改拼多多备注异常：",n);const a=Zs(n)?n:"修改拼多多备注异常";return je.failResult(a)}}function pB(){I(document).find(".oc-safe-pay-statement").nextAll().each((t,r)=>{I(r).find("div[data-active]").each((n,a)=>{if(I.trim(I(a).text()).includes("提交订单"))return I(a).trigger("click"),!1})})}function hB(){const e=I(document).find(".oc-safe-pay-statement").parent(),t=/实付款:(￥|¥)(0\.\d?[1-9]|(?!0)\d{1,6}(?:\.\d?[1-9])?)/.exec(e.text());let r=0;return t&&t[2]&&(r=Rl(t[2])),r}const{sendMessage:mB,onMessage:gB}=Ts(),vB=e=>gB("collectProgress",e),uv=e=>(...t)=>mB(e,...t),yB=uv("createAutoCollect"),bB=uv("validatorAutoCollect"),wB=uv("updateAutoCollectResult"),{sendMessage:dee,onMessage:fee}=Ts(),{sendMessage:_B,onMessage:pee}=Ts(),cv=e=>(...t)=>_B(e,...t),os=cv("getCookie"),lf=cv("removeCookie"),uf=cv("getAllCookies"),{sendMessage:SB,onMessage:hee}=Ts(),TB=(e,...t)=>SB(e,...t),{sendMessage:xB,onMessage:mee}=Ts(),dv=e=>(...t)=>xB(e,...t),TC=dv("setCrawlTabId"),xC=dv("crawlShop"),CC=dv("getCrawlInfo"),{sendMessage:kC,onMessage:gee}=Ts(),CB=(e=>(...t)=>kC(e,...t))("fix1688MtopApiCookieToken"),kB=e=>kC("notifyPurchaseSuccess",e),{sendMessage:IC,onMessage:yee}=Ts(),Jt=async(...e)=>{try{return await IC("plwFetch",...e)}catch(t){if(t.name==="NonError")try{return Promise.reject(JSON.parse(t.message))}catch{throw t}throw t}},Dr=async(...e)=>{try{return await IC("commonFetch",...e)}catch(t){if(t.name==="NonError")try{return Promise.reject(JSON.parse(t.message))}catch{throw t}throw t}},{sendMessage:IB,onMessage:bee}=Ts(),fv=e=>(...t)=>IB(e,...t),ei=fv("createTab"),AB=fv("removeTab"),nr=fv("senderTabInfo"),OB=async(e,t=!1)=>Jt({url:"/open/fetch/pfti",method:"POST",data:e,isZip:t}),PB=async()=>Jt({url:"https://erp.91miaoshou.com/api/open/niu/check_login",method:"POST"}),EB=e=>Jt({url:"https://erp.91miaoshou.com/api/open/niu/push_collect_box",method:"POST",data:e}),$B=()=>Jt({url:"https://erp.91miaoshou.com/api/open/niu/getCollectBoxSetting",method:"GET"}),RB=e=>Jt({url:"/open/common/format_item_urls",method:"POST",data:e}),LB=e=>Jt({url:"/open/common/get_ts_const",method:"GET",params:e}),MB=zc(e=>Jt({url:"https://erp.91miaoshou.com/api/common/overall/getAgreementUrl",method:"GET",params:e})),DB=zc(e=>Jt({url:"https://erp.91miaoshou.com/api/auth/reseller_account/searchResellerAccountList",method:"POST",data:e})),NB=e=>Jt({url:"/order/purchase_order/save_taobao_request_log",method:"POST",data:e}),FB=(e,t={})=>Jt({url:"/open/common/url_gbk_encode",method:"POST",data:e,...t}),BB=e=>Jt({url:"/order/purchase_order/save_address_match_error",method:"POST",data:e}),jB=e=>Jt({url:"/open/common/getImgBase64Code",method:"GET",params:e}),UB=e=>Jt({url:"/order/purchase_order/get_tb_area_ids",method:"GET",params:e}),qB=e=>Jt({url:"https://erp.91miaoshou.com/api/open/niu/check_item_has_fetch",method:"POST",data:e}),VB=()=>Jt({url:"https://erp.91miaoshou.com/api/auth/account/get_account_info",method:"GET"}),AC=e=>Jt({url:"https://erp.91miaoshou.com/api/platform/pddkj/stat/crawl/save_user_operation_log",method:"POST",data:e}),HB=Qm("/open/common/download_item_urls"),zB=Qm("/open/common/getImg"),WB=e=>Jt({url:"https://erp.91miaoshou.com/api/open/plugin/updateActiveClientVersion",method:"GET",params:e}),KB=e=>Jt({url:"/open/plugin_client/initPluginClient",method:"POST",data:e}),GB=e=>Jt({url:"/open/plugin/getPluginConfig",method:"GET",params:e}),pv="earth",YB="local:copyItemUrls",OC="local:pluginConfigV2",PC="local:collectPanelDisabled",JB="local:collectPanelPosition",XB="local:collectStockConfirm",EC="local:lastPromptVersion",$C="local:pluginInstallConfig",QB="local:crawlPluginCollapse",ZB="local:collectStockAndPriceConfirm";let cf;const RC=async()=>{if(cf)return cf;try{return cf=await fetch(chrome.runtime.getURL("env.json")).then(e=>e.json()),cf}catch{}return{}},rl=zc(async()=>{const e=await Ze.getItem(OC);if(e&&Date.now()<e.expired)return e.config;const{releaseChannel:t}=await RC(),{manifest_version:r,version:n}=Wn.runtime.getManifest();let a=e==null?void 0:e.config.clientId;a||(a=(await KB({tag:pv,manifestVersion:"v3",version:n})).clientId);const s=await GB({tag:pv,manifestVersion:r,clientId:a,releaseChannel:t}),{result:o,...i}=s,l={...i,clientId:a};return Ze.setItem(OC,{config:l,expired:Date.now()+1e3*60*5}),l});var hv,LC;function e9(){if(LC)return hv;LC=1;var e=/^[a-z](?:[\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*-(?:[\x2D\.0-9_a-z\xB7\xC0-\xD6\xD8-\xF6\xF8-\u037D\u037F-\u1FFF\u200C\u200D\u203F\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])*$/,t=function(r){return e.test(r)};return hv=t,hv}var t9=e9();const r9=Sn(t9);var n9=(e,t,r)=>new Promise((n,a)=>{var s=l=>{try{i(r.next(l))}catch(u){a(u)}},o=l=>{try{i(r.throw(l))}catch(u){a(u)}},i=l=>l.done?n(l.value):Promise.resolve(l.value).then(s,o);i((r=r.apply(e,t)).next())});function a9(e){return n9(this,null,function*(){const{name:t,mode:r="closed",css:n,isolateEvents:a=!1}=e;if(!r9(t))throw Error(`"${t}" is not a valid custom element name. It must be two words and kebab-case, with a few exceptions. See spec for more details: https://html.spec.whatwg.org/multipage/custom-elements.html#valid-custom-element-name`);const s=document.createElement(t),o=s.attachShadow({mode:r}),i=document.createElement("html"),l=document.createElement("body"),u=document.createElement("head");if(n){const c=document.createElement("style");"url"in n?c.textContent=yield fetch(n.url).then(d=>d.text()):c.textContent=n.textContent,u.appendChild(c)}return i.appendChild(u),i.appendChild(l),o.appendChild(i),a&&(Array.isArray(a)?a:["keydown","keyup","keypress"]).forEach(d=>{l.addEventListener(d,p=>p.stopPropagation())}),{parentElement:s,shadow:o,isolatedElement:l}})}const s9=Symbol("null");let o9=0;class i9 extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[t]=arguments;if(t!=null){if(typeof t[Symbol.iterator]!="function")throw new TypeError(typeof t+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[r,n]of t)this.set(r,n)}}_getPublicKeys(t,r=!1){if(!Array.isArray(t))throw new TypeError("The keys parameter must be an array");const n=this._getPrivateKey(t,r);let a;return n&&this._publicKeys.has(n)?a=this._publicKeys.get(n):r&&(a=[...t],this._publicKeys.set(n,a)),{privateKey:n,publicKey:a}}_getPrivateKey(t,r=!1){const n=[];for(let a of t){a===null&&(a=s9);const s=typeof a=="object"||typeof a=="function"?"_objectHashes":typeof a=="symbol"?"_symbolHashes":!1;if(!s)n.push(a);else if(this[s].has(a))n.push(this[s].get(a));else if(r){const o=`@@mkm-ref-${o9++}@@`;this[s].set(a,o),n.push(o)}else return!1}return JSON.stringify(n)}set(t,r){const{publicKey:n}=this._getPublicKeys(t,!0);return super.set(n,r)}get(t){const{publicKey:r}=this._getPublicKeys(t);return super.get(r)}has(t){const{publicKey:r}=this._getPublicKeys(t);return super.has(r)}delete(t){const{publicKey:r,privateKey:n}=this._getPublicKeys(t);return!!(r&&super.delete(r)&&this._publicKeys.delete(n))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}function mv(e){if(e===null||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);return t!==null&&t!==Object.prototype&&Object.getPrototypeOf(t)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function gv(e,t,r=".",n){if(!mv(t))return gv(e,{},r,n);const a=Object.assign({},t);for(const s in e){if(s==="__proto__"||s==="constructor")continue;const o=e[s];o!=null&&(n&&n(a,s,o,r)||(Array.isArray(o)&&Array.isArray(a[s])?a[s]=[...o,...a[s]]:mv(o)&&mv(a[s])?a[s]=gv(o,a[s],(r?`${r}.`:"")+s.toString(),n):a[s]=o))}return a}function l9(e){return(...t)=>t.reduce((r,n)=>gv(r,n,"",e),{})}const u9=l9(),MC=e=>e!==null?{isDetected:!0,result:e}:{isDetected:!1},c9=e=>e===null?{isDetected:!0,result:null}:{isDetected:!1},d9=()=>({target:globalThis.document,unifyProcess:!0,detector:MC,observeConfigs:{childList:!0,subtree:!0,attributes:!0},signal:void 0,customMatcher:void 0}),f9=(e,t)=>u9(e,t),vv=new i9;function p9(e){const{defaultOptions:t}=e;return(r,n)=>{const{target:a,unifyProcess:s,observeConfigs:o,detector:i,signal:l,customMatcher:u}=f9(n,t),c=[r,a,s,o,i,l,u],d=vv.get(c);if(s&&d)return d;const p=new Promise(async(b,m)=>{if(l!=null&&l.aborted)return m(l.reason);const h=new MutationObserver(async y=>{for(const T of y){if(l!=null&&l.aborted){h.disconnect();break}const S=await DC({selector:r,target:a,detector:i,customMatcher:u});if(S.isDetected){h.disconnect(),b(S.result);break}}});l==null||l.addEventListener("abort",()=>(h.disconnect(),m(l.reason)),{once:!0});const v=await DC({selector:r,target:a,detector:i,customMatcher:u});if(v.isDetected)return b(v.result);h.observe(a,o)}).finally(()=>{vv.delete(c)});return vv.set(c,p),p}}async function DC({target:e,selector:t,detector:r,customMatcher:n}){const a=n?n(t):e.querySelector(t);return await r(a)}const h9=p9({defaultOptions:d9()});function df(e,...t){}const NC={debug:(...e)=>df(console.debug,...e),log:(...e)=>df(console.log,...e),warn:(...e)=>df(console.warn,...e),error:(...e)=>df(console.error,...e)};function FC(e,t,r){var n,a;r.position!=="inline"&&(r.zIndex!=null&&(e.style.zIndex=String(r.zIndex)),e.style.overflow="visible",e.style.position="relative",e.style.width="0",e.style.height="0",e.style.display="block",t&&(r.position==="overlay"?(t.style.position="absolute",(n=r.alignment)!=null&&n.startsWith("bottom-")?t.style.bottom="0":t.style.top="0",(a=r.alignment)!=null&&a.endsWith("-right")?t.style.right="0":t.style.left="0"):(t.style.position="fixed",t.style.top="0",t.style.bottom="0",t.style.left="0",t.style.right="0")))}function yv(e){if(e.anchor==null)return document.body;let t=typeof e.anchor=="function"?e.anchor():e.anchor;return typeof t=="string"?t.startsWith("/")?document.evaluate(t,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue??void 0:document.querySelector(t)??void 0:t??void 0}function BC(e,t){var n,a;const r=yv(t);if(r==null)throw Error("Failed to mount content script UI: could not find anchor element");switch(t.append){case void 0:case"last":r.append(e);break;case"first":r.prepend(e);break;case"replace":r.replaceWith(e);break;case"after":(n=r.parentElement)==null||n.insertBefore(e,r.nextElementSibling);break;case"before":(a=r.parentElement)==null||a.insertBefore(e,r);break;default:t.append(r,e);break}}function jC(e,t){let r;const n=()=>{r==null||r.stopAutoMount(),r=void 0},a=()=>{e.mount()},s=e.remove;return{mount:a,remove:()=>{n(),e.remove()},autoMount:l=>{r&&NC.warn("autoMount is already set."),r=m9({mount:a,unmount:s,stopAutoMount:n},{...t,...l})}}}function m9(e,t){const r=new AbortController,n="explicit_stop_auto_mount",a=()=>{var i;r.abort(n),(i=t.onStop)==null||i.call(t)};let s=typeof t.anchor=="function"?t.anchor():t.anchor;if(s instanceof Element)throw Error("autoMount and Element anchor option cannot be combined. Avoid passing `Element` directly or `() => Element` to the anchor.");async function o(i){let l=!!yv(t);for(l&&e.mount();!r.signal.aborted;)try{l=!!await h9(i??"body",{customMatcher:()=>yv(t)??null,detector:l?c9:MC,signal:r.signal}),l?e.mount():(e.unmount(),t.once&&e.stopAutoMount())}catch(u){if(r.signal.aborted&&r.signal.reason===n)break;throw u}}return o(s),{stopAutoMount:a}}function g9(e){let t=e,r="";const n=/(\s*@(property|font-face)[\s\S]*?{[\s\S]*?})/gm;let a;for(;(a=n.exec(e))!==null;)r+=a[1],t=t.replace(a[1],"");return{documentCss:r.trim(),shadowCss:t.trim()}}async function bv(e,t){var b;const r=Math.random().toString(36).substring(2,15),n=[];if(t.inheritStyles||n.push("/* WXT Shadow Root Reset */ :host{all:initial !important;}"),t.css&&n.push(t.css),((b=e.options)==null?void 0:b.cssInjectionMode)==="ui"){const m=await v9();n.push(m.replaceAll(":root",":host"))}const{shadowCss:a,documentCss:s}=g9(n.join(`
`).trim()),{isolatedElement:o,parentElement:i,shadow:l}=await a9({name:t.name,css:{textContent:a},mode:t.mode??"open",isolateEvents:t.isolateEvents});i.setAttribute("data-wxt-shadow-root","");let u;const c=()=>{if(BC(i,t),FC(i,l.querySelector("html"),t),s&&!document.querySelector(`style[wxt-shadow-root-document-styles="${r}"]`)){const m=document.createElement("style");m.textContent=s,m.setAttribute("wxt-shadow-root-document-styles",r),(document.head??document.body).append(m)}u=t.onMount(o,l,i)},d=()=>{var h;(h=t.onRemove)==null||h.call(t,u),i.remove();const m=document.querySelector(`style[wxt-shadow-root-document-styles="${r}"]`);for(m==null||m.remove();o.lastChild;)o.removeChild(o.lastChild);u=void 0},p=jC({mount:c,remove:d},t);return e.onInvalidated(d),{shadow:l,shadowHost:i,uiContainer:o,...p,get mounted(){return u}}}async function v9(){const e=Wn.runtime.getURL("/content-scripts/platform-base-utils.css");try{return await(await fetch(e)).text()}catch(t){return NC.warn(`Failed to load styles @ ${e}. Did you forget to import the stylesheet in your entrypoint?`,t),""}}const UC=Symbol(),Nu="el",y9="is-",ti=(e,t,r,n,a)=>{let s=`${e}-${t}`;return r&&(s+=`-${r}`),n&&(s+=`__${n}`),a&&(s+=`--${a}`),s},qC=Symbol("namespaceContextKey"),wv=e=>{const t=e||(Vt()?ft(qC,ee(Nu)):ee(Nu));return W(()=>_(t)||Nu)},ct=(e,t)=>{const r=wv(t);return{namespace:r,b:(h="")=>ti(r.value,e,h,"",""),e:h=>h?ti(r.value,e,"",h,""):"",m:h=>h?ti(r.value,e,"","",h):"",be:(h,v)=>h&&v?ti(r.value,e,h,v,""):"",em:(h,v)=>h&&v?ti(r.value,e,"",h,v):"",bm:(h,v)=>h&&v?ti(r.value,e,h,"",v):"",bem:(h,v,y)=>h&&v&&y?ti(r.value,e,h,v,y):"",is:(h,...v)=>{const y=v.length>=1?v[0]:!0;return h&&y?`${y9}${h}`:""},cssVar:h=>{const v={};for(const y in h)h[y]&&(v[`--${r.value}-${y}`]=h[y]);return v},cssVarName:h=>`--${r.value}-${h}`,cssVarBlock:h=>{const v={};for(const y in h)h[y]&&(v[`--${r.value}-${e}-${y}`]=h[y]);return v},cssVarBlockName:h=>`--${r.value}-${e}-${h}`}},Rr=e=>e===void 0,tn=e=>typeof e=="boolean",Zt=e=>typeof e=="number",VC=e=>!e&&e!==0||Ue(e)&&e.length===0||Rt(e)&&!Object.keys(e).length,Dn=e=>typeof Element>"u"?!1:e instanceof Element,ri=e=>Aa(e),b9=e=>mt(e)?!Number.isNaN(Number(e)):!1;var w9=Object.defineProperty,_9=Object.defineProperties,S9=Object.getOwnPropertyDescriptors,HC=Object.getOwnPropertySymbols,T9=Object.prototype.hasOwnProperty,x9=Object.prototype.propertyIsEnumerable,zC=(e,t,r)=>t in e?w9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,C9=(e,t)=>{for(var r in t||(t={}))T9.call(t,r)&&zC(e,r,t[r]);if(HC)for(var r of HC(t))x9.call(t,r)&&zC(e,r,t[r]);return e},k9=(e,t)=>_9(e,S9(t));function I9(e,t){var r;const n=Zr();return Bs(()=>{n.value=e()},k9(C9({},t),{flush:(r=void 0)!=null?r:"sync"})),_u(n)}var WC;const dr=typeof window<"u",A9=e=>typeof e=="string",ff=()=>{},_v=dr&&((WC=window==null?void 0:window.navigator)==null?void 0:WC.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Fu(e){return typeof e=="function"?e():_(e)}function O9(e,t){function r(...n){return new Promise((a,s)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(a).catch(s)})}return r}function P9(e,t={}){let r,n,a=ff;const s=i=>{clearTimeout(i),a(),a=ff};return i=>{const l=Fu(e),u=Fu(t.maxWait);return r&&s(r),l<=0||u!==void 0&&u<=0?(n&&(s(n),n=null),Promise.resolve(i())):new Promise((c,d)=>{a=t.rejectOnCancel?d:c,u&&!n&&(n=setTimeout(()=>{r&&s(r),n=null,c(i())},u)),r=setTimeout(()=>{n&&s(n),n=null,c(i())},l)})}}function E9(e){return e}function Bu(e){return gg()?(vg(e),!0):!1}function $9(e,t=200,r={}){return O9(P9(t,r),e)}function R9(e,t=200,r={}){const n=ee(e.value),a=$9(()=>{n.value=e.value},t,r);return tt(e,()=>a()),n}function L9(e,t=!0){Vt()?Kt(e):t?e():xt(e)}function pf(e,t,r={}){const{immediate:n=!0}=r,a=ee(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function i(){a.value=!1,o()}function l(...u){o(),a.value=!0,s=setTimeout(()=>{a.value=!1,s=null,e(...u)},Fu(t))}return n&&(a.value=!0,dr&&l()),Bu(i),{isPending:_u(a),start:l,stop:i}}function is(e){var t;const r=Fu(e);return(t=r==null?void 0:r.$el)!=null?t:r}const hf=dr?window:void 0;function Qn(...e){let t,r,n,a;if(A9(e[0])||Array.isArray(e[0])?([r,n,a]=e,t=hf):[t,r,n,a]=e,!t)return ff;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const s=[],o=()=>{s.forEach(c=>c()),s.length=0},i=(c,d,p,b)=>(c.addEventListener(d,p,b),()=>c.removeEventListener(d,p,b)),l=tt(()=>[is(t),Fu(a)],([c,d])=>{o(),c&&s.push(...r.flatMap(p=>n.map(b=>i(c,p,b,d))))},{immediate:!0,flush:"post"}),u=()=>{l(),o()};return Bu(u),u}let KC=!1;function GC(e,t,r={}){const{window:n=hf,ignore:a=[],capture:s=!0,detectIframe:o=!1}=r;if(!n)return;_v&&!KC&&(KC=!0,Array.from(n.document.body.children).forEach(p=>p.addEventListener("click",ff)));let i=!0;const l=p=>a.some(b=>{if(typeof b=="string")return Array.from(n.document.querySelectorAll(b)).some(m=>m===p.target||p.composedPath().includes(m));{const m=is(b);return m&&(p.target===m||p.composedPath().includes(m))}}),c=[Qn(n,"click",p=>{const b=is(e);if(!(!b||b===p.target||p.composedPath().includes(b))){if(p.detail===0&&(i=!l(p)),!i){i=!0;return}t(p)}},{passive:!0,capture:s}),Qn(n,"pointerdown",p=>{const b=is(e);b&&(i=!p.composedPath().includes(b)&&!l(p))},{passive:!0}),o&&Qn(n,"blur",p=>{var b;const m=is(e);((b=n.document.activeElement)==null?void 0:b.tagName)==="IFRAME"&&!(m!=null&&m.contains(n.document.activeElement))&&t(p)})].filter(Boolean);return()=>c.forEach(p=>p())}function YC(e,t=!1){const r=ee(),n=()=>r.value=!!e();return n(),L9(n,t),r}const JC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XC="__vueuse_ssr_handlers__";JC[XC]=JC[XC]||{};var QC=Object.getOwnPropertySymbols,M9=Object.prototype.hasOwnProperty,D9=Object.prototype.propertyIsEnumerable,N9=(e,t)=>{var r={};for(var n in e)M9.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&QC)for(var n of QC(e))t.indexOf(n)<0&&D9.call(e,n)&&(r[n]=e[n]);return r};function Zn(e,t,r={}){const n=r,{window:a=hf}=n,s=N9(n,["window"]);let o;const i=YC(()=>a&&"ResizeObserver"in a),l=()=>{o&&(o.disconnect(),o=void 0)},u=tt(()=>is(e),d=>{l(),i.value&&a&&d&&(o=new ResizeObserver(t),o.observe(d,s))},{immediate:!0,flush:"post"}),c=()=>{l(),u()};return Bu(c),{isSupported:i,stop:c}}var ZC=Object.getOwnPropertySymbols,F9=Object.prototype.hasOwnProperty,B9=Object.prototype.propertyIsEnumerable,j9=(e,t)=>{var r={};for(var n in e)F9.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&ZC)for(var n of ZC(e))t.indexOf(n)<0&&B9.call(e,n)&&(r[n]=e[n]);return r};function U9(e,t,r={}){const n=r,{window:a=hf}=n,s=j9(n,["window"]);let o;const i=YC(()=>a&&"MutationObserver"in a),l=()=>{o&&(o.disconnect(),o=void 0)},u=tt(()=>is(e),d=>{l(),i.value&&a&&d&&(o=new MutationObserver(t),o.observe(d,s))},{immediate:!0}),c=()=>{l(),u()};return Bu(c),{isSupported:i,stop:c}}var ek;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(ek||(ek={}));var q9=Object.defineProperty,tk=Object.getOwnPropertySymbols,V9=Object.prototype.hasOwnProperty,H9=Object.prototype.propertyIsEnumerable,rk=(e,t,r)=>t in e?q9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,z9=(e,t)=>{for(var r in t||(t={}))V9.call(t,r)&&rk(e,r,t[r]);if(tk)for(var r of tk(t))H9.call(t,r)&&rk(e,r,t[r]);return e};z9({linear:E9},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});class W9 extends Error{constructor(t){super(t),this.name="ElementPlusError"}}function ju(e,t){throw new W9(`[${e}] ${t}`)}function _ee(e,t){}const nk={current:0},ak=ee(0),sk=2e3,ok=Symbol("elZIndexContextKey"),ik=Symbol("zIndexContextKey"),Sv=e=>{const t=Vt()?ft(ok,nk):nk,r=e||(Vt()?ft(ik,void 0):void 0),n=W(()=>{const o=_(r);return Zt(o)?o:sk}),a=W(()=>n.value+ak.value),s=()=>(t.current++,ak.value=t.current,a.value);return!dr&&ft(ok),{initialZIndex:n,currentZIndex:a,nextZIndex:s}};var K9={name:"en",el:{breadcrumb:{label:"Breadcrumb"},colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color.",alphaLabel:"pick alpha value"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},mention:{loading:"Loading"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tour:{next:"Next",previous:"Previous",finish:"Finish"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"},carousel:{leftArrow:"Carousel arrow left",rightArrow:"Carousel arrow right",indicator:"Carousel switch to index {index}"}}};const G9=e=>(t,r)=>Y9(t,r,_(e)),Y9=(e,t,r)=>fn(r,e,e).replace(/\{(\w+)\}/g,(n,a)=>{var s;return`${(s=t==null?void 0:t[a])!=null?s:`{${a}}`}`}),J9=e=>{const t=W(()=>_(e).name),r=lr(e)?e:ee(e);return{lang:t,locale:r,t:G9(e)}},lk=Symbol("localeContextKey"),zr=e=>{const t=e||ft(lk,ee());return J9(W(()=>t.value||K9))},uk="__epPropKey",Ye=e=>e,X9=e=>Rt(e)&&!!e[uk],mf=(e,t)=>{if(!Rt(e)||X9(e))return e;const{values:r,required:n,default:a,type:s,validator:o}=e,l={type:s,required:!!n,validator:r||o?u=>{let c=!1,d=[];if(r&&(d=Array.from(r),Wt(e,"default")&&d.push(a),c||(c=d.includes(u))),o&&(c||(c=o(u))),!c&&d.length>0){const p=[...new Set(d)].map(b=>JSON.stringify(b)).join(", ");cF(`Invalid prop: validation failed${t?` for prop "${t}"`:""}. Expected one of [${p}], got value ${JSON.stringify(u)}.`)}return c}:void 0,[uk]:!0};return Wt(e,"default")&&(l.default=a),l},vt=e=>jc(Object.entries(e).map(([t,r])=>[t,mf(r,t)])),Uu=["","default","small","large"],qs=mf({type:String,values:Uu,required:!1}),ck=Symbol("size"),Q9=()=>{const e=ft(ck,{});return W(()=>_(e.size)||"")},dk=Symbol("emptyValuesContextKey"),Z9=["",void 0,null],ej=void 0,Tv=vt({emptyValues:Array,valueOnClear:{type:[String,Number,Boolean,Function],default:void 0,validator:e=>et(e)?!e():!e}}),fk=(e,t)=>{const r=Vt()?ft(dk,ee({})):ee({}),n=W(()=>e.emptyValues||r.value.emptyValues||Z9),a=W(()=>et(e.valueOnClear)?e.valueOnClear():e.valueOnClear!==void 0?e.valueOnClear:et(r.value.valueOnClear)?r.value.valueOnClear():r.value.valueOnClear!==void 0?r.value.valueOnClear:t!==void 0?t:ej),s=o=>n.value.includes(o);return n.value.includes(a.value),{emptyValues:n,valueOnClear:a,isEmptyValue:s}},xv=e=>Object.keys(e),gf=(e,t,r)=>({get value(){return fn(e,t,r)},set value(n){j8(e,t,n)}}),vf=ee();function yf(e,t=void 0){const r=Vt()?ft(UC,vf):vf;return e?W(()=>{var n,a;return(a=(n=r.value)==null?void 0:n[e])!=null?a:t}):r}function bf(e,t){const r=yf(),n=ct(e,W(()=>{var i;return((i=r.value)==null?void 0:i.namespace)||Nu})),a=zr(W(()=>{var i;return(i=r.value)==null?void 0:i.locale})),s=Sv(W(()=>{var i;return((i=r.value)==null?void 0:i.zIndex)||sk})),o=W(()=>{var i;return _(t)||((i=r.value)==null?void 0:i.size)||""});return pk(W(()=>_(r)||{})),{ns:n,locale:a,zIndex:s,size:o}}const pk=(e,t,r=!1)=>{var n;const a=!!Vt(),s=a?yf():void 0,o=(n=void 0)!=null?n:a?Fr:void 0;if(!o)return;const i=W(()=>{const l=_(e);return s!=null&&s.value?tj(s.value,l):l});return o(UC,i),o(lk,W(()=>i.value.locale)),o(qC,W(()=>i.value.namespace)),o(ik,W(()=>i.value.zIndex)),o(ck,{size:W(()=>i.value.size||"")}),o(dk,W(()=>({emptyValues:i.value.emptyValues,valueOnClear:i.value.valueOnClear}))),(r||!vf.value)&&(vf.value=i.value),i},tj=(e,t)=>{const r=[...new Set([...xv(e),...xv(t)])],n={};for(const a of r)n[a]=t[a]!==void 0?t[a]:e[a];return n},qr="update:modelValue",wf="change",_f="input";var _t=(e,t)=>{const r=e.__vccOpts||e;for(const[n,a]of t)r[n]=a;return r};const rj=e=>dr?window.requestAnimationFrame(e):setTimeout(e,16),hk=(e="")=>e.split(" ").filter(t=>!!t.trim()),La=(e,t)=>{if(!e||!t)return!1;if(t.includes(" "))throw new Error("className should not contain space.");return e.classList.contains(t)},ni=(e,t)=>{!e||!t.trim()||e.classList.add(...hk(t))},ls=(e,t)=>{!e||!t.trim()||e.classList.remove(...hk(t))},ai=(e,t)=>{var r;if(!dr||!e||!t)return"";let n=Ln(t);n==="float"&&(n="cssFloat");try{const a=e.style[n];if(a)return a;const s=(r=document.defaultView)==null?void 0:r.getComputedStyle(e,"");return s?s[n]:""}catch{return e.style[n]}};function ea(e,t="px"){if(!e)return"";if(Zt(e)||b9(e))return`${e}${t}`;if(mt(e))return e}let Sf;const nj=e=>{var t;if(!dr)return 0;if(Sf!==void 0)return Sf;const r=document.createElement("div");r.className=`${e}-scrollbar__wrap`,r.style.visibility="hidden",r.style.width="100px",r.style.position="absolute",r.style.top="-9999px",document.body.appendChild(r);const n=r.offsetWidth;r.style.overflow="scroll";const a=document.createElement("div");a.style.width="100%",r.appendChild(a);const s=a.offsetWidth;return(t=r.parentNode)==null||t.removeChild(r),Sf=n-s,Sf};function aj(e,t){if(!dr)return;if(!t){e.scrollTop=0;return}const r=[];let n=t.offsetParent;for(;n!==null&&e!==n&&e.contains(n);)r.push(n),n=n.offsetParent;const a=t.offsetTop+r.reduce((l,u)=>l+u.offsetTop,0),s=a+t.offsetHeight,o=e.scrollTop,i=o+e.clientHeight;a<o?e.scrollTop=a:s>i&&(e.scrollTop=s-e.clientHeight)}const Lr=(e,t)=>{if(e.install=r=>{for(const n of[e,...Object.values(t??{})])r.component(n.name,n)},t)for(const[r,n]of Object.entries(t))e[r]=n;return e},mk=(e,t)=>(e.install=r=>{e._context=r._context,r.config.globalProperties[t]=e},e),sj=(e,t)=>(e.install=r=>{r.directive(t,e)},e),si=e=>(e.install=jr,e),oj=vt({size:{type:Ye([Number,String])},color:{type:String}}),ij=Te({...Te({name:"ElIcon",inheritAttrs:!1}),props:oj,setup(e){const t=e,r=ct("icon"),n=W(()=>{const{size:a,color:s}=t;return!a&&!s?{}:{fontSize:Rr(a)?void 0:ea(a),"--color":s}});return(a,s)=>(G(),le("i",gn({class:_(r).b(),style:_(n)},a.$attrs),[De(a.$slots,"default")],16))}});var lj=_t(ij,[["__file","icon.vue"]]);const Ct=Lr(lj);/*! Element Plus Icons Vue v2.3.2 */var uj=Te({name:"ArrowDown",__name:"arrow-down",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.59 30.59 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.59 30.59 0 0 0-42.752 0z"})]))}}),Tf=uj,cj=Te({name:"ArrowLeft",__name:"arrow-left",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.59 30.59 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.59 30.59 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0"})]))}}),Cv=cj,dj=Te({name:"ArrowRight",__name:"arrow-right",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M340.864 149.312a30.59 30.59 0 0 0 0 42.752L652.736 512 340.864 831.872a30.59 30.59 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"})]))}}),nl=dj,fj=Te({name:"ArrowUp",__name:"arrow-up",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0"})]))}}),kv=fj,pj=Te({name:"Calendar",__name:"calendar",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64m0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64"})]))}}),hj=pj,mj=Te({name:"Check",__name:"check",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"})]))}}),gj=mj,vj=Te({name:"CircleCheck",__name:"circle-check",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),K("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752z"})]))}}),gk=vj,yj=Te({name:"CircleCloseFilled",__name:"circle-close-filled",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336z"})]))}}),vk=yj,bj=Te({name:"CircleClose",__name:"circle-close",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248z"}),K("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"})]))}}),qu=bj,wj=Te({name:"Clock",__name:"clock",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768m0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896"}),K("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32"}),K("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32"})]))}}),_j=wj,Sj=Te({name:"Close",__name:"close",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})]))}}),al=Sj,Tj=Te({name:"DArrowLeft",__name:"d-arrow-left",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672zm256 0a29.12 29.12 0 0 1 41.728 0 30.59 30.59 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.59 30.59 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672z"})]))}}),oi=Tj,xj=Te({name:"DArrowRight",__name:"d-arrow-right",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L764.736 512 452.864 192a30.59 30.59 0 0 1 0-42.688m-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.59 30.59 0 0 1 0-42.752L508.736 512 196.864 192a30.59 30.59 0 0 1 0-42.688"})]))}}),ii=xj,Cj=Te({name:"Hide",__name:"hide",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4s-12.8-9.6-22.4-9.6-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176S0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4s3.2 16 9.6 22.4 12.8 9.6 22.4 9.6 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4m-646.4 528Q115.2 579.2 76.8 512q43.2-72 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4m140.8-96Q352 555.2 352 512c0-44.8 16-83.2 48-112s67.2-48 112-48c28.8 0 54.4 6.4 73.6 19.2zM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6q-43.2 72-153.6 172.8c-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176S1024 528 1024 512s-48.001-73.6-134.401-176"}),K("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112s-67.2 48-112 48"})]))}}),kj=Cj,Ij=Te({name:"InfoFilled",__name:"info-filled",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64m67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344M590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.99 12.99 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"})]))}}),yk=Ij,Aj=Te({name:"Loading",__name:"loading",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"})]))}}),Vu=Aj,Oj=Te({name:"Minus",__name:"minus",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64"})]))}}),Pj=Oj,Ej=Te({name:"Plus",__name:"plus",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64z"})]))}}),$j=Ej,Rj=Te({name:"SuccessFilled",__name:"success-filled",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.27 38.27 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336z"})]))}}),bk=Rj,Lj=Te({name:"View",__name:"view",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288m0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.19 160.19 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"})]))}}),Mj=Lj,Dj=Te({name:"WarningFilled",__name:"warning-filled",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896m0 192a58.43 58.43 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.43 58.43 0 0 0 512 256m0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4"})]))}}),Iv=Dj;const Ma=Ye([String,Object,Function]),wk={Close:al},Av={Close:al,SuccessFilled:bk,InfoFilled:yk,WarningFilled:Iv,CircleCloseFilled:vk},mo={success:bk,warning:Iv,error:vk,info:yk},_k={validating:Vu,success:gk,error:qu},Nj=["light","dark"],Fj=vt({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:xv(mo),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Nj,default:"light"}}),Bj=Te({...Te({name:"ElAlert"}),props:Fj,emits:{close:e=>e instanceof MouseEvent},setup(e,{emit:t}){const r=e,{Close:n}=Av,a=Ra(),s=ct("alert"),o=ee(!0),i=W(()=>mo[r.type]),l=W(()=>!!(r.description||a.default)),u=c=>{o.value=!1,t("close",c)};return(c,d)=>(G(),Le(ma,{name:_(s).b("fade"),persisted:""},{default:ie(()=>[qt(K("div",{class:Q([_(s).b(),_(s).m(c.type),_(s).is("center",c.center),_(s).is(c.effect)]),role:"alert"},[c.showIcon&&_(i)?(G(),Le(_(Ct),{key:0,class:Q([_(s).e("icon"),{[_(s).is("big")]:_(l)}])},{default:ie(()=>[(G(),Le(br(_(i))))]),_:1},8,["class"])):Oe("v-if",!0),K("div",{class:Q(_(s).e("content"))},[c.title||c.$slots.title?(G(),le("span",{key:0,class:Q([_(s).e("title"),{"with-description":_(l)}])},[De(c.$slots,"title",{},()=>[ot(He(c.title),1)])],2)):Oe("v-if",!0),_(l)?(G(),le("p",{key:1,class:Q(_(s).e("description"))},[De(c.$slots,"default",{},()=>[ot(He(c.description),1)])],2)):Oe("v-if",!0),c.closable?(G(),le(pt,{key:2},[c.closeText?(G(),le("div",{key:0,class:Q([_(s).e("close-btn"),_(s).is("customed")]),onClick:u},He(c.closeText),3)):(G(),Le(_(Ct),{key:1,class:Q(_(s).e("close-btn")),onClick:u},{default:ie(()=>[ue(_(n))]),_:1},8,["class"]))],64)):Oe("v-if",!0)],2)],2),[[Sr,o.value]])]),_:3},8,["name"]))}});var jj=_t(Bj,[["__file","alert.vue"]]);const Uj=Lr(jj),Sk=()=>dr&&/firefox/i.test(window.navigator.userAgent);let Da;const qj=`
  height:0 !important;
  visibility:hidden !important;
  ${Sk()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Vj=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Hj(e){const t=window.getComputedStyle(e),r=t.getPropertyValue("box-sizing"),n=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),a=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:Vj.map(o=>`${o}:${t.getPropertyValue(o)}`).join(";"),paddingSize:n,borderSize:a,boxSizing:r}}function Tk(e,t=1,r){var n;Da||(Da=document.createElement("textarea"),document.body.appendChild(Da));const{paddingSize:a,borderSize:s,boxSizing:o,contextStyle:i}=Hj(e);Da.setAttribute("style",`${i};${qj}`),Da.value=e.value||e.placeholder||"";let l=Da.scrollHeight;const u={};o==="border-box"?l=l+s:o==="content-box"&&(l=l-a),Da.value="";const c=Da.scrollHeight-a;if(Zt(t)){let d=c*t;o==="border-box"&&(d=d+a+s),l=Math.max(d,l),u.minHeight=`${d}px`}if(Zt(r)){let d=c*r;o==="border-box"&&(d=d+a+s),l=Math.min(d,l)}return u.height=`${l}px`,(n=Da.parentNode)==null||n.removeChild(Da),Da=void 0,u}const xk=e=>e,zj=vt({ariaLabel:String,ariaOrientation:{type:String,values:["horizontal","vertical","undefined"]},ariaControls:String}),Vs=e=>Lo(zj,e),Wj=vt({id:{type:String,default:void 0},size:qs,disabled:Boolean,modelValue:{type:Ye([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Ye([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:Ma},prefixIcon:{type:Ma},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Ye([Object,Array,String]),default:()=>xk({})},autofocus:Boolean,rows:{type:Number,default:2},...Vs(["ariaLabel"])}),Kj={[qr]:e=>mt(e),input:e=>mt(e),change:e=>mt(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},Gj=["class","style"],Yj=/^on[A-Z]/,Ck=(e={})=>{const{excludeListeners:t=!1,excludeKeys:r}=e,n=W(()=>((r==null?void 0:r.value)||[]).concat(Gj)),a=Vt();return W(a?()=>{var s;return jc(Object.entries((s=a.proxy)==null?void 0:s.$attrs).filter(([o])=>!n.value.includes(o)&&!(t&&Yj.test(o))))}:()=>({}))},sl=Symbol("formContextKey"),li=Symbol("formItemContextKey"),kk={prefix:Math.floor(Math.random()*1e4),current:0},Jj=Symbol("elIdInjection"),Ik=()=>Vt()?ft(Jj,kk):kk,us=e=>{const t=Ik(),r=wv();return I9(()=>_(e)||`${r.value}-id-${t.prefix}-${t.current++}`)},go=()=>{const e=ft(sl,void 0),t=ft(li,void 0);return{form:e,formItem:t}},xf=(e,{formItemContext:t,disableIdGeneration:r,disableIdManagement:n})=>{r||(r=ee(!1)),n||(n=ee(!1));const a=ee();let s;const o=W(()=>{var i;return!!(!(e.label||e.ariaLabel)&&t&&t.inputIds&&((i=t.inputIds)==null?void 0:i.length)<=1)});return Kt(()=>{s=tt([Nr(e,"id"),r],([i,l])=>{const u=i??(l?void 0:us().value);u!==a.value&&(t!=null&&t.removeInputId&&(a.value&&t.removeInputId(a.value),!(n!=null&&n.value)&&!l&&u&&t.addInputId(u)),a.value=u)},{immediate:!0})}),Yo(()=>{s&&s(),t!=null&&t.removeInputId&&a.value&&t.removeInputId(a.value)}),{isLabeledByFormItem:o,inputId:a}},Ak=e=>{const t=Vt();return W(()=>{var r,n;return(n=(r=t==null?void 0:t.proxy)==null?void 0:r.$props)==null?void 0:n[e]})},Na=(e,t={})=>{const r=ee(void 0),n=t.prop?r:Ak("size"),a=t.global?r:Q9(),s=t.form?{size:void 0}:ft(sl,void 0),o=t.formItem?{size:void 0}:ft(li,void 0);return W(()=>n.value||_(e)||(o==null?void 0:o.size)||(s==null?void 0:s.size)||a.value||"")},Hu=e=>{const t=Ak("disabled"),r=ft(sl,void 0);return W(()=>t.value||_(e)||(r==null?void 0:r.disabled)||!1)};function Cf(e,{beforeFocus:t,afterFocus:r,beforeBlur:n,afterBlur:a}={}){const s=Vt(),{emit:o}=s,i=Zr(),l=ee(!1),u=p=>{et(t)&&t(p)||l.value||(l.value=!0,o("focus",p),r==null||r())},c=p=>{var b;et(n)&&n(p)||p.relatedTarget&&((b=i.value)!=null&&b.contains(p.relatedTarget))||(l.value=!1,o("blur",p),a==null||a())},d=()=>{var p,b;(p=i.value)!=null&&p.contains(document.activeElement)&&i.value!==document.activeElement||(b=e.value)==null||b.focus()};return tt(i,p=>{p&&p.setAttribute("tabindex","-1")}),Qn(i,"focus",u,!0),Qn(i,"blur",c,!0),Qn(i,"click",d,!0),{isFocused:l,wrapperRef:i,handleFocus:u,handleBlur:c}}const Xj=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function Ok({afterComposition:e,emit:t}){const r=ee(!1),n=i=>{t==null||t("compositionstart",i),r.value=!0},a=i=>{var l;t==null||t("compositionupdate",i);const u=(l=i.target)==null?void 0:l.value,c=u[u.length-1]||"";r.value=!Xj(c)},s=i=>{t==null||t("compositionend",i),r.value&&(r.value=!1,xt(()=>e(i)))};return{isComposing:r,handleComposition:i=>{i.type==="compositionend"?s(i):a(i)},handleCompositionStart:n,handleCompositionUpdate:a,handleCompositionEnd:s}}function Qj(e){let t;function r(){if(e.value==null)return;const{selectionStart:a,selectionEnd:s,value:o}=e.value;if(a==null||s==null)return;const i=o.slice(0,Math.max(0,a)),l=o.slice(Math.max(0,s));t={selectionStart:a,selectionEnd:s,value:o,beforeTxt:i,afterTxt:l}}function n(){if(e.value==null||t==null)return;const{value:a}=e.value,{beforeTxt:s,afterTxt:o,selectionStart:i}=t;if(s==null||o==null||i==null)return;let l=a.length;if(a.endsWith(o))l=a.length-o.length;else if(a.startsWith(s))l=s.length;else{const u=s[i-1],c=a.indexOf(u,i-1);c!==-1&&(l=c+1)}e.value.setSelectionRange(l,l)}return[r,n]}const Zj=Te({...Te({name:"ElInput",inheritAttrs:!1}),props:Wj,emits:Kj,setup(e,{expose:t,emit:r}){const n=e,a=Ud(),s=Ck(),o=Ra(),i=W(()=>[n.type==="textarea"?h.b():m.b(),m.m(p.value),m.is("disabled",b.value),m.is("exceed",se.value),{[m.b("group")]:o.prepend||o.append,[m.m("prefix")]:o.prefix||n.prefixIcon,[m.m("suffix")]:o.suffix||n.suffixIcon||n.clearable||n.showPassword,[m.bm("suffix","password-clear")]:M.value&&D.value,[m.b("hidden")]:n.type==="hidden"},a.class]),l=W(()=>[m.e("wrapper"),m.is("focus",O.value)]),{form:u,formItem:c}=go(),{inputId:d}=xf(n,{formItemContext:c}),p=Na(),b=Hu(),m=ct("input"),h=ct("textarea"),v=Zr(),y=Zr(),T=ee(!1),S=ee(!1),w=ee(),C=Zr(n.inputStyle),k=W(()=>v.value||y.value),{wrapperRef:f,isFocused:O,handleFocus:E,handleBlur:N}=Cf(k,{beforeFocus(){return b.value},afterBlur(){var ye;n.validateEvent&&((ye=c==null?void 0:c.validate)==null||ye.call(c,"blur").catch(Ce=>void 0))}}),$=W(()=>{var ye;return(ye=u==null?void 0:u.statusIcon)!=null?ye:!1}),L=W(()=>(c==null?void 0:c.validateState)||""),B=W(()=>L.value&&_k[L.value]),F=W(()=>S.value?Mj:kj),R=W(()=>[a.style]),H=W(()=>[n.inputStyle,C.value,{resize:n.resize}]),q=W(()=>Aa(n.modelValue)?"":String(n.modelValue)),M=W(()=>n.clearable&&!b.value&&!n.readonly&&!!q.value&&(O.value||T.value)),D=W(()=>n.showPassword&&!b.value&&!!q.value&&(!!q.value||O.value)),Y=W(()=>n.showWordLimit&&!!n.maxlength&&(n.type==="text"||n.type==="textarea")&&!b.value&&!n.readonly&&!n.showPassword),Z=W(()=>q.value.length),se=W(()=>!!Y.value&&Z.value>Number(n.maxlength)),ne=W(()=>!!o.suffix||!!n.suffixIcon||M.value||n.showPassword||Y.value||!!L.value&&$.value),[me,ve]=Qj(v);Zn(y,ye=>{if(xe(),!Y.value||n.resize!=="both")return;const Ce=ye[0],{width:it}=Ce.contentRect;w.value={right:`calc(100% - ${it+15+6}px)`}});const We=()=>{const{type:ye,autosize:Ce}=n;if(!(!dr||ye!=="textarea"||!y.value))if(Ce){const it=Rt(Ce)?Ce.minRows:void 0,Et=Rt(Ce)?Ce.maxRows:void 0,bt=Tk(y.value,it,Et);C.value={overflowY:"hidden",...bt},xt(()=>{y.value.offsetHeight,C.value=bt})}else C.value={minHeight:Tk(y.value).minHeight}},xe=(ye=>{let Ce=!1;return()=>{var it;if(Ce||!n.autosize)return;((it=y.value)==null?void 0:it.offsetParent)===null||(ye(),Ce=!0)}})(We),ze=()=>{const ye=k.value,Ce=n.formatter?n.formatter(q.value):q.value;!ye||ye.value===Ce||(ye.value=Ce)},Ne=async ye=>{me();let{value:Ce}=ye.target;if(n.formatter&&(Ce=n.parser?n.parser(Ce):Ce),!X.value){if(Ce===q.value){ze();return}r(qr,Ce),r("input",Ce),await xt(),ze(),ve()}},rt=ye=>{r("change",ye.target.value)},{isComposing:X,handleCompositionStart:re,handleCompositionUpdate:ge,handleCompositionEnd:Re}=Ok({emit:r,afterComposition:Ne}),Se=()=>{me(),S.value=!S.value,setTimeout(ve)},ke=()=>{var ye;return(ye=k.value)==null?void 0:ye.focus()},qe=()=>{var ye;return(ye=k.value)==null?void 0:ye.blur()},Pe=ye=>{T.value=!1,r("mouseleave",ye)},Me=ye=>{T.value=!0,r("mouseenter",ye)},$e=ye=>{r("keydown",ye)},nt=()=>{var ye;(ye=k.value)==null||ye.select()},Ge=()=>{r(qr,""),r("change",""),r("clear"),r("input","")};return tt(()=>n.modelValue,()=>{var ye;xt(()=>We()),n.validateEvent&&((ye=c==null?void 0:c.validate)==null||ye.call(c,"change").catch(Ce=>void 0))}),tt(q,()=>ze()),tt(()=>n.type,async()=>{await xt(),ze(),We()}),Kt(()=>{!n.formatter&&n.parser,ze(),xt(We)}),t({input:v,textarea:y,ref:k,textareaStyle:H,autosize:Nr(n,"autosize"),isComposing:X,focus:ke,blur:qe,select:nt,clear:Ge,resizeTextarea:We}),(ye,Ce)=>(G(),le("div",{class:Q([_(i),{[_(m).bm("group","append")]:ye.$slots.append,[_(m).bm("group","prepend")]:ye.$slots.prepend}]),style:Dt(_(R)),onMouseenter:Me,onMouseleave:Pe},[Oe(" input "),ye.type!=="textarea"?(G(),le(pt,{key:0},[Oe(" prepend slot "),ye.$slots.prepend?(G(),le("div",{key:0,class:Q(_(m).be("group","prepend"))},[De(ye.$slots,"prepend")],2)):Oe("v-if",!0),K("div",{ref_key:"wrapperRef",ref:f,class:Q(_(l))},[Oe(" prefix slot "),ye.$slots.prefix||ye.prefixIcon?(G(),le("span",{key:0,class:Q(_(m).e("prefix"))},[K("span",{class:Q(_(m).e("prefix-inner"))},[De(ye.$slots,"prefix"),ye.prefixIcon?(G(),Le(_(Ct),{key:0,class:Q(_(m).e("icon"))},{default:ie(()=>[(G(),Le(br(ye.prefixIcon)))]),_:1},8,["class"])):Oe("v-if",!0)],2)],2)):Oe("v-if",!0),K("input",gn({id:_(d),ref_key:"input",ref:v,class:_(m).e("inner")},_(s),{minlength:ye.minlength,maxlength:ye.maxlength,type:ye.showPassword?S.value?"text":"password":ye.type,disabled:_(b),readonly:ye.readonly,autocomplete:ye.autocomplete,tabindex:ye.tabindex,"aria-label":ye.ariaLabel,placeholder:ye.placeholder,style:ye.inputStyle,form:ye.form,autofocus:ye.autofocus,role:ye.containerRole,onCompositionstart:_(re),onCompositionupdate:_(ge),onCompositionend:_(Re),onInput:Ne,onChange:rt,onKeydown:$e}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),Oe(" suffix slot "),_(ne)?(G(),le("span",{key:1,class:Q(_(m).e("suffix"))},[K("span",{class:Q(_(m).e("suffix-inner"))},[!_(M)||!_(D)||!_(Y)?(G(),le(pt,{key:0},[De(ye.$slots,"suffix"),ye.suffixIcon?(G(),Le(_(Ct),{key:0,class:Q(_(m).e("icon"))},{default:ie(()=>[(G(),Le(br(ye.suffixIcon)))]),_:1},8,["class"])):Oe("v-if",!0)],64)):Oe("v-if",!0),_(M)?(G(),Le(_(Ct),{key:1,class:Q([_(m).e("icon"),_(m).e("clear")]),onMousedown:Pt(_(jr),["prevent"]),onClick:Ge},{default:ie(()=>[ue(_(qu))]),_:1},8,["class","onMousedown"])):Oe("v-if",!0),_(D)?(G(),Le(_(Ct),{key:2,class:Q([_(m).e("icon"),_(m).e("password")]),onClick:Se},{default:ie(()=>[(G(),Le(br(_(F))))]),_:1},8,["class"])):Oe("v-if",!0),_(Y)?(G(),le("span",{key:3,class:Q(_(m).e("count"))},[K("span",{class:Q(_(m).e("count-inner"))},He(_(Z))+" / "+He(ye.maxlength),3)],2)):Oe("v-if",!0),_(L)&&_(B)&&_($)?(G(),Le(_(Ct),{key:4,class:Q([_(m).e("icon"),_(m).e("validateIcon"),_(m).is("loading",_(L)==="validating")])},{default:ie(()=>[(G(),Le(br(_(B))))]),_:1},8,["class"])):Oe("v-if",!0)],2)],2)):Oe("v-if",!0)],2),Oe(" append slot "),ye.$slots.append?(G(),le("div",{key:1,class:Q(_(m).be("group","append"))},[De(ye.$slots,"append")],2)):Oe("v-if",!0)],64)):(G(),le(pt,{key:1},[Oe(" textarea "),K("textarea",gn({id:_(d),ref_key:"textarea",ref:y,class:[_(h).e("inner"),_(m).is("focus",_(O))]},_(s),{minlength:ye.minlength,maxlength:ye.maxlength,tabindex:ye.tabindex,disabled:_(b),readonly:ye.readonly,autocomplete:ye.autocomplete,style:_(H),"aria-label":ye.ariaLabel,placeholder:ye.placeholder,form:ye.form,autofocus:ye.autofocus,rows:ye.rows,role:ye.containerRole,onCompositionstart:_(re),onCompositionupdate:_(ge),onCompositionend:_(Re),onInput:Ne,onFocus:_(E),onBlur:_(N),onChange:rt,onKeydown:$e}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),_(Y)?(G(),le("span",{key:0,style:Dt(w.value),class:Q(_(m).e("count"))},He(_(Z))+" / "+He(ye.maxlength),7)):Oe("v-if",!0)],64))],38))}});var e7=_t(Zj,[["__file","input.vue"]]);const Hs=Lr(e7),ol=4,t7={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},r7=({move:e,size:t,bar:r})=>({[r.size]:t,transform:`translate${r.axis}(${e}%)`}),Ov=Symbol("scrollbarContextKey"),n7=vt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),a7="Thumb";var Pk=_t(Te({__name:"thumb",props:n7,setup(e){const t=e,r=ft(Ov),n=ct("scrollbar");r||ju(a7,"can not inject scrollbar context");const a=ee(),s=ee(),o=ee({}),i=ee(!1);let l=!1,u=!1,c=dr?document.onselectstart:null;const d=W(()=>t7[t.vertical?"vertical":"horizontal"]),p=W(()=>r7({size:t.size,move:t.move,bar:d.value})),b=W(()=>a.value[d.value.offset]**2/r.wrapElement[d.value.scrollSize]/t.ratio/s.value[d.value.offset]),m=k=>{var f;if(k.stopPropagation(),k.ctrlKey||[1,2].includes(k.button))return;(f=window.getSelection())==null||f.removeAllRanges(),v(k);const O=k.currentTarget;O&&(o.value[d.value.axis]=O[d.value.offset]-(k[d.value.client]-O.getBoundingClientRect()[d.value.direction]))},h=k=>{if(!s.value||!a.value||!r.wrapElement)return;const f=Math.abs(k.target.getBoundingClientRect()[d.value.direction]-k[d.value.client]),O=s.value[d.value.offset]/2,E=(f-O)*100*b.value/a.value[d.value.offset];r.wrapElement[d.value.scroll]=E*r.wrapElement[d.value.scrollSize]/100},v=k=>{k.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",T),c=document.onselectstart,document.onselectstart=()=>!1},y=k=>{if(!a.value||!s.value||l===!1)return;const f=o.value[d.value.axis];if(!f)return;const O=(a.value.getBoundingClientRect()[d.value.direction]-k[d.value.client])*-1,E=s.value[d.value.offset]-f,N=(O-E)*100*b.value/a.value[d.value.offset];r.wrapElement[d.value.scroll]=N*r.wrapElement[d.value.scrollSize]/100},T=()=>{l=!1,o.value[d.value.axis]=0,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",T),C(),u&&(i.value=!1)},S=()=>{u=!1,i.value=!!t.size},w=()=>{u=!0,i.value=l};Ur(()=>{C(),document.removeEventListener("mouseup",T)});const C=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return Qn(Nr(r,"scrollbarElement"),"mousemove",S),Qn(Nr(r,"scrollbarElement"),"mouseleave",w),(k,f)=>(G(),Le(ma,{name:_(n).b("fade"),persisted:""},{default:ie(()=>[qt(K("div",{ref_key:"instance",ref:a,class:Q([_(n).e("bar"),_(n).is(_(d).key)]),onMousedown:h},[K("div",{ref_key:"thumb",ref:s,class:Q(_(n).e("thumb")),style:Dt(_(p)),onMousedown:m},null,38)],34),[[Sr,k.always||i.value]])]),_:1},8,["name"]))}}),[["__file","thumb.vue"]]);const s7=vt({always:{type:Boolean,default:!0},minSize:{type:Number,required:!0}});var o7=_t(Te({__name:"bar",props:s7,setup(e,{expose:t}){const r=e,n=ft(Ov),a=ee(0),s=ee(0),o=ee(""),i=ee(""),l=ee(1),u=ee(1);return t({handleScroll:p=>{if(p){const b=p.offsetHeight-ol,m=p.offsetWidth-ol;s.value=p.scrollTop*100/b*l.value,a.value=p.scrollLeft*100/m*u.value}},update:()=>{const p=n==null?void 0:n.wrapElement;if(!p)return;const b=p.offsetHeight-ol,m=p.offsetWidth-ol,h=b**2/p.scrollHeight,v=m**2/p.scrollWidth,y=Math.max(h,r.minSize),T=Math.max(v,r.minSize);l.value=h/(b-h)/(y/(b-y)),u.value=v/(m-v)/(T/(m-T)),i.value=y+ol<b?`${y}px`:"",o.value=T+ol<m?`${T}px`:""}}),(p,b)=>(G(),le(pt,null,[ue(Pk,{move:a.value,ratio:u.value,size:o.value,always:p.always},null,8,["move","ratio","size","always"]),ue(Pk,{move:s.value,ratio:l.value,size:i.value,vertical:"",always:p.always},null,8,["move","ratio","size","always"])],64))}}),[["__file","bar.vue"]]);const i7=vt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Ye([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},tabindex:{type:[String,Number],default:void 0},id:String,role:String,...Vs(["ariaLabel","ariaOrientation"])}),l7=Te({...Te({name:"ElScrollbar"}),props:i7,emits:{scroll:({scrollTop:e,scrollLeft:t})=>[e,t].every(Zt)},setup(e,{expose:t,emit:r}){const n=e,a=ct("scrollbar");let s,o,i=0,l=0;const u=ee(),c=ee(),d=ee(),p=ee(),b=W(()=>{const C={};return n.height&&(C.height=ea(n.height)),n.maxHeight&&(C.maxHeight=ea(n.maxHeight)),[n.wrapStyle,C]}),m=W(()=>[n.wrapClass,a.e("wrap"),{[a.em("wrap","hidden-default")]:!n.native}]),h=W(()=>[a.e("view"),n.viewClass]),v=()=>{var C;c.value&&((C=p.value)==null||C.handleScroll(c.value),i=c.value.scrollTop,l=c.value.scrollLeft,r("scroll",{scrollTop:c.value.scrollTop,scrollLeft:c.value.scrollLeft}))};function y(C,k){Rt(C)?c.value.scrollTo(C):Zt(C)&&Zt(k)&&c.value.scrollTo(C,k)}const T=C=>{Zt(C)&&(c.value.scrollTop=C)},S=C=>{Zt(C)&&(c.value.scrollLeft=C)},w=()=>{var C;(C=p.value)==null||C.update()};return tt(()=>n.noresize,C=>{C?(s==null||s(),o==null||o()):({stop:s}=Zn(d,w),o=Qn("resize",w))},{immediate:!0}),tt(()=>[n.maxHeight,n.height],()=>{n.native||xt(()=>{var C;w(),c.value&&((C=p.value)==null||C.handleScroll(c.value))})}),Fr(Ov,sn({scrollbarElement:u,wrapElement:c})),QT(()=>{c.value&&(c.value.scrollTop=i,c.value.scrollLeft=l)}),Kt(()=>{n.native||xt(()=>{w()})}),Ji(()=>w()),t({wrapRef:c,update:w,scrollTo:y,setScrollTop:T,setScrollLeft:S,handleScroll:v}),(C,k)=>(G(),le("div",{ref_key:"scrollbarRef",ref:u,class:Q(_(a).b())},[K("div",{ref_key:"wrapRef",ref:c,class:Q(_(m)),style:Dt(_(b)),tabindex:C.tabindex,onScroll:v},[(G(),Le(br(C.tag),{id:C.id,ref_key:"resizeRef",ref:d,class:Q(_(h)),style:Dt(C.viewStyle),role:C.role,"aria-label":C.ariaLabel,"aria-orientation":C.ariaOrientation},{default:ie(()=>[De(C.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],46,["tabindex"]),C.native?Oe("v-if",!0):(G(),Le(o7,{key:0,ref_key:"barRef",ref:p,always:C.always,"min-size":C.minSize},null,8,["always","min-size"]))],2))}});var u7=_t(l7,[["__file","scrollbar.vue"]]);const kf=Lr(u7),Pv=Symbol("popper"),Ek=Symbol("popperContent"),$k=vt({role:{type:String,values:["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],default:"tooltip"}}),c7=Te({...Te({name:"ElPopper",inheritAttrs:!1}),props:$k,setup(e,{expose:t}){const r=e,n=ee(),a=ee(),s=ee(),o=ee(),i=W(()=>r.role),l={triggerRef:n,popperInstanceRef:a,contentRef:s,referenceRef:o,role:i};return t(l),Fr(Pv,l),(u,c)=>De(u.$slots,"default")}});var d7=_t(c7,[["__file","popper.vue"]]);const Rk=vt({arrowOffset:{type:Number,default:5}}),f7=Te({...Te({name:"ElPopperArrow",inheritAttrs:!1}),props:Rk,setup(e,{expose:t}){const r=e,n=ct("popper"),{arrowOffset:a,arrowRef:s,arrowStyle:o}=ft(Ek,void 0);return tt(()=>r.arrowOffset,i=>{a.value=i}),Ur(()=>{s.value=void 0}),t({arrowRef:s}),(i,l)=>(G(),le("span",{ref_key:"arrowRef",ref:s,class:Q(_(n).e("arrow")),style:Dt(_(o)),"data-popper-arrow":""},null,6))}});var p7=_t(f7,[["__file","arrow.vue"]]);const Lk=vt({virtualRef:{type:Ye(Object)},virtualTriggering:Boolean,onMouseenter:{type:Ye(Function)},onMouseleave:{type:Ye(Function)},onClick:{type:Ye(Function)},onKeydown:{type:Ye(Function)},onFocus:{type:Ye(Function)},onBlur:{type:Ye(Function)},onContextmenu:{type:Ye(Function)},id:String,open:Boolean}),Mk=Symbol("elForwardRef"),h7=e=>{Fr(Mk,{setForwardRef:r=>{e.value=r}})},m7=e=>({mounted(t){e(t)},updated(t){e(t)},unmounted(){e(null)}}),g7='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',v7=e=>getComputedStyle(e).position==="fixed"?!1:e.offsetParent!==null,Dk=e=>Array.from(e.querySelectorAll(g7)).filter(t=>If(t)&&v7(t)),If=e=>{if(e.tabIndex>0||e.tabIndex===0&&e.getAttribute("tabIndex")!==null)return!0;if(e.tabIndex<0||e.hasAttribute("disabled")||e.getAttribute("aria-disabled")==="true")return!1;switch(e.nodeName){case"A":return!!e.href&&e.rel!=="ignore";case"INPUT":return!(e.type==="hidden"||e.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},y7=Te({name:"ElOnlyChild",setup(e,{slots:t,attrs:r}){var n;const a=ft(Mk),s=m7((n=a==null?void 0:a.setForwardRef)!=null?n:jr);return()=>{var o;const i=(o=t.default)==null?void 0:o.call(t,r);if(!i||i.length>1)return null;const l=Nk(i);return l?qt(js(l,r),[[s]]):null}}});function Nk(e){if(!e)return null;const t=e;for(const r of t){if(Rt(r))switch(r.type){case en:continue;case Qi:case"svg":return Fk(r);case pt:return Nk(r.children);default:return r}return Fk(r)}return null}function Fk(e){const t=ct("only-child");return ue("span",{class:t.e("content")},[e])}const b7=Te({...Te({name:"ElPopperTrigger",inheritAttrs:!1}),props:Lk,setup(e,{expose:t}){const r=e,{role:n,triggerRef:a}=ft(Pv,void 0);h7(a);const s=W(()=>i.value?r.id:void 0),o=W(()=>{if(n&&n.value==="tooltip")return r.open&&r.id?r.id:void 0}),i=W(()=>{if(n&&n.value!=="tooltip")return n.value}),l=W(()=>i.value?`${r.open}`:void 0);let u;const c=["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"];return Kt(()=>{tt(()=>r.virtualRef,d=>{d&&(a.value=is(d))},{immediate:!0}),tt(a,(d,p)=>{u==null||u(),u=void 0,Dn(d)&&(c.forEach(b=>{var m;const h=r[b];h&&(d.addEventListener(b.slice(2).toLowerCase(),h),(m=p==null?void 0:p.removeEventListener)==null||m.call(p,b.slice(2).toLowerCase(),h))}),If(d)&&(u=tt([s,o,i,l],b=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((m,h)=>{Aa(b[h])?d.removeAttribute(m):d.setAttribute(m,b[h])})},{immediate:!0}))),Dn(p)&&If(p)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(b=>p.removeAttribute(b))},{immediate:!0})}),Ur(()=>{if(u==null||u(),u=void 0,a.value&&Dn(a.value)){const d=a.value;c.forEach(p=>{const b=r[p];b&&d.removeEventListener(p.slice(2).toLowerCase(),b)}),a.value=void 0}}),t({triggerRef:a}),(d,p)=>d.virtualTriggering?Oe("v-if",!0):(G(),Le(_(y7),gn({key:0},d.$attrs,{"aria-controls":_(s),"aria-describedby":_(o),"aria-expanded":_(l),"aria-haspopup":_(i)}),{default:ie(()=>[De(d.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var w7=_t(b7,[["__file","trigger.vue"]]);const Ev="focus-trap.focus-after-trapped",$v="focus-trap.focus-after-released",_7="focus-trap.focusout-prevented",Bk={cancelable:!0,bubbles:!1},S7={cancelable:!0,bubbles:!1},jk="focusAfterTrapped",Uk="focusAfterReleased",qk=Symbol("elFocusTrap"),Rv=ee(),Af=ee(0),Lv=ee(0);let Of=0;const Vk=e=>{const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0||n===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t},Hk=(e,t)=>{for(const r of e)if(!T7(r,t))return r},T7=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},x7=e=>{const t=Vk(e),r=Hk(t,e),n=Hk(t.reverse(),e);return[r,n]},C7=e=>e instanceof HTMLInputElement&&"select"in e,zs=(e,t)=>{if(e&&e.focus){const r=document.activeElement;let n=!1;Dn(e)&&!If(e)&&!e.getAttribute("tabindex")&&(e.setAttribute("tabindex","-1"),n=!0),e.focus({preventScroll:!0}),Lv.value=window.performance.now(),e!==r&&C7(e)&&t&&e.select(),Dn(e)&&n&&e.removeAttribute("tabindex")}};function zk(e,t){const r=[...e],n=e.indexOf(t);return n!==-1&&r.splice(n,1),r}const k7=()=>{let e=[];return{push:n=>{const a=e[0];a&&n!==a&&a.pause(),e=zk(e,n),e.unshift(n)},remove:n=>{var a,s;e=zk(e,n),(s=(a=e[0])==null?void 0:a.resume)==null||s.call(a)}}},I7=(e,t=!1)=>{const r=document.activeElement;for(const n of e)if(zs(n,t),document.activeElement!==r)return},Wk=k7(),A7=()=>Af.value>Lv.value,Pf=()=>{Rv.value="pointer",Af.value=window.performance.now()},Kk=()=>{Rv.value="keyboard",Af.value=window.performance.now()},O7=()=>(Kt(()=>{Of===0&&(document.addEventListener("mousedown",Pf),document.addEventListener("touchstart",Pf),document.addEventListener("keydown",Kk)),Of++}),Ur(()=>{Of--,Of<=0&&(document.removeEventListener("mousedown",Pf),document.removeEventListener("touchstart",Pf),document.removeEventListener("keydown",Kk))}),{focusReason:Rv,lastUserFocusTimestamp:Af,lastAutomatedFocusTimestamp:Lv}),Ef=e=>new CustomEvent(_7,{...S7,detail:e}),ar={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"};let il=[];const Gk=e=>{e.code===ar.esc&&il.forEach(t=>t(e))},P7=e=>{Kt(()=>{il.length===0&&document.addEventListener("keydown",Gk),dr&&il.push(e)}),Ur(()=>{il=il.filter(t=>t!==e),il.length===0&&dr&&document.removeEventListener("keydown",Gk)})},E7=Te({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[jk,Uk,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const r=ee();let n,a;const{focusReason:s}=O7();P7(m=>{e.trapped&&!o.paused&&t("release-requested",m)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},i=m=>{if(!e.loop&&!e.trapped||o.paused)return;const{code:h,altKey:v,ctrlKey:y,metaKey:T,currentTarget:S,shiftKey:w}=m,{loop:C}=e,k=h===ar.tab&&!v&&!y&&!T,f=document.activeElement;if(k&&f){const O=S,[E,N]=x7(O);if(E&&N){if(!w&&f===N){const L=Ef({focusReason:s.value});t("focusout-prevented",L),L.defaultPrevented||(m.preventDefault(),C&&zs(E,!0))}else if(w&&[E,O].includes(f)){const L=Ef({focusReason:s.value});t("focusout-prevented",L),L.defaultPrevented||(m.preventDefault(),C&&zs(N,!0))}}else if(f===O){const L=Ef({focusReason:s.value});t("focusout-prevented",L),L.defaultPrevented||m.preventDefault()}}};Fr(qk,{focusTrapRef:r,onKeydown:i}),tt(()=>e.focusTrapEl,m=>{m&&(r.value=m)},{immediate:!0}),tt([r],([m],[h])=>{m&&(m.addEventListener("keydown",i),m.addEventListener("focusin",c),m.addEventListener("focusout",d)),h&&(h.removeEventListener("keydown",i),h.removeEventListener("focusin",c),h.removeEventListener("focusout",d))});const l=m=>{t(jk,m)},u=m=>t(Uk,m),c=m=>{const h=_(r);if(!h)return;const v=m.target,y=m.relatedTarget,T=v&&h.contains(v);e.trapped||y&&h.contains(y)||(n=y),T&&t("focusin",m),!o.paused&&e.trapped&&(T?a=v:zs(a,!0))},d=m=>{const h=_(r);if(!(o.paused||!h))if(e.trapped){const v=m.relatedTarget;!Aa(v)&&!h.contains(v)&&setTimeout(()=>{if(!o.paused&&e.trapped){const y=Ef({focusReason:s.value});t("focusout-prevented",y),y.defaultPrevented||zs(a,!0)}},0)}else{const v=m.target;v&&h.contains(v)||t("focusout",m)}};async function p(){await xt();const m=_(r);if(m){Wk.push(o);const h=m.contains(document.activeElement)?n:document.activeElement;if(n=h,!m.contains(h)){const y=new Event(Ev,Bk);m.addEventListener(Ev,l),m.dispatchEvent(y),y.defaultPrevented||xt(()=>{let T=e.focusStartEl;mt(T)||(zs(T),document.activeElement!==T&&(T="first")),T==="first"&&I7(Vk(m),!0),(document.activeElement===h||T==="container")&&zs(m)})}}}function b(){const m=_(r);if(m){m.removeEventListener(Ev,l);const h=new CustomEvent($v,{...Bk,detail:{focusReason:s.value}});m.addEventListener($v,u),m.dispatchEvent(h),!h.defaultPrevented&&(s.value=="keyboard"||!A7()||m.contains(document.activeElement))&&zs(n??document.body),m.removeEventListener($v,u),Wk.remove(o)}}return Kt(()=>{e.trapped&&p(),tt(()=>e.trapped,m=>{m?p():b()})}),Ur(()=>{e.trapped&&b(),r.value&&(r.value.removeEventListener("keydown",i),r.value.removeEventListener("focusin",c),r.value.removeEventListener("focusout",d),r.value=void 0)}),{onKeydown:i}}});function $7(e,t,r,n,a,s){return De(e.$slots,"default",{handleKeydown:e.onKeydown})}var $f=_t(E7,[["render",$7],["__file","focus-trap.vue"]]),Nn="top",ga="bottom",va="right",Fn="left",Mv="auto",zu=[Nn,ga,va,Fn],ll="start",Wu="end",R7="clippingParents",Yk="viewport",Ku="popper",L7="reference",Jk=zu.reduce(function(e,t){return e.concat([t+"-"+ll,t+"-"+Wu])},[]),Gu=[].concat(zu,[Mv]).reduce(function(e,t){return e.concat([t,t+"-"+ll,t+"-"+Wu])},[]),M7="beforeRead",D7="read",N7="afterRead",F7="beforeMain",B7="main",j7="afterMain",U7="beforeWrite",q7="write",V7="afterWrite",H7=[M7,D7,N7,F7,B7,j7,U7,q7,V7];function cs(e){return e?(e.nodeName||"").toLowerCase():null}function Fa(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ul(e){var t=Fa(e).Element;return e instanceof t||e instanceof Element}function ya(e){var t=Fa(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Dv(e){if(typeof ShadowRoot>"u")return!1;var t=Fa(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function z7(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},a=t.attributes[r]||{},s=t.elements[r];!ya(s)||!cs(s)||(Object.assign(s.style,n),Object.keys(a).forEach(function(o){var i=a[o];i===!1?s.removeAttribute(o):s.setAttribute(o,i===!0?"":i)}))})}function W7(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var a=t.elements[n],s=t.attributes[n]||{},o=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),i=o.reduce(function(l,u){return l[u]="",l},{});!ya(a)||!cs(a)||(Object.assign(a.style,i),Object.keys(s).forEach(function(l){a.removeAttribute(l)}))})}}var Xk={name:"applyStyles",enabled:!0,phase:"write",fn:z7,effect:W7,requires:["computeStyles"]};function ds(e){return e.split("-")[0]}var ui=Math.max,Rf=Math.min,cl=Math.round;function dl(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),n=1,a=1;if(ya(e)&&t){var s=e.offsetHeight,o=e.offsetWidth;o>0&&(n=cl(r.width)/o||1),s>0&&(a=cl(r.height)/s||1)}return{width:r.width/n,height:r.height/a,top:r.top/a,right:r.right/n,bottom:r.bottom/a,left:r.left/n,x:r.left/n,y:r.top/a}}function Nv(e){var t=dl(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Qk(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Dv(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Ws(e){return Fa(e).getComputedStyle(e)}function K7(e){return["table","td","th"].indexOf(cs(e))>=0}function vo(e){return((ul(e)?e.ownerDocument:e.document)||window.document).documentElement}function Lf(e){return cs(e)==="html"?e:e.assignedSlot||e.parentNode||(Dv(e)?e.host:null)||vo(e)}function Zk(e){return!ya(e)||Ws(e).position==="fixed"?null:e.offsetParent}function G7(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&ya(e)){var n=Ws(e);if(n.position==="fixed")return null}var a=Lf(e);for(Dv(a)&&(a=a.host);ya(a)&&["html","body"].indexOf(cs(a))<0;){var s=Ws(a);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return a;a=a.parentNode}return null}function Yu(e){for(var t=Fa(e),r=Zk(e);r&&K7(r)&&Ws(r).position==="static";)r=Zk(r);return r&&(cs(r)==="html"||cs(r)==="body"&&Ws(r).position==="static")?t:r||G7(e)||t}function Fv(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Ju(e,t,r){return ui(e,Rf(t,r))}function Y7(e,t,r){var n=Ju(e,t,r);return n>r?r:n}function eI(){return{top:0,right:0,bottom:0,left:0}}function tI(e){return Object.assign({},eI(),e)}function rI(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var J7=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,tI(typeof e!="number"?e:rI(e,zu))};function X7(e){var t,r=e.state,n=e.name,a=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,i=ds(r.placement),l=Fv(i),u=[Fn,va].indexOf(i)>=0,c=u?"height":"width";if(!(!s||!o)){var d=J7(a.padding,r),p=Nv(s),b=l==="y"?Nn:Fn,m=l==="y"?ga:va,h=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],v=o[l]-r.rects.reference[l],y=Yu(s),T=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,S=h/2-v/2,w=d[b],C=T-p[c]-d[m],k=T/2-p[c]/2+S,f=Ju(w,k,C),O=l;r.modifiersData[n]=(t={},t[O]=f,t.centerOffset=f-k,t)}}function Q7(e){var t=e.state,r=e.options,n=r.element,a=n===void 0?"[data-popper-arrow]":n;a!=null&&(typeof a=="string"&&(a=t.elements.popper.querySelector(a),!a)||!Qk(t.elements.popper,a)||(t.elements.arrow=a))}var Z7={name:"arrow",enabled:!0,phase:"main",fn:X7,effect:Q7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function fl(e){return e.split("-")[1]}var eU={top:"auto",right:"auto",bottom:"auto",left:"auto"};function tU(e){var t=e.x,r=e.y,n=window,a=n.devicePixelRatio||1;return{x:cl(t*a)/a||0,y:cl(r*a)/a||0}}function nI(e){var t,r=e.popper,n=e.popperRect,a=e.placement,s=e.variation,o=e.offsets,i=e.position,l=e.gpuAcceleration,u=e.adaptive,c=e.roundOffsets,d=e.isFixed,p=o.x,b=p===void 0?0:p,m=o.y,h=m===void 0?0:m,v=typeof c=="function"?c({x:b,y:h}):{x:b,y:h};b=v.x,h=v.y;var y=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),S=Fn,w=Nn,C=window;if(u){var k=Yu(r),f="clientHeight",O="clientWidth";if(k===Fa(r)&&(k=vo(r),Ws(k).position!=="static"&&i==="absolute"&&(f="scrollHeight",O="scrollWidth")),k=k,a===Nn||(a===Fn||a===va)&&s===Wu){w=ga;var E=d&&k===C&&C.visualViewport?C.visualViewport.height:k[f];h-=E-n.height,h*=l?1:-1}if(a===Fn||(a===Nn||a===ga)&&s===Wu){S=va;var N=d&&k===C&&C.visualViewport?C.visualViewport.width:k[O];b-=N-n.width,b*=l?1:-1}}var $=Object.assign({position:i},u&&eU),L=c===!0?tU({x:b,y:h}):{x:b,y:h};if(b=L.x,h=L.y,l){var B;return Object.assign({},$,(B={},B[w]=T?"0":"",B[S]=y?"0":"",B.transform=(C.devicePixelRatio||1)<=1?"translate("+b+"px, "+h+"px)":"translate3d("+b+"px, "+h+"px, 0)",B))}return Object.assign({},$,(t={},t[w]=T?h+"px":"",t[S]=y?b+"px":"",t.transform="",t))}function rU(e){var t=e.state,r=e.options,n=r.gpuAcceleration,a=n===void 0?!0:n,s=r.adaptive,o=s===void 0?!0:s,i=r.roundOffsets,l=i===void 0?!0:i,u={placement:ds(t.placement),variation:fl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:a,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,nI(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,nI(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var aI={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rU,data:{}},Mf={passive:!0};function nU(e){var t=e.state,r=e.instance,n=e.options,a=n.scroll,s=a===void 0?!0:a,o=n.resize,i=o===void 0?!0:o,l=Fa(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(c){c.addEventListener("scroll",r.update,Mf)}),i&&l.addEventListener("resize",r.update,Mf),function(){s&&u.forEach(function(c){c.removeEventListener("scroll",r.update,Mf)}),i&&l.removeEventListener("resize",r.update,Mf)}}var sI={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nU,data:{}},aU={left:"right",right:"left",bottom:"top",top:"bottom"};function Df(e){return e.replace(/left|right|bottom|top/g,function(t){return aU[t]})}var sU={start:"end",end:"start"};function oI(e){return e.replace(/start|end/g,function(t){return sU[t]})}function Bv(e){var t=Fa(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function jv(e){return dl(vo(e)).left+Bv(e).scrollLeft}function oU(e){var t=Fa(e),r=vo(e),n=t.visualViewport,a=r.clientWidth,s=r.clientHeight,o=0,i=0;return n&&(a=n.width,s=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=n.offsetLeft,i=n.offsetTop)),{width:a,height:s,x:o+jv(e),y:i}}function iU(e){var t,r=vo(e),n=Bv(e),a=(t=e.ownerDocument)==null?void 0:t.body,s=ui(r.scrollWidth,r.clientWidth,a?a.scrollWidth:0,a?a.clientWidth:0),o=ui(r.scrollHeight,r.clientHeight,a?a.scrollHeight:0,a?a.clientHeight:0),i=-n.scrollLeft+jv(e),l=-n.scrollTop;return Ws(a||r).direction==="rtl"&&(i+=ui(r.clientWidth,a?a.clientWidth:0)-s),{width:s,height:o,x:i,y:l}}function Uv(e){var t=Ws(e),r=t.overflow,n=t.overflowX,a=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+a+n)}function iI(e){return["html","body","#document"].indexOf(cs(e))>=0?e.ownerDocument.body:ya(e)&&Uv(e)?e:iI(Lf(e))}function Xu(e,t){var r;t===void 0&&(t=[]);var n=iI(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=Fa(n),o=a?[s].concat(s.visualViewport||[],Uv(n)?n:[]):n,i=t.concat(o);return a?i:i.concat(Xu(Lf(o)))}function qv(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lU(e){var t=dl(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function lI(e,t){return t===Yk?qv(oU(e)):ul(t)?lU(t):qv(iU(vo(e)))}function uU(e){var t=Xu(Lf(e)),r=["absolute","fixed"].indexOf(Ws(e).position)>=0,n=r&&ya(e)?Yu(e):e;return ul(n)?t.filter(function(a){return ul(a)&&Qk(a,n)&&cs(a)!=="body"}):[]}function cU(e,t,r){var n=t==="clippingParents"?uU(e):[].concat(t),a=[].concat(n,[r]),s=a[0],o=a.reduce(function(i,l){var u=lI(e,l);return i.top=ui(u.top,i.top),i.right=Rf(u.right,i.right),i.bottom=Rf(u.bottom,i.bottom),i.left=ui(u.left,i.left),i},lI(e,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function uI(e){var t=e.reference,r=e.element,n=e.placement,a=n?ds(n):null,s=n?fl(n):null,o=t.x+t.width/2-r.width/2,i=t.y+t.height/2-r.height/2,l;switch(a){case Nn:l={x:o,y:t.y-r.height};break;case ga:l={x:o,y:t.y+t.height};break;case va:l={x:t.x+t.width,y:i};break;case Fn:l={x:t.x-r.width,y:i};break;default:l={x:t.x,y:t.y}}var u=a?Fv(a):null;if(u!=null){var c=u==="y"?"height":"width";switch(s){case ll:l[u]=l[u]-(t[c]/2-r[c]/2);break;case Wu:l[u]=l[u]+(t[c]/2-r[c]/2);break}}return l}function Qu(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=n===void 0?e.placement:n,s=r.boundary,o=s===void 0?R7:s,i=r.rootBoundary,l=i===void 0?Yk:i,u=r.elementContext,c=u===void 0?Ku:u,d=r.altBoundary,p=d===void 0?!1:d,b=r.padding,m=b===void 0?0:b,h=tI(typeof m!="number"?m:rI(m,zu)),v=c===Ku?L7:Ku,y=e.rects.popper,T=e.elements[p?v:c],S=cU(ul(T)?T:T.contextElement||vo(e.elements.popper),o,l),w=dl(e.elements.reference),C=uI({reference:w,element:y,placement:a}),k=qv(Object.assign({},y,C)),f=c===Ku?k:w,O={top:S.top-f.top+h.top,bottom:f.bottom-S.bottom+h.bottom,left:S.left-f.left+h.left,right:f.right-S.right+h.right},E=e.modifiersData.offset;if(c===Ku&&E){var N=E[a];Object.keys(O).forEach(function($){var L=[va,ga].indexOf($)>=0?1:-1,B=[Nn,ga].indexOf($)>=0?"y":"x";O[$]+=N[B]*L})}return O}function dU(e,t){t===void 0&&(t={});var r=t,n=r.placement,a=r.boundary,s=r.rootBoundary,o=r.padding,i=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?Gu:l,c=fl(n),d=c?i?Jk:Jk.filter(function(m){return fl(m)===c}):zu,p=d.filter(function(m){return u.indexOf(m)>=0});p.length===0&&(p=d);var b=p.reduce(function(m,h){return m[h]=Qu(e,{placement:h,boundary:a,rootBoundary:s,padding:o})[ds(h)],m},{});return Object.keys(b).sort(function(m,h){return b[m]-b[h]})}function fU(e){if(ds(e)===Mv)return[];var t=Df(e);return[oI(e),t,oI(t)]}function pU(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var a=r.mainAxis,s=a===void 0?!0:a,o=r.altAxis,i=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,c=r.boundary,d=r.rootBoundary,p=r.altBoundary,b=r.flipVariations,m=b===void 0?!0:b,h=r.allowedAutoPlacements,v=t.options.placement,y=ds(v),T=y===v,S=l||(T||!m?[Df(v)]:fU(v)),w=[v].concat(S).reduce(function(me,ve){return me.concat(ds(ve)===Mv?dU(t,{placement:ve,boundary:c,rootBoundary:d,padding:u,flipVariations:m,allowedAutoPlacements:h}):ve)},[]),C=t.rects.reference,k=t.rects.popper,f=new Map,O=!0,E=w[0],N=0;N<w.length;N++){var $=w[N],L=ds($),B=fl($)===ll,F=[Nn,ga].indexOf(L)>=0,R=F?"width":"height",H=Qu(t,{placement:$,boundary:c,rootBoundary:d,altBoundary:p,padding:u}),q=F?B?va:Fn:B?ga:Nn;C[R]>k[R]&&(q=Df(q));var M=Df(q),D=[];if(s&&D.push(H[L]<=0),i&&D.push(H[q]<=0,H[M]<=0),D.every(function(me){return me})){E=$,O=!1;break}f.set($,D)}if(O)for(var Y=m?3:1,Z=function(me){var ve=w.find(function(We){var Ke=f.get(We);if(Ke)return Ke.slice(0,me).every(function(xe){return xe})});if(ve)return E=ve,"break"},se=Y;se>0;se--){var ne=Z(se);if(ne==="break")break}t.placement!==E&&(t.modifiersData[n]._skip=!0,t.placement=E,t.reset=!0)}}var hU={name:"flip",enabled:!0,phase:"main",fn:pU,requiresIfExists:["offset"],data:{_skip:!1}};function cI(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function dI(e){return[Nn,va,ga,Fn].some(function(t){return e[t]>=0})}function mU(e){var t=e.state,r=e.name,n=t.rects.reference,a=t.rects.popper,s=t.modifiersData.preventOverflow,o=Qu(t,{elementContext:"reference"}),i=Qu(t,{altBoundary:!0}),l=cI(o,n),u=cI(i,a,s),c=dI(l),d=dI(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var gU={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:mU};function vU(e,t,r){var n=ds(e),a=[Fn,Nn].indexOf(n)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],i=s[1];return o=o||0,i=(i||0)*a,[Fn,va].indexOf(n)>=0?{x:i,y:o}:{x:o,y:i}}function yU(e){var t=e.state,r=e.options,n=e.name,a=r.offset,s=a===void 0?[0,0]:a,o=Gu.reduce(function(c,d){return c[d]=vU(d,t.rects,s),c},{}),i=o[t.placement],l=i.x,u=i.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[n]=o}var bU={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:yU};function wU(e){var t=e.state,r=e.name;t.modifiersData[r]=uI({reference:t.rects.reference,element:t.rects.popper,placement:t.placement})}var fI={name:"popperOffsets",enabled:!0,phase:"read",fn:wU,data:{}};function _U(e){return e==="x"?"y":"x"}function SU(e){var t=e.state,r=e.options,n=e.name,a=r.mainAxis,s=a===void 0?!0:a,o=r.altAxis,i=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,c=r.altBoundary,d=r.padding,p=r.tether,b=p===void 0?!0:p,m=r.tetherOffset,h=m===void 0?0:m,v=Qu(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:c}),y=ds(t.placement),T=fl(t.placement),S=!T,w=Fv(y),C=_U(w),k=t.modifiersData.popperOffsets,f=t.rects.reference,O=t.rects.popper,E=typeof h=="function"?h(Object.assign({},t.rects,{placement:t.placement})):h,N=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),$=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,L={x:0,y:0};if(k){if(s){var B,F=w==="y"?Nn:Fn,R=w==="y"?ga:va,H=w==="y"?"height":"width",q=k[w],M=q+v[F],D=q-v[R],Y=b?-O[H]/2:0,Z=T===ll?f[H]:O[H],se=T===ll?-O[H]:-f[H],ne=t.elements.arrow,me=b&&ne?Nv(ne):{width:0,height:0},ve=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:eI(),We=ve[F],Ke=ve[R],xe=Ju(0,f[H],me[H]),ze=S?f[H]/2-Y-xe-We-N.mainAxis:Z-xe-We-N.mainAxis,Ne=S?-f[H]/2+Y+xe+Ke+N.mainAxis:se+xe+Ke+N.mainAxis,rt=t.elements.arrow&&Yu(t.elements.arrow),X=rt?w==="y"?rt.clientTop||0:rt.clientLeft||0:0,re=(B=$==null?void 0:$[w])!=null?B:0,ge=q+ze-re-X,Re=q+Ne-re,Se=Ju(b?Rf(M,ge):M,q,b?ui(D,Re):D);k[w]=Se,L[w]=Se-q}if(i){var ke,qe=w==="x"?Nn:Fn,Pe=w==="x"?ga:va,Me=k[C],$e=C==="y"?"height":"width",nt=Me+v[qe],Ge=Me-v[Pe],ye=[Nn,Fn].indexOf(y)!==-1,Ce=(ke=$==null?void 0:$[C])!=null?ke:0,it=ye?nt:Me-f[$e]-O[$e]-Ce+N.altAxis,Et=ye?Me+f[$e]+O[$e]-Ce-N.altAxis:Ge,bt=b&&ye?Y7(it,Me,Et):Ju(b?it:nt,Me,b?Et:Ge);k[C]=bt,L[C]=bt-Me}t.modifiersData[n]=L}}var TU={name:"preventOverflow",enabled:!0,phase:"main",fn:SU,requiresIfExists:["offset"]};function xU(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function CU(e){return e===Fa(e)||!ya(e)?Bv(e):xU(e)}function kU(e){var t=e.getBoundingClientRect(),r=cl(t.width)/e.offsetWidth||1,n=cl(t.height)/e.offsetHeight||1;return r!==1||n!==1}function IU(e,t,r){r===void 0&&(r=!1);var n=ya(t),a=ya(t)&&kU(t),s=vo(t),o=dl(e,a),i={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!r)&&((cs(t)!=="body"||Uv(s))&&(i=CU(t)),ya(t)?(l=dl(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=jv(s))),{x:o.left+i.scrollLeft-l.x,y:o.top+i.scrollTop-l.y,width:o.width,height:o.height}}function AU(e){var t=new Map,r=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function a(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(i){if(!r.has(i)){var l=t.get(i);l&&a(l)}}),n.push(s)}return e.forEach(function(s){r.has(s.name)||a(s)}),n}function OU(e){var t=AU(e);return H7.reduce(function(r,n){return r.concat(t.filter(function(a){return a.phase===n}))},[])}function PU(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function EU(e){var t=e.reduce(function(r,n){var a=r[n.name];return r[n.name]=a?Object.assign({},a,n,{options:Object.assign({},a.options,n.options),data:Object.assign({},a.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var pI={placement:"bottom",modifiers:[],strategy:"absolute"};function hI(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Vv(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,a=t.defaultOptions,s=a===void 0?pI:a;return function(o,i,l){l===void 0&&(l=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},pI,s),modifiersData:{},elements:{reference:o,popper:i},attributes:{},styles:{}},c=[],d=!1,p={state:u,setOptions:function(h){var v=typeof h=="function"?h(u.options):h;m(),u.options=Object.assign({},s,u.options,v),u.scrollParents={reference:ul(o)?Xu(o):o.contextElement?Xu(o.contextElement):[],popper:Xu(i)};var y=OU(EU([].concat(n,u.options.modifiers)));return u.orderedModifiers=y.filter(function(T){return T.enabled}),b(),p.update()},forceUpdate:function(){if(!d){var h=u.elements,v=h.reference,y=h.popper;if(hI(v,y)){u.rects={reference:IU(v,Yu(y),u.options.strategy==="fixed"),popper:Nv(y)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(O){return u.modifiersData[O.name]=Object.assign({},O.data)});for(var T=0;T<u.orderedModifiers.length;T++){if(u.reset===!0){u.reset=!1,T=-1;continue}var S=u.orderedModifiers[T],w=S.fn,C=S.options,k=C===void 0?{}:C,f=S.name;typeof w=="function"&&(u=w({state:u,options:k,name:f,instance:p})||u)}}}},update:PU(function(){return new Promise(function(h){p.forceUpdate(),h(u)})}),destroy:function(){m(),d=!0}};if(!hI(o,i))return p;p.setOptions(l).then(function(h){!d&&l.onFirstUpdate&&l.onFirstUpdate(h)});function b(){u.orderedModifiers.forEach(function(h){var v=h.name,y=h.options,T=y===void 0?{}:y,S=h.effect;if(typeof S=="function"){var w=S({state:u,name:v,instance:p,options:T}),C=function(){};c.push(w||C)}})}function m(){c.forEach(function(h){return h()}),c=[]}return p}}Vv();var $U=[sI,fI,aI,Xk];Vv({defaultModifiers:$U});var RU=[sI,fI,aI,Xk,bU,hU,TU,Z7,gU],LU=Vv({defaultModifiers:RU});const MU=["fixed","absolute"],DU=vt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Ye(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Gu,default:"bottom"},popperOptions:{type:Ye(Object),default:()=>({})},strategy:{type:String,values:MU,default:"absolute"}}),mI=vt({...DU,id:String,style:{type:Ye([String,Array,Object])},className:{type:Ye([String,Array,Object])},effect:{type:Ye(String),default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Ye([String,Array,Object])},popperStyle:{type:Ye([String,Array,Object])},referenceEl:{type:Ye(Object)},triggerTargetEl:{type:Ye(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},virtualTriggering:Boolean,zIndex:Number,...Vs(["ariaLabel"])}),NU={mouseenter:e=>e instanceof MouseEvent,mouseleave:e=>e instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},FU=(e,t)=>{const r=ee(!1),n=ee();return{focusStartRef:n,trapped:r,onFocusAfterReleased:u=>{var c;((c=u.detail)==null?void 0:c.focusReason)!=="pointer"&&(n.value="first",t("blur"))},onFocusAfterTrapped:()=>{t("focus")},onFocusInTrap:u=>{e.visible&&!r.value&&(u.target&&(n.value=u.target),r.value=!0)},onFocusoutPrevented:u=>{e.trapping||(u.detail.focusReason==="pointer"&&u.preventDefault(),r.value=!1)},onReleaseRequested:()=>{r.value=!1,t("close")}}},BU=(e,t=[])=>{const{placement:r,strategy:n,popperOptions:a}=e,s={placement:r,strategy:n,...a,modifiers:[...UU(e),...t]};return qU(s,a==null?void 0:a.modifiers),s},jU=e=>{if(dr)return is(e)};function UU(e){const{offset:t,gpuAcceleration:r,fallbackPlacements:n}=e;return[{name:"offset",options:{offset:[0,t??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:n}},{name:"computeStyles",options:{gpuAcceleration:r}}]}function qU(e,t){t&&(e.modifiers=[...e.modifiers,...t??[]])}const VU=(e,t,r={})=>{const n={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const u=HU(l);Object.assign(o.value,u)},requires:["computeStyles"]},a=W(()=>{const{onFirstUpdate:l,placement:u,strategy:c,modifiers:d}=_(r);return{onFirstUpdate:l,placement:u||"bottom",strategy:c||"absolute",modifiers:[...d||[],n,{name:"applyStyles",enabled:!1}]}}),s=Zr(),o=ee({styles:{popper:{position:_(a).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),i=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return tt(a,l=>{const u=_(s);u&&u.setOptions(l)},{deep:!0}),tt([e,t],([l,u])=>{i(),!(!l||!u)&&(s.value=LU(l,u,_(a)))}),Ur(()=>{i()}),{state:W(()=>{var l;return{...((l=_(s))==null?void 0:l.state)||{}}}),styles:W(()=>_(o).styles),attributes:W(()=>_(o).attributes),update:()=>{var l;return(l=_(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=_(s))==null?void 0:l.forceUpdate()},instanceRef:W(()=>_(s))}};function HU(e){const t=Object.keys(e.elements),r=jc(t.map(a=>[a,e.styles[a]||{}])),n=jc(t.map(a=>[a,e.attributes[a]]));return{styles:r,attributes:n}}const zU=0,WU=e=>{const{popperInstanceRef:t,contentRef:r,triggerRef:n,role:a}=ft(Pv,void 0),s=ee(),o=ee(),i=W(()=>({name:"eventListeners",enabled:!!e.visible})),l=W(()=>{var y;const T=_(s),S=(y=_(o))!=null?y:zU;return{name:"arrow",enabled:!Hw(T),options:{element:T,padding:S}}}),u=W(()=>({onFirstUpdate:()=>{m()},...BU(e,[_(l),_(i)])})),c=W(()=>jU(e.referenceEl)||_(n)),{attributes:d,state:p,styles:b,update:m,forceUpdate:h,instanceRef:v}=VU(c,r,u);return tt(v,y=>t.value=y),Kt(()=>{tt(()=>{var y;return(y=_(c))==null?void 0:y.getBoundingClientRect()},()=>{m()})}),{attributes:d,arrowRef:s,contentRef:r,instanceRef:v,state:p,styles:b,role:a,forceUpdate:h,update:m}},KU=(e,{attributes:t,styles:r,role:n})=>{const{nextZIndex:a}=Sv(),s=ct("popper"),o=W(()=>_(t).popper),i=ee(Zt(e.zIndex)?e.zIndex:a()),l=W(()=>[s.b(),s.is("pure",e.pure),s.is(e.effect),e.popperClass]),u=W(()=>[{zIndex:_(i)},_(r).popper,e.popperStyle||{}]),c=W(()=>n.value==="dialog"?"false":void 0),d=W(()=>_(r).arrow||{});return{ariaModal:c,arrowStyle:d,contentAttrs:o,contentClass:l,contentStyle:u,contentZIndex:i,updateZIndex:()=>{i.value=Zt(e.zIndex)?e.zIndex:a()}}},GU=Te({...Te({name:"ElPopperContent"}),props:mI,emits:NU,setup(e,{expose:t,emit:r}){const n=e,{focusStartRef:a,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:i,onFocusInTrap:l,onFocusoutPrevented:u,onReleaseRequested:c}=FU(n,r),{attributes:d,arrowRef:p,contentRef:b,styles:m,instanceRef:h,role:v,update:y}=WU(n),{ariaModal:T,arrowStyle:S,contentAttrs:w,contentClass:C,contentStyle:k,updateZIndex:f}=KU(n,{styles:m,attributes:d,role:v}),O=ft(li,void 0),E=ee();Fr(Ek,{arrowStyle:S,arrowRef:p,arrowOffset:E}),O&&Fr(li,{...O,addInputId:jr,removeInputId:jr});let N;const $=(B=!0)=>{y(),B&&f()},L=()=>{$(!1),n.visible&&n.focusOnShow?s.value=!0:n.visible===!1&&(s.value=!1)};return Kt(()=>{tt(()=>n.triggerTargetEl,(B,F)=>{N==null||N(),N=void 0;const R=_(B||b.value),H=_(F||b.value);Dn(R)&&(N=tt([v,()=>n.ariaLabel,T,()=>n.id],q=>{["role","aria-label","aria-modal","id"].forEach((M,D)=>{Aa(q[D])?R.removeAttribute(M):R.setAttribute(M,q[D])})},{immediate:!0})),H!==R&&Dn(H)&&["role","aria-label","aria-modal","id"].forEach(q=>{H.removeAttribute(q)})},{immediate:!0}),tt(()=>n.visible,L,{immediate:!0})}),Ur(()=>{N==null||N(),N=void 0}),t({popperContentRef:b,popperInstanceRef:h,updatePopper:$,contentStyle:k}),(B,F)=>(G(),le("div",gn({ref_key:"contentRef",ref:b},_(w),{style:_(k),class:_(C),tabindex:"-1",onMouseenter:R=>B.$emit("mouseenter",R),onMouseleave:R=>B.$emit("mouseleave",R)}),[ue(_($f),{trapped:_(s),"trap-on-focus-in":!0,"focus-trap-el":_(b),"focus-start-el":_(a),onFocusAfterTrapped:_(i),onFocusAfterReleased:_(o),onFocusin:_(l),onFocusoutPrevented:_(u),onReleaseRequested:_(c)},{default:ie(()=>[De(B.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16,["onMouseenter","onMouseleave"]))}});var YU=_t(GU,[["__file","content.vue"]]);const JU=Lr(d7),Nf=Symbol("elTooltip");function gI(){let e;const t=(n,a)=>{r(),e=window.setTimeout(n,a)},r=()=>window.clearTimeout(e);return Bu(()=>r()),{registerTimeout:t,cancelTimeout:r}}const XU=vt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),QU=({showAfter:e,hideAfter:t,autoClose:r,open:n,close:a})=>{const{registerTimeout:s}=gI(),{registerTimeout:o,cancelTimeout:i}=gI();return{onOpen:c=>{s(()=>{n(c);const d=_(r);Zt(d)&&d>0&&o(()=>{a(c)},d)},_(e))},onClose:c=>{i(),s(()=>{a(c)},_(t))}}},ta=vt({...XU,...mI,appendTo:{type:Ye([String,Object])},content:{type:String,default:""},rawContent:Boolean,persistent:Boolean,visible:{type:Ye(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean,...Vs(["ariaLabel"])}),Zu=vt({...Lk,disabled:Boolean,trigger:{type:Ye([String,Array]),default:"hover"},triggerKeys:{type:Ye(Array),default:()=>[ar.enter,ar.numpadEnter,ar.space]}}),ZU=mf({type:Ye(Boolean),default:null}),eq=mf({type:Ye(Function)}),tq=e=>{const t=`update:${e}`,r=`onUpdate:${e}`,n=[t],a={[e]:ZU,[r]:eq};return{useModelToggle:({indicator:o,toggleReason:i,shouldHideWhenRouteChanges:l,shouldProceed:u,onShow:c,onHide:d})=>{const p=Vt(),{emit:b}=p,m=p.props,h=W(()=>et(m[r])),v=W(()=>m[e]===null),y=f=>{o.value!==!0&&(o.value=!0,i&&(i.value=f),et(c)&&c(f))},T=f=>{o.value!==!1&&(o.value=!1,i&&(i.value=f),et(d)&&d(f))},S=f=>{if(m.disabled===!0||et(u)&&!u())return;const O=h.value&&dr;O&&b(t,!0),(v.value||!O)&&y(f)},w=f=>{if(m.disabled===!0||!dr)return;const O=h.value&&dr;O&&b(t,!1),(v.value||!O)&&T(f)},C=f=>{tn(f)&&(m.disabled&&f?h.value&&b(t,!1):o.value!==f&&(f?y():T()))},k=()=>{o.value?w():S()};return tt(()=>m[e],C),l&&p.appContext.config.globalProperties.$route!==void 0&&tt(()=>({...p.proxy.$route}),()=>{l.value&&o.value&&w()}),Kt(()=>{C(m[e])}),{hide:w,show:S,toggle:k,hasUpdateHandler:h}},useModelToggleProps:a,useModelToggleEmits:n}},{useModelToggleProps:rq,useModelToggleEmits:nq,useModelToggle:aq}=tq("visible"),sq=vt({...$k,...rq,...ta,...Zu,...Rk,showArrow:{type:Boolean,default:!0}}),oq=[...nq,"before-show","before-hide","show","hide","open","close"],iq=(e,t)=>Ue(e)?e.includes(t):e===t,pl=(e,t,r)=>n=>{iq(_(e),t)&&r(n)},Ks=(e,t,{checkForDefaultPrevented:r=!0}={})=>a=>{const s=e==null?void 0:e(a);if(r===!1||!s)return t==null?void 0:t(a)},lq=Te({...Te({name:"ElTooltipTrigger"}),props:Zu,setup(e,{expose:t}){const r=e,n=ct("tooltip"),{controlled:a,id:s,open:o,onOpen:i,onClose:l,onToggle:u}=ft(Nf,void 0),c=ee(null),d=()=>{if(_(a)||r.disabled)return!0},p=Nr(r,"trigger"),b=Ks(d,pl(p,"hover",i)),m=Ks(d,pl(p,"hover",l)),h=Ks(d,pl(p,"click",w=>{w.button===0&&u(w)})),v=Ks(d,pl(p,"focus",i)),y=Ks(d,pl(p,"focus",l)),T=Ks(d,pl(p,"contextmenu",w=>{w.preventDefault(),u(w)})),S=Ks(d,w=>{const{code:C}=w;r.triggerKeys.includes(C)&&(w.preventDefault(),u(w))});return t({triggerRef:c}),(w,C)=>(G(),Le(_(w7),{id:_(s),"virtual-ref":w.virtualRef,open:_(o),"virtual-triggering":w.virtualTriggering,class:Q(_(n).e("trigger")),onBlur:_(y),onClick:_(h),onContextmenu:_(T),onFocus:_(v),onMouseenter:_(b),onMouseleave:_(m),onKeydown:_(S)},{default:ie(()=>[De(w.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var uq=_t(lq,[["__file","trigger.vue"]]);const cq=vt({to:{type:Ye([String,Object]),required:!0},disabled:Boolean});var dq=_t(Te({__name:"teleport",props:cq,setup(e){return(t,r)=>t.disabled?De(t.$slots,"default",{key:0}):(G(),Le(qT,{key:1,to:t.to},[De(t.$slots,"default")],8,["to"]))}}),[["__file","teleport.vue"]]);const Hv=Lr(dq),vI=()=>{const e=wv(),t=Ik(),r=W(()=>`${e.value}-popper-container-${t.prefix}`),n=W(()=>`#${r.value}`);return{id:r,selector:n}},fq=e=>{const t=document.createElement("div");return t.id=e,document.body.appendChild(t),t},pq=()=>{const{id:e,selector:t}=vI();return jd(()=>{dr&&(document.body.querySelector(t.value)||fq(e.value))}),{id:e,selector:t}},hq=Te({...Te({name:"ElTooltipContent",inheritAttrs:!1}),props:ta,setup(e,{expose:t}){const r=e,{selector:n}=vI(),a=ct("tooltip"),s=ee();let o;const{controlled:i,id:l,open:u,trigger:c,onClose:d,onOpen:p,onShow:b,onHide:m,onBeforeShow:h,onBeforeHide:v}=ft(Nf,void 0),y=W(()=>r.transition||`${a.namespace.value}-fade-in-linear`),T=W(()=>r.persistent);Ur(()=>{o==null||o()});const S=W(()=>_(T)?!0:_(u)),w=W(()=>r.disabled?!1:_(u)),C=W(()=>r.appendTo||n.value),k=W(()=>{var q;return(q=r.style)!=null?q:{}}),f=ee(!0),O=()=>{m(),H()&&zs(document.body),f.value=!0},E=()=>{if(_(i))return!0},N=Ks(E,()=>{r.enterable&&_(c)==="hover"&&p()}),$=Ks(E,()=>{_(c)==="hover"&&d()}),L=()=>{var q,M;(M=(q=s.value)==null?void 0:q.updatePopper)==null||M.call(q),h==null||h()},B=()=>{v==null||v()},F=()=>{b(),o=GC(W(()=>{var q;return(q=s.value)==null?void 0:q.popperContentRef}),()=>{if(_(i))return;_(c)!=="hover"&&d()})},R=()=>{r.virtualTriggering||d()},H=q=>{var M;const D=(M=s.value)==null?void 0:M.popperContentRef,Y=(q==null?void 0:q.relatedTarget)||document.activeElement;return D==null?void 0:D.contains(Y)};return tt(()=>_(u),q=>{q?f.value=!1:o==null||o()},{flush:"post"}),tt(()=>r.content,()=>{var q,M;(M=(q=s.value)==null?void 0:q.updatePopper)==null||M.call(q)}),t({contentRef:s,isFocusInsideContent:H}),(q,M)=>(G(),Le(_(Hv),{disabled:!q.teleported,to:_(C)},{default:ie(()=>[ue(ma,{name:_(y),onAfterLeave:O,onBeforeEnter:L,onAfterEnter:F,onBeforeLeave:B},{default:ie(()=>[_(S)?qt((G(),Le(_(YU),gn({key:0,id:_(l),ref_key:"contentRef",ref:s},q.$attrs,{"aria-label":q.ariaLabel,"aria-hidden":f.value,"boundaries-padding":q.boundariesPadding,"fallback-placements":q.fallbackPlacements,"gpu-acceleration":q.gpuAcceleration,offset:q.offset,placement:q.placement,"popper-options":q.popperOptions,strategy:q.strategy,effect:q.effect,enterable:q.enterable,pure:q.pure,"popper-class":q.popperClass,"popper-style":[q.popperStyle,_(k)],"reference-el":q.referenceEl,"trigger-target-el":q.triggerTargetEl,visible:_(w),"z-index":q.zIndex,onMouseenter:_(N),onMouseleave:_($),onBlur:R,onClose:_(d)}),{default:ie(()=>[De(q.$slots,"default")]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[Sr,_(w)]]):Oe("v-if",!0)]),_:3},8,["name"])]),_:3},8,["disabled","to"]))}});var mq=_t(hq,[["__file","content.vue"]]);const gq=Te({...Te({name:"ElTooltip"}),props:sq,emits:oq,setup(e,{expose:t,emit:r}){const n=e;pq();const a=us(),s=ee(),o=ee(),i=()=>{var y;const T=_(s);T&&((y=T.popperInstanceRef)==null||y.update())},l=ee(!1),u=ee(),{show:c,hide:d,hasUpdateHandler:p}=aq({indicator:l,toggleReason:u}),{onOpen:b,onClose:m}=QU({showAfter:Nr(n,"showAfter"),hideAfter:Nr(n,"hideAfter"),autoClose:Nr(n,"autoClose"),open:c,close:d}),h=W(()=>tn(n.visible)&&!p.value);Fr(Nf,{controlled:h,id:a,open:_u(l),trigger:Nr(n,"trigger"),onOpen:y=>{b(y)},onClose:y=>{m(y)},onToggle:y=>{_(l)?m(y):b(y)},onShow:()=>{r("show",u.value)},onHide:()=>{r("hide",u.value)},onBeforeShow:()=>{r("before-show",u.value)},onBeforeHide:()=>{r("before-hide",u.value)},updatePopper:i}),tt(()=>n.disabled,y=>{y&&l.value&&(l.value=!1)});const v=y=>{var T;return(T=o.value)==null?void 0:T.isFocusInsideContent(y)};return ZT(()=>l.value&&d()),t({popperRef:s,contentRef:o,isFocusInsideContent:v,updatePopper:i,onOpen:b,onClose:m,hide:d}),(y,T)=>(G(),Le(_(JU),{ref_key:"popperRef",ref:s,role:y.role},{default:ie(()=>[ue(uq,{disabled:y.disabled,trigger:y.trigger,"trigger-keys":y.triggerKeys,"virtual-ref":y.virtualRef,"virtual-triggering":y.virtualTriggering},{default:ie(()=>[y.$slots.default?De(y.$slots,"default",{key:0}):Oe("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ue(mq,{ref_key:"contentRef",ref:o,"aria-label":y.ariaLabel,"boundaries-padding":y.boundariesPadding,content:y.content,disabled:y.disabled,effect:y.effect,enterable:y.enterable,"fallback-placements":y.fallbackPlacements,"hide-after":y.hideAfter,"gpu-acceleration":y.gpuAcceleration,offset:y.offset,persistent:y.persistent,"popper-class":y.popperClass,"popper-style":y.popperStyle,placement:y.placement,"popper-options":y.popperOptions,pure:y.pure,"raw-content":y.rawContent,"reference-el":y.referenceEl,"trigger-target-el":y.triggerTargetEl,"show-after":y.showAfter,strategy:y.strategy,teleported:y.teleported,transition:y.transition,"virtual-triggering":y.virtualTriggering,"z-index":y.zIndex,"append-to":y.appendTo},{default:ie(()=>[De(y.$slots,"content",{},()=>[y.rawContent?(G(),le("span",{key:0,innerHTML:y.content},null,8,["innerHTML"])):(G(),le("span",{key:1},He(y.content),1))]),y.showArrow?(G(),Le(_(p7),{key:0,"arrow-offset":y.arrowOffset},null,8,["arrow-offset"])):Oe("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var vq=_t(gq,[["__file","tooltip.vue"]]);const ci=Lr(vq),yq=vt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:Ye([String,Object,Array])},offset:{type:Ye(Array),default:[0,0]},badgeClass:{type:String}}),bq=Te({...Te({name:"ElBadge"}),props:yq,setup(e,{expose:t}){const r=e,n=ct("badge"),a=W(()=>r.isDot?"":Zt(r.value)&&Zt(r.max)?r.max<r.value?`${r.max}+`:`${r.value}`:`${r.value}`),s=W(()=>{var o,i,l,u,c;return[{backgroundColor:r.color,marginRight:ea(-((i=(o=r.offset)==null?void 0:o[0])!=null?i:0)),marginTop:ea((u=(l=r.offset)==null?void 0:l[1])!=null?u:0)},(c=r.badgeStyle)!=null?c:{}]});return t({content:a}),(o,i)=>(G(),le("div",{class:Q(_(n).b())},[De(o.$slots,"default"),ue(ma,{name:`${_(n).namespace.value}-zoom-in-center`,persisted:""},{default:ie(()=>[qt(K("sup",{class:Q([_(n).e("content"),_(n).em("content",o.type),_(n).is("fixed",!!o.$slots.default),_(n).is("dot",o.isDot),_(n).is("hide-zero",!o.showZero&&r.value===0),o.badgeClass]),style:Dt(_(s))},[De(o.$slots,"content",{value:_(a)},()=>[ot(He(_(a)),1)])],6),[[Sr,!o.hidden&&(_(a)||o.isDot||o.$slots.content)]])]),_:3},8,["name"])],2))}});var wq=_t(bq,[["__file","badge.vue"]]);const _q=Lr(wq),yI=Symbol("buttonGroupContextKey"),hl=({from:e,replacement:t,scope:r,version:n,ref:a,type:s="API"},o)=>{tt(()=>_(o),i=>{},{immediate:!0})},Sq=(e,t)=>{hl({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},W(()=>e.type==="text"));const r=ft(yI,void 0),n=yf("button"),{form:a}=go(),s=Na(W(()=>r==null?void 0:r.size)),o=Hu(),i=ee(),l=Ra(),u=W(()=>e.type||(r==null?void 0:r.type)||""),c=W(()=>{var m,h,v;return(v=(h=e.autoInsertSpace)!=null?h:(m=n.value)==null?void 0:m.autoInsertSpace)!=null?v:!1}),d=W(()=>e.tag==="button"?{ariaDisabled:o.value||e.loading,disabled:o.value||e.loading,autofocus:e.autofocus,type:e.nativeType}:{}),p=W(()=>{var m;const h=(m=l.default)==null?void 0:m.call(l);if(c.value&&(h==null?void 0:h.length)===1){const v=h[0];if((v==null?void 0:v.type)===Qi){const y=v.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(y.trim())}}return!1});return{_disabled:o,_size:s,_type:u,_ref:i,_props:d,shouldAddSpace:p,handleClick:m=>{if(o.value||e.loading){m.stopPropagation();return}e.nativeType==="reset"&&(a==null||a.resetFields()),t("click",m)}}},zv=vt({size:qs,disabled:Boolean,type:{type:String,values:["default","primary","success","warning","info","danger","text",""],default:""},icon:{type:Ma},nativeType:{type:String,values:["button","submit","reset"],default:"button"},loading:Boolean,loadingIcon:{type:Ma,default:()=>Vu},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Ye([String,Object]),default:"button"}}),Tq={click:e=>e instanceof MouseEvent};function cn(e,t){xq(e)&&(e="100%");var r=Cq(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),r&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Ff(e){return Math.min(1,Math.max(0,e))}function xq(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Cq(e){return typeof e=="string"&&e.indexOf("%")!==-1}function bI(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Bf(e){return e<=1?"".concat(Number(e)*100,"%"):e}function di(e){return e.length===1?"0"+e:String(e)}function kq(e,t,r){return{r:cn(e,255)*255,g:cn(t,255)*255,b:cn(r,255)*255}}function wI(e,t,r){e=cn(e,255),t=cn(t,255),r=cn(r,255);var n=Math.max(e,t,r),a=Math.min(e,t,r),s=0,o=0,i=(n+a)/2;if(n===a)o=0,s=0;else{var l=n-a;switch(o=i>.5?l/(2-n-a):l/(n+a),n){case e:s=(t-r)/l+(t<r?6:0);break;case t:s=(r-e)/l+2;break;case r:s=(e-t)/l+4;break}s/=6}return{h:s,s:o,l:i}}function Wv(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<.16666666666666666?e+(t-e)*(6*r):r<.5?t:r<.6666666666666666?e+(t-e)*(.6666666666666666-r)*6:e}function Iq(e,t,r){var n,a,s;if(e=cn(e,360),t=cn(t,100),r=cn(r,100),t===0)a=r,s=r,n=r;else{var o=r<.5?r*(1+t):r+t-r*t,i=2*r-o;n=Wv(i,o,e+.3333333333333333),a=Wv(i,o,e),s=Wv(i,o,e-.3333333333333333)}return{r:n*255,g:a*255,b:s*255}}function _I(e,t,r){e=cn(e,255),t=cn(t,255),r=cn(r,255);var n=Math.max(e,t,r),a=Math.min(e,t,r),s=0,o=n,i=n-a,l=n===0?0:i/n;if(n===a)s=0;else{switch(n){case e:s=(t-r)/i+(t<r?6:0);break;case t:s=(r-e)/i+2;break;case r:s=(e-t)/i+4;break}s/=6}return{h:s,s:l,v:o}}function Aq(e,t,r){e=cn(e,360)*6,t=cn(t,100),r=cn(r,100);var n=Math.floor(e),a=e-n,s=r*(1-t),o=r*(1-a*t),i=r*(1-(1-a)*t),l=n%6,u=[r,o,s,s,i,r][l],c=[i,r,r,o,s,s][l],d=[s,s,i,r,r,o][l];return{r:u*255,g:c*255,b:d*255}}function SI(e,t,r,n){var a=[di(Math.round(e).toString(16)),di(Math.round(t).toString(16)),di(Math.round(r).toString(16))];return n&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function Oq(e,t,r,n,a){var s=[di(Math.round(e).toString(16)),di(Math.round(t).toString(16)),di(Math.round(r).toString(16)),di(Pq(n))];return a&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function Pq(e){return Math.round(parseFloat(e)*255).toString(16)}function TI(e){return ra(e)/255}function ra(e){return parseInt(e,16)}function Eq(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var Kv={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function $q(e){var t={r:0,g:0,b:0},r=1,n=null,a=null,s=null,o=!1,i=!1;return typeof e=="string"&&(e=Mq(e)),typeof e=="object"&&(Gs(e.r)&&Gs(e.g)&&Gs(e.b)?(t=kq(e.r,e.g,e.b),o=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Gs(e.h)&&Gs(e.s)&&Gs(e.v)?(n=Bf(e.s),a=Bf(e.v),t=Aq(e.h,n,a),o=!0,i="hsv"):Gs(e.h)&&Gs(e.s)&&Gs(e.l)&&(n=Bf(e.s),s=Bf(e.l),t=Iq(e.h,n,s),o=!0,i="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(r=e.a)),r=bI(r),{ok:o,format:e.format||i,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:r}}var Rq="[-\\+]?\\d+%?",Lq="[-\\+]?\\d*\\.\\d+%?",yo="(?:".concat(Lq,")|(?:").concat(Rq,")"),Gv="[\\s|\\(]+(".concat(yo,")[,|\\s]+(").concat(yo,")[,|\\s]+(").concat(yo,")\\s*\\)?"),Yv="[\\s|\\(]+(".concat(yo,")[,|\\s]+(").concat(yo,")[,|\\s]+(").concat(yo,")[,|\\s]+(").concat(yo,")\\s*\\)?"),Ba={CSS_UNIT:new RegExp(yo),rgb:new RegExp("rgb"+Gv),rgba:new RegExp("rgba"+Yv),hsl:new RegExp("hsl"+Gv),hsla:new RegExp("hsla"+Yv),hsv:new RegExp("hsv"+Gv),hsva:new RegExp("hsva"+Yv),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Mq(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(Kv[e])e=Kv[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r=Ba.rgb.exec(e);return r?{r:r[1],g:r[2],b:r[3]}:(r=Ba.rgba.exec(e),r?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Ba.hsl.exec(e),r?{h:r[1],s:r[2],l:r[3]}:(r=Ba.hsla.exec(e),r?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Ba.hsv.exec(e),r?{h:r[1],s:r[2],v:r[3]}:(r=Ba.hsva.exec(e),r?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Ba.hex8.exec(e),r?{r:ra(r[1]),g:ra(r[2]),b:ra(r[3]),a:TI(r[4]),format:t?"name":"hex8"}:(r=Ba.hex6.exec(e),r?{r:ra(r[1]),g:ra(r[2]),b:ra(r[3]),format:t?"name":"hex"}:(r=Ba.hex4.exec(e),r?{r:ra(r[1]+r[1]),g:ra(r[2]+r[2]),b:ra(r[3]+r[3]),a:TI(r[4]+r[4]),format:t?"name":"hex8"}:(r=Ba.hex3.exec(e),r?{r:ra(r[1]+r[1]),g:ra(r[2]+r[2]),b:ra(r[3]+r[3]),format:t?"name":"hex"}:!1)))))))))}function Gs(e){return!!Ba.CSS_UNIT.exec(String(e))}var Dq=(function(){function e(t,r){t===void 0&&(t=""),r===void 0&&(r={});var n;if(t instanceof e)return t;typeof t=="number"&&(t=Eq(t)),this.originalInput=t;var a=$q(t);this.originalInput=t,this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=r.format)!==null&&n!==void 0?n:a.format,this.gradientType=r.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=a.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},e.prototype.getLuminance=function(){var t=this.toRgb(),r,n,a,s=t.r/255,o=t.g/255,i=t.b/255;return s<=.03928?r=s/12.92:r=Math.pow((s+.055)/1.055,2.4),o<=.03928?n=o/12.92:n=Math.pow((o+.055)/1.055,2.4),i<=.03928?a=i/12.92:a=Math.pow((i+.055)/1.055,2.4),.2126*r+.7152*n+.0722*a},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(t){return this.a=bI(t),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){var t=this.toHsl().s;return t===0},e.prototype.toHsv=function(){var t=_I(this.r,this.g,this.b);return{h:t.h*360,s:t.s,v:t.v,a:this.a}},e.prototype.toHsvString=function(){var t=_I(this.r,this.g,this.b),r=Math.round(t.h*360),n=Math.round(t.s*100),a=Math.round(t.v*100);return this.a===1?"hsv(".concat(r,", ").concat(n,"%, ").concat(a,"%)"):"hsva(".concat(r,", ").concat(n,"%, ").concat(a,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var t=wI(this.r,this.g,this.b);return{h:t.h*360,s:t.s,l:t.l,a:this.a}},e.prototype.toHslString=function(){var t=wI(this.r,this.g,this.b),r=Math.round(t.h*360),n=Math.round(t.s*100),a=Math.round(t.l*100);return this.a===1?"hsl(".concat(r,", ").concat(n,"%, ").concat(a,"%)"):"hsla(".concat(r,", ").concat(n,"%, ").concat(a,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(t){return t===void 0&&(t=!1),SI(this.r,this.g,this.b,t)},e.prototype.toHexString=function(t){return t===void 0&&(t=!1),"#"+this.toHex(t)},e.prototype.toHex8=function(t){return t===void 0&&(t=!1),Oq(this.r,this.g,this.b,this.a,t)},e.prototype.toHex8String=function(t){return t===void 0&&(t=!1),"#"+this.toHex8(t)},e.prototype.toHexShortString=function(t){return t===void 0&&(t=!1),this.a===1?this.toHexString(t):this.toHex8String(t)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var t=Math.round(this.r),r=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(t,", ").concat(r,", ").concat(n,")"):"rgba(".concat(t,", ").concat(r,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var t=function(r){return"".concat(Math.round(cn(r,255)*100),"%")};return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var t=function(r){return Math.round(cn(r,255)*100)};return this.a===1?"rgb(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%)"):"rgba(".concat(t(this.r),"%, ").concat(t(this.g),"%, ").concat(t(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var t="#"+SI(this.r,this.g,this.b,!1),r=0,n=Object.entries(Kv);r<n.length;r++){var a=n[r],s=a[0],o=a[1];if(t===o)return s}return!1},e.prototype.toString=function(t){var r=!!t;t=t??this.format;var n=!1,a=this.a<1&&this.a>=0,s=!r&&a&&(t.startsWith("hex")||t==="name");return s?t==="name"&&this.a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l+=t/100,r.l=Ff(r.l),new e(r)},e.prototype.brighten=function(t){t===void 0&&(t=10);var r=this.toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(t/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(t/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(t/100)))),new e(r)},e.prototype.darken=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.l-=t/100,r.l=Ff(r.l),new e(r)},e.prototype.tint=function(t){return t===void 0&&(t=10),this.mix("white",t)},e.prototype.shade=function(t){return t===void 0&&(t=10),this.mix("black",t)},e.prototype.desaturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s-=t/100,r.s=Ff(r.s),new e(r)},e.prototype.saturate=function(t){t===void 0&&(t=10);var r=this.toHsl();return r.s+=t/100,r.s=Ff(r.s),new e(r)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var r=this.toHsl(),n=(r.h+t)%360;return r.h=n<0?360+n:n,new e(r)},e.prototype.mix=function(t,r){r===void 0&&(r=50);var n=this.toRgb(),a=new e(t).toRgb(),s=r/100,o={r:(a.r-n.r)*s+n.r,g:(a.g-n.g)*s+n.g,b:(a.b-n.b)*s+n.b,a:(a.a-n.a)*s+n.a};return new e(o)},e.prototype.analogous=function(t,r){t===void 0&&(t=6),r===void 0&&(r=30);var n=this.toHsl(),a=360/r,s=[this];for(n.h=(n.h-(a*t>>1)+720)%360;--t;)n.h=(n.h+a)%360,s.push(new e(n));return s},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){t===void 0&&(t=6);for(var r=this.toHsv(),n=r.h,a=r.s,s=r.v,o=[],i=1/t;t--;)o.push(new e({h:n,s:a,v:s})),s=(s+i)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),r=t.h;return[this,new e({h:(r+72)%360,s:t.s,l:t.l}),new e({h:(r+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var r=this.toRgb(),n=new e(t).toRgb(),a=r.a+n.a*(1-r.a);return new e({r:(r.r*r.a+n.r*n.a*(1-r.a))/a,g:(r.g*r.a+n.g*n.a*(1-r.a))/a,b:(r.b*r.a+n.b*n.a*(1-r.a))/a,a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var r=this.toHsl(),n=r.h,a=[this],s=360/t,o=1;o<t;o++)a.push(new e({h:(n+o*s)%360,s:r.s,l:r.l}));return a},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e})();function bo(e,t=20){return e.mix("#141414",t).toString()}function Nq(e){const t=Hu(),r=ct("button");return W(()=>{let n={},a=e.color;if(a){const s=a.match(/var\((.*?)\)/);s&&(a=window.getComputedStyle(window.document.documentElement).getPropertyValue(s[1]));const o=new Dq(a),i=e.dark?o.tint(20).toString():bo(o,20);if(e.plain)n=r.cssVarBlock({"bg-color":e.dark?bo(o,90):o.tint(90).toString(),"text-color":a,"border-color":e.dark?bo(o,50):o.tint(50).toString(),"hover-text-color":`var(${r.cssVarName("color-white")})`,"hover-bg-color":a,"hover-border-color":a,"active-bg-color":i,"active-text-color":`var(${r.cssVarName("color-white")})`,"active-border-color":i}),t.value&&(n[r.cssVarBlockName("disabled-bg-color")]=e.dark?bo(o,90):o.tint(90).toString(),n[r.cssVarBlockName("disabled-text-color")]=e.dark?bo(o,50):o.tint(50).toString(),n[r.cssVarBlockName("disabled-border-color")]=e.dark?bo(o,80):o.tint(80).toString());else{const l=e.dark?bo(o,30):o.tint(30).toString(),u=o.isDark()?`var(${r.cssVarName("color-white")})`:`var(${r.cssVarName("color-black")})`;if(n=r.cssVarBlock({"bg-color":a,"text-color":u,"border-color":a,"hover-bg-color":l,"hover-text-color":u,"hover-border-color":l,"active-bg-color":i,"active-border-color":i}),t.value){const c=e.dark?bo(o,50):o.tint(50).toString();n[r.cssVarBlockName("disabled-bg-color")]=c,n[r.cssVarBlockName("disabled-text-color")]=e.dark?"rgba(255, 255, 255, 0.5)":`var(${r.cssVarName("color-white")})`,n[r.cssVarBlockName("disabled-border-color")]=c}}}return n})}const Fq=Te({...Te({name:"ElButton"}),props:zv,emits:Tq,setup(e,{expose:t,emit:r}){const n=e,a=Nq(n),s=ct("button"),{_ref:o,_size:i,_type:l,_disabled:u,_props:c,shouldAddSpace:d,handleClick:p}=Sq(n,r),b=W(()=>[s.b(),s.m(l.value),s.m(i.value),s.is("disabled",u.value),s.is("loading",n.loading),s.is("plain",n.plain),s.is("round",n.round),s.is("circle",n.circle),s.is("text",n.text),s.is("link",n.link),s.is("has-bg",n.bg)]);return t({ref:o,size:i,type:l,disabled:u,shouldAddSpace:d}),(m,h)=>(G(),Le(br(m.tag),gn({ref_key:"_ref",ref:o},_(c),{class:_(b),style:_(a),onClick:_(p)}),{default:ie(()=>[m.loading?(G(),le(pt,{key:0},[m.$slots.loading?De(m.$slots,"loading",{key:0}):(G(),Le(_(Ct),{key:1,class:Q(_(s).is("loading"))},{default:ie(()=>[(G(),Le(br(m.loadingIcon)))]),_:1},8,["class"]))],64)):m.icon||m.$slots.icon?(G(),Le(_(Ct),{key:1},{default:ie(()=>[m.icon?(G(),Le(br(m.icon),{key:0})):De(m.$slots,"icon",{key:1})]),_:3})):Oe("v-if",!0),m.$slots.default?(G(),le("span",{key:2,class:Q({[_(s).em("text","expand")]:_(d)})},[De(m.$slots,"default")],2)):Oe("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Bq=_t(Fq,[["__file","button.vue"]]);const jq={size:zv.size,type:zv.type},Uq=Te({...Te({name:"ElButtonGroup"}),props:jq,setup(e){const t=e;Fr(yI,sn({size:Nr(t,"size"),type:Nr(t,"type")}));const r=ct("button");return(n,a)=>(G(),le("div",{class:Q(_(r).b("group"))},[De(n.$slots,"default")],2))}});var xI=_t(Uq,[["__file","button-group.vue"]]);const yn=Lr(Bq,{ButtonGroup:xI});si(xI);const Jv=(e,t)=>[e>0?e-1:void 0,e,e<t?e+1:void 0],CI=e=>Array.from(Array.from({length:e}).keys()),kI=e=>e.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),II=e=>e.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),AI=function(e,t){const r=pd(e),n=pd(t);return r&&n?e.getTime()===t.getTime():!r&&!n?e===t:!1},OI=function(e,t){const r=Ue(e),n=Ue(t);return r&&n?e.length!==t.length?!1:e.every((a,s)=>AI(a,t[s])):!r&&!n?AI(e,t):!1},PI=function(e,t,r){const n=VC(t)||t==="x"?Ve(e).locale(r):Ve(e,t).locale(r);return n.isValid()?n:void 0},EI=function(e,t,r){return VC(t)?e:t==="x"?+e:Ve(e).locale(r).format(t)},Xv=(e,t)=>{var r;const n=[],a=t==null?void 0:t();for(let s=0;s<e;s++)n.push((r=a==null?void 0:a.includes(s))!=null?r:!1);return n},jf=e=>Ue(e)?e.map(t=>t.toDate()):e.toDate();var Uf={exports:{}},qq=Uf.exports,$I;function Vq(){return $I||($I=1,(function(e,t){(function(r,n){e.exports=n()})(qq,(function(){return function(r,n,a){var s=n.prototype,o=function(d){return d&&(d.indexOf?d:d.s)},i=function(d,p,b,m,h){var v=d.name?d:d.$locale(),y=o(v[p]),T=o(v[b]),S=y||T.map((function(C){return C.slice(0,m)}));if(!h)return S;var w=v.weekStart;return S.map((function(C,k){return S[(k+(w||0))%7]}))},l=function(){return a.Ls[a.locale()]},u=function(d,p){return d.formats[p]||(function(b){return b.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(m,h,v){return h||v.slice(1)}))})(d.formats[p.toUpperCase()])},c=function(){var d=this;return{months:function(p){return p?p.format("MMMM"):i(d,"months")},monthsShort:function(p){return p?p.format("MMM"):i(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(p){return p?p.format("dddd"):i(d,"weekdays")},weekdaysMin:function(p){return p?p.format("dd"):i(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(p){return p?p.format("ddd"):i(d,"weekdaysShort","weekdays",3)},longDateFormat:function(p){return u(d.$locale(),p)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return c.bind(this)()},a.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return a.weekdays()},weekdaysShort:function(){return a.weekdaysShort()},weekdaysMin:function(){return a.weekdaysMin()},months:function(){return a.months()},monthsShort:function(){return a.monthsShort()},longDateFormat:function(p){return u(d,p)},meridiem:d.meridiem,ordinal:d.ordinal}},a.months=function(){return i(l(),"months")},a.monthsShort=function(){return i(l(),"monthsShort","months",3)},a.weekdays=function(d){return i(l(),"weekdays",null,null,d)},a.weekdaysShort=function(d){return i(l(),"weekdaysShort","weekdays",3,d)},a.weekdaysMin=function(d){return i(l(),"weekdaysMin","weekdays",2,d)}}}))})(Uf)),Uf.exports}var Hq=Vq();const zq=Sn(Hq),Wq=["year","years","month","months","date","dates","week","datetime","datetimerange","daterange","monthrange","yearrange"];var qf=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(qf||{});const RI={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object],default:void 0},value:{type:[String,Boolean,Number,Object],default:void 0},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueValue:{type:[String,Number],default:void 0},falseValue:{type:[String,Number],default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},border:Boolean,size:qs,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0},...Vs(["ariaControls"])},LI={[qr]:e=>mt(e)||Zt(e)||tn(e),change:e=>mt(e)||Zt(e)||tn(e)},ml=Symbol("checkboxGroupContextKey"),Kq=({model:e,isChecked:t})=>{const r=ft(ml,void 0),n=W(()=>{var s,o;const i=(s=r==null?void 0:r.max)==null?void 0:s.value,l=(o=r==null?void 0:r.min)==null?void 0:o.value;return!Rr(i)&&e.value.length>=i&&!t.value||!Rr(l)&&e.value.length<=l&&t.value});return{isDisabled:Hu(W(()=>(r==null?void 0:r.disabled.value)||n.value)),isLimitDisabled:n}},Gq=(e,{model:t,isLimitExceeded:r,hasOwnLabel:n,isDisabled:a,isLabeledByFormItem:s})=>{const o=ft(ml,void 0),{formItem:i}=go(),{emit:l}=Vt();function u(m){var h,v,y,T;return[!0,e.trueValue,e.trueLabel].includes(m)?(v=(h=e.trueValue)!=null?h:e.trueLabel)!=null?v:!0:(T=(y=e.falseValue)!=null?y:e.falseLabel)!=null?T:!1}function c(m,h){l("change",u(m),h)}function d(m){if(r.value)return;const h=m.target;l("change",u(h.checked),m)}async function p(m){r.value||!n.value&&!a.value&&s.value&&(m.composedPath().some(y=>y.tagName==="LABEL")||(t.value=u([!1,e.falseValue,e.falseLabel].includes(t.value)),await xt(),c(t.value,m)))}const b=W(()=>(o==null?void 0:o.validateEvent)||e.validateEvent);return tt(()=>e.modelValue,()=>{b.value&&(i==null||i.validate("change").catch(m=>void 0))}),{handleChange:d,onClickRoot:p}},Yq=e=>{const t=ee(!1),{emit:r}=Vt(),n=ft(ml,void 0),a=W(()=>Rr(n)===!1),s=ee(!1),o=W({get(){var i,l;return a.value?(i=n==null?void 0:n.modelValue)==null?void 0:i.value:(l=e.modelValue)!=null?l:t.value},set(i){var l,u;a.value&&Ue(i)?(s.value=((l=n==null?void 0:n.max)==null?void 0:l.value)!==void 0&&i.length>(n==null?void 0:n.max.value)&&i.length>o.value.length,s.value===!1&&((u=n==null?void 0:n.changeEvent)==null||u.call(n,i))):(r(qr,i),t.value=i)}});return{model:o,isGroup:a,isLimitExceeded:s}},Jq=(e,t,{model:r})=>{const n=ft(ml,void 0),a=ee(!1),s=W(()=>ri(e.value)?e.label:e.value),o=W(()=>{const c=r.value;return tn(c)?c:Ue(c)?Rt(s.value)?c.map(Gt).some(d=>Ro(d,s.value)):c.map(Gt).includes(s.value):c!=null?c===e.trueValue||c===e.trueLabel:!!c}),i=Na(W(()=>{var c;return(c=n==null?void 0:n.size)==null?void 0:c.value}),{prop:!0}),l=Na(W(()=>{var c;return(c=n==null?void 0:n.size)==null?void 0:c.value})),u=W(()=>!!t.default||!ri(s.value));return{checkboxButtonSize:i,isChecked:o,isFocused:a,checkboxSize:l,hasOwnLabel:u,actualValue:s}},MI=(e,t)=>{const{formItem:r}=go(),{model:n,isGroup:a,isLimitExceeded:s}=Yq(e),{isFocused:o,isChecked:i,checkboxButtonSize:l,checkboxSize:u,hasOwnLabel:c,actualValue:d}=Jq(e,t,{model:n}),{isDisabled:p}=Kq({model:n,isChecked:i}),{inputId:b,isLabeledByFormItem:m}=xf(e,{formItemContext:r,disableIdGeneration:c,disableIdManagement:a}),{handleChange:h,onClickRoot:v}=Gq(e,{model:n,isLimitExceeded:s,hasOwnLabel:c,isDisabled:p,isLabeledByFormItem:m});return(()=>{function T(){var S,w;Ue(n.value)&&!n.value.includes(d.value)?n.value.push(d.value):n.value=(w=(S=e.trueValue)!=null?S:e.trueLabel)!=null?w:!0}e.checked&&T()})(),hl({from:"label act as value",replacement:"value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},W(()=>a.value&&ri(e.value))),hl({from:"true-label",replacement:"true-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},W(()=>!!e.trueLabel)),hl({from:"false-label",replacement:"false-value",version:"3.0.0",scope:"el-checkbox",ref:"https://element-plus.org/en-US/component/checkbox.html"},W(()=>!!e.falseLabel)),{inputId:b,isLabeledByFormItem:m,isChecked:i,isDisabled:p,isFocused:o,checkboxButtonSize:l,checkboxSize:u,hasOwnLabel:c,model:n,actualValue:d,handleChange:h,onClickRoot:v}},Xq=Te({...Te({name:"ElCheckbox"}),props:RI,emits:LI,setup(e){const t=e,r=Ra(),{inputId:n,isLabeledByFormItem:a,isChecked:s,isDisabled:o,isFocused:i,checkboxSize:l,hasOwnLabel:u,model:c,actualValue:d,handleChange:p,onClickRoot:b}=MI(t,r),m=ct("checkbox"),h=W(()=>[m.b(),m.m(l.value),m.is("disabled",o.value),m.is("bordered",t.border),m.is("checked",s.value)]),v=W(()=>[m.e("input"),m.is("disabled",o.value),m.is("checked",s.value),m.is("indeterminate",t.indeterminate),m.is("focus",i.value)]);return(y,T)=>(G(),Le(br(!_(u)&&_(a)?"span":"label"),{class:Q(_(h)),"aria-controls":y.indeterminate?y.ariaControls:null,onClick:_(b)},{default:ie(()=>{var S,w,C,k;return[K("span",{class:Q(_(v))},[y.trueValue||y.falseValue||y.trueLabel||y.falseLabel?qt((G(),le("input",{key:0,id:_(n),"onUpdate:modelValue":f=>lr(c)?c.value=f:null,class:Q(_(m).e("original")),type:"checkbox",indeterminate:y.indeterminate,name:y.name,tabindex:y.tabindex,disabled:_(o),"true-value":(w=(S=y.trueValue)!=null?S:y.trueLabel)!=null?w:!0,"false-value":(k=(C=y.falseValue)!=null?C:y.falseLabel)!=null?k:!1,onChange:_(p),onFocus:f=>i.value=!0,onBlur:f=>i.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[ef,_(c)]]):qt((G(),le("input",{key:1,id:_(n),"onUpdate:modelValue":f=>lr(c)?c.value=f:null,class:Q(_(m).e("original")),type:"checkbox",indeterminate:y.indeterminate,disabled:_(o),value:_(d),name:y.name,tabindex:y.tabindex,onChange:_(p),onFocus:f=>i.value=!0,onBlur:f=>i.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["id","onUpdate:modelValue","indeterminate","disabled","value","name","tabindex","onChange","onFocus","onBlur","onClick"])),[[ef,_(c)]]),K("span",{class:Q(_(m).e("inner"))},null,2)],2),_(u)?(G(),le("span",{key:0,class:Q(_(m).e("label"))},[De(y.$slots,"default"),y.$slots.default?Oe("v-if",!0):(G(),le(pt,{key:0},[ot(He(y.label),1)],64))],2)):Oe("v-if",!0)]}),_:3},8,["class","aria-controls","onClick"]))}});var Qq=_t(Xq,[["__file","checkbox.vue"]]);const Zq=Te({...Te({name:"ElCheckboxButton"}),props:RI,emits:LI,setup(e){const t=e,r=Ra(),{isFocused:n,isChecked:a,isDisabled:s,checkboxButtonSize:o,model:i,actualValue:l,handleChange:u}=MI(t,r),c=ft(ml,void 0),d=ct("checkbox"),p=W(()=>{var m,h,v,y;const T=(h=(m=c==null?void 0:c.fill)==null?void 0:m.value)!=null?h:"";return{backgroundColor:T,borderColor:T,color:(y=(v=c==null?void 0:c.textColor)==null?void 0:v.value)!=null?y:"",boxShadow:T?`-1px 0 0 0 ${T}`:void 0}}),b=W(()=>[d.b("button"),d.bm("button",o.value),d.is("disabled",s.value),d.is("checked",a.value),d.is("focus",n.value)]);return(m,h)=>{var v,y,T,S;return G(),le("label",{class:Q(_(b))},[m.trueValue||m.falseValue||m.trueLabel||m.falseLabel?qt((G(),le("input",{key:0,"onUpdate:modelValue":w=>lr(i)?i.value=w:null,class:Q(_(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:_(s),"true-value":(y=(v=m.trueValue)!=null?v:m.trueLabel)!=null?y:!0,"false-value":(S=(T=m.falseValue)!=null?T:m.falseLabel)!=null?S:!1,onChange:_(u),onFocus:w=>n.value=!0,onBlur:w=>n.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","true-value","false-value","onChange","onFocus","onBlur","onClick"])),[[ef,_(i)]]):qt((G(),le("input",{key:1,"onUpdate:modelValue":w=>lr(i)?i.value=w:null,class:Q(_(d).be("button","original")),type:"checkbox",name:m.name,tabindex:m.tabindex,disabled:_(s),value:_(l),onChange:_(u),onFocus:w=>n.value=!0,onBlur:w=>n.value=!1,onClick:Pt(()=>{},["stop"])},null,42,["onUpdate:modelValue","name","tabindex","disabled","value","onChange","onFocus","onBlur","onClick"])),[[ef,_(i)]]),m.$slots.default||m.label?(G(),le("span",{key:2,class:Q(_(d).be("button","inner")),style:Dt(_(a)?_(p):void 0)},[De(m.$slots,"default",{},()=>[ot(He(m.label),1)])],6)):Oe("v-if",!0)],2)}}});var DI=_t(Zq,[["__file","checkbox-button.vue"]]);const eV=vt({modelValue:{type:Ye(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:qs,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0},...Vs(["ariaLabel"])}),tV={[qr]:e=>Ue(e),change:e=>Ue(e)},rV=Te({...Te({name:"ElCheckboxGroup"}),props:eV,emits:tV,setup(e,{emit:t}){const r=e,n=ct("checkbox"),{formItem:a}=go(),{inputId:s,isLabeledByFormItem:o}=xf(r,{formItemContext:a}),i=async u=>{t(qr,u),await xt(),t("change",u)},l=W({get(){return r.modelValue},set(u){i(u)}});return Fr(ml,{...Lo(Ms(r),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:i}),tt(()=>r.modelValue,()=>{r.validateEvent&&(a==null||a.validate("change").catch(u=>void 0))}),(u,c)=>{var d;return G(),Le(br(u.tag),{id:_(s),class:Q(_(n).b("group")),role:"group","aria-label":_(o)?void 0:u.ariaLabel||"checkbox-group","aria-labelledby":_(o)?(d=_(a))==null?void 0:d.labelId:void 0},{default:ie(()=>[De(u.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var NI=_t(rV,[["__file","checkbox-group.vue"]]);const fs=Lr(Qq,{CheckboxButton:DI,CheckboxGroup:NI});si(DI);const nV=si(NI),aV=(e="")=>e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),na=e=>!e&&e!==0?[]:Ue(e)?e:[e],Qv=vt({type:{type:String,values:["primary","success","info","warning","danger"],default:"primary"},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:String,size:{type:String,values:Uu},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),sV=Te({...Te({name:"ElTag"}),props:Qv,emits:{close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent},setup(e,{emit:t}){const r=e,n=Na(),a=ct("tag"),s=W(()=>{const{type:u,hit:c,effect:d,closable:p,round:b}=r;return[a.b(),a.is("closable",p),a.m(u||"primary"),a.m(n.value),a.m(d),a.is("hit",c),a.is("round",b)]}),o=u=>{t("close",u)},i=u=>{t("click",u)},l=u=>{var c,d,p;(p=(d=(c=u==null?void 0:u.component)==null?void 0:c.subTree)==null?void 0:d.component)!=null&&p.bum&&(u.component.subTree.component.bum=null)};return(u,c)=>u.disableTransitions?(G(),le("span",{key:0,class:Q(_(s)),style:Dt({backgroundColor:u.color}),onClick:i},[K("span",{class:Q(_(a).e("content"))},[De(u.$slots,"default")],2),u.closable?(G(),Le(_(Ct),{key:0,class:Q(_(a).e("close")),onClick:Pt(o,["stop"])},{default:ie(()=>[ue(_(al))]),_:1},8,["class","onClick"])):Oe("v-if",!0)],6)):(G(),Le(ma,{key:1,name:`${_(a).namespace.value}-zoom-in-center`,appear:"",onVnodeMounted:l},{default:ie(()=>[K("span",{class:Q(_(s)),style:Dt({backgroundColor:u.color}),onClick:i},[K("span",{class:Q(_(a).e("content"))},[De(u.$slots,"default")],2),u.closable?(G(),Le(_(Ct),{key:0,class:Q(_(a).e("close")),onClick:Pt(o,["stop"])},{default:ie(()=>[ue(_(al))]),_:1},8,["class","onClick"])):Oe("v-if",!0)],6)]),_:3},8,["name"]))}});var oV=_t(sV,[["__file","tag.vue"]]);const FI=Lr(oV),wo=new Map;if(dr){let e;document.addEventListener("mousedown",t=>e=t),document.addEventListener("mouseup",t=>{if(e){for(const r of wo.values())for(const{documentHandler:n}of r)n(t,e);e=void 0}})}function BI(e,t){let r=[];return Ue(t.arg)?r=t.arg:Dn(t.arg)&&r.push(t.arg),function(n,a){const s=t.instance.popperRef,o=n.target,i=a==null?void 0:a.target,l=!t||!t.instance,u=!o||!i,c=e.contains(o)||e.contains(i),d=e===o,p=r.length&&r.some(m=>m==null?void 0:m.contains(o))||r.length&&r.includes(i),b=s&&(s.contains(o)||s.contains(i));l||u||c||d||p||b||t.value(n,a)}}const ec={beforeMount(e,t){wo.has(e)||wo.set(e,[]),wo.get(e).push({documentHandler:BI(e,t),bindingFn:t.value})},updated(e,t){wo.has(e)||wo.set(e,[]);const r=wo.get(e),n=r.findIndex(s=>s.bindingFn===t.oldValue),a={documentHandler:BI(e,t),bindingFn:t.value};n>=0?r.splice(n,1,a):r.push(a)},unmounted(e){wo.delete(e)}},iV=vt({a11y:{type:Boolean,default:!0},locale:{type:Ye(Object)},size:qs,button:{type:Ye(Object)},experimentalFeatures:{type:Ye(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Ye(Object)},zIndex:Number,namespace:{type:String,default:"el"},...Tv}),ja={},jI=Lr(Te({name:"ElConfigProvider",props:iV,setup(e,{slots:t}){tt(()=>e.message,n=>{Object.assign(ja,n??{})},{immediate:!0,deep:!0});const r=pk(e);return()=>De(t,"default",{config:r==null?void 0:r.value})}}));var Vf={exports:{}},lV=Vf.exports,UI;function uV(){return UI||(UI=1,(function(e,t){(function(r,n){e.exports=n()})(lV,(function(){var r={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},n=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|Q|YYYY|YY?|ww?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,a=/\d/,s=/\d\d/,o=/\d\d?/,i=/\d*[^-_:/,()\s\d]+/,l={},u=function(v){return(v=+v)+(v>68?1900:2e3)},c=function(v){return function(y){this[v]=+y}},d=[/[+-]\d\d:?(\d\d)?|Z/,function(v){(this.zone||(this.zone={})).offset=(function(y){if(!y||y==="Z")return 0;var T=y.match(/([+-]|\d\d)/g),S=60*T[1]+(+T[2]||0);return S===0?0:T[0]==="+"?-S:S})(v)}],p=function(v){var y=l[v];return y&&(y.indexOf?y:y.s.concat(y.f))},b=function(v,y){var T,S=l.meridiem;if(S){for(var w=1;w<=24;w+=1)if(v.indexOf(S(w,0,y))>-1){T=w>12;break}}else T=v===(y?"pm":"PM");return T},m={A:[i,function(v){this.afternoon=b(v,!1)}],a:[i,function(v){this.afternoon=b(v,!0)}],Q:[a,function(v){this.month=3*(v-1)+1}],S:[a,function(v){this.milliseconds=100*+v}],SS:[s,function(v){this.milliseconds=10*+v}],SSS:[/\d{3}/,function(v){this.milliseconds=+v}],s:[o,c("seconds")],ss:[o,c("seconds")],m:[o,c("minutes")],mm:[o,c("minutes")],H:[o,c("hours")],h:[o,c("hours")],HH:[o,c("hours")],hh:[o,c("hours")],D:[o,c("day")],DD:[s,c("day")],Do:[i,function(v){var y=l.ordinal,T=v.match(/\d+/);if(this.day=T[0],y)for(var S=1;S<=31;S+=1)y(S).replace(/\[|\]/g,"")===v&&(this.day=S)}],w:[o,c("week")],ww:[s,c("week")],M:[o,c("month")],MM:[s,c("month")],MMM:[i,function(v){var y=p("months"),T=(p("monthsShort")||y.map((function(S){return S.slice(0,3)}))).indexOf(v)+1;if(T<1)throw new Error;this.month=T%12||T}],MMMM:[i,function(v){var y=p("months").indexOf(v)+1;if(y<1)throw new Error;this.month=y%12||y}],Y:[/[+-]?\d+/,c("year")],YY:[s,function(v){this.year=u(v)}],YYYY:[/\d{4}/,c("year")],Z:d,ZZ:d};function h(v){var y,T;y=v,T=l&&l.formats;for(var S=(v=y.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(N,$,L){var B=L&&L.toUpperCase();return $||T[L]||r[L]||T[B].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(F,R,H){return R||H.slice(1)}))}))).match(n),w=S.length,C=0;C<w;C+=1){var k=S[C],f=m[k],O=f&&f[0],E=f&&f[1];S[C]=E?{regex:O,parser:E}:k.replace(/^\[|\]$/g,"")}return function(N){for(var $={},L=0,B=0;L<w;L+=1){var F=S[L];if(typeof F=="string")B+=F.length;else{var R=F.regex,H=F.parser,q=N.slice(B),M=R.exec(q)[0];H.call($,M),N=N.replace(M,"")}}return(function(D){var Y=D.afternoon;if(Y!==void 0){var Z=D.hours;Y?Z<12&&(D.hours+=12):Z===12&&(D.hours=0),delete D.afternoon}})($),$}}return function(v,y,T){T.p.customParseFormat=!0,v&&v.parseTwoDigitYear&&(u=v.parseTwoDigitYear);var S=y.prototype,w=S.parse;S.parse=function(C){var k=C.date,f=C.utc,O=C.args;this.$u=f;var E=O[1];if(typeof E=="string"){var N=O[2]===!0,$=O[3]===!0,L=N||$,B=O[2];$&&(B=O[2]),l=this.$locale(),!N&&B&&(l=T.Ls[B]),this.$d=(function(q,M,D,Y){try{if(["x","X"].indexOf(M)>-1)return new Date((M==="X"?1e3:1)*q);var Z=h(M)(q),se=Z.year,ne=Z.month,me=Z.day,ve=Z.hours,We=Z.minutes,Ke=Z.seconds,xe=Z.milliseconds,ze=Z.zone,Ne=Z.week,rt=new Date,X=me||(se||ne?1:rt.getDate()),re=se||rt.getFullYear(),ge=0;se&&!ne||(ge=ne>0?ne-1:rt.getMonth());var Re,Se=ve||0,ke=We||0,qe=Ke||0,Pe=xe||0;return ze?new Date(Date.UTC(re,ge,X,Se,ke,qe,Pe+60*ze.offset*1e3)):D?new Date(Date.UTC(re,ge,X,Se,ke,qe,Pe)):(Re=new Date(re,ge,X,Se,ke,qe,Pe),Ne&&(Re=Y(Re).week(Ne).toDate()),Re)}catch{return new Date("")}})(k,E,f,T),this.init(),B&&B!==!0&&(this.$L=this.locale(B).$L),L&&k!=this.format(E)&&(this.$d=new Date("")),l={}}else if(E instanceof Array)for(var F=E.length,R=1;R<=F;R+=1){O[1]=E[R-1];var H=T.apply(this,O);if(H.isValid()){this.$d=H.$d,this.$L=H.$L,this.init();break}R===F&&(this.$d=new Date(""))}else w.call(this,C)}}}))})(Vf)),Vf.exports}var cV=uV();const dV=Sn(cV);var Hf={exports:{}},fV=Hf.exports,qI;function pV(){return qI||(qI=1,(function(e,t){(function(r,n){e.exports=n()})(fV,(function(){return function(r,n){var a=n.prototype,s=a.format;a.format=function(o){var i=this,l=this.$locale();if(!this.isValid())return s.bind(this)(o);var u=this.$utils(),c=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(d){switch(d){case"Q":return Math.ceil((i.$M+1)/3);case"Do":return l.ordinal(i.$D);case"gggg":return i.weekYear();case"GGGG":return i.isoWeekYear();case"wo":return l.ordinal(i.week(),"W");case"w":case"ww":return u.s(i.week(),d==="w"?1:2,"0");case"W":case"WW":return u.s(i.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return u.s(String(i.$H===0?24:i.$H),d==="k"?1:2,"0");case"X":return Math.floor(i.$d.getTime()/1e3);case"x":return i.$d.getTime();case"z":return"["+i.offsetName()+"]";case"zzz":return"["+i.offsetName("long")+"]";default:return d}}));return s.bind(this)(c)}}}))})(Hf)),Hf.exports}var hV=pV();const mV=Sn(hV);var zf={exports:{}},gV=zf.exports,VI;function vV(){return VI||(VI=1,(function(e,t){(function(r,n){e.exports=n()})(gV,(function(){var r="week",n="year";return function(a,s,o){var i=s.prototype;i.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var u=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var c=o(this).startOf(n).add(1,n).date(u),d=o(this).endOf(r);if(c.isBefore(d))return 1}var p=o(this).startOf(n).date(u).startOf(r).subtract(1,"millisecond"),b=this.diff(p,r,!0);return b<0?o(this).startOf("week").week():Math.ceil(b)},i.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}}))})(zf)),zf.exports}var yV=vV();const bV=Sn(yV);var Wf={exports:{}},wV=Wf.exports,HI;function _V(){return HI||(HI=1,(function(e,t){(function(r,n){e.exports=n()})(wV,(function(){return function(r,n){n.prototype.weekYear=function(){var a=this.month(),s=this.week(),o=this.year();return s===1&&a===11?o+1:a===0&&s>=52?o-1:o}}}))})(Wf)),Wf.exports}var SV=_V();const TV=Sn(SV);var Kf={exports:{}},xV=Kf.exports,zI;function CV(){return zI||(zI=1,(function(e,t){(function(r,n){e.exports=n()})(xV,(function(){return function(r,n,a){n.prototype.dayOfYear=function(s){var o=Math.round((a(this).startOf("day")-a(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}}))})(Kf)),Kf.exports}var kV=CV();const IV=Sn(kV);var Gf={exports:{}},AV=Gf.exports,WI;function OV(){return WI||(WI=1,(function(e,t){(function(r,n){e.exports=n()})(AV,(function(){return function(r,n){n.prototype.isSameOrAfter=function(a,s){return this.isSame(a,s)||this.isAfter(a,s)}}}))})(Gf)),Gf.exports}var PV=OV();const EV=Sn(PV);var Yf={exports:{}},$V=Yf.exports,KI;function RV(){return KI||(KI=1,(function(e,t){(function(r,n){e.exports=n()})($V,(function(){return function(r,n){n.prototype.isSameOrBefore=function(a,s){return this.isSame(a,s)||this.isBefore(a,s)}}}))})(Yf)),Yf.exports}var LV=RV();const MV=Sn(LV),GI=["hours","minutes","seconds"],YI="HH:mm:ss",gl="YYYY-MM-DD",DV={date:gl,dates:gl,week:"gggg[w]ww",year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",datetime:`${gl} ${YI}`,monthrange:"YYYY-MM",yearrange:"YYYY",daterange:gl,datetimerange:`${gl} ${YI}`},JI=vt({disabledHours:{type:Ye(Function)},disabledMinutes:{type:Ye(Function)},disabledSeconds:{type:Ye(Function)}}),NV=vt({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),XI=vt({id:{type:Ye([Array,String])},name:{type:Ye([Array,String])},popperClass:{type:String,default:""},format:String,valueFormat:String,dateFormat:String,timeFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Ye([String,Object]),default:qu},editable:{type:Boolean,default:!0},prefixIcon:{type:Ye([String,Object]),default:""},size:qs,readonly:Boolean,disabled:Boolean,placeholder:{type:String,default:""},popperOptions:{type:Ye(Object),default:()=>({})},modelValue:{type:Ye([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Ye([Date,Array])},defaultTime:{type:Ye([Date,Array])},isRange:Boolean,...JI,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:Boolean,tabindex:{type:Ye([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean,placement:{type:Ye(String),values:Gu,default:"bottom"},fallbackPlacements:{type:Ye(Array),default:["bottom","top","right","left"]},...Tv,...Vs(["ariaLabel"]),showNow:{type:Boolean,default:!0}}),FV=vt({id:{type:Ye(Array)},name:{type:Ye(Array)},modelValue:{type:Ye([Array,String])},startPlaceholder:String,endPlaceholder:String}),BV=Te({...Te({name:"PickerRangeTrigger",inheritAttrs:!1}),props:FV,emits:["mouseenter","mouseleave","click","touchstart","focus","blur","startInput","endInput","startChange","endChange"],setup(e,{expose:t,emit:r}){const n=Ck(),a=ct("date"),s=ct("range"),o=ee(),i=ee(),{wrapperRef:l,isFocused:u}=Cf(o),c=w=>{r("click",w)},d=w=>{r("mouseenter",w)},p=w=>{r("mouseleave",w)},b=w=>{r("mouseenter",w)},m=w=>{r("startInput",w)},h=w=>{r("endInput",w)},v=w=>{r("startChange",w)},y=w=>{r("endChange",w)};return t({focus:()=>{var w;(w=o.value)==null||w.focus()},blur:()=>{var w,C;(w=o.value)==null||w.blur(),(C=i.value)==null||C.blur()}}),(w,C)=>(G(),le("div",{ref_key:"wrapperRef",ref:l,class:Q([_(a).is("active",_(u)),w.$attrs.class]),style:Dt(w.$attrs.style),onClick:c,onMouseenter:d,onMouseleave:p,onTouchstartPassive:b},[De(w.$slots,"prefix"),K("input",gn(_(n),{id:w.id&&w.id[0],ref_key:"inputRef",ref:o,name:w.name&&w.name[0],placeholder:w.startPlaceholder,value:w.modelValue&&w.modelValue[0],class:_(s).b("input"),onInput:m,onChange:v}),null,16,["id","name","placeholder","value"]),De(w.$slots,"range-separator"),K("input",gn(_(n),{id:w.id&&w.id[1],ref_key:"endInputRef",ref:i,name:w.name&&w.name[1],placeholder:w.endPlaceholder,value:w.modelValue&&w.modelValue[1],class:_(s).b("input"),onInput:h,onChange:y}),null,16,["id","name","placeholder","value"]),De(w.$slots,"suffix")],38))}});var jV=_t(BV,[["__file","picker-range-trigger.vue"]]);const UV=Te({...Te({name:"Picker"}),props:XI,emits:["update:modelValue","change","focus","blur","clear","calendar-change","panel-change","visible-change","keydown"],setup(e,{expose:t,emit:r}){const n=e,a=Ud(),{lang:s}=zr(),o=ct("date"),i=ct("input"),l=ct("range"),{form:u,formItem:c}=go(),d=ft("ElPopperOptions",{}),{valueOnClear:p}=fk(n,null),b=ee(),m=ee(),h=ee(!1),v=ee(!1),y=ee(null);let T=!1;const{isFocused:S,handleFocus:w,handleBlur:C}=Cf(m,{beforeFocus(){return n.readonly||D.value},afterFocus(){h.value=!0},beforeBlur(V){var _e;return!T&&((_e=b.value)==null?void 0:_e.isFocusInsideContent(V))},afterBlur(){Me(),h.value=!1,T=!1,n.validateEvent&&(c==null||c.validate("blur").catch(V=>void 0))}}),k=W(()=>[o.b("editor"),o.bm("editor",n.type),i.e("wrapper"),o.is("disabled",D.value),o.is("active",h.value),l.b("editor"),Se?l.bm("editor",Se.value):"",a.class]),f=W(()=>[i.e("icon"),l.e("close-icon"),xe.value?"":l.e("close-icon--hidden")]);tt(h,V=>{V?xt(()=>{V&&(y.value=n.modelValue)}):(Pe.value=null,xt(()=>{O(n.modelValue)}))});const O=(V,_e)=>{(_e||!OI(V,y.value))&&(r("change",V),n.validateEvent&&(c==null||c.validate("change").catch(Xe=>void 0)))},E=V=>{if(!OI(n.modelValue,V)){let _e;Ue(V)?_e=V.map(Xe=>EI(Xe,n.valueFormat,s.value)):V&&(_e=EI(V,n.valueFormat,s.value)),r("update:modelValue",V&&_e,s.value)}},N=V=>{r("keydown",V)},$=W(()=>m.value?Array.from(m.value.$el.querySelectorAll("input")):[]),L=(V,_e,Xe)=>{const dt=$.value;dt.length&&(!Xe||Xe==="min"?(dt[0].setSelectionRange(V,_e),dt[0].focus()):Xe==="max"&&(dt[1].setSelectionRange(V,_e),dt[1].focus()))},B=(V="",_e=!1)=>{h.value=_e;let Xe;Ue(V)?Xe=V.map(dt=>dt.toDate()):Xe=V&&V.toDate(),Pe.value=null,E(Xe)},F=()=>{v.value=!0},R=()=>{r("visible-change",!0)},H=()=>{v.value=!1,h.value=!1,r("visible-change",!1)},q=()=>{h.value=!0},M=()=>{h.value=!1},D=W(()=>n.disabled||(u==null?void 0:u.disabled)),Y=W(()=>{let V;if(Ne.value?Ot.value.getDefaultValue&&(V=Ot.value.getDefaultValue()):Ue(n.modelValue)?V=n.modelValue.map(_e=>PI(_e,n.valueFormat,s.value)):V=PI(n.modelValue,n.valueFormat,s.value),Ot.value.getRangeAvailableTime){const _e=Ot.value.getRangeAvailableTime(V);Ro(_e,V)||(V=_e,Ne.value||E(jf(V)))}return Ue(V)&&V.some(_e=>!_e)&&(V=[]),V}),Z=W(()=>{if(!Ot.value.panelReady)return"";const V=nt(Y.value);return Ue(Pe.value)?[Pe.value[0]||V&&V[0]||"",Pe.value[1]||V&&V[1]||""]:Pe.value!==null?Pe.value:!ne.value&&Ne.value||!h.value&&Ne.value?"":V?me.value||ve.value||We.value?V.join(", "):V:""}),se=W(()=>n.type.includes("time")),ne=W(()=>n.type.startsWith("time")),me=W(()=>n.type==="dates"),ve=W(()=>n.type==="months"),We=W(()=>n.type==="years"),Ke=W(()=>n.prefixIcon||(se.value?_j:hj)),xe=ee(!1),ze=V=>{n.readonly||D.value||(xe.value&&(V.stopPropagation(),Ot.value.handleClear?Ot.value.handleClear():E(p.value),O(p.value,!0),xe.value=!1,H()),r("clear"))},Ne=W(()=>{const{modelValue:V}=n;return!V||Ue(V)&&!V.filter(Boolean).length}),rt=async V=>{var _e;n.readonly||D.value||(((_e=V.target)==null?void 0:_e.tagName)!=="INPUT"||S.value)&&(h.value=!0)},X=()=>{n.readonly||D.value||!Ne.value&&n.clearable&&(xe.value=!0)},re=()=>{xe.value=!1},ge=V=>{var _e;n.readonly||D.value||(((_e=V.touches[0].target)==null?void 0:_e.tagName)!=="INPUT"||S.value)&&(h.value=!0)},Re=W(()=>n.type.includes("range")),Se=Na(),ke=W(()=>{var V,_e;return(_e=(V=_(b))==null?void 0:V.popperRef)==null?void 0:_e.contentRef}),qe=GC(m,V=>{const _e=_(ke),Xe=is(m);_e&&(V.target===_e||V.composedPath().includes(_e))||V.target===Xe||Xe&&V.composedPath().includes(Xe)||(h.value=!1)});Ur(()=>{qe==null||qe()});const Pe=ee(null),Me=()=>{if(Pe.value){const V=$e(Z.value);V&&Ge(V)&&(E(jf(V)),Pe.value=null)}Pe.value===""&&(E(p.value),O(p.value),Pe.value=null)},$e=V=>V?Ot.value.parseUserInput(V):null,nt=V=>V?Ot.value.formatToString(V):null,Ge=V=>Ot.value.isValidValue(V),ye=async V=>{if(n.readonly||D.value)return;const{code:_e}=V;if(N(V),_e===ar.esc){h.value===!0&&(h.value=!1,V.preventDefault(),V.stopPropagation());return}if(_e===ar.down&&(Ot.value.handleFocusPicker&&(V.preventDefault(),V.stopPropagation()),h.value===!1&&(h.value=!0,await xt()),Ot.value.handleFocusPicker)){Ot.value.handleFocusPicker();return}if(_e===ar.tab){T=!0;return}if(_e===ar.enter||_e===ar.numpadEnter){(Pe.value===null||Pe.value===""||Ge($e(Z.value)))&&(Me(),h.value=!1),V.stopPropagation();return}if(Pe.value){V.stopPropagation();return}Ot.value.handleKeydownInput&&Ot.value.handleKeydownInput(V)},Ce=V=>{Pe.value=V,h.value||(h.value=!0)},it=V=>{const _e=V.target;Pe.value?Pe.value=[_e.value,Pe.value[1]]:Pe.value=[_e.value,null]},Et=V=>{const _e=V.target;Pe.value?Pe.value=[Pe.value[0],_e.value]:Pe.value=[null,_e.value]},bt=()=>{var V;const _e=Pe.value,Xe=$e(_e&&_e[0]),dt=_(Y);if(Xe&&Xe.isValid()){Pe.value=[nt(Xe),((V=Z.value)==null?void 0:V[1])||null];const gt=[Xe,dt&&(dt[1]||null)];Ge(gt)&&(E(jf(gt)),Pe.value=null)}},pr=()=>{var V;const _e=_(Pe),Xe=$e(_e&&_e[1]),dt=_(Y);if(Xe&&Xe.isValid()){Pe.value=[((V=_(Z))==null?void 0:V[0])||null,nt(Xe)];const gt=[dt&&dt[0],Xe];Ge(gt)&&(E(jf(gt)),Pe.value=null)}},Ot=ee({}),kr=V=>{Ot.value[V[0]]=V[1],Ot.value.panelReady=!0},mr=V=>{r("calendar-change",V)},ce=(V,_e,Xe)=>{r("panel-change",V,_e,Xe)},fe=()=>{var V;(V=m.value)==null||V.focus()},J=()=>{var V;(V=m.value)==null||V.blur()};return Fr("EP_PICKER_BASE",{props:n}),t({focus:fe,blur:J,handleOpen:q,handleClose:M,onPick:B}),(V,_e)=>(G(),Le(_(ci),gn({ref_key:"refPopper",ref:b,visible:h.value,effect:"light",pure:"",trigger:"click"},V.$attrs,{role:"dialog",teleported:"",transition:`${_(o).namespace.value}-zoom-in-top`,"popper-class":[`${_(o).namespace.value}-picker__popper`,V.popperClass],"popper-options":_(d),"fallback-placements":V.fallbackPlacements,"gpu-acceleration":!1,placement:V.placement,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:F,onShow:R,onHide:H}),{default:ie(()=>[_(Re)?(G(),Le(jV,{key:1,id:V.id,ref_key:"inputRef",ref:m,"model-value":_(Z),name:V.name,disabled:_(D),readonly:!V.editable||V.readonly,"start-placeholder":V.startPlaceholder,"end-placeholder":V.endPlaceholder,class:Q(_(k)),style:Dt(V.$attrs.style),"aria-label":V.ariaLabel,tabindex:V.tabindex,autocomplete:"off",role:"combobox",onClick:rt,onFocus:_(w),onBlur:_(C),onStartInput:it,onStartChange:bt,onEndInput:Et,onEndChange:pr,onMousedown:rt,onMouseenter:X,onMouseleave:re,onTouchstartPassive:ge,onKeydown:ye},{prefix:ie(()=>[_(Ke)?(G(),Le(_(Ct),{key:0,class:Q([_(i).e("icon"),_(l).e("icon")])},{default:ie(()=>[(G(),Le(br(_(Ke))))]),_:1},8,["class"])):Oe("v-if",!0)]),"range-separator":ie(()=>[De(V.$slots,"range-separator",{},()=>[K("span",{class:Q(_(l).b("separator"))},He(V.rangeSeparator),3)])]),suffix:ie(()=>[V.clearIcon?(G(),Le(_(Ct),{key:0,class:Q(_(f)),onMousedown:Pt(_(jr),["prevent"]),onClick:ze},{default:ie(()=>[(G(),Le(br(V.clearIcon)))]),_:1},8,["class","onMousedown"])):Oe("v-if",!0)]),_:3},8,["id","model-value","name","disabled","readonly","start-placeholder","end-placeholder","class","style","aria-label","tabindex","onFocus","onBlur"])):(G(),Le(_(Hs),{key:0,id:V.id,ref_key:"inputRef",ref:m,"container-role":"combobox","model-value":_(Z),name:V.name,size:_(Se),disabled:_(D),placeholder:V.placeholder,class:Q([_(o).b("editor"),_(o).bm("editor",V.type),V.$attrs.class]),style:Dt(V.$attrs.style),readonly:!V.editable||V.readonly||_(me)||_(ve)||_(We)||V.type==="week","aria-label":V.ariaLabel,tabindex:V.tabindex,"validate-event":!1,onInput:Ce,onFocus:_(w),onBlur:_(C),onKeydown:ye,onChange:Me,onMousedown:rt,onMouseenter:X,onMouseleave:re,onTouchstartPassive:ge,onClick:Pt(()=>{},["stop"])},{prefix:ie(()=>[_(Ke)?(G(),Le(_(Ct),{key:0,class:Q(_(i).e("icon")),onMousedown:Pt(rt,["prevent"]),onTouchstartPassive:ge},{default:ie(()=>[(G(),Le(br(_(Ke))))]),_:1},8,["class","onMousedown"])):Oe("v-if",!0)]),suffix:ie(()=>[xe.value&&V.clearIcon?(G(),Le(_(Ct),{key:0,class:Q(`${_(i).e("icon")} clear-icon`),onMousedown:Pt(_(jr),["prevent"]),onClick:ze},{default:ie(()=>[(G(),Le(br(V.clearIcon)))]),_:1},8,["class","onMousedown"])):Oe("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","aria-label","tabindex","onFocus","onBlur","onClick"]))]),content:ie(()=>[De(V.$slots,"default",{visible:h.value,actualVisible:v.value,parsedValue:_(Y),format:V.format,dateFormat:V.dateFormat,timeFormat:V.timeFormat,unlinkPanels:V.unlinkPanels,type:V.type,defaultValue:V.defaultValue,showNow:V.showNow,onPick:B,onSelectRange:L,onSetPickerOption:kr,onCalendarChange:mr,onPanelChange:ce,onMousedown:Pt(()=>{},["stop"])})]),_:3},16,["visible","transition","popper-class","popper-options","fallback-placements","placement"]))}});var qV=_t(UV,[["__file","picker.vue"]]);const VV=vt({...NV,datetimeRole:String,parsedValue:{type:Ye(Object)}}),HV=({getAvailableHours:e,getAvailableMinutes:t,getAvailableSeconds:r})=>{const n=(o,i,l,u)=>{const c={hour:e,minute:t,second:r};let d=o;return["hour","minute","second"].forEach(p=>{if(c[p]){let b;const m=c[p];switch(p){case"minute":{b=m(d.hour(),i,u);break}case"second":{b=m(d.hour(),d.minute(),i,u);break}default:{b=m(i,u);break}}if(b!=null&&b.length&&!b.includes(d[p]())){const h=l?0:b.length-1;d=d[p](b[h])}}}),d},a={};return{timePickerOptions:a,getAvailableTime:n,onSetOption:([o,i])=>{a[o]=i}}},Zv=e=>{const t=(n,a)=>n||a,r=n=>n!==!0;return e.map(t).filter(r)},QI=(e,t,r)=>({getHoursList:(o,i)=>Xv(24,e&&(()=>e==null?void 0:e(o,i))),getMinutesList:(o,i,l)=>Xv(60,t&&(()=>t==null?void 0:t(o,i,l))),getSecondsList:(o,i,l,u)=>Xv(60,r&&(()=>r==null?void 0:r(o,i,l,u)))}),zV=(e,t,r)=>{const{getHoursList:n,getMinutesList:a,getSecondsList:s}=QI(e,t,r);return{getAvailableHours:(u,c)=>Zv(n(u,c)),getAvailableMinutes:(u,c,d)=>Zv(a(u,c,d)),getAvailableSeconds:(u,c,d,p)=>Zv(s(u,c,d,p))}},WV=e=>{const t=ee(e.parsedValue);return tt(()=>e.visible,r=>{r||(t.value=e.parsedValue)}),t},KV=vt({role:{type:String,required:!0},spinnerDate:{type:Ye(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Ye(String),default:""},...JI}),GV=100,YV=600,Jf={beforeMount(e,t){const r=t.value,{interval:n=GV,delay:a=YV}=et(r)?{}:r;let s,o;const i=()=>et(r)?r():r.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),s&&(clearInterval(s),s=void 0)};e.addEventListener("mousedown",u=>{u.button===0&&(l(),i(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{s=setInterval(()=>{i()},n)},a))})}};var JV=_t(Te({__name:"basic-time-spinner",props:KV,emits:["change","select-range","set-option"],setup(e,{emit:t}){const r=e,n=ft("EP_PICKER_BASE"),{isRange:a}=n.props,s=ct("time"),{getHoursList:o,getMinutesList:i,getSecondsList:l}=QI(r.disabledHours,r.disabledMinutes,r.disabledSeconds);let u=!1;const c=ee(),d=ee(),p=ee(),b=ee(),m={hours:d,minutes:p,seconds:b},h=W(()=>r.showSeconds?GI:GI.slice(0,2)),v=W(()=>{const{spinnerDate:Z}=r,se=Z.hour(),ne=Z.minute(),me=Z.second();return{hours:se,minutes:ne,seconds:me}}),y=W(()=>{const{hours:Z,minutes:se}=_(v),{role:ne,spinnerDate:me}=r,ve=a?void 0:me;return{hours:o(ne,ve),minutes:i(Z,ne,ve),seconds:l(Z,se,ne,ve)}}),T=W(()=>{const{hours:Z,minutes:se,seconds:ne}=_(v);return{hours:Jv(Z,23),minutes:Jv(se,59),seconds:Jv(ne,59)}}),S=Is(Z=>{u=!1,k(Z)},200),w=Z=>{if(!!!r.amPmMode)return"";const ne=r.amPmMode==="A";let me=Z<12?" am":" pm";return ne&&(me=me.toUpperCase()),me},C=Z=>{let se;switch(Z){case"hours":se=[0,2];break;case"minutes":se=[3,5];break;case"seconds":se=[6,8];break}const[ne,me]=se;t("select-range",ne,me),c.value=Z},k=Z=>{E(Z,_(v)[Z])},f=()=>{k("hours"),k("minutes"),k("seconds")},O=Z=>Z.querySelector(`.${s.namespace.value}-scrollbar__wrap`),E=(Z,se)=>{if(r.arrowControl)return;const ne=_(m[Z]);ne&&ne.$el&&(O(ne.$el).scrollTop=Math.max(0,se*N(Z)))},N=Z=>{const se=_(m[Z]),ne=se==null?void 0:se.$el.querySelector("li");return ne&&Number.parseFloat(ai(ne,"height"))||0},$=()=>{B(1)},L=()=>{B(-1)},B=Z=>{c.value||C("hours");const se=c.value,ne=_(v)[se],me=c.value==="hours"?24:60,ve=F(se,ne,Z,me);R(se,ve),E(se,ve),xt(()=>C(se))},F=(Z,se,ne,me)=>{let ve=(se+ne+me)%me;const We=_(y)[Z];for(;We[ve]&&ve!==se;)ve=(ve+ne+me)%me;return ve},R=(Z,se)=>{if(_(y)[Z][se])return;const{hours:ve,minutes:We,seconds:Ke}=_(v);let xe;switch(Z){case"hours":xe=r.spinnerDate.hour(se).minute(We).second(Ke);break;case"minutes":xe=r.spinnerDate.hour(ve).minute(se).second(Ke);break;case"seconds":xe=r.spinnerDate.hour(ve).minute(We).second(se);break}t("change",xe)},H=(Z,{value:se,disabled:ne})=>{ne||(R(Z,se),C(Z),E(Z,se))},q=Z=>{const se=_(m[Z]);if(!se)return;u=!0,S(Z);const ne=Math.min(Math.round((O(se.$el).scrollTop-(M(Z)*.5-10)/N(Z)+3)/N(Z)),Z==="hours"?23:59);R(Z,ne)},M=Z=>_(m[Z]).$el.offsetHeight,D=()=>{const Z=se=>{const ne=_(m[se]);ne&&ne.$el&&(O(ne.$el).onscroll=()=>{q(se)})};Z("hours"),Z("minutes"),Z("seconds")};Kt(()=>{xt(()=>{!r.arrowControl&&D(),f(),r.role==="start"&&C("hours")})});const Y=(Z,se)=>{m[se].value=Z??void 0};return t("set-option",[`${r.role}_scrollDown`,B]),t("set-option",[`${r.role}_emitSelectRange`,C]),tt(()=>r.spinnerDate,()=>{u||f()}),(Z,se)=>(G(),le("div",{class:Q([_(s).b("spinner"),{"has-seconds":Z.showSeconds}])},[Z.arrowControl?Oe("v-if",!0):(G(!0),le(pt,{key:0},$r(_(h),ne=>(G(),Le(_(kf),{key:ne,ref_for:!0,ref:me=>Y(me,ne),class:Q(_(s).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":_(s).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:me=>C(ne),onMousemove:me=>k(ne)},{default:ie(()=>[(G(!0),le(pt,null,$r(_(y)[ne],(me,ve)=>(G(),le("li",{key:ve,class:Q([_(s).be("spinner","item"),_(s).is("active",ve===_(v)[ne]),_(s).is("disabled",me)]),onClick:We=>H(ne,{value:ve,disabled:me})},[ne==="hours"?(G(),le(pt,{key:0},[ot(He(("0"+(Z.amPmMode?ve%12||12:ve)).slice(-2))+He(w(ve)),1)],64)):(G(),le(pt,{key:1},[ot(He(("0"+ve).slice(-2)),1)],64))],10,["onClick"]))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),Z.arrowControl?(G(!0),le(pt,{key:1},$r(_(h),ne=>(G(),le("div",{key:ne,class:Q([_(s).be("spinner","wrapper"),_(s).is("arrow")]),onMouseenter:me=>C(ne)},[qt((G(),Le(_(Ct),{class:Q(["arrow-up",_(s).be("spinner","arrow")])},{default:ie(()=>[ue(_(kv))]),_:1},8,["class"])),[[_(Jf),L]]),qt((G(),Le(_(Ct),{class:Q(["arrow-down",_(s).be("spinner","arrow")])},{default:ie(()=>[ue(_(Tf))]),_:1},8,["class"])),[[_(Jf),$]]),K("ul",{class:Q(_(s).be("spinner","list"))},[(G(!0),le(pt,null,$r(_(T)[ne],(me,ve)=>(G(),le("li",{key:ve,class:Q([_(s).be("spinner","item"),_(s).is("active",me===_(v)[ne]),_(s).is("disabled",_(y)[ne][me])])},[_(Zt)(me)?(G(),le(pt,{key:0},[ne==="hours"?(G(),le(pt,{key:0},[ot(He(("0"+(Z.amPmMode?me%12||12:me)).slice(-2))+He(w(me)),1)],64)):(G(),le(pt,{key:1},[ot(He(("0"+me).slice(-2)),1)],64))],64)):Oe("v-if",!0)],2))),128))],2)],42,["onMouseenter"]))),128)):Oe("v-if",!0)],2))}}),[["__file","basic-time-spinner.vue"]]),ey=_t(Te({__name:"panel-time-pick",props:VV,emits:["pick","select-range","set-picker-option"],setup(e,{emit:t}){const r=e,n=ft("EP_PICKER_BASE"),{arrowControl:a,disabledHours:s,disabledMinutes:o,disabledSeconds:i,defaultValue:l}=n.props,{getAvailableHours:u,getAvailableMinutes:c,getAvailableSeconds:d}=zV(s,o,i),p=ct("time"),{t:b,lang:m}=zr(),h=ee([0,2]),v=WV(r),y=W(()=>Rr(r.actualVisible)?`${p.namespace.value}-zoom-in-top`:""),T=W(()=>r.format.includes("ss")),S=W(()=>r.format.includes("A")?"A":r.format.includes("a")?"a":""),w=M=>{const D=Ve(M).locale(m.value),Y=F(D);return D.isSame(Y)},C=()=>{t("pick",v.value,!1)},k=(M=!1,D=!1)=>{D||t("pick",r.parsedValue,M)},f=M=>{if(!r.visible)return;const D=F(M).millisecond(0);t("pick",D,!0)},O=(M,D)=>{t("select-range",M,D),h.value=[M,D]},E=M=>{const D=[0,3].concat(T.value?[6]:[]),Y=["hours","minutes"].concat(T.value?["seconds"]:[]),se=(D.indexOf(h.value[0])+M+D.length)%D.length;$.start_emitSelectRange(Y[se])},N=M=>{const D=M.code,{left:Y,right:Z,up:se,down:ne}=ar;if([Y,Z].includes(D)){E(D===Y?-1:1),M.preventDefault();return}if([se,ne].includes(D)){const me=D===se?-1:1;$.start_scrollDown(me),M.preventDefault();return}},{timePickerOptions:$,onSetOption:L,getAvailableTime:B}=HV({getAvailableHours:u,getAvailableMinutes:c,getAvailableSeconds:d}),F=M=>B(M,r.datetimeRole||"",!0),R=M=>M?Ve(M,r.format).locale(m.value):null,H=M=>M?M.format(r.format):null,q=()=>Ve(l).locale(m.value);return t("set-picker-option",["isValidValue",w]),t("set-picker-option",["formatToString",H]),t("set-picker-option",["parseUserInput",R]),t("set-picker-option",["handleKeydownInput",N]),t("set-picker-option",["getRangeAvailableTime",F]),t("set-picker-option",["getDefaultValue",q]),(M,D)=>(G(),Le(ma,{name:_(y)},{default:ie(()=>[M.actualVisible||M.visible?(G(),le("div",{key:0,class:Q(_(p).b("panel"))},[K("div",{class:Q([_(p).be("panel","content"),{"has-seconds":_(T)}])},[ue(JV,{ref:"spinner",role:M.datetimeRole||"start","arrow-control":_(a),"show-seconds":_(T),"am-pm-mode":_(S),"spinner-date":M.parsedValue,"disabled-hours":_(s),"disabled-minutes":_(o),"disabled-seconds":_(i),onChange:f,onSetOption:_(L),onSelectRange:O},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),K("div",{class:Q(_(p).be("panel","footer"))},[K("button",{type:"button",class:Q([_(p).be("panel","btn"),"cancel"]),onClick:C},He(_(b)("el.datepicker.cancel")),3),K("button",{type:"button",class:Q([_(p).be("panel","btn"),"confirm"]),onClick:Y=>k()},He(_(b)("el.datepicker.confirm")),11,["onClick"])],2)],2)):Oe("v-if",!0)]),_:1},8,["name"]))}}),[["__file","panel-time-pick.vue"]]);const Xf=Symbol(),XV=vt({...XI,type:{type:Ye(String),default:"date"}}),QV=["date","dates","year","years","month","months","week","range"],ty=vt({disabledDate:{type:Ye(Function)},date:{type:Ye(Object),required:!0},minDate:{type:Ye(Object)},maxDate:{type:Ye(Object)},parsedValue:{type:Ye([Object,Array])},rangeState:{type:Ye(Object),default:()=>({endDate:null,selecting:!1})}}),ZI=vt({type:{type:Ye(String),required:!0,values:Wq},dateFormat:String,timeFormat:String,showNow:{type:Boolean,default:!0}}),ry=vt({unlinkPanels:Boolean,parsedValue:{type:Ye(Array)}}),ny=e=>({type:String,values:QV,default:e}),ZV=vt({...ZI,parsedValue:{type:Ye([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),vl=e=>{if(!Ue(e))return!1;const[t,r]=e;return Ve.isDayjs(t)&&Ve.isDayjs(r)&&t.isSameOrBefore(r)},ay=(e,{lang:t,unit:r,unlinkPanels:n})=>{let a;if(Ue(e)){let[s,o]=e.map(i=>Ve(i).locale(t));return n||(o=s.add(1,r)),[s,o]}else e?a=Ve(e):a=Ve();return a=a.locale(t),[a,a.add(1,r)]},eH=(e,t,{columnIndexOffset:r,startDate:n,nextEndDate:a,now:s,unit:o,relativeDateGetter:i,setCellMetadata:l,setRowMetadata:u})=>{for(let c=0;c<e.row;c++){const d=t[c];for(let p=0;p<e.column;p++){let b=d[p+r];b||(b={row:c,column:p,type:"normal",inRange:!1,start:!1,end:!1});const m=c*e.column+p,h=i(m);b.dayjs=h,b.date=h.toDate(),b.timestamp=h.valueOf(),b.type="normal",b.inRange=!!(n&&h.isSameOrAfter(n,o)&&a&&h.isSameOrBefore(a,o))||!!(n&&h.isSameOrBefore(n,o)&&a&&h.isSameOrAfter(a,o)),n!=null&&n.isSameOrAfter(a)?(b.start=!!a&&h.isSame(a,o),b.end=n&&h.isSame(n,o)):(b.start=!!n&&h.isSame(n,o),b.end=!!a&&h.isSame(a,o)),h.isSame(s,o)&&(b.type="today"),l==null||l(b,{rowIndex:c,columnIndex:p}),d[p+r]=b}u==null||u(d)}},Qf=(e,t,r)=>{const n=Ve().locale(r).startOf("month").month(t).year(e),a=n.daysInMonth();return CI(a).map(s=>n.add(s,"day").toDate())},tc=(e,t,r,n)=>{const a=Ve().year(e).month(t).startOf("month"),s=Qf(e,t,r).find(o=>!(n!=null&&n(o)));return s?Ve(s).locale(r):a.locale(r)},sy=(e,t,r)=>{const n=e.year();if(!(r!=null&&r(e.toDate())))return e.locale(t);const a=e.month();if(!Qf(n,a,t).every(r))return tc(n,a,t,r);for(let s=0;s<12;s++)if(!Qf(n,s,t).every(r))return tc(n,s,t,r);return e},tH=vt({...ty,cellClassName:{type:Ye(Function)},showWeekNumber:Boolean,selectionMode:ny("date")}),rH=["changerange","pick","select"],oy=(e="")=>["normal","today"].includes(e),nH=(e,t)=>{const{lang:r}=zr(),n=ee(),a=ee(),s=ee(),o=ee(),i=ee([[],[],[],[],[],[]]);let l=!1;const u=e.date.$locale().weekStart||7,c=e.date.locale("en").localeData().weekdaysShort().map(D=>D.toLowerCase()),d=W(()=>u>3?7-u:-u),p=W(()=>{const D=e.date.startOf("month");return D.subtract(D.day()||7,"day")}),b=W(()=>c.concat(c).slice(u,u+7)),m=W(()=>Xb(_(w)).some(D=>D.isCurrent)),h=W(()=>{const D=e.date.startOf("month"),Y=D.day()||7,Z=D.daysInMonth(),se=D.subtract(1,"month").daysInMonth();return{startOfMonthDay:Y,dateCountOfMonth:Z,dateCountOfLastMonth:se}}),v=W(()=>e.selectionMode==="dates"?na(e.parsedValue):[]),y=(D,{count:Y,rowIndex:Z,columnIndex:se})=>{const{startOfMonthDay:ne,dateCountOfMonth:me,dateCountOfLastMonth:ve}=_(h),We=_(d);if(Z>=0&&Z<=1){const Ke=ne+We<0?7+ne+We:ne+We;if(se+Z*7>=Ke)return D.text=Y,!0;D.text=ve-(Ke-se%7)+1+Z*7,D.type="prev-month"}else return Y<=me?D.text=Y:(D.text=Y-me,D.type="next-month"),!0;return!1},T=(D,{columnIndex:Y,rowIndex:Z},se)=>{const{disabledDate:ne,cellClassName:me}=e,ve=_(v),We=y(D,{count:se,rowIndex:Z,columnIndex:Y}),Ke=D.dayjs.toDate();return D.selected=ve.find(xe=>xe.isSame(D.dayjs,"day")),D.isSelected=!!D.selected,D.isCurrent=k(D),D.disabled=ne==null?void 0:ne(Ke),D.customClass=me==null?void 0:me(Ke),We},S=D=>{if(e.selectionMode==="week"){const[Y,Z]=e.showWeekNumber?[1,7]:[0,6],se=M(D[Y+1]);D[Y].inRange=se,D[Y].start=se,D[Z].inRange=se,D[Z].end=se}},w=W(()=>{const{minDate:D,maxDate:Y,rangeState:Z,showWeekNumber:se}=e,ne=_(d),me=_(i),ve="day";let We=1;if(se)for(let Ke=0;Ke<6;Ke++)me[Ke][0]||(me[Ke][0]={type:"week",text:_(p).add(Ke*7+1,ve).week()});return eH({row:6,column:7},me,{startDate:D,columnIndexOffset:se?1:0,nextEndDate:Z.endDate||Y||Z.selecting&&D||null,now:Ve().locale(_(r)).startOf(ve),unit:ve,relativeDateGetter:Ke=>_(p).add(Ke-ne,ve),setCellMetadata:(...Ke)=>{T(...Ke,We)&&(We+=1)},setRowMetadata:S}),me});tt(()=>e.date,async()=>{var D;(D=_(n))!=null&&D.contains(document.activeElement)&&(await xt(),await C())});const C=async()=>{var D;return(D=_(a))==null?void 0:D.focus()},k=D=>e.selectionMode==="date"&&oy(D.type)&&f(D,e.parsedValue),f=(D,Y)=>Y?Ve(Y).locale(_(r)).isSame(e.date.date(Number(D.text)),"day"):!1,O=(D,Y)=>{const Z=D*7+(Y-(e.showWeekNumber?1:0))-_(d);return _(p).add(Z,"day")},E=D=>{var Y;if(!e.rangeState.selecting)return;let Z=D.target;if(Z.tagName==="SPAN"&&(Z=(Y=Z.parentNode)==null?void 0:Y.parentNode),Z.tagName==="DIV"&&(Z=Z.parentNode),Z.tagName!=="TD")return;const se=Z.parentNode.rowIndex-1,ne=Z.cellIndex;_(w)[se][ne].disabled||(se!==_(s)||ne!==_(o))&&(s.value=se,o.value=ne,t("changerange",{selecting:!0,endDate:O(se,ne)}))},N=D=>!_(m)&&(D==null?void 0:D.text)===1&&D.type==="normal"||D.isCurrent,$=D=>{l||_(m)||e.selectionMode!=="date"||q(D,!0)},L=D=>{D.target.closest("td")&&(l=!0)},B=D=>{D.target.closest("td")&&(l=!1)},F=D=>{!e.rangeState.selecting||!e.minDate?(t("pick",{minDate:D,maxDate:null}),t("select",!0)):(D>=e.minDate?t("pick",{minDate:e.minDate,maxDate:D}):t("pick",{minDate:D,maxDate:e.minDate}),t("select",!1))},R=D=>{const Y=D.week(),Z=`${D.year()}w${Y}`;t("pick",{year:D.year(),week:Y,value:Z,date:D.startOf("week")})},H=(D,Y)=>{const Z=Y?na(e.parsedValue).filter(se=>(se==null?void 0:se.valueOf())!==D.valueOf()):na(e.parsedValue).concat([D]);t("pick",Z)},q=(D,Y=!1)=>{const Z=D.target.closest("td");if(!Z)return;const se=Z.parentNode.rowIndex-1,ne=Z.cellIndex,me=_(w)[se][ne];if(me.disabled||me.type==="week")return;const ve=O(se,ne);switch(e.selectionMode){case"range":{F(ve);break}case"date":{t("pick",ve,Y);break}case"week":{R(ve);break}case"dates":{H(ve,!!me.selected);break}}},M=D=>{if(e.selectionMode!=="week")return!1;let Y=e.date.startOf("day");if(D.type==="prev-month"&&(Y=Y.subtract(1,"month")),D.type==="next-month"&&(Y=Y.add(1,"month")),Y=Y.date(Number.parseInt(D.text,10)),e.parsedValue&&!Ue(e.parsedValue)){const Z=(e.parsedValue.day()-u+7)%7-1;return e.parsedValue.subtract(Z,"day").isSame(Y,"day")}return!1};return{WEEKS:b,rows:w,tbodyRef:n,currentCellRef:a,focus:C,isCurrent:k,isWeekActive:M,isSelectedCell:N,handlePickDate:q,handleMouseUp:B,handleMouseDown:L,handleMouseMove:E,handleFocus:$}},aH=(e,{isCurrent:t,isWeekActive:r})=>{const n=ct("date-table"),{t:a}=zr(),s=W(()=>[n.b(),{"is-week-mode":e.selectionMode==="week"}]),o=W(()=>a("el.datepicker.dateTablePrompt")),i=W(()=>a("el.datepicker.week"));return{tableKls:s,tableLabel:o,weekLabel:i,getCellClasses:c=>{const d=[];return oy(c.type)&&!c.disabled?(d.push("available"),c.type==="today"&&d.push("today")):d.push(c.type),t(c)&&d.push("current"),c.inRange&&(oy(c.type)||e.selectionMode==="week")&&(d.push("in-range"),c.start&&d.push("start-date"),c.end&&d.push("end-date")),c.disabled&&d.push("disabled"),c.selected&&d.push("selected"),c.customClass&&d.push(c.customClass),d.join(" ")},getRowKls:c=>[n.e("row"),{current:r(c)}],t:a}},sH=vt({cell:{type:Ye(Object)}});var iy=Te({name:"ElDatePickerCell",props:sH,setup(e){const t=ct("date-table-cell"),{slots:r}=ft(Xf);return()=>{const{cell:n}=e;return De(r,"default",{...n},()=>{var a;return[ue("div",{class:t.b()},[ue("span",{class:t.e("text")},[(a=n==null?void 0:n.renderText)!=null?a:n==null?void 0:n.text])])]})}}}),ly=_t(Te({__name:"basic-date-table",props:tH,emits:rH,setup(e,{expose:t,emit:r}){const n=e,{WEEKS:a,rows:s,tbodyRef:o,currentCellRef:i,focus:l,isCurrent:u,isWeekActive:c,isSelectedCell:d,handlePickDate:p,handleMouseUp:b,handleMouseDown:m,handleMouseMove:h,handleFocus:v}=nH(n,r),{tableLabel:y,tableKls:T,weekLabel:S,getCellClasses:w,getRowKls:C,t:k}=aH(n,{isCurrent:u,isWeekActive:c});return t({focus:l}),(f,O)=>(G(),le("table",{"aria-label":_(y),class:Q(_(T)),cellspacing:"0",cellpadding:"0",role:"grid",onClick:_(p),onMousemove:_(h),onMousedown:Pt(_(m),["prevent"]),onMouseup:_(b)},[K("tbody",{ref_key:"tbodyRef",ref:o},[K("tr",null,[f.showWeekNumber?(G(),le("th",{key:0,scope:"col"},He(_(S)),1)):Oe("v-if",!0),(G(!0),le(pt,null,$r(_(a),(E,N)=>(G(),le("th",{key:N,"aria-label":_(k)("el.datepicker.weeksFull."+E),scope:"col"},He(_(k)("el.datepicker.weeks."+E)),9,["aria-label"]))),128))]),(G(!0),le(pt,null,$r(_(s),(E,N)=>(G(),le("tr",{key:N,class:Q(_(C)(E[1]))},[(G(!0),le(pt,null,$r(E,($,L)=>(G(),le("td",{key:`${N}.${L}`,ref_for:!0,ref:B=>_(d)($)&&(i.value=B),class:Q(_(w)($)),"aria-current":$.isCurrent?"date":void 0,"aria-selected":$.isCurrent,tabindex:_(d)($)?0:-1,onFocus:_(v)},[ue(_(iy),{cell:$},null,8,["cell"])],42,["aria-current","aria-selected","tabindex","onFocus"]))),128))],2))),128))],512)],42,["aria-label","onClick","onMousemove","onMousedown","onMouseup"]))}}),[["__file","basic-date-table.vue"]]);const oH=vt({...ty,selectionMode:ny("month")});var uy=_t(Te({__name:"basic-month-table",props:oH,emits:["changerange","pick","select"],setup(e,{expose:t,emit:r}){const n=e,a=ct("month-table"),{t:s,lang:o}=zr(),i=ee(),l=ee(),u=ee(n.date.locale("en").localeData().monthsShort().map(S=>S.toLowerCase())),c=ee([[],[],[]]),d=ee(),p=ee(),b=W(()=>{var S,w;const C=c.value,k=Ve().locale(o.value).startOf("month");for(let f=0;f<3;f++){const O=C[f];for(let E=0;E<4;E++){const N=O[E]||(O[E]={row:f,column:E,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});N.type="normal";const $=f*4+E,L=n.date.startOf("year").month($),B=n.rangeState.endDate||n.maxDate||n.rangeState.selecting&&n.minDate||null;N.inRange=!!(n.minDate&&L.isSameOrAfter(n.minDate,"month")&&B&&L.isSameOrBefore(B,"month"))||!!(n.minDate&&L.isSameOrBefore(n.minDate,"month")&&B&&L.isSameOrAfter(B,"month")),(S=n.minDate)!=null&&S.isSameOrAfter(B)?(N.start=!!(B&&L.isSame(B,"month")),N.end=n.minDate&&L.isSame(n.minDate,"month")):(N.start=!!(n.minDate&&L.isSame(n.minDate,"month")),N.end=!!(B&&L.isSame(B,"month"))),k.isSame(L)&&(N.type="today"),N.text=$,N.disabled=((w=n.disabledDate)==null?void 0:w.call(n,L.toDate()))||!1}}return C}),m=()=>{var S;(S=l.value)==null||S.focus()},h=S=>{const w={},C=n.date.year(),k=new Date,f=S.text;return w.disabled=n.disabledDate?Qf(C,f,o.value).every(n.disabledDate):!1,w.current=na(n.parsedValue).findIndex(O=>Ve.isDayjs(O)&&O.year()===C&&O.month()===f)>=0,w.today=k.getFullYear()===C&&k.getMonth()===f,S.inRange&&(w["in-range"]=!0,S.start&&(w["start-date"]=!0),S.end&&(w["end-date"]=!0)),w},v=S=>{const w=n.date.year(),C=S.text;return na(n.date).findIndex(k=>k.year()===w&&k.month()===C)>=0},y=S=>{var w;if(!n.rangeState.selecting)return;let C=S.target;if(C.tagName==="SPAN"&&(C=(w=C.parentNode)==null?void 0:w.parentNode),C.tagName==="DIV"&&(C=C.parentNode),C.tagName!=="TD")return;const k=C.parentNode.rowIndex,f=C.cellIndex;b.value[k][f].disabled||(k!==d.value||f!==p.value)&&(d.value=k,p.value=f,r("changerange",{selecting:!0,endDate:n.date.startOf("year").month(k*4+f)}))},T=S=>{var w;const C=(w=S.target)==null?void 0:w.closest("td");if((C==null?void 0:C.tagName)!=="TD"||La(C,"disabled"))return;const k=C.cellIndex,O=C.parentNode.rowIndex*4+k,E=n.date.startOf("year").month(O);if(n.selectionMode==="months"){if(S.type==="keydown"){r("pick",na(n.parsedValue),!1);return}const N=tc(n.date.year(),O,o.value,n.disabledDate),$=La(C,"current")?na(n.parsedValue).filter(L=>(L==null?void 0:L.month())!==N.month()):na(n.parsedValue).concat([Ve(N)]);r("pick",$)}else n.selectionMode==="range"?n.rangeState.selecting?(n.minDate&&E>=n.minDate?r("pick",{minDate:n.minDate,maxDate:E}):r("pick",{minDate:E,maxDate:n.minDate}),r("select",!1)):(r("pick",{minDate:E,maxDate:null}),r("select",!0)):r("pick",O)};return tt(()=>n.date,async()=>{var S,w;(S=i.value)!=null&&S.contains(document.activeElement)&&(await xt(),(w=l.value)==null||w.focus())}),t({focus:m}),(S,w)=>(G(),le("table",{role:"grid","aria-label":_(s)("el.datepicker.monthTablePrompt"),class:Q(_(a).b()),onClick:T,onMousemove:y},[K("tbody",{ref_key:"tbodyRef",ref:i},[(G(!0),le(pt,null,$r(_(b),(C,k)=>(G(),le("tr",{key:k},[(G(!0),le(pt,null,$r(C,(f,O)=>(G(),le("td",{key:O,ref_for:!0,ref:E=>v(f)&&(l.value=E),class:Q(h(f)),"aria-selected":`${v(f)}`,"aria-label":_(s)(`el.datepicker.month${+f.text+1}`),tabindex:v(f)?0:-1,onKeydown:[Wr(Pt(T,["prevent","stop"]),["space"]),Wr(Pt(T,["prevent","stop"]),["enter"])]},[ue(_(iy),{cell:{...f,renderText:_(s)("el.datepicker.months."+u.value[f.text])}},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}}),[["__file","basic-month-table.vue"]]);const iH=vt({...ty,selectionMode:ny("year")});var cy=_t(Te({__name:"basic-year-table",props:iH,emits:["changerange","pick","select"],setup(e,{expose:t,emit:r}){const n=e,a=(w,C)=>{const k=Ve(String(w)).locale(C).startOf("year"),O=k.endOf("year").dayOfYear();return CI(O).map(E=>k.add(E,"day").toDate())},s=ct("year-table"),{t:o,lang:i}=zr(),l=ee(),u=ee(),c=W(()=>Math.floor(n.date.year()/10)*10),d=ee([[],[],[]]),p=ee(),b=ee(),m=W(()=>{var w;const C=d.value,k=Ve().locale(i.value).startOf("year");for(let f=0;f<3;f++){const O=C[f];for(let E=0;E<4&&!(f*4+E>=10);E++){let N=O[E];N||(N={row:f,column:E,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1}),N.type="normal";const $=f*4+E+c.value,L=Ve().year($),B=n.rangeState.endDate||n.maxDate||n.rangeState.selecting&&n.minDate||null;N.inRange=!!(n.minDate&&L.isSameOrAfter(n.minDate,"year")&&B&&L.isSameOrBefore(B,"year"))||!!(n.minDate&&L.isSameOrBefore(n.minDate,"year")&&B&&L.isSameOrAfter(B,"year")),(w=n.minDate)!=null&&w.isSameOrAfter(B)?(N.start=!!(B&&L.isSame(B,"year")),N.end=!!(n.minDate&&L.isSame(n.minDate,"year"))):(N.start=!!(n.minDate&&L.isSame(n.minDate,"year")),N.end=!!(B&&L.isSame(B,"year"))),k.isSame(L)&&(N.type="today"),N.text=$;const R=L.toDate();N.disabled=n.disabledDate&&n.disabledDate(R)||!1,O[E]=N}}return C}),h=()=>{var w;(w=u.value)==null||w.focus()},v=w=>{const C={},k=Ve().locale(i.value),f=w.text;return C.disabled=n.disabledDate?a(f,i.value).every(n.disabledDate):!1,C.today=k.year()===f,C.current=na(n.parsedValue).findIndex(O=>O.year()===f)>=0,w.inRange&&(C["in-range"]=!0,w.start&&(C["start-date"]=!0),w.end&&(C["end-date"]=!0)),C},y=w=>{const C=w.text;return na(n.date).findIndex(k=>k.year()===C)>=0},T=w=>{var C;const k=(C=w.target)==null?void 0:C.closest("td");if(!k||!k.textContent||La(k,"disabled"))return;const f=k.cellIndex,E=k.parentNode.rowIndex*4+f+c.value,N=Ve().year(E);if(n.selectionMode==="range")n.rangeState.selecting?(n.minDate&&N>=n.minDate?r("pick",{minDate:n.minDate,maxDate:N}):r("pick",{minDate:N,maxDate:n.minDate}),r("select",!1)):(r("pick",{minDate:N,maxDate:null}),r("select",!0));else if(n.selectionMode==="years"){if(w.type==="keydown"){r("pick",na(n.parsedValue),!1);return}const $=sy(N.startOf("year"),i.value,n.disabledDate),L=La(k,"current")?na(n.parsedValue).filter(B=>(B==null?void 0:B.year())!==E):na(n.parsedValue).concat([$]);r("pick",L)}else r("pick",E)},S=w=>{var C;if(!n.rangeState.selecting)return;const k=(C=w.target)==null?void 0:C.closest("td");if(!k)return;const f=k.parentNode.rowIndex,O=k.cellIndex;m.value[f][O].disabled||(f!==p.value||O!==b.value)&&(p.value=f,b.value=O,r("changerange",{selecting:!0,endDate:Ve().year(c.value).add(f*4+O,"year")}))};return tt(()=>n.date,async()=>{var w,C;(w=l.value)!=null&&w.contains(document.activeElement)&&(await xt(),(C=u.value)==null||C.focus())}),t({focus:h}),(w,C)=>(G(),le("table",{role:"grid","aria-label":_(o)("el.datepicker.yearTablePrompt"),class:Q(_(s).b()),onClick:T,onMousemove:S},[K("tbody",{ref_key:"tbodyRef",ref:l},[(G(!0),le(pt,null,$r(_(m),(k,f)=>(G(),le("tr",{key:f},[(G(!0),le(pt,null,$r(k,(O,E)=>(G(),le("td",{key:`${f}_${E}`,ref_for:!0,ref:N=>y(O)&&(u.value=N),class:Q(["available",v(O)]),"aria-selected":y(O),"aria-label":String(O.text),tabindex:y(O)?0:-1,onKeydown:[Wr(Pt(T,["prevent","stop"]),["space"]),Wr(Pt(T,["prevent","stop"]),["enter"])]},[ue(_(iy),{cell:O},null,8,["cell"])],42,["aria-selected","aria-label","tabindex","onKeydown"]))),128))]))),128))],512)],42,["aria-label"]))}}),[["__file","basic-year-table.vue"]]),lH=_t(Te({__name:"panel-date-pick",props:ZV,emits:["pick","set-picker-option","panel-change"],setup(e,{emit:t}){const r=e,n=(ce,fe,J)=>!0,a=ct("picker-panel"),s=ct("date-picker"),o=Ud(),i=Ra(),{t:l,lang:u}=zr(),c=ft("EP_PICKER_BASE"),d=ft(Nf),{shortcuts:p,disabledDate:b,cellClassName:m,defaultTime:h}=c.props,v=Nr(c.props,"defaultValue"),y=ee(),T=ee(Ve().locale(u.value)),S=ee(!1);let w=!1;const C=W(()=>Ve(h).locale(u.value)),k=W(()=>T.value.month()),f=W(()=>T.value.year()),O=ee([]),E=ee(null),N=ee(null),$=ce=>O.value.length>0?n(ce,O.value,r.format||"HH:mm:ss"):!0,L=ce=>h&&!Re.value&&!S.value&&!w?C.value.year(ce.year()).month(ce.month()).date(ce.date()):Ke.value?ce.millisecond(0):ce.startOf("day"),B=(ce,...fe)=>{if(!ce)t("pick",ce,...fe);else if(Ue(ce)){const J=ce.map(L);t("pick",J,...fe)}else t("pick",L(ce),...fe);E.value=null,N.value=null,S.value=!1,w=!1},F=async(ce,fe)=>{if(Y.value==="date"){ce=ce;let J=r.parsedValue?r.parsedValue.year(ce.year()).month(ce.month()).date(ce.date()):ce;$(J),T.value=J,B(J,Ke.value||fe),r.type==="datetime"&&(await xt(),bt())}else Y.value==="week"?B(ce.date):Y.value==="dates"&&B(ce,!0)},R=ce=>{const fe=ce?"add":"subtract";T.value=T.value[fe](1,"month"),mr("month")},H=ce=>{const fe=T.value,J=ce?"add":"subtract";T.value=q.value==="year"?fe[J](10,"year"):fe[J](1,"year"),mr("year")},q=ee("date"),M=W(()=>{const ce=l("el.datepicker.year");if(q.value==="year"){const fe=Math.floor(f.value/10)*10;return ce?`${fe} ${ce} - ${fe+9} ${ce}`:`${fe} - ${fe+9}`}return`${f.value} ${ce}`}),D=ce=>{const fe=et(ce.value)?ce.value():ce.value;if(fe){w=!0,B(Ve(fe).locale(u.value));return}ce.onClick&&ce.onClick({attrs:o,slots:i,emit:t})},Y=W(()=>{const{type:ce}=r;return["week","month","months","year","years","dates"].includes(ce)?ce:"date"}),Z=W(()=>Y.value==="dates"||Y.value==="months"||Y.value==="years"),se=W(()=>Y.value==="date"?q.value:Y.value),ne=W(()=>!!p.length),me=async(ce,fe)=>{Y.value==="month"?(T.value=tc(T.value.year(),ce,u.value,b),B(T.value,!1)):Y.value==="months"?B(ce,fe??!0):(T.value=tc(T.value.year(),ce,u.value,b),q.value="date",["month","year","date","week"].includes(Y.value)&&(B(T.value,!0),await xt(),bt())),mr("month")},ve=async(ce,fe)=>{if(Y.value==="year"){const J=T.value.startOf("year").year(ce);T.value=sy(J,u.value,b),B(T.value,!1)}else if(Y.value==="years")B(ce,fe??!0);else{const J=T.value.year(ce);T.value=sy(J,u.value,b),q.value="month",["month","year","date","week"].includes(Y.value)&&(B(T.value,!0),await xt(),bt())}mr("year")},We=async ce=>{q.value=ce,await xt(),bt()},Ke=W(()=>r.type==="datetime"||r.type==="datetimerange"),xe=W(()=>{const ce=Ke.value||Y.value==="dates",fe=Y.value==="years",J=Y.value==="months",V=q.value==="date",_e=q.value==="year",Xe=q.value==="month";return ce&&V||fe&&_e||J&&Xe}),ze=W(()=>b?r.parsedValue?Ue(r.parsedValue)?b(r.parsedValue[0].toDate()):b(r.parsedValue.toDate()):!0:!1),Ne=()=>{if(Z.value)B(r.parsedValue);else{let ce=r.parsedValue;if(!ce){const fe=Ve(h).locale(u.value),J=Et();ce=fe.year(J.year()).month(J.month()).date(J.date())}T.value=ce,B(ce)}},rt=W(()=>b?b(Ve().locale(u.value).toDate()):!1),X=()=>{const fe=Ve().locale(u.value).toDate();S.value=!0,(!b||!b(fe))&&$(fe)&&(T.value=Ve().locale(u.value),B(T.value))},re=W(()=>r.timeFormat||II(r.format)),ge=W(()=>r.dateFormat||kI(r.format)),Re=W(()=>{if(N.value)return N.value;if(!(!r.parsedValue&&!v.value))return(r.parsedValue||T.value).format(re.value)}),Se=W(()=>{if(E.value)return E.value;if(!(!r.parsedValue&&!v.value))return(r.parsedValue||T.value).format(ge.value)}),ke=ee(!1),qe=()=>{ke.value=!0},Pe=()=>{ke.value=!1},Me=ce=>({hour:ce.hour(),minute:ce.minute(),second:ce.second(),year:ce.year(),month:ce.month(),date:ce.date()}),$e=(ce,fe,J)=>{const{hour:V,minute:_e,second:Xe}=Me(ce),dt=r.parsedValue?r.parsedValue.hour(V).minute(_e).second(Xe):ce;T.value=dt,B(T.value,!0),J||(ke.value=fe)},nt=ce=>{const fe=Ve(ce,re.value).locale(u.value);if(fe.isValid()&&$(fe)){const{year:J,month:V,date:_e}=Me(T.value);T.value=fe.year(J).month(V).date(_e),N.value=null,ke.value=!1,B(T.value,!0)}},Ge=ce=>{const fe=Ve(ce,ge.value).locale(u.value);if(fe.isValid()){if(b&&b(fe.toDate()))return;const{hour:J,minute:V,second:_e}=Me(T.value);T.value=fe.hour(J).minute(V).second(_e),E.value=null,B(T.value,!0)}},ye=ce=>Ve.isDayjs(ce)&&ce.isValid()&&(b?!b(ce.toDate()):!0),Ce=ce=>Ue(ce)?ce.map(fe=>fe.format(r.format)):ce.format(r.format),it=ce=>Ve(ce,r.format).locale(u.value),Et=()=>{const ce=Ve(v.value).locale(u.value);if(!v.value){const fe=C.value;return Ve().hour(fe.hour()).minute(fe.minute()).second(fe.second()).locale(u.value)}return ce},bt=()=>{var ce;["week","month","year","date"].includes(Y.value)&&((ce=y.value)==null||ce.focus())},pr=()=>{bt(),Y.value==="week"&&kr(ar.down)},Ot=ce=>{const{code:fe}=ce;[ar.up,ar.down,ar.left,ar.right,ar.home,ar.end,ar.pageUp,ar.pageDown].includes(fe)&&(kr(fe),ce.stopPropagation(),ce.preventDefault()),[ar.enter,ar.space,ar.numpadEnter].includes(fe)&&E.value===null&&N.value===null&&(ce.preventDefault(),B(T.value,!1))},kr=ce=>{var fe;const{up:J,down:V,left:_e,right:Xe,home:dt,end:gt,pageUp:gr,pageDown:Ir}=ar,Ar={year:{[J]:-4,[V]:4,[_e]:-1,[Xe]:1,offset:(Lt,sr)=>Lt.setFullYear(Lt.getFullYear()+sr)},month:{[J]:-4,[V]:4,[_e]:-1,[Xe]:1,offset:(Lt,sr)=>Lt.setMonth(Lt.getMonth()+sr)},week:{[J]:-1,[V]:1,[_e]:-1,[Xe]:1,offset:(Lt,sr)=>Lt.setDate(Lt.getDate()+sr*7)},date:{[J]:-7,[V]:7,[_e]:-1,[Xe]:1,[dt]:Lt=>-Lt.getDay(),[gt]:Lt=>-Lt.getDay()+6,[gr]:Lt=>-new Date(Lt.getFullYear(),Lt.getMonth(),0).getDate(),[Ir]:Lt=>new Date(Lt.getFullYear(),Lt.getMonth()+1,0).getDate(),offset:(Lt,sr)=>Lt.setDate(Lt.getDate()+sr)}},Gr=T.value.toDate();for(;Math.abs(T.value.diff(Gr,"year",!0))<1;){const Lt=Ar[se.value];if(!Lt)return;if(Lt.offset(Gr,et(Lt[ce])?Lt[ce](Gr):(fe=Lt[ce])!=null?fe:0),b&&b(Gr))break;const sr=Ve(Gr).locale(u.value);T.value=sr,t("pick",sr,!0);break}},mr=ce=>{t("panel-change",T.value.toDate(),ce,q.value)};return tt(()=>Y.value,ce=>{if(["month","year"].includes(ce)){q.value=ce;return}else if(ce==="years"){q.value="year";return}else if(ce==="months"){q.value="month";return}q.value="date"},{immediate:!0}),tt(()=>q.value,()=>{d==null||d.updatePopper()}),tt(()=>v.value,ce=>{ce&&(T.value=Et())},{immediate:!0}),tt(()=>r.parsedValue,ce=>{if(ce){if(Z.value||Ue(ce))return;T.value=ce}else T.value=Et()},{immediate:!0}),t("set-picker-option",["isValidValue",ye]),t("set-picker-option",["formatToString",Ce]),t("set-picker-option",["parseUserInput",it]),t("set-picker-option",["handleFocusPicker",pr]),(ce,fe)=>(G(),le("div",{class:Q([_(a).b(),_(s).b(),{"has-sidebar":ce.$slots.sidebar||_(ne),"has-time":_(Ke)}])},[K("div",{class:Q(_(a).e("body-wrapper"))},[De(ce.$slots,"sidebar",{class:Q(_(a).e("sidebar"))}),_(ne)?(G(),le("div",{key:0,class:Q(_(a).e("sidebar"))},[(G(!0),le(pt,null,$r(_(p),(J,V)=>(G(),le("button",{key:V,type:"button",class:Q(_(a).e("shortcut")),onClick:_e=>D(J)},He(J.text),11,["onClick"]))),128))],2)):Oe("v-if",!0),K("div",{class:Q(_(a).e("body"))},[_(Ke)?(G(),le("div",{key:0,class:Q(_(s).e("time-header"))},[K("span",{class:Q(_(s).e("editor-wrap"))},[ue(_(Hs),{placeholder:_(l)("el.datepicker.selectDate"),"model-value":_(Se),size:"small","validate-event":!1,onInput:J=>E.value=J,onChange:Ge},null,8,["placeholder","model-value","onInput"])],2),qt((G(),le("span",{class:Q(_(s).e("editor-wrap"))},[ue(_(Hs),{placeholder:_(l)("el.datepicker.selectTime"),"model-value":_(Re),size:"small","validate-event":!1,onFocus:qe,onInput:J=>N.value=J,onChange:nt},null,8,["placeholder","model-value","onInput"]),ue(_(ey),{visible:ke.value,format:_(re),"parsed-value":T.value,onPick:$e},null,8,["visible","format","parsed-value"])],2)),[[_(ec),Pe]])],2)):Oe("v-if",!0),qt(K("div",{class:Q([_(s).e("header"),(q.value==="year"||q.value==="month")&&_(s).e("header--bordered")])},[K("span",{class:Q(_(s).e("prev-btn"))},[K("button",{type:"button","aria-label":_(l)("el.datepicker.prevYear"),class:Q(["d-arrow-left",_(a).e("icon-btn")]),onClick:J=>H(!1)},[De(ce.$slots,"prev-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(oi))]),_:1})])],10,["aria-label","onClick"]),qt(K("button",{type:"button","aria-label":_(l)("el.datepicker.prevMonth"),class:Q([_(a).e("icon-btn"),"arrow-left"]),onClick:J=>R(!1)},[De(ce.$slots,"prev-month",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(Cv))]),_:1})])],10,["aria-label","onClick"]),[[Sr,q.value==="date"]])],2),K("span",{role:"button",class:Q(_(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Wr(J=>We("year"),["enter"]),onClick:J=>We("year")},He(_(M)),43,["onKeydown","onClick"]),qt(K("span",{role:"button","aria-live":"polite",tabindex:"0",class:Q([_(s).e("header-label"),{active:q.value==="month"}]),onKeydown:Wr(J=>We("month"),["enter"]),onClick:J=>We("month")},He(_(l)(`el.datepicker.month${_(k)+1}`)),43,["onKeydown","onClick"]),[[Sr,q.value==="date"]]),K("span",{class:Q(_(s).e("next-btn"))},[qt(K("button",{type:"button","aria-label":_(l)("el.datepicker.nextMonth"),class:Q([_(a).e("icon-btn"),"arrow-right"]),onClick:J=>R(!0)},[De(ce.$slots,"next-month",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(nl))]),_:1})])],10,["aria-label","onClick"]),[[Sr,q.value==="date"]]),K("button",{type:"button","aria-label":_(l)("el.datepicker.nextYear"),class:Q([_(a).e("icon-btn"),"d-arrow-right"]),onClick:J=>H(!0)},[De(ce.$slots,"next-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(ii))]),_:1})])],10,["aria-label","onClick"])],2)],2),[[Sr,q.value!=="time"]]),K("div",{class:Q(_(a).e("content")),onKeydown:Ot},[q.value==="date"?(G(),Le(ly,{key:0,ref_key:"currentViewRef",ref:y,"selection-mode":_(Y),date:T.value,"parsed-value":ce.parsedValue,"disabled-date":_(b),"cell-class-name":_(m),onPick:F},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Oe("v-if",!0),q.value==="year"?(G(),Le(cy,{key:1,ref_key:"currentViewRef",ref:y,"selection-mode":_(Y),date:T.value,"disabled-date":_(b),"parsed-value":ce.parsedValue,onPick:ve},null,8,["selection-mode","date","disabled-date","parsed-value"])):Oe("v-if",!0),q.value==="month"?(G(),Le(uy,{key:2,ref_key:"currentViewRef",ref:y,"selection-mode":_(Y),date:T.value,"parsed-value":ce.parsedValue,"disabled-date":_(b),onPick:me},null,8,["selection-mode","date","parsed-value","disabled-date"])):Oe("v-if",!0)],34)],2)],2),qt(K("div",{class:Q(_(a).e("footer"))},[qt(ue(_(yn),{text:"",size:"small",class:Q(_(a).e("link-btn")),disabled:_(rt),onClick:X},{default:ie(()=>[ot(He(_(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[Sr,!_(Z)&&ce.showNow]]),ue(_(yn),{plain:"",size:"small",class:Q(_(a).e("link-btn")),disabled:_(ze),onClick:Ne},{default:ie(()=>[ot(He(_(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[Sr,_(xe)]])],2))}}),[["__file","panel-date-pick.vue"]]);const uH=vt({...ZI,...ry,visible:Boolean}),eA=e=>{const{emit:t}=Vt(),r=Ud(),n=Ra();return s=>{const o=et(s.value)?s.value():s.value;if(o){t("pick",[Ve(o[0]).locale(e.value),Ve(o[1]).locale(e.value)]);return}s.onClick&&s.onClick({attrs:r,slots:n,emit:t})}},tA=(e,{defaultValue:t,leftDate:r,rightDate:n,unit:a,onParsedValueChanged:s})=>{const{emit:o}=Vt(),{pickerNs:i}=ft(Xf),l=ct("date-range-picker"),{t:u,lang:c}=zr(),d=eA(c),p=ee(),b=ee(),m=ee({endDate:null,selecting:!1}),h=w=>{m.value=w},v=(w=!1)=>{const C=_(p),k=_(b);vl([C,k])&&o("pick",[C,k],w)},y=w=>{m.value.selecting=w,w||(m.value.endDate=null)},T=w=>{if(Ue(w)&&w.length===2){const[C,k]=w;p.value=C,r.value=C,b.value=k,s(_(p),_(b))}else S()},S=()=>{const[w,C]=ay(_(t),{lang:_(c),unit:a,unlinkPanels:e.unlinkPanels});p.value=void 0,b.value=void 0,r.value=w,n.value=C};return tt(t,w=>{w&&S()},{immediate:!0}),tt(()=>e.parsedValue,T,{immediate:!0}),{minDate:p,maxDate:b,rangeState:m,lang:c,ppNs:i,drpNs:l,handleChangeRange:h,handleRangeConfirm:v,handleShortcutClick:d,onSelect:y,onReset:T,t:u}},Zf="month";var cH=_t(Te({__name:"panel-date-range",props:uH,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(e,{emit:t}){const r=e,n=ft("EP_PICKER_BASE"),{disabledDate:a,cellClassName:s,defaultTime:o,clearable:i}=n.props,l=Nr(n.props,"format"),u=Nr(n.props,"shortcuts"),c=Nr(n.props,"defaultValue"),{lang:d}=zr(),p=ee(Ve().locale(d.value)),b=ee(Ve().locale(d.value).add(1,Zf)),{minDate:m,maxDate:h,rangeState:v,ppNs:y,drpNs:T,handleChangeRange:S,handleRangeConfirm:w,handleShortcutClick:C,onSelect:k,onReset:f,t:O}=tA(r,{defaultValue:c,leftDate:p,rightDate:b,unit:Zf,onParsedValueChanged:ce});tt(()=>r.visible,fe=>{!fe&&v.value.selecting&&(f(r.parsedValue),k(!1))});const E=ee({min:null,max:null}),N=ee({min:null,max:null}),$=W(()=>`${p.value.year()} ${O("el.datepicker.year")} ${O(`el.datepicker.month${p.value.month()+1}`)}`),L=W(()=>`${b.value.year()} ${O("el.datepicker.year")} ${O(`el.datepicker.month${b.value.month()+1}`)}`),B=W(()=>p.value.year()),F=W(()=>p.value.month()),R=W(()=>b.value.year()),H=W(()=>b.value.month()),q=W(()=>!!u.value.length),M=W(()=>E.value.min!==null?E.value.min:m.value?m.value.format(ne.value):""),D=W(()=>E.value.max!==null?E.value.max:h.value||m.value?(h.value||m.value).format(ne.value):""),Y=W(()=>N.value.min!==null?N.value.min:m.value?m.value.format(se.value):""),Z=W(()=>N.value.max!==null?N.value.max:h.value||m.value?(h.value||m.value).format(se.value):""),se=W(()=>r.timeFormat||II(l.value)),ne=W(()=>r.dateFormat||kI(l.value)),me=fe=>vl(fe)&&(a?!a(fe[0].toDate())&&!a(fe[1].toDate()):!0),ve=()=>{p.value=p.value.subtract(1,"year"),r.unlinkPanels||(b.value=p.value.add(1,"month")),re("year")},We=()=>{p.value=p.value.subtract(1,"month"),r.unlinkPanels||(b.value=p.value.add(1,"month")),re("month")},Ke=()=>{r.unlinkPanels?b.value=b.value.add(1,"year"):(p.value=p.value.add(1,"year"),b.value=p.value.add(1,"month")),re("year")},xe=()=>{r.unlinkPanels?b.value=b.value.add(1,"month"):(p.value=p.value.add(1,"month"),b.value=p.value.add(1,"month")),re("month")},ze=()=>{p.value=p.value.add(1,"year"),re("year")},Ne=()=>{p.value=p.value.add(1,"month"),re("month")},rt=()=>{b.value=b.value.subtract(1,"year"),re("year")},X=()=>{b.value=b.value.subtract(1,"month"),re("month")},re=fe=>{t("panel-change",[p.value.toDate(),b.value.toDate()],fe)},ge=W(()=>{const fe=(F.value+1)%12,J=F.value+1>=12?1:0;return r.unlinkPanels&&new Date(B.value+J,fe)<new Date(R.value,H.value)}),Re=W(()=>r.unlinkPanels&&R.value*12+H.value-(B.value*12+F.value+1)>=12),Se=W(()=>!(m.value&&h.value&&!v.value.selecting&&vl([m.value,h.value]))),ke=W(()=>r.type==="datetime"||r.type==="datetimerange"),qe=(fe,J)=>{if(fe)return o?Ve(o[J]||o).locale(d.value).year(fe.year()).month(fe.month()).date(fe.date()):fe},Pe=(fe,J=!0)=>{const V=fe.minDate,_e=fe.maxDate,Xe=qe(V,0),dt=qe(_e,1);h.value===dt&&m.value===Xe||(t("calendar-change",[V.toDate(),_e&&_e.toDate()]),h.value=dt,m.value=Xe,!(!J||ke.value)&&w())},Me=ee(!1),$e=ee(!1),nt=()=>{Me.value=!1},Ge=()=>{$e.value=!1},ye=(fe,J)=>{E.value[J]=fe;const V=Ve(fe,ne.value).locale(d.value);if(V.isValid()){if(a&&a(V.toDate()))return;J==="min"?(p.value=V,m.value=(m.value||p.value).year(V.year()).month(V.month()).date(V.date()),!r.unlinkPanels&&(!h.value||h.value.isBefore(m.value))&&(b.value=V.add(1,"month"),h.value=m.value.add(1,"month"))):(b.value=V,h.value=(h.value||b.value).year(V.year()).month(V.month()).date(V.date()),!r.unlinkPanels&&(!m.value||m.value.isAfter(h.value))&&(p.value=V.subtract(1,"month"),m.value=h.value.subtract(1,"month")))}},Ce=(fe,J)=>{E.value[J]=null},it=(fe,J)=>{N.value[J]=fe;const V=Ve(fe,se.value).locale(d.value);V.isValid()&&(J==="min"?(Me.value=!0,m.value=(m.value||p.value).hour(V.hour()).minute(V.minute()).second(V.second())):($e.value=!0,h.value=(h.value||b.value).hour(V.hour()).minute(V.minute()).second(V.second()),b.value=h.value))},Et=(fe,J)=>{N.value[J]=null,J==="min"?(p.value=m.value,Me.value=!1,(!h.value||h.value.isBefore(m.value))&&(h.value=m.value)):(b.value=h.value,$e.value=!1,h.value&&h.value.isBefore(m.value)&&(m.value=h.value))},bt=(fe,J,V)=>{N.value.min||(fe&&(p.value=fe,m.value=(m.value||p.value).hour(fe.hour()).minute(fe.minute()).second(fe.second())),V||(Me.value=J),(!h.value||h.value.isBefore(m.value))&&(h.value=m.value,b.value=fe))},pr=(fe,J,V)=>{N.value.max||(fe&&(b.value=fe,h.value=(h.value||b.value).hour(fe.hour()).minute(fe.minute()).second(fe.second())),V||($e.value=J),h.value&&h.value.isBefore(m.value)&&(m.value=h.value))},Ot=()=>{p.value=ay(_(c),{lang:_(d),unit:"month",unlinkPanels:r.unlinkPanels})[0],b.value=p.value.add(1,"month"),h.value=void 0,m.value=void 0,t("pick",null)},kr=fe=>Ue(fe)?fe.map(J=>J.format(l.value)):fe.format(l.value),mr=fe=>Ue(fe)?fe.map(J=>Ve(J,l.value).locale(d.value)):Ve(fe,l.value).locale(d.value);function ce(fe,J){if(r.unlinkPanels&&J){const V=(fe==null?void 0:fe.year())||0,_e=(fe==null?void 0:fe.month())||0,Xe=J.year(),dt=J.month();b.value=V===Xe&&_e===dt?J.add(1,Zf):J}else b.value=p.value.add(1,Zf),J&&(b.value=b.value.hour(J.hour()).minute(J.minute()).second(J.second()))}return t("set-picker-option",["isValidValue",me]),t("set-picker-option",["parseUserInput",mr]),t("set-picker-option",["formatToString",kr]),t("set-picker-option",["handleClear",Ot]),(fe,J)=>(G(),le("div",{class:Q([_(y).b(),_(T).b(),{"has-sidebar":fe.$slots.sidebar||_(q),"has-time":_(ke)}])},[K("div",{class:Q(_(y).e("body-wrapper"))},[De(fe.$slots,"sidebar",{class:Q(_(y).e("sidebar"))}),_(q)?(G(),le("div",{key:0,class:Q(_(y).e("sidebar"))},[(G(!0),le(pt,null,$r(_(u),(V,_e)=>(G(),le("button",{key:_e,type:"button",class:Q(_(y).e("shortcut")),onClick:Xe=>_(C)(V)},He(V.text),11,["onClick"]))),128))],2)):Oe("v-if",!0),K("div",{class:Q(_(y).e("body"))},[_(ke)?(G(),le("div",{key:0,class:Q(_(T).e("time-header"))},[K("span",{class:Q(_(T).e("editors-wrap"))},[K("span",{class:Q(_(T).e("time-picker-wrap"))},[ue(_(Hs),{size:"small",disabled:_(v).selecting,placeholder:_(O)("el.datepicker.startDate"),class:Q(_(T).e("editor")),"model-value":_(M),"validate-event":!1,onInput:V=>ye(V,"min"),onChange:V=>Ce(V,"min")},null,8,["disabled","placeholder","class","model-value","onInput","onChange"])],2),qt((G(),le("span",{class:Q(_(T).e("time-picker-wrap"))},[ue(_(Hs),{size:"small",class:Q(_(T).e("editor")),disabled:_(v).selecting,placeholder:_(O)("el.datepicker.startTime"),"model-value":_(Y),"validate-event":!1,onFocus:V=>Me.value=!0,onInput:V=>it(V,"min"),onChange:V=>Et(V,"min")},null,8,["class","disabled","placeholder","model-value","onFocus","onInput","onChange"]),ue(_(ey),{visible:Me.value,format:_(se),"datetime-role":"start","parsed-value":p.value,onPick:bt},null,8,["visible","format","parsed-value"])],2)),[[_(ec),nt]])],2),K("span",null,[ue(_(Ct),null,{default:ie(()=>[ue(_(nl))]),_:1})]),K("span",{class:Q([_(T).e("editors-wrap"),"is-right"])},[K("span",{class:Q(_(T).e("time-picker-wrap"))},[ue(_(Hs),{size:"small",class:Q(_(T).e("editor")),disabled:_(v).selecting,placeholder:_(O)("el.datepicker.endDate"),"model-value":_(D),readonly:!_(m),"validate-event":!1,onInput:V=>ye(V,"max"),onChange:V=>Ce(V,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onInput","onChange"])],2),qt((G(),le("span",{class:Q(_(T).e("time-picker-wrap"))},[ue(_(Hs),{size:"small",class:Q(_(T).e("editor")),disabled:_(v).selecting,placeholder:_(O)("el.datepicker.endTime"),"model-value":_(Z),readonly:!_(m),"validate-event":!1,onFocus:V=>_(m)&&($e.value=!0),onInput:V=>it(V,"max"),onChange:V=>Et(V,"max")},null,8,["class","disabled","placeholder","model-value","readonly","onFocus","onInput","onChange"]),ue(_(ey),{"datetime-role":"end",visible:$e.value,format:_(se),"parsed-value":b.value,onPick:pr},null,8,["visible","format","parsed-value"])],2)),[[_(ec),Ge]])],2)],2)):Oe("v-if",!0),K("div",{class:Q([[_(y).e("content"),_(T).e("content")],"is-left"])},[K("div",{class:Q(_(T).e("header"))},[K("button",{type:"button",class:Q([_(y).e("icon-btn"),"d-arrow-left"]),"aria-label":_(O)("el.datepicker.prevYear"),onClick:ve},[De(fe.$slots,"prev-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(oi))]),_:1})])],10,["aria-label"]),K("button",{type:"button",class:Q([_(y).e("icon-btn"),"arrow-left"]),"aria-label":_(O)("el.datepicker.prevMonth"),onClick:We},[De(fe.$slots,"prev-month",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(Cv))]),_:1})])],10,["aria-label"]),fe.unlinkPanels?(G(),le("button",{key:0,type:"button",disabled:!_(Re),class:Q([[_(y).e("icon-btn"),{"is-disabled":!_(Re)}],"d-arrow-right"]),"aria-label":_(O)("el.datepicker.nextYear"),onClick:ze},[De(fe.$slots,"next-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(ii))]),_:1})])],10,["disabled","aria-label"])):Oe("v-if",!0),fe.unlinkPanels?(G(),le("button",{key:1,type:"button",disabled:!_(ge),class:Q([[_(y).e("icon-btn"),{"is-disabled":!_(ge)}],"arrow-right"]),"aria-label":_(O)("el.datepicker.nextMonth"),onClick:Ne},[De(fe.$slots,"next-month",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(nl))]),_:1})])],10,["disabled","aria-label"])):Oe("v-if",!0),K("div",null,He(_($)),1)],2),ue(ly,{"selection-mode":"range",date:p.value,"min-date":_(m),"max-date":_(h),"range-state":_(v),"disabled-date":_(a),"cell-class-name":_(s),onChangerange:_(S),onPick:Pe,onSelect:_(k)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),K("div",{class:Q([[_(y).e("content"),_(T).e("content")],"is-right"])},[K("div",{class:Q(_(T).e("header"))},[fe.unlinkPanels?(G(),le("button",{key:0,type:"button",disabled:!_(Re),class:Q([[_(y).e("icon-btn"),{"is-disabled":!_(Re)}],"d-arrow-left"]),"aria-label":_(O)("el.datepicker.prevYear"),onClick:rt},[De(fe.$slots,"prev-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(oi))]),_:1})])],10,["disabled","aria-label"])):Oe("v-if",!0),fe.unlinkPanels?(G(),le("button",{key:1,type:"button",disabled:!_(ge),class:Q([[_(y).e("icon-btn"),{"is-disabled":!_(ge)}],"arrow-left"]),"aria-label":_(O)("el.datepicker.prevMonth"),onClick:X},[De(fe.$slots,"prev-month",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(Cv))]),_:1})])],10,["disabled","aria-label"])):Oe("v-if",!0),K("button",{type:"button","aria-label":_(O)("el.datepicker.nextYear"),class:Q([_(y).e("icon-btn"),"d-arrow-right"]),onClick:Ke},[De(fe.$slots,"next-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(ii))]),_:1})])],10,["aria-label"]),K("button",{type:"button",class:Q([_(y).e("icon-btn"),"arrow-right"]),"aria-label":_(O)("el.datepicker.nextMonth"),onClick:xe},[De(fe.$slots,"next-month",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(nl))]),_:1})])],10,["aria-label"]),K("div",null,He(_(L)),1)],2),ue(ly,{"selection-mode":"range",date:b.value,"min-date":_(m),"max-date":_(h),"range-state":_(v),"disabled-date":_(a),"cell-class-name":_(s),onChangerange:_(S),onPick:Pe,onSelect:_(k)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),_(ke)?(G(),le("div",{key:0,class:Q(_(y).e("footer"))},[_(i)?(G(),Le(_(yn),{key:0,text:"",size:"small",class:Q(_(y).e("link-btn")),onClick:Ot},{default:ie(()=>[ot(He(_(O)("el.datepicker.clear")),1)]),_:1},8,["class"])):Oe("v-if",!0),ue(_(yn),{plain:"",size:"small",class:Q(_(y).e("link-btn")),disabled:_(Se),onClick:V=>_(w)(!1)},{default:ie(()=>[ot(He(_(O)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled","onClick"])],2)):Oe("v-if",!0)],2))}}),[["__file","panel-date-range.vue"]]);const dH=vt({...ry}),fH=["pick","set-picker-option","calendar-change"],pH=({unlinkPanels:e,leftDate:t,rightDate:r})=>{const{t:n}=zr(),a=()=>{t.value=t.value.subtract(1,"year"),e.value||(r.value=r.value.subtract(1,"year"))},s=()=>{e.value||(t.value=t.value.add(1,"year")),r.value=r.value.add(1,"year")},o=()=>{t.value=t.value.add(1,"year")},i=()=>{r.value=r.value.subtract(1,"year")},l=W(()=>`${t.value.year()} ${n("el.datepicker.year")}`),u=W(()=>`${r.value.year()} ${n("el.datepicker.year")}`),c=W(()=>t.value.year()),d=W(()=>r.value.year()===t.value.year()?t.value.year()+1:r.value.year());return{leftPrevYear:a,rightNextYear:s,leftNextYear:o,rightPrevYear:i,leftLabel:l,rightLabel:u,leftYear:c,rightYear:d}},ep="year",hH=Te({...Te({name:"DatePickerMonthRange"}),props:dH,emits:fH,setup(e,{emit:t}){const r=e,{lang:n}=zr(),a=ft("EP_PICKER_BASE"),{shortcuts:s,disabledDate:o}=a.props,i=Nr(a.props,"format"),l=Nr(a.props,"defaultValue"),u=ee(Ve().locale(n.value)),c=ee(Ve().locale(n.value).add(1,ep)),{minDate:d,maxDate:p,rangeState:b,ppNs:m,drpNs:h,handleChangeRange:v,handleRangeConfirm:y,handleShortcutClick:T,onSelect:S}=tA(r,{defaultValue:l,leftDate:u,rightDate:c,unit:ep,onParsedValueChanged:M}),w=W(()=>!!s.length),{leftPrevYear:C,rightNextYear:k,leftNextYear:f,rightPrevYear:O,leftLabel:E,rightLabel:N,leftYear:$,rightYear:L}=pH({unlinkPanels:Nr(r,"unlinkPanels"),leftDate:u,rightDate:c}),B=W(()=>r.unlinkPanels&&L.value>$.value+1),F=(D,Y=!0)=>{const Z=D.minDate,se=D.maxDate;p.value===se&&d.value===Z||(t("calendar-change",[Z.toDate(),se&&se.toDate()]),p.value=se,d.value=Z,Y&&y())},R=()=>{u.value=ay(_(l),{lang:_(n),unit:"year",unlinkPanels:r.unlinkPanels})[0],c.value=u.value.add(1,"year"),t("pick",null)},H=D=>Ue(D)?D.map(Y=>Y.format(i.value)):D.format(i.value),q=D=>Ue(D)?D.map(Y=>Ve(Y,i.value).locale(n.value)):Ve(D,i.value).locale(n.value);function M(D,Y){if(r.unlinkPanels&&Y){const Z=(D==null?void 0:D.year())||0,se=Y.year();c.value=Z===se?Y.add(1,ep):Y}else c.value=u.value.add(1,ep)}return t("set-picker-option",["isValidValue",vl]),t("set-picker-option",["formatToString",H]),t("set-picker-option",["parseUserInput",q]),t("set-picker-option",["handleClear",R]),(D,Y)=>(G(),le("div",{class:Q([_(m).b(),_(h).b(),{"has-sidebar":!!D.$slots.sidebar||_(w)}])},[K("div",{class:Q(_(m).e("body-wrapper"))},[De(D.$slots,"sidebar",{class:Q(_(m).e("sidebar"))}),_(w)?(G(),le("div",{key:0,class:Q(_(m).e("sidebar"))},[(G(!0),le(pt,null,$r(_(s),(Z,se)=>(G(),le("button",{key:se,type:"button",class:Q(_(m).e("shortcut")),onClick:ne=>_(T)(Z)},He(Z.text),11,["onClick"]))),128))],2)):Oe("v-if",!0),K("div",{class:Q(_(m).e("body"))},[K("div",{class:Q([[_(m).e("content"),_(h).e("content")],"is-left"])},[K("div",{class:Q(_(h).e("header"))},[K("button",{type:"button",class:Q([_(m).e("icon-btn"),"d-arrow-left"]),onClick:_(C)},[De(D.$slots,"prev-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(oi))]),_:1})])],10,["onClick"]),D.unlinkPanels?(G(),le("button",{key:0,type:"button",disabled:!_(B),class:Q([[_(m).e("icon-btn"),{[_(m).is("disabled")]:!_(B)}],"d-arrow-right"]),onClick:_(f)},[De(D.$slots,"next-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(ii))]),_:1})])],10,["disabled","onClick"])):Oe("v-if",!0),K("div",null,He(_(E)),1)],2),ue(uy,{"selection-mode":"range",date:u.value,"min-date":_(d),"max-date":_(p),"range-state":_(b),"disabled-date":_(o),onChangerange:_(v),onPick:F,onSelect:_(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),K("div",{class:Q([[_(m).e("content"),_(h).e("content")],"is-right"])},[K("div",{class:Q(_(h).e("header"))},[D.unlinkPanels?(G(),le("button",{key:0,type:"button",disabled:!_(B),class:Q([[_(m).e("icon-btn"),{"is-disabled":!_(B)}],"d-arrow-left"]),onClick:_(O)},[De(D.$slots,"prev-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(oi))]),_:1})])],10,["disabled","onClick"])):Oe("v-if",!0),K("button",{type:"button",class:Q([_(m).e("icon-btn"),"d-arrow-right"]),onClick:_(k)},[De(D.$slots,"next-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(ii))]),_:1})])],10,["onClick"]),K("div",null,He(_(N)),1)],2),ue(uy,{"selection-mode":"range",date:c.value,"min-date":_(d),"max-date":_(p),"range-state":_(b),"disabled-date":_(o),onChangerange:_(v),onPick:F,onSelect:_(S)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var mH=_t(hH,[["__file","panel-month-range.vue"]]);const gH=vt({...ry}),vH=["pick","set-picker-option","calendar-change"],yH=({unlinkPanels:e,leftDate:t,rightDate:r})=>{const n=()=>{t.value=t.value.subtract(10,"year"),e.value||(r.value=r.value.subtract(10,"year"))},a=()=>{e.value||(t.value=t.value.add(10,"year")),r.value=r.value.add(10,"year")},s=()=>{t.value=t.value.add(10,"year")},o=()=>{r.value=r.value.subtract(10,"year")},i=W(()=>{const d=Math.floor(t.value.year()/10)*10;return`${d}-${d+9}`}),l=W(()=>{const d=Math.floor(r.value.year()/10)*10;return`${d}-${d+9}`}),u=W(()=>Math.floor(t.value.year()/10)*10+9),c=W(()=>Math.floor(r.value.year()/10)*10);return{leftPrevYear:n,rightNextYear:a,leftNextYear:s,rightPrevYear:o,leftLabel:i,rightLabel:l,leftYear:u,rightYear:c}},rA="year",bH=Te({...Te({name:"DatePickerYearRange"}),props:gH,emits:vH,setup(e,{emit:t}){const r=e,{lang:n}=zr(),a=ee(Ve().locale(n.value)),s=ee(a.value.add(10,"year")),{pickerNs:o}=ft(Xf),i=ct("date-range-picker"),l=W(()=>!!F.length),u=W(()=>[o.b(),i.b(),{"has-sidebar":!!Ra().sidebar||l.value}]),c=W(()=>({content:[o.e("content"),i.e("content"),"is-left"],arrowLeftBtn:[o.e("icon-btn"),"d-arrow-left"],arrowRightBtn:[o.e("icon-btn"),{[o.is("disabled")]:!C.value},"d-arrow-right"]})),d=W(()=>({content:[o.e("content"),i.e("content"),"is-right"],arrowLeftBtn:[o.e("icon-btn"),{"is-disabled":!C.value},"d-arrow-left"],arrowRightBtn:[o.e("icon-btn"),"d-arrow-right"]})),p=eA(n),{leftPrevYear:b,rightNextYear:m,leftNextYear:h,rightPrevYear:v,leftLabel:y,rightLabel:T,leftYear:S,rightYear:w}=yH({unlinkPanels:Nr(r,"unlinkPanels"),leftDate:a,rightDate:s}),C=W(()=>r.unlinkPanels&&w.value>S.value+1),k=ee(),f=ee(),O=ee({endDate:null,selecting:!1}),E=ne=>{O.value=ne},N=(ne,me=!0)=>{const ve=ne.minDate,We=ne.maxDate;f.value===We&&k.value===ve||(t("calendar-change",[ve.toDate(),We&&We.toDate()]),f.value=We,k.value=ve,me&&$())},$=(ne=!1)=>{vl([k.value,f.value])&&t("pick",[k.value,f.value],ne)},L=ne=>{O.value.selecting=ne,ne||(O.value.endDate=null)},B=ft("EP_PICKER_BASE"),{shortcuts:F,disabledDate:R}=B.props,H=Nr(B.props,"format"),q=Nr(B.props,"defaultValue"),M=()=>{let ne;if(Ue(q.value)){const me=Ve(q.value[0]);let ve=Ve(q.value[1]);return r.unlinkPanels||(ve=me.add(10,rA)),[me,ve]}else q.value?ne=Ve(q.value):ne=Ve();return ne=ne.locale(n.value),[ne,ne.add(10,rA)]};tt(()=>q.value,ne=>{if(ne){const me=M();a.value=me[0],s.value=me[1]}},{immediate:!0}),tt(()=>r.parsedValue,ne=>{if(ne&&ne.length===2)if(k.value=ne[0],f.value=ne[1],a.value=k.value,r.unlinkPanels&&f.value){const me=k.value.year(),ve=f.value.year();s.value=me===ve?f.value.add(10,"year"):f.value}else s.value=a.value.add(10,"year");else{const me=M();k.value=void 0,f.value=void 0,a.value=me[0],s.value=me[1]}},{immediate:!0});const D=ne=>Ue(ne)?ne.map(me=>Ve(me,H.value).locale(n.value)):Ve(ne,H.value).locale(n.value),Y=ne=>Ue(ne)?ne.map(me=>me.format(H.value)):ne.format(H.value),Z=ne=>vl(ne)&&(R?!R(ne[0].toDate())&&!R(ne[1].toDate()):!0),se=()=>{const ne=M();a.value=ne[0],s.value=ne[1],f.value=void 0,k.value=void 0,t("pick",null)};return t("set-picker-option",["isValidValue",Z]),t("set-picker-option",["parseUserInput",D]),t("set-picker-option",["formatToString",Y]),t("set-picker-option",["handleClear",se]),(ne,me)=>(G(),le("div",{class:Q(_(u))},[K("div",{class:Q(_(o).e("body-wrapper"))},[De(ne.$slots,"sidebar",{class:Q(_(o).e("sidebar"))}),_(l)?(G(),le("div",{key:0,class:Q(_(o).e("sidebar"))},[(G(!0),le(pt,null,$r(_(F),(ve,We)=>(G(),le("button",{key:We,type:"button",class:Q(_(o).e("shortcut")),onClick:Ke=>_(p)(ve)},He(ve.text),11,["onClick"]))),128))],2)):Oe("v-if",!0),K("div",{class:Q(_(o).e("body"))},[K("div",{class:Q(_(c).content)},[K("div",{class:Q(_(i).e("header"))},[K("button",{type:"button",class:Q(_(c).arrowLeftBtn),onClick:_(b)},[De(ne.$slots,"prev-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(oi))]),_:1})])],10,["onClick"]),ne.unlinkPanels?(G(),le("button",{key:0,type:"button",disabled:!_(C),class:Q(_(c).arrowRightBtn),onClick:_(h)},[De(ne.$slots,"next-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(ii))]),_:1})])],10,["disabled","onClick"])):Oe("v-if",!0),K("div",null,He(_(y)),1)],2),ue(cy,{"selection-mode":"range",date:a.value,"min-date":k.value,"max-date":f.value,"range-state":O.value,"disabled-date":_(R),onChangerange:E,onPick:N,onSelect:L},null,8,["date","min-date","max-date","range-state","disabled-date"])],2),K("div",{class:Q(_(d).content)},[K("div",{class:Q(_(i).e("header"))},[ne.unlinkPanels?(G(),le("button",{key:0,type:"button",disabled:!_(C),class:Q(_(d).arrowLeftBtn),onClick:_(v)},[De(ne.$slots,"prev-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(oi))]),_:1})])],10,["disabled","onClick"])):Oe("v-if",!0),K("button",{type:"button",class:Q(_(d).arrowRightBtn),onClick:_(m)},[De(ne.$slots,"next-year",{},()=>[ue(_(Ct),null,{default:ie(()=>[ue(_(ii))]),_:1})])],10,["onClick"]),K("div",null,He(_(T)),1)],2),ue(cy,{"selection-mode":"range",date:s.value,"min-date":k.value,"max-date":f.value,"range-state":O.value,"disabled-date":_(R),onChangerange:E,onPick:N,onSelect:L},null,8,["date","min-date","max-date","range-state","disabled-date"])],2)],2)],2)],2))}});var wH=_t(bH,[["__file","panel-year-range.vue"]]);const _H=function(e){switch(e){case"daterange":case"datetimerange":return cH;case"monthrange":return mH;case"yearrange":return wH;default:return lH}};Ve.extend(zq),Ve.extend(mV),Ve.extend(dV),Ve.extend(bV),Ve.extend(TV),Ve.extend(IV),Ve.extend(EV),Ve.extend(MV);var SH=Te({name:"ElDatePicker",install:null,props:XV,emits:["update:modelValue"],setup(e,{expose:t,emit:r,slots:n}){const a=ct("picker-panel");Fr("ElPopperOptions",sn(Nr(e,"popperOptions"))),Fr(Xf,{slots:n,pickerNs:a});const s=ee();t({focus:()=>{var l;(l=s.value)==null||l.focus()},blur:()=>{var l;(l=s.value)==null||l.blur()},handleOpen:()=>{var l;(l=s.value)==null||l.handleOpen()},handleClose:()=>{var l;(l=s.value)==null||l.handleClose()}});const i=l=>{r("update:modelValue",l)};return()=>{var l;const u=(l=e.format)!=null?l:DV[e.type]||gl,c=_H(e.type);return ue(qV,gn(e,{format:u,type:e.type,ref:s,"onUpdate:modelValue":i}),{default:d=>ue(c,d,{"prev-month":n["prev-month"],"next-month":n["next-month"],"prev-year":n["prev-year"],"next-year":n["next-year"]}),"range-separator":n["range-separator"]})}}});const TH=Lr(SH),dy=e=>{if(!e)return{onClick:jr,onMousedown:jr,onMouseup:jr};let t=!1,r=!1;return{onClick:o=>{t&&r&&e(o),t=r=!1},onMousedown:o=>{t=o.target===o.currentTarget},onMouseup:o=>{r=o.target===o.currentTarget}}},xH=vt({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:Ye([String,Array,Object])},zIndex:{type:Ye([String,Number])}}),CH={click:e=>e instanceof MouseEvent},kH="overlay";var IH=Te({name:"ElOverlay",props:xH,emits:CH,setup(e,{slots:t,emit:r}){const n=ct(kH),a=l=>{r("click",l)},{onClick:s,onMousedown:o,onMouseup:i}=dy(e.customMaskEvent?void 0:a);return()=>e.mask?ue("div",{class:[n.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:o,onMouseup:i},[De(t,"default")],qf.STYLE|qf.CLASS|qf.PROPS,["onClick","onMouseup","onMousedown"]):It("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[De(t,"default")])}});const fy=IH,nA=Symbol("dialogInjectionKey"),aA=vt({center:Boolean,alignCenter:Boolean,closeIcon:{type:Ma},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),AH={close:()=>!0},sA=(e,t,r,n)=>{let a={offsetX:0,offsetY:0};const s=u=>{const c=u.clientX,d=u.clientY,{offsetX:p,offsetY:b}=a,m=e.value.getBoundingClientRect(),h=m.left,v=m.top,y=m.width,T=m.height,S=document.documentElement.clientWidth,w=document.documentElement.clientHeight,C=-h+p,k=-v+b,f=S-h-y+p,O=w-v-T+b,E=$=>{let L=p+$.clientX-c,B=b+$.clientY-d;n!=null&&n.value||(L=Math.min(Math.max(L,C),f),B=Math.min(Math.max(B,k),O)),a={offsetX:L,offsetY:B},e.value&&(e.value.style.transform=`translate(${ea(L)}, ${ea(B)})`)},N=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",N)},o=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",s)},i=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",s)},l=()=>{a={offsetX:0,offsetY:0},e.value&&(e.value.style.transform="none")};return Kt(()=>{Bs(()=>{r.value?o():i()})}),Ur(()=>{i()}),{resetPosition:l}},OH=(...e)=>t=>{e.forEach(r=>{et(r)?r(t):r.value=t})},PH=Te({...Te({name:"ElDialogContent"}),props:aA,emits:AH,setup(e,{expose:t}){const r=e,{t:n}=zr(),{Close:a}=wk,{dialogRef:s,headerRef:o,bodyId:i,ns:l,style:u}=ft(nA),{focusTrapRef:c}=ft(qk),d=W(()=>[l.b(),l.is("fullscreen",r.fullscreen),l.is("draggable",r.draggable),l.is("align-center",r.alignCenter),{[l.m("center")]:r.center}]),p=OH(c,s),b=W(()=>r.draggable),m=W(()=>r.overflow),{resetPosition:h}=sA(s,o,b,m);return t({resetPosition:h}),(v,y)=>(G(),le("div",{ref:_(p),class:Q(_(d)),style:Dt(_(u)),tabindex:"-1"},[K("header",{ref_key:"headerRef",ref:o,class:Q([_(l).e("header"),v.headerClass,{"show-close":v.showClose}])},[De(v.$slots,"header",{},()=>[K("span",{role:"heading","aria-level":v.ariaLevel,class:Q(_(l).e("title"))},He(v.title),11,["aria-level"])]),v.showClose?(G(),le("button",{key:0,"aria-label":_(n)("el.dialog.close"),class:Q(_(l).e("headerbtn")),type:"button",onClick:T=>v.$emit("close")},[ue(_(Ct),{class:Q(_(l).e("close"))},{default:ie(()=>[(G(),Le(br(v.closeIcon||_(a))))]),_:1},8,["class"])],10,["aria-label","onClick"])):Oe("v-if",!0)],2),K("div",{id:_(i),class:Q([_(l).e("body"),v.bodyClass])},[De(v.$slots,"default")],10,["id"]),v.$slots.footer?(G(),le("footer",{key:0,class:Q([_(l).e("footer"),v.footerClass])},[De(v.$slots,"footer")],2)):Oe("v-if",!0)],6))}});var EH=_t(PH,[["__file","dialog-content.vue"]]);const oA=vt({...aA,appendToBody:Boolean,appendTo:{type:Ye([String,Object]),default:"body"},beforeClose:{type:Ye(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),iA={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[qr]:e=>tn(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},lA=(e,t={})=>{lr(e)||ju("[useLockscreen]","You need to pass a ref param to this function");const r=t.ns||ct("popup"),n=W(()=>r.bm("parent","hidden"));if(!dr||La(document.body,n.value))return;let a=0,s=!1,o="0";const i=()=>{setTimeout(()=>{typeof document>"u"||s&&document&&(document.body.style.width=o,ls(document.body,n.value))},200)};tt(e,l=>{if(!l){i();return}s=!La(document.body,n.value),s&&(o=document.body.style.width,ni(document.body,n.value)),a=nj(r.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,c=ai(document.body,"overflowY");a>0&&(u||c==="scroll")&&s&&(document.body.style.width=`calc(100% - ${a}px)`)}),vg(()=>i())},uA=(e,t)=>{var r;const a=Vt().emit,{nextZIndex:s}=Sv();let o="";const i=us(),l=us(),u=ee(!1),c=ee(!1),d=ee(!1),p=ee((r=e.zIndex)!=null?r:s());let b,m;const h=yf("namespace",Nu),v=W(()=>{const R={},H=`--${h.value}-dialog`;return e.fullscreen||(e.top&&(R[`${H}-margin-top`]=e.top),e.width&&(R[`${H}-width`]=ea(e.width))),R}),y=W(()=>e.alignCenter?{display:"flex"}:{});function T(){a("opened")}function S(){a("closed"),a(qr,!1),e.destroyOnClose&&(d.value=!1)}function w(){a("close")}function C(){m==null||m(),b==null||b(),e.openDelay&&e.openDelay>0?{stop:b}=pf(()=>E(),e.openDelay):E()}function k(){b==null||b(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=pf(()=>N(),e.closeDelay):N()}function f(){function R(H){H||(c.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(R):k()}function O(){e.closeOnClickModal&&f()}function E(){dr&&(u.value=!0)}function N(){u.value=!1}function $(){a("openAutoFocus")}function L(){a("closeAutoFocus")}function B(R){var H;((H=R.detail)==null?void 0:H.focusReason)==="pointer"&&R.preventDefault()}e.lockScroll&&lA(u);function F(){e.closeOnPressEscape&&f()}return tt(()=>e.modelValue,R=>{R?(c.value=!1,C(),d.value=!0,p.value=Hw(e.zIndex)?s():p.value++,xt(()=>{a("open"),t.value&&(t.value.parentElement.scrollTop=0,t.value.parentElement.scrollLeft=0,t.value.scrollTop=0)})):u.value&&k()}),tt(()=>e.fullscreen,R=>{t.value&&(R?(o=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=o)}),Kt(()=>{e.modelValue&&(u.value=!0,d.value=!0,C())}),{afterEnter:T,afterLeave:S,beforeLeave:w,handleClose:f,onModalClick:O,close:k,doClose:N,onOpenAutoFocus:$,onCloseAutoFocus:L,onCloseRequested:F,onFocusoutPrevented:B,titleId:i,bodyId:l,closed:c,style:v,overlayDialogStyle:y,rendered:d,visible:u,zIndex:p}},$H=Te({...Te({name:"ElDialog",inheritAttrs:!1}),props:oA,emits:iA,setup(e,{expose:t}){const r=e,n=Ra();hl({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},W(()=>!!n.title));const a=ct("dialog"),s=ee(),o=ee(),i=ee(),{visible:l,titleId:u,bodyId:c,style:d,overlayDialogStyle:p,rendered:b,zIndex:m,afterEnter:h,afterLeave:v,beforeLeave:y,handleClose:T,onModalClick:S,onOpenAutoFocus:w,onCloseAutoFocus:C,onCloseRequested:k,onFocusoutPrevented:f}=uA(r,s);Fr(nA,{dialogRef:s,headerRef:o,bodyId:c,ns:a,rendered:b,style:d});const O=dy(S),E=W(()=>r.draggable&&!r.fullscreen);return t({visible:l,dialogContentRef:i,resetPosition:()=>{var $;($=i.value)==null||$.resetPosition()}}),($,L)=>(G(),Le(_(Hv),{to:$.appendTo,disabled:$.appendTo!=="body"?!1:!$.appendToBody},{default:ie(()=>[ue(ma,{name:"dialog-fade",onAfterEnter:_(h),onAfterLeave:_(v),onBeforeLeave:_(y),persisted:""},{default:ie(()=>[qt(ue(_(fy),{"custom-mask-event":"",mask:$.modal,"overlay-class":$.modalClass,"z-index":_(m)},{default:ie(()=>[K("div",{role:"dialog","aria-modal":"true","aria-label":$.title||void 0,"aria-labelledby":$.title?void 0:_(u),"aria-describedby":_(c),class:Q(`${_(a).namespace.value}-overlay-dialog`),style:Dt(_(p)),onClick:_(O).onClick,onMousedown:_(O).onMousedown,onMouseup:_(O).onMouseup},[ue(_($f),{loop:"",trapped:_(l),"focus-start-el":"container",onFocusAfterTrapped:_(w),onFocusAfterReleased:_(C),onFocusoutPrevented:_(f),onReleaseRequested:_(k)},{default:ie(()=>[_(b)?(G(),Le(EH,gn({key:0,ref_key:"dialogContentRef",ref:i},$.$attrs,{center:$.center,"align-center":$.alignCenter,"close-icon":$.closeIcon,draggable:_(E),overflow:$.overflow,fullscreen:$.fullscreen,"header-class":$.headerClass,"body-class":$.bodyClass,"footer-class":$.footerClass,"show-close":$.showClose,title:$.title,"aria-level":$.headerAriaLevel,onClose:_(T)}),nx({header:ie(()=>[$.$slots.title?De($.$slots,"title",{key:1}):De($.$slots,"header",{key:0,close:_(T),titleId:_(u),titleClass:_(a).e("title")})]),default:ie(()=>[De($.$slots,"default")]),_:2},[$.$slots.footer?{name:"footer",fn:ie(()=>[De($.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):Oe("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[Sr,_(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var RH=_t($H,[["__file","dialog.vue"]]);const py=Lr(RH),LH=vt({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Ye(String),default:"solid"}}),MH=Te({...Te({name:"ElDivider"}),props:LH,setup(e){const t=e,r=ct("divider"),n=W(()=>r.cssVar({"border-style":t.borderStyle}));return(a,s)=>(G(),le("div",{class:Q([_(r).b(),_(r).m(a.direction)]),style:Dt(_(n)),role:"separator"},[a.$slots.default&&a.direction!=="vertical"?(G(),le("div",{key:0,class:Q([_(r).e("text"),_(r).is(a.contentPosition)])},[De(a.$slots,"default")],2)):Oe("v-if",!0)],6))}});var DH=_t(MH,[["__file","divider.vue"]]);const cA=Lr(DH),NH=vt({...oA,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),FH=Te({...Te({name:"ElDrawer",inheritAttrs:!1}),props:NH,emits:iA,setup(e,{expose:t}){const r=e,n=Ra();hl({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},W(()=>!!n.title));const a=ee(),s=ee(),o=ct("drawer"),{t:i}=zr(),{afterEnter:l,afterLeave:u,beforeLeave:c,visible:d,rendered:p,titleId:b,bodyId:m,zIndex:h,onModalClick:v,onOpenAutoFocus:y,onCloseAutoFocus:T,onFocusoutPrevented:S,onCloseRequested:w,handleClose:C}=uA(r,a),k=W(()=>r.direction==="rtl"||r.direction==="ltr"),f=W(()=>ea(r.size));return t({handleClose:C,afterEnter:l,afterLeave:u}),(O,E)=>(G(),Le(_(Hv),{to:O.appendTo,disabled:O.appendTo!=="body"?!1:!O.appendToBody},{default:ie(()=>[ue(ma,{name:_(o).b("fade"),onAfterEnter:_(l),onAfterLeave:_(u),onBeforeLeave:_(c),persisted:""},{default:ie(()=>[qt(ue(_(fy),{mask:O.modal,"overlay-class":O.modalClass,"z-index":_(h),onClick:_(v)},{default:ie(()=>[ue(_($f),{loop:"",trapped:_(d),"focus-trap-el":a.value,"focus-start-el":s.value,onFocusAfterTrapped:_(y),onFocusAfterReleased:_(T),onFocusoutPrevented:_(S),onReleaseRequested:_(w)},{default:ie(()=>[K("div",gn({ref_key:"drawerRef",ref:a,"aria-modal":"true","aria-label":O.title||void 0,"aria-labelledby":O.title?void 0:_(b),"aria-describedby":_(m)},O.$attrs,{class:[_(o).b(),O.direction,_(d)&&"open"],style:_(k)?"width: "+_(f):"height: "+_(f),role:"dialog",onClick:Pt(()=>{},["stop"])}),[K("span",{ref_key:"focusStartRef",ref:s,class:Q(_(o).e("sr-focus")),tabindex:"-1"},null,2),O.withHeader?(G(),le("header",{key:0,class:Q([_(o).e("header"),O.headerClass])},[O.$slots.title?De(O.$slots,"title",{key:1},()=>[Oe(" DEPRECATED SLOT ")]):De(O.$slots,"header",{key:0,close:_(C),titleId:_(b),titleClass:_(o).e("title")},()=>[O.$slots.title?Oe("v-if",!0):(G(),le("span",{key:0,id:_(b),role:"heading","aria-level":O.headerAriaLevel,class:Q(_(o).e("title"))},He(O.title),11,["id","aria-level"]))]),O.showClose?(G(),le("button",{key:2,"aria-label":_(i)("el.drawer.close"),class:Q(_(o).e("close-btn")),type:"button",onClick:_(C)},[ue(_(Ct),{class:Q(_(o).e("close"))},{default:ie(()=>[ue(_(al))]),_:1},8,["class"])],10,["aria-label","onClick"])):Oe("v-if",!0)],2)):Oe("v-if",!0),_(p)?(G(),le("div",{key:1,id:_(m),class:Q([_(o).e("body"),O.bodyClass])},[De(O.$slots,"default")],10,["id"])):Oe("v-if",!0),O.$slots.footer?(G(),le("div",{key:2,class:Q([_(o).e("footer"),O.footerClass])},[De(O.$slots,"footer")],2)):Oe("v-if",!0)],16,["aria-label","aria-labelledby","aria-describedby","onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Sr,_(d)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var BH=_t(FH,[["__file","drawer.vue"]]);const dA=Lr(BH),jH=Te({inheritAttrs:!1});function UH(e,t,r,n,a,s){return De(e.$slots,"default")}var qH=_t(jH,[["render",UH],["__file","collection.vue"]]);const VH=Te({name:"ElCollectionItem",inheritAttrs:!1});function HH(e,t,r,n,a,s){return De(e.$slots,"default")}var zH=_t(VH,[["render",HH],["__file","collection-item.vue"]]);const WH="data-el-collection-item",KH=e=>{const t=`El${e}Collection`,r=`${t}Item`,n=Symbol(t),a=Symbol(r),s={...qH,name:t,setup(){const i=ee(null),l=new Map;Fr(n,{itemMap:l,getItems:()=>{const c=_(i);if(!c)return[];const d=Array.from(c.querySelectorAll(`[${WH}]`));return[...l.values()].sort((b,m)=>d.indexOf(b.ref)-d.indexOf(m.ref))},collectionRef:i})}},o={...zH,name:r,setup(i,{attrs:l}){const u=ee(null),c=ft(n,void 0);Fr(a,{collectionItemRef:u}),Kt(()=>{const d=_(u);d&&c.itemMap.set(d,{ref:d,...l})}),Ur(()=>{const d=_(u);c.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:n,COLLECTION_ITEM_INJECTION_KEY:a,ElCollection:s,ElCollectionItem:o}},hy=vt({trigger:Zu.trigger,triggerKeys:{type:Ye(Array),default:()=>[ar.enter,ar.numpadEnter,ar.space,ar.down]},effect:{...ta.effect,default:"light"},type:{type:Ye(String)},placement:{type:Ye(String),default:"bottom"},popperOptions:{type:Ye(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Ye([Number,String]),default:0},maxHeight:{type:Ye([Number,String]),default:""},popperClass:{type:String,default:""},disabled:Boolean,role:{type:String,default:"menu"},buttonProps:{type:Ye(Object)},teleported:ta.teleported});vt({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Ma}}),vt({onKeydown:{type:Ye(Function)}}),KH("Dropdown");const GH=Te({...Te({name:"ImgEmpty"}),setup(e){const t=ct("empty"),r=us();return(n,a)=>(G(),le("svg",{viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[K("defs",null,[K("linearGradient",{id:`linearGradient-1-${_(r)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[K("stop",{"stop-color":`var(${_(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),K("stop",{"stop-color":`var(${_(t).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),K("linearGradient",{id:`linearGradient-2-${_(r)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[K("stop",{"stop-color":`var(${_(t).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,["stop-color"]),K("stop",{"stop-color":`var(${_(t).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,["stop-color"])],8,["id"]),K("rect",{id:`path-3-${_(r)}`,x:"0",y:"0",width:"17",height:"36"},null,8,["id"])]),K("g",{id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[K("g",{id:"B-type",transform:"translate(-1268.000000, -535.000000)"},[K("g",{id:"Group-2",transform:"translate(1268.000000, 535.000000)"},[K("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${_(t).cssVarBlockName("fill-color-3")})`},null,8,["fill"]),K("polygon",{id:"Rectangle-Copy-14",fill:`var(${_(t).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,["fill"]),K("g",{id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},[K("polygon",{id:"Rectangle-Copy-10",fill:`var(${_(t).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,["fill"]),K("polygon",{id:"Rectangle-Copy-11",fill:`var(${_(t).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,["fill"]),K("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${_(r)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,["fill"]),K("polygon",{id:"Rectangle-Copy-13",fill:`var(${_(t).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,["fill"])]),K("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${_(r)})`,x:"13",y:"45",width:"40",height:"36"},null,8,["fill"]),K("g",{id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},[K("use",{id:"Mask",fill:`var(${_(t).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${_(r)}`},null,8,["fill","xlink:href"]),K("polygon",{id:"Rectangle-Copy",fill:`var(${_(t).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${_(r)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,["fill","mask"])]),K("polygon",{id:"Rectangle-Copy-18",fill:`var(${_(t).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,["fill"])])])])]))}});var YH=_t(GH,[["__file","img-empty.vue"]]);const JH=vt({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),XH=Te({...Te({name:"ElEmpty"}),props:JH,setup(e){const t=e,{t:r}=zr(),n=ct("empty"),a=W(()=>t.description||r("el.table.emptyText")),s=W(()=>({width:ea(t.imageSize)}));return(o,i)=>(G(),le("div",{class:Q(_(n).b())},[K("div",{class:Q(_(n).e("image")),style:Dt(_(s))},[o.image?(G(),le("img",{key:0,src:o.image,ondragstart:"return false"},null,8,["src"])):De(o.$slots,"image",{key:1},()=>[ue(YH)])],6),K("div",{class:Q(_(n).e("description"))},[o.$slots.description?De(o.$slots,"description",{key:0}):(G(),le("p",{key:1},He(_(a)),1))],2),o.$slots.default?(G(),le("div",{key:0,class:Q(_(n).e("bottom"))},[De(o.$slots,"default")],2)):Oe("v-if",!0)],2))}});var QH=_t(XH,[["__file","empty.vue"]]);const ZH=Lr(QH),ez=vt({size:{type:String,values:Uu},disabled:Boolean}),tz=vt({...ez,model:Object,rules:{type:Ye(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),rz={validate:(e,t,r)=>(Ue(e)||mt(e))&&tn(t)&&mt(r)};function nz(){const e=ee([]),t=W(()=>{if(!e.value.length)return"0";const s=Math.max(...e.value);return s?`${s}px`:""});function r(s){const o=e.value.indexOf(s);return o===-1&&t.value,o}function n(s,o){if(s&&o){const i=r(o);e.value.splice(i,1,s)}else s&&e.value.push(s)}function a(s){const o=r(s);o>-1&&e.value.splice(o,1)}return{autoLabelWidth:t,registerLabelWidth:n,deregisterLabelWidth:a}}const tp=(e,t)=>{const r=ka(t);return r.length>0?e.filter(n=>n.prop&&r.includes(n.prop)):e},az=Te({...Te({name:"ElForm"}),props:tz,emits:rz,setup(e,{expose:t,emit:r}){const n=e,a=[],s=Na(),o=ct("form"),i=W(()=>{const{labelPosition:S,inline:w}=n;return[o.b(),o.m(s.value||"default"),{[o.m(`label-${S}`)]:S,[o.m("inline")]:w}]}),l=S=>a.find(w=>w.prop===S),u=S=>{a.push(S)},c=S=>{S.prop&&a.splice(a.indexOf(S),1)},d=(S=[])=>{n.model&&tp(a,S).forEach(w=>w.resetField())},p=(S=[])=>{tp(a,S).forEach(w=>w.clearValidate())},b=W(()=>!!n.model),m=S=>{if(a.length===0)return[];const w=tp(a,S);return w.length?w:[]},h=async S=>y(void 0,S),v=async(S=[])=>{if(!b.value)return!1;const w=m(S);if(w.length===0)return!0;let C={};for(const k of w)try{await k.validate(""),k.validateState==="error"&&k.resetField()}catch(f){C={...C,...f}}return Object.keys(C).length===0?!0:Promise.reject(C)},y=async(S=[],w)=>{const C=!et(w);try{const k=await v(S);return k===!0&&await(w==null?void 0:w(k)),k}catch(k){if(k instanceof Error)throw k;const f=k;return n.scrollToError&&T(Object.keys(f)[0]),await(w==null?void 0:w(!1,f)),C&&Promise.reject(f)}},T=S=>{var w;const C=tp(a,S)[0];C&&((w=C.$el)==null||w.scrollIntoView(n.scrollIntoViewOptions))};return tt(()=>n.rules,()=>{n.validateOnRuleChange&&h().catch(S=>void 0)},{deep:!0,flush:"post"}),Fr(sl,sn({...Ms(n),emit:r,resetFields:d,clearValidate:p,validateField:y,getField:l,addField:u,removeField:c,...nz()})),t({validate:h,validateField:y,resetFields:d,clearValidate:p,scrollToField:T,fields:a}),(S,w)=>(G(),le("form",{class:Q(_(i))},[De(S.$slots,"default")],2))}});var sz=_t(az,[["__file","form.vue"]]);function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fi.apply(this,arguments)}function oz(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,rc(e,t)}function my(e){return my=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},my(e)}function rc(e,t){return rc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},rc(e,t)}function iz(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rp(e,t,r){return iz()?rp=Reflect.construct.bind():rp=function(a,s,o){var i=[null];i.push.apply(i,s);var l=Function.bind.apply(a,i),u=new l;return o&&rc(u,o.prototype),u},rp.apply(null,arguments)}function lz(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function gy(e){var t=typeof Map=="function"?new Map:void 0;return gy=function(n){if(n===null||!lz(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(n))return t.get(n);t.set(n,a)}function a(){return rp(n,arguments,my(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),rc(a,n)},gy(e)}var uz=/%[sdj%]/g,cz=function(){};typeof process<"u"&&process.env;function vy(e){if(!e||!e.length)return null;var t={};return e.forEach(function(r){var n=r.field;t[n]=t[n]||[],t[n].push(r)}),t}function aa(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var a=0,s=r.length;if(typeof e=="function")return e.apply(null,r);if(typeof e=="string"){var o=e.replace(uz,function(i){if(i==="%%")return"%";if(a>=s)return i;switch(i){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch{return"[Circular]"}break;default:return i}});return o}return e}function dz(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Kr(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||dz(t)&&typeof e=="string"&&!e)}function fz(e,t,r){var n=[],a=0,s=e.length;function o(i){n.push.apply(n,i||[]),a++,a===s&&r(n)}e.forEach(function(i){t(i,o)})}function fA(e,t,r){var n=0,a=e.length;function s(o){if(o&&o.length){r(o);return}var i=n;n=n+1,i<a?t(e[i],s):r([])}s([])}function pz(e){var t=[];return Object.keys(e).forEach(function(r){t.push.apply(t,e[r]||[])}),t}var pA=(function(e){oz(t,e);function t(r,n){var a;return a=e.call(this,"Async Validation Error")||this,a.errors=r,a.fields=n,a}return t})(gy(Error));function hz(e,t,r,n,a){if(t.first){var s=new Promise(function(p,b){var m=function(y){return n(y),y.length?b(new pA(y,vy(y))):p(a)},h=pz(e);fA(h,r,m)});return s.catch(function(p){return p}),s}var o=t.firstFields===!0?Object.keys(e):t.firstFields||[],i=Object.keys(e),l=i.length,u=0,c=[],d=new Promise(function(p,b){var m=function(v){if(c.push.apply(c,v),u++,u===l)return n(c),c.length?b(new pA(c,vy(c))):p(a)};i.length||(n(c),p(a)),i.forEach(function(h){var v=e[h];o.indexOf(h)!==-1?fA(v,r,m):fz(v,r,m)})});return d.catch(function(p){return p}),d}function mz(e){return!!(e&&e.message!==void 0)}function gz(e,t){for(var r=e,n=0;n<t.length;n++){if(r==null)return r;r=r[t[n]]}return r}function hA(e,t){return function(r){var n;return e.fullFields?n=gz(t,e.fullFields):n=t[r.field||e.fullField],mz(r)?(r.field=r.field||e.fullField,r.fieldValue=n,r):{message:typeof r=="function"?r():r,fieldValue:n,field:r.field||e.fullField}}}function mA(e,t){if(t){for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];typeof n=="object"&&typeof e[r]=="object"?e[r]=fi({},e[r],n):e[r]=n}}return e}var gA=function(t,r,n,a,s,o){t.required&&(!n.hasOwnProperty(t.field)||Kr(r,o||t.type))&&a.push(aa(s.messages.required,t.fullField))},vz=function(t,r,n,a,s){(/^\s+$/.test(r)||r==="")&&a.push(aa(s.messages.whitespace,t.fullField))},np,yz=(function(){if(np)return np;var e="[a-fA-F\\d:]",t=function(w){return w&&w.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",a=(`
(?:
(?:`+n+":){7}(?:"+n+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+n+":){6}(?:"+r+"|:"+n+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+n+":){5}(?::"+r+"|(?::"+n+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+n+":){4}(?:(?::"+n+"){0,1}:"+r+"|(?::"+n+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+n+":){3}(?:(?::"+n+"){0,2}:"+r+"|(?::"+n+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+n+":){2}(?:(?::"+n+"){0,3}:"+r+"|(?::"+n+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+n+":){1}(?:(?::"+n+"){0,4}:"+r+"|(?::"+n+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+n+"){0,5}:"+r+"|(?::"+n+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+r+"$)|(?:^"+a+"$)"),o=new RegExp("^"+r+"$"),i=new RegExp("^"+a+"$"),l=function(w){return w&&w.exact?s:new RegExp("(?:"+t(w)+r+t(w)+")|(?:"+t(w)+a+t(w)+")","g")};l.v4=function(S){return S&&S.exact?o:new RegExp(""+t(S)+r+t(S),"g")},l.v6=function(S){return S&&S.exact?i:new RegExp(""+t(S)+a+t(S),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,p=l.v6().source,b="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",h="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',T="(?:"+u+"|www\\.)"+c+"(?:localhost|"+d+"|"+p+"|"+b+m+h+")"+v+y;return np=new RegExp("(?:^"+T+"$)","i"),np}),vA={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},nc={integer:function(t){return nc.number(t)&&parseInt(t,10)===t},float:function(t){return nc.number(t)&&!nc.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!nc.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(vA.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(yz())},hex:function(t){return typeof t=="string"&&!!t.match(vA.hex)}},bz=function(t,r,n,a,s){if(t.required&&r===void 0){gA(t,r,n,a,s);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],i=t.type;o.indexOf(i)>-1?nc[i](r)||a.push(aa(s.messages.types[i],t.fullField,t.type)):i&&typeof r!==t.type&&a.push(aa(s.messages.types[i],t.fullField,t.type))},wz=function(t,r,n,a,s){var o=typeof t.len=="number",i=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=r,d=null,p=typeof r=="number",b=typeof r=="string",m=Array.isArray(r);if(p?d="number":b?d="string":m&&(d="array"),!d)return!1;m&&(c=r.length),b&&(c=r.replace(u,"_").length),o?c!==t.len&&a.push(aa(s.messages[d].len,t.fullField,t.len)):i&&!l&&c<t.min?a.push(aa(s.messages[d].min,t.fullField,t.min)):l&&!i&&c>t.max?a.push(aa(s.messages[d].max,t.fullField,t.max)):i&&l&&(c<t.min||c>t.max)&&a.push(aa(s.messages[d].range,t.fullField,t.min,t.max))},yl="enum",_z=function(t,r,n,a,s){t[yl]=Array.isArray(t[yl])?t[yl]:[],t[yl].indexOf(r)===-1&&a.push(aa(s.messages[yl],t.fullField,t[yl].join(", ")))},Sz=function(t,r,n,a,s){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(r)||a.push(aa(s.messages.pattern.mismatch,t.fullField,r,t.pattern));else if(typeof t.pattern=="string"){var o=new RegExp(t.pattern);o.test(r)||a.push(aa(s.messages.pattern.mismatch,t.fullField,r,t.pattern))}}},er={required:gA,whitespace:vz,type:bz,range:wz,enum:_z,pattern:Sz},Tz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r,"string")&&!t.required)return n();er.required(t,r,a,o,s,"string"),Kr(r,"string")||(er.type(t,r,a,o,s),er.range(t,r,a,o,s),er.pattern(t,r,a,o,s),t.whitespace===!0&&er.whitespace(t,r,a,o,s))}n(o)},xz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),r!==void 0&&er.type(t,r,a,o,s)}n(o)},Cz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(r===""&&(r=void 0),Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),r!==void 0&&(er.type(t,r,a,o,s),er.range(t,r,a,o,s))}n(o)},kz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),r!==void 0&&er.type(t,r,a,o,s)}n(o)},Iz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),Kr(r)||er.type(t,r,a,o,s)}n(o)},Az=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),r!==void 0&&(er.type(t,r,a,o,s),er.range(t,r,a,o,s))}n(o)},Oz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),r!==void 0&&(er.type(t,r,a,o,s),er.range(t,r,a,o,s))}n(o)},Pz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(r==null&&!t.required)return n();er.required(t,r,a,o,s,"array"),r!=null&&(er.type(t,r,a,o,s),er.range(t,r,a,o,s))}n(o)},Ez=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),r!==void 0&&er.type(t,r,a,o,s)}n(o)},$z="enum",Rz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s),r!==void 0&&er[$z](t,r,a,o,s)}n(o)},Lz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r,"string")&&!t.required)return n();er.required(t,r,a,o,s),Kr(r,"string")||er.pattern(t,r,a,o,s)}n(o)},Mz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r,"date")&&!t.required)return n();if(er.required(t,r,a,o,s),!Kr(r,"date")){var l;r instanceof Date?l=r:l=new Date(r),er.type(t,l,a,o,s),l&&er.range(t,l.getTime(),a,o,s)}}n(o)},Dz=function(t,r,n,a,s){var o=[],i=Array.isArray(r)?"array":typeof r;er.required(t,r,a,o,s,i),n(o)},yy=function(t,r,n,a,s){var o=t.type,i=[],l=t.required||!t.required&&a.hasOwnProperty(t.field);if(l){if(Kr(r,o)&&!t.required)return n();er.required(t,r,a,i,s,o),Kr(r,o)||er.type(t,r,a,i,s)}n(i)},Nz=function(t,r,n,a,s){var o=[],i=t.required||!t.required&&a.hasOwnProperty(t.field);if(i){if(Kr(r)&&!t.required)return n();er.required(t,r,a,o,s)}n(o)},ac={string:Tz,method:xz,number:Cz,boolean:kz,regexp:Iz,integer:Az,float:Oz,array:Pz,object:Ez,enum:Rz,pattern:Lz,date:Mz,url:yy,hex:yy,email:yy,required:Dz,any:Nz};function by(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var wy=by(),sc=(function(){function e(r){this.rules=null,this._messages=wy,this.define(r)}var t=e.prototype;return t.define=function(n){var a=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(typeof n!="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(s){var o=n[s];a.rules[s]=Array.isArray(o)?o:[o]})},t.messages=function(n){return n&&(this._messages=mA(by(),n)),this._messages},t.validate=function(n,a,s){var o=this;a===void 0&&(a={}),s===void 0&&(s=function(){});var i=n,l=a,u=s;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,i),Promise.resolve(i);function c(h){var v=[],y={};function T(w){if(Array.isArray(w)){var C;v=(C=v).concat.apply(C,w)}else v.push(w)}for(var S=0;S<h.length;S++)T(h[S]);v.length?(y=vy(v),u(v,y)):u(null,i)}if(l.messages){var d=this.messages();d===wy&&(d=by()),mA(d,l.messages),l.messages=d}else l.messages=this.messages();var p={},b=l.keys||Object.keys(this.rules);b.forEach(function(h){var v=o.rules[h],y=i[h];v.forEach(function(T){var S=T;typeof S.transform=="function"&&(i===n&&(i=fi({},i)),y=i[h]=S.transform(y)),typeof S=="function"?S={validator:S}:S=fi({},S),S.validator=o.getValidationMethod(S),S.validator&&(S.field=h,S.fullField=S.fullField||h,S.type=o.getType(S),p[h]=p[h]||[],p[h].push({rule:S,value:y,source:i,field:h}))})});var m={};return hz(p,l,function(h,v){var y=h.rule,T=(y.type==="object"||y.type==="array")&&(typeof y.fields=="object"||typeof y.defaultField=="object");T=T&&(y.required||!y.required&&h.value),y.field=h.field;function S(k,f){return fi({},f,{fullField:y.fullField+"."+k,fullFields:y.fullFields?[].concat(y.fullFields,[k]):[k]})}function w(k){k===void 0&&(k=[]);var f=Array.isArray(k)?k:[k];!l.suppressWarning&&f.length&&e.warning("async-validator:",f),f.length&&y.message!==void 0&&(f=[].concat(y.message));var O=f.map(hA(y,i));if(l.first&&O.length)return m[y.field]=1,v(O);if(!T)v(O);else{if(y.required&&!h.value)return y.message!==void 0?O=[].concat(y.message).map(hA(y,i)):l.error&&(O=[l.error(y,aa(l.messages.required,y.field))]),v(O);var E={};y.defaultField&&Object.keys(h.value).map(function(L){E[L]=y.defaultField}),E=fi({},E,h.rule.fields);var N={};Object.keys(E).forEach(function(L){var B=E[L],F=Array.isArray(B)?B:[B];N[L]=F.map(S.bind(null,L))});var $=new e(N);$.messages(l.messages),h.rule.options&&(h.rule.options.messages=l.messages,h.rule.options.error=l.error),$.validate(h.value,h.rule.options||l,function(L){var B=[];O&&O.length&&B.push.apply(B,O),L&&L.length&&B.push.apply(B,L),v(B.length?B:null)})}}var C;if(y.asyncValidator)C=y.asyncValidator(y,h.value,w,h.source,l);else if(y.validator){try{C=y.validator(y,h.value,w,h.source,l)}catch(k){console.error==null||console.error(k),l.suppressValidatorError||setTimeout(function(){throw k},0),w(k.message)}C===!0?w():C===!1?w(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||(y.fullField||y.field)+" fails"):C instanceof Array?w(C):C instanceof Error&&w(C.message)}C&&C.then&&C.then(function(){return w()},function(k){return w(k)})},function(h){c(h)},i)},t.getType=function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!ac.hasOwnProperty(n.type))throw new Error(aa("Unknown rule type %s",n.type));return n.type||"string"},t.getValidationMethod=function(n){if(typeof n.validator=="function")return n.validator;var a=Object.keys(n),s=a.indexOf("message");return s!==-1&&a.splice(s,1),a.length===1&&a[0]==="required"?ac.required:ac[this.getType(n)]||void 0},e})();sc.register=function(t,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");ac[t]=r},sc.warning=cz,sc.messages=wy,sc.validators=ac;const Fz=["","error","validating","success"],Bz=vt({label:String,labelWidth:{type:[String,Number],default:""},labelPosition:{type:String,values:["left","right","top",""],default:""},prop:{type:Ye([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Ye([Object,Array])},error:String,validateStatus:{type:String,values:Fz},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:Uu}}),yA="ElLabelWrap";var jz=Te({name:yA,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(e,{slots:t}){const r=ft(sl,void 0),n=ft(li);n||ju(yA,"usage: <el-form-item><label-wrap /></el-form-item>");const a=ct("form"),s=ee(),o=ee(0),i=()=>{var c;if((c=s.value)!=null&&c.firstElementChild){const d=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(c="update")=>{xt(()=>{t.default&&e.isAutoWidth&&(c==="update"?o.value=i():c==="remove"&&(r==null||r.deregisterLabelWidth(o.value)))})},u=()=>l("update");return Kt(()=>{u()}),Ur(()=>{l("remove")}),Ji(()=>u()),tt(o,(c,d)=>{e.updateAll&&(r==null||r.registerLabelWidth(c,d))}),Zn(W(()=>{var c,d;return(d=(c=s.value)==null?void 0:c.firstElementChild)!=null?d:null}),u),()=>{var c,d;if(!t)return null;const{isAutoWidth:p}=e;if(p){const b=r==null?void 0:r.autoLabelWidth,m=n==null?void 0:n.hasLabel,h={};if(m&&b&&b!=="auto"){const v=Math.max(0,Number.parseInt(b,10)-o.value),T=(n.labelPosition||r.labelPosition)==="left"?"marginRight":"marginLeft";v&&(h[T]=`${v}px`)}return ue("div",{ref:s,class:[a.be("item","label-wrap")],style:h},[(c=t.default)==null?void 0:c.call(t)])}else return ue(pt,{ref:s},[(d=t.default)==null?void 0:d.call(t)])}}});const Uz=Te({...Te({name:"ElFormItem"}),props:Bz,setup(e,{expose:t}){const r=e,n=Ra(),a=ft(sl,void 0),s=ft(li,void 0),o=Na(void 0,{formItem:!1}),i=ct("form-item"),l=us().value,u=ee([]),c=ee(""),d=R9(c,100),p=ee(""),b=ee();let m,h=!1;const v=W(()=>r.labelPosition||(a==null?void 0:a.labelPosition)),y=W(()=>{if(v.value==="top")return{};const xe=ea(r.labelWidth||(a==null?void 0:a.labelWidth)||"");return xe?{width:xe}:{}}),T=W(()=>{if(v.value==="top"||a!=null&&a.inline)return{};if(!r.label&&!r.labelWidth&&N)return{};const xe=ea(r.labelWidth||(a==null?void 0:a.labelWidth)||"");return!r.label&&!n.label?{marginLeft:xe}:{}}),S=W(()=>[i.b(),i.m(o.value),i.is("error",c.value==="error"),i.is("validating",c.value==="validating"),i.is("success",c.value==="success"),i.is("required",R.value||r.required),i.is("no-asterisk",a==null?void 0:a.hideRequiredAsterisk),(a==null?void 0:a.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[i.m("feedback")]:a==null?void 0:a.statusIcon,[i.m(`label-${v.value}`)]:v.value}]),w=W(()=>tn(r.inlineMessage)?r.inlineMessage:(a==null?void 0:a.inlineMessage)||!1),C=W(()=>[i.e("error"),{[i.em("error","inline")]:w.value}]),k=W(()=>r.prop?mt(r.prop)?r.prop:r.prop.join("."):""),f=W(()=>!!(r.label||n.label)),O=W(()=>r.for||(u.value.length===1?u.value[0]:void 0)),E=W(()=>!O.value&&f.value),N=!!s,$=W(()=>{const xe=a==null?void 0:a.model;if(!(!xe||!r.prop))return gf(xe,r.prop).value}),L=W(()=>{const{required:xe}=r,ze=[];r.rules&&ze.push(...ka(r.rules));const Ne=a==null?void 0:a.rules;if(Ne&&r.prop){const rt=gf(Ne,r.prop).value;rt&&ze.push(...ka(rt))}if(xe!==void 0){const rt=ze.map((X,re)=>[X,re]).filter(([X])=>Object.keys(X).includes("required"));if(rt.length>0)for(const[X,re]of rt)X.required!==xe&&(ze[re]={...X,required:xe});else ze.push({required:xe})}return ze}),B=W(()=>L.value.length>0),F=xe=>L.value.filter(Ne=>!Ne.trigger||!xe?!0:Ue(Ne.trigger)?Ne.trigger.includes(xe):Ne.trigger===xe).map(({trigger:Ne,...rt})=>rt),R=W(()=>L.value.some(xe=>xe.required)),H=W(()=>{var xe;return d.value==="error"&&r.showMessage&&((xe=a==null?void 0:a.showMessage)!=null?xe:!0)}),q=W(()=>`${r.label||""}${(a==null?void 0:a.labelSuffix)||""}`),M=xe=>{c.value=xe},D=xe=>{var ze,Ne;const{errors:rt,fields:X}=xe;(!rt||!X)&&console.error(xe),M("error"),p.value=rt?(Ne=(ze=rt==null?void 0:rt[0])==null?void 0:ze.message)!=null?Ne:`${r.prop} is required`:"",a==null||a.emit("validate",r.prop,!1,p.value)},Y=()=>{M("success"),a==null||a.emit("validate",r.prop,!0,"")},Z=async xe=>{const ze=k.value;return new sc({[ze]:xe}).validate({[ze]:$.value},{firstFields:!0}).then(()=>(Y(),!0)).catch(rt=>(D(rt),Promise.reject(rt)))},se=async(xe,ze)=>{if(h||!r.prop)return!1;const Ne=et(ze);if(!B.value)return ze==null||ze(!1),!1;const rt=F(xe);return rt.length===0?(ze==null||ze(!0),!0):(M("validating"),Z(rt).then(()=>(ze==null||ze(!0),!0)).catch(X=>{const{fields:re}=X;return ze==null||ze(!1,re),Ne?!1:Promise.reject(re)}))},ne=()=>{M(""),p.value="",h=!1},me=async()=>{const xe=a==null?void 0:a.model;if(!xe||!r.prop)return;const ze=gf(xe,r.prop);h=!0,ze.value=Ow(m),await xt(),ne(),h=!1},ve=xe=>{u.value.includes(xe)||u.value.push(xe)},We=xe=>{u.value=u.value.filter(ze=>ze!==xe)};tt(()=>r.error,xe=>{p.value=xe||"",M(xe?"error":"")},{immediate:!0}),tt(()=>r.validateStatus,xe=>M(xe||""));const Ke=sn({...Ms(r),$el:b,size:o,validateState:c,labelId:l,inputIds:u,isGroup:E,hasLabel:f,fieldValue:$,addInputId:ve,removeInputId:We,resetField:me,clearValidate:ne,validate:se});return Fr(li,Ke),Kt(()=>{r.prop&&(a==null||a.addField(Ke),m=Ow($.value))}),Ur(()=>{a==null||a.removeField(Ke)}),t({size:o,validateMessage:p,validateState:c,validate:se,clearValidate:ne,resetField:me}),(xe,ze)=>{var Ne;return G(),le("div",{ref_key:"formItemRef",ref:b,class:Q(_(S)),role:_(E)?"group":void 0,"aria-labelledby":_(E)?_(l):void 0},[ue(_(jz),{"is-auto-width":_(y).width==="auto","update-all":((Ne=_(a))==null?void 0:Ne.labelWidth)==="auto"},{default:ie(()=>[_(f)?(G(),Le(br(_(O)?"label":"div"),{key:0,id:_(l),for:_(O),class:Q(_(i).e("label")),style:Dt(_(y))},{default:ie(()=>[De(xe.$slots,"label",{label:_(q)},()=>[ot(He(_(q)),1)])]),_:3},8,["id","for","class","style"])):Oe("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),K("div",{class:Q(_(i).e("content")),style:Dt(_(T))},[De(xe.$slots,"default"),ue(PF,{name:`${_(i).namespace.value}-zoom-in-top`},{default:ie(()=>[_(H)?De(xe.$slots,"error",{key:0,error:p.value},()=>[K("div",{class:Q(_(C))},He(p.value),3)]):Oe("v-if",!0)]),_:3},8,["name"])],6)],10,["role","aria-labelledby"])}}});var bA=_t(Uz,[["__file","form-item.vue"]]);const qz=Lr(sz,{FormItem:bA}),Vz=si(bA),Hz=vt({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:qs,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:e=>e===null||Zt(e)||["min","max"].includes(e),default:null},name:String,placeholder:String,precision:{type:Number,validator:e=>e>=0&&e===Number.parseInt(`${e}`,10)},validateEvent:{type:Boolean,default:!0},...Vs(["ariaLabel"])}),zz={[wf]:(e,t)=>t!==e,blur:e=>e instanceof FocusEvent,focus:e=>e instanceof FocusEvent,[_f]:e=>Zt(e)||Aa(e),[qr]:e=>Zt(e)||Aa(e)},Wz=Te({...Te({name:"ElInputNumber"}),props:Hz,emits:zz,setup(e,{expose:t,emit:r}){const n=e,{t:a}=zr(),s=ct("input-number"),o=ee(),i=sn({currentValue:n.modelValue,userInput:null}),{formItem:l}=go(),u=W(()=>Zt(n.modelValue)&&n.modelValue<=n.min),c=W(()=>Zt(n.modelValue)&&n.modelValue>=n.max),d=W(()=>{const R=y(n.step);return Rr(n.precision)?Math.max(y(n.modelValue),R):(R>n.precision,n.precision)}),p=W(()=>n.controls&&n.controlsPosition==="right"),b=Na(),m=Hu(),h=W(()=>{if(i.userInput!==null)return i.userInput;let R=i.currentValue;if(Aa(R))return"";if(Zt(R)){if(Number.isNaN(R))return"";Rr(n.precision)||(R=R.toFixed(n.precision))}return R}),v=(R,H)=>{if(Rr(H)&&(H=d.value),H===0)return Math.round(R);let q=String(R);const M=q.indexOf(".");if(M===-1||!q.replace(".","").split("")[M+H])return R;const Z=q.length;return q.charAt(Z-1)==="5"&&(q=`${q.slice(0,Math.max(0,Z-1))}6`),Number.parseFloat(Number(q).toFixed(H))},y=R=>{if(Aa(R))return 0;const H=R.toString(),q=H.indexOf(".");let M=0;return q!==-1&&(M=H.length-q-1),M},T=(R,H=1)=>Zt(R)?v(R+n.step*H):i.currentValue,S=()=>{if(n.readonly||m.value||c.value)return;const R=Number(h.value)||0,H=T(R);k(H),r(_f,i.currentValue),B()},w=()=>{if(n.readonly||m.value||u.value)return;const R=Number(h.value)||0,H=T(R,-1);k(H),r(_f,i.currentValue),B()},C=(R,H)=>{const{max:q,min:M,step:D,precision:Y,stepStrictly:Z,valueOnClear:se}=n;q<M&&ju("InputNumber","min should not be greater than max.");let ne=Number(R);if(Aa(R)||Number.isNaN(ne))return null;if(R===""){if(se===null)return null;ne=mt(se)?{min:M,max:q}[se]:se}return Z&&(ne=v(Math.round(ne/D)*D,Y),ne!==R&&H&&r(qr,ne)),Rr(Y)||(ne=v(ne,Y)),(ne>q||ne<M)&&(ne=ne>q?q:M,H&&r(qr,ne)),ne},k=(R,H=!0)=>{var q;const M=i.currentValue,D=C(R);if(!H){r(qr,D);return}M===D&&R||(i.userInput=null,r(qr,D),M!==D&&r(wf,D,M),n.validateEvent&&((q=l==null?void 0:l.validate)==null||q.call(l,"change").catch(Y=>void 0)),i.currentValue=D)},f=R=>{i.userInput=R;const H=R===""?null:Number(R);r(_f,H),k(H,!1)},O=R=>{const H=R!==""?Number(R):"";(Zt(H)&&!Number.isNaN(H)||R==="")&&k(H),B(),i.userInput=null},E=()=>{var R,H;(H=(R=o.value)==null?void 0:R.focus)==null||H.call(R)},N=()=>{var R,H;(H=(R=o.value)==null?void 0:R.blur)==null||H.call(R)},$=R=>{r("focus",R)},L=R=>{var H,q;i.userInput=null,Sk()&&i.currentValue===null&&((H=o.value)!=null&&H.input)&&(o.value.input.value=""),r("blur",R),n.validateEvent&&((q=l==null?void 0:l.validate)==null||q.call(l,"blur").catch(M=>void 0))},B=()=>{i.currentValue!==n.modelValue&&(i.currentValue=n.modelValue)},F=R=>{document.activeElement===R.target&&R.preventDefault()};return tt(()=>n.modelValue,(R,H)=>{const q=C(R,!0);i.userInput===null&&q!==H&&(i.currentValue=q)},{immediate:!0}),Kt(()=>{var R;const{min:H,max:q,modelValue:M}=n,D=(R=o.value)==null?void 0:R.input;if(D.setAttribute("role","spinbutton"),Number.isFinite(q)?D.setAttribute("aria-valuemax",String(q)):D.removeAttribute("aria-valuemax"),Number.isFinite(H)?D.setAttribute("aria-valuemin",String(H)):D.removeAttribute("aria-valuemin"),D.setAttribute("aria-valuenow",i.currentValue||i.currentValue===0?String(i.currentValue):""),D.setAttribute("aria-disabled",String(m.value)),!Zt(M)&&M!=null){let Y=Number(M);Number.isNaN(Y)&&(Y=null),r(qr,Y)}D.addEventListener("wheel",F,{passive:!1})}),Ji(()=>{var R,H;const q=(R=o.value)==null?void 0:R.input;q==null||q.setAttribute("aria-valuenow",`${(H=i.currentValue)!=null?H:""}`)}),t({focus:E,blur:N}),(R,H)=>(G(),le("div",{class:Q([_(s).b(),_(s).m(_(b)),_(s).is("disabled",_(m)),_(s).is("without-controls",!R.controls),_(s).is("controls-right",_(p))]),onDragstart:Pt(()=>{},["prevent"])},[R.controls?qt((G(),le("span",{key:0,role:"button","aria-label":_(a)("el.inputNumber.decrease"),class:Q([_(s).e("decrease"),_(s).is("disabled",_(u))]),onKeydown:Wr(w,["enter"])},[De(R.$slots,"decrease-icon",{},()=>[ue(_(Ct),null,{default:ie(()=>[_(p)?(G(),Le(_(Tf),{key:0})):(G(),Le(_(Pj),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[_(Jf),w]]):Oe("v-if",!0),R.controls?qt((G(),le("span",{key:1,role:"button","aria-label":_(a)("el.inputNumber.increase"),class:Q([_(s).e("increase"),_(s).is("disabled",_(c))]),onKeydown:Wr(S,["enter"])},[De(R.$slots,"increase-icon",{},()=>[ue(_(Ct),null,{default:ie(()=>[_(p)?(G(),Le(_(kv),{key:0})):(G(),Le(_($j),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[_(Jf),S]]):Oe("v-if",!0),ue(_(Hs),{id:R.id,ref_key:"input",ref:o,type:"number",step:R.step,"model-value":_(h),placeholder:R.placeholder,readonly:R.readonly,disabled:_(m),size:_(b),max:R.max,min:R.min,name:R.name,"aria-label":R.ariaLabel,"validate-event":!1,onKeydown:[Wr(Pt(S,["prevent"]),["up"]),Wr(Pt(w,["prevent"]),["down"])],onBlur:L,onFocus:$,onInput:f,onChange:O},nx({_:2},[R.$slots.prefix?{name:"prefix",fn:ie(()=>[De(R.$slots,"prefix")])}:void 0,R.$slots.suffix?{name:"suffix",fn:ie(()=>[De(R.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var Kz=_t(Wz,[["__file","input-number.vue"]]);const Gz=Lr(Kz);function Yz(){const e=Zr(),t=ee(0),r=11,n=W(()=>({minWidth:`${Math.max(t.value,r)}px`}));return Zn(e,()=>{var s,o;t.value=(o=(s=e.value)==null?void 0:s.getBoundingClientRect().width)!=null?o:0}),{calculatorRef:e,calculatorWidth:t,inputStyle:n}}const Jz=vt({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:{type:String,default:""},target:{type:String,default:"_self"},icon:{type:Ma}}),Xz=Te({...Te({name:"ElLink"}),props:Jz,emits:{click:e=>e instanceof MouseEvent},setup(e,{emit:t}){const r=e,n=ct("link"),a=W(()=>[n.b(),n.m(r.type),n.is("disabled",r.disabled),n.is("underline",r.underline&&!r.disabled)]);function s(o){r.disabled||t("click",o)}return(o,i)=>(G(),le("a",{class:Q(_(a)),href:o.disabled||!o.href?void 0:o.href,target:o.disabled||!o.href?void 0:o.target,onClick:s},[o.icon?(G(),Le(_(Ct),{key:0},{default:ie(()=>[(G(),Le(br(o.icon)))]),_:1})):Oe("v-if",!0),o.$slots.default?(G(),le("span",{key:1,class:Q(_(n).e("inner"))},[De(o.$slots,"default")],2)):Oe("v-if",!0),o.$slots.icon?De(o.$slots,"icon",{key:2}):Oe("v-if",!0)],10,["href","target"]))}});var Qz=_t(Xz,[["__file","link.vue"]]);const wA=Lr(Qz),_A=Symbol("ElSelectGroup"),ap=Symbol("ElSelect");function Zz(e,t){const r=ft(ap),n=ft(_A,{disabled:!1}),a=W(()=>c(ka(r.props.modelValue),e.value)),s=W(()=>{var b;if(r.props.multiple){const m=ka((b=r.props.modelValue)!=null?b:[]);return!a.value&&m.length>=r.props.multipleLimit&&r.props.multipleLimit>0}else return!1}),o=W(()=>e.label||(Rt(e.value)?"":e.value)),i=W(()=>e.value||e.label||""),l=W(()=>e.disabled||t.groupDisabled||s.value),u=Vt(),c=(b=[],m)=>{if(Rt(e.value)){const h=r.props.valueKey;return b&&b.some(v=>Gt(fn(v,h))===fn(m,h))}else return b&&b.includes(m)},d=()=>{!e.disabled&&!n.disabled&&(r.states.hoveringIndex=r.optionsArray.indexOf(u.proxy))},p=b=>{const m=new RegExp(aV(b),"i");t.visible=m.test(o.value)||e.created};return tt(()=>o.value,()=>{!e.created&&!r.props.remote&&r.setSelected()}),tt(()=>e.value,(b,m)=>{const{remote:h,valueKey:v}=r.props;if(b!==m&&(r.onOptionDestroy(m,u.proxy),r.onOptionCreate(u.proxy)),!e.created&&!h){if(v&&Rt(b)&&Rt(m)&&b[v]===m[v])return;r.setSelected()}}),tt(()=>n.disabled,()=>{t.groupDisabled=n.disabled},{immediate:!0}),{select:r,currentLabel:o,currentValue:i,itemSelected:a,isDisabled:l,hoverItem:d,updateOption:p}}const eW=Te({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(e){const t=ct("select"),r=us(),n=W(()=>[t.be("dropdown","item"),t.is("disabled",_(i)),t.is("selected",_(o)),t.is("hovering",_(p))]),a=sn({index:-1,groupDisabled:!1,visible:!0,hover:!1}),{currentLabel:s,itemSelected:o,isDisabled:i,select:l,hoverItem:u,updateOption:c}=Zz(e,a),{visible:d,hover:p}=Ms(a),b=Vt().proxy;l.onOptionCreate(b),Ur(()=>{const h=b.value,{selected:v}=l.states,y=v.some(T=>T.value===b.value);xt(()=>{l.states.cachedOptions.get(h)===b&&!y&&l.states.cachedOptions.delete(h)}),l.onOptionDestroy(h,b)});function m(){i.value||l.handleOptionSelect(b)}return{ns:t,id:r,containerKls:n,currentLabel:s,itemSelected:o,isDisabled:i,select:l,hoverItem:u,updateOption:c,visible:d,hover:p,selectOptionClick:m,states:a}}});function tW(e,t,r,n,a,s){return qt((G(),le("li",{id:e.id,class:Q(e.containerKls),role:"option","aria-disabled":e.isDisabled||void 0,"aria-selected":e.itemSelected,onMousemove:e.hoverItem,onClick:Pt(e.selectOptionClick,["stop"])},[De(e.$slots,"default",{},()=>[K("span",null,He(e.currentLabel),1)])],42,["id","aria-disabled","aria-selected","onMousemove","onClick"])),[[Sr,e.visible]])}var _y=_t(eW,[["render",tW],["__file","option.vue"]]);const rW=Te({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=ft(ap),t=ct("select"),r=W(()=>e.props.popperClass),n=W(()=>e.props.multiple),a=W(()=>e.props.fitInputWidth),s=ee("");function o(){var i;s.value=`${(i=e.selectRef)==null?void 0:i.offsetWidth}px`}return Kt(()=>{o(),Zn(e.selectRef,o)}),{ns:t,minWidth:s,popperClass:r,isMultiple:n,isFitInputWidth:a}}});function nW(e,t,r,n,a,s){return G(),le("div",{class:Q([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:Dt({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[e.$slots.header?(G(),le("div",{key:0,class:Q(e.ns.be("dropdown","header"))},[De(e.$slots,"header")],2)):Oe("v-if",!0),De(e.$slots,"default"),e.$slots.footer?(G(),le("div",{key:1,class:Q(e.ns.be("dropdown","footer"))},[De(e.$slots,"footer")],2)):Oe("v-if",!0)],6)}var aW=_t(rW,[["render",nW],["__file","select-dropdown.vue"]]);const sW=(e,t)=>{const{t:r}=zr(),n=us(),a=ct("select"),s=ct("input"),o=sn({inputValue:"",options:new Map,cachedOptions:new Map,optionValues:[],selected:[],selectionWidth:0,collapseItemWidth:0,selectedLabel:"",hoveringIndex:-1,previousQuery:null,inputHovering:!1,menuVisibleOnFocus:!1,isBeforeHide:!1}),i=ee(null),l=ee(null),u=ee(null),c=ee(null),d=ee(null),p=ee(null),b=ee(null),m=ee(null),h=ee(null),v=ee(null),y=ee(null),{isComposing:T,handleCompositionStart:S,handleCompositionUpdate:w,handleCompositionEnd:C}=Ok({afterComposition:Ae=>bt(Ae)}),{wrapperRef:k,isFocused:f,handleBlur:O}=Cf(d,{beforeFocus(){return H.value},afterFocus(){e.automaticDropdown&&!E.value&&(E.value=!0,o.menuVisibleOnFocus=!0)},beforeBlur(Ae){var at,Bt;return((at=u.value)==null?void 0:at.isFocusInsideContent(Ae))||((Bt=c.value)==null?void 0:Bt.isFocusInsideContent(Ae))},afterBlur(){E.value=!1,o.menuVisibleOnFocus=!1}}),E=ee(!1),N=ee(),{form:$,formItem:L}=go(),{inputId:B}=xf(e,{formItemContext:L}),{valueOnClear:F,isEmptyValue:R}=fk(e),H=W(()=>e.disabled||($==null?void 0:$.disabled)),q=W(()=>Ue(e.modelValue)?e.modelValue.length>0:!R(e.modelValue)),M=W(()=>{var Ae;return(Ae=$==null?void 0:$.statusIcon)!=null?Ae:!1}),D=W(()=>e.clearable&&!H.value&&o.inputHovering&&q.value),Y=W(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),Z=W(()=>a.is("reverse",Y.value&&E.value)),se=W(()=>(L==null?void 0:L.validateState)||""),ne=W(()=>_k[se.value]),me=W(()=>e.remote?300:0),ve=W(()=>e.remote&&!o.inputValue&&o.options.size===0),We=W(()=>e.loading?e.loadingText||r("el.select.loading"):e.filterable&&o.inputValue&&o.options.size>0&&Ke.value===0?e.noMatchText||r("el.select.noMatch"):o.options.size===0?e.noDataText||r("el.select.noData"):null),Ke=W(()=>xe.value.filter(Ae=>Ae.visible).length),xe=W(()=>{const Ae=Array.from(o.options.values()),at=[];return o.optionValues.forEach(Bt=>{const Or=Ae.findIndex(Yr=>Yr.value===Bt);Or>-1&&at.push(Ae[Or])}),at.length>=Ae.length?at:Ae}),ze=W(()=>Array.from(o.cachedOptions.values())),Ne=W(()=>{const Ae=xe.value.filter(at=>!at.created).some(at=>at.currentLabel===o.inputValue);return e.filterable&&e.allowCreate&&o.inputValue!==""&&!Ae}),rt=()=>{e.filterable&&et(e.filterMethod)||e.filterable&&e.remote&&et(e.remoteMethod)||xe.value.forEach(Ae=>{var at;(at=Ae.updateOption)==null||at.call(Ae,o.inputValue)})},X=Na(),re=W(()=>["small"].includes(X.value)?"small":"default"),ge=W({get(){return E.value&&!ve.value},set(Ae){E.value=Ae}}),Re=W(()=>{if(e.multiple&&!Rr(e.modelValue))return ka(e.modelValue).length===0&&!o.inputValue;const Ae=Ue(e.modelValue)?e.modelValue[0]:e.modelValue;return e.filterable||Rr(Ae)?!o.inputValue:!0}),Se=W(()=>{var Ae;const at=(Ae=e.placeholder)!=null?Ae:r("el.select.placeholder");return e.multiple||!q.value?at:o.selectedLabel}),ke=W(()=>_v?null:"mouseenter");tt(()=>e.modelValue,(Ae,at)=>{e.multiple&&e.filterable&&!e.reserveKeyword&&(o.inputValue="",qe("")),Me(),!Ro(Ae,at)&&e.validateEvent&&(L==null||L.validate("change").catch(Bt=>void 0))},{flush:"post",deep:!0}),tt(()=>E.value,Ae=>{Ae?qe(o.inputValue):(o.inputValue="",o.previousQuery=null,o.isBeforeHide=!0),t("visible-change",Ae)}),tt(()=>o.options.entries(),()=>{dr&&(Me(),e.defaultFirstOption&&(e.filterable||e.remote)&&Ke.value&&Pe())},{flush:"post"}),tt(()=>o.hoveringIndex,Ae=>{Zt(Ae)&&Ae>-1?N.value=xe.value[Ae]||{}:N.value={},xe.value.forEach(at=>{at.hover=N.value===at})}),Bs(()=>{o.isBeforeHide||rt()});const qe=Ae=>{o.previousQuery===Ae||T.value||(o.previousQuery=Ae,e.filterable&&et(e.filterMethod)?e.filterMethod(Ae):e.filterable&&e.remote&&et(e.remoteMethod)&&e.remoteMethod(Ae),e.defaultFirstOption&&(e.filterable||e.remote)&&Ke.value?xt(Pe):xt(nt))},Pe=()=>{const Ae=xe.value.filter(Yr=>Yr.visible&&!Yr.disabled&&!Yr.states.groupDisabled),at=Ae.find(Yr=>Yr.created),Bt=Ae[0],Or=xe.value.map(Yr=>Yr.value);o.hoveringIndex=V(Or,at||Bt)},Me=()=>{if(e.multiple)o.selectedLabel="";else{const at=Ue(e.modelValue)?e.modelValue[0]:e.modelValue,Bt=$e(at);o.selectedLabel=Bt.currentLabel,o.selected=[Bt];return}const Ae=[];Rr(e.modelValue)||ka(e.modelValue).forEach(at=>{Ae.push($e(at))}),o.selected=Ae},$e=Ae=>{let at;const Bt=fg(Ae);for(let gs=o.cachedOptions.size-1;gs>=0;gs--){const Jr=ze.value[gs];if(Bt?fn(Jr.value,e.valueKey)===fn(Ae,e.valueKey):Jr.value===Ae){at={value:Ae,currentLabel:Jr.currentLabel,get isDisabled(){return Jr.isDisabled}};break}}if(at)return at;const Or=Bt?Ae.label:Ae??"";return{value:Ae,currentLabel:Or}},nt=()=>{o.hoveringIndex=xe.value.findIndex(Ae=>o.selected.some(at=>hs(at)===hs(Ae)))},Ge=()=>{o.selectionWidth=l.value.getBoundingClientRect().width},ye=()=>{o.collapseItemWidth=v.value.getBoundingClientRect().width},Ce=()=>{var Ae,at;(at=(Ae=u.value)==null?void 0:Ae.updatePopper)==null||at.call(Ae)},it=()=>{var Ae,at;(at=(Ae=c.value)==null?void 0:Ae.updatePopper)==null||at.call(Ae)},Et=()=>{o.inputValue.length>0&&!E.value&&(E.value=!0),qe(o.inputValue)},bt=Ae=>{if(o.inputValue=Ae.target.value,e.remote)pr();else return Et()},pr=Is(()=>{Et()},me.value),Ot=Ae=>{Ro(e.modelValue,Ae)||t(wf,Ae)},kr=Ae=>m8(Ae,at=>{const Bt=o.cachedOptions.get(at);return Bt&&!Bt.disabled&&!Bt.states.groupDisabled}),mr=Ae=>{if(e.multiple&&Ae.code!==ar.delete&&Ae.target.value.length<=0){const at=ka(e.modelValue).slice(),Bt=kr(at);if(Bt<0)return;const Or=at[Bt];at.splice(Bt,1),t(qr,at),Ot(at),t("remove-tag",Or)}},ce=(Ae,at)=>{const Bt=o.selected.indexOf(at);if(Bt>-1&&!H.value){const Or=ka(e.modelValue).slice();Or.splice(Bt,1),t(qr,Or),Ot(Or),t("remove-tag",at.value)}Ae.stopPropagation(),Ir()},fe=Ae=>{Ae.stopPropagation();const at=e.multiple?[]:F.value;if(e.multiple)for(const Bt of o.selected)Bt.isDisabled&&at.push(Bt.value);t(qr,at),Ot(at),o.hoveringIndex=-1,E.value=!1,t("clear"),Ir()},J=Ae=>{var at;if(e.multiple){const Bt=ka((at=e.modelValue)!=null?at:[]).slice(),Or=V(Bt,Ae);Or>-1?Bt.splice(Or,1):(e.multipleLimit<=0||Bt.length<e.multipleLimit)&&Bt.push(Ae.value),t(qr,Bt),Ot(Bt),Ae.created&&qe(""),e.filterable&&!e.reserveKeyword&&(o.inputValue="")}else t(qr,Ae.value),Ot(Ae.value),E.value=!1;Ir(),!E.value&&xt(()=>{_e(Ae)})},V=(Ae=[],at)=>Rr(at)?-1:Rt(at.value)?Ae.findIndex(Bt=>Ro(fn(Bt,e.valueKey),hs(at))):Ae.indexOf(at.value),_e=Ae=>{var at,Bt,Or,Yr,gs;const Jr=Ue(Ae)?Ae[0]:Ae;let qn=null;if(Jr!=null&&Jr.value){const Vn=xe.value.filter(wi=>wi.value===Jr.value);Vn.length>0&&(qn=Vn[0].$el)}if(u.value&&qn){const Vn=(Yr=(Or=(Bt=(at=u.value)==null?void 0:at.popperRef)==null?void 0:Bt.contentRef)==null?void 0:Or.querySelector)==null?void 0:Yr.call(Or,`.${a.be("dropdown","wrap")}`);Vn&&aj(Vn,qn)}(gs=y.value)==null||gs.handleScroll()},Xe=Ae=>{o.options.set(Ae.value,Ae),o.cachedOptions.set(Ae.value,Ae)},dt=(Ae,at)=>{o.options.get(Ae)===at&&o.options.delete(Ae)},gt=W(()=>{var Ae,at;return(at=(Ae=u.value)==null?void 0:Ae.popperRef)==null?void 0:at.contentRef}),gr=()=>{o.isBeforeHide=!1,xt(()=>_e(o.selected))},Ir=()=>{var Ae;(Ae=d.value)==null||Ae.focus()},Ar=()=>{var Ae;if(E.value){E.value=!1,xt(()=>{var at;return(at=d.value)==null?void 0:at.blur()});return}(Ae=d.value)==null||Ae.blur()},Gr=Ae=>{fe(Ae)},Lt=Ae=>{if(E.value=!1,f.value){const at=new FocusEvent("focus",Ae);xt(()=>O(at))}},sr=()=>{o.inputValue.length>0?o.inputValue="":E.value=!1},rn=()=>{H.value||(_v&&(o.inputHovering=!0),o.menuVisibleOnFocus?o.menuVisibleOnFocus=!1:E.value=!E.value)},Al=()=>{if(!E.value)rn();else{const Ae=xe.value[o.hoveringIndex];Ae&&!Ae.isDisabled&&J(Ae)}},hs=Ae=>Rt(Ae.value)?fn(Ae.value,e.valueKey):Ae.value,yi=W(()=>xe.value.filter(Ae=>Ae.visible).every(Ae=>Ae.isDisabled)),Un=W(()=>e.multiple?e.collapseTags?o.selected.slice(0,e.maxCollapseTags):o.selected:[]),Sa=W(()=>e.multiple?e.collapseTags?o.selected.slice(e.maxCollapseTags):[]:[]),Ha=Ae=>{if(!E.value){E.value=!0;return}if(!(o.options.size===0||Ke.value===0||T.value)&&!yi.value){Ae==="next"?(o.hoveringIndex++,o.hoveringIndex===o.options.size&&(o.hoveringIndex=0)):Ae==="prev"&&(o.hoveringIndex--,o.hoveringIndex<0&&(o.hoveringIndex=o.options.size-1));const at=xe.value[o.hoveringIndex];(at.isDisabled||!at.visible)&&Ha(Ae),xt(()=>_e(N.value))}},ms=()=>{if(!l.value)return 0;const Ae=window.getComputedStyle(l.value);return Number.parseFloat(Ae.gap||"6px")},bi=W(()=>{const Ae=ms();return{maxWidth:`${v.value&&e.maxCollapseTags===1?o.selectionWidth-o.collapseItemWidth-Ae:o.selectionWidth}px`}}),Ol=W(()=>({maxWidth:`${o.selectionWidth}px`}));return Zn(l,Ge),Zn(m,Ce),Zn(k,Ce),Zn(h,it),Zn(v,ye),Kt(()=>{Me()}),{inputId:B,contentId:n,nsSelect:a,nsInput:s,states:o,isFocused:f,expanded:E,optionsArray:xe,hoverOption:N,selectSize:X,filteredOptionsCount:Ke,updateTooltip:Ce,updateTagTooltip:it,debouncedOnInputChange:pr,onInput:bt,deletePrevTag:mr,deleteTag:ce,deleteSelected:fe,handleOptionSelect:J,scrollToOption:_e,hasModelValue:q,shouldShowPlaceholder:Re,currentPlaceholder:Se,mouseEnterEventName:ke,needStatusIcon:M,showClose:D,iconComponent:Y,iconReverse:Z,validateState:se,validateIcon:ne,showNewOption:Ne,updateOptions:rt,collapseTagSize:re,setSelected:Me,selectDisabled:H,emptyText:We,handleCompositionStart:S,handleCompositionUpdate:w,handleCompositionEnd:C,onOptionCreate:Xe,onOptionDestroy:dt,handleMenuEnter:gr,focus:Ir,blur:Ar,handleClearClick:Gr,handleClickOutside:Lt,handleEsc:sr,toggleMenu:rn,selectOption:Al,getValueKey:hs,navigateOptions:Ha,dropdownMenuVisible:ge,showTagList:Un,collapseTagList:Sa,tagStyle:bi,collapseTagStyle:Ol,popperRef:gt,inputRef:d,tooltipRef:u,tagTooltipRef:c,prefixRef:p,suffixRef:b,selectRef:i,wrapperRef:k,selectionRef:l,scrollbarRef:y,menuRef:m,tagMenuRef:h,collapseItemRef:v}};var oW=Te({name:"ElOptions",setup(e,{slots:t}){const r=ft(ap);let n=[];return()=>{var a,s;const o=(a=t.default)==null?void 0:a.call(t),i=[];function l(u){Ue(u)&&u.forEach(c=>{var d,p,b,m;const h=(d=(c==null?void 0:c.type)||{})==null?void 0:d.name;h==="ElOptionGroup"?l(!mt(c.children)&&!Ue(c.children)&&et((p=c.children)==null?void 0:p.default)?(b=c.children)==null?void 0:b.default():c.children):h==="ElOption"?i.push((m=c.props)==null?void 0:m.value):Ue(c.children)&&l(c.children)})}return o.length&&l((s=o[0])==null?void 0:s.children),Ro(i,n)||(n=i,r&&(r.states.optionValues=i)),o}}});const iW=vt({name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:qs,effect:{type:Ye(String),default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Ye(Object),default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:ta.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Ma,default:qu},fitInputWidth:Boolean,suffixIcon:{type:Ma,default:Tf},tagType:{...Qv.type,default:"info"},tagEffect:{...Qv.effect,default:"light"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,showArrow:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:Ye(String),values:Gu,default:"bottom-start"},fallbackPlacements:{type:Ye(Array),default:["bottom-start","top-start","right","left"]},tabindex:{type:[String,Number],default:0},appendTo:String,...Tv,...Vs(["ariaLabel"])}),SA="ElSelect",lW=Te({name:SA,componentName:SA,components:{ElSelectMenu:aW,ElOption:_y,ElOptions:oW,ElTag:FI,ElScrollbar:kf,ElTooltip:ci,ElIcon:Ct},directives:{ClickOutside:ec},props:iW,emits:[qr,wf,"remove-tag","clear","visible-change","focus","blur"],setup(e,{emit:t}){const r=W(()=>{const{modelValue:l,multiple:u}=e,c=u?[]:void 0;return Ue(l)?u?l:c:u?c:l}),n=sn({...Ms(e),modelValue:r}),a=sW(n,t),{calculatorRef:s,inputStyle:o}=Yz();Fr(ap,sn({props:n,states:a.states,optionsArray:a.optionsArray,handleOptionSelect:a.handleOptionSelect,onOptionCreate:a.onOptionCreate,onOptionDestroy:a.onOptionDestroy,selectRef:a.selectRef,setSelected:a.setSelected}));const i=W(()=>e.multiple?a.states.selected.map(l=>l.currentLabel):a.states.selectedLabel);return{...a,modelValue:r,selectedLabel:i,calculatorRef:s,inputStyle:o}}});function uW(e,t,r,n,a,s){const o=Cr("el-tag"),i=Cr("el-tooltip"),l=Cr("el-icon"),u=Cr("el-option"),c=Cr("el-options"),d=Cr("el-scrollbar"),p=Cr("el-select-menu"),b=Mg("click-outside");return qt((G(),le("div",{ref:"selectRef",class:Q([e.nsSelect.b(),e.nsSelect.m(e.selectSize)]),[gd(e.mouseEnterEventName)]:m=>e.states.inputHovering=!0,onMouseleave:m=>e.states.inputHovering=!1},[ue(i,{ref:"tooltipRef",visible:e.dropdownMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"popper-options":e.popperOptions,"fallback-placements":e.fallbackPlacements,effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,"append-to":e.appendTo,"show-arrow":e.showArrow,offset:e.offset,onBeforeShow:e.handleMenuEnter,onHide:m=>e.states.isBeforeHide=!1},{default:ie(()=>{var m;return[K("div",{ref:"wrapperRef",class:Q([e.nsSelect.e("wrapper"),e.nsSelect.is("focused",e.isFocused),e.nsSelect.is("hovering",e.states.inputHovering),e.nsSelect.is("filterable",e.filterable),e.nsSelect.is("disabled",e.selectDisabled)]),onClick:Pt(e.toggleMenu,["prevent"])},[e.$slots.prefix?(G(),le("div",{key:0,ref:"prefixRef",class:Q(e.nsSelect.e("prefix"))},[De(e.$slots,"prefix")],2)):Oe("v-if",!0),K("div",{ref:"selectionRef",class:Q([e.nsSelect.e("selection"),e.nsSelect.is("near",e.multiple&&!e.$slots.prefix&&!!e.states.selected.length)])},[e.multiple?De(e.$slots,"tag",{key:0},()=>[(G(!0),le(pt,null,$r(e.showTagList,h=>(G(),le("div",{key:e.getValueKey(h),class:Q(e.nsSelect.e("selected-item"))},[ue(o,{closable:!e.selectDisabled&&!h.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Dt(e.tagStyle),onClose:v=>e.deleteTag(v,h)},{default:ie(()=>[K("span",{class:Q(e.nsSelect.e("tags-text"))},[De(e.$slots,"label",{label:h.currentLabel,value:h.value},()=>[ot(He(h.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","style","onClose"])],2))),128)),e.collapseTags&&e.states.selected.length>e.maxCollapseTags?(G(),Le(i,{key:0,ref:"tagTooltipRef",disabled:e.dropdownMenuVisible||!e.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:ie(()=>[K("div",{ref:"collapseItemRef",class:Q(e.nsSelect.e("selected-item"))},[ue(o,{closable:!1,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",style:Dt(e.collapseTagStyle)},{default:ie(()=>[K("span",{class:Q(e.nsSelect.e("tags-text"))}," + "+He(e.states.selected.length-e.maxCollapseTags),3)]),_:1},8,["size","type","effect","style"])],2)]),content:ie(()=>[K("div",{ref:"tagMenuRef",class:Q(e.nsSelect.e("selection"))},[(G(!0),le(pt,null,$r(e.collapseTagList,h=>(G(),le("div",{key:e.getValueKey(h),class:Q(e.nsSelect.e("selected-item"))},[ue(o,{class:"in-tooltip",closable:!e.selectDisabled&&!h.isDisabled,size:e.collapseTagSize,type:e.tagType,effect:e.tagEffect,"disable-transitions":"",onClose:v=>e.deleteTag(v,h)},{default:ie(()=>[K("span",{class:Q(e.nsSelect.e("tags-text"))},[De(e.$slots,"label",{label:h.currentLabel,value:h.value},()=>[ot(He(h.currentLabel),1)])],2)]),_:2},1032,["closable","size","type","effect","onClose"])],2))),128))],2)]),_:3},8,["disabled","effect","teleported"])):Oe("v-if",!0)]):Oe("v-if",!0),K("div",{class:Q([e.nsSelect.e("selected-item"),e.nsSelect.e("input-wrapper"),e.nsSelect.is("hidden",!e.filterable)])},[qt(K("input",{id:e.inputId,ref:"inputRef","onUpdate:modelValue":h=>e.states.inputValue=h,type:"text",name:e.name,class:Q([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:Dt(e.inputStyle),tabindex:e.tabindex,role:"combobox",readonly:!e.filterable,spellcheck:"false","aria-activedescendant":((m=e.hoverOption)==null?void 0:m.id)||"","aria-controls":e.contentId,"aria-expanded":e.dropdownMenuVisible,"aria-label":e.ariaLabel,"aria-autocomplete":"none","aria-haspopup":"listbox",onKeydown:[Wr(Pt(h=>e.navigateOptions("next"),["stop","prevent"]),["down"]),Wr(Pt(h=>e.navigateOptions("prev"),["stop","prevent"]),["up"]),Wr(Pt(e.handleEsc,["stop","prevent"]),["esc"]),Wr(Pt(e.selectOption,["stop","prevent"]),["enter"]),Wr(Pt(e.deletePrevTag,["stop"]),["delete"])],onCompositionstart:e.handleCompositionStart,onCompositionupdate:e.handleCompositionUpdate,onCompositionend:e.handleCompositionEnd,onInput:e.onInput,onClick:Pt(e.toggleMenu,["stop"])},null,46,["id","onUpdate:modelValue","name","disabled","autocomplete","tabindex","readonly","aria-activedescendant","aria-controls","aria-expanded","aria-label","onKeydown","onCompositionstart","onCompositionupdate","onCompositionend","onInput","onClick"]),[[DF,e.states.inputValue]]),e.filterable?(G(),le("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:Q(e.nsSelect.e("input-calculator")),textContent:He(e.states.inputValue)},null,10,["textContent"])):Oe("v-if",!0)],2),e.shouldShowPlaceholder?(G(),le("div",{key:1,class:Q([e.nsSelect.e("selected-item"),e.nsSelect.e("placeholder"),e.nsSelect.is("transparent",!e.hasModelValue||e.expanded&&!e.states.inputValue)])},[e.hasModelValue?De(e.$slots,"label",{key:0,label:e.currentPlaceholder,value:e.modelValue},()=>[K("span",null,He(e.currentPlaceholder),1)]):(G(),le("span",{key:1},He(e.currentPlaceholder),1))],2)):Oe("v-if",!0)],2),K("div",{ref:"suffixRef",class:Q(e.nsSelect.e("suffix"))},[e.iconComponent&&!e.showClose?(G(),Le(l,{key:0,class:Q([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:ie(()=>[(G(),Le(br(e.iconComponent)))]),_:1},8,["class"])):Oe("v-if",!0),e.showClose&&e.clearIcon?(G(),Le(l,{key:1,class:Q([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.nsSelect.e("clear")]),onClick:e.handleClearClick},{default:ie(()=>[(G(),Le(br(e.clearIcon)))]),_:1},8,["class","onClick"])):Oe("v-if",!0),e.validateState&&e.validateIcon&&e.needStatusIcon?(G(),Le(l,{key:2,class:Q([e.nsInput.e("icon"),e.nsInput.e("validateIcon"),e.nsInput.is("loading",e.validateState==="validating")])},{default:ie(()=>[(G(),Le(br(e.validateIcon)))]),_:1},8,["class"])):Oe("v-if",!0)],2)],10,["onClick"])]}),content:ie(()=>[ue(p,{ref:"menuRef"},{default:ie(()=>[e.$slots.header?(G(),le("div",{key:0,class:Q(e.nsSelect.be("dropdown","header")),onClick:Pt(()=>{},["stop"])},[De(e.$slots,"header")],10,["onClick"])):Oe("v-if",!0),qt(ue(d,{id:e.contentId,ref:"scrollbarRef",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:Q([e.nsSelect.is("empty",e.filteredOptionsCount===0)]),role:"listbox","aria-label":e.ariaLabel,"aria-orientation":"vertical"},{default:ie(()=>[e.showNewOption?(G(),Le(u,{key:0,value:e.states.inputValue,created:!0},null,8,["value"])):Oe("v-if",!0),ue(c,null,{default:ie(()=>[De(e.$slots,"default")]),_:3})]),_:3},8,["id","wrap-class","view-class","class","aria-label"]),[[Sr,e.states.options.size>0&&!e.loading]]),e.$slots.loading&&e.loading?(G(),le("div",{key:1,class:Q(e.nsSelect.be("dropdown","loading"))},[De(e.$slots,"loading")],2)):e.loading||e.filteredOptionsCount===0?(G(),le("div",{key:2,class:Q(e.nsSelect.be("dropdown","empty"))},[De(e.$slots,"empty",{},()=>[K("span",null,He(e.emptyText),1)])],2)):Oe("v-if",!0),e.$slots.footer?(G(),le("div",{key:3,class:Q(e.nsSelect.be("dropdown","footer")),onClick:Pt(()=>{},["stop"])},[De(e.$slots,"footer")],10,["onClick"])):Oe("v-if",!0)]),_:3},512)]),_:3},8,["visible","placement","teleported","popper-class","popper-options","fallback-placements","effect","transition","persistent","append-to","show-arrow","offset","onBeforeShow","onHide"])],16,["onMouseleave"])),[[b,e.handleClickOutside,e.popperRef]])}var cW=_t(lW,[["render",uW],["__file","select.vue"]]);const dW=Te({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(e){const t=ct("select"),r=ee(null),n=Vt(),a=ee([]);Fr(_A,sn({...Ms(e)}));const s=W(()=>a.value.some(u=>u.visible===!0)),o=u=>{var c,d;return((c=u.type)==null?void 0:c.name)==="ElOption"&&!!((d=u.component)!=null&&d.proxy)},i=u=>{const c=ka(u),d=[];return c.forEach(p=>{var b,m;o(p)?d.push(p.component.proxy):(b=p.children)!=null&&b.length?d.push(...i(p.children)):(m=p.component)!=null&&m.subTree&&d.push(...i(p.component.subTree))}),d},l=()=>{a.value=i(n.subTree)};return Kt(()=>{l()}),U9(r,l,{attributes:!0,subtree:!0,childList:!0}),{groupRef:r,visible:s,ns:t}}});function fW(e,t,r,n,a,s){return qt((G(),le("ul",{ref:"groupRef",class:Q(e.ns.be("group","wrap"))},[K("li",{class:Q(e.ns.be("group","title"))},He(e.label),3),K("li",null,[K("ul",{class:Q(e.ns.b("group"))},[De(e.$slots,"default")],2)])],2)),[[Sr,e.visible]])}var TA=_t(dW,[["render",fW],["__file","option-group.vue"]]);const xA=Lr(cW,{Option:_y,OptionGroup:TA}),CA=si(_y);si(TA);const pW=vt({trigger:Zu.trigger,placement:hy.placement,disabled:Zu.disabled,visible:ta.visible,transition:ta.transition,popperOptions:hy.popperOptions,tabindex:hy.tabindex,content:ta.content,popperStyle:ta.popperStyle,popperClass:ta.popperClass,enterable:{...ta.enterable,default:!0},effect:{...ta.effect,default:"light"},teleported:ta.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),hW={"update:visible":e=>tn(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},mW="onUpdate:visible",gW=Te({...Te({name:"ElPopover"}),props:pW,emits:hW,setup(e,{expose:t,emit:r}){const n=e,a=W(()=>n[mW]),s=ct("popover"),o=ee(),i=W(()=>{var v;return(v=_(o))==null?void 0:v.popperRef}),l=W(()=>[{width:ea(n.width)},n.popperStyle]),u=W(()=>[s.b(),n.popperClass,{[s.m("plain")]:!!n.content}]),c=W(()=>n.transition===`${s.namespace.value}-fade-in-linear`),d=()=>{var v;(v=o.value)==null||v.hide()},p=()=>{r("before-enter")},b=()=>{r("before-leave")},m=()=>{r("after-enter")},h=()=>{r("update:visible",!1),r("after-leave")};return t({popperRef:i,hide:d}),(v,y)=>(G(),Le(_(ci),gn({ref_key:"tooltipRef",ref:o},v.$attrs,{trigger:v.trigger,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":_(u),"popper-style":_(l),teleported:v.teleported,persistent:v.persistent,"gpu-acceleration":_(c),"onUpdate:visible":_(a),onBeforeShow:p,onBeforeHide:b,onShow:m,onHide:h}),{content:ie(()=>[v.title?(G(),le("div",{key:0,class:Q(_(s).e("title")),role:"title"},He(v.title),3)):Oe("v-if",!0),De(v.$slots,"default",{},()=>[ot(He(v.content),1)])]),default:ie(()=>[v.$slots.reference?De(v.$slots,"reference",{key:0}):Oe("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var vW=_t(gW,[["__file","popover.vue"]]);const kA=(e,t)=>{const r=t.arg||t.value,n=r==null?void 0:r.popperRef;n&&(n.triggerRef=e)};var yW={mounted(e,t){kA(e,t)},updated(e,t){kA(e,t)}};const bW=sj(yW,"popover"),IA=Lr(vW,{directive:bW}),wW=vt({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Ye(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Ye([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Ye(Function),default:e=>`${e}%`}}),_W=Te({...Te({name:"ElProgress"}),props:wW,setup(e){const t=e,r={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=ct("progress"),a=W(()=>{const S={width:`${t.percentage}%`,animationDuration:`${t.duration}s`},w=T(t.percentage);return w.includes("gradient")?S.background=w:S.backgroundColor=w,S}),s=W(()=>(t.strokeWidth/t.width*100).toFixed(1)),o=W(()=>["circle","dashboard"].includes(t.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),i=W(()=>{const S=o.value,w=t.type==="dashboard";return`
          M 50 50
          m 0 ${w?"":"-"}${S}
          a ${S} ${S} 0 1 1 0 ${w?"-":""}${S*2}
          a ${S} ${S} 0 1 1 0 ${w?"":"-"}${S*2}
          `}),l=W(()=>2*Math.PI*o.value),u=W(()=>t.type==="dashboard"?.75:1),c=W(()=>`${-1*l.value*(1-u.value)/2}px`),d=W(()=>({strokeDasharray:`${l.value*u.value}px, ${l.value}px`,strokeDashoffset:c.value})),p=W(()=>({strokeDasharray:`${l.value*u.value*(t.percentage/100)}px, ${l.value}px`,strokeDashoffset:c.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),b=W(()=>{let S;return t.color?S=T(t.percentage):S=r[t.status]||r.default,S}),m=W(()=>t.status==="warning"?Iv:t.type==="line"?t.status==="success"?gk:qu:t.status==="success"?gj:al),h=W(()=>t.type==="line"?12+t.strokeWidth*.4:t.width*.111111+2),v=W(()=>t.format(t.percentage));function y(S){const w=100/S.length;return S.map((k,f)=>mt(k)?{color:k,percentage:(f+1)*w}:k).sort((k,f)=>k.percentage-f.percentage)}const T=S=>{var w;const{color:C}=t;if(et(C))return C(S);if(mt(C))return C;{const k=y(C);for(const f of k)if(f.percentage>S)return f.color;return(w=k[k.length-1])==null?void 0:w.color}};return(S,w)=>(G(),le("div",{class:Q([_(n).b(),_(n).m(S.type),_(n).is(S.status),{[_(n).m("without-text")]:!S.showText,[_(n).m("text-inside")]:S.textInside}]),role:"progressbar","aria-valuenow":S.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[S.type==="line"?(G(),le("div",{key:0,class:Q(_(n).b("bar"))},[K("div",{class:Q(_(n).be("bar","outer")),style:Dt({height:`${S.strokeWidth}px`})},[K("div",{class:Q([_(n).be("bar","inner"),{[_(n).bem("bar","inner","indeterminate")]:S.indeterminate},{[_(n).bem("bar","inner","striped")]:S.striped},{[_(n).bem("bar","inner","striped-flow")]:S.stripedFlow}]),style:Dt(_(a))},[(S.showText||S.$slots.default)&&S.textInside?(G(),le("div",{key:0,class:Q(_(n).be("bar","innerText"))},[De(S.$slots,"default",{percentage:S.percentage},()=>[K("span",null,He(_(v)),1)])],2)):Oe("v-if",!0)],6)],6)],2)):(G(),le("div",{key:1,class:Q(_(n).b("circle")),style:Dt({height:`${S.width}px`,width:`${S.width}px`})},[(G(),le("svg",{viewBox:"0 0 100 100"},[K("path",{class:Q(_(n).be("circle","track")),d:_(i),stroke:`var(${_(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":S.strokeLinecap,"stroke-width":_(s),fill:"none",style:Dt(_(d))},null,14,["d","stroke","stroke-linecap","stroke-width"]),K("path",{class:Q(_(n).be("circle","path")),d:_(i),stroke:_(b),fill:"none",opacity:S.percentage?1:0,"stroke-linecap":S.strokeLinecap,"stroke-width":_(s),style:Dt(_(p))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(S.showText||S.$slots.default)&&!S.textInside?(G(),le("div",{key:2,class:Q(_(n).e("text")),style:Dt({fontSize:`${_(h)}px`})},[De(S.$slots,"default",{percentage:S.percentage},()=>[S.status?(G(),Le(_(Ct),{key:1},{default:ie(()=>[(G(),Le(br(_(m))))]),_:1})):(G(),le("span",{key:0},He(_(v)),1))])],6)):Oe("v-if",!0)],10,["aria-valuenow"]))}});var SW=_t(_W,[["__file","progress.vue"]]);const TW=Lr(SW),xW=e=>["",...Uu].includes(e),Sy=function(e){var t;return(t=e.target)==null?void 0:t.closest("td")},CW=function(e,t,r,n,a){if(!t&&!n&&(!a||Ue(a)&&!a.length))return e;mt(r)?r=r==="descending"?-1:1:r=r&&r<0?-1:1;const s=n?null:function(i,l){return a?(Ue(a)||(a=[a]),a.map(u=>mt(u)?fn(i,u):u(i,l,e))):(t!=="$key"&&Rt(i)&&"$value"in i&&(i=i.$value),[Rt(i)?fn(i,t):i])},o=function(i,l){if(n)return n(i.value,l.value);for(let u=0,c=i.key.length;u<c;u++){if(i.key[u]<l.key[u])return-1;if(i.key[u]>l.key[u])return 1}return 0};return e.map((i,l)=>({value:i,index:l,key:s?s(i,l):null})).sort((i,l)=>{let u=o(i,l);return u||(u=i.index-l.index),u*+r}).map(i=>i.value)},AA=function(e,t){let r=null;return e.columns.forEach(n=>{n.id===t&&(r=n)}),r},kW=function(e,t){let r=null;for(let n=0;n<e.columns.length;n++){const a=e.columns[n];if(a.columnKey===t){r=a;break}}return r||ju("ElTable",`No column matching with column-key: ${t}`),r},OA=function(e,t,r){const n=(t.className||"").match(new RegExp(`${r}-table_[^\\s]+`,"gm"));return n?AA(e,n[0]):null},bn=(e,t)=>{if(!e)throw new Error("Row is required when get row identity");if(mt(t)){if(!t.includes("."))return`${e[t]}`;const r=t.split(".");let n=e;for(const a of r)n=n[a];return`${n}`}else if(et(t))return t.call(null,e)},oc=function(e,t){const r={};return(e||[]).forEach((n,a)=>{r[bn(n,t)]={row:n,index:a}}),r};function IW(e,t){const r={};let n;for(n in e)r[n]=e[n];for(n in t)if(Wt(t,n)){const a=t[n];Rr(a)||(r[n]=a)}return r}function Ty(e){return e===""||Rr(e)||(e=Number.parseInt(e,10),Number.isNaN(e)&&(e="")),e}function PA(e){return e===""||Rr(e)||(e=Ty(e),Number.isNaN(e)&&(e=80)),e}function AW(e){return Zt(e)?e:mt(e)?/^\d+(?:px)?$/.test(e)?Number.parseInt(e,10):e:null}function OW(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function sp(e,t,r,n,a,s){let o=s??0,i=!1;const l=e.indexOf(t),u=l!==-1,c=a==null?void 0:a.call(null,t,s),d=b=>{b==="add"?e.push(t):e.splice(l,1),i=!0},p=b=>{let m=0;const h=(n==null?void 0:n.children)&&b[n.children];return h&&Ue(h)&&(m+=h.length,h.forEach(v=>{m+=p(v)})),m};return(!a||c)&&(tn(r)?r&&!u?d("add"):!r&&u&&d("remove"):d(u?"remove":"add")),!(n!=null&&n.checkStrictly)&&(n!=null&&n.children)&&Ue(t[n.children])&&t[n.children].forEach(b=>{sp(e,b,r??!u,n,a,o+1),o+=p(b)+1}),i}function PW(e,t,r="children",n="hasChildren"){const a=o=>!(Ue(o)&&o.length);function s(o,i,l){t(o,i,l),i.forEach(u=>{if(u[n]){t(u,null,l+1);return}const c=u[r];a(c)||s(u,c,l+1)})}e.forEach(o=>{if(o[n]){t(o,null,0);return}const i=o[r];a(i)||s(o,i,0)})}const EA=(e,t)=>({content:t,...e,popperOptions:{strategy:"fixed",...e.popperOptions}});let Bn=null;function EW(e,t,r,n){if((Bn==null?void 0:Bn.trigger)===r){Ww(Bn.vm.component.props,EA(e,t));return}Bn==null||Bn();const a=n==null?void 0:n.refs.tableWrapper,s=a==null?void 0:a.dataset.prefix,o=ue(ci,{virtualTriggering:!0,virtualRef:r,appendTo:a,placement:"top",transition:"none",offset:0,hideAfter:0,...EA(e,t)});o.appContext={...n.appContext,...n};const i=document.createElement("div");po(o,i),o.component.exposed.onOpen();const l=a==null?void 0:a.querySelector(`.${s}-scrollbar__wrap`);Bn=()=>{po(null,i),l==null||l.removeEventListener("scroll",Bn),Bn=null},Bn.trigger=r,Bn.vm=o,l==null||l.addEventListener("scroll",Bn)}function $A(e){return e.children?y8(e.children,$A):[e]}function RA(e,t){return e+t.colSpan}const LA=(e,t,r,n)=>{let a=0,s=e;const o=r.states.columns.value;if(n){const l=$A(n[e]);a=o.slice(0,o.indexOf(l[0])).reduce(RA,0),s=a+l.reduce(RA,0)-1}else a=e;let i;switch(t){case"left":s<r.states.fixedLeafColumnsLength.value&&(i="left");break;case"right":a>=o.length-r.states.rightFixedLeafColumnsLength.value&&(i="right");break;default:s<r.states.fixedLeafColumnsLength.value?i="left":a>=o.length-r.states.rightFixedLeafColumnsLength.value&&(i="right")}return i?{direction:i,start:a,after:s}:{}},xy=(e,t,r,n,a,s=0)=>{const o=[],{direction:i,start:l,after:u}=LA(t,r,n,a);if(i){const c=i==="left";o.push(`${e}-fixed-column--${i}`),c&&u+s===n.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!c&&l-s===n.states.columns.value.length-n.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function MA(e,t){return e+(Kl(t.realWidth)||Number.isNaN(t.realWidth)?Number(t.width):t.realWidth)}const Cy=(e,t,r,n)=>{const{direction:a,start:s=0,after:o=0}=LA(e,t,r,n);if(!a)return;const i={},l=a==="left",u=r.states.columns.value;return l?i.left=u.slice(0,s).reduce(MA,0):i.right=u.slice(o+1).reverse().reduce(MA,0),i},bl=(e,t)=>{e&&(Number.isNaN(e[t])||(e[t]=`${e[t]}px`))};function $W(e){const t=Vt(),r=ee(!1),n=ee([]);return{updateExpandRows:()=>{const l=e.data.value||[],u=e.rowKey.value;if(r.value)n.value=l.slice();else if(u){const c=oc(n.value,u);n.value=l.reduce((d,p)=>{const b=bn(p,u);return c[b]&&d.push(p),d},[])}else n.value=[]},toggleRowExpansion:(l,u)=>{sp(n.value,l,u)&&t.emit("expand-change",l,n.value.slice())},setExpandRowKeys:l=>{t.store.assertRowKey();const u=e.data.value||[],c=e.rowKey.value,d=oc(u,c);n.value=l.reduce((p,b)=>{const m=d[b];return m&&p.push(m.row),p},[])},isRowExpanded:l=>{const u=e.rowKey.value;return u?!!oc(n.value,u)[bn(l,u)]:n.value.includes(l)},states:{expandRows:n,defaultExpandAll:r}}}function RW(e){const t=Vt(),r=ee(null),n=ee(null),a=u=>{t.store.assertRowKey(),r.value=u,o(u)},s=()=>{r.value=null},o=u=>{const{data:c,rowKey:d}=e;let p=null;d.value&&(p=(_(c)||[]).find(b=>bn(b,d.value)===u)),n.value=p,t.emit("current-change",n.value,null)};return{setCurrentRowKey:a,restoreCurrentRowKey:s,setCurrentRowByKey:o,updateCurrentRow:u=>{const c=n.value;if(u&&u!==c){n.value=u,t.emit("current-change",n.value,c);return}!u&&c&&(n.value=null,t.emit("current-change",null,c))},updateCurrentRowData:()=>{const u=e.rowKey.value,c=e.data.value||[],d=n.value;if(!c.includes(d)&&d){if(u){const p=bn(d,u);o(p)}else n.value=null;Kl(n.value)&&t.emit("current-change",null,d)}else r.value&&(o(r.value),s())},states:{_currentRowKey:r,currentRow:n}}}function LW(e){const t=ee([]),r=ee({}),n=ee(16),a=ee(!1),s=ee({}),o=ee("hasChildren"),i=ee("children"),l=ee(!1),u=Vt(),c=W(()=>{if(!e.rowKey.value)return{};const S=e.data.value||[];return p(S)}),d=W(()=>{const S=e.rowKey.value,w=Object.keys(s.value),C={};return w.length&&w.forEach(k=>{if(s.value[k].length){const f={children:[]};s.value[k].forEach(O=>{const E=bn(O,S);f.children.push(E),O[o.value]&&!C[E]&&(C[E]={children:[]})}),C[k]=f}}),C}),p=S=>{const w=e.rowKey.value,C={};return PW(S,(k,f,O)=>{const E=bn(k,w);Ue(f)?C[E]={children:f.map(N=>bn(N,w)),level:O}:a.value&&(C[E]={children:[],lazy:!0,level:O})},i.value,o.value),C},b=(S=!1,w=(C=>(C=u.store)==null?void 0:C.states.defaultExpandAll.value)())=>{var C;const k=c.value,f=d.value,O=Object.keys(k),E={};if(O.length){const N=_(r),$=[],L=(F,R)=>{if(S)return t.value?w||t.value.includes(R):!!(w||F!=null&&F.expanded);{const H=w||t.value&&t.value.includes(R);return!!(F!=null&&F.expanded||H)}};O.forEach(F=>{const R=N[F],H={...k[F]};if(H.expanded=L(R,F),H.lazy){const{loaded:q=!1,loading:M=!1}=R||{};H.loaded=!!q,H.loading=!!M,$.push(F)}E[F]=H});const B=Object.keys(f);a.value&&B.length&&$.length&&B.forEach(F=>{const R=N[F],H=f[F].children;if($.includes(F)){if(E[F].children.length!==0)throw new Error("[ElTable]children must be an empty array.");E[F].children=H}else{const{loaded:q=!1,loading:M=!1}=R||{};E[F]={lazy:!0,loaded:!!q,loading:!!M,expanded:L(R,F),children:H,level:""}}})}r.value=E,(C=u.store)==null||C.updateTableScrollY()};tt(()=>t.value,()=>{b(!0)}),tt(()=>c.value,()=>{b()}),tt(()=>d.value,()=>{b()});const m=S=>{t.value=S,b()},h=(S,w)=>{u.store.assertRowKey();const C=e.rowKey.value,k=bn(S,C),f=k&&r.value[k];if(k&&f&&"expanded"in f){const O=f.expanded;w=Rr(w)?!f.expanded:w,r.value[k].expanded=w,O!==w&&u.emit("expand-change",S,w),u.store.updateTableScrollY()}},v=S=>{u.store.assertRowKey();const w=e.rowKey.value,C=bn(S,w),k=r.value[C];a.value&&k&&"loaded"in k&&!k.loaded?y(S,C,k):h(S,void 0)},y=(S,w,C)=>{const{load:k}=u.props;k&&!r.value[w].loaded&&(r.value[w].loading=!0,k(S,C,f=>{if(!Ue(f))throw new TypeError("[ElTable] data must be an array");r.value[w].loading=!1,r.value[w].loaded=!0,r.value[w].expanded=!0,f.length&&(s.value[w]=f),u.emit("expand-change",S,!0)}))};return{loadData:y,loadOrToggle:v,toggleTreeExpansion:h,updateTreeExpandKeys:m,updateTreeData:b,updateKeyChildren:(S,w)=>{const{lazy:C,rowKey:k}=u.props;if(C){if(!k)throw new Error("[Table] rowKey is required in updateKeyChild");s.value[S]&&(s.value[S]=w)}},normalize:p,states:{expandRowKeys:t,treeData:r,indent:n,lazy:a,lazyTreeNodeMap:s,lazyColumnIdentifier:o,childrenColumnName:i,checkStrictly:l}}}const MW=(e,t)=>{const r=t.sortingColumn;return!r||mt(r.sortable)?e:CW(e,t.sortProp,t.sortOrder,r.sortMethod,r.sortBy)},op=e=>{const t=[];return e.forEach(r=>{r.children&&r.children.length>0?t.push.apply(t,op(r.children)):t.push(r)}),t};function DW(){var e;const t=Vt(),{size:r}=Ms((e=t.proxy)==null?void 0:e.$props),n=ee(null),a=ee([]),s=ee([]),o=ee(!1),i=ee([]),l=ee([]),u=ee([]),c=ee([]),d=ee([]),p=ee([]),b=ee([]),m=ee([]),h=[],v=ee(0),y=ee(0),T=ee(0),S=ee(!1),w=ee([]),C=ee(!1),k=ee(!1),f=ee(null),O=ee({}),E=ee(null),N=ee(null),$=ee(null),L=ee(null),B=ee(null),F=W(()=>n.value?oc(w.value,n.value):void 0);tt(a,()=>{var ce;t.state&&(D(!1),t.props.tableLayout==="auto"&&((ce=t.refs.tableHeaderRef)==null||ce.updateFixedColumnStyle()))},{deep:!0});const R=()=>{if(!n.value)throw new Error("[ElTable] prop row-key is required")},H=ce=>{var fe;(fe=ce.children)==null||fe.forEach(J=>{J.fixed=ce.fixed,H(J)})};let q;const M=()=>{i.value.forEach(_e=>{H(_e)}),c.value=i.value.filter(_e=>_e.fixed===!0||_e.fixed==="left"),d.value=i.value.filter(_e=>_e.fixed==="right"),Rr(q)&&i.value[0]&&i.value[0].type==="selection"&&(q=!!i.value[0].fixed),c.value.length>0&&i.value[0]&&i.value[0].type==="selection"&&(i.value[0].fixed?c.value.some(Xe=>Xe.type!=="selection")?q=void 0:(i.value[0].fixed=q,q||c.value.shift()):(i.value[0].fixed=!0,c.value.unshift(i.value[0])));const ce=i.value.filter(_e=>!_e.fixed);l.value=[].concat(c.value).concat(ce).concat(d.value);const fe=op(ce),J=op(c.value),V=op(d.value);v.value=fe.length,y.value=J.length,T.value=V.length,u.value=[].concat(J).concat(fe).concat(V),o.value=c.value.length>0||d.value.length>0},D=(ce,fe=!1)=>{ce&&M(),fe?t.state.doLayout():t.state.debouncedUpdateLayout()},Y=ce=>F.value?!!F.value[bn(ce,n.value)]:w.value.includes(ce),Z=()=>{S.value=!1;const ce=w.value;w.value=[],ce.length&&t.emit("selection-change",[])},se=()=>{let ce;if(n.value){ce=[];const fe=oc(a.value,n.value);for(const J in F.value)Wt(F.value,J)&&!fe[J]&&ce.push(F.value[J].row)}else ce=w.value.filter(fe=>!a.value.includes(fe));if(ce.length){const fe=w.value.filter(J=>!ce.includes(J));w.value=fe,t.emit("selection-change",fe.slice())}},ne=()=>(w.value||[]).slice(),me=(ce,fe,J=!0,V=!1)=>{var _e,Xe,dt,gt;const gr={children:(Xe=(_e=t==null?void 0:t.store)==null?void 0:_e.states)==null?void 0:Xe.childrenColumnName.value,checkStrictly:(gt=(dt=t==null?void 0:t.store)==null?void 0:dt.states)==null?void 0:gt.checkStrictly.value};if(sp(w.value,ce,fe,gr,V?void 0:f.value)){const Ar=(w.value||[]).slice();J&&t.emit("select",Ar,ce),t.emit("selection-change",Ar)}},ve=()=>{var ce,fe;const J=k.value?!S.value:!(S.value||w.value.length);S.value=J;let V=!1,_e=0;const Xe=(fe=(ce=t==null?void 0:t.store)==null?void 0:ce.states)==null?void 0:fe.rowKey.value,{childrenColumnName:dt}=t.store.states,gt={children:dt.value,checkStrictly:!1};a.value.forEach((gr,Ir)=>{const Ar=Ir+_e;sp(w.value,gr,J,gt,f.value,Ar)&&(V=!0),_e+=xe(bn(gr,Xe))}),V&&t.emit("selection-change",w.value?w.value.slice():[]),t.emit("select-all",(w.value||[]).slice())},We=()=>{a.value.forEach(ce=>{const fe=bn(ce,n.value),J=F.value[fe];J&&(w.value[J.index]=ce)})},Ke=()=>{var ce;if(((ce=a.value)==null?void 0:ce.length)===0){S.value=!1;return}const{childrenColumnName:fe}=t.store.states;let J=0,V=0;const _e=dt=>{var gt;for(const gr of dt){const Ir=f.value&&f.value.call(null,gr,J);if(Y(gr))V++;else if(!f.value||Ir)return!1;if(J++,(gt=gr[fe.value])!=null&&gt.length&&!_e(gr[fe.value]))return!1}return!0},Xe=_e(a.value||[]);S.value=V===0?!1:Xe},xe=ce=>{var fe;if(!t||!t.store)return 0;const{treeData:J}=t.store.states;let V=0;const _e=(fe=J.value[ce])==null?void 0:fe.children;return _e&&(V+=_e.length,_e.forEach(Xe=>{V+=xe(Xe)})),V},ze=(ce,fe)=>{Ue(ce)||(ce=[ce]);const J={};return ce.forEach(V=>{O.value[V.id]=fe,J[V.columnKey||V.id]=fe}),J},Ne=(ce,fe,J)=>{N.value&&N.value!==ce&&(N.value.order=null),N.value=ce,$.value=fe,L.value=J},rt=()=>{let ce=_(s);Object.keys(O.value).forEach(fe=>{const J=O.value[fe];if(!J||J.length===0)return;const V=AA({columns:u.value},fe);V&&V.filterMethod&&(ce=ce.filter(_e=>J.some(Xe=>V.filterMethod.call(null,Xe,_e,V))))}),E.value=ce},X=()=>{a.value=MW(E.value,{sortingColumn:N.value,sortProp:$.value,sortOrder:L.value})},re=(ce=void 0)=>{ce&&ce.filter||rt(),X()},ge=ce=>{const{tableHeaderRef:fe}=t.refs;if(!fe)return;const J=Object.assign({},fe.filterPanels),V=Object.keys(J);if(V.length)if(mt(ce)&&(ce=[ce]),Ue(ce)){const _e=ce.map(Xe=>kW({columns:u.value},Xe));V.forEach(Xe=>{const dt=_e.find(gt=>gt.id===Xe);dt&&(dt.filteredValue=[])}),t.store.commit("filterChange",{column:_e,values:[],silent:!0,multi:!0})}else V.forEach(_e=>{const Xe=u.value.find(dt=>dt.id===_e);Xe&&(Xe.filteredValue=[])}),O.value={},t.store.commit("filterChange",{column:{},values:[],silent:!0})},Re=()=>{N.value&&(Ne(null,null,null),t.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:Se,toggleRowExpansion:ke,updateExpandRows:qe,states:Pe,isRowExpanded:Me}=$W({data:a,rowKey:n}),{updateTreeExpandKeys:$e,toggleTreeExpansion:nt,updateTreeData:Ge,updateKeyChildren:ye,loadOrToggle:Ce,states:it}=LW({data:a,rowKey:n}),{updateCurrentRowData:Et,updateCurrentRow:bt,setCurrentRowKey:pr,states:Ot}=RW({data:a,rowKey:n});return{assertRowKey:R,updateColumns:M,scheduleLayout:D,isSelected:Y,clearSelection:Z,cleanSelection:se,getSelectionRows:ne,toggleRowSelection:me,_toggleAllSelection:ve,toggleAllSelection:null,updateSelectionByRowKey:We,updateAllSelected:Ke,updateFilters:ze,updateCurrentRow:bt,updateSort:Ne,execFilter:rt,execSort:X,execQuery:re,clearFilter:ge,clearSort:Re,toggleRowExpansion:ke,setExpandRowKeysAdapter:ce=>{Se(ce),$e(ce)},setCurrentRowKey:pr,toggleRowExpansionAdapter:(ce,fe)=>{u.value.some(({type:V})=>V==="expand")?ke(ce,fe):nt(ce,fe)},isRowExpanded:Me,updateExpandRows:qe,updateCurrentRowData:Et,loadOrToggle:Ce,updateTreeData:Ge,updateKeyChildren:ye,states:{tableSize:r,rowKey:n,data:a,_data:s,isComplex:o,_columns:i,originColumns:l,columns:u,fixedColumns:c,rightFixedColumns:d,leafColumns:p,fixedLeafColumns:b,rightFixedLeafColumns:m,updateOrderFns:h,leafColumnsLength:v,fixedLeafColumnsLength:y,rightFixedLeafColumnsLength:T,isAllSelected:S,selection:w,reserveSelection:C,selectOnIndeterminate:k,selectable:f,filters:O,filteredData:E,sortingColumn:N,sortProp:$,sortOrder:L,hoverRow:B,...Pe,...it,...Ot}}}function ky(e,t){return e.map(r=>{var n;return r.id===t.id?t:((n=r.children)!=null&&n.length&&(r.children=ky(r.children,t)),r)})}function Iy(e){e.forEach(t=>{var r,n;t.no=(r=t.getColumnIndex)==null?void 0:r.call(t),(n=t.children)!=null&&n.length&&Iy(t.children)}),e.sort((t,r)=>t.no-r.no)}function NW(){const e=Vt(),t=DW();return{ns:ct("table"),...t,mutations:{setData(o,i){const l=_(o._data)!==i;o.data.value=i,o._data.value=i,e.store.execQuery(),e.store.updateCurrentRowData(),e.store.updateExpandRows(),e.store.updateTreeData(e.store.states.defaultExpandAll.value),_(o.reserveSelection)?(e.store.assertRowKey(),e.store.updateSelectionByRowKey()):l?e.store.clearSelection():e.store.cleanSelection(),e.store.updateAllSelected(),e.$ready&&e.store.scheduleLayout()},insertColumn(o,i,l,u){const c=_(o._columns);let d=[];l?(l&&!l.children&&(l.children=[]),l.children.push(i),d=ky(c,l)):(c.push(i),d=c),Iy(d),o._columns.value=d,o.updateOrderFns.push(u),i.type==="selection"&&(o.selectable.value=i.selectable,o.reserveSelection.value=i.reserveSelection),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},updateColumnOrder(o,i){var l;((l=i.getColumnIndex)==null?void 0:l.call(i))!==i.no&&(Iy(o._columns.value),e.$ready&&e.store.updateColumns())},removeColumn(o,i,l,u){const c=_(o._columns)||[];if(l)l.children.splice(l.children.findIndex(p=>p.id===i.id),1),xt(()=>{var p;((p=l.children)==null?void 0:p.length)===0&&delete l.children}),o._columns.value=ky(c,l);else{const p=c.indexOf(i);p>-1&&(c.splice(p,1),o._columns.value=c)}const d=o.updateOrderFns.indexOf(u);d>-1&&o.updateOrderFns.splice(d,1),e.$ready&&(e.store.updateColumns(),e.store.scheduleLayout())},sort(o,i){const{prop:l,order:u,init:c}=i;if(l){const d=_(o.columns).find(p=>p.property===l);d&&(d.order=u,e.store.updateSort(d,l,u),e.store.commit("changeSortCondition",{init:c}))}},changeSortCondition(o,i){const{sortingColumn:l,sortProp:u,sortOrder:c}=o,d=_(l),p=_(u),b=_(c);Kl(b)&&(o.sortingColumn.value=null,o.sortProp.value=null);const m={filter:!0};e.store.execQuery(m),(!i||!(i.silent||i.init))&&e.emit("sort-change",{column:d,prop:p,order:b}),e.store.updateTableScrollY()},filterChange(o,i){const{column:l,values:u,silent:c}=i,d=e.store.updateFilters(l,u);e.store.execQuery(),c||e.emit("filter-change",d),e.store.updateTableScrollY()},toggleAllSelection(){e.store.toggleAllSelection()},rowSelectedChanged(o,i){e.store.toggleRowSelection(i),e.store.updateAllSelected()},setHoverRow(o,i){o.hoverRow.value=i},setCurrentRow(o,i){e.store.updateCurrentRow(i)}},commit:function(o,...i){const l=e.store.mutations;if(l[o])l[o].apply(e,[e.store.states].concat(i));else throw new Error(`Action not found: ${o}`)},updateTableScrollY:function(){xt(()=>e.layout.updateScrollY.apply(e.layout))}}}const ic={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"},"treeProps.checkStrictly":{key:"checkStrictly",default:!1}};function FW(e,t){if(!e)throw new Error("Table is required.");const r=NW();return r.toggleAllSelection=Is(r._toggleAllSelection,10),Object.keys(ic).forEach(n=>{DA(NA(t,n),n,r)}),BW(r,t),r}function BW(e,t){Object.keys(ic).forEach(r=>{tt(()=>NA(t,r),n=>{DA(n,r,e)})})}function DA(e,t,r){let n=e,a=ic[t];Rt(ic[t])&&(a=a.key,n=n||ic[t].default),r.states[a].value=n}function NA(e,t){if(t.includes(".")){const r=t.split(".");let n=e;return r.forEach(a=>{n=n[a]}),n}else return e[t]}class jW{constructor(t){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=ee(null),this.scrollX=ee(!1),this.scrollY=ee(!1),this.bodyWidth=ee(null),this.fixedWidth=ee(null),this.rightFixedWidth=ee(null),this.gutterWidth=0;for(const r in t)Wt(t,r)&&(lr(this[r])?this[r].value=t[r]:this[r]=t[r]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){const t=this.height.value;if(Kl(t))return!1;const r=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(r!=null&&r.wrapRef)){let n=!0;const a=this.scrollY.value;return n=r.wrapRef.scrollHeight>r.wrapRef.clientHeight,this.scrollY.value=n,a!==n}return!1}setHeight(t,r="height"){if(!dr)return;const n=this.table.vnode.el;if(t=AW(t),this.height.value=Number(t),!n&&(t||t===0))return xt(()=>this.setHeight(t,r));Zt(t)?(n.style[r]=`${t}px`,this.updateElsHeight()):mt(t)&&(n.style[r]=t,this.updateElsHeight())}setMaxHeight(t){this.setHeight(t,"max-height")}getFlattenColumns(){const t=[];return this.table.store.states.columns.value.forEach(n=>{n.isColumnGroup?t.push.apply(t,n.columns):t.push(n)}),t}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(t){if(!t)return!0;let r=t;for(;r.tagName!=="DIV";){if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}updateColumnsWidth(){if(!dr)return;const t=this.fit,r=this.table.vnode.el.clientWidth;let n=0;const a=this.getFlattenColumns(),s=a.filter(l=>!Zt(l.width));if(a.forEach(l=>{Zt(l.width)&&l.realWidth&&(l.realWidth=null)}),s.length>0&&t){if(a.forEach(l=>{n+=Number(l.width||l.minWidth||80)}),n<=r){this.scrollX.value=!1;const l=r-n;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+l;else{const u=s.reduce((p,b)=>p+Number(b.minWidth||80),0),c=l/u;let d=0;s.forEach((p,b)=>{if(b===0)return;const m=Math.floor(Number(p.minWidth||80)*c);d+=m,p.realWidth=Number(p.minWidth||80)+m}),s[0].realWidth=Number(s[0].minWidth||80)+l-d}}else this.scrollX.value=!0,s.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(n,r),this.table.state.resizeState.value.width=this.bodyWidth.value}else a.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),n+=l.realWidth}),this.scrollX.value=n>r,this.bodyWidth.value=n;const o=this.store.states.fixedColumns.value;if(o.length>0){let l=0;o.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.fixedWidth.value=l}const i=this.store.states.rightFixedColumns.value;if(i.length>0){let l=0;i.forEach(u=>{l+=Number(u.realWidth||u.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(t){this.observers.push(t)}removeObserver(t){const r=this.observers.indexOf(t);r!==-1&&this.observers.splice(r,1)}notifyObservers(t){this.observers.forEach(n=>{var a,s;switch(t){case"columns":(a=n.state)==null||a.onColumnsChange(this);break;case"scrollable":(s=n.state)==null||s.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${t}.`)}})}}const{CheckboxGroup:UW}=fs,qW=Te({name:"ElTableFilterPanel",components:{ElCheckbox:fs,ElCheckboxGroup:UW,ElScrollbar:kf,ElTooltip:ci,ElIcon:Ct,ArrowDown:Tf,ArrowUp:kv},directives:{ClickOutside:ec},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function},appendTo:{type:String}},setup(e){const t=Vt(),{t:r}=zr(),n=ct("table-filter"),a=t==null?void 0:t.parent;a.filterPanels.value[e.column.id]||(a.filterPanels.value[e.column.id]=t);const s=ee(!1),o=ee(null),i=W(()=>e.column&&e.column.filters),l=W(()=>e.column.filterClassName?`${n.b()} ${e.column.filterClassName}`:n.b()),u=W({get:()=>{var C;return(((C=e.column)==null?void 0:C.filteredValue)||[])[0]},set:C=>{c.value&&(ri(C)?c.value.splice(0,1):c.value.splice(0,1,C))}}),c=W({get(){return e.column?e.column.filteredValue||[]:[]},set(C){e.column&&e.upDataColumn("filteredValue",C)}}),d=W(()=>e.column?e.column.filterMultiple:!0),p=C=>C.value===u.value,b=()=>{s.value=!1},m=C=>{C.stopPropagation(),s.value=!s.value},h=()=>{s.value=!1},v=()=>{S(c.value),b()},y=()=>{c.value=[],S(c.value),b()},T=C=>{u.value=C,ri(C)?S([]):S(c.value),b()},S=C=>{e.store.commit("filterChange",{column:e.column,values:C}),e.store.updateAllSelected()};tt(s,C=>{e.column&&e.upDataColumn("filterOpened",C)},{immediate:!0});const w=W(()=>{var C,k;return(k=(C=o.value)==null?void 0:C.popperRef)==null?void 0:k.contentRef});return{tooltipVisible:s,multiple:d,filterClassName:l,filteredValue:c,filterValue:u,filters:i,handleConfirm:v,handleReset:y,handleSelect:T,isPropAbsent:ri,isActive:p,t:r,ns:n,showFilterPanel:m,hideFilterPanel:h,popperPaneRef:w,tooltip:o}}});function VW(e,t,r,n,a,s){const o=Cr("el-checkbox"),i=Cr("el-checkbox-group"),l=Cr("el-scrollbar"),u=Cr("arrow-up"),c=Cr("arrow-down"),d=Cr("el-icon"),p=Cr("el-tooltip"),b=Mg("click-outside");return G(),Le(p,{ref:"tooltip",visible:e.tooltipVisible,offset:0,placement:e.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":e.filterClassName,persistent:"","append-to":e.appendTo},{content:ie(()=>[e.multiple?(G(),le("div",{key:0},[K("div",{class:Q(e.ns.e("content"))},[ue(l,{"wrap-class":e.ns.e("wrap")},{default:ie(()=>[ue(i,{modelValue:e.filteredValue,"onUpdate:modelValue":m=>e.filteredValue=m,class:Q(e.ns.e("checkbox-group"))},{default:ie(()=>[(G(!0),le(pt,null,$r(e.filters,m=>(G(),Le(o,{key:m.value,value:m.value},{default:ie(()=>[ot(He(m.text),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","onUpdate:modelValue","class"])]),_:1},8,["wrap-class"])],2),K("div",{class:Q(e.ns.e("bottom"))},[K("button",{class:Q({[e.ns.is("disabled")]:e.filteredValue.length===0}),disabled:e.filteredValue.length===0,type:"button",onClick:e.handleConfirm},He(e.t("el.table.confirmFilter")),11,["disabled","onClick"]),K("button",{type:"button",onClick:e.handleReset},He(e.t("el.table.resetFilter")),9,["onClick"])],2)])):(G(),le("ul",{key:1,class:Q(e.ns.e("list"))},[K("li",{class:Q([e.ns.e("list-item"),{[e.ns.is("active")]:e.isPropAbsent(e.filterValue)}]),onClick:m=>e.handleSelect(null)},He(e.t("el.table.clearFilter")),11,["onClick"]),(G(!0),le(pt,null,$r(e.filters,m=>(G(),le("li",{key:m.value,class:Q([e.ns.e("list-item"),e.ns.is("active",e.isActive(m))]),label:m.value,onClick:h=>e.handleSelect(m.value)},He(m.text),11,["label","onClick"]))),128))],2))]),default:ie(()=>[qt((G(),le("span",{class:Q([`${e.ns.namespace.value}-table__column-filter-trigger`,`${e.ns.namespace.value}-none-outline`]),onClick:e.showFilterPanel},[ue(d,null,{default:ie(()=>[De(e.$slots,"filter-icon",{},()=>[e.column.filterOpened?(G(),Le(u,{key:0})):(G(),Le(c,{key:1}))])]),_:3})],10,["onClick"])),[[b,e.hideFilterPanel,e.popperPaneRef]])]),_:3},8,["visible","placement","popper-class","append-to"])}var HW=_t(qW,[["render",VW],["__file","filter-panel.vue"]]);function FA(e){const t=Vt();jd(()=>{r.value.addObserver(t)}),Kt(()=>{n(r.value),a(r.value)}),Ji(()=>{n(r.value),a(r.value)}),Yo(()=>{r.value.removeObserver(t)});const r=W(()=>{const s=e.layout;if(!s)throw new Error("Can not find table layout.");return s}),n=s=>{var o;const i=((o=e.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!i.length)return;const l=s.getFlattenColumns(),u={};l.forEach(c=>{u[c.id]=c});for(let c=0,d=i.length;c<d;c++){const p=i[c],b=p.getAttribute("name"),m=u[b];m&&p.setAttribute("width",m.realWidth||m.width)}},a=s=>{var o,i;const l=((o=e.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let c=0,d=l.length;c<d;c++)l[c].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const u=((i=e.vnode.el)==null?void 0:i.querySelectorAll("th.gutter"))||[];for(let c=0,d=u.length;c<d;c++){const p=u[c];p.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",p.style.display=s.scrollY.value?"":"none"}};return{tableLayout:r.value,onColumnsChange:n,onScrollableChange:a}}const ps=Symbol("ElTable");function zW(e,t){const r=Vt(),n=ft(ps),a=h=>{h.stopPropagation()},s=(h,v)=>{!v.filters&&v.sortable?m(h,v,!1):v.filterable&&!v.sortable&&a(h),n==null||n.emit("header-click",v,h)},o=(h,v)=>{n==null||n.emit("header-contextmenu",v,h)},i=ee(null),l=ee(!1),u=ee({}),c=(h,v)=>{if(dr&&!(v.children&&v.children.length>0)&&i.value&&e.border){l.value=!0;const y=n;t("set-drag-visible",!0);const S=(y==null?void 0:y.vnode.el).getBoundingClientRect().left,w=r.vnode.el.querySelector(`th.${v.id}`),C=w.getBoundingClientRect(),k=C.left-S+30;ni(w,"noclick"),u.value={startMouseLeft:h.clientX,startLeft:C.right-S,startColumnLeft:C.left-S,tableLeft:S};const f=y==null?void 0:y.refs.resizeProxy;f.style.left=`${u.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const O=N=>{const $=N.clientX-u.value.startMouseLeft,L=u.value.startLeft+$;f.style.left=`${Math.max(k,L)}px`},E=()=>{if(l.value){const{startColumnLeft:N,startLeft:$}=u.value,B=Number.parseInt(f.style.left,10)-N;v.width=v.realWidth=B,y==null||y.emit("header-dragend",v.width,$-N,v,h),requestAnimationFrame(()=>{e.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,i.value=null,u.value={},t("set-drag-visible",!1)}document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",E),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{ls(w,"noclick")},0)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",E)}},d=(h,v)=>{var y;if(v.children&&v.children.length>0)return;const T=h.target;if(!Dn(T))return;const S=T==null?void 0:T.closest("th");if(!(!v||!v.resizable||!S)&&!l.value&&e.border){const w=S.getBoundingClientRect(),C=document.body.style,k=((y=S.parentNode)==null?void 0:y.lastElementChild)===S,f=e.allowDragLastColumn||!k;w.width>12&&w.right-h.pageX<8&&f?(C.cursor="col-resize",La(S,"is-sortable")&&(S.style.cursor="col-resize"),i.value=v):l.value||(C.cursor="",La(S,"is-sortable")&&(S.style.cursor="pointer"),i.value=null)}},p=()=>{dr&&(document.body.style.cursor="")},b=({order:h,sortOrders:v})=>{if(h==="")return v[0];const y=v.indexOf(h||null);return v[y>v.length-2?0:y+1]},m=(h,v,y)=>{var T;h.stopPropagation();const S=v.order===y?null:y||b(v),w=(T=h.target)==null?void 0:T.closest("th");if(w&&La(w,"noclick")){ls(w,"noclick");return}if(!v.sortable)return;const C=h.currentTarget;if(["ascending","descending"].some(N=>La(C,N)&&!v.sortOrders.includes(N)))return;const k=e.store.states;let f=k.sortProp.value,O;const E=k.sortingColumn.value;(E!==v||E===v&&Kl(E.order))&&(E&&(E.order=null),k.sortingColumn.value=v,f=v.property),S?O=v.order=S:O=v.order=null,k.sortProp.value=f,k.sortOrder.value=O,n==null||n.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:o,handleMouseDown:c,handleMouseMove:d,handleMouseOut:p,handleSortClick:m,handleFilterClick:a}}function WW(e){const t=ft(ps),r=ct("table");return{getHeaderRowStyle:i=>{const l=t==null?void 0:t.props.headerRowStyle;return et(l)?l.call(null,{rowIndex:i}):l},getHeaderRowClass:i=>{const l=[],u=t==null?void 0:t.props.headerRowClassName;return mt(u)?l.push(u):et(u)&&l.push(u.call(null,{rowIndex:i})),l.join(" ")},getHeaderCellStyle:(i,l,u,c)=>{var d;let p=(d=t==null?void 0:t.props.headerCellStyle)!=null?d:{};et(p)&&(p=p.call(null,{rowIndex:i,columnIndex:l,row:u,column:c}));const b=Cy(l,c.fixed,e.store,u);return bl(b,"left"),bl(b,"right"),Object.assign({},p,b)},getHeaderCellClass:(i,l,u,c)=>{const d=xy(r.b(),l,c.fixed,e.store,u),p=[c.id,c.order,c.headerAlign,c.className,c.labelClassName,...d];c.children||p.push("is-leaf"),c.sortable&&p.push("is-sortable");const b=t==null?void 0:t.props.headerCellClassName;return mt(b)?p.push(b):et(b)&&p.push(b.call(null,{rowIndex:i,columnIndex:l,row:u,column:c})),p.push(r.e("cell")),p.filter(m=>!!m).join(" ")}}}const BA=e=>{const t=[];return e.forEach(r=>{r.children?(t.push(r),t.push.apply(t,BA(r.children))):t.push(r)}),t},jA=e=>{let t=1;const r=(s,o)=>{if(o&&(s.level=o.level+1,t<s.level&&(t=s.level)),s.children){let i=0;s.children.forEach(l=>{r(l,s),i+=l.colSpan}),s.colSpan=i}else s.colSpan=1};e.forEach(s=>{s.level=1,r(s,void 0)});const n=[];for(let s=0;s<t;s++)n.push([]);return BA(e).forEach(s=>{s.children?(s.rowSpan=1,s.children.forEach(o=>o.isSubColumn=!0)):s.rowSpan=t-s.level+1,n[s.level-1].push(s)}),n};function KW(e){const t=ft(ps),r=W(()=>jA(e.store.states.originColumns.value));return{isGroup:W(()=>{const s=r.value.length>1;return s&&t&&(t.state.isGroup.value=!0),s}),toggleAllSelection:s=>{s.stopPropagation(),t==null||t.store.commit("toggleAllSelection")},columnRows:r}}var GW=Te({name:"ElTableHeader",components:{ElCheckbox:fs},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})},appendFilterPanelTo:{type:String},allowDragLastColumn:{type:Boolean}},setup(e,{emit:t}){const r=Vt(),n=ft(ps),a=ct("table"),s=ee({}),{onColumnsChange:o,onScrollableChange:i}=FA(n),l=(n==null?void 0:n.props.tableLayout)==="auto",u=sn(new Map),c=ee(),d=()=>{setTimeout(()=>{u.size>0&&(u.forEach((N,$)=>{const L=c.value.querySelector(`.${$.replace(/\s/g,".")}`);if(L){const B=L.getBoundingClientRect().width;N.width=B}}),u.clear())})};tt(u,d),Kt(async()=>{await xt(),await xt();const{prop:N,order:$}=e.defaultSort;n==null||n.store.commit("sort",{prop:N,order:$,init:!0}),d()});const{handleHeaderClick:p,handleHeaderContextMenu:b,handleMouseDown:m,handleMouseMove:h,handleMouseOut:v,handleSortClick:y,handleFilterClick:T}=zW(e,t),{getHeaderRowStyle:S,getHeaderRowClass:w,getHeaderCellStyle:C,getHeaderCellClass:k}=WW(e),{isGroup:f,toggleAllSelection:O,columnRows:E}=KW(e);return r.state={onColumnsChange:o,onScrollableChange:i},r.filterPanels=s,{ns:a,filterPanels:s,onColumnsChange:o,onScrollableChange:i,columnRows:E,getHeaderRowClass:w,getHeaderRowStyle:S,getHeaderCellClass:k,getHeaderCellStyle:C,handleHeaderClick:p,handleHeaderContextMenu:b,handleMouseDown:m,handleMouseMove:h,handleMouseOut:v,handleSortClick:y,handleFilterClick:T,isGroup:f,toggleAllSelection:O,saveIndexSelection:u,isTableLayoutAuto:l,theadRef:c,updateFixedColumnStyle:d}},render(){const{ns:e,isGroup:t,columnRows:r,getHeaderCellStyle:n,getHeaderCellClass:a,getHeaderRowClass:s,getHeaderRowStyle:o,handleHeaderClick:i,handleHeaderContextMenu:l,handleMouseDown:u,handleMouseMove:c,handleSortClick:d,handleMouseOut:p,store:b,$parent:m,saveIndexSelection:h,isTableLayoutAuto:v}=this;let y=1;return It("thead",{ref:"theadRef",class:{[e.is("group")]:t}},r.map((T,S)=>It("tr",{class:s(S),key:S,style:o(S)},T.map((w,C)=>{w.rowSpan>y&&(y=w.rowSpan);const k=a(S,C,T,w);return v&&w.fixed&&h.set(k,w),It("th",{class:k,colspan:w.colSpan,key:`${w.id}-thead`,rowspan:w.rowSpan,style:n(S,C,T,w),onClick:f=>{f.currentTarget.classList.contains("noclick")||i(f,w)},onContextmenu:f=>l(f,w),onMousedown:f=>u(f,w),onMousemove:f=>c(f,w),onMouseout:p},[It("div",{class:["cell",w.filteredValue&&w.filteredValue.length>0?"highlight":""]},[w.renderHeader?w.renderHeader({column:w,$index:C,store:b,_self:m}):w.label,w.sortable&&It("span",{onClick:f=>d(f,w),class:"caret-wrapper"},[It("i",{onClick:f=>d(f,w,"ascending"),class:"sort-caret ascending"}),It("i",{onClick:f=>d(f,w,"descending"),class:"sort-caret descending"})]),w.filterable&&It(HW,{store:b,placement:w.filterPlacement||"bottom-start",appendTo:m.appendFilterPanelTo,column:w,upDataColumn:(f,O)=>{w[f]=O}},{"filter-icon":()=>w.renderFilterIcon?w.renderFilterIcon({filterOpened:w.filterOpened}):null})])])}))))}});function Ay(e,t,r=.03){return e-t>r}function YW(e){const t=ft(ps),r=ee(""),n=ee(It("div")),a=(m,h,v)=>{var y;const T=t,S=Sy(m);let w;const C=(y=T==null?void 0:T.vnode.el)==null?void 0:y.dataset.prefix;S&&(w=OA({columns:e.store.states.columns.value},S,C),w&&(T==null||T.emit(`cell-${v}`,h,w,S,m))),T==null||T.emit(`row-${v}`,h,w,m)},s=(m,h)=>{a(m,h,"dblclick")},o=(m,h)=>{e.store.commit("setCurrentRow",h),a(m,h,"click")},i=(m,h)=>{a(m,h,"contextmenu")},l=Is(m=>{e.store.commit("setHoverRow",m)},30),u=Is(()=>{e.store.commit("setHoverRow",null)},30),c=m=>{const h=window.getComputedStyle(m,null),v=Number.parseInt(h.paddingLeft,10)||0,y=Number.parseInt(h.paddingRight,10)||0,T=Number.parseInt(h.paddingTop,10)||0,S=Number.parseInt(h.paddingBottom,10)||0;return{left:v,right:y,top:T,bottom:S}},d=(m,h,v)=>{let y=h.target.parentNode;for(;m>1&&(y=y==null?void 0:y.nextSibling,!(!y||y.nodeName!=="TR"));)v(y,"hover-row hover-fixed-row"),m--};return{handleDoubleClick:s,handleClick:o,handleContextMenu:i,handleMouseEnter:l,handleMouseLeave:u,handleCellMouseEnter:(m,h,v)=>{var y,T,S;const w=t,C=Sy(m),k=(y=w==null?void 0:w.vnode.el)==null?void 0:y.dataset.prefix;if(C){const D=OA({columns:e.store.states.columns.value},C,k);C.rowSpan>1&&d(C.rowSpan,m,ni);const Y=w.hoverState={cell:C,column:D,row:h};w==null||w.emit("cell-mouse-enter",Y.row,Y.column,Y.cell,m)}if(!v)return;const f=m.target.querySelector(".cell");if(!(La(f,`${k}-tooltip`)&&f.childNodes.length))return;const O=document.createRange();O.setStart(f,0),O.setEnd(f,f.childNodes.length);const{width:E,height:N}=O.getBoundingClientRect(),{width:$,height:L}=f.getBoundingClientRect(),{top:B,left:F,right:R,bottom:H}=c(f),q=F+R,M=B+H;Ay(E+q,$)||Ay(N+M,L)||Ay(f.scrollWidth,$)?EW(v,C.innerText||C.textContent,C,w):((T=Bn)==null?void 0:T.trigger)===C&&((S=Bn)==null||S())},handleCellMouseLeave:m=>{const h=Sy(m);if(!h)return;h.rowSpan>1&&d(h.rowSpan,m,ls);const v=t==null?void 0:t.hoverState;t==null||t.emit("cell-mouse-leave",v==null?void 0:v.row,v==null?void 0:v.column,v==null?void 0:v.cell,m)},tooltipContent:r,tooltipTrigger:n}}function JW(e){const t=ft(ps),r=ct("table");return{getRowStyle:(u,c)=>{const d=t==null?void 0:t.props.rowStyle;return et(d)?d.call(null,{row:u,rowIndex:c}):d||null},getRowClass:(u,c)=>{const d=[r.e("row")];t!=null&&t.props.highlightCurrentRow&&u===e.store.states.currentRow.value&&d.push("current-row"),e.stripe&&c%2===1&&d.push(r.em("row","striped"));const p=t==null?void 0:t.props.rowClassName;return mt(p)?d.push(p):et(p)&&d.push(p.call(null,{row:u,rowIndex:c})),d},getCellStyle:(u,c,d,p)=>{const b=t==null?void 0:t.props.cellStyle;let m=b??{};et(b)&&(m=b.call(null,{rowIndex:u,columnIndex:c,row:d,column:p}));const h=Cy(c,e==null?void 0:e.fixed,e.store);return bl(h,"left"),bl(h,"right"),Object.assign({},m,h)},getCellClass:(u,c,d,p,b)=>{const m=xy(r.b(),c,e==null?void 0:e.fixed,e.store,void 0,b),h=[p.id,p.align,p.className,...m],v=t==null?void 0:t.props.cellClassName;return mt(v)?h.push(v):et(v)&&h.push(v.call(null,{rowIndex:u,columnIndex:c,row:d,column:p})),h.push(r.e("cell")),h.filter(y=>!!y).join(" ")},getSpan:(u,c,d,p)=>{let b=1,m=1;const h=t==null?void 0:t.props.spanMethod;if(et(h)){const v=h({row:u,column:c,rowIndex:d,columnIndex:p});Ue(v)?(b=v[0],m=v[1]):Rt(v)&&(b=v.rowspan,m=v.colspan)}return{rowspan:b,colspan:m}},getColspanRealWidth:(u,c,d)=>{if(c<1)return u[d].realWidth;const p=u.map(({realWidth:b,width:m})=>b||m).slice(d,d+c);return Number(p.reduce((b,m)=>Number(b)+Number(m),-1))}}}const XW=Te({...Te({name:"TableTdWrapper"}),props:{colspan:{type:Number,default:1},rowspan:{type:Number,default:1}},setup(e){return(t,r)=>(G(),le("td",{colspan:e.colspan,rowspan:e.rowspan},[De(t.$slots,"default")],8,["colspan","rowspan"]))}});var QW=_t(XW,[["__file","td-wrapper.vue"]]);function ZW(e){const t=ft(ps),r=ct("table"),{handleDoubleClick:n,handleClick:a,handleContextMenu:s,handleMouseEnter:o,handleMouseLeave:i,handleCellMouseEnter:l,handleCellMouseLeave:u,tooltipContent:c,tooltipTrigger:d}=YW(e),{getRowStyle:p,getRowClass:b,getCellStyle:m,getCellClass:h,getSpan:v,getColspanRealWidth:y}=JW(e),T=W(()=>e.store.states.columns.value.findIndex(({type:f})=>f==="default")),S=(f,O)=>{const E=t.props.rowKey;return E?bn(f,E):O},w=(f,O,E,N=!1)=>{const{tooltipEffect:$,tooltipOptions:L,store:B}=e,{indent:F,columns:R}=B.states,H=b(f,O);let q=!0;return E&&(H.push(r.em("row",`level-${E.level}`)),q=E.display),It("tr",{style:[q?null:{display:"none"},p(f,O)],class:H,key:S(f,O),onDblclick:D=>n(D,f),onClick:D=>a(D,f),onContextmenu:D=>s(D,f),onMouseenter:()=>o(O),onMouseleave:i},R.value.map((D,Y)=>{const{rowspan:Z,colspan:se}=v(f,D,O,Y);if(!Z||!se)return null;const ne=Object.assign({},D);ne.realWidth=y(R.value,se,Y);const me={store:e.store,_self:e.context||t,column:ne,row:f,$index:O,cellIndex:Y,expanded:N};Y===T.value&&E&&(me.treeNode={indent:E.level*F.value,level:E.level},tn(E.expanded)&&(me.treeNode.expanded=E.expanded,"loading"in E&&(me.treeNode.loading=E.loading),"noLazyChildren"in E&&(me.treeNode.noLazyChildren=E.noLazyChildren)));const ve=`${S(f,O)},${Y}`,We=ne.columnKey||ne.rawColumnKey||"",Ke=D.showOverflowTooltip&&Ww({effect:$},L,D.showOverflowTooltip);return It(QW,{style:m(O,Y,f,D),class:h(O,Y,f,D,se-1),key:`${We}${ve}`,rowspan:Z,colspan:se,onMouseenter:xe=>l(xe,f,Ke),onMouseleave:u},{default:()=>C(Y,D,me)})}))},C=(f,O,E)=>O.renderCell(E);return{wrappedRowRender:(f,O)=>{const E=e.store,{isRowExpanded:N,assertRowKey:$}=E,{treeData:L,lazyTreeNodeMap:B,childrenColumnName:F,rowKey:R}=E.states,H=E.states.columns.value;if(H.some(({type:M})=>M==="expand")){const M=N(f),D=w(f,O,void 0,M),Y=t.renderExpanded;return M?Y?[[D,It("tr",{key:`expanded-row__${D.key}`},[It("td",{colspan:H.length,class:`${r.e("cell")} ${r.e("expanded-cell")}`},[Y({row:f,$index:O,store:E,expanded:M})])])]]:(console.error("[Element Error]renderExpanded is required."),D):[[D]]}else if(Object.keys(L.value).length){$();const M=bn(f,R.value);let D=L.value[M],Y=null;D&&(Y={expanded:D.expanded,level:D.level,display:!0},tn(D.lazy)&&(tn(D.loaded)&&D.loaded&&(Y.noLazyChildren=!(D.children&&D.children.length)),Y.loading=D.loading));const Z=[w(f,O,Y)];if(D){let se=0;const ne=(ve,We)=>{ve&&ve.length&&We&&ve.forEach(Ke=>{const xe={display:We.display&&We.expanded,level:We.level+1,expanded:!1,noLazyChildren:!1,loading:!1},ze=bn(Ke,R.value);if(ri(ze))throw new Error("For nested data item, row-key is required.");if(D={...L.value[ze]},D&&(xe.expanded=D.expanded,D.level=D.level||xe.level,D.display=!!(D.expanded&&xe.display),tn(D.lazy)&&(tn(D.loaded)&&D.loaded&&(xe.noLazyChildren=!(D.children&&D.children.length)),xe.loading=D.loading)),se++,Z.push(w(Ke,O+se,xe)),D){const Ne=B.value[ze]||Ke[F.value];ne(Ne,D)}})};D.display=!0;const me=B.value[M]||f[F.value];ne(me,D)}return Z}else return w(f,O,void 0)},tooltipContent:c,tooltipTrigger:d}}var eK=Te({name:"ElTableBody",props:{store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean},setup(e){const t=Vt(),r=ft(ps),n=ct("table"),{wrappedRowRender:a,tooltipContent:s,tooltipTrigger:o}=ZW(e),{onColumnsChange:i,onScrollableChange:l}=FA(r),u=[];return tt(e.store.states.hoverRow,(c,d)=>{var p;const b=t==null?void 0:t.vnode.el,m=Array.from((b==null?void 0:b.children)||[]).filter(y=>y==null?void 0:y.classList.contains(`${n.e("row")}`));let h=c;const v=(p=m[h])==null?void 0:p.childNodes;if(v!=null&&v.length){let y=0;Array.from(v).reduce((S,w,C)=>{var k,f;return((k=v[C])==null?void 0:k.colSpan)>1&&(y=(f=v[C])==null?void 0:f.colSpan),w.nodeName!=="TD"&&y===0&&S.push(C),y>0&&y--,S},[]).forEach(S=>{var w;for(h=c;h>0;){const C=(w=m[h-1])==null?void 0:w.childNodes;if(C[S]&&C[S].nodeName==="TD"&&C[S].rowSpan>1){ni(C[S],"hover-cell"),u.push(C[S]);break}h--}})}else u.forEach(y=>ls(y,"hover-cell")),u.length=0;!e.store.states.isComplex.value||!dr||rj(()=>{const y=m[d],T=m[c];y&&!y.classList.contains("hover-fixed-row")&&ls(y,"hover-row"),T&&ni(T,"hover-row")})}),Yo(()=>{var c;(c=Bn)==null||c()}),{ns:n,onColumnsChange:i,onScrollableChange:l,wrappedRowRender:a,tooltipContent:s,tooltipTrigger:o}},render(){const{wrappedRowRender:e,store:t}=this,r=t.states.data.value||[];return It("tbody",{tabIndex:-1},[r.reduce((n,a)=>n.concat(e(a,n.length)),[])])}});function tK(){const e=ft(ps),t=e==null?void 0:e.store,r=W(()=>t.states.fixedLeafColumnsLength.value),n=W(()=>t.states.rightFixedColumns.value.length),a=W(()=>t.states.columns.value.length),s=W(()=>t.states.fixedColumns.value.length),o=W(()=>t.states.rightFixedColumns.value.length);return{leftFixedLeafCount:r,rightFixedLeafCount:n,columnsCount:a,leftFixedCount:s,rightFixedCount:o,columns:t.states.columns}}function rK(e){const{columns:t}=tK(),r=ct("table");return{getCellClasses:(s,o)=>{const i=s[o],l=[r.e("cell"),i.id,i.align,i.labelClassName,...xy(r.b(),o,i.fixed,e.store)];return i.className&&l.push(i.className),i.children||l.push(r.is("leaf")),l},getCellStyles:(s,o)=>{const i=Cy(o,s.fixed,e.store);return bl(i,"left"),bl(i,"right"),i},columns:t}}var nK=Te({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(e){const{getCellClasses:t,getCellStyles:r,columns:n}=rK(e);return{ns:ct("table"),getCellClasses:t,getCellStyles:r,columns:n}},render(){const{columns:e,getCellStyles:t,getCellClasses:r,summaryMethod:n,sumText:a}=this,s=this.store.states.data.value;let o=[];return n?o=n({columns:e,data:s}):e.forEach((i,l)=>{if(l===0){o[l]=a;return}const u=s.map(b=>Number(b[i.property])),c=[];let d=!0;u.forEach(b=>{if(!Number.isNaN(+b)){d=!1;const m=`${b}`.split(".")[1];c.push(m?m.length:0)}});const p=Math.max.apply(null,c);d?o[l]="":o[l]=u.reduce((b,m)=>{const h=Number(m);return Number.isNaN(+h)?b:Number.parseFloat((b+m).toFixed(Math.min(p,20)))},0)}),It(It("tfoot",[It("tr",{},[...e.map((i,l)=>It("td",{key:l,colspan:i.colSpan,rowspan:i.rowSpan,class:r(e,l),style:t(i,l)},[It("div",{class:["cell",i.labelClassName]},[o[l]])]))])]))}});function aK(e){return{setCurrentRow:d=>{e.commit("setCurrentRow",d)},getSelectionRows:()=>e.getSelectionRows(),toggleRowSelection:(d,p,b=!0)=>{e.toggleRowSelection(d,p,!1,b),e.updateAllSelected()},clearSelection:()=>{e.clearSelection()},clearFilter:d=>{e.clearFilter(d)},toggleAllSelection:()=>{e.commit("toggleAllSelection")},toggleRowExpansion:(d,p)=>{e.toggleRowExpansionAdapter(d,p)},clearSort:()=>{e.clearSort()},sort:(d,p)=>{e.commit("sort",{prop:d,order:p})},updateKeyChildren:(d,p)=>{e.updateKeyChildren(d,p)}}}function sK(e,t,r,n){const a=ee(!1),s=ee(null),o=ee(!1),i=M=>{o.value=M},l=ee({width:null,height:null,headerHeight:null}),u=ee(!1),c={display:"inline-block",verticalAlign:"middle"},d=ee(),p=ee(0),b=ee(0),m=ee(0),h=ee(0),v=ee(0);Bs(()=>{t.setHeight(e.height)}),Bs(()=>{t.setMaxHeight(e.maxHeight)}),tt(()=>[e.currentRowKey,r.states.rowKey],([M,D])=>{!_(D)||!_(M)||r.setCurrentRowKey(`${M}`)},{immediate:!0}),tt(()=>e.data,M=>{n.store.commit("setData",M)},{immediate:!0,deep:!0}),Bs(()=>{e.expandRowKeys&&r.setExpandRowKeysAdapter(e.expandRowKeys)});const y=()=>{n.store.commit("setHoverRow",null),n.hoverState&&(n.hoverState=null)},T=(M,D)=>{const{pixelX:Y,pixelY:Z}=D;Math.abs(Y)>=Math.abs(Z)&&(n.refs.bodyWrapper.scrollLeft+=D.pixelX/5)},S=W(()=>e.height||e.maxHeight||r.states.fixedColumns.value.length>0||r.states.rightFixedColumns.value.length>0),w=W(()=>({width:t.bodyWidth.value?`${t.bodyWidth.value}px`:""})),C=()=>{S.value&&t.updateElsHeight(),t.updateColumnsWidth(),requestAnimationFrame(E)};Kt(async()=>{await xt(),r.updateColumns(),N(),requestAnimationFrame(C);const M=n.vnode.el,D=n.refs.headerWrapper;e.flexible&&M&&M.parentElement&&(M.parentElement.style.minWidth="0"),l.value={width:d.value=M.offsetWidth,height:M.offsetHeight,headerHeight:e.showHeader&&D?D.offsetHeight:null},r.states.columns.value.forEach(Y=>{Y.filteredValue&&Y.filteredValue.length&&n.store.commit("filterChange",{column:Y,values:Y.filteredValue,silent:!0})}),n.$ready=!0});const k=(M,D)=>{if(!M)return;const Y=Array.from(M.classList).filter(Z=>!Z.startsWith("is-scrolling-"));Y.push(t.scrollX.value?D:"is-scrolling-none"),M.className=Y.join(" ")},f=M=>{const{tableWrapper:D}=n.refs;k(D,M)},O=M=>{const{tableWrapper:D}=n.refs;return!!(D&&D.classList.contains(M))},E=function(){if(!n.refs.scrollBarRef)return;if(!t.scrollX.value){const ve="is-scrolling-none";O(ve)||f(ve);return}const M=n.refs.scrollBarRef.wrapRef;if(!M)return;const{scrollLeft:D,offsetWidth:Y,scrollWidth:Z}=M,{headerWrapper:se,footerWrapper:ne}=n.refs;se&&(se.scrollLeft=D),ne&&(ne.scrollLeft=D);const me=Z-Y-1;D>=me?f("is-scrolling-right"):f(D===0?"is-scrolling-left":"is-scrolling-middle")},N=()=>{n.refs.scrollBarRef&&(n.refs.scrollBarRef.wrapRef&&Qn(n.refs.scrollBarRef.wrapRef,"scroll",E,{passive:!0}),e.fit?Zn(n.vnode.el,$):Qn(window,"resize",$),Zn(n.refs.bodyWrapper,()=>{var M,D;$(),(D=(M=n.refs)==null?void 0:M.scrollBarRef)==null||D.update()}))},$=()=>{var M,D,Y,Z;const se=n.vnode.el;if(!n.$ready||!se)return;let ne=!1;const{width:me,height:ve,headerHeight:We}=l.value,Ke=d.value=se.offsetWidth;me!==Ke&&(ne=!0);const xe=se.offsetHeight;(e.height||S.value)&&ve!==xe&&(ne=!0);const ze=e.tableLayout==="fixed"?n.refs.headerWrapper:(M=n.refs.tableHeaderRef)==null?void 0:M.$el;e.showHeader&&(ze==null?void 0:ze.offsetHeight)!==We&&(ne=!0),p.value=((D=n.refs.tableWrapper)==null?void 0:D.scrollHeight)||0,m.value=(ze==null?void 0:ze.scrollHeight)||0,h.value=((Y=n.refs.footerWrapper)==null?void 0:Y.offsetHeight)||0,v.value=((Z=n.refs.appendWrapper)==null?void 0:Z.offsetHeight)||0,b.value=p.value-m.value-h.value-v.value,ne&&(l.value={width:Ke,height:xe,headerHeight:e.showHeader&&(ze==null?void 0:ze.offsetHeight)||0},C())},L=Na(),B=W(()=>{const{bodyWidth:M,scrollY:D,gutterWidth:Y}=t;return M.value?`${M.value-(D.value?Y:0)}px`:""}),F=W(()=>e.maxHeight?"fixed":e.tableLayout),R=W(()=>{if(e.data&&e.data.length)return null;let M="100%";e.height&&b.value&&(M=`${b.value}px`);const D=d.value;return{width:D?`${D}px`:"",height:M}}),H=W(()=>e.height?{height:"100%"}:e.maxHeight?Number.isNaN(Number(e.maxHeight))?{maxHeight:`calc(${e.maxHeight} - ${m.value+h.value}px)`}:{maxHeight:`${e.maxHeight-m.value-h.value}px`}:{});return{isHidden:a,renderExpanded:s,setDragVisible:i,isGroup:u,handleMouseLeave:y,handleHeaderFooterMousewheel:T,tableSize:L,emptyBlockStyle:R,handleFixedMousewheel:(M,D)=>{const Y=n.refs.bodyWrapper;if(Math.abs(D.spinY)>0){const Z=Y.scrollTop;D.pixelY<0&&Z!==0&&M.preventDefault(),D.pixelY>0&&Y.scrollHeight-Y.clientHeight>Z&&M.preventDefault(),Y.scrollTop+=Math.ceil(D.pixelY/5)}else Y.scrollLeft+=Math.ceil(D.pixelX/5)},resizeProxyVisible:o,bodyWidth:B,resizeState:l,doLayout:C,tableBodyStyles:w,tableLayout:F,scrollbarViewStyle:c,scrollbarStyle:H}}function oK(e){const t=ee(),r=()=>{const a=e.vnode.el.querySelector(".hidden-columns"),s={childList:!0,subtree:!0},o=e.store.states.updateOrderFns;t.value=new MutationObserver(()=>{o.forEach(i=>i())}),t.value.observe(a,s)};Kt(()=>{r()}),Yo(()=>{var n;(n=t.value)==null||n.disconnect()})}var iK={data:{type:Array,default:()=>[]},size:qs,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",checkStrictly:!1})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Boolean,flexible:Boolean,showOverflowTooltip:[Boolean,Object],appendFilterPanelTo:String,scrollbarTabindex:{type:[Number,String],default:void 0},allowDragLastColumn:{type:Boolean,default:!0}};function UA(e){const t=e.tableLayout==="auto";let r=e.columns||[];t&&r.every(({width:a})=>Rr(a))&&(r=[]);const n=a=>{const s={key:`${e.tableLayout}_${a.id}`,style:{},name:void 0};return t?s.style={width:`${a.width}px`}:s.name=a.id,s};return It("colgroup",{},r.map(a=>It("col",n(a))))}UA.props=["columns","tableLayout"];const lK=()=>{const e=ee(),t=(s,o)=>{const i=e.value;i&&i.scrollTo(s,o)},r=(s,o)=>{const i=e.value;i&&Zt(o)&&["Top","Left"].includes(s)&&i[`setScroll${s}`](o)};return{scrollBarRef:e,scrollTo:t,setScrollTop:s=>r("Top",s),setScrollLeft:s=>r("Left",s)}};var qA=!1,pi,Oy,Py,ip,lp,VA,up,Ey,$y,Ry,HA,Ly,My,zA,WA;function jn(){if(!qA){qA=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),r=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(Ly=/\b(iPhone|iP[ao]d)/.exec(e),My=/\b(iP[ao]d)/.exec(e),Ry=/Android/i.exec(e),zA=/FBAN\/\w+;/i.exec(e),WA=/Mobile/i.exec(e),HA=!!/Win64/.exec(e),t){pi=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,pi&&document&&document.documentMode&&(pi=document.documentMode);var n=/(?:Trident\/(\d+.\d+))/.exec(e);VA=n?parseFloat(n[1])+4:pi,Oy=t[2]?parseFloat(t[2]):NaN,Py=t[3]?parseFloat(t[3]):NaN,ip=t[4]?parseFloat(t[4]):NaN,ip?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),lp=t&&t[1]?parseFloat(t[1]):NaN):lp=NaN}else pi=Oy=Py=lp=ip=NaN;if(r){if(r[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);up=a?parseFloat(a[1].replace("_",".")):!0}else up=!1;Ey=!!r[2],$y=!!r[3]}else up=Ey=$y=!1}}var Dy={ie:function(){return jn()||pi},ieCompatibilityMode:function(){return jn()||VA>pi},ie64:function(){return Dy.ie()&&HA},firefox:function(){return jn()||Oy},opera:function(){return jn()||Py},webkit:function(){return jn()||ip},safari:function(){return Dy.webkit()},chrome:function(){return jn()||lp},windows:function(){return jn()||Ey},osx:function(){return jn()||up},linux:function(){return jn()||$y},iphone:function(){return jn()||Ly},mobile:function(){return jn()||Ly||My||Ry||WA},nativeApp:function(){return jn()||zA},android:function(){return jn()||Ry},ipad:function(){return jn()||My}},uK=Dy,cK=!!(typeof window<"u"&&window.document&&window.document.createElement),dK={canUseDOM:cK},KA=dK,GA;KA.canUseDOM&&(GA=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function fK(e,t){if(!KA.canUseDOM||t&&!("addEventListener"in document))return!1;var r="on"+e,n=r in document;if(!n){var a=document.createElement("div");a.setAttribute(r,"return;"),n=typeof a[r]=="function"}return!n&&GA&&e==="wheel"&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}var pK=fK,YA=10,JA=40,XA=800;function QA(e){var t=0,r=0,n=0,a=0;return"detail"in e&&(r=e.detail),"wheelDelta"in e&&(r=-e.wheelDelta/120),"wheelDeltaY"in e&&(r=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=r,r=0),n=t*YA,a=r*YA,"deltaY"in e&&(a=e.deltaY),"deltaX"in e&&(n=e.deltaX),(n||a)&&e.deltaMode&&(e.deltaMode==1?(n*=JA,a*=JA):(n*=XA,a*=XA)),n&&!t&&(t=n<1?-1:1),a&&!r&&(r=a<1?-1:1),{spinX:t,spinY:r,pixelX:n,pixelY:a}}QA.getEventType=function(){return uK.firefox()?"DOMMouseScroll":pK("wheel")?"wheel":"mousewheel"};var hK=QA;/**
* Checks if an event is supported in the current execution environment.
*
* NOTE: This will not work correctly for non-generic events such as `change`,
* `reset`, `load`, `error`, and `select`.
*
* Borrows from Modernizr.
*
* @param {string} eventNameSuffix Event name, e.g. "click".
* @param {?boolean} capture Check if the capture phase is supported.
* @return {boolean} True if the event is supported.
* @internal
* @license Modernizr 3.0.0pre (Custom Build) | MIT
*/const mK=function(e,t){if(e&&e.addEventListener){const r=function(n){const a=hK(n);t&&Reflect.apply(t,this,[n,a])};e.addEventListener("wheel",r,{passive:!0})}},gK={beforeMount(e,t){mK(e,t.value)}};let vK=1;const yK=Te({name:"ElTable",directives:{Mousewheel:gK},components:{TableHeader:GW,TableBody:eK,TableFooter:nK,ElScrollbar:kf,hColgroup:UA},props:iK,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change","scroll"],setup(e){const{t}=zr(),r=ct("table"),n=Vt();Fr(ps,n);const a=FW(n,e);n.store=a;const s=new jW({store:n.store,table:n,fit:e.fit,showHeader:e.showHeader});n.layout=s;const o=W(()=>(a.states.data.value||[]).length===0),{setCurrentRow:i,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:p,toggleRowExpansion:b,clearSort:m,sort:h,updateKeyChildren:v}=aK(a),{isHidden:y,renderExpanded:T,setDragVisible:S,isGroup:w,handleMouseLeave:C,handleHeaderFooterMousewheel:k,tableSize:f,emptyBlockStyle:O,handleFixedMousewheel:E,resizeProxyVisible:N,bodyWidth:$,resizeState:L,doLayout:B,tableBodyStyles:F,tableLayout:R,scrollbarViewStyle:H,scrollbarStyle:q}=sK(e,s,a,n),{scrollBarRef:M,scrollTo:D,setScrollLeft:Y,setScrollTop:Z}=lK(),se=Is(B,50),ne=`${r.namespace.value}-table_${vK++}`;n.tableId=ne,n.state={isGroup:w,resizeState:L,doLayout:B,debouncedUpdateLayout:se};const me=W(()=>{var Ke;return(Ke=e.sumText)!=null?Ke:t("el.table.sumText")}),ve=W(()=>{var Ke;return(Ke=e.emptyText)!=null?Ke:t("el.table.emptyText")}),We=W(()=>jA(a.states.originColumns.value)[0]);return oK(n),Ur(()=>{se.cancel()}),{ns:r,layout:s,store:a,columns:We,handleHeaderFooterMousewheel:k,handleMouseLeave:C,tableId:ne,tableSize:f,isHidden:y,isEmpty:o,renderExpanded:T,resizeProxyVisible:N,resizeState:L,isGroup:w,bodyWidth:$,tableBodyStyles:F,emptyBlockStyle:O,debouncedUpdateLayout:se,handleFixedMousewheel:E,setCurrentRow:i,getSelectionRows:l,toggleRowSelection:u,clearSelection:c,clearFilter:d,toggleAllSelection:p,toggleRowExpansion:b,clearSort:m,doLayout:B,sort:h,updateKeyChildren:v,t,setDragVisible:S,context:n,computedSumText:me,computedEmptyText:ve,tableLayout:R,scrollbarViewStyle:H,scrollbarStyle:q,scrollBarRef:M,scrollTo:D,setScrollLeft:Y,setScrollTop:Z,allowDragLastColumn:e.allowDragLastColumn}}});function bK(e,t,r,n,a,s){const o=Cr("hColgroup"),i=Cr("table-header"),l=Cr("table-body"),u=Cr("table-footer"),c=Cr("el-scrollbar"),d=Mg("mousewheel");return G(),le("div",{ref:"tableWrapper",class:Q([{[e.ns.m("fit")]:e.fit,[e.ns.m("striped")]:e.stripe,[e.ns.m("border")]:e.border||e.isGroup,[e.ns.m("hidden")]:e.isHidden,[e.ns.m("group")]:e.isGroup,[e.ns.m("fluid-height")]:e.maxHeight,[e.ns.m("scrollable-x")]:e.layout.scrollX.value,[e.ns.m("scrollable-y")]:e.layout.scrollY.value,[e.ns.m("enable-row-hover")]:!e.store.states.isComplex.value,[e.ns.m("enable-row-transition")]:(e.store.states.data.value||[]).length!==0&&(e.store.states.data.value||[]).length<100,"has-footer":e.showSummary},e.ns.m(e.tableSize),e.className,e.ns.b(),e.ns.m(`layout-${e.tableLayout}`)]),style:Dt(e.style),"data-prefix":e.ns.namespace.value,onMouseleave:e.handleMouseLeave},[K("div",{class:Q(e.ns.e("inner-wrapper"))},[K("div",{ref:"hiddenColumns",class:"hidden-columns"},[De(e.$slots,"default")],512),e.showHeader&&e.tableLayout==="fixed"?qt((G(),le("div",{key:0,ref:"headerWrapper",class:Q(e.ns.e("header-wrapper"))},[K("table",{ref:"tableHeader",class:Q(e.ns.e("header")),style:Dt(e.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[ue(o,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),ue(i,{ref:"tableHeaderRef",border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,"allow-drag-last-column":e.allowDragLastColumn,onSetDragVisible:e.setDragVisible},null,8,["border","default-sort","store","append-filter-panel-to","allow-drag-last-column","onSetDragVisible"])],6)],2)),[[d,e.handleHeaderFooterMousewheel]]):Oe("v-if",!0),K("div",{ref:"bodyWrapper",class:Q(e.ns.e("body-wrapper"))},[ue(c,{ref:"scrollBarRef","view-style":e.scrollbarViewStyle,"wrap-style":e.scrollbarStyle,always:e.scrollbarAlwaysOn,tabindex:e.scrollbarTabindex,onScroll:p=>e.$emit("scroll",p)},{default:ie(()=>[K("table",{ref:"tableBody",class:Q(e.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:Dt({width:e.bodyWidth,tableLayout:e.tableLayout})},[ue(o,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),e.showHeader&&e.tableLayout==="auto"?(G(),Le(i,{key:0,ref:"tableHeaderRef",class:Q(e.ns.e("body-header")),border:e.border,"default-sort":e.defaultSort,store:e.store,"append-filter-panel-to":e.appendFilterPanelTo,onSetDragVisible:e.setDragVisible},null,8,["class","border","default-sort","store","append-filter-panel-to","onSetDragVisible"])):Oe("v-if",!0),ue(l,{context:e.context,highlight:e.highlightCurrentRow,"row-class-name":e.rowClassName,"tooltip-effect":e.tooltipEffect,"tooltip-options":e.tooltipOptions,"row-style":e.rowStyle,store:e.store,stripe:e.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"]),e.showSummary&&e.tableLayout==="auto"?(G(),Le(u,{key:1,class:Q(e.ns.e("body-footer")),border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["class","border","default-sort","store","sum-text","summary-method"])):Oe("v-if",!0)],6),e.isEmpty?(G(),le("div",{key:0,ref:"emptyBlock",style:Dt(e.emptyBlockStyle),class:Q(e.ns.e("empty-block"))},[K("span",{class:Q(e.ns.e("empty-text"))},[De(e.$slots,"empty",{},()=>[ot(He(e.computedEmptyText),1)])],2)],6)):Oe("v-if",!0),e.$slots.append?(G(),le("div",{key:1,ref:"appendWrapper",class:Q(e.ns.e("append-wrapper"))},[De(e.$slots,"append")],2)):Oe("v-if",!0)]),_:3},8,["view-style","wrap-style","always","tabindex","onScroll"])],2),e.showSummary&&e.tableLayout==="fixed"?qt((G(),le("div",{key:1,ref:"footerWrapper",class:Q(e.ns.e("footer-wrapper"))},[K("table",{class:Q(e.ns.e("footer")),cellspacing:"0",cellpadding:"0",border:"0",style:Dt(e.tableBodyStyles)},[ue(o,{columns:e.store.states.columns.value,"table-layout":e.tableLayout},null,8,["columns","table-layout"]),ue(u,{border:e.border,"default-sort":e.defaultSort,store:e.store,"sum-text":e.computedSumText,"summary-method":e.summaryMethod},null,8,["border","default-sort","store","sum-text","summary-method"])],6)],2)),[[Sr,!e.isEmpty],[d,e.handleHeaderFooterMousewheel]]):Oe("v-if",!0),e.border||e.isGroup?(G(),le("div",{key:2,class:Q(e.ns.e("border-left-patch"))},null,2)):Oe("v-if",!0)],2),qt(K("div",{ref:"resizeProxy",class:Q(e.ns.e("column-resize-proxy"))},null,2),[[Sr,e.resizeProxyVisible]])],46,["data-prefix","onMouseleave"])}var wK=_t(yK,[["render",bK],["__file","table.vue"]]);const _K={selection:"table-column--selection",expand:"table__expand-column"},SK={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},TK=e=>_K[e]||"",xK={selection:{renderHeader({store:e,column:t}){function r(){return e.states.data.value&&e.states.data.value.length===0}return It(fs,{disabled:r(),size:e.states.tableSize.value,indeterminate:e.states.selection.value.length>0&&!e.states.isAllSelected.value,"onUpdate:modelValue":e.toggleAllSelection,modelValue:e.states.isAllSelected.value,ariaLabel:t.label})},renderCell({row:e,column:t,store:r,$index:n}){return It(fs,{disabled:t.selectable?!t.selectable.call(null,e,n):!1,size:r.states.tableSize.value,onChange:()=>{r.commit("rowSelectedChanged",e)},onClick:a=>a.stopPropagation(),modelValue:r.isSelected(e),ariaLabel:t.label})},sortable:!1,resizable:!1},index:{renderHeader({column:e}){return e.label||"#"},renderCell({column:e,$index:t}){let r=t+1;const n=e.index;return Zt(n)?r=t+n:et(n)&&(r=n(t)),It("div",{},[r])},sortable:!1},expand:{renderHeader({column:e}){return e.label||""},renderCell({row:e,store:t,expanded:r}){const{ns:n}=t,a=[n.e("expand-icon")];return r&&a.push(n.em("expand-icon","expanded")),It("div",{class:a,onClick:function(o){o.stopPropagation(),t.toggleRowExpansion(e)}},{default:()=>[It(Ct,null,{default:()=>[It(nl)]})]})},sortable:!1,resizable:!1}};function CK({row:e,column:t,$index:r}){var n;const a=t.property,s=a&&gf(e,a).value;return t&&t.formatter?t.formatter(e,t,s,r):((n=s==null?void 0:s.toString)==null?void 0:n.call(s))||""}function kK({row:e,treeNode:t,store:r},n=!1){const{ns:a}=r;if(!t)return n?[It("span",{class:a.e("placeholder")})]:null;const s=[],o=function(i){i.stopPropagation(),!t.loading&&r.loadOrToggle(e)};if(t.indent&&s.push(It("span",{class:a.e("indent"),style:{"padding-left":`${t.indent}px`}})),tn(t.expanded)&&!t.noLazyChildren){const i=[a.e("expand-icon"),t.expanded?a.em("expand-icon","expanded"):""];let l=nl;t.loading&&(l=Vu),s.push(It("div",{class:i,onClick:o},{default:()=>[It(Ct,{class:{[a.is("loading")]:t.loading}},{default:()=>[It(l)]})]}))}else s.push(It("span",{class:a.e("placeholder")}));return s}function ZA(e,t){return e.reduce((r,n)=>(r[n]=n,r),t)}function IK(e,t){const r=Vt();return{registerComplexWatchers:()=>{const s=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},i=ZA(s,o);Object.keys(i).forEach(l=>{const u=o[l];Wt(t,u)&&tt(()=>t[u],c=>{let d=c;u==="width"&&l==="realWidth"&&(d=Ty(c)),u==="minWidth"&&l==="realMinWidth"&&(d=PA(c)),r.columnConfig.value[u]=d,r.columnConfig.value[l]=d;const p=u==="fixed";e.value.store.scheduleLayout(p)})})},registerNormalWatchers:()=>{const s=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","filterClassName","showOverflowTooltip"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},i=ZA(s,o);Object.keys(i).forEach(l=>{const u=o[l];Wt(t,u)&&tt(()=>t[u],c=>{r.columnConfig.value[l]=c})})}}}function AK(e,t,r){const n=Vt(),a=ee(""),s=ee(!1),o=ee(),i=ee(),l=ct("table");Bs(()=>{o.value=e.align?`is-${e.align}`:null,o.value}),Bs(()=>{i.value=e.headerAlign?`is-${e.headerAlign}`:o.value,i.value});const u=W(()=>{let w=n.vnode.vParent||n.parent;for(;w&&!w.tableId&&!w.columnId;)w=w.vnode.vParent||w.parent;return w}),c=W(()=>{const{store:w}=n.parent;if(!w)return!1;const{treeData:C}=w.states,k=C.value;return k&&Object.keys(k).length>0}),d=ee(Ty(e.width)),p=ee(PA(e.minWidth)),b=w=>(d.value&&(w.width=d.value),p.value&&(w.minWidth=p.value),!d.value&&p.value&&(w.width=void 0),w.minWidth||(w.minWidth=80),w.realWidth=Number(Rr(w.width)?w.minWidth:w.width),w),m=w=>{const C=w.type,k=xK[C]||{};Object.keys(k).forEach(O=>{const E=k[O];O!=="className"&&!Rr(E)&&(w[O]=E)});const f=TK(C);if(f){const O=`${_(l.namespace)}-${f}`;w.className=w.className?`${w.className} ${O}`:O}return w},h=w=>{Ue(w)?w.forEach(k=>C(k)):C(w);function C(k){var f;((f=k==null?void 0:k.type)==null?void 0:f.name)==="ElTableColumn"&&(k.vParent=n)}};return{columnId:a,realAlign:o,isSubColumn:s,realHeaderAlign:i,columnOrTableParent:u,setColumnWidth:b,setColumnForcedProps:m,setColumnRenders:w=>{e.renderHeader||w.type!=="selection"&&(w.renderHeader=k=>(n.columnConfig.value.label,De(t,"header",k,()=>[w.label]))),t["filter-icon"]&&(w.renderFilterIcon=k=>De(t,"filter-icon",k));let C=w.renderCell;return w.type==="expand"?(w.renderCell=k=>It("div",{class:"cell"},[C(k)]),r.value.renderExpanded=k=>t.default?t.default(k):t.default):(C=C||CK,w.renderCell=k=>{let f=null;if(t.default){const B=t.default(k);f=B.some(F=>F.type!==en)?B:C(k)}else f=C(k);const{columns:O}=r.value.store.states,E=O.value.findIndex(B=>B.type==="default"),N=c.value&&k.cellIndex===E,$=kK(k,N),L={class:"cell",style:{}};return w.showOverflowTooltip&&(L.class=`${L.class} ${_(l.namespace)}-tooltip`,L.style={width:`${(k.column.realWidth||Number(k.column.width))-1}px`}),h(f),It("div",L,[$,f])}),w},getPropsData:(...w)=>w.reduce((C,k)=>(Ue(k)&&k.forEach(f=>{C[f]=e[f]}),C),{}),getColumnElIndex:(w,C)=>Array.prototype.indexOf.call(w,C),updateColumnOrder:()=>{r.value.store.commit("updateColumnOrder",n.columnConfig.value)}}}var OK={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},filterClassName:String,index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:e=>e.every(t=>["ascending","descending",null].includes(t))}};let PK=1;var eO=Te({name:"ElTableColumn",components:{ElCheckbox:fs},props:OK,setup(e,{slots:t}){const r=Vt(),n=ee({}),a=W(()=>{let S=r.parent;for(;S&&!S.tableId;)S=S.parent;return S}),{registerNormalWatchers:s,registerComplexWatchers:o}=IK(a,e),{columnId:i,isSubColumn:l,realHeaderAlign:u,columnOrTableParent:c,setColumnWidth:d,setColumnForcedProps:p,setColumnRenders:b,getPropsData:m,getColumnElIndex:h,realAlign:v,updateColumnOrder:y}=AK(e,t,a),T=c.value;i.value=`${T.tableId||T.columnId}_column_${PK++}`,jd(()=>{l.value=a.value!==T;const S=e.type||"default",w=e.sortable===""?!0:e.sortable,C=Rr(e.showOverflowTooltip)?T.props.showOverflowTooltip:e.showOverflowTooltip,k={...SK[S],id:i.value,type:S,property:e.prop||e.property,align:v,headerAlign:u,showOverflowTooltip:C,filterable:e.filters||e.filterMethod,filteredValue:[],filterPlacement:"",filterClassName:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:e.index,rawColumnKey:r.vnode.key};let $=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement","filterClassName"]);$=IW(k,$),$=OW(b,d,p)($),n.value=$,s(),o()}),Kt(()=>{var S;const w=c.value,C=l.value?w.vnode.el.children:(S=w.refs.hiddenColumns)==null?void 0:S.children,k=()=>h(C||[],r.vnode.el);n.value.getColumnIndex=k,k()>-1&&a.value.store.commit("insertColumn",n.value,l.value?w.columnConfig.value:null,y)}),Ur(()=>{const S=n.value.getColumnIndex;(S?S():-1)>-1&&a.value.store.commit("removeColumn",n.value,l.value?T.columnConfig.value:null,y)}),r.columnId=i.value,r.columnConfig=n},render(){var e,t,r;try{const n=(t=(e=this.$slots).default)==null?void 0:t.call(e,{row:{},column:{},$index:-1}),a=[];if(Ue(n))for(const o of n)((r=o.type)==null?void 0:r.name)==="ElTableColumn"||o.shapeFlag&2?a.push(o):o.type===pt&&Ue(o.children)&&o.children.forEach(i=>{(i==null?void 0:i.patchFlag)!==1024&&!mt(i==null?void 0:i.children)&&a.push(i)});return It("div",a)}catch{return It("div",[])}}});const tO=Lr(wK,{TableColumn:eO}),rO=si(eO);function EK(e){let t;const r=ee(!1),n=sn({...e,originalPosition:"",originalOverflow:"",visible:!1});function a(p){n.text=p}function s(){const p=n.parent,b=d.ns;if(!p.vLoadingAddClassList){let m=p.getAttribute("loading-number");m=Number.parseInt(m)-1,m?p.setAttribute("loading-number",m.toString()):(ls(p,b.bm("parent","relative")),p.removeAttribute("loading-number")),ls(p,b.bm("parent","hidden"))}o(),c.unmount()}function o(){var p,b;(b=(p=d.$el)==null?void 0:p.parentNode)==null||b.removeChild(d.$el)}function i(){var p;e.beforeClose&&!e.beforeClose()||(r.value=!0,clearTimeout(t),t=setTimeout(l,400),n.visible=!1,(p=e.closed)==null||p.call(e))}function l(){if(!r.value)return;const p=n.parent;r.value=!1,p.vLoadingAddClassList=void 0,s()}const c=ss(Te({name:"ElLoading",setup(p,{expose:b}){const{ns:m,zIndex:h}=bf("loading");return b({ns:m,zIndex:h}),()=>{const v=n.spinner||n.svg,y=It("svg",{class:"circular",viewBox:n.svgViewBox?n.svgViewBox:"0 0 50 50",...v?{innerHTML:v}:{}},[It("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),T=n.text?It("p",{class:m.b("text")},[n.text]):void 0;return It(ma,{name:m.b("fade"),onAfterLeave:l},{default:ie(()=>[qt(ue("div",{style:{backgroundColor:n.background||""},class:[m.b("mask"),n.customClass,n.fullscreen?"is-fullscreen":""]},[It("div",{class:m.b("spinner")},[y,T])]),[[Sr,n.visible]])])})}}})),d=c.mount(document.createElement("div"));return{...Ms(n),setText:a,removeElLoadingChild:o,close:i,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let cp;const sa=function(e={}){if(!dr)return;const t=$K(e);if(t.fullscreen&&cp)return cp;const r=EK({...t,closed:()=>{var a;(a=t.closed)==null||a.call(t),t.fullscreen&&(cp=void 0)}});RK(t,t.parent,r),nO(t,t.parent,r),t.parent.vLoadingAddClassList=()=>nO(t,t.parent,r);let n=t.parent.getAttribute("loading-number");return n?n=`${Number.parseInt(n)+1}`:n="1",t.parent.setAttribute("loading-number",n),t.parent.appendChild(r.$el),xt(()=>r.visible.value=t.visible),t.fullscreen&&(cp=r),r},$K=e=>{var t,r,n,a;let s;return mt(e.target)?s=(t=document.querySelector(e.target))!=null?t:document.body:s=e.target||document.body,{parent:s===document.body||e.body?document.body:s,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:s===document.body&&((r=e.fullscreen)!=null?r:!0),lock:(n=e.lock)!=null?n:!1,customClass:e.customClass||"",visible:(a=e.visible)!=null?a:!0,beforeClose:e.beforeClose,closed:e.closed,target:s}},RK=async(e,t,r)=>{const{nextZIndex:n}=r.vm.zIndex||r.vm._.exposed.zIndex,a={};if(e.fullscreen)r.originalPosition.value=ai(document.body,"position"),r.originalOverflow.value=ai(document.body,"overflow"),a.zIndex=n();else if(e.parent===document.body){r.originalPosition.value=ai(document.body,"position"),await xt();for(const s of["top","left"]){const o=s==="top"?"scrollTop":"scrollLeft";a[s]=`${e.target.getBoundingClientRect()[s]+document.body[o]+document.documentElement[o]-Number.parseInt(ai(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])a[s]=`${e.target.getBoundingClientRect()[s]}px`}else r.originalPosition.value=ai(t,"position");for(const[s,o]of Object.entries(a))r.$el.style[s]=o},nO=(e,t,r)=>{const n=r.vm.ns||r.vm._.exposed.ns;["absolute","fixed","sticky"].includes(r.originalPosition.value)?ls(t,n.bm("parent","relative")):ni(t,n.bm("parent","relative")),e.fullscreen&&e.lock?ni(t,n.bm("parent","hidden")):ls(t,n.bm("parent","hidden"))},aO=["success","info","warning","error"],wn=xk({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:dr?document.body:void 0}),LK=vt({customClass:{type:String,default:wn.customClass},center:{type:Boolean,default:wn.center},dangerouslyUseHTMLString:{type:Boolean,default:wn.dangerouslyUseHTMLString},duration:{type:Number,default:wn.duration},icon:{type:Ma,default:wn.icon},id:{type:String,default:wn.id},message:{type:Ye([String,Object,Function]),default:wn.message},onClose:{type:Ye(Function),default:wn.onClose},showClose:{type:Boolean,default:wn.showClose},type:{type:String,values:aO,default:wn.type},plain:{type:Boolean,default:wn.plain},offset:{type:Number,default:wn.offset},zIndex:{type:Number,default:wn.zIndex},grouping:{type:Boolean,default:wn.grouping},repeatNum:{type:Number,default:wn.repeatNum}}),MK={destroy:()=>!0},Ua=CT([]),DK=e=>{const t=Ua.findIndex(a=>a.id===e),r=Ua[t];let n;return t>0&&(n=Ua[t-1]),{current:r,prev:n}},NK=e=>{const{prev:t}=DK(e);return t?t.vm.exposed.bottom.value:0},FK=(e,t)=>Ua.findIndex(n=>n.id===e)>0?16:t,BK=Te({...Te({name:"ElMessage"}),props:LK,emits:MK,setup(e,{expose:t}){const r=e,{Close:n}=Av,{ns:a,zIndex:s}=bf("message"),{currentZIndex:o,nextZIndex:i}=s,l=ee(),u=ee(!1),c=ee(0);let d;const p=W(()=>r.type?r.type==="error"?"danger":r.type:"info"),b=W(()=>{const f=r.type;return{[a.bm("icon",f)]:f&&mo[f]}}),m=W(()=>r.icon||mo[r.type]||""),h=W(()=>NK(r.id)),v=W(()=>FK(r.id,r.offset)+h.value),y=W(()=>c.value+v.value),T=W(()=>({top:`${v.value}px`,zIndex:o.value}));function S(){r.duration!==0&&({stop:d}=pf(()=>{C()},r.duration))}function w(){d==null||d()}function C(){u.value=!1}function k({code:f}){f===ar.esc&&C()}return Kt(()=>{S(),i(),u.value=!0}),tt(()=>r.repeatNum,()=>{w(),S()}),Qn(document,"keydown",k),Zn(l,()=>{c.value=l.value.getBoundingClientRect().height}),t({visible:u,bottom:y,close:C}),(f,O)=>(G(),Le(ma,{name:_(a).b("fade"),onBeforeLeave:f.onClose,onAfterLeave:E=>f.$emit("destroy"),persisted:""},{default:ie(()=>[qt(K("div",{id:f.id,ref_key:"messageRef",ref:l,class:Q([_(a).b(),{[_(a).m(f.type)]:f.type},_(a).is("center",f.center),_(a).is("closable",f.showClose),_(a).is("plain",f.plain),f.customClass]),style:Dt(_(T)),role:"alert",onMouseenter:w,onMouseleave:S},[f.repeatNum>1?(G(),Le(_(_q),{key:0,value:f.repeatNum,type:_(p),class:Q(_(a).e("badge"))},null,8,["value","type","class"])):Oe("v-if",!0),_(m)?(G(),Le(_(Ct),{key:1,class:Q([_(a).e("icon"),_(b)])},{default:ie(()=>[(G(),Le(br(_(m))))]),_:1},8,["class"])):Oe("v-if",!0),De(f.$slots,"default",{},()=>[f.dangerouslyUseHTMLString?(G(),le(pt,{key:1},[Oe(" Caution here, message could've been compromised, never use user's input as message "),K("p",{class:Q(_(a).e("content")),innerHTML:f.message},null,10,["innerHTML"])],2112)):(G(),le("p",{key:0,class:Q(_(a).e("content"))},He(f.message),3))]),f.showClose?(G(),Le(_(Ct),{key:2,class:Q(_(a).e("closeBtn")),onClick:Pt(C,["stop"])},{default:ie(()=>[ue(_(n))]),_:1},8,["class","onClick"])):Oe("v-if",!0)],46,["id"]),[[Sr,u.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var jK=_t(BK,[["__file","message.vue"]]);let UK=1;const sO=e=>{const t=!e||mt(e)||ha(e)||et(e)?{message:e}:e,r={...wn,...t};if(!r.appendTo)r.appendTo=document.body;else if(mt(r.appendTo)){let n=document.querySelector(r.appendTo);Dn(n)||(n=document.body),r.appendTo=n}return tn(ja.grouping)&&!r.grouping&&(r.grouping=ja.grouping),Zt(ja.duration)&&r.duration===3e3&&(r.duration=ja.duration),Zt(ja.offset)&&r.offset===16&&(r.offset=ja.offset),tn(ja.showClose)&&!r.showClose&&(r.showClose=ja.showClose),r},qK=e=>{const t=Ua.indexOf(e);if(t===-1)return;Ua.splice(t,1);const{handler:r}=e;r.close()},VK=({appendTo:e,...t},r)=>{const n=`message_${UK++}`,a=t.onClose,s=document.createElement("div"),o={...t,id:n,onClose:()=>{a==null||a(),qK(c)},onDestroy:()=>{po(null,s)}},i=ue(jK,o,et(o.message)||ha(o.message)?{default:et(o.message)?o.message:()=>o.message}:null);i.appContext=r||wl._context,po(i,s),e.appendChild(s.firstElementChild);const l=i.component,c={id:n,vnode:i,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:i.component.props};return c},wl=(e={},t)=>{if(!dr)return{close:()=>{}};const r=sO(e);if(r.grouping&&Ua.length){const a=Ua.find(({vnode:s})=>{var o;return((o=s.props)==null?void 0:o.message)===r.message});if(a)return a.props.repeatNum+=1,a.props.type=r.type,a.handler}if(Zt(ja.max)&&Ua.length>=ja.max)return{close:()=>{}};const n=VK(r,t);return Ua.push(n),n.handler};aO.forEach(e=>{wl[e]=(t={},r)=>{const n=sO(t);return wl({...n,type:e},r)}});function HK(e){for(const t of Ua)(!e||e===t.props.type)&&t.handler.close()}wl.closeAll=HK,wl._context=null;const St=mk(wl,"$message"),Ny="_trap-focus-children",hi=[],oO=e=>{if(hi.length===0)return;const t=hi[hi.length-1][Ny];if(t.length>0&&e.code===ar.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const r=e.shiftKey,n=e.target===t[0],a=e.target===t[t.length-1];n&&r&&(e.preventDefault(),t[t.length-1].focus()),a&&!r&&(e.preventDefault(),t[0].focus())}},zK=Te({name:"ElMessageBox",directives:{TrapFocus:{beforeMount(e){e[Ny]=Dk(e),hi.push(e),hi.length<=1&&document.addEventListener("keydown",oO)},updated(e){xt(()=>{e[Ny]=Dk(e)})},unmounted(){hi.shift(),hi.length===0&&document.removeEventListener("keydown",oO)}}},components:{ElButton:yn,ElFocusTrap:$f,ElInput:Hs,ElOverlay:fy,ElIcon:Ct,...Av},inheritAttrs:!1,props:{buttonSize:{type:String,validator:xW},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:t}){const{locale:r,zIndex:n,ns:a,size:s}=bf("message-box",W(()=>e.buttonSize)),{t:o}=r,{nextZIndex:i}=n,l=ee(!1),u=sn({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:Ag(Vu),cancelButtonLoadingIcon:Ag(Vu),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:i()}),c=W(()=>{const H=u.type;return{[a.bm("icon",H)]:H&&mo[H]}}),d=us(),p=us(),b=W(()=>u.icon||mo[u.type]||""),m=W(()=>!!u.message),h=ee(),v=ee(),y=ee(),T=ee(),S=ee(),w=W(()=>u.confirmButtonClass);tt(()=>u.inputValue,async H=>{await xt(),e.boxType==="prompt"&&H!==null&&L()},{immediate:!0}),tt(()=>l.value,H=>{var q,M;H&&(e.boxType!=="prompt"&&(u.autofocus?y.value=(M=(q=S.value)==null?void 0:q.$el)!=null?M:h.value:y.value=h.value),u.zIndex=i()),e.boxType==="prompt"&&(H?xt().then(()=>{var D;T.value&&T.value.$el&&(u.autofocus?y.value=(D=B())!=null?D:h.value:y.value=h.value)}):(u.editorErrorMessage="",u.validateError=!1))});const C=W(()=>e.draggable),k=W(()=>e.overflow);sA(h,v,C,k),Kt(async()=>{await xt(),e.closeOnHashChange&&window.addEventListener("hashchange",f)}),Ur(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",f)});function f(){l.value&&(l.value=!1,xt(()=>{u.action&&t("action",u.action)}))}const O=()=>{e.closeOnClickModal&&$(u.distinguishCancelAndClose?"close":"cancel")},E=dy(O),N=H=>{if(u.inputType!=="textarea")return H.preventDefault(),$("confirm")},$=H=>{var q;e.boxType==="prompt"&&H==="confirm"&&!L()||(u.action=H,u.beforeClose?(q=u.beforeClose)==null||q.call(u,H,u,f):f())},L=()=>{if(e.boxType==="prompt"){const H=u.inputPattern;if(H&&!H.test(u.inputValue||""))return u.editorErrorMessage=u.inputErrorMessage||o("el.messagebox.error"),u.validateError=!0,!1;const q=u.inputValidator;if(et(q)){const M=q(u.inputValue);if(M===!1)return u.editorErrorMessage=u.inputErrorMessage||o("el.messagebox.error"),u.validateError=!0,!1;if(mt(M))return u.editorErrorMessage=M,u.validateError=!0,!1}}return u.editorErrorMessage="",u.validateError=!1,!0},B=()=>{const H=T.value.$refs;return H.input||H.textarea},F=()=>{$("close")},R=()=>{e.closeOnPressEscape&&F()};return e.lockScroll&&lA(l),{...Ms(u),ns:a,overlayEvent:E,visible:l,hasMessage:m,typeClass:c,contentId:d,inputId:p,btnSize:s,iconComponent:b,confirmButtonClasses:w,rootRef:h,focusStartRef:y,headerRef:v,inputRef:T,confirmRef:S,doClose:f,handleClose:F,onCloseRequested:R,handleWrapperClick:O,handleInputEnter:N,handleAction:$,t:o}}});function WK(e,t,r,n,a,s){const o=Cr("el-icon"),i=Cr("close"),l=Cr("el-input"),u=Cr("el-button"),c=Cr("el-focus-trap"),d=Cr("el-overlay");return G(),Le(ma,{name:"fade-in-linear",onAfterLeave:p=>e.$emit("vanish"),persisted:""},{default:ie(()=>[qt(ue(d,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:ie(()=>[K("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:Q(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[ue(c,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:ie(()=>[K("div",{ref:"rootRef",class:Q([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:Dt(e.customStyle),tabindex:"-1",onClick:Pt(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(G(),le("div",{key:0,ref:"headerRef",class:Q([e.ns.e("header"),{"show-close":e.showClose}])},[K("div",{class:Q(e.ns.e("title"))},[e.iconComponent&&e.center?(G(),Le(o,{key:0,class:Q([e.ns.e("status"),e.typeClass])},{default:ie(()=>[(G(),Le(br(e.iconComponent)))]),_:1},8,["class"])):Oe("v-if",!0),K("span",null,He(e.title),1)],2),e.showClose?(G(),le("button",{key:0,type:"button",class:Q(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:Wr(Pt(p=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[ue(o,{class:Q(e.ns.e("close"))},{default:ie(()=>[ue(i)]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):Oe("v-if",!0)],2)):Oe("v-if",!0),K("div",{id:e.contentId,class:Q(e.ns.e("content"))},[K("div",{class:Q(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(G(),Le(o,{key:0,class:Q([e.ns.e("status"),e.typeClass])},{default:ie(()=>[(G(),Le(br(e.iconComponent)))]),_:1},8,["class"])):Oe("v-if",!0),e.hasMessage?(G(),le("div",{key:1,class:Q(e.ns.e("message"))},[De(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(G(),Le(br(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(G(),Le(br(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:ie(()=>[ot(He(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):Oe("v-if",!0)],2),qt(K("div",{class:Q(e.ns.e("input"))},[ue(l,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":p=>e.inputValue=p,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:Q({invalid:e.validateError}),onKeydown:Wr(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),K("div",{class:Q(e.ns.e("errormsg")),style:Dt({visibility:e.editorErrorMessage?"visible":"hidden"})},He(e.editorErrorMessage),7)],2),[[Sr,e.showInput]])],10,["id"]),K("div",{class:Q(e.ns.e("btns"))},[e.showCancelButton?(G(),Le(u,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:Q([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:p=>e.handleAction("cancel"),onKeydown:Wr(Pt(p=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:ie(()=>[ot(He(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):Oe("v-if",!0),qt(ue(u,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:Q([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:p=>e.handleAction("confirm"),onKeydown:Wr(Pt(p=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:ie(()=>[ot(He(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[Sr,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[Sr,e.visible]])]),_:3},8,["onAfterLeave"])}var KK=_t(zK,[["render",WK],["__file","index.vue"]]);const lc=new Map,GK=e=>{let t=document.body;return e.appendTo&&(mt(e.appendTo)&&(t=document.querySelector(e.appendTo)),Dn(e.appendTo)&&(t=e.appendTo),Dn(t)||(t=document.body)),t},YK=(e,t,r=null)=>{const n=ue(KK,e,et(e.message)||ha(e.message)?{default:et(e.message)?e.message:()=>e.message}:null);return n.appContext=r,po(n,t),GK(e).appendChild(t.firstElementChild),n.component},JK=()=>document.createElement("div"),XK=(e,t)=>{const r=JK();e.onVanish=()=>{po(null,r),lc.delete(a)},e.onAction=s=>{const o=lc.get(a);let i;e.showInput?i={value:a.inputValue,action:s}:i=s,e.callback?e.callback(i,n.proxy):s==="cancel"||s==="close"?e.distinguishCancelAndClose&&s!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(i)};const n=YK(e,r,t),a=n.proxy;for(const s in e)Wt(e,s)&&!Wt(a.$props,s)&&(a[s]=e[s]);return a.visible=!0,a};function _l(e,t=null){if(!dr)return Promise.reject();let r;return mt(e)||ha(e)?e={message:e}:r=e.callback,new Promise((n,a)=>{const s=XK(e,t??_l._context);lc.set(s,{options:e,callback:r,resolve:n,reject:a})})}const QK=["alert","confirm","prompt"],ZK={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};QK.forEach(e=>{_l[e]=eG(e)});function eG(e){return(t,r,n,a)=>{let s="";return Rt(r)?(n=r,s=""):Rr(r)?s="":s=r,_l(Object.assign({title:s,message:t,type:"",...ZK[e]},n,{boxType:e}),a)}}_l.close=()=>{lc.forEach((e,t)=>{t.doClose()}),lc.clear()},_l._context=null;const _o=_l;_o.install=e=>{_o._context=e._context,e.config.globalProperties.$msgbox=_o,e.config.globalProperties.$messageBox=_o,e.config.globalProperties.$alert=_o.alert,e.config.globalProperties.$confirm=_o.confirm,e.config.globalProperties.$prompt=_o.prompt};const ht=_o,iO=["success","info","warning","error"],tG=vt({customClass:{type:String,default:""},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:Ma},id:{type:String,default:""},message:{type:Ye([String,Object,Function]),default:""},offset:{type:Number,default:0},onClick:{type:Ye(Function),default:()=>{}},onClose:{type:Ye(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...iO,""],default:""},zIndex:Number}),rG=Te({...Te({name:"ElNotification"}),props:tG,emits:{destroy:()=>!0},setup(e,{expose:t}){const r=e,{ns:n,zIndex:a}=bf("notification"),{nextZIndex:s,currentZIndex:o}=a,{Close:i}=wk,l=ee(!1);let u;const c=W(()=>{const S=r.type;return S&&mo[r.type]?n.m(S):""}),d=W(()=>r.type&&mo[r.type]||r.icon),p=W(()=>r.position.endsWith("right")?"right":"left"),b=W(()=>r.position.startsWith("top")?"top":"bottom"),m=W(()=>{var S;return{[b.value]:`${r.offset}px`,zIndex:(S=r.zIndex)!=null?S:o.value}});function h(){r.duration>0&&({stop:u}=pf(()=>{l.value&&y()},r.duration))}function v(){u==null||u()}function y(){l.value=!1}function T({code:S}){S===ar.delete||S===ar.backspace?v():S===ar.esc?l.value&&y():h()}return Kt(()=>{h(),s(),l.value=!0}),Qn(document,"keydown",T),t({visible:l,close:y}),(S,w)=>(G(),Le(ma,{name:_(n).b("fade"),onBeforeLeave:S.onClose,onAfterLeave:C=>S.$emit("destroy"),persisted:""},{default:ie(()=>[qt(K("div",{id:S.id,class:Q([_(n).b(),S.customClass,_(p)]),style:Dt(_(m)),role:"alert",onMouseenter:v,onMouseleave:h,onClick:S.onClick},[_(d)?(G(),Le(_(Ct),{key:0,class:Q([_(n).e("icon"),_(c)])},{default:ie(()=>[(G(),Le(br(_(d))))]),_:1},8,["class"])):Oe("v-if",!0),K("div",{class:Q(_(n).e("group"))},[K("h2",{class:Q(_(n).e("title")),textContent:He(S.title)},null,10,["textContent"]),qt(K("div",{class:Q(_(n).e("content")),style:Dt(S.title?void 0:{margin:0})},[De(S.$slots,"default",{},()=>[S.dangerouslyUseHTMLString?(G(),le(pt,{key:1},[Oe(" Caution here, message could've been compromised, never use user's input as message "),K("p",{innerHTML:S.message},null,8,["innerHTML"])],2112)):(G(),le("p",{key:0},He(S.message),1))])],6),[[Sr,S.message]]),S.showClose?(G(),Le(_(Ct),{key:0,class:Q(_(n).e("closeBtn")),onClick:Pt(y,["stop"])},{default:ie(()=>[ue(_(i))]),_:1},8,["class","onClick"])):Oe("v-if",!0)],2)],46,["id","onClick"]),[[Sr,l.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var nG=_t(rG,[["__file","notification.vue"]]);const dp={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},Fy=16;let aG=1;const Sl=function(e={},t){if(!dr)return{close:()=>{}};(mt(e)||ha(e))&&(e={message:e});const r=e.position||"top-right";let n=e.offset||0;dp[r].forEach(({vm:c})=>{var d;n+=(((d=c.el)==null?void 0:d.offsetHeight)||0)+Fy}),n+=Fy;const a=`notification_${aG++}`,s=e.onClose,o={...e,offset:n,id:a,onClose:()=>{sG(a,r,s)}};let i=document.body;Dn(e.appendTo)?i=e.appendTo:mt(e.appendTo)&&(i=document.querySelector(e.appendTo)),Dn(i)||(i=document.body);const l=document.createElement("div"),u=ue(nG,o,et(o.message)?o.message:ha(o.message)?()=>o.message:null);return u.appContext=Rr(t)?Sl._context:t,u.props.onDestroy=()=>{po(null,l)},po(u,l),dp[r].push({vm:u}),i.appendChild(l.firstElementChild),{close:()=>{u.component.exposed.visible.value=!1}}};iO.forEach(e=>{Sl[e]=(t={},r)=>((mt(t)||ha(t))&&(t={message:t}),Sl({...t,type:e},r))});function sG(e,t,r){const n=dp[t],a=n.findIndex(({vm:u})=>{var c;return((c=u.component)==null?void 0:c.props.id)===e});if(a===-1)return;const{vm:s}=n[a];if(!s)return;r==null||r(s);const o=s.el.offsetHeight,i=t.split("-")[0];n.splice(a,1);const l=n.length;if(!(l<1))for(let u=a;u<l;u++){const{el:c,component:d}=n[u].vm,p=Number.parseInt(c.style[i],10)-o-Fy;d.props.offset=p}}function oG(){for(const e of Object.values(dp))e.forEach(({vm:t})=>{t.component.exposed.visible.value=!1})}Sl.closeAll=oG,Sl._context=null;const iG=mk(Sl,"$notify"),lG=["src"],uG=Te({__name:"SearchSameDrawer",props:{sourceImageUrl:{}},setup(e){const t=e,r=W(()=>`https://erp.91miaoshou.com/find_source/product?sourceImageUrl=${encodeURIComponent(t.sourceImageUrl)}`);return(n,a)=>{const s=dA;return G(),Le(s,{size:"1000px",direction:"ltr","close-on-click-modal":!1,"close-on-press-escape":!1,class:"earth-wxt-search-same-drawer"},{default:ie(()=>[K("iframe",{src:_(r),class:"earth-wxt-search-same-iframe"},null,8,lG)]),_:1})}}}),oa=(e,t)=>{const r=e.__vccOpts||e;for(const[n,a]of t)r[n]=a;return r},lO=oa(uG,[["__scopeId","data-v-51a5b032"]]);var fp={exports:{}},By,uO;function pp(){if(uO)return By;uO=1;const e="2.0.0",t=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,a=t-6;return By={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},By}var jy,cO;function hp(){return cO||(cO=1,jy=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),jy}var dO;function uc(){return dO||(dO=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:a}=pp(),s=hp();t=e.exports={};const o=t.re=[],i=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={};let d=0;const p="[a-zA-Z0-9-]",b=[["\\s",1],["\\d",a],[p,n]],m=v=>{for(const[y,T]of b)v=v.split(`${y}*`).join(`${y}{0,${T}}`).split(`${y}+`).join(`${y}{1,${T}}`);return v},h=(v,y,T)=>{const S=m(y),w=d++;s(v,w,y),c[v]=w,l[w]=y,u[w]=S,o[w]=new RegExp(y,T?"g":void 0),i[w]=new RegExp(S,T?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),h("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${p}+`),h("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),h("FULL",`^${l[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),h("LOOSE",`^${l[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),h("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),h("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",l[c.COERCE],!0),h("COERCERTLFULL",l[c.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(fp,fp.exports)),fp.exports}var Uy,fO;function qy(){if(fO)return Uy;fO=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Uy=n=>n?typeof n!="object"?e:n:t,Uy}var Vy,pO;function hO(){if(pO)return Vy;pO=1;const e=/^[0-9]+$/,t=(n,a)=>{const s=e.test(n),o=e.test(a);return s&&o&&(n=+n,a=+a),n===a?0:s&&!o?-1:o&&!s?1:n<a?-1:1};return Vy={compareIdentifiers:t,rcompareIdentifiers:(n,a)=>t(a,n)},Vy}var Hy,mO;function On(){if(mO)return Hy;mO=1;const e=hp(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=pp(),{safeRe:n,t:a}=uc(),s=qy(),{compareIdentifiers:o}=hO();class i{constructor(u,c){if(c=s(c),u instanceof i){if(u.loose===!!c.loose&&u.includePrerelease===!!c.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const d=u.trim().match(c.loose?n[a.LOOSE]:n[a.FULL]);if(!d)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const b=+p;if(b>=0&&b<r)return b}return p}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof i)){if(typeof u=="string"&&u===this.version)return 0;u=new i(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof i||(u=new i(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof i||(u=new i(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let c=0;do{const d=this.prerelease[c],p=u.prerelease[c];if(e("prerelease compare",c,d,p),d===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(d===void 0)return-1;if(d===p)continue;return o(d,p)}while(++c)}compareBuild(u){u instanceof i||(u=new i(u,this.options));let c=0;do{const d=this.build[c],p=u.build[c];if(e("build compare",c,d,p),d===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(d===void 0)return-1;if(d===p)continue;return o(d,p)}while(++c)}inc(u,c,d){if(u.startsWith("pre")){if(!c&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(c){const p=`-${c}`.match(this.options.loose?n[a.PRERELEASELOOSE]:n[a.PRERELEASE]);if(!p||p[1]!==c)throw new Error(`invalid identifier: ${c}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",c,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",c,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",c,d),this.inc("pre",c,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",c,d),this.inc("pre",c,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let b=this.prerelease.length;for(;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);if(b===-1){if(c===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(c){let b=[c,p];d===!1&&(b=[c]),o(this.prerelease[0],c)===0?isNaN(this.prerelease[1])&&(this.prerelease=b):this.prerelease=b}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Hy=i,Hy}var zy,gO;function Tl(){if(gO)return zy;gO=1;const e=On();return zy=(r,n,a=!1)=>{if(r instanceof e)return r;try{return new e(r,n)}catch(s){if(!a)return null;throw s}},zy}var Wy,vO;function cG(){if(vO)return Wy;vO=1;const e=Tl();return Wy=(r,n)=>{const a=e(r,n);return a?a.version:null},Wy}var Ky,yO;function dG(){if(yO)return Ky;yO=1;const e=Tl();return Ky=(r,n)=>{const a=e(r.trim().replace(/^[=v]+/,""),n);return a?a.version:null},Ky}var Gy,bO;function fG(){if(bO)return Gy;bO=1;const e=On();return Gy=(r,n,a,s,o)=>{typeof a=="string"&&(o=s,s=a,a=void 0);try{return new e(r instanceof e?r.version:r,a).inc(n,s,o).version}catch{return null}},Gy}var Yy,wO;function pG(){if(wO)return Yy;wO=1;const e=Tl();return Yy=(r,n)=>{const a=e(r,null,!0),s=e(n,null,!0),o=a.compare(s);if(o===0)return null;const i=o>0,l=i?a:s,u=i?s:a,c=!!l.prerelease.length;if(!!u.prerelease.length&&!c){if(!u.patch&&!u.minor)return"major";if(u.compareMain(l)===0)return u.minor&&!u.patch?"minor":"patch"}const p=c?"pre":"";return a.major!==s.major?p+"major":a.minor!==s.minor?p+"minor":a.patch!==s.patch?p+"patch":"prerelease"},Yy}var Jy,_O;function hG(){if(_O)return Jy;_O=1;const e=On();return Jy=(r,n)=>new e(r,n).major,Jy}var Xy,SO;function mG(){if(SO)return Xy;SO=1;const e=On();return Xy=(r,n)=>new e(r,n).minor,Xy}var Qy,TO;function gG(){if(TO)return Qy;TO=1;const e=On();return Qy=(r,n)=>new e(r,n).patch,Qy}var Zy,xO;function vG(){if(xO)return Zy;xO=1;const e=Tl();return Zy=(r,n)=>{const a=e(r,n);return a&&a.prerelease.length?a.prerelease:null},Zy}var e0,CO;function qa(){if(CO)return e0;CO=1;const e=On();return e0=(r,n,a)=>new e(r,a).compare(new e(n,a)),e0}var t0,kO;function yG(){if(kO)return t0;kO=1;const e=qa();return t0=(r,n,a)=>e(n,r,a),t0}var r0,IO;function bG(){if(IO)return r0;IO=1;const e=qa();return r0=(r,n)=>e(r,n,!0),r0}var n0,AO;function a0(){if(AO)return n0;AO=1;const e=On();return n0=(r,n,a)=>{const s=new e(r,a),o=new e(n,a);return s.compare(o)||s.compareBuild(o)},n0}var s0,OO;function wG(){if(OO)return s0;OO=1;const e=a0();return s0=(r,n)=>r.sort((a,s)=>e(a,s,n)),s0}var o0,PO;function _G(){if(PO)return o0;PO=1;const e=a0();return o0=(r,n)=>r.sort((a,s)=>e(s,a,n)),o0}var i0,EO;function mp(){if(EO)return i0;EO=1;const e=qa();return i0=(r,n,a)=>e(r,n,a)>0,i0}var l0,$O;function u0(){if($O)return l0;$O=1;const e=qa();return l0=(r,n,a)=>e(r,n,a)<0,l0}var c0,RO;function LO(){if(RO)return c0;RO=1;const e=qa();return c0=(r,n,a)=>e(r,n,a)===0,c0}var d0,MO;function DO(){if(MO)return d0;MO=1;const e=qa();return d0=(r,n,a)=>e(r,n,a)!==0,d0}var f0,NO;function p0(){if(NO)return f0;NO=1;const e=qa();return f0=(r,n,a)=>e(r,n,a)>=0,f0}var h0,FO;function m0(){if(FO)return h0;FO=1;const e=qa();return h0=(r,n,a)=>e(r,n,a)<=0,h0}var g0,BO;function jO(){if(BO)return g0;BO=1;const e=LO(),t=DO(),r=mp(),n=p0(),a=u0(),s=m0();return g0=(i,l,u,c)=>{switch(l){case"===":return typeof i=="object"&&(i=i.version),typeof u=="object"&&(u=u.version),i===u;case"!==":return typeof i=="object"&&(i=i.version),typeof u=="object"&&(u=u.version),i!==u;case"":case"=":case"==":return e(i,u,c);case"!=":return t(i,u,c);case">":return r(i,u,c);case">=":return n(i,u,c);case"<":return a(i,u,c);case"<=":return s(i,u,c);default:throw new TypeError(`Invalid operator: ${l}`)}},g0}var v0,UO;function SG(){if(UO)return v0;UO=1;const e=On(),t=Tl(),{safeRe:r,t:n}=uc();return v0=(s,o)=>{if(s instanceof e)return s;if(typeof s=="number"&&(s=String(s)),typeof s!="string")return null;o=o||{};let i=null;if(!o.rtl)i=s.match(o.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const b=o.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let m;for(;(m=b.exec(s))&&(!i||i.index+i[0].length!==s.length);)(!i||m.index+m[0].length!==i.index+i[0].length)&&(i=m),b.lastIndex=m.index+m[1].length+m[2].length;b.lastIndex=-1}if(i===null)return null;const l=i[2],u=i[3]||"0",c=i[4]||"0",d=o.includePrerelease&&i[5]?`-${i[5]}`:"",p=o.includePrerelease&&i[6]?`+${i[6]}`:"";return t(`${l}.${u}.${c}${d}${p}`,o)},v0}var y0,qO;function TG(){if(qO)return y0;qO=1;class e{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const s=this.map.keys().next().value;this.delete(s)}this.map.set(r,n)}return this}}return y0=e,y0}var b0,VO;function Va(){if(VO)return b0;VO=1;const e=/\s+/g;class t{constructor(R,H){if(H=a(H),R instanceof t)return R.loose===!!H.loose&&R.includePrerelease===!!H.includePrerelease?R:new t(R.raw,H);if(R instanceof s)return this.raw=R.value,this.set=[[R]],this.formatted=void 0,this;if(this.options=H,this.loose=!!H.loose,this.includePrerelease=!!H.includePrerelease,this.raw=R.trim().replace(e," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(M=>!h(M[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const M of this.set)if(M.length===1&&v(M[0])){this.set=[M];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let R=0;R<this.set.length;R++){R>0&&(this.formatted+="||");const H=this.set[R];for(let q=0;q<H.length;q++)q>0&&(this.formatted+=" "),this.formatted+=H[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(R){const q=((this.options.includePrerelease&&b)|(this.options.loose&&m))+":"+R,M=n.get(q);if(M)return M;const D=this.options.loose,Y=D?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];R=R.replace(Y,L(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(l[u.COMPARATORTRIM],c),o("comparator trim",R),R=R.replace(l[u.TILDETRIM],d),o("tilde trim",R),R=R.replace(l[u.CARETTRIM],p),o("caret trim",R);let Z=R.split(" ").map(ve=>T(ve,this.options)).join(" ").split(/\s+/).map(ve=>$(ve,this.options));D&&(Z=Z.filter(ve=>(o("loose invalid filter",ve,this.options),!!ve.match(l[u.COMPARATORLOOSE])))),o("range list",Z);const se=new Map,ne=Z.map(ve=>new s(ve,this.options));for(const ve of ne){if(h(ve))return[ve];se.set(ve.value,ve)}se.size>1&&se.has("")&&se.delete("");const me=[...se.values()];return n.set(q,me),me}intersects(R,H){if(!(R instanceof t))throw new TypeError("a Range is required");return this.set.some(q=>y(q,H)&&R.set.some(M=>y(M,H)&&q.every(D=>M.every(Y=>D.intersects(Y,H)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new i(R,this.options)}catch{return!1}for(let H=0;H<this.set.length;H++)if(B(this.set[H],R,this.options))return!0;return!1}}b0=t;const r=TG(),n=new r,a=qy(),s=gp(),o=hp(),i=On(),{safeRe:l,t:u,comparatorTrimReplace:c,tildeTrimReplace:d,caretTrimReplace:p}=uc(),{FLAG_INCLUDE_PRERELEASE:b,FLAG_LOOSE:m}=pp(),h=F=>F.value==="<0.0.0-0",v=F=>F.value==="",y=(F,R)=>{let H=!0;const q=F.slice();let M=q.pop();for(;H&&q.length;)H=q.every(D=>M.intersects(D,R)),M=q.pop();return H},T=(F,R)=>(o("comp",F,R),F=k(F,R),o("caret",F),F=w(F,R),o("tildes",F),F=O(F,R),o("xrange",F),F=N(F,R),o("stars",F),F),S=F=>!F||F.toLowerCase()==="x"||F==="*",w=(F,R)=>F.trim().split(/\s+/).map(H=>C(H,R)).join(" "),C=(F,R)=>{const H=R.loose?l[u.TILDELOOSE]:l[u.TILDE];return F.replace(H,(q,M,D,Y,Z)=>{o("tilde",F,q,M,D,Y,Z);let se;return S(M)?se="":S(D)?se=`>=${M}.0.0 <${+M+1}.0.0-0`:S(Y)?se=`>=${M}.${D}.0 <${M}.${+D+1}.0-0`:Z?(o("replaceTilde pr",Z),se=`>=${M}.${D}.${Y}-${Z} <${M}.${+D+1}.0-0`):se=`>=${M}.${D}.${Y} <${M}.${+D+1}.0-0`,o("tilde return",se),se})},k=(F,R)=>F.trim().split(/\s+/).map(H=>f(H,R)).join(" "),f=(F,R)=>{o("caret",F,R);const H=R.loose?l[u.CARETLOOSE]:l[u.CARET],q=R.includePrerelease?"-0":"";return F.replace(H,(M,D,Y,Z,se)=>{o("caret",F,M,D,Y,Z,se);let ne;return S(D)?ne="":S(Y)?ne=`>=${D}.0.0${q} <${+D+1}.0.0-0`:S(Z)?D==="0"?ne=`>=${D}.${Y}.0${q} <${D}.${+Y+1}.0-0`:ne=`>=${D}.${Y}.0${q} <${+D+1}.0.0-0`:se?(o("replaceCaret pr",se),D==="0"?Y==="0"?ne=`>=${D}.${Y}.${Z}-${se} <${D}.${Y}.${+Z+1}-0`:ne=`>=${D}.${Y}.${Z}-${se} <${D}.${+Y+1}.0-0`:ne=`>=${D}.${Y}.${Z}-${se} <${+D+1}.0.0-0`):(o("no pr"),D==="0"?Y==="0"?ne=`>=${D}.${Y}.${Z}${q} <${D}.${Y}.${+Z+1}-0`:ne=`>=${D}.${Y}.${Z}${q} <${D}.${+Y+1}.0-0`:ne=`>=${D}.${Y}.${Z} <${+D+1}.0.0-0`),o("caret return",ne),ne})},O=(F,R)=>(o("replaceXRanges",F,R),F.split(/\s+/).map(H=>E(H,R)).join(" ")),E=(F,R)=>{F=F.trim();const H=R.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return F.replace(H,(q,M,D,Y,Z,se)=>{o("xRange",F,q,M,D,Y,Z,se);const ne=S(D),me=ne||S(Y),ve=me||S(Z),We=ve;return M==="="&&We&&(M=""),se=R.includePrerelease?"-0":"",ne?M===">"||M==="<"?q="<0.0.0-0":q="*":M&&We?(me&&(Y=0),Z=0,M===">"?(M=">=",me?(D=+D+1,Y=0,Z=0):(Y=+Y+1,Z=0)):M==="<="&&(M="<",me?D=+D+1:Y=+Y+1),M==="<"&&(se="-0"),q=`${M+D}.${Y}.${Z}${se}`):me?q=`>=${D}.0.0${se} <${+D+1}.0.0-0`:ve&&(q=`>=${D}.${Y}.0${se} <${D}.${+Y+1}.0-0`),o("xRange return",q),q})},N=(F,R)=>(o("replaceStars",F,R),F.trim().replace(l[u.STAR],"")),$=(F,R)=>(o("replaceGTE0",F,R),F.trim().replace(l[R.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=F=>(R,H,q,M,D,Y,Z,se,ne,me,ve,We)=>(S(q)?H="":S(M)?H=`>=${q}.0.0${F?"-0":""}`:S(D)?H=`>=${q}.${M}.0${F?"-0":""}`:Y?H=`>=${H}`:H=`>=${H}${F?"-0":""}`,S(ne)?se="":S(me)?se=`<${+ne+1}.0.0-0`:S(ve)?se=`<${ne}.${+me+1}.0-0`:We?se=`<=${ne}.${me}.${ve}-${We}`:F?se=`<${ne}.${me}.${+ve+1}-0`:se=`<=${se}`,`${H} ${se}`.trim()),B=(F,R,H)=>{for(let q=0;q<F.length;q++)if(!F[q].test(R))return!1;if(R.prerelease.length&&!H.includePrerelease){for(let q=0;q<F.length;q++)if(o(F[q].semver),F[q].semver!==s.ANY&&F[q].semver.prerelease.length>0){const M=F[q].semver;if(M.major===R.major&&M.minor===R.minor&&M.patch===R.patch)return!0}return!1}return!0};return b0}var w0,HO;function gp(){if(HO)return w0;HO=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=r(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?n[a.COMPARATORLOOSE]:n[a.COMPARATOR],p=c.match(d);if(!p)throw new TypeError(`Invalid comparator: ${c}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new i(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new i(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=r(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}w0=t;const r=qy(),{safeRe:n,t:a}=uc(),s=jO(),o=hp(),i=On(),l=Va();return w0}var _0,zO;function vp(){if(zO)return _0;zO=1;const e=Va();return _0=(r,n,a)=>{try{n=new e(n,a)}catch{return!1}return n.test(r)},_0}var S0,WO;function xG(){if(WO)return S0;WO=1;const e=Va();return S0=(r,n)=>new e(r,n).set.map(a=>a.map(s=>s.value).join(" ").trim().split(" ")),S0}var T0,KO;function CG(){if(KO)return T0;KO=1;const e=On(),t=Va();return T0=(n,a,s)=>{let o=null,i=null,l=null;try{l=new t(a,s)}catch{return null}return n.forEach(u=>{l.test(u)&&(!o||i.compare(u)===-1)&&(o=u,i=new e(o,s))}),o},T0}var x0,GO;function kG(){if(GO)return x0;GO=1;const e=On(),t=Va();return x0=(n,a,s)=>{let o=null,i=null,l=null;try{l=new t(a,s)}catch{return null}return n.forEach(u=>{l.test(u)&&(!o||i.compare(u)===1)&&(o=u,i=new e(o,s))}),o},x0}var C0,YO;function IG(){if(YO)return C0;YO=1;const e=On(),t=Va(),r=mp();return C0=(a,s)=>{a=new t(a,s);let o=new e("0.0.0");if(a.test(o)||(o=new e("0.0.0-0"),a.test(o)))return o;o=null;for(let i=0;i<a.set.length;++i){const l=a.set[i];let u=null;l.forEach(c=>{const d=new e(c.semver.version);switch(c.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!u||r(d,u))&&(u=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),u&&(!o||r(o,u))&&(o=u)}return o&&a.test(o)?o:null},C0}var k0,JO;function AG(){if(JO)return k0;JO=1;const e=Va();return k0=(r,n)=>{try{return new e(r,n).range||"*"}catch{return null}},k0}var I0,XO;function A0(){if(XO)return I0;XO=1;const e=On(),t=gp(),{ANY:r}=t,n=Va(),a=vp(),s=mp(),o=u0(),i=m0(),l=p0();return I0=(c,d,p,b)=>{c=new e(c,b),d=new n(d,b);let m,h,v,y,T;switch(p){case">":m=s,h=i,v=o,y=">",T=">=";break;case"<":m=o,h=l,v=s,y="<",T="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(c,d,b))return!1;for(let S=0;S<d.set.length;++S){const w=d.set[S];let C=null,k=null;if(w.forEach(f=>{f.semver===r&&(f=new t(">=0.0.0")),C=C||f,k=k||f,m(f.semver,C.semver,b)?C=f:v(f.semver,k.semver,b)&&(k=f)}),C.operator===y||C.operator===T||(!k.operator||k.operator===y)&&h(c,k.semver))return!1;if(k.operator===T&&v(c,k.semver))return!1}return!0},I0}var O0,QO;function OG(){if(QO)return O0;QO=1;const e=A0();return O0=(r,n,a)=>e(r,n,">",a),O0}var P0,ZO;function PG(){if(ZO)return P0;ZO=1;const e=A0();return P0=(r,n,a)=>e(r,n,"<",a),P0}var E0,eP;function EG(){if(eP)return E0;eP=1;const e=Va();return E0=(r,n,a)=>(r=new e(r,a),n=new e(n,a),r.intersects(n,a)),E0}var $0,tP;function $G(){if(tP)return $0;tP=1;const e=vp(),t=qa();return $0=(r,n,a)=>{const s=[];let o=null,i=null;const l=r.sort((p,b)=>t(p,b,a));for(const p of l)e(p,n,a)?(i=p,o||(o=p)):(i&&s.push([o,i]),i=null,o=null);o&&s.push([o,null]);const u=[];for(const[p,b]of s)p===b?u.push(p):!b&&p===l[0]?u.push("*"):b?p===l[0]?u.push(`<=${b}`):u.push(`${p} - ${b}`):u.push(`>=${p}`);const c=u.join(" || "),d=typeof n.raw=="string"?n.raw:String(n);return c.length<d.length?c:n},$0}var R0,rP;function RG(){if(rP)return R0;rP=1;const e=Va(),t=gp(),{ANY:r}=t,n=vp(),a=qa(),s=(d,p,b={})=>{if(d===p)return!0;d=new e(d,b),p=new e(p,b);let m=!1;e:for(const h of d.set){for(const v of p.set){const y=l(h,v,b);if(m=m||y!==null,y)continue e}if(m)return!1}return!0},o=[new t(">=0.0.0-0")],i=[new t(">=0.0.0")],l=(d,p,b)=>{if(d===p)return!0;if(d.length===1&&d[0].semver===r){if(p.length===1&&p[0].semver===r)return!0;b.includePrerelease?d=o:d=i}if(p.length===1&&p[0].semver===r){if(b.includePrerelease)return!0;p=i}const m=new Set;let h,v;for(const O of d)O.operator===">"||O.operator===">="?h=u(h,O,b):O.operator==="<"||O.operator==="<="?v=c(v,O,b):m.add(O.semver);if(m.size>1)return null;let y;if(h&&v){if(y=a(h.semver,v.semver,b),y>0)return null;if(y===0&&(h.operator!==">="||v.operator!=="<="))return null}for(const O of m){if(h&&!n(O,String(h),b)||v&&!n(O,String(v),b))return null;for(const E of p)if(!n(O,String(E),b))return!1;return!0}let T,S,w,C,k=v&&!b.includePrerelease&&v.semver.prerelease.length?v.semver:!1,f=h&&!b.includePrerelease&&h.semver.prerelease.length?h.semver:!1;k&&k.prerelease.length===1&&v.operator==="<"&&k.prerelease[0]===0&&(k=!1);for(const O of p){if(C=C||O.operator===">"||O.operator===">=",w=w||O.operator==="<"||O.operator==="<=",h){if(f&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===f.major&&O.semver.minor===f.minor&&O.semver.patch===f.patch&&(f=!1),O.operator===">"||O.operator===">="){if(T=u(h,O,b),T===O&&T!==h)return!1}else if(h.operator===">="&&!n(h.semver,String(O),b))return!1}if(v){if(k&&O.semver.prerelease&&O.semver.prerelease.length&&O.semver.major===k.major&&O.semver.minor===k.minor&&O.semver.patch===k.patch&&(k=!1),O.operator==="<"||O.operator==="<="){if(S=c(v,O,b),S===O&&S!==v)return!1}else if(v.operator==="<="&&!n(v.semver,String(O),b))return!1}if(!O.operator&&(v||h)&&y!==0)return!1}return!(h&&w&&!v&&y!==0||v&&C&&!h&&y!==0||f||k)},u=(d,p,b)=>{if(!d)return p;const m=a(d.semver,p.semver,b);return m>0?d:m<0||p.operator===">"&&d.operator===">="?p:d},c=(d,p,b)=>{if(!d)return p;const m=a(d.semver,p.semver,b);return m<0?d:m>0||p.operator==="<"&&d.operator==="<="?p:d};return R0=s,R0}var L0,nP;function LG(){if(nP)return L0;nP=1;const e=uc(),t=pp(),r=On(),n=hO(),a=Tl(),s=cG(),o=dG(),i=fG(),l=pG(),u=hG(),c=mG(),d=gG(),p=vG(),b=qa(),m=yG(),h=bG(),v=a0(),y=wG(),T=_G(),S=mp(),w=u0(),C=LO(),k=DO(),f=p0(),O=m0(),E=jO(),N=SG(),$=gp(),L=Va(),B=vp(),F=xG(),R=CG(),H=kG(),q=IG(),M=AG(),D=A0(),Y=OG(),Z=PG(),se=EG(),ne=$G(),me=RG();return L0={parse:a,valid:s,clean:o,inc:i,diff:l,major:u,minor:c,patch:d,prerelease:p,compare:b,rcompare:m,compareLoose:h,compareBuild:v,sort:y,rsort:T,gt:S,lt:w,eq:C,neq:k,gte:f,lte:O,cmp:E,coerce:N,Comparator:$,Range:L,satisfies:B,toComparators:F,maxSatisfying:R,minSatisfying:H,minVersion:q,validRange:M,outside:D,gtr:Y,ltr:Z,intersects:se,simplifyRange:ne,subset:me,SemVer:r,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},L0}var aP=LG();const MG=["src"],DG=oa(Te({__name:"AgreementDialog",setup(e,{expose:t}){const r=ee(!1),n=ee(""),a=ee("协议");return t({openDialog:o=>{const{type:i,title:l}=o;a.value=l;const u=sa();MB({type:i}).then(c=>{n.value=c.url,r.value=!0}).finally(()=>{u.close()})}}),(o,i)=>{const l=py;return G(),Le(l,gn({modelValue:_(r),"onUpdate:modelValue":i[0]||(i[0]=u=>lr(r)?r.value=u:null),title:_(a),top:"100px",width:"1300px"},o.$attrs,{class:"agreement-detail-dialog"}),{default:ie(()=>[K("iframe",{src:_(n)},null,8,MG)]),_:1},16,["modelValue","title"])}}}),[["__scopeId","data-v-b8d7356a"]]),NG={class:"earth-wxt-install-agreement-text"},FG=oa(Te({__name:"InstallAgreementBox",props:S5({size:{type:String,default:"default"},visibleReloadTips:Boolean},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(e){const t=H5(e,"modelValue"),r=Dd("agreementDialogRef"),n=(s,o)=>{r.value.openDialog({type:s,title:o})},a=()=>{window.location.reload()};return(s,o)=>{const i=fs,l=DG;return G(),le("div",{class:Q(`earth-wxt-install-agreement-${e.size}`)},[K("div",NG,[o[5]||(o[5]=ot(" 安装插件时，请确保旧版本“跨境ERP助手”插件在浏览器已关闭或移除，",-1)),o[6]||(o[6]=K("br",null,null,-1)),o[7]||(o[7]=ot(" 若新旧版本同时存在将导致浏览器随机启用任意版本 ",-1)),e.visibleReloadTips?(G(),le(pt,{key:0},[o[3]||(o[3]=K("br",null,null,-1)),o[4]||(o[4]=ot(" 若插件已确认开启, ",-1)),K("span",{class:"earth-wxt-install-agreement-span",onClick:Pt(a,["stop"])}," 请点击刷新 ")],64)):Oe("",!0)]),ue(i,{modelValue:t.value,"onUpdate:modelValue":o[2]||(o[2]=u=>t.value=u),class:"earth-wxt-install-agreement-checkbox",size:e.size},{default:ie(()=>[o[8]||(o[8]=ot(" 我已阅读并同意 ",-1)),K("span",{class:"earth-wxt-install-agreement-span",onClick:o[0]||(o[0]=Pt(u=>n("userAgreement","用户服务协议"),["prevent","stop"]))}," 用户服务协议， "),K("span",{class:"earth-wxt-install-agreement-span",onClick:o[1]||(o[1]=Pt(u=>n("privacyAgreement","隐私政策"),["prevent","stop"]))}," 隐私政策 "),o[9]||(o[9]=ot("，确定下载并使用插件 ",-1))]),_:1},8,["modelValue","size"]),ue(l,{ref_key:"agreementDialogRef",ref:r},null,512)],2)}}}),[["__scopeId","data-v-92d293b6"]]),sP=async e=>{const{upgradePluginUrl:t,extensionInfo:r}=e;r.installType==="normal"?ei({url:r.homepageUrl||t}):ei({url:t})},oP=async()=>{const e=await rl(),t=Wn.runtime.getManifest().version,{latestVersion:r,minSupportVersion:n,upgradePluginUrl:a}=e;return{extensionInfo:await TB("getSelf"),latestVersion:r,minSupportVersion:n,currentVersion:t,upgradePluginUrl:a,hasUpdate:aP.gt(r,t),forceUpgrade:aP.gt(n,t)}},BG=async()=>{const e=await Ze.getItem($C);return e!=null&&e.confirmEnabled?Promise.resolve():Promise.reject(new Error("未同意插件安装协议"))},jG=async(e=!1)=>{if(!e){const[n,a]=await to(BG());if(!a)return Promise.resolve()}const t=ee(!1);await ht({title:"提示",confirmButtonText:"继续",showCancelButton:!0,message:()=>It(FG,{size:"small",visibleReloadTips:e,modelValue:t.value,"onUpdate:modelValue":n=>{t.value=n}}),beforeClose(n,a,s){n==="confirm"?t.value?s():St.error("请先阅读并勾选同意用户服务协议后再下载"):s()}}),await Ze.setItem($C,{confirmEnabled:!0})},UG=async()=>{const[e,t]=await to(oP());if(t)return St.error(t.reason||t.message||t),Promise.reject(t);const{latestVersion:r,minSupportVersion:n,currentVersion:a,hasUpdate:s,forceUpgrade:o}=e;if(o)throw ht.confirm(`当前插件版本为 ${a}，最低支持版本为 ${n}，是否前往更新？`,"提示",{confirmButtonText:"前往更新",type:"warning"}).then(()=>{sP(e)}),new Error("插件需要更新");if(s){if(await Ze.getItem(EC)===r)return;await ht.confirm(`当前插件版本为 ${a}，最新版本为 ${r}，是否前往更新？`,"提示",{confirmButtonText:"前往更新",type:"warning"}).then(()=>{throw sP(e),new Error("插件更新中")}).catch(()=>{Ze.setItem(EC,r),console.warn("取消更新")})}},jt=async()=>{await jG(),await UG()},So=async()=>{const{clientId:e}=await rl(),{releaseChannel:t}=await RC(),{version:r,manifest_version:n}=Wn.runtime.getManifest();WB({clientId:e,version:r,manifestVersion:n,releaseChannel:t})};var ba=(e=>(e.emptyRowData="emptyRowData",e.notLogin="notLogin",e.needVerify="needVerify",e.rowDataInvalid="rowDataInvalid",e.loginHtmlNotLogin="loginHtmlNotLogin",e.noDesc="noDesc",e.getPostFeeNotSelectedAddress="getPostFeeNotSelectedAddress",e.collectStockConfirm="collectStockConfirm",e.collectPriceConfirm="collectPriceConfirm",e.collectStockAndPriceConfirm="collectStockAndPriceConfirm",e))(ba||{});function M0(e){return gg()?(vg(e),!0):!1}const qG=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const VG=e=>e!=null,HG=Object.prototype.toString,zG=e=>HG.call(e)==="[object Object]",D0=()=>{};function N0(e,t=!1,r="Timeout"){return new Promise((n,a)=>{setTimeout(t?()=>a(r):n,e)})}function yp(e){return Array.isArray(e)?e:[e]}function F0(e,t=!1){function r(d,{flush:p="sync",deep:b=!1,timeout:m,throwOnTimeout:h}={}){let v=null;const T=[new Promise(S=>{v=tt(e,w=>{d(w)!==t&&(v?v():xt(()=>v==null?void 0:v()),S(w))},{flush:p,deep:b,immediate:!0})})];return m!=null&&T.push(N0(m,h).then(()=>ln(e)).finally(()=>v==null?void 0:v())),Promise.race(T)}function n(d,p){if(!lr(d))return r(w=>w===d,p);const{flush:b="sync",deep:m=!1,timeout:h,throwOnTimeout:v}=p??{};let y=null;const S=[new Promise(w=>{y=tt([e,d],([C,k])=>{t!==(C===k)&&(y?y():xt(()=>y==null?void 0:y()),w(C))},{flush:b,deep:m,immediate:!0})})];return h!=null&&S.push(N0(h,v).then(()=>ln(e)).finally(()=>(y==null||y(),ln(e)))),Promise.race(S)}function a(d){return r(p=>!!p,d)}function s(d){return n(null,d)}function o(d){return n(void 0,d)}function i(d){return r(Number.isNaN,d)}function l(d,p){return r(b=>{const m=Array.from(b);return m.includes(d)||m.includes(ln(d))},p)}function u(d){return c(1,d)}function c(d=1,p){let b=-1;return r(()=>(b+=1,b>=d),p)}return Array.isArray(ln(e))?{toMatch:r,toContains:l,changed:u,changedTimes:c,get not(){return F0(e,!t)}}:{toMatch:r,toBe:n,toBeTruthy:a,toBeNull:s,toBeNaN:i,toBeUndefined:o,changed:u,changedTimes:c,get not(){return F0(e,!t)}}}function WG(e){return F0(e)}function KG(e,t,r){return tt(e,t,{...r,immediate:!0})}const bp=qG?window:void 0;function wp(e){var t;const r=ln(e);return(t=r==null?void 0:r.$el)!=null?t:r}function B0(...e){const t=[],r=()=>{t.forEach(i=>i()),t.length=0},n=(i,l,u,c)=>(i.addEventListener(l,u,c),()=>i.removeEventListener(l,u,c)),a=W(()=>{const i=yp(ln(e[0])).filter(l=>l!=null);return i.every(l=>typeof l!="string")?i:void 0}),s=KG(()=>{var i,l;return[(l=(i=a.value)==null?void 0:i.map(u=>wp(u)))!=null?l:[bp].filter(u=>u!=null),yp(ln(a.value?e[1]:e[0])),yp(_(a.value?e[2]:e[1])),ln(a.value?e[3]:e[2])]},([i,l,u,c])=>{if(r(),!(i!=null&&i.length)||!(l!=null&&l.length)||!(u!=null&&u.length))return;const d=zG(c)?{...c}:c;t.push(...i.flatMap(p=>l.flatMap(b=>u.map(m=>n(p,b,m,d)))))},{flush:"post"}),o=()=>{s(),r()};return M0(r),o}function GG(){const e=Zr(!1),t=Vt();return t&&Kt(()=>{e.value=!0},t),e}function YG(e){const t=GG();return W(()=>(t.value,!!e()))}function iP(e,t,r={}){const{window:n=bp,...a}=r;let s;const o=YG(()=>n&&"MutationObserver"in n),i=()=>{s&&(s.disconnect(),s=void 0)},l=W(()=>{const p=ln(e),b=yp(p).map(wp).filter(VG);return new Set(b)}),u=tt(l,p=>{i(),o.value&&p.size&&(s=new MutationObserver(t),p.forEach(b=>s.observe(b,a)))},{immediate:!0,flush:"post"}),c=()=>s==null?void 0:s.takeRecords(),d=()=>{u(),i()};return M0(d),{isSupported:o,stop:d,takeRecords:c}}function JG(e,t,r={}){const{window:n=bp,document:a=n==null?void 0:n.document,flush:s="sync"}=r;if(!n||!a)return D0;let o;const i=c=>{o==null||o(),o=c},l=Bs(()=>{const c=wp(e);if(c){const{stop:d}=iP(a,p=>{p.map(m=>[...m.removedNodes]).flat().some(m=>m===c||m.contains(c))&&t(p)},{window:n,childList:!0,subtree:!0});i(d)}},{flush:s}),u=()=>{l(),i()};return M0(u),u}function XG(e,t,r){var n;const{immediate:a=!0,delay:s=0,onError:o=(n=globalThis.reportError)!=null?n:D0,onSuccess:i=D0,resetOnExecute:l=!0,shallow:u=!0,throwError:c}={},d=u?Zr(t):ee(t),p=Zr(!1),b=Zr(!1),m=Zr(void 0);async function h(T=0,...S){l&&(d.value=ln(t)),m.value=void 0,p.value=!1,b.value=!0,T>0&&await N0(T);const w=typeof e=="function"?e(...S):e;try{const C=await w;d.value=C,p.value=!0,i(C)}catch(C){if(m.value=C,o(C),c)throw C}finally{b.value=!1}return d.value}a&&h(s);const v={state:d,isReady:p,isLoading:b,error:m,execute:h,executeImmediate:(...T)=>h(0,...T)};function y(){return new Promise((T,S)=>{WG(b).toBe(!1).then(()=>T(v)).catch(S)})}return{...v,then(T,S){return y().then(T,S)}}}function QG(e,t={}){const{delayEnter:r=0,delayLeave:n=0,triggerOnRemoval:a=!1,window:s=bp}=t,o=Zr(!1);let i;const l=u=>{const c=u?r:n;i&&(clearTimeout(i),i=void 0),c?i=setTimeout(()=>o.value=u,c):o.value=u};return s&&(B0(e,"mouseenter",()=>l(!0),{passive:!0}),B0(e,"mouseleave",()=>l(!1),{passive:!0}),a&&JG(W(()=>wp(e)),()=>l(!1))),o}function Ys(e,t,r){const{state:n,execute:a,...s}=XG(async()=>{const i=await Ze.getItem(e);return i===null?t:i},t);let o;return Kt(()=>{o=Ze.watch(e,async i=>{n.value=i??t})}),Yo(()=>{o==null||o()}),{state:W({get(){return n.value},set(i){Ze.setItem(e,i),n.value=i}}),...s}}const j0=e=>{const{state:t}=Ys(PC,!1),{state:r}=Ys(XB,{}),{state:n}=Ys(ZB,{}),a=async()=>{try{await PB()}catch(v){if((v==null?void 0:v.result)==="fail")return ht.confirm("您还未登录ERP软件，请先登录","提示",{confirmButtonText:"立即登录",type:"warning"}).then(()=>{window.open("https://erp.91miaoshou.com")}),Promise.reject(v);iG({message:"因网络波动，请降低采集频率，稍后重试，可先至妙手ERP查看数据是否提交采集成功。",type:"info"})}},s={1688:{notAuthResellerAccount:"应1688要求，请授权1688货源账号后在进行采集，授权后采集更稳定，更快速!",notAuthResellerAccountButtonText:"前往授权",existsResellerAccountTips:"您的1688货源账号存在授权异常，请重新授权后再采集",existsResellerAccountButtonText:"更新授权"},"51mbk":{existsResellerAccountTips:"您的51mbk货源账号存在授权异常，请重新授权后再采集",existsResellerAccountButtonText:"更新授权"}},o=async()=>{const{resellerAccountList:v}=await DB({pageNo:1,pageSize:1e5,platform:"ali1688"}),y=s[ln(e)]||s[1688],T={message:y.notAuthResellerAccount,confirmButtonText:y.notAuthResellerAccountButtonText};if(v.length){if((v||[]).every(w=>w.authStatus==="valid"))return Promise.resolve();T.message=y.existsResellerAccountTips,T.confirmButtonText=y.existsResellerAccountButtonText}return ht.confirm(T.message,"提示",{confirmButtonText:T.confirmButtonText,cancelButtonText:"查看帮助教程",type:"warning",distinguishCancelAndClose:!0,cancelButtonClass:"earth-ali1688-message-box-cancel-button"}).then(()=>{window.open("https://erp.91miaoshou.com/auth/reseller_account?platform=ali1688")}).catch(S=>{S==="cancel"&&window.open("https://erp.91miaoshou.com/help_center/article_2872.html")}),Promise.reject()},i=v=>{var k,f;const y=ln(e),{code:T,existsResellerAccount:S}=v,w=S?"existsResellerAccount":T,C=((k=s==null?void 0:s[y])==null?void 0:k[w])||`您当前未授权${y}，请先授权ERP`;ht.confirm(C,"提示",{confirmButtonText:((f=s==null?void 0:s[y])==null?void 0:f[`${w}ButtonText`])||"前往授权",cancelButtonText:"查看帮助教程",type:"warning",distinguishCancelAndClose:!0,cancelButtonClass:"earth-ali1688-message-box-cancel-button"}).then(()=>{window.open(v.redirectUrl)}).catch(O=>{O==="cancel"&&window.open("https://erp.91miaoshou.com/help_center/article_2872.html")})},l=async v=>{await a();const y=zw(v,S=>S.itemId||S.itemUrl),T={isAutoPublish:0,itemSimpleDetails:JSON.stringify(y)};try{const S=await EB(T);return St.success("已提交采集任务，可前往采集箱查看或发布"),S}catch(S){if(S.type==="collectNumUnpaid"){const w=`
          由于采集成本上涨，免费账号最多可采集<b style="color: red">${S.freeNum}</b>个商品；
          <br>
          当前剩余可采集<b style="color: red">${S.balanceNum}</b>个，建议升级版本！
        `;ht.confirm(w,"提示",{dangerouslyUseHTMLString:!0,confirmButtonText:"升级版本"}).then(()=>{window.open(S.accountPaymentUrl)})}else S.code==="notAuthResellerAccount"?i(S):St.error(S.reason||S.message||S);return Promise.reject(S)}},u=v=>{const y="该货源平台需要先登录，请先登录";return ht.confirm(y,"提示",{type:"warning"}).then(()=>{"loginPageUrl"in v?window.open(v.loginPageUrl,"","noreferrer"):v.loginFunc()}),y},c=async v=>{if(!r.value[ln(e)]){const y=ee(!1);await ht({title:"提示",confirmButtonText:"继续采集",showCancelButton:!0,type:"warning",customClass:"earth-wxt-collect-stock-confirm",message:()=>It(pt,null,[It("p",null,v),It(fs,{modelValue:y.value,"onUpdate:modelValue":T=>{y.value=T}},()=>"不再提醒")])}),y.value&&(r.value=Object.assign({},r.value,{[ln(e)]:!0}))}},d=async v=>{if(!n.value[ln(e)]){const y=ee(!1);await ht({title:"提示",confirmButtonText:"继续采集",showCancelButton:!0,type:"warning",customClass:"earth-wxt-collect-stock-confirm",message:()=>It(pt,null,[It("p",null,v),It(fs,{modelValue:y.value,"onUpdate:modelValue":T=>{y.value=T}},()=>"不再提醒")])}),y.value&&(n.value=Object.assign({},n.value,{[ln(e)]:!0}))}},p=async(v,y)=>{await ht({title:"提示",confirmButtonText:"刷新当前页面",showCancelButton:!0,type:"warning",message:v}),location.href=y.url},b=v=>{const y=document.createElement("iframe");y.width="500px",y.height="500px",y.style.backgroundColor="#FFFFFF",y.style.border="none",y.src=v;const T=document.createElement("div");return T.style.width="100%",T.style.height="100%",T.style.position="fixed",T.style.top="0",T.style.left="0",T.style.zIndex="9999999999999",T.style.backgroundColor="rgba(0,0,0,0.5)",T.style.display="flex",T.style.alignItems="center",T.style.justifyContent="center",T.append(y),document.body.append(T),{iframe:y,iframeWrap:T}};return{collectPanelDisabled:t,onCheckLogin:a,onPushCollectBox:l,onValidatorCollectDetail:async(v,y=!1)=>{if(v&&v.antiCode){let T="";switch(v.antiCode){case ba.emptyRowData:T="账号异常，当前商品采集失败，请降低采集频率稍候重试或更换买家账号重试",St.warning(T);break;case ba.notLogin:T=u(v);break;case ba.needVerify:if("pageUrl"in v)T="当前浏览器帐号，需要安全验证，请先验证",ht.confirm(T,"提示",{type:"warning"}).then(()=>{window.open(v.pageUrl,"_blank","noreferrer")});else if("reason"in v)T=v.reason,ht.confirm(v.reason,"提示",{type:"warning"});else{const{iframe:S,iframeWrap:w}=b(v.iframeSrc);await v.validatorVerify(S),w.remove();return}break;case ba.rowDataInvalid:T="当前商品采集失败 请到点击该产品到详情页面采集或者降低采集频率稍候重试 如果没有登录可以尝试登录后采集",St.warning(T);break;case ba.loginHtmlNotLogin:"loginPageUrl"in v&&v.loginPageUrl!==location.href?T=u(v):(T="账号未登录，请先登录",St.warning(T));break;case ba.noDesc:T="当前页面未加载描述内容，请重试",St.warning(T);break;case ba.getPostFeeNotSelectedAddress:T="当前没有收货地址，无法采集运费",St.warning(T);break;case ba.collectStockConfirm:if(y)return;T="因平台限制，部分产品将无法采集到库存，是否继续？";try{await c(T);return}catch{}break;case ba.collectPriceConfirm:if(y)return;T="当前页面价格显示异常 请点击刷新当前页面后在进行采集";try{return await p(T,v),Promise.reject()}catch{}break;case ba.collectStockAndPriceConfirm:if(y)return;T="因平台限制，部分产品将无法采集到库存与价格，是否继续？";try{await d(T);return}catch{}break}return await xt(),Promise.reject({...v,reason:T})}},onValidatorCollectList:async v=>{if(v&&v.antiCode){let y="";switch(v.antiCode){case ba.notLogin:y=u(v);break}return Promise.reject({...v,reason:y})}},onValidateAli1688MessageBox:o}};var ZG={name:"zh-cn",el:{breadcrumb:{label:"面包屑"},colorpicker:{confirm:"确定",clear:"清空",defaultLabel:"颜色选择器",description:"当前颜色 {color}，按 Enter 键选择新颜色",alphaLabel:"选择透明度的值"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",dateTablePrompt:"使用方向键与 Enter 键可选择日期",monthTablePrompt:"使用方向键与 Enter 键可选择月份",yearTablePrompt:"使用方向键与 Enter 键可选择年份",selectedDate:"已选日期",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},weeksFull:{sun:"星期日",mon:"星期一",tue:"星期二",wed:"星期三",thu:"星期四",fri:"星期五",sat:"星期六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},inputNumber:{decrease:"减少数值",increase:"增加数值"},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},dropdown:{toggleDropdown:"切换下拉选项"},mention:{loading:"加载中"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页",page:"页",prev:"上一页",next:"下一页",currentPage:"第 {pager} 页",prevPages:"向前 {pager} 页",nextPages:"向后 {pager} 页",deprecationWarning:"你使用了一些已被废弃的用法，请参考 el-pagination 的官方文档"},dialog:{close:"关闭此对话框"},drawer:{close:"关闭此对话框"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!",close:"关闭此对话框"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},slider:{defaultLabel:"滑块介于 {min} 至 {max}",defaultRangeStartLabel:"选择起始值",defaultRangeEndLabel:"选择结束值"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tour:{next:"下一步",previous:"上一步",finish:"结束导览"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"},carousel:{leftArrow:"上一张幻灯片",rightArrow:"下一张幻灯片",indicator:"幻灯片切换至索引 {index}"}}};const lP={namespace:"earth-wxt",zIndex:9999999999999,size:"small",locale:ZG},To=Te({__name:"ProConfigProvider",setup(e){return(t,r)=>{const n=jI;return G(),Le(n,rT(Kg(_(lP))),{default:ie(()=>[De(t.$slots,"default")]),_:3},16)}}}),eY={class:"earth-wxt-collect-panel-wrap"},tY={class:"earth-wxt-collect-panel-button-group"},rY={key:0,class:"earth-wxt-collect-tips"},uP=oa(Te({__name:"CollectPanel",props:{inactive:{type:Boolean},source:{}},setup(e){const t=e,{state:r}=Ys(JB,"bottom"),{state:n}=Ys(PC,!1),a=()=>{r.value=r.value==="bottom"?"sidebar":"bottom"},s=()=>{n.value=!n.value},o=Zr([]);Kt(()=>{rl().then(l=>{o.value=l.sourcePlatformConfigList})});const i=W(()=>{const l=o.value.find(u=>u.source===t.source&&u.disableSamePlatformSend);return l?`温馨提醒：接${l.name}官方通知，所有ERP软件禁止采集${l.name}发布${l.name}，否则将可能封店。建议搜1688同款，采集1688商品。`:""});return(l,u)=>{const c=yn;return G(),Le(To,null,{default:ie(()=>[De(l.$slots,"other",{},void 0,!0),K("div",{class:Q(["earth-wxt-collect-panel",[l.inactive?"inactive":_(r),{"is-disabled":_(n)}]])},[K("div",eY,[u[0]||(u[0]=K("div",{class:"earth-wxt-collect-panel-button-group"},[K("span",{class:"earth-wxt-collect-panel-title"}," 跨境ERP ")],-1)),_(n)?Oe("",!0):De(l.$slots,"default",{key:0},void 0,!0),K("div",tY,[ue(c,{type:"info",plain:"",onClick:s},{default:ie(()=>[ot(He(_(n)?"启用插件":"停用插件"),1)]),_:1}),!_(n)&&!l.inactive?(G(),Le(c,{key:0,type:"info",plain:"",onClick:a},{default:ie(()=>[ot(" 切换为"+He(_(r)==="bottom"?"侧边栏":"底栏")+"模式 ",1)]),_:1})):Oe("",!0)])]),_(i)?(G(),le("div",rY,He(_(i)),1)):Oe("",!0)],2)]),_:3})}}}),[["__scopeId","data-v-9c448875"]]),nY={class:"earth-wxt-collect-panel-button-group"},aY=Te({inheritAttrs:!1,__name:"CollectDetailUi",props:{source:{},validatorCollectDetail:{type:Function},validatorCollectList:{type:Function},getCollectDetailSourceInfo:{type:Function},getCollectDetailPageDataSourceInfo:{type:Function},getCollectDetailMainImage:{type:Function}},setup(e){const t=e,{collectPanelDisabled:r,onPushCollectBox:n,onValidatorCollectDetail:a,onValidateAli1688MessageBox:s}=j0(()=>t.source),o=async(d=!1,p=!1)=>{var y,T;So();const b=sa({text:"加载中"});try{await jt()}catch(S){console.error(S),b.close();return}try{const S=await((y=t.validatorCollectDetail)==null?void 0:y.call(t));S&&await a(S,p)}catch(S){return b.close(),Promise.reject(S)}const[m,h]=t.getCollectDetailPageDataSourceInfo?await to(t.getCollectDetailPageDataSourceInfo()):[];h&&console.error(h);let v=!1;if(m){const[S]=await to(rl());if(S){const w=(T=S.sourcePlatformConfigList)==null?void 0:T.find(C=>C.source===t.source);console.log(w),v=w==null?void 0:w.isPushToErp}}if(!v){const[S,w]=m?await to(OB(kN(m),!0)):[];if(w&&console.error(w),d)return b.close(),S||w||h}try{const S=await t.getCollectDetailSourceInfo(),{pageContent:w,...C}=v?m:{},k={...S,...C,itemHtml:w};return await n([k])}finally{b.close()}},i=async()=>{var h;const d=await bB();if(!d)return;const[p,b]=await to(o((h=d.extraData)==null?void 0:h.onlyPushPageData,!0)),[m]=await to(t.getCollectDetailSourceInfo());await wB({data:p,error:b,itemInfo:m})};Kt(()=>{r.value||i()});const l=ee(!1),u=ee(""),c=async()=>{So(),await jt(),await s(),u.value=await t.getCollectDetailMainImage(),l.value=!0};return(d,p)=>{const b=yn,m=lO;return G(),Le(uP,{source:d.source},{other:ie(()=>[t.getCollectDetailMainImage?(G(),Le(m,{key:0,modelValue:_(l),"onUpdate:modelValue":p[1]||(p[1]=h=>lr(l)?l.value=h:null),"source-image-url":_(u)},null,8,["modelValue","source-image-url"])):Oe("",!0)]),default:ie(()=>[K("div",nY,[ue(b,{type:"primary",onClick:p[0]||(p[0]=h=>o())},{default:ie(()=>[...p[2]||(p[2]=[ot(" 采集此商品 ",-1)])]),_:1}),t.getCollectDetailMainImage?(G(),Le(b,{key:0,type:"primary",onClick:c},{default:ie(()=>[...p[3]||(p[3]=[ot(" 搜1688同款 ",-1)])]),_:1})):Oe("",!0)])]),_:1},8,["source"])}}}),sY={key:0,class:"earth-wxt-collect-panel-button-group"},oY={key:1,class:"earth-wxt-collect-tips"},iY={key:2,class:"earth-wxt-collect-panel-button-group"},lY={key:3,class:"earth-wxt-collect-panel-button-group"},uY={class:"earth-wxt-collect-panel-progress"},cY=["data-uuid"],dY=["action"],fY=oa(Te({inheritAttrs:!1,__name:"CollectListUi",props:{useAutoCollect:{type:Boolean,default:!1},useBatchCollect:{type:Boolean,default:!0},getCollectProductList:{},getCollectListProductLinksByPage:{},getCollectListProductListByPage:{},source:{},validatorCollectDetail:{},validatorCollectList:{},getCollectDetailSourceInfo:{},getCollectDetailPageDataSourceInfo:{},getCollectDetailMainImage:{}},setup(e){const t=e,{collectPanelDisabled:r,onPushCollectBox:n,onValidatorCollectDetail:a,onValidatorCollectList:s}=j0(()=>t.source),o=new WeakMap,i=Zr(new Map),l=ee(new Map),u=Dd("earthWxtCollectBox"),c=ee({}),d=async(B,F)=>{try{const{sourceInfo:R}=B,H=await qB(R);l.value.set(F,H.hasFetch)}catch(R){console.error("检查商品采集状态失败:",R)}},p=D6(5),b=Jw((B,F)=>{B.querySelector(`[data-uuid="${F}"]`)||(c.value[F]=Date.now());const H=i.value.get(F);H&&!l.value.has(F)&&(l.value.set(F,0),p(()=>d(H,F)))},50,{leading:!1}),m=Jw(async()=>{const B=await t.getCollectProductList(),F=new Map;B.forEach(R=>{o.has(R.node)||o.set(R.node,P2());const H=o.get(R.node);R.node.classList.add("earth-wxt-collect-warp"),R.node.removeEventListener("mouseover",b.bind(null,R.node,H)),R.node.addEventListener("mouseover",b.bind(null,R.node,H)),F.set(H,R)}),i.value=F},200);t.getCollectProductList&&!r.value&&(m(),iP(document.body,m,{childList:!0,subtree:!0}));const{state:h}=Ys(YB,[]),v=Zr({currentIndex:0,total:0});let y=[];const T=vB(async B=>{const{currentIndex:F,result:R,total:H}=B.data,q=R[F],M=q.error;if(v.value={currentIndex:F,total:H},M)console.error(M),M.antiCode?a(M,!0):St.error(M.reason||M.message||M);else{const D=[q.itemInfo];try{if(await n(D),y!=null&&y[F]){const Y=y[F];l.value.set(Y,1)}}catch(Y){console.error(Y)}}}),S=async(B,F)=>{var q;So(),await jt();const R=await((q=t.validatorCollectList)==null?void 0:q.call(t));if(R&&await s(R),!B.length){St.error("没有需要采集的商品");return}if(t.useAutoCollect){const{autoCollectConfig:{fetchPageDataNeedSelectNewTabSources:M}}=await rl();y=F||[],v.value={currentIndex:-1,total:B.length},yB({itemList:B,extraData:{onlyPushPageData:!0},keepActiveTab:!M.includes(t.source)});return}const H=sa({text:"加载中"});try{await n(B),F&&F.forEach(M=>{l.value.set(M,1)})}finally{H.close()}},w=ee([]),C=(B=w.value)=>{const F=B.reduce((R,H)=>{const q=i.value.get(H);return q&&R.push(q.sourceInfo),R},[]);S(F,B)},k=B=>{w.value=B?Array.from(i.value.keys()):[]},f=async()=>{var M,D;So(),await jt();const B=await((M=t.validatorCollectList)==null?void 0:M.call(t));B&&await s(B);const F=sa({text:"加载中"});let R=[];try{R=await((D=t.getCollectListProductListByPage)==null?void 0:D.call(t))??Array.from(i.value.values())}finally{F.close()}const H=R.map(Y=>Y.sourceInfo),q=R.map(Y=>o.get(Y.node)).filter(Boolean);S(H,q)},O=async()=>{var F;So();const B=sa({text:"加载中"});try{await jt();const R=await((F=t.validatorCollectList)==null?void 0:F.call(t));R&&await s(R);const q=(await t.getCollectListProductLinksByPage()).reduce((D,Y)=>(D[Y]=1,D),{}),M=await RB({copyItemUrls:q});h.value=Xw([...h.value,...Object.keys(M.copyItemUrls)])}finally{B.close()}},E=Dd("downloadFormRef"),N=async()=>{const B=h.value.reduce((F,R)=>(F[R]=1,F),{});E.value.querySelector("input").value=JSON.stringify(B),E.value.submit()},$=async()=>{So(),await jt(),await ht.confirm("将清除商品链接数据缓存, 确定清除吗？","提示",{confirmButtonText:"确定",type:"warning"}),h.value=[]},L=async()=>{So(),await jt(),await navigator.clipboard.writeText(h.value.join(`
`)),St.success("复制成功")};return Ur(()=>{T()}),(B,F)=>{const R=fs,H=yn,q=nV;return G(),Le(uP,{source:B.source,inactive:!B.useBatchCollect},{other:ie(()=>[ue(q,{modelValue:_(w),"onUpdate:modelValue":F[2]||(F[2]=M=>lr(w)?w.value=M:null)},{default:ie(()=>[(G(!0),le(pt,null,$r(_(i),M=>(G(),Le(qT,{key:`${M[0]}_${_(c)[M[0]]}`,to:M[1].node},[K("div",{ref_for:!0,ref_key:"earthWxtCollectBox",ref:u,class:"earth-wxt-collect-box","data-uuid":M[0]},[K("div",{class:Q(["earth-wxt-collect-status",{"is-collected":_(l).get(M[0])}])},null,2),ue(H,{type:"primary",tag:"earth-wxt-button",class:"earth-wxt-collect-button",onClick:Pt(D=>C([M[0]]),["stop","prevent"])},null,8,["onClick"]),B.useBatchCollect?(G(),Le(R,{key:0,value:M[0],class:"earth-wxt-collect-checkbox",onClick:F[1]||(F[1]=Pt(()=>{},["stop"]))},null,8,["value"])):Oe("",!0)],8,cY)],8,["to"]))),128))]),_:1},8,["modelValue"]),qt(K("form",{ref_key:"downloadFormRef",ref:E,method:"post",action:_(HB)},[...F[9]||(F[9]=[K("input",{name:"copyItemUrls"},null,-1)])],8,dY),[[Sr,!1]])]),default:ie(()=>[B.useBatchCollect?(G(),le("div",sY,[_(i).size?(G(),le(pt,{key:0},[ue(R,{class:"earth-wxt-collect-select-all",onChange:k},{default:ie(()=>[...F[3]||(F[3]=[ot(" 全选 ",-1)])]),_:1}),ue(H,{type:"primary",onClick:F[0]||(F[0]=Pt(M=>C(),["stop","prevent"]))},{default:ie(()=>[...F[4]||(F[4]=[ot(" 采集选中 ",-1)])]),_:1})],64)):Oe("",!0),ue(H,{type:"primary",onClick:Pt(f,["stop","prevent"])},{default:ie(()=>[...F[5]||(F[5]=[ot(" 采集本页 ",-1)])]),_:1})])):(G(),le("div",oY," 此平台不支持使用插件批量采集，请到产品详情页采集 ")),t.getCollectListProductLinksByPage?(G(),le("div",iY,[ue(H,{type:"primary",onClick:Pt(O,["stop","prevent"])},{default:ie(()=>[...F[6]||(F[6]=[ot(" 获取本页链接 ",-1)])]),_:1}),ue(H,{type:"primary",disabled:!_(h).length,onClick:Pt(L,["stop","prevent"])},{default:ie(()=>[ot(" 复制链接"+He(_(h).length),1)]),_:1},8,["disabled"]),ue(H,{type:"primary",disabled:!_(h).length,onClick:Pt(N,["stop","prevent"])},{default:ie(()=>[...F[7]||(F[7]=[ot(" 下载 ",-1)])]),_:1},8,["disabled"]),ue(H,{type:"primary",disabled:!_(h).length,onClick:Pt($,["stop","prevent"])},{default:ie(()=>[...F[8]||(F[8]=[ot(" 清除 ",-1)])]),_:1},8,["disabled"])])):Oe("",!0),B.useBatchCollect&&_(v).total?(G(),le("div",lY,[K("span",uY," 采集进度: "+He(_(v).currentIndex+1)+"/ "+He(_(v).total),1)])):Oe("",!0)]),_:1},8,["source","inactive"])}}}),[["__scopeId","data-v-dc903cc6"]]);function pY(e){const r=["cf.shopee."].some(a=>e.includes(a)),n=new URL(zB);return r&&(e=`${window.location.protocol}//${n.host}${n.pathname}?url=${e}`),e}function Js(e,t=2){const n=(Number(e)||0).toFixed(t);return Number(n)}function hY(e,t){const r=e.clientX,n=e.clientY,a=document.getElementById(t),s=a.getBoundingClientRect().left||0,o=a.getBoundingClientRect().top||0;document.addEventListener("mousemove",i),document.addEventListener("mouseup",l);function i(u){let c=u.clientX-r+s,d=u.clientY-n+o;c=c<0?0:c,d=d<0?0:d,a.computedStyleMap().get("width");const p=a.offsetWidth,b=a.offsetHeight,m=document.documentElement.clientWidth,h=document.documentElement.clientHeight;c+p>m&&(c=m-p),d+b>h&&(d=h-b),a.style.top=`${d}px`,a.style.left=`${c}px`,u.preventDefault()}function l(){document.removeEventListener("mouseup",l),document.removeEventListener("mousemove",i)}}const mY=["yangkeduo","taobao","tmall","1688"],cP=[{platform:"taobao",name:"淘宝",logo:"http://pub.chengji-inc.com/static_common/image/shop/taobao.png",sameItemUrl:"https://s.taobao.com/search?q=",searchTypes:["searchByTitle","searchByImage"]},{platform:"tmall",name:"天猫",logo:"http://pub.chengji-inc.com/static_common/image/shop/tmall.png",sameItemUrl:"https://list.tmall.com/search_product.htm?q=",searchTypes:["searchByTitle"]},{platform:"1688",name:"1688",logo:"http://pub.chengji-inc.com/static_common/image/shop/1688.png",sameItemUrl:"https://s.1688.com/selloffer/offer_search.htm?charset=utf8&keywords=",searchTypes:["searchByTitle","searchByImage"]},{platform:"yangkeduo",name:"拼多多",logo:"http://pub.chengji-inc.com/static_common/image/shop/yangkeduo.png",sameItemUrl:"https://mobile.yangkeduo.com/search_result.html?search_key=",searchTypes:["searchByTitle"]}],gY={taobao:"淘宝",tmall:"天猫",yangkeduo:"拼多多",1688:"1688"},mi={matchSkuConfirm:"match_sku_confirm",matchAddress:"match_address",compareProfit:"compare_profit",autoTriggerSubmitOrder:"auto_trigger_submit_order",manualChangeAddress:"manual_change_address",supportOrderingInLossProfit:"support_ordering_in_loss_profit"};for(var gi=256,dP=[],fP=256,_p;gi--;)dP[gi]=(gi+256).toString(16).substring(1);function vY(e){var t=0,r=11;if(!_p||gi+r>fP*2)for(_p="",gi=0;t<fP;t++)_p+=dP[Math.random()*256|0];return _p.substring(gi,gi+++r)}var pP="@webext-core/messaging/window",hP="@webext-core/messaging/window/response";function Vr(e){const t=e.namespace,r=vY();let n=[];const a=(o,i)=>new Promise(l=>{const u=d=>{d.data.type===hP&&d.data.namespace===t&&d.data.instanceId!==r&&d.data.message.type===o.type&&(l(d.data.response),c())},c=()=>window.removeEventListener("message",u);n.push(c),window.addEventListener("message",u),window.postMessage({type:pP,message:o,senderOrigin:location.origin,namespace:t,instanceId:r},i??"*")}),s=bb(_c(wc({},e),{sendMessage(o,i){return a(o,i)},addRootListener(o){const i=l=>yb(this,null,function*(){if(l.data.type!==pP||l.data.namespace!==t||l.data.instanceId===r)return;const u=yield o(l.data.message);window.postMessage({type:hP,response:u,instanceId:r,message:l.data.message,namespace:t},l.data.senderOrigin)});return window.addEventListener("message",i),()=>window.removeEventListener("message",i)},verifyMessageData(o){return structuredClone(o)}}));return _c(wc({},s),{removeAllListeners(){s.removeAllListeners(),n.forEach(o=>o()),n=[]}})}Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),Vr({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"});function mP(e){const t=e.purchaseItem,r=t.skuId,n=e.skuIdAndManualSelectedSkuSubNameMap||!1,a=t.platformSkuId;let s=t.skuSubName||"";if(n&&(n[r]||n[a])&&(s=(n[r]||n[a]).manualSelectedSkuSubName),Ut(t.skuMap))return s;const o=[],i=gP(t);return Ut(i)?"":(i.sourceColorName&&o.push(i.sourceColorName),i.sourceSizeName&&o.push(i.sourceSizeName),o.length>0&&(s=o.join(" ")),I.trim(s))}function gP(e){let t={};if(Ut(e.skuMap))return t;for(const r in e.skuMap)if(r.toString().length>0&&r===e.skuSubName){t=e.skuMap[r];break}if(!t||Ut(t)){let r=function(l){I.each(u(l,0,[]),(c,d)=>{i.push(d)});function u(c,d=0,p=[]){const b=[];b.push(c[d]);for(let h=0;h<p.length;h++)b.push(p[h]+c[d]);const m=[...p,...b];return d+1>=c.length?m:u(c,d+1,m)}},n=function(l,u){const c=l.specList;if(!c)return!0;const d=a(c.join("")),p=a(c.reverse().join(""));return u=a(u),d===u||p===u},a=function(l){return l.replace(/\s+/g,"")};const s=e.skuSubName?e.skuSubName.split("，"):["默认SKU"],o=e.skuSubOriginalName?e.skuSubOriginalName.split(","):["defaultSku"];let i=[];i.push(s.join("")),i.push(o.join("")),e.skuSubName&&i.push(e.skuSubName),e.skuSubOriginalName&&i.push(e.skuSubOriginalName),s.length>1&&r(s),o.length>1&&r(o),i=I.unique(i.sort()),window.console.log("matchSkuNames:",i);for(const l of i){const u=Object.values(e.skuMap).find(c=>n(c,l));if(u){t=u;break}}}return t}function Sp(e,t){e=e||"",t=t||"",e=e.replace(/（/g,"("),e=e.replace(/）/g,")"),e=e.replace(/：/g,":"),e=e.replace(/【/g,"["),e=e.replace(/】/g,"]"),e=e.replace(/，/g,","),e=e.replace(/；/g,";"),e=e.replace(/\|/g," "),e=e.replace(/\[/g," "),e=e.replace(/\]/g," "),t=t.replace(/（/g,"("),t=t.replace(/）/g,")"),t=t.replace(/：/g,":"),t=t.replace(/【/g,"["),t=t.replace(/】/g,"]"),t=t.replace(/，/g,","),t=t.replace(/；/g,";"),t=t.replace(/\|/g," "),t=t.replace(/\[/g," "),t=t.replace(/\]/g," ");const r=e.split(" "),n=t.split(" ");let a=0,s=0,o=0;for(const i in r){const l=r[i];l&&(a++,n.includes(l)&&o++)}I.unique(n);for(const i in n)n[i]&&s++;return s===a&&a===o}function U0(){return location.hostname.includes(".m.taobao.com")}function q0(){return location.hostname.includes(".m.tmall.com")}function xl(){return U0()||q0()}function vP(e){return e=e||"",e=e.replace(/\s/g,""),e=e.replace(/（/g,"("),e=e.replace(/）/g,")"),e=e.replace(/：/g,":"),e=e.replace(/【/g,"["),e=e.replace(/】/g,"]"),e=e.replace(/，/g,","),e=e.replace(/；/g,";"),e}function yP(e,t){return e=vP(e),t=vP(t),e===t}function bP(e,t=!1){const r=mP(e),n=SP(r),a=wP(e);let s=!1;const o=wY(e);if(window.console.log("selectedSkuSubName",a),window.console.log("purchaseSkuSubName",r),window.console.log("similarPurchaseSkuSubName",n),window.console.log("isSkuIdSame",o),!Sp(r,a)&&!Sp(n,a)&&!o)t&&(St.error({message:"SKU自动匹配不成功，请手动选择",duration:0,showClose:!0}),vi(e,{action:mi.matchSkuConfirm,actionDesc:`SKU自动匹配不成功 selectedSku：${a} purchaseSku：${r}`}));else if(s=!0,t){St.success({message:"SKU自动匹配成功",duration:0,showClose:!0});let i="";r===a?i=`SKU自动匹配成功 selectedSku：${a} purchaseSku：${r}`:i=`SKU自动匹配成功 selectedSku：${a} similarPurchaseSkuSubName：${n}`,vi(e,{action:mi.matchSkuConfirm,actionDesc:i})}return s}function wP(e){const t=e.purchasePlatform;let r=[];switch(window.console.log("purchasePlatform",t),t){case sf:r=bY(e);break;case Qa:case ho:r=sB();break;case Ho:r=yY(e);break}let n=r.length>0?r.join(" "):"";return n&&(n=n.replace(/（/g,"("),n=n.replace(/）/g,")"),n=n.replace(/：/g,":"),n=n.replace(/【/g,"["),n=n.replace(/】/g,"]"),n=n.replace(/，/g,","),n=n.replace(/；/g,";")),n}function yY(e){const t=[];return I(".sku-item,.spec-item ").each((r,n)=>{let a=I.trim(I(n).text()),s=a.indexOf("：");s>-1&&(a=a.substr(s+1)),s=a.indexOf(":"),s>-1&&(a=a.substr(s+1)),a=a.replaceAll(";",""),!e.hasSpecialCharW&&a.lastIndexOf("W")===a.length-1&&(a=a.substring(0,a.length-1)),t.push(a)}),window.console.log("get1688SkuSubName",t),t}function bY(e){const t=[],r=e.purchaseItem,a=I(".oc-address").next().find("span").filter((s,o)=>{const i=I(o).text().trim();return I(o).children().length===0&&(r.title.includes(i)||i.includes(r.title))});return a[0]&&I(a[0]).parent().next().children().each((o,i)=>{const u=I(i).text().split(":"),c=u[1]?I.trim(u[1]):"";c&&t.push(c)}),t}function wY(e){if(!e.itemSelectedSkuInfo||!e.confirmSelectedSkuInfo||e.itemSelectedSkuInfo.length<1||e.confirmSelectedSkuInfo.length<1)return!1;window.console.log("itemSelectedSkuInfo",e.itemSelectedSkuInfo),window.console.log("confirmSelectedSkuInfo",e.confirmSelectedSkuInfo);const t=[];for(const r of e.confirmSelectedSkuInfo)t.push(r.specId);for(const r of e.itemSelectedSkuInfo)if(window.console.log("skuInfo",r),r){if(!t.includes(r.specId))return!1}else return!1;return!0}const _Y=(()=>{let e=!1;return(t,r,n=!1)=>{let a=!1;if(e)return window.console.log("already execute autoTriggerSubmitOrder"),a;if(e=!0,!t||Ut(t)||!dc(t))return a;const s=t.purchaseSetting||!1,o=Number(s.isAutoTriggerSubmitOrder)===1;if(!s||!o||(SY(t),TY(t,r),!r))return a;const i=xY(t);if(!i)return a;const l=bP(t,!0);return!l||n&&kY(t)||r&&i&&l&&(a=!0),a}})();async function V0(e,t,r=!1){if(_Y(e,t,r)){vi(e,{action:mi.autoTriggerSubmitOrder});const a=e.purchaseSetting.autoTriggerSubmitOrderWaitSeconds*1e3||3e3;if(await Je(a),!await cc(e,"confirm_page"))return!1;e.isClickAutoCommitOrder=!0,await CP(e),AY(e)}}async function SY(e){const t=e.autoOrderingInfo||{};t.selectedSkuSubName=wP(e),t.fullAddress=H0(e),e.autoOrderingInfo=t,await CP(e)}function H0(e){const t=e.purchasePlatform;let r="";switch(t){case Qa:case ho:r=tB();break;case"1688":r=WS();break}return window.console.log("fullAddress",r),r}function TY(e,t){const r=H0(e);let n="";return t?(n=`地址匹配：【${r}】 `,St.success({message:"地址自动匹配成功",duration:0,showClose:!0})):(n=`地址不匹配：【${r}】 `,St.error({message:"地址自动匹配不成功，请手动选择",duration:0,showClose:!0})),vi(e,{action:mi.matchAddress,actionDesc:n}),t}function xY(e){const t=Number(CY(e))||0,r=Number(e.orderPayment),n=Js(r-t),a=Js(n/r*100);let s="";const o=e.purchaseSetting||!1,i=e.autoPurchaseSetting||!1,l=Js(o.autoOrderingMinProfitRate,0),u=Js(i.skipPurchaseMinProfitNumber,0);let c=!1,d=!1;return window.console.log("profit",n),Number(o.isAutoOrderingInLossProfit)!==1&&(d=!0),d?(c=!0,vi(e,{action:mi.supportOrderingInLossProfit,actionDesc:`profit: ${n} profitRate: ${a} 支持亏损下单 purchaseSetting: ${JSON.stringify(o)}`}),c):(t?!l&&(n<0||Number.isNaN(n))?(s=`此单亏损! 亏损：【${n}】`,St.error({message:`此单亏损! 亏损金额：${n}`,duration:0,showClose:!0})):l&&(Number.isNaN(n)||a&&a<l)?(s=`此单亏损! 亏损：【利润率低于${l}%】 purchaseProfitRate: ${a} 利润: ${n}`,St.error({message:`此单亏损! 利润率低于：${l}%，当前利润率：${a}%`,duration:0,showClose:!0})):u&&(n<u||Number.isNaN(n))?(s=`此单亏损! 亏损：【利润低于${u}】 利润: ${n}`,St.error({message:`此单亏损! 利润低于${u}，当前利润：${n}`,duration:0,showClose:!0})):(c=!0,s=l?`利润率高于：【${l}%】 purchaseProfitRate: ${a}`:`利润：【${n}】`):(s=`获取平台应付总额异常! 应付总额：${t}`,St.error({message:`获取平台应付总额异常! 应付总额：${t}`,duration:0,showClose:!0})),vi(e,{action:mi.compareProfit,actionDesc:s}),c)}function CY(e){const t=e.purchasePlatform;let r="0";switch(t){case"yangkeduo":r=hB();break;case Qa:case ho:r=nB();break;case"1688":r=KS();break}return window.console.log("totalPrice",r),r}function kY(e){const t=IY(e);let r=!1;return t&&(St.error({message:t,duration:0,showClose:!0}),r=!0),r}function IY(e){const t=e.purchasePlatform;let r="";switch(t){case"1688":r=GS();break}return window.console.log("validErrorMsg",r),r}function AY(e){const t=e.purchaseSetting||{},r=e.purchasePlatform;if(Number(t.isAutoTriggerSubmitOrder)===1)switch(r){case"yangkeduo":pB();break;case Qa:case ho:rB();break;case"1688":YS();break}}function OY(e){if(Ut(e))return;if(!dc(e))return null;const t=e.purchaseSetting||!1,r=I8(t.isAutoTriggerSubmitOrder)?t.isAutoTriggerSubmitOrder:Number.parseInt(t.isAutoTriggerSubmitOrder);if(!t||!r)return null;const n=H0(e);vi(e,{action:mi.manualChangeAddress,actionDesc:`手动修改地址：【${n}】 `})}async function cc(e,t,r={}){if(!e)return!1;if(t==="confirm_page"){delete e.isSkuMatch;const o=bP(e);e.isSkuMatch=o?1:0}await PY(e,r);const n=await Tp(e,t),a=n.result||"",s=n.reason||"";return a==="fail"?(ht.alert(s).then(()=>{Tp(e,"user_confirm_tip",s)}),!1):!0}async function PY(e,t){if(!t.checkAddressCallback||!kc(t.checkAddressCallback))return null;const r=await t.checkAddressCallback();e.isMatchAddress=r,delete e.isConfirmNotMatchAddress;let n=null;return r||(n=window.confirm(`当前地址与${e.appInfo.platformChineseName}买家地址不一致，确定要提交订单吗？`),e.isConfirmNotMatchAddress=n?1:0),!r&&n!==null&&!n?!1:r}function Tp(e,t,r=null){const n={source:t||"",purchaseSetting:e.purchaseSetting||"",relatedItemSkuIds:e.relatedItemSkuIds||"",appInfo:e.appInfo,operateInfo:e.operateInfo||"",orderId:e.orderId,orderSn:e.orderSn||"",orderCode:e.orderCode||"",purchaseItem:e.purchaseItem,purchaseOrderSn:e.purchaseOrderSn||"",purchasePlatform:e.purchasePlatform||"",hasPurchaseSkuIds:e.hasPurchaseSkuIds||"",skuIdAndPurchaseOrderIdMap:e.skuIdAndPurchaseOrderIdMap||"",purchaseOrders:e.purchaseOrders||"",reason:r||"",isSupplementOrder:e.isSupplementOrder||"",supplementSkuIdAndPurchaseOrderIdMap:e.supplementSkuIdAndPurchaseOrderIdMap||"",supplementPurchaseOrders:e.supplementPurchaseOrders||"",supplementHasPurchaseSkuIds:e.supplementHasPurchaseSkuIds||""};return typeof e.isMatchAddress<"u"&&(n.isMatchAddress=e.isMatchAddress?1:0),typeof e.isSkuMatch<"u"&&(n.isSkuMatch=e.isSkuMatch?1:0),typeof e.isConfirmNotMatchAddress<"u"&&(n.isConfirmNotMatchAddress=e.isConfirmNotMatchAddress),e.venderId&&(n.venderId=e.venderId),e.mallId&&(n.mallId=e.mallId),e.shopId&&(n.shopId=e.shopId),e.sellerId&&(n.sellerId=e.sellerId),e.memberId&&(n.memberId=e.memberId),e.userId&&(n.userId=e.userId),new Promise(a=>{Jt({url:"http://plw.ry-inc.com/open/purchase/checkRelatePurchaseOrder",method:"POST",data:n}).then(s=>a(s)).catch(s=>a(s))})}const{sendMessage:EY,onMessage:Mte}=Ts(),z0=e=>(...t)=>EY(e,...t),_P=z0("getUrlRequestHistory");function At(e){return`local:purchaseOrderInfo-${e}`}const $Y=z0("execute1688SearchSamePutImageScript"),RY=z0("execute1688GetWindowContextScript");function W0(e){const t=/(\w[\w-]*)\.(?:com\.cn|com|cn|co|net|org|gov|cc|biz|info|sg|vn|ph|global)(\.([a-z]+))?(\/|$)/.exec(e);if(!t)return"";let r=t[1]||"";if((r==="pinduoduo"||r==="toutiaonanren")&&(r="yangkeduo"),(r==="liangxinyao"||r==="95095")&&(r="tmall"),r==="lazada"||r==="shopee"){const n=/(\w[\w-]*)\.(com|cn|com|cn|co|net|org|gov|cc|biz|info|sg|vn|ph|global)(\.([a-z]+))?(\/|$)/.exec(e);r+=`_${n[4]?n[4]:n[2]}`}return r==="taobao"&&t[2]==="global"&&(r="tbglobal"),r==="3e3e"&&(r="3e"),e.includes("market.m.taobao.com/app/ltao-fe/ltao-lite")&&(r="taote"),r}function wa(e,t){const r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}function dc(e){return e.erpPurchaseType==="cart"?!1:mY.includes(e.purchasePlatform)}function LY(e,t){if(!e||!e.appInfo||!e.appInfo.host)return window.console.log("参数错误，保存失败"),!1;const r=e,n=r.purchaseItem,a=r.appInfo,s={venderId:r.venderId||0,skuId:n.skuId||"",manualSelectedSkuSubName:t||"",purchaseWareUrlId:r.purchaseWareUrlId||0,opOrderId:r.opOrderId||0,platformItemId:n.platformItemId||"",platformSkuId:n.platformSkuId||"",purchaseItemSourceInfoId:r.purchaseItemSourceInfoId||0};return Jt({url:`${a.host}order/purchase_order/saveManualSelectedSkuSubName`,method:"POST",data:s})}function MY(e){const t=[],r=e.length;for(let n=0;n<r;n++){const a=e[n];a==="XXL"?t.push("2XL"):a==="2XL"?t.push("XXL"):a==="XXXL"?t.push("3XL"):a==="3XL"?t.push("XXXL"):t.push(a)}return t}function SP(e){const t=Zs(e)?e.split(" "):[];return MY(t).join(" ")}function xp(e,t){const r=[];let n=e.length;for(let a=1;a<n;a++){const s=[];s.unshift(e[a]);for(let o=a-1;o>=0;o--)s.unshift(e[o]),e.push(s.join(" "))}n=e.length;for(let a=0;a<n;a++){let s=e[a];t&&(s=t(s)),r.push(s),s==="XXL"?r.push("2XL"):s==="2XL"?r.push("XXL"):s==="XXXL"?r.push("3XL"):s==="3XL"&&r.push("XXXL")}return r}function fc(e,t){const r=[];if(typeof e.autoFillRemarkTypes<"u"){const n=e.autoFillRemarkTypes||[];for(const a in n)switch(n[a]){case"5":e.consignee&&e.consignee.fullAddress&&r.push(e.consignee.fullAddress);break;case"4":e.purchaseItem&&e.purchaseItem.skuSubName&&r.push(e.purchaseItem.skuSubName);break;case"6":e.venderRemark&&r.push(e.venderRemark);break;case"3":e.customRemark&&r.push(e.customRemark);break;case"2":e.orderRemark&&r.push(e.orderRemark),e.venderRemark&&r.push(e.venderRemark);break;case"1":e.orderRemark&&r.push(e.orderRemark);break}}else e.orderRemark&&r.push(e.orderRemark);return r.join(t||"，")}function TP(e){let t=0;e.purchaseItem&&e.purchaseItem.estimatedCommission&&(t=Js(e.purchaseItem.estimatedCommission));const[r,n]=xP(e);let a="";return e.purchaseItem&&"cBiz"in e.purchaseItem&&(e.purchaseItem.cBiz===2?a=`精选联盟达人佣金：￥${t}`:a="小店自卖"),a=`${a}  利润：￥${r}  利润率：${n}%`,[r,a]}function xP(e,t){let r=0,n=0,a=0,s="";if(e.purchaseItem&&e.purchaseItem.estimatedCommission&&(n=Js(e.purchaseItem.estimatedCommission)),t||(t=e.purchaseOrderPayment),!t&&![0,"0"].includes(t))return[0,0];e.orderCustomCost&&(r=Js(e.orderCustomCost));const o=Number(e.orderPayment);return a=Js(o-t-n-r),o?s=(a/o*100).toFixed(2):s="-100",[a,s]}function Cp(e={}){const{platformChineseName:t=""}=e;return`当前地址与${t}买家地址不一致，请核对。`}function xo(e,t={}){if(Ut(t)||!t.appInfo||!t.appInfo.host)return window.console.log("参数错误，保存失败"),!1;const r=e||{},n=t.purchaseItem,a=t.appInfo,s=t.purchaseSetting||!1;if(!s||!s.isAutoTriggerSubmitOrder||!s.isAutoTriggerBuyBtn)return!1;if(!dc(t)||!s||!s.isAutoTriggerBuyBtn&&!s.isAutoTriggerSubmitOrder)return window.console.log("暂不支持auto ordering"),null;if(r.venderId=t.venderId,r.shopId=t.shopId,r.orderId=t.orderId,t.autoOrderingInfo){const o=t.autoOrderingInfo;r.fullAddress=o.fullAddress?o.fullAddress:"",r.autoSelectedSku=o.selectedSkuSubName?o.selectedSkuSubName:""}return r.purchaseOrderSn=t.purchaseOrderSn?t.purchaseOrderSn:"",r.skuId=(n==null?void 0:n.skuId)||"",r.purchaseUUId=t.purchaseUUId?t.purchaseUUId:"",r.isAutoTriggerBuyBtn=s.isAutoTriggerBuyBtn?1:0,r.isAutoTriggerSubmitOrder=s.isAutoTriggerSubmitOrder?1:0,r.purchasePlatform=t.purchasePlatform?t.purchasePlatform:"",r.purchaseUrl=t.purchaseItem&&t.purchaseItem.purchaseUrl?t.purchaseItem.purchaseUrl:"",r.purchaseType=t.purchaseType?t.purchaseType:"",Jt({url:`${a.host}order/purchase_order/savePurchaseAutoOrderingLog`,method:"POST",data:r})}async function _a({purchaseOrderInfo:e,isPurchaseOrderPaid:t=!1}){if(!e)return window.console.log("purchaseOrderInfo is null"),!1;const r=e.purchasePlatform||"",n=e.purchaseSetting||{},a=typeof n.isAutoRelateWaitPay>"u"?void 0:n.isAutoRelateWaitPay;if(window.console.log("isSupportWaitPayPurchasePlatform",r,a,t),typeof a<"u"&&a&&!t&&(e.purchaseOrderStatus="wait_pay"),t&&e.purchaseOrderStatus&&e.purchaseOrderStatus==="wait_pay"&&(e.purchaseOrderStatus="wait_send"),typeof a>"u"&&!t&&(e.purchaseOrderStatus="wait_pay"),typeof a<"u"&&!a&&!t)return window.console.log("purchase order no pay"),null;if(!e.purchaseOrderSn||Ut(e.purchaseOrderSn))return ht.alert(`获取${gY[e.purchasePlatform]||""}订单号失败，请手动关联订单`);window.console.log("isRelatePurchaseOrderSuccess",e.isRelatePurchaseOrderSuccess),window.console.log("purchaseStartTabId",e.purchaseStartTabId),kB(e).then(s=>{window.console.log("purchaseSuccess res:",s),window.console.log("purchaseSuccess purchaseOrderInfo:",e),window.console.log("purchaseSuccess purchasePlatform:",r);const o=sa({text:"正在关联采购单，请等候！！！"});DY(s).finally(()=>{o.close()})})}async function DY(e){var i;const{purchaseOrderInfo:t,erpPurchaseSuccessRes:r}=e;window.console.log("CommonTool._relatePurchaseSuccessCallback"),r&&Tp(t,"relate_result",r.reason);const n=await nr(),a=n==null?void 0:n.id;function s(l){St.success({message:`关联${l.appInfo.platformChineseName}订单成功`,onClose:()=>{const u=l.purchaseSetting||{};a&&Number(u.isAutoClosePurchasePage)===1&&AB(a)}})}const o=await Ze.getItem(At(a))||{};if(r.result==="success"||r.result==="timeout"){if(!o){s(t);return}return r.result==="timeout"&&o.relatePurchaseOrderResultHasShown?void 0:(o.isRelatePurchaseOrderSuccess=!0,o.relatePurchaseOrderResultHasShown=!0,Ze.setItem(At(a),o),s(t),!0)}o.relatePurchaseOrderResultHasShown=!0,Ze.setItem(At(a),o),(i=r==null?void 0:r.reason)!=null&&i.includes("重复")?ht.alert(r.reason,{title:"提示",dangerouslyUseHTMLString:!0}).then(()=>{Tp(t,"user_confirm_tip",r.reason)}):ht.alert(`关联失败原因：${r.reason}`,{type:"error"})}function K0(e){const t=new RegExp(`(^|&)${e}=([^&]*)`,"i"),r=window.location.search.substr(1).match(t);return r?decodeURIComponent(r[2]):null}function kp(e,t=""){if(!e)return{};const r=new URL(e),{searchParams:n}=r;if(t)return n.get(t);const a={};return n.forEach((s,o)=>{a[o]=s}),a}function G0(e){return NY(W0(e))}function NY(e){let t="";switch(e){case"taobao":t=I("#J_ShopInfo .tb-shop-name a").attr("title");break;case"tmall":t=I("div[class^=ShopHeader--title]").attr("title");break;case"1688":t=I("div[id=hd_0_container_0] span").eq(0).text(),t&&(t=I("a.shop-company-name").find("h1").attr("title"));break;case"yangkeduo":t=I("div[style='margin-bottom:.02rem']").eq(0).text();break}return t||""}function FY(e,t){if(!e||typeof e!="string"||!e.length)return e;t==="mobile"&&!/^[0-9-\s]{6,}$/.test(e)&&(t="");let r="",n=0;switch(t){case"mobile":r=`${e.substring(0,3)}****${e.substring(7)}`;break;case"pddMobile":r=`${e.substring(0,2)}*******${e.substring(9)}`;break;case"pddWebViewName":n=e.length,n<=2?r=`${e.substring(0,1)}*`:r=`${e.substring(0,1)}*${e.slice(-1)}`;break;case"pddWebViewAddress":r=e.replace(/(\d)+/g,"*");break;default:if(n=e.length,n>=6){const a=e.substring(0,2),s=e.slice(-2);r=`${a}**${s}`}else if(n<=2)r=`${e.substring(0,1)}*`;else{const a=e.substring(0,1),s=e.slice(-1);r=`${a}*${s}`}break}return r}async function CP(e){const t=await nr(),r=t==null?void 0:t.id;Ze.setItem(At(r),e)}function vi(e,t){if(!e||!e.appInfo||!e.appInfo.host)return window.console.log("参数错误，保存失败"),!1;const r=Object.assign({},t||{}),n=e.purchaseItem,a=e.appInfo||{};return dc(e)?(r.purchaseUUId=e.purchaseUUId?e.purchaseUUId:"",r.venderId=e.venderId,r.shopId=e.shopId,r.orderId=e.orderId,r.skuId=n!=null&&n.skuId?n.skuId:"",r.purchasePlatform=e.purchasePlatform?e.purchasePlatform:"",r.purchaseUrl=e.purchaseItem&&e.purchaseItem.purchaseUrl?e.purchaseItem.purchaseUrl:"",Jt({url:`${a.host}order/purchase_order/savePurchaseActionLog`,method:"POST",dataType:"text",data:r})):(window.console.log("暂不支持"),null)}function BY(){return{name:"",address:""}}function Ip(e,t,r=""){return t&&(e=JSON.parse(JSON.stringify(e)),r==="jingxi"&&!/^[\u4E00-\u9FA5a-z]+$/i.test(t.name)&&(t.name=t.name.replace(/[^\u4E00-\u9FA5a-z]+/i,"")),t.name&&(e.fullname+=t.name),t.address&&(e.fullAddress+=t.address,e.address+=t.address)),e}function jY(e){return/^1\d{10}$/.test(e)}function UY(){return window.top!==window.self?(window.console.log(`iframe url:${window.location.href}`),!0):!1}function qY(e){if(!e)return null;let t="";return e.venderId?t=e.venderId:e.userId?t=e.userId:e.sellerId?t=e.sellerId:e.shopId?t=e.shopId:e.mallId&&(t=e.mallId),t}async function kP(e){return await FB({stringList:e},{dataType:"json"})}function Ap(e){return e.replace(/&#39;|'/g,"").replace(/#/g,"号").replace(/\./g,"·").replace(/—|&mdash;/g,"-")}function IP(e,t){const r=document.createElement("div");r.className=t,e.parentNode.appendChild(r),r.style.position="absolute",r.style.top=`${e.offsetTop}px`,r.style.left=`${e.offsetLeft}px`,r.style.width=`${e.offsetWidth}px`,r.style.height=`${e.offsetHeight}px`}function VY(e,t){let r=[];["taobao","tmall"].includes(t)&&(r=["亲，小二正忙，滑动一下马上回来","霸下通用 web 页面-验证码","被挤爆啦,请稍后重试"]);for(const n of r)if(e.includes(n))return!0;return!1}function AP(e){return e?(e.replace(/[<>& "]/g,t=>{switch(t){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;";case'"':return"&quot;"}}),window.btoa(window.encodeURIComponent(e))):""}function HY(){try{const e=navigator.userAgent.toLowerCase(),t=/chrom(e|ium)\/(\d+)/.exec(e);return t?Number.parseInt(t[2],10):0}catch(e){return window.console.log("getChromeVer error",e),0}}function zY(){try{return navigator.userAgent}catch(e){return window.console.log("getUserAgent error",e),""}}/*! Element Plus Icons Vue v2.3.1 */var WY=Te({name:"Search",__name:"search",setup(e){return(t,r)=>(G(),le("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},[K("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"})]))}}),KY=WY;const GY=Te({inheritAttrs:!1,__name:"SearchSameUi",props:{skipValidateImage:{type:Function,default:()=>!1},source:{}},setup(e){const t=e,r=Dd("searchSameButtonRef"),n=Zr(),a=ee(!1),s=ee(!1),{onValidateAli1688MessageBox:o}=j0(()=>"1688"),i=S=>{const w=window.getComputedStyle(S);return w.display!=="none"&&!/collapse|hidden/.test(w.visibility)&&w.opacity!=="0"&&S.clientHeight>100&&S.clientWidth>100},l=["img","picture","video[poster]",'[style*="background"]'].join(","),u=["data-img-src","data-src","currentSrc","src"],c=S=>{var C,k;if(!S)return"";let w="";switch(S.tagName.toUpperCase()){case"IMG":w=S.src;break;case"PICTURE":w=(C=S.querySelector("img"))==null?void 0:C.src;break;case"VIDEO":w=S.poster;break;default:for(const f of u)if(w=(k=S[f]||S.getAttribute(f))==null?void 0:k.trim(),w)break;w||(w=window.getComputedStyle(S).backgroundImage.replace(/url\((['"]?)(.*?)\1\)/gi,"$2"))}return w=(w==null?void 0:w.trim())||"",/^https?:\/\//i.test(w)?w:""},d=(S,w)=>{const{pageX:C,pageY:k}=S;return w.left<=C&&w.right>=C&&w.top<=k&&w.bottom>=k},p=(S,w)=>{const{scrollX:C,scrollY:k}=window;for(const f of w){if(!i(f))continue;const O=c(f);if(!O)continue;const E=f.getBoundingClientRect(),N=E.top+k,$=E.left+C,L=$+E.width,B=N+E.height;if(d(S,{top:N,left:$,bottom:B,right:L}))return{node:f,rect:E,top:N,left:$,bottom:B,right:L,src:O}}},b=S=>{var k;let w=S.target;if(w&&w.shadowRoot){const O=(S.composedPath()||[])[0];O&&(w=O)}const C=new Set;if(w.tagName==="IMG"&&!((k=t.skipValidateImage)!=null&&k.call(t,w)))C.add(w);else for(let f=0;f<3;f++)w=w==null?void 0:w.parentElement,w&&i(w)&&w.querySelectorAll(l).forEach(O=>{var E;(E=t.skipValidateImage)!=null&&E.call(t,O)||C.add(O)});return[...C]},m=QG(()=>{var S;return(S=r.value)==null?void 0:S.$el});let h=0;B0(document,"mousemove",S=>{var f;if(s.value)return;const w=Date.now();if(w-h<50||(h=w,m.value))return;const C=b(S),k=p(S,C);k?((!n.value||((f=n.value)==null?void 0:f.node)!==k.node)&&(n.value=k),a.value=!0):a.value=!1});const v=W(()=>n.value?{display:a.value?"block":"none",position:"absolute",zIndex:"9999999999999999999 !important",left:`${n.value.left}px`,top:`${n.value.top}px`}:{display:"none"}),y=async()=>{var S;So(),await jt(),await o(),s.value=!0,wa((S=r.value)==null?void 0:S.$el,"mouseleave")},T=W(()=>t.source==="yangkeduo");return(S,w)=>{const C=lO,k=yn,f=jI;return G(),Le(f,rT(Kg(_(lP))),{default:ie(()=>[_(n)?(G(),Le(C,{key:0,modelValue:_(s),"onUpdate:modelValue":w[0]||(w[0]=O=>lr(s)?s.value=O:null),"source-image-url":_(n).src},null,8,["modelValue","source-image-url"])):Oe("",!0),_(s)?Oe("",!0):(G(),Le(k,{key:1,ref_key:"searchSameButtonRef",ref:r,type:"primary",style:Dt(_(v)),icon:_(KY),onClick:Pt(y,["stop","prevent"])},{default:ie(()=>[ot(He(_(T)?"跨境":"1688")+"搜同款 ",1)]),_:1},8,["style","icon"]))]),_:1},16)}}}),YY=E2(async(e,t)=>{var i,l;const[r]=await to(rl());if(r&&(i=r.sourcePlatformConfigList)!=null&&i.some(u=>u.source===t.source&&u.disabledCollect))throw new Error(`${t.source} is disabled`);const n=zc(async()=>{const u=Wn.runtime.getURL("/assets/platform-base-utils.css");return(await fetch(u).then(d=>d.text())).replace(/:root/g,":host")}),a=async()=>bv(e,{name:_m(),position:"inline",anchor:"body",mode:"closed",css:await n(),onMount:u=>{const c=ss(aY,{...t});return c.mount(u),c},onRemove:u=>{u==null||u.unmount()}}),s=async()=>{const u=await n();return bv(e,{name:_m(),position:"inline",anchor:"body",mode:"closed",css:u,onMount:c=>{const d=ss(fY,{...t,shadowRootStyle:u});return d.mount(c),d},onRemove:c=>{c==null||c.unmount()}})},o=async()=>{(await bv(e,{name:_m(),position:"inline",anchor:"body",mode:"closed",css:await n(),onMount:c=>{const d=ss(GY,{...t});return d.mount(c),d},onRemove:c=>{c==null||c.unmount()}})).mount()};return(l=r==null?void 0:r.supportSearch1688SameSource)!=null&&l.includes(t.source)&&o(),{createListUi:s,createDetailUi:a}});function Cl(e,t){const r=document.createElement(t.tag||"div");r.setAttribute("data-wxt-integrated","");let n;const a=()=>{var i;FC(r,void 0,t),BC(r,t),n=(i=t.onMount)==null?void 0:i.call(t,r)},s=()=>{var i;(i=t.onRemove)==null||i.call(t,n),r.replaceChildren(),r.remove(),n=void 0},o=jC({mount:a,remove:s},t);return e.onInvalidated(s),{get mounted(){return n},wrapper:r,...o}}const OP=()=>{const e=ee({}),t=W(()=>e.value.accountName||e.value.accountId);return{accountInfo:e,accountName:t,getAccountName:async()=>{if(!Ut(e.value))return e.value;const n=await VB();n&&(e.value=n)}}},JY=()=>{const{accountInfo:e,accountName:t,getAccountName:r}=OP(),n="https://erp.91miaoshou.com/api",s={getUserInfo:`${`${window.location.protocol}//${window.location.host}`}/sso-prefix/auth/getUser`},{LOCAL_CRAWL_MALL_INFO_LIST:o}=AS,{source:i}=qp,l=ee([]),u=ee([]),c=ee();function d(){return{shopId:null,shopNick:"",platformShopName:""}}const p=async()=>{const O=(await Jt({url:`${n}/platform/shein_choice/stat/crawl/get_crawl_shop_with_bind_mall_list`,method:"GET"})).shopList||[];return l.value=O,O},b=async()=>{const f=s.getUserInfo;try{const O=await Rn({url:f,method:"GET",xhrFields:{withCredentials:!0,responseType:"json"}}),E=O?O.msg:"";return(E?!+E.includes("子系统登录重定向"):1)?Promise.resolve(O):Promise.reject("未登录Shein后台")}catch{return Promise.resolve({})}},m=async(f=!1)=>{var E;if(Ut(e.value))return;const O=await b();if(O!=null&&O.info&&((E=O==null?void 0:O.info)!=null&&E.supplierId)){let N=[],$={};f||(N=await p()),$=O.info||{},$.name=Th($.supplierUserName),$.id=Th($.supplierId);let L=N.find(B=>`${B.mallId}`==`${$.supplierId}`);Ut(L)&&(L=d()),$.bindShop=L,u.value=[$]}},h=()=>{if(Ut(e))return"--";let f="1971-11-11";for(const O of l.value){const E=v(O);E!=="--"&&Ve(E).isAfter(Ve(f))&&(f=E)}return Ve(f).unix()===Ve("1971-11-11").unix()?"--":Ve(f).format("YYYY-MM-DD HH:mm:ss")};function v(f){const O=f==null?void 0:f.mallPluginCrawlInfo;if(Ut(O))return"--";const E=y(O);return E?Ve(E).format("YYYY-MM-DD HH:mm:ss"):"--"}function y(f){const{gmtWaitSettleCrawl:O,gmtLastRsyncSettlement:E}=f,N=[O,E].filter(Boolean);return _h(N)}const T=async()=>{var O,E,N;const f=[];for(const $ of u.value){const{id:L,bindShop:B}=$,F=await CC({source:i,id:L}),R=(B==null?void 0:B.shopId)||((N=(E=(O=l.value)==null?void 0:O.filter(H=>!(H.mallId&&H.mallId!==L)))==null?void 0:E[0])==null?void 0:N.shopId);f.push({...$,...F,shopId:R,shopGmtLastRsync:v(B)})}u.value=f,window.console.log(f),Ze.setItem(o,f)};return{accountName:t,authShopList:l,lastRsyncSettlementGmt:c,mallInfoList:u,handleInit:async()=>{await jt(),await r(),await m(),c.value=h(),TC({source:i})},bindSheinMall:async({mallId:f,shopId:O,name:E})=>{try{const N=sa({text:"绑定中..."});(await Jt({url:`${n}/platform/shein_choice/stat/crawl/bind_mall`,method:"POST",data:{mallId:f,shopId:O,name:E}}).finally(()=>{N.close()})).result==="success"&&(await m(),T(),St.success("绑定成功"))}catch(N){St.error((N==null?void 0:N.reason)||"绑定失败")}},unbindSheinMall:({mallId:f,shopId:O})=>{ht.confirm("解绑后，此店铺历史采集数据将被全部清除，建议谨慎操作！","提示",{confirmButtonText:"确定解绑",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const E=sa({text:"解绑中..."});(await Jt({url:`${n}/platform/shein_choice/stat/crawl/unbind_mall`,method:"POST",data:{mallId:f,shopId:O}}).finally(()=>{E.close()})).result==="success"&&(await m(),T(),St.success("解绑成功"))}catch(E){St.error((E==null?void 0:E.reason)||"解绑失败")}})},handleRunStartCrawl:f=>{var $,L;const{startDate:O,endDate:E,checkedShopList:N}=f;for(const B of N){const F=u.value.find(R=>`${R.id}`==`${B}`);F&&F.bindShop&&xC({source:i,mallInfo:{mallId:B,mallName:F.mallName,mallType:"sheinChoice",bindShopId:($=F.bindShop)==null?void 0:$.shopId,authAppNameList:Kw(((L=F.bindShop)==null?void 0:L.authAppNameList)||[]),startDate:Ve(O).format("YYYY-MM-DD"),endDate:Ve(E).format("YYYY-MM-DD")}})}},refreshCrawlShopList:T}},XY=()=>{const{accountInfo:e,accountName:t,getAccountName:r}=OP(),n="https://erp.91miaoshou.com/api",a=`${window.location.protocol}//${window.location.host}`,s={getUserInfo:`${a}/bg/quiet/api/mms/userInfo`},{LOCAL_CRAWL_MALL_INFO_LIST:o}=og,{source:i}=rg,l=ee([]),u=ee([]),c=ee(""),d=ee(),p=ee(!1),b=ee(!1);function m(){return{shopId:null,shopNick:"",platformShopName:""}}const h=async()=>{await jt(),window.open("https://erp.91miaoshou.com/","_blank")},v=async()=>{let q=s.getUserInfo;b.value&&(q=`${a}/api/seller/auth/userInfo`);try{const M=await Rn({url:q,method:"POST",data:JSON.stringify({}),xhrFields:{withCredentials:!0,responseType:"json"},headers:{"content-type":"application/json"}}),D=M?M.errorMsg:"";return(D?!D.includes("登录过期，请重新登录"):1)?Promise.resolve(M):Promise.reject("未登录temu后台")}catch{return Promise.resolve({})}},y=async()=>{const M=(await Jt({url:`${n}/platform/pddkj/stat/crawl/get_crawl_shop_with_bind_mall_list`,method:"GET"})).shopList||[];return l.value=M,M},T=async(q=!1)=>{var se,ne,me,ve,We;if(Ut(e.value))return;if(p.value){if(I("#mms-layout-user-setting").length>0){let Ke=[];q||(Ke=await y());const xe=I("#mms-layout-user-setting > div > div:nth-child(2) > div > div:nth-child(2) > div").text().replace("ID: ",""),ze=I("#mms-layout-user-setting > div > div:nth-child(2) > div > div > div").html(),Ne=Ke.find(X=>`${X.pddkjMallId}`==`${xe}`),rt={name:ze,mallName:ze,id:xe,bindShop:Ne,isTemuLocal:!0};u.value=[rt]}return}const M=await v(),D=[];let Y=[];q||(Y=await y());let Z=[];b.value?(ne=(se=M==null?void 0:M.result)==null?void 0:se.mallList)!=null&&ne.length&&(Z=M.result.mallList):(ve=(me=M==null?void 0:M.result)==null?void 0:me.companyList)!=null&&ve.length&&(Z=((We=M.result.companyList[0])==null?void 0:We.malInfoList)||[]);for(const Ke of Z){const{mallName:xe,mallId:ze,isSemiManagedMall:Ne,managedType:rt}=Ke,X=Y.find(ge=>`${ge.pddkjMallId}`==`${ze}`)||m(),re={name:Th(xe),id:ze,bindShop:X,isSemiManagedMall:b.value?`${rt}`=="1":Ne,mallName:xe};D.push(re)}u.value=D},S=()=>{if(Ut(e))return"--";let q="1971-11-11";for(const M of l.value){const D=w(M);D!=="--"&&Ve(D).isAfter(Ve(q))&&(q=D)}return Ve(q).unix()===Ve("1971-11-11").unix()?"--":Ve(q).format("YYYY-MM-DD HH:mm:ss")};function w(q){const M=q==null?void 0:q.pddkjMallPluginCrawlInfo;if(Ut(M))return"--";const D=[];for(const Y in M)Yw(Y,"gmtLast")&&M[Y]&&D.push(M[Y]);return D.length?_h(D):"--"}function C(q){if(Ut(q))return"--";const M=q.pddkjMallPluginCrawlInfo;if(Ut(M))return"--";const D=[];for(const Y in M)Yw(Y,"gmtLast")&&M[Y]&&D.push(M[Y]);return D.length?_h(D):"--"}const k=async()=>{var M,D,Y;const q=[];for(const Z of u.value){const{id:se,bindShop:ne}=Z,me=await CC({source:i,id:se}),ve=(ne==null?void 0:ne.shopId)||((Y=(D=(M=l.value)==null?void 0:M.filter(We=>!(We.pddkjMallId&&We.pddkjMallId!==se)))==null?void 0:D[0])==null?void 0:Y.shopId);q.push({...Z,...me,shopId:ve,shopGmtLastRsync:C(ne)})}u.value=q,window.console.log(q),Ze.setItem(o,q)},f=async q=>{await jt();let M=I('div[data-testid="beast-core-modal"]'),D=I('div[data-testid="beast-core-modal-mask"]');M.length||(M=I('[class^="MDL_outerWrapper_"]')),D.length||(D=I('[class^="MDL_mask_"]')),M.remove(),D.remove(),I('[class^="PT_outerWrapper_"]').hide(),I('[class^="satisfaction-score_"]').hide();const{version:Y}=Wn.runtime.getManifest();AC({action:q||"plugin_close_popup",extra:{version:`${Y}`,tag:"earth"}})},O=async({mallId:q,shopId:M})=>{const D=u.value.find(Z=>`${Z.id}`==`${q}`),Y=l.value.find(Z=>`${Z.shopId}`==`${M}`);if(D.isSemiManagedMall){if(Y.platform!=="pddkjChoice"){St.error("绑定的店铺类型不正确");return}}else if(p.value){if(Y.platform!=="pddkjLocal"){St.error("绑定的店铺类型不正确");return}}else if(Y.platform!=="pddkj"){St.error("绑定的店铺类型不正确");return}try{const Z=sa({text:"绑定中..."});(await Jt({url:`${n}/platform/pddkj/shop/shop/bind_pddkj_mall`,method:"POST",data:{mallId:q,shopId:M}}).finally(()=>{Z.close()})).result==="success"&&(await T(),k(),St.success("绑定成功"))}catch(Z){St.error((Z==null?void 0:Z.reason)||"绑定失败")}},E=({mallId:q,shopId:M})=>{ht.confirm("解绑后，此店铺历史采集数据将被全部清除，建议谨慎操作！","提示",{confirmButtonText:"确定解绑",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const D=sa({text:"解绑中..."});(await Jt({url:`${n}/platform/pddkj/shop/shop/unbind_pddkj_mall`,method:"POST",data:{mallId:q,shopId:M}}).finally(()=>{D.close()})).result==="success"&&(await T(),k(),St.success("解绑成功"))}catch(D){St.error((D==null?void 0:D.reason)||"解绑失败")}})},N=async()=>{if(await jt(),f("plugin_reject_adjust_price"),!!(location.href.includes("price-adjustment")||location.href.includes("order-price")))try{const q=B();if(!(q!=null&&q.length))return;if(u.value.length||await T(!0),q){for(const M of u.value)if(q&&I.trim(M.name)===q){M.isSemiManagedMall?L(M):$(M);break}}}catch(q){St.error(F(q))}};async function $(q){var Z;const M=[];let D=null,Y;try{let se=1;const ne=10;let me=0;const ve=[],We=`${a}/api/kiana/mms/magneto/price-adjust/page-query`,Ke=`${a}/api/kiana/mms/gmp/bg/magneto/api/price-adjust/batch/adjust`;do{const xe=await Tt({mallId:q.id,url:We,antiContentStr:d.value,data:{pageInfo:{pageSize:ne,pageNo:se},status:1,quickSearch:[]}});if(M.push(xe),xe.errorMsg)throw new Error(xe.errorMsg);const ze=xe==null?void 0:xe.result,Ne=ze==null?void 0:ze.list;Ne&&(Ne!=null&&Ne.length)&&ve.push(...Ne),me=(ze==null?void 0:ze.total)||0,se++,await Je(2e3)}while(ve.length<me);if(ve.length){const xe={},Ne={adjustList:ve.reduce((rt,X)=>{const{id:re}=X;return xe[re]||(xe[re]=!0,rt.push({adjustId:re,result:2,reason:"拒绝"})),rt},[])};Y=Ne,D=await Tt({mallId:q.id,url:Ke,antiContentStr:d.value,data:Ne}),window.location.reload()}}catch(se){St.error(F(se)),await Jt({url:`${n}/platform/pddkj/stat/crawl/savePddkjRejectPriceLog`,method:"POST",data:{mallId:q.id,shopId:(Z=q.bindShop)==null?void 0:Z.shopId,allRet:M,rejectRet:D,rejectParams:Y,errorMsg:F(se)}})}}async function L(q){try{let M=1;const D=50;let Y=0;const Z=[];let se=0;const ne=`${a}/api/kiana/magnus/mms/price-adjust/page-query`,me=`${a}/api/kiana/magnus/mms/price-adjust/batch-review`;do{const ve=await Tt({mallId:q.id,url:ne,antiContentStr:d.value,data:{pageInfo:{pageSize:D,pageNo:M},status:1,quickSearch:[]}});if(ve.errorMsg)throw new Error(ve.errorMsg);const We=ve==null?void 0:ve.result,Ke=We==null?void 0:We.list;Ke&&(Ke!=null&&Ke.length)&&Z.push(...Ke),Y=(We==null?void 0:We.total)||0,M++,await Je(2e3)}while(Z.length<Y);if(Z.length){const ve=Z.filter(Ke=>[5,9,11,32,6].includes(Ke.sourceInt)),We=Mc(ve,D);for(const Ke of We){const xe={batchResult:2,rejectReasons:Ke.reduce((ze,Ne)=>(ze[Ne.id]="拒绝",ze),{}),submitOrders:Ke.map(ze=>ze.id)};await Tt({mallId:q.id,url:me,antiContentStr:d.value,data:xe}),se++,await Je(1e3)}se&&window.location.reload()}}catch(M){St.error(F(M))}}function B(){let q=I('div[class^="layout-main_mallInfo"]');return q.length||(q=I('div[class^="account-info_mallInfo_"]')),I.trim(q.find("span[data-testid]").eq(0).text())}function F(q){switch(typeof q){case"string":return q;case"object":return q.message;default:return"未知错误"}}return{accountName:t,lastRsyncSettlementGmt:c,authShopList:l,mallInfoList:u,isTemuLocal:p,handleInit:async()=>{await jt(),p.value=/(\w+\.)?seller(-eu)?.temu.com/.test(window.location.host),b.value=window.location.host.includes("agentseller"),b.value&&(p.value=!1);const{LOCAL_TEMU_ANTI_CONTENT:q}=og;await r(),await T(),c.value=S(),d.value=await Ze.getItem(q),TC({source:i})},handleGoLogin:h,closeTemuPopup:f,refreshCrawlShopList:k,bindTemuMallV2:O,unbindTemuMallV2:E,rejectModifyPrice:N,handleRunStartCrawl:q=>{var Z,se;const{startDate:M,endDate:D,checkedShopList:Y}=q;for(const ne of Y){const me=u.value.find(ve=>`${ve.id}`==`${ne}`);if(me&&me.bindShop){let ve="pddkj";p.value?ve="pddkjLocal":me.isSemiManagedMall&&(ve="pddkjChoice"),xC({source:i,mallInfo:{mallId:ne,mallName:me.mallName,mallType:ve,bindShopId:(Z=me.bindShop)==null?void 0:Z.shopId,authAppNameList:Kw(((se=me.bindShop)==null?void 0:se.authAppNameList)||[]),startDate:Ve(M).format("YYYY-MM-DD"),endDate:Ve(D).format("YYYY-MM-DD"),host:`${window.location.protocol}//${window.location.host}`},antiContentStr:d.value})}}}}},QY={class:"svg-icon"},ZY={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",width:"16",height:"16"},eJ={key:1,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},tJ={key:2,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},rJ={key:3,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},nJ={key:4,viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},aJ={key:5,xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},kl=oa(Te({name:"SvgIcon",inheritAttrs:!1,__name:"SvgIcon",props:{icon:{type:String,default:""}},setup(e){return(t,r)=>(G(),le("div",QY,[e.icon==="question"?(G(),le("svg",ZY,[...r[0]||(r[0]=[K("path",{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64z m0 64c-212.054 0-384 171.946-384 384s171.946 384 384 384 384-171.946 384-384-171.946-384-384-384z m-0.014 576c11.046-0.02 20.65 3.921 28.37 11.66C548.063 723.389 552 732.98 552 744c0 11.019-3.936 20.611-11.645 28.34-7.718 7.739-17.323 11.68-28.369 11.66-11.028-0.02-20.616-3.954-28.327-11.646-7.72-7.7-11.659-17.3-11.659-28.354 0-11.054 3.938-20.653 11.659-28.354 7.576-7.557 16.963-11.487 27.748-11.641l0.58-0.005z m-0.03-448c43.084 0 79.923 13.897 110.154 41.567l0.988 0.913 0.188-0.374 7.548 7.948c29.472 31.036 43.192 67.244 40.925 108.16l-0.074 1.241-0.051 0.982c-1.18 21.04-6.53 41.103-16.03 60.125-9.547 19.114-29.438 43.72-59.759 74.142l-0.922 0.924c-33.189 33.197-50.54 58.016-52.131 73.036l-0.044 0.452-0.019 0.22-0.031 0.217c-1.254 8.72-5.09 16.078-11.407 21.768-6.256 5.636-13.864 8.556-22.48 8.679h-3.794l-0.261-0.018c-9.555-0.652-17.598-4.759-23.668-12.097-5.983-7.234-8.47-15.783-7.342-25.153l0.056-0.45 0.086-0.783c2.179-19.236 9.06-37.48 20.576-54.649l0.56-0.83 0.569-0.828c11.778-17.046 28.257-36.183 49.452-57.464l2.633-2.638 1.636-1.652c15.682-15.9 27.57-29.777 35.645-41.571l0.408-0.598c8.473-12.502 13.393-21.295 14.593-25.676 1.25-4.563 2.141-10.745 2.633-18.533l0.09-1.528c1.36-21.69-5.809-40.733-21.744-57.576-18.232-19.155-40.545-28.74-67.404-28.93l-0.815-0.003h-0.74c-24.793 0-45.821 8.752-63.51 26.444-17.51 17.516-26.262 38.306-26.435 62.785l-0.003 0.743c0 9.49-3.412 17.785-10.073 24.447-6.66 6.662-14.954 10.076-24.443 10.076-9.49 0-17.782-3.414-24.443-10.076-6.66-6.662-10.073-14.957-10.073-24.447 0-43.785 15.588-81.394 46.585-112.398C430.582 271.592 468.182 256 511.957 256z"},null,-1)])])):e.icon==="shrink"?(G(),le("svg",eJ,[...r[1]||(r[1]=[K("path",{d:"M0.000323 25.6A25.374236 25.374236 0 0 1 25.705141 0.104819h971.130961c14.206992 0 25.704819 11.288189 25.704819 25.495181v465.395906c0 14.005417-11.497827 25.495181-25.704819 25.495181-14.215055 0-25.704819-11.288189-25.704819-25.495181V51.095181H51.200323V971.026142h442.617952a25.688693 25.688693 0 0 1 25.704819 25.704819 25.688693 25.688693 0 0 1-25.704819 25.704819H25.705141A25.688693 25.688693 0 0 1 0.000323 996.730961V25.6zM996.626464 1022.226142v0.209638h-355.900472a25.688693 25.688693 0 0 1-25.696756-25.704819V640.628913a25.688693 25.688693 0 0 1 25.704819-25.704819h355.892409a25.688693 25.688693 0 0 1 25.704819 25.704819v355.89241a25.688693 25.688693 0 0 1-25.704819 25.704819zM666.229236 666.124094v304.902048h304.902047V666.124094H666.229236zM284.003094 538.446614a25.688693 25.688693 0 0 1 25.704819-25.704819H476.684417L186.81985 222.877228a25.479055 25.479055 0 0 1 0-36.154456 25.479055 25.479055 0 0 1 36.154457 0l289.856504 289.864567v-166.984567a25.688693 25.688693 0 0 1 25.704819-25.704819 25.688693 25.688693 0 0 1 25.704819 25.704819v228.827716a25.688693 25.688693 0 0 1-25.704819 25.712882H309.69985a25.688693 25.688693 0 0 1-25.704819-25.704819z"},null,-1)])])):e.icon==="expand"?(G(),le("svg",tJ,[...r[2]||(r[2]=[K("path",{d:"M0 25.704819A25.688693 25.688693 0 0 1 25.704819 0h971.130961a25.688693 25.688693 0 0 1 25.704818 25.704819v465.395905a25.688693 25.688693 0 0 1-25.704818 25.704819 25.688693 25.688693 0 0 1-25.704819-25.704819V51.2H51.2v919.930961h442.617953a25.688693 25.688693 0 0 1 25.704819 25.704819 25.688693 25.688693 0 0 1-25.704819 25.704818H25.704819A25.688693 25.688693 0 0 1 0 996.827717V25.704819z m1022.330961 970.921323a25.962835 25.962835 0 0 1-25.495181 25.914456H640.733732a25.688693 25.688693 0 0 1-25.704819-25.704818V640.733732a25.688693 25.688693 0 0 1 25.704819-25.704819h355.89241a25.688693 25.688693 0 0 1 25.704819 25.704819v355.89241z m-51.2-25.495181V666.228913H666.228913v304.902048h304.902048zM459.340598 205.009638c0 13.997354-11.497827 25.495181-25.704818 25.495181H266.64315l290.275779 289.856504a25.479055 25.479055 0 0 1 0 36.154457 25.454866 25.454866 0 0 1-18.173984 7.522771c-6.692283 0-13.166866-2.507591-18.182047-7.522771l-289.864567-289.864567v167.194204a25.688693 25.688693 0 0 1-25.696756 25.696756 25.688693 25.688693 0 0 1-25.704819-25.696756V205.009638a25.688693 25.688693 0 0 1 25.704819-25.704819H433.627717a25.688693 25.688693 0 0 1 25.704818 25.704819z"},null,-1)])])):e.icon==="close"?(G(),le("svg",rJ,[...r[3]||(r[3]=[K("path",{d:"M196.48 149.376L874.624 827.52l-47.104 47.104L149.376 196.48z"},null,-1),K("path",{d:"M149.376 827.52L827.52 149.44l47.168 47.104L196.544 874.688z"},null,-1)])])):e.icon==="more"?(G(),le("svg",nJ,[...r[4]||(r[4]=[K("path",{d:"M344.832 474.112H98.048a61.632 61.632 0 0 1-61.44-61.44V165.888c0-33.792 27.648-61.44 61.44-61.44h247.296c33.792 0 61.44 27.648 61.44 61.44v247.296a61.632 61.632 0 0 1-61.952 60.928zM98.048 165.888v247.296h247.296V165.888H98.048z m609.792 359.424a60.8 60.8 0 0 1-43.52-17.92L489.728 332.8a60.8 60.8 0 0 1-17.92-43.52 60.8 60.8 0 0 1 17.92-43.52L664.32 71.168a60.8 60.8 0 0 1 43.52-17.92 60.8 60.8 0 0 1 43.52 17.92l174.592 174.592a60.8 60.8 0 0 1 17.92 43.52 60.8 60.8 0 0 1-17.92 43.52L751.36 507.392a60.8 60.8 0 0 1-43.52 17.92z m0-411.136L533.248 288.768 707.84 463.36l174.592-174.592-174.592-174.592zM344.832 960.512H98.048a61.632 61.632 0 0 1-61.44-61.44v-247.296c0-33.792 27.648-61.44 61.44-61.44h247.296c33.792 0 61.44 27.648 61.44 61.44v247.296a61.76 61.76 0 0 1-61.952 61.44z m-246.784-308.224v247.296h247.296v-247.296H98.048z m733.184 308.224H583.936a61.632 61.632 0 0 1-61.44-61.44v-247.296c0-33.792 27.648-61.44 61.44-61.44h247.296c33.792 0 61.44 27.648 61.44 61.44v247.296c0 34.304-27.136 61.44-61.44 61.44z m-246.784-308.224v247.296h247.296v-247.296H584.448z",fill:"#333333","p-id":"1455"},null,-1)])])):e.icon==="back"?(G(),le("svg",aJ,[...r[5]||(r[5]=[K("g",{transform:"translate(-30.087 -12.136)"},[K("path",{class:"a",d:"M45.926,24.8A3.582,3.582,0,0,1,42.3,28.136h-8.58A3.581,3.581,0,0,1,30.089,24.8h0V15.471h0a3.583,3.583,0,0,1,3.629-3.335h8.912L41.4,13.408H33.72a2.276,2.276,0,0,0-2.313,2.228v9a2.276,2.276,0,0,0,2.313,2.228H42.3c1.274,0,3.326-1,3.326-2.228v-.461l-.676-.013.676-2.226-.676-2.619.983-1.252V24.8h0Zm.16-10.99",transform:"translate(0 0)"}),K("path",{class:"a",d:"M33.873,12.274h8.58a3.581,3.581,0,0,1,3.629,3.333h0v9.33h0a3.581,3.581,0,0,1-3.629,3.333H33.541L34.77,27h7.686a2.274,2.274,0,0,0,2.311-2.228V15.776a2.274,2.274,0,0,0-2.311-2.228H33.873M30.087,26.6",transform:"translate(0 -0.135)"}),K("path",{class:"a",d:"M301.622,251.811l-2.822-2.646,2.822-2.666v1.365c.588,0,4.244.028,4.244,3.361a3.567,3.567,0,0,1-3.148,3.5,2.38,2.38,0,0,0,1.937-2.316c0-2.181-2.177-2.2-3.031-2.2v1.6Z",transform:"translate(-264.246 -230.48)"})],-1)])])):Oe("",!0)]))}}),[["__scopeId","data-v-008727ad"]]),sJ={class:"model-layout"},oJ={class:"model-layout-left"},iJ={class:"crawl-table"},lJ={class:"text-secondary"},uJ={class:"custom-header"},cJ={class:"shop-bind-column"},dJ={key:0},fJ={class:"text-secondary"},pJ={class:"model-layout-right"},hJ={class:"crawl-config"},mJ={class:"crawl-config-time"},gJ={class:"model-layout-footer"},PP=oa(Te({name:"CrawlDetailDialog",inheritAttrs:!1,__name:"CrawlDetailDialog",props:{authShopList:{type:Array,default:()=>[]},localStorageKey:{type:String,default:""},platformName:{type:String,default:"Temu"},platform:{type:String,default:"temu"}},emits:["closed","bind","unbind","startCrawl"],setup(e,{expose:t,emit:r}){const n=e,a=r,{state:s}=Ys(n.localStorageKey,[]),{source:o}=qp,{source:i}=rg,l=ee(!1),u=ee(),c=ee([]),d=ee({startDate:Ve().subtract(30,"day").toDate(),endDate:Ve().toDate()}),p=S=>{var w;return(S==null?void 0:S.status)==="processing"?!1:!!((w=S.bindShop)!=null&&w.shopId)},b=S=>{c.value=S},m=()=>{const S=c.value.map(O=>O.id),{startDate:w,endDate:C}=d.value,k={startDate:new Date(w),endDate:new Date(C),checkedShopList:S};if(!S.length){St.error("请选择要采集的店铺");return}if(Ve(w).isAfter(Ve(C))){St.error("采集开始时间不能小于结束时间");return}if(Ve(w).isBefore(Ve().subtract(90,"day"))){St.error("采集开始时间不能早于90天前");return}if(Ve(C).isAfter(Ve(w).add(90,"day"))){St.error("时间范围不能超过90天");return}a("startCrawl",k),c.value=[],u.value.clearSelection();const{version:f}=Wn.runtime.getManifest();AC({action:"plugin_data_crawl",extra:{...k,version:`${f}`,tag:"earth"}})},h=({shop:S,row:w})=>{const{platform:C}=n;return C===i?S.pddkjMallId&&S.pddkjMallId!==w.id:C===o?S.mallId&&S.mallId!==w.id:!1},v=()=>{l.value=!1},y=()=>{a("closed")};return t({openDialog:()=>{l.value=!0}}),(S,w)=>{const C=Uj,k=rO,f=FI,O=ci,E=CA,N=xA,$=yn,L=TW,B=tO,F=TH,R=Vz,H=qz,q=py;return G(),Le(To,null,{default:ie(()=>[ue(q,{modelValue:l.value,"onUpdate:modelValue":w[2]||(w[2]=M=>l.value=M),class:"crawl-temu-detail-dialog","show-close":!1,width:"80vw",onClosed:y},{header:ie(()=>[K("span",{class:"crawl-temu-detail-dialog-close",onClick:v})]),footer:ie(()=>[K("div",gJ,[ue($,{onClick:v},{default:ie(()=>[...w[10]||(w[10]=[ot(" 关闭 ",-1)])]),_:1}),ue($,{type:"primary",disabled:!c.value.length,onClick:m},{default:ie(()=>[...w[11]||(w[11]=[ot(" 开始采集 ",-1)])]),_:1},8,["disabled"])])]),default:ie(()=>[K("div",sJ,[K("div",oJ,[ue(C,{type:"warning","show-icon":"",closable:!1},{default:ie(()=>[...w[3]||(w[3]=[ot(" 为保障数据关联正确，请您务必选对绑定在ERP上的店铺 ",-1)])]),_:1}),K("div",iJ,[ue(B,{ref_key:"tableRef",ref:u,"max-height":"450px",data:_(s),"row-key":"id",onSelectionChange:b},{default:ie(()=>[ue(k,{type:"selection",width:"55",selectable:p}),ue(k,{label:"我的店铺"},{default:ie(({row:M})=>[K("div",null,[ot(He(M.name)+" ",1),M.isSemiManagedMall||M.isTemuLocal?(G(),Le(f,{key:0,type:"warning"},{default:ie(()=>[ot(He(M.isSemiManagedMall?"半托管":"本土"),1)]),_:2},1024)):Oe("",!0)]),K("div",lJ," 店铺ID： "+He(M.id),1)]),_:1}),ue(k,null,{header:ie(()=>[K("div",uJ,[w[4]||(w[4]=ot(" 已绑定店铺 ",-1)),ue(O,{placement:"top",effect:"light"},{content:ie(()=>[ot(" 指当前"+He(e.platformName)+"店铺对应授权在ERP上的店铺，系统会默认按店铺ID自动匹配，建议您再次核对，若绑定错误，可手动重绑 ",1)]),default:ie(()=>[ue(kl,{icon:"question"})]),_:1})])]),default:ie(({row:M})=>{var D,Y;return[K("div",cJ,[ue(N,{modelValue:M.shopId,"onUpdate:modelValue":Z=>M.shopId=Z,placeholder:"请选择",disabled:!!((D=M.bindShop)!=null&&D.shopId),filterable:""},{default:ie(()=>[(G(!0),le(pt,null,$r(e.authShopList,Z=>(G(),Le(E,{key:Z.shopId,value:Z.shopId,label:Z.shopNick||Z.platformShopName,disabled:h({shop:Z,row:M})},null,8,["value","label","disabled"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]),(Y=M.bindShop)!=null&&Y.shopId?(G(),Le($,{key:0,link:"",type:"primary",disabled:M.status==="processing",onClick:Z=>a("unbind",{...M,mallId:M.id})},{default:ie(()=>[...w[5]||(w[5]=[ot(" 解绑 ",-1)])]),_:1},8,["disabled","onClick"])):(G(),Le($,{key:1,link:"",type:"primary",disabled:M.status==="processing",onClick:Z=>a("bind",{...M,mallId:M.id})},{default:ie(()=>[...w[6]||(w[6]=[ot(" 保存 ",-1)])]),_:1},8,["disabled","onClick"]))])]}),_:1}),ue(k,{label:"采集进度"},{default:ie(({row:M})=>[M.progressText?(G(),le("div",dJ,He(M.progressText),1)):Oe("",!0),ue(L,{percentage:+M.progressRate,"show-text":!1},null,8,["percentage"]),K("div",fJ," 最近采集时间： "+He(M.shopGmtLastRsync),1)]),_:1})]),_:1},8,["data"])])]),K("div",pJ,[K("div",hJ,[K("div",mJ,[w[7]||(w[7]=K("div",{class:"crawl-config-time-title"}," 采集时间范围 ",-1)),w[8]||(w[8]=K("div",{class:"crawl-config-time-desc"}," *此时间指平台对账或结算数据生成的时间 ",-1)),ue(H,{"label-suffix":"："},{default:ie(()=>[ue(R,{label:"开始时间"},{default:ie(()=>[ue(F,{modelValue:d.value.startDate,"onUpdate:modelValue":w[0]||(w[0]=M=>d.value.startDate=M),type:"date",clearable:!1},null,8,["modelValue"])]),_:1}),ue(R,{label:"结束时间"},{default:ie(()=>[ue(F,{modelValue:d.value.endDate,"onUpdate:modelValue":w[1]||(w[1]=M=>d.value.endDate=M),type:"date",clearable:!1},null,8,["modelValue"])]),_:1})]),_:1})]),w[9]||(w[9]=K("div",{class:"crawl-tip"},[K("div",{class:"crawl-tip-title"},[K("span",{class:"crawl-tip-title-divider"}),K("span",{class:"crawl-tip-title-text"},"重要提示"),K("span",{class:"crawl-tip-title-divider"})]),K("div",{class:"crawl-tip-content"},[ot(" 1、采集过程中，请不要刷新页面、在其他浏览器或设备登录此账号，也不要关闭插件打开的标签页（标签页将在数据项采集完成后自动关闭） "),K("br"),ot(" 2、请保持登录正在采集的店铺，直到任务完成 "),K("br"),ot(" 3、高峰时段平台可能会限流，因此会出现采集进度缓慢状况，请耐心等待 "),K("br")])],-1))])])])]),_:1},8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-9aa2ea68"]]),vJ={class:"crawl-header-right"},EP=oa(Te({name:"CrawlHeader",inheritAttrs:!1,__name:"CrawlHeader",props:{height:{type:String,default:"42px"}},setup(e){return(t,r)=>(G(),le("div",{class:"crawl-header",style:Dt({height:e.height})},[r[0]||(r[0]=K("div",{class:"crawl-header-left"},[K("span",{class:"crawl-header-title"},"数据助手")],-1)),K("div",vJ,[De(t.$slots,"right",{},void 0,!0)])],4))}}),[["__scopeId","data-v-aa0939ca"]]),yJ={class:"operate"},bJ={class:"earth-crawl-window-header-tip"},wJ={class:"earth-crawl-window"},_J={class:"earth-crawl-window-content"},SJ={class:"earth-crawl-window-footer"},$P=oa(Te({name:"CrawlPanel",inheritAttrs:!1,__name:"CrawlPanel",props:{accountName:String,lastRsyncSettlementGmt:String,platformName:{type:String,default:"Temu"}},emits:["refreshLogin"],setup(e,{emit:t}){const r=t,n=ee(!1),{state:a}=Ys(QB,!1),s=()=>{n.value=!0},o=()=>{const u=document.getElementById("J_earthCrawlFixPanel");u.style.top="unset",u.style.left="unset",a.value=!a.value},i=async()=>{await jt(),window.open("https://erp.91miaoshou.com/","_blank")},l=()=>{r("refreshLogin")};return(u,c)=>{const d=ci,p=yn,b=cA;return G(),le("div",{id:"J_earthCrawlFixPanel",class:Q(["earth-crawl-window-fix-panel",{"is-closed":n.value,"is-collapsed":_(a)}])},[K("div",{class:"earth-crawl-window-header J_earthfixPanelHeader",onMousedown:c[0]||(c[0]=m=>_(hY)(m,"J_earthCrawlFixPanel"))},[ue(EP,null,{right:ie(()=>[K("div",yJ,[K("div",null,[ue(d,{placement:"top",effect:"light"},{content:ie(()=>[K("div",bJ,[ot(" 采集"+He(e.platformName)+"各店铺对账数据步骤： ",1),c[1]||(c[1]=K("br",null,null,-1)),c[2]||(c[2]=ot(" 1、打开【采集对账数据】界面，勾选要采集的店铺；",-1)),c[3]||(c[3]=K("br",null,null,-1)),c[4]||(c[4]=ot(" 2、选择要采集的时间范围，点击【开始采集】按钮，等待完成即可。",-1)),c[5]||(c[5]=K("br",null,null,-1)),ot(" 注意：采集过程中，需同时保持登陆正在采集的"+He(e.platformName)+"店铺和ERP数据助手 ",1)])]),default:ie(()=>[ue(kl,{icon:"question"})]),_:1})]),K("div",{onClick:o},[ue(kl,{icon:_(a)?"expand":"shrink"},null,8,["icon"])]),K("div",{onClick:s},[ue(kl,{icon:"close"})])])]),_:1})],32),K("div",wJ,[K("div",_J,[K("div",null,[c[8]||(c[8]=ot(" 当前登录账号： ",-1)),e.accountName?(G(),le(pt,{key:0},[ot(He(e.accountName),1)],64)):(G(),le(pt,{key:1},[ue(p,{type:"primary",link:"",onClick:i},{default:ie(()=>[...c[6]||(c[6]=[ot(" 登录 ",-1)])]),_:1}),ue(b,{direction:"vertical"}),ue(p,{type:"primary",link:"",onClick:l},{default:ie(()=>[...c[7]||(c[7]=[ot(" 已登录，刷新 ",-1)])]),_:1})],64))]),K("div",null," 最近采集时间："+He(e.lastRsyncSettlementGmt),1)]),K("div",SJ,[De(u.$slots,"footer",{},void 0,!0)])])],2)}}}),[["__scopeId","data-v-d17ffbd7"]]),TJ=Te({name:"CrawlSheinChoiceUi",inheritAttrs:!1,__name:"CrawlSheinChoiceUi",props:{setupMain:{type:Function,required:!0}},setup(e){const t=e,r=ee(),{accountName:n,authShopList:a,lastRsyncSettlementGmt:s,mallInfoList:o,handleInit:i,bindSheinMall:l,unbindSheinMall:u,handleRunStartCrawl:c,refreshCrawlShopList:d}=JY(),{LOCAL_CRAWL_MALL_INFO_LIST:p}=AS,{source:b}=qp,m=async()=>{await i(),n.value&&o.value.length&&t.setupMain()},h=async()=>{var v;if(await jt(),!n.value){St.warning("请先登陆ERP账号");return}if(!o.value.length){St.warning("请先登陆SHEIN账号");return}d(),(v=r.value)==null||v.openDialog()};return Kt(()=>{window.console.log("sheinChoice Plugin"),m()}),(v,y)=>{const T=yn;return G(),Le(To,null,{default:ie(()=>[ue($P,{"platform-name":"Shein","account-name":_(n),"last-rsync-settlement-gmt":_(s),onRefreshLogin:m},{footer:ie(()=>[ue(T,{type:"primary",onClick:h},{default:ie(()=>[...y[0]||(y[0]=[ot(" 采集对账数据 ",-1)])]),_:1})]),_:1},8,["account-name","last-rsync-settlement-gmt"]),ue(PP,{ref_key:"crawlSheinDetailDialogRef",ref:r,"platform-name":"Shein",platform:_(b),"auth-shop-list":_(a),"local-storage-key":_(p),onBind:_(l),onUnbind:_(u),onStartCrawl:_(c)},null,8,["platform","auth-shop-list","local-storage-key","onBind","onUnbind","onStartCrawl"])]),_:1})}}}),xJ={id:"earth-crawl-temu-tools-popup"},CJ={class:"earth-crawl-temu-tools-popup-header"},kJ={class:"operate"},IJ={class:"earth-crawl-temu-tools-popup-content"},AJ={class:"earth-crawl-temu-tools-popup-content-button"},OJ=oa(Te({name:"CrawlTemuUi",inheritAttrs:!1,__name:"CrawlTemuUi",props:{setupMain:{type:Function,required:!0}},setup(e){const t=e,{accountName:r,lastRsyncSettlementGmt:n,authShopList:a,mallInfoList:s,isTemuLocal:o,handleInit:i,closeTemuPopup:l,refreshCrawlShopList:u,bindTemuMallV2:c,unbindTemuMallV2:d,rejectModifyPrice:p,handleRunStartCrawl:b}=XY(),m=ee(!1),h=ee(),{LOCAL_CRAWL_MALL_INFO_LIST:v}=og,{source:y}=rg,T=()=>{m.value=!m.value},S=async()=>{var k;if(await jt(),!r.value){St.warning("请先登陆ERP账号");return}if(!s.value.length){St.warning("请先登陆TEMU账号");return}u(),(k=h.value)==null||k.openDialog()},w=()=>{m.value=!1,p()},C=async()=>{await i(),r.value&&s.value.length&&t.setupMain()};return Kt(()=>{window.console.log("pdd Plugin"),C()}),(k,f)=>{const O=yn,E=IA;return G(),Le(To,null,{default:ie(()=>[ue($P,{"last-rsync-settlement-gmt":_(n),"account-name":_(r),onRefreshLogin:C},{footer:ie(()=>[ue(O,{type:"primary",onClick:S},{default:ie(()=>[...f[1]||(f[1]=[ot(" 采集对账数据 ",-1)])]),_:1}),ue(O,{onClick:f[0]||(f[0]=()=>_(l)())},{default:ie(()=>[...f[2]||(f[2]=[ot(" 关闭Temu弹框 ",-1)])]),_:1}),ue(E,{visible:m.value,placement:"left-end",width:430,"show-arrow":!1,"popper-class":"earth-crawl-temu-tools-popover"},{reference:ie(()=>[_(o)?Oe("",!0):(G(),Le(O,{key:0,onClick:T},{default:ie(()=>[ue(kl,{icon:"more"})]),_:1}))]),default:ie(()=>[K("div",xJ,[K("div",CJ,[ue(EP,{height:"50px"},{right:ie(()=>[K("div",kJ,[K("div",{class:"operate-popup-close",onClick:T},[ue(kl,{icon:"back"})])])]),_:1})]),K("div",IJ,[K("div",AJ,[ue(O,{type:"primary",plain:"",onClick:w},{default:ie(()=>[...f[3]||(f[3]=[ot(" 一键拒绝调价 ",-1)])]),_:1})]),f[4]||(f[4]=K("div",{class:"earth-crawl-temu-tools-popup-content-text"},[K("div",{class:"earth-crawl-temu-tools-popup-content-text-title"}," 功能使用说明： "),K("div",{class:"earth-crawl-temu-tools-popup-content-text-content"},[K("div",null," 1.进入调价管理->待卖家确认页面，点击此按钮，可一次性拒绝全部调价单； "),K("div",null," 2.若页面显示营销活动申报价调整弹窗，点击此按钮，可一次性不接受全部商品调价； ")])],-1))])])]),_:1},8,["visible"])]),_:1},8,["last-rsync-settlement-gmt","account-name"]),ue(PP,{ref_key:"crawlTemuDetailDialogRef",ref:h,platform:_(y),"auth-shop-list":_(a),"local-storage-key":_(v),onBind:_(c),onUnbind:_(d),onStartCrawl:_(b)},null,8,["platform","auth-shop-list","local-storage-key","onBind","onUnbind","onStartCrawl"])]),_:1})}}}),[["__scopeId","data-v-895e6c68"]]),PJ=LN(e=>({createCrawlTemuUi:({setupMain:n})=>Cl(e,{position:"inline",anchor:"body",onMount:a=>{const s=ss(OJ,{setupMain:n});return s.mount(a),s},onRemove:a=>{a==null||a.unmount()}}),createCrawlSheinChoiceUi:({setupMain:n})=>Cl(e,{position:"inline",anchor:"body",onMount:a=>{const s=ss(TJ,{setupMain:n});return s.mount(a),s},onRemove:a=>{a==null||a.unmount()}})})),EJ=Te({__name:"EarthContentUi",props:{setupMain:{type:Function,required:!0}},setup(e){return e.setupMain(),(r,n)=>(G(),Le(To))}});async function Il(){var t;let e=fn(window,"__INIT_DATA.globalData",null);if(!e){const r=await RY(),n=(t=r==null?void 0:r[0])==null?void 0:t.result;e=fn(n,"result.data.Root.fields.dataJson",null)}if(!e)try{I("script").each((r,n)=>{const a=I(n).html();if(a.includes("window.context=")){let s=a.trim();return s=s.substring(s.indexOf("window.contextPath,")+19,s.length-2),s=Mu.parse(s),e=fn(s,"result.data.Root.fields.dataJson",null),!1}else if(a.includes("window.__INIT_DATA=")){let s=a.substring(a.indexOf("window.__INIT_DATA=")+19);s=s.trim();for(let o=s.length-1;o>=0&&s.substring(o,o+1)===";";o--)s=s.substring(0,o+1);return s=JSON.parse(s),e=fn(s,"globalData",null),!1}})}catch(r){window.console.error(r),e=null}return e}async function $J(){const e=[],t=await Il();if(!t)return window.console.error("get1688DetailPageWindowGlobalData fail in function getUserChooseSkuInfo"),e;const r=t.skuModel.skuInfoMap,n=t.offerBaseInfo.offerId;if(!r||!n)return window.console.error("get1688DetailPageWindowGlobalData fail in function getUserChooseSkuInfo"),e;const a=t.orderParamModel.orderParam.flow||"general";if(I(".order-has-select-button").length>0)I(".order-has-select-button")[0].click(),I(".selected-list-wrapper").length?I(".selected-list button.expandedBtn").length>0&&I(".selected-list button.expandedBtn")[0].click():I(".order-has-select-button")[0].click();else if(I(".list-btn").length>0)I(".list-btn button.expandedBtn")[0].click();else if(I(".sku-prop-module-name").length===1&&I(".sku-prop-module-name").text()==="采购量"&&I(".next-input-group input").length>0)return window.console.log("采购量"),Number(I(".next-input-group input").val())===0||e.push({quantity:I(".next-input-group input").val(),specId:"",flow:a,offerId:n}),e;const s=I(".selected-list-wrapper .selected-item-wrapper");return s.length===0?await LJ():(s.each((o,i)=>{const l=I(i).find(".name").text();I(i).find(".children-wrapper").each((c,d)=>{const p=I(d).find(".children-wrapper-name").attr("title"),m=(I(d).find(".next-input-group input")||I(i).find(".next-input-group input")).val();window.console.log("skuName",l),window.console.log("quantity",m),window.console.log("skuNameSub",p);const h=p?`${l}&gt;${p}`:l;if(!m||!h)return!0;e.push({quantity:m,specId:r[h].specId,flow:a,offerId:n})})}),window.console.log("skuInfo",e),e)}async function RJ(){const e=[],t=I(".gyp-order-list-wrap tr.next-table-row");if(!t.length)return e;const r=I(".gyp-order-list-wrap"),n=await Il();if(!n)return window.console.error("get1688DetailPageWindowGlobalData fail in function getUserChooseGypSkuInfo"),e;const a=n.skuModel.skuInfoMap,s=n.offerBaseInfo.offerId;if(!a||!s)return window.console.log("getSkuInfoMapByWindowInitData false"),e;const o=n.orderParamModel.orderParam.flow||"general";let i=0,l=!1,u=4;return r.find("th").each((c,d)=>{I(d).text()==="颜色"?i=c:I(d).text()==="规格"?l=c:I(d).text()==="数量"&&(u=c)}),t.each((c,d)=>{let p=I(d).find("td").eq(i).text();const b=I(d).find("td").eq(u).find("input").val(),m=l!==!1?I(d).find("td").eq(l).text():"";if(p=m?`${p};${m}`:p,!b||!p)return!0;window.console.log(p),window.console.log(a),e.push({quantity:b,specId:a[p].specId,flow:o,offerId:s})}),window.console.log("skuInfo",e),e}async function LJ(){const e=[],t=I(".list-table.show-all tr.next-table-row");if(!t.length)return e;const r=await Il();if(!r)return window.console.error("get1688ItemWindowInitData fail in function getUserChooseSkuInfo2"),e;const n=r.skuModel.skuInfoMap,a=r.offerBaseInfo.offerId;if(!n||!a)return window.console.error("get1688ItemWindowInitData fail in function getUserChooseSkuInfo2"),e;const s=r.orderParamModel.orderParam.flow||"general";return t.each((o,i)=>{let l=I(i).find(".specification-cell span").attr("title");const u=I(i).find(".next-input-group input").val(),c=I(i).find(".children-wrapper-name").attr("title");if(l=c?`${l}&gt;${c}`:l,!u||!l)return!0;e.push({quantity:u,specId:n[l].specId,flow:s,offerId:a})}),e}const MJ={class:"earth-wxt-purchase-button-box"},DJ=["src"],NJ=oa(Te({name:"PurchaseDetailUi",inheritAttrs:!1,__name:"PurchaseDetailUi",setup(e){const t=ee(!1),r=ee(""),n=ee();let a=()=>{};const s={};async function o(){var m;let c=[];if(I("#submitOrder").length?c=Object.values(s):I(".gyp-order-list-wrap").length>0?c=await RJ():c=await $J(),!c||!c.length){St({offset:400,type:"error",message:"采购数量不能为0"});return}let d="";await LB({tag:pv,tabUrl:window.location.href}).then(h=>{d=h.tsGlobal}).catch(()=>{d=""});const p="https://erp.91miaoshou.com/";let b=`${p}find_source/purchase`;d&&(b+=`?ts=${d}`),r.value=b,t.value=!0,a=async()=>{var f;const{getSpecIdAndSkuInfoMap:h,getPriceInfo:v}=g4,y=await Il(),T=y.offerBaseInfo.sellerLoginId,S=h(y),w=v(),k={type:"alibabaPurchase",data:{userChooseSkuInfo:c,specIdAndSkuInfoMap:S,priceInfo:w,sellerLoginId:T}};window.console.log("postData",k),(f=n.value)==null||f.contentWindow.postMessage(JSON.stringify(k),p)},(m=n.value)!=null&&m.contentWindow&&i()}function i(){a==null||a()}async function l(){const c=await Il();window.console.log("globalData: ",c);const d=c.skuModel.skuInfoMap||{},p=c.offerBaseInfo.offerId,b=c.orderParamModel.orderParam.flow||"general",h=I("#skuSelection").find(".feature-item"),v=Is((y,T)=>{var E,N;const S=y.parents(".expand-view-item"),C=(E=u().find("span.label-name").text())==null?void 0:E.trim(),k=(N=S.find(".v-flex span.item-label").text())==null?void 0:N.trim(),f=[C,k].filter(Boolean).join("&gt;"),O=d[f];if(O){const $=S.find("input.ant-input-number-input").val();Number($)>0?s[f]={quantity:$,specId:O.specId,flow:b,offerId:p}:delete s[f],window.console.log(s)}else if(T.find(".feature-item-label").length===1&&T.find(".feature-item-label").text()==="购买数量"){const $=S.find("input.ant-input-number-input").val();Number($)>0?s[f]={quantity:$,specId:"",flow:b,offerId:p}:delete s[f],window.console.log(s)}},200);h.length&&h.each((y,T)=>{I(T).find(".expand-view-list").length&&(I(T).on("click",".ant-input-number-group-addon",S=>{const w=I(S.currentTarget);v(w,I(T))}),I(T).on("change","input.ant-input-number-input",S=>{const w=I(S.currentTarget);v(w,I(T))}))})}function u(){const d=I("#skuSelection").find(".feature-item");return I(d[0]).find("button.sku-filter-button.active")}return Kt(()=>{I("#submitOrder").length&&l()}),(c,d)=>{const p=yn,b=dA;return G(),Le(To,null,{default:ie(()=>[K("div",MJ,[ue(p,{type:"primary",size:"large",class:"purchase-button",onClick:o},{default:ie(()=>[...d[1]||(d[1]=[K("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAOCAYAAADABlfOAAAABHNCSVQICAgIfAhkiAAAAVZJREFUOE99lIFRwzAMResJYIRsQJmgdALKBIQN2KBlAroBYQLYgI7QjtAJKBOE/3xSTk6c+k7nRpaeZEluWsysvu+XOmpSSt/RRPpG37fSH+d8U+3AgD84S14E6LALej7RFwGdNYHKcaPDDwOetV/kvBwF+pP+JgaMyRVQObYGzJlIPBOu7Jl/6ver5CC5q4EHqIAYvkvIYqPscMpLZ9QPwFH6e9NRmio4Q+XUaXs24IM3QXoacmEPgE46boFfFZwC8CS7NgAJRHbrAKYcK8lVMNBWRnvJr+QpQHf63nJlB4dbNfpNifwW1JsRPNFUvz4K6tMbIM9gaFwB5szOgX8ZMDeQQLFRc+BOxtR7aJIBsR8mQrDWg41HqgBbBswsKz8Cf1EB+Cb9zoHsteGPYLobgWT9aLritV2FhqsdzDCOmAfkiPoRZLKqbz+AF+M/DnuuE30k/wM9CMEPhlzcrwAAAABJRU5ErkJggg=="},null,-1),ot(" 妙手代发采购 ",-1)])]),_:1}),d[2]||(d[2]=K("div",{class:"purchase-tip"}," 一键下单，自动关联并同步采购单至货代 ",-1))]),ue(b,{modelValue:_(t),"onUpdate:modelValue":d[0]||(d[0]=m=>lr(t)?t.value=m:null),size:"50%","append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1,class:"earth-wxt-find-source-purchase-drawer"},{default:ie(()=>[K("iframe",{ref_key:"frameRef",ref:n,src:_(r),style:{width:"100%",height:"100%",border:"none"},class:"earth-wxt-find-source-purchase-iframe",onLoad:i},null,40,DJ)]),_:1},8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-df6217b6"]]),FJ={id:"J_purchaseOrderFixPanel",class:"purchase-order-fixed-panel-container"},BJ={class:"purchase-search-same-box"},jJ={class:"same-goods-box"},UJ={class:"left-side"},qJ=["src"],VJ=["src"],HJ={class:"right-side"},zJ=["src"],WJ=["src"],KJ={class:"platform-shop-link-box"},GJ={class:"purchase-order-info-box"},YJ={class:"order-info-box"},JJ={class:"info-base-line"},XJ={class:"content"},QJ={class:"info-base-line"},ZJ={class:"content"},eX={class:"info-base-line"},tX={class:"content"},rX={class:"info-base-line"},nX={class:"content"},aX={class:"info-base-line"},sX={class:"content"},oX={class:"order-info-box-footer"},iX={class:"goods-info-box"},lX={class:"info-base-line"},uX={key:0,class:"content lighter"},cX={class:"info-base-line"},dX={class:"content lighter"},fX={class:"info-base-line-flex-box"},pX={class:"info-base-line"},hX={class:"content lighter"},mX={class:"info-base-line item-total"},gX={class:"content"},vX={class:"info-base-line-flex-box"},yX={class:"info-base-line"},bX={class:"content lighter"},wX={class:"info-base-line"},_X={class:"content lighter"},SX={class:"info-base-line"},TX={class:"content"},xX={class:"info-base-line"},CX={class:"content"},kX=oa(Te({name:"PurchaseOrderFixedPanelUi",__name:"PurchaseOrderFixPanelUi",props:{tabId:{}},setup(e){const t=e,r=ee(!0),{state:n}=Ys(At(t.tabId),{}),a=W(()=>n.value.purchasePlatform||""),s=W(()=>fn(n.value,"purchaseItem",{})),o=W(()=>n.value.consignee||{}),i=W(()=>{const{picUrl:h}=s.value;return h&&pY(h)}),l=W(()=>cP.reduce((h,v)=>{const{searchTypes:y}=v;return y.includes("searchByTitle")&&h.titleOptions.push(v),y.includes("searchByImage")&&h.imageOptions.push(v),h},{titleOptions:[],imageOptions:[]}));function u(){const{shopNick:h,platformShopName:v}=n.value;return h||v||""}function c(){const{mobile:h,telephone:v}=o.value;return h||v||""}function d(){r.value=!r.value}function p(h){const v=h.clientX,y=h.clientY,T=document.getElementById("J_purchaseOrderFixPanel"),S=T.getBoundingClientRect().left||0,w=T.getBoundingClientRect().top||0;document.addEventListener("mousemove",C),document.addEventListener("mouseup",k);function C(f){let O=f.clientX-v+S,E=f.clientY-y+w;O=O<0?0:O,E=E<0?0:E,T.computedStyleMap().get("width");const N=T.offsetWidth,$=T.offsetHeight,L=document.documentElement.clientWidth,B=document.documentElement.clientHeight;O+N>L&&(O=L-N),E+$>B&&(E=B-$),T.style.top=`${E}px`,T.style.left=`${O}px`,f.preventDefault()}function k(){document.removeEventListener("mouseup",k),document.removeEventListener("mousemove",C)}}async function b(){try{const{fullname:h,fullAddress:v}=o.value,y=`${h||""} ${c()||""} ${v||""}`;await navigator.clipboard.writeText(y),St.success("复制成功")}catch(h){window.console.error("复制失败:",h)}}function m(h,v){const y=h8(cP,{platform:h});let T=y==null?void 0:y.sameItemUrl;v==="searchByTitle"&&(T+=encodeURIComponent((s.value.title||s.value.goodsName||"").trim())),ei({url:T,selected:!0}).then(S=>{Ze.setItem(At(S.id),{...n.value,searchType:v,tabId:S.id})})}return(h,v)=>{const y=CA,T=xA,S=IA,w=wA,C=yn;return G(),Le(To,null,{default:ie(()=>[K("div",FJ,[K("div",{class:"header-box",onMousedown:p},[v[2]||(v[2]=ot(" 商品信息 ",-1)),K("div",{class:"toggle-visible-button",onClick:Pt(d,["prevent"])},He(_(r)?"收起":"展开"),1)],32),K("div",BJ,[K("div",jJ,[K("div",UJ,[ue(T,{placeholder:"查找标题同款",onChange:v[0]||(v[0]=k=>m(k,"searchByTitle"))},{default:ie(()=>[(G(!0),le(pt,null,$r(l.value.titleOptions,k=>(G(),Le(y,{key:k.platform,value:k.platform},{default:ie(()=>[K("img",{src:k.logo,class:"search-same-option-logo"},null,8,qJ),ot(" "+He(k.name),1)]),_:2},1032,["value"]))),128))]),_:1}),ue(T,{placeholder:"查找图片同款",onChange:v[1]||(v[1]=k=>m(k,"searchByImage"))},{default:ie(()=>[(G(!0),le(pt,null,$r(l.value.imageOptions,k=>(G(),Le(y,{key:k.platform,value:k.platform},{default:ie(()=>[K("img",{src:k.logo,class:"search-same-option-logo"},null,8,VJ),ot(" "+He(k.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),K("div",HJ,[ue(w,{href:s.value.url,target:"_blank",type:"primary",underline:!1},{default:ie(()=>[ue(S,{placement:"left-start",width:"auto"},{reference:ie(()=>[K("img",{class:"purchase-item-image",src:i.value},null,8,zJ)]),default:ie(()=>[K("img",{src:i.value,style:{width:"300px",height:"300px"}},null,8,WJ)]),_:1})]),_:1},8,["href"])])]),K("div",KJ,[ue(w,{href:s.value.url,type:"primary",underline:!1},{default:ie(()=>[...v[3]||(v[3]=[ot(" 查看我的店铺宝贝 ",-1)])]),_:1},8,["href"]),["taobao","tmall"].includes(a.value)?(G(),Le(w,{key:0,href:`https://pub.alimama.com/portal/v2/pages/promo/goods/index.htm?q=${encodeURIComponent(s.value.purchaseUrl)}`,type:"primary",underline:!1},{default:ie(()=>[...v[4]||(v[4]=[ot(" 淘宝联盟查找 ",-1)])]),_:1},8,["href"])):Oe("",!0)])]),qt(K("div",GJ,[K("div",YJ,[v[11]||(v[11]=K("div",{class:"title"}," 订单信息 ",-1)),v[12]||(v[12]=K("div",{class:"purchase-tip"},[ot(" 重要提示：若当前商品不是你想下单的商品，请回到软件的 “一键下单”重新保存新的商品链接去下单。"),K("br"),ot(" 下单过程中请勿新开任何窗口去下单，否则数据会丢失 ")],-1)),K("div",JJ,[v[5]||(v[5]=K("div",{class:"label"}," 店铺 ",-1)),K("div",XJ,He(_(n).isCb===1?"跨境":"本土")+" "+He(_(n).siteName)+" "+He(u()),1)]),K("div",QJ,[v[6]||(v[6]=K("div",{class:"label"}," 平台订单号 ",-1)),K("div",ZJ,He(_(n).platformOrderSn),1)]),K("div",eX,[v[7]||(v[7]=K("div",{class:"label"}," 收货人 ",-1)),K("div",tX,He(o.value.fullname),1)]),K("div",rX,[v[8]||(v[8]=K("div",{class:"label"}," 电话 ",-1)),K("div",nX,He(c()),1)]),K("div",aX,[v[9]||(v[9]=K("div",{class:"label"}," 地址 ",-1)),K("div",sX,He(o.value.fullAddress),1)]),K("div",oX,[ue(C,{onClick:b},{default:ie(()=>[...v[10]||(v[10]=[ot(" 复制收件人信息 ",-1)])]),_:1})])]),K("div",iX,[K("div",lX,[v[13]||(v[13]=K("div",{class:"label"}," 规格 ",-1)),s.value.skuSubOriginalName?(G(),le("div",uX,He(s.value.skuSubCnName)+" ("+He(s.value.skuSubOriginalName)+") ",1)):Oe("",!0)]),K("div",cX,[v[14]||(v[14]=K("div",{class:"label"}," SKU ",-1)),K("div",dX,He(s.value.platformOuterSkuId),1)]),K("div",fX,[K("div",pX,[v[15]||(v[15]=K("div",{class:"label"}," 单价 ",-1)),K("div",hX," ￥ "+He(s.value.discountedPrice),1)]),K("div",mX,[v[16]||(v[16]=K("div",{class:"label"}," 数量 ",-1)),K("div",gX,He(s.value.itemTotal),1)])]),K("div",vX,[K("div",yX,[v[17]||(v[17]=K("div",{class:"label"}," 运费 ",-1)),K("div",bX," ￥ "+He(_(n).freightPrice),1)]),K("div",wX,[v[18]||(v[18]=K("div",{class:"label"}," 实付款 ",-1)),K("div",_X," ￥ "+He(_(n).orderPayment),1)])]),K("div",SX,[v[19]||(v[19]=K("div",{class:"label"}," 买家备注 ",-1)),K("div",TX,He(_(n).orderRemark),1)]),K("div",xX,[v[20]||(v[20]=K("div",{class:"label"}," 商家备注 ",-1)),K("div",CX,He(_(n).venderRemark),1)])])],512),[[Sr,_(r)]])])]),_:1})}}}),[["__scopeId","data-v-106ef379"]]),IX=DN(e=>({createEarthContentUi:({setupMain:a})=>Cl(e,{position:"inline",anchor:"body",onMount:s=>{const o=ss(EJ,{setupMain:a});return o.mount(s),o},onRemove:s=>{s==null||s.unmount()}}),createPurchaseDetailUi:()=>Cl(e,{position:"inline",anchor:()=>{let a=document.querySelector(".order-button-children .order-button-children-list");return a||(a=document.querySelector("#chromePlugin")),a},append:"after",onMount:a=>{const s=ss(NJ);return s.mount(a),s},onRemove:a=>{a==null||a.unmount()}}),createPurchaseOrderFixedPanelUi:a=>Cl(e,{position:"inline",anchor:"body",onMount:s=>{const o=ss(kX,{...a});return o.mount(s),o},onRemove:s=>{s==null||s.unmount()}})}));var Op={exports:{}},AX=Op.exports,RP;function OX(){return RP||(RP=1,(function(e){(function(t){function r(C,k){var f=(C&65535)+(k&65535),O=(C>>16)+(k>>16)+(f>>16);return O<<16|f&65535}function n(C,k){return C<<k|C>>>32-k}function a(C,k,f,O,E,N){return r(n(r(r(k,C),r(O,N)),E),f)}function s(C,k,f,O,E,N,$){return a(k&f|~k&O,C,k,E,N,$)}function o(C,k,f,O,E,N,$){return a(k&O|f&~O,C,k,E,N,$)}function i(C,k,f,O,E,N,$){return a(k^f^O,C,k,E,N,$)}function l(C,k,f,O,E,N,$){return a(f^(k|~O),C,k,E,N,$)}function u(C,k){C[k>>5]|=128<<k%32,C[(k+64>>>9<<4)+14]=k;var f,O,E,N,$,L=1732584193,B=-271733879,F=-1732584194,R=271733878;for(f=0;f<C.length;f+=16)O=L,E=B,N=F,$=R,L=s(L,B,F,R,C[f],7,-680876936),R=s(R,L,B,F,C[f+1],12,-389564586),F=s(F,R,L,B,C[f+2],17,606105819),B=s(B,F,R,L,C[f+3],22,-1044525330),L=s(L,B,F,R,C[f+4],7,-176418897),R=s(R,L,B,F,C[f+5],12,1200080426),F=s(F,R,L,B,C[f+6],17,-1473231341),B=s(B,F,R,L,C[f+7],22,-45705983),L=s(L,B,F,R,C[f+8],7,1770035416),R=s(R,L,B,F,C[f+9],12,-1958414417),F=s(F,R,L,B,C[f+10],17,-42063),B=s(B,F,R,L,C[f+11],22,-1990404162),L=s(L,B,F,R,C[f+12],7,1804603682),R=s(R,L,B,F,C[f+13],12,-40341101),F=s(F,R,L,B,C[f+14],17,-1502002290),B=s(B,F,R,L,C[f+15],22,1236535329),L=o(L,B,F,R,C[f+1],5,-165796510),R=o(R,L,B,F,C[f+6],9,-1069501632),F=o(F,R,L,B,C[f+11],14,643717713),B=o(B,F,R,L,C[f],20,-373897302),L=o(L,B,F,R,C[f+5],5,-701558691),R=o(R,L,B,F,C[f+10],9,38016083),F=o(F,R,L,B,C[f+15],14,-660478335),B=o(B,F,R,L,C[f+4],20,-405537848),L=o(L,B,F,R,C[f+9],5,568446438),R=o(R,L,B,F,C[f+14],9,-1019803690),F=o(F,R,L,B,C[f+3],14,-187363961),B=o(B,F,R,L,C[f+8],20,1163531501),L=o(L,B,F,R,C[f+13],5,-1444681467),R=o(R,L,B,F,C[f+2],9,-51403784),F=o(F,R,L,B,C[f+7],14,1735328473),B=o(B,F,R,L,C[f+12],20,-1926607734),L=i(L,B,F,R,C[f+5],4,-378558),R=i(R,L,B,F,C[f+8],11,-2022574463),F=i(F,R,L,B,C[f+11],16,1839030562),B=i(B,F,R,L,C[f+14],23,-35309556),L=i(L,B,F,R,C[f+1],4,-1530992060),R=i(R,L,B,F,C[f+4],11,1272893353),F=i(F,R,L,B,C[f+7],16,-155497632),B=i(B,F,R,L,C[f+10],23,-1094730640),L=i(L,B,F,R,C[f+13],4,681279174),R=i(R,L,B,F,C[f],11,-358537222),F=i(F,R,L,B,C[f+3],16,-722521979),B=i(B,F,R,L,C[f+6],23,76029189),L=i(L,B,F,R,C[f+9],4,-640364487),R=i(R,L,B,F,C[f+12],11,-421815835),F=i(F,R,L,B,C[f+15],16,530742520),B=i(B,F,R,L,C[f+2],23,-995338651),L=l(L,B,F,R,C[f],6,-198630844),R=l(R,L,B,F,C[f+7],10,1126891415),F=l(F,R,L,B,C[f+14],15,-1416354905),B=l(B,F,R,L,C[f+5],21,-57434055),L=l(L,B,F,R,C[f+12],6,1700485571),R=l(R,L,B,F,C[f+3],10,-1894986606),F=l(F,R,L,B,C[f+10],15,-1051523),B=l(B,F,R,L,C[f+1],21,-2054922799),L=l(L,B,F,R,C[f+8],6,1873313359),R=l(R,L,B,F,C[f+15],10,-30611744),F=l(F,R,L,B,C[f+6],15,-1560198380),B=l(B,F,R,L,C[f+13],21,1309151649),L=l(L,B,F,R,C[f+4],6,-145523070),R=l(R,L,B,F,C[f+11],10,-1120210379),F=l(F,R,L,B,C[f+2],15,718787259),B=l(B,F,R,L,C[f+9],21,-343485551),L=r(L,O),B=r(B,E),F=r(F,N),R=r(R,$);return[L,B,F,R]}function c(C){var k,f="",O=C.length*32;for(k=0;k<O;k+=8)f+=String.fromCharCode(C[k>>5]>>>k%32&255);return f}function d(C){var k,f=[];for(f[(C.length>>2)-1]=void 0,k=0;k<f.length;k+=1)f[k]=0;var O=C.length*8;for(k=0;k<O;k+=8)f[k>>5]|=(C.charCodeAt(k/8)&255)<<k%32;return f}function p(C){return c(u(d(C),C.length*8))}function b(C,k){var f,O=d(C),E=[],N=[],$;for(E[15]=N[15]=void 0,O.length>16&&(O=u(O,C.length*8)),f=0;f<16;f+=1)E[f]=O[f]^909522486,N[f]=O[f]^1549556828;return $=u(E.concat(d(k)),512+k.length*8),c(u(N.concat($),640))}function m(C){var k="0123456789abcdef",f="",O,E;for(E=0;E<C.length;E+=1)O=C.charCodeAt(E),f+=k.charAt(O>>>4&15)+k.charAt(O&15);return f}function h(C){return unescape(encodeURIComponent(C))}function v(C){return p(h(C))}function y(C){return m(v(C))}function T(C,k){return b(h(C),h(k))}function S(C,k){return m(T(C,k))}function w(C,k,f){return k?f?T(k,C):S(k,C):f?v(C):y(C)}e.exports?e.exports=w:t.md5=w})(AX)})(Op)),Op.exports}var PX=OX();const LP=Sn(PX),EX="_m_h5_tk";async function MP(e=!1){const t={name:EX};e&&JS(t);let r="";const n=await uf(t);if(window.console.log("get1688MtopApiToken getAllCookie: ",n),n&&n.length){let a=n.find(s=>s.domain==="h5api.m.1688.com");a||(a=n.find(s=>s.domain.includes("1688.com"))),a&&(r=a.value)}return window.console.log("get1688MtopApiToken mTopApiToken: ",r),r!=null&&r.length?r=r.split("_")[0]:e||(r=await MP(!0),window.console.log(`get mtopApiToken by partitionKey:${r}`)),r}async function $X(e){const{apiPath:t,api:r,reqData:n,needRetryWhenMTopTokenInvalid:a=!0}=e,s="12574478",o=await MP();if(!o&&(window.console.log("get mtopApiToken fail"),!a))return je.failResult("获取1688信息失败，请重新登录或者滑动验证码验证");window.console.log("mTopApiToken: ",o);const i=JSON.stringify(n),l=new Date().getTime(),c=LP([o,l,s,i].join("&")),d={jsv:"2.7.4",appKey:s,t:l,sign:c,api:r,ecode:1,v:"1.0",type:"json",valueType:"string",dataType:"jsonp",preventFallback:!0,trackerConfig:"[object Object]"},p=[];for(const h in d){const v=d[h];p.push(`${h}=${v}`)}const b=`https://h5api.m.1688.com/h5/${t}/1.0/?${p.join("&")}`;window.console.log(b),await CB(b);const m=await Dr({url:b,method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:eo.stringify({data:i}),credentials:"include"});if(window.console.log(m),!m){window.console.log("mtop response empty");return}return m}async function RX(e){const t=await $X({api:"mtop.1688.trade.receiveaddress.addReceiveAddress",apiPath:"mtop.1688.trade.receiveaddress.addreceiveaddress",reqData:e});return window.console.log("fetchSaveAddressMtopApi res: ",t),t}let DP=class{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{});he(this,"csrf_token")}async initAddress(t){const r=await nr();this.tabId=r.id;try{this.purchaseOrderInfo=t,await this._checkLogin(),this._setPurchaseOrderInfoToStorage();const{consignee:n}=this.purchaseOrderInfo;if(!jY(n.mobile))return ht.alert("解密收件人信息失败",{title:"提示"}),Promise.reject("解密收件人信息失败");const a=await this._validateAddress(n);await this._processAddress(a)}catch(n){return window.console.error("initAddress: ",n),Promise.reject(n)}}_setPurchaseOrderInfoToStorage(){Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}async _checkLogin(){const t=await ig();if(!Ut(t)){window.console.log(`buyerName from cookie: ${t}`),this.purchaseOrderInfo.purchaseOrderBuyer=t,this._setPurchaseOrderInfoToStorage();return}if((await Dr({url:"https://work.1688.com/?_path_=buyer2017Base/2017buyerbase_index/buyer_2017indexpage",method:"GET",dataType:"text"})).match("enableWwSsoPluginLogin")){window.alert("您还没有登录1688账号，请登录后刷新页面！");const a=window.location.href.toLowerCase();return window.location.href=`https://login.1688.com/member/signin.htm?spm=a261y.7663282.0.d3.6b1b40855ChrFG&Done=${encodeURIComponent(a)}`,Promise.reject("您还没有登录1688账号，请登录后刷新页面！")}const n=window.setInterval(async()=>{if(this.purchaseOrderInfo.purchaseOrderBuyer){clearInterval(n);return}let a=I("ali-bar-user-info span").attr("title");const s=await Il();s&&(a=s.offerBaseInfo.buyerLoginId),a||(a=await ig()),this.purchaseOrderInfo.purchaseOrderBuyer=a,this._setPurchaseOrderInfoToStorage()},1e3)}async _validateAddress(t){const r=await lg(),n=/data-csrftoken="(.*?)"/.exec(r);this.csrf_token=n?n[1]:"";const a=r.match(/<tr class="single-address"[^>]*data-address='(.*)'[^>]*>/gi);if(a){for(const s of a){const o=this._parseAddressInfoFromAddressHtml(s);if(o&&o.mobile===t.mobile&&o.fullName===t.fullname&&t.fullAddress.includes(o.address)){t.deliverId=o.addressId,t.tradeAddress={},t.tradeAddress.address=o.address,t.tradeAddress.addressCode=o.addressCode,t.tradeAddress.addressCodeText=o.addressCodeText,t.tradeAddress.addressId=o.addressId,t.tradeAddress.fullName=o.fullName,t.tradeAddress.isDefault=o.isDefault,t.tradeAddress.isLatest=o.isLatest,t.tradeAddress.mobile=o.mobile,t.tradeAddress.postCode=o.postCode;break}}if(!t.deliverId&&a.length>=100){const s=a.pop(),o=this._parseAddressInfoFromAddressHtml(s);o.addressId&&await this.deleteAddress(o.addressId)}}return t}_parseAddressInfoFromAddressHtml(t){const r=/data-address='(.*?)'/.exec(t);if(!r)return null;let n=document.createElement("div");n.innerHTML=r[1];const a=n.textContent;return n=null,a?JSON.parse(a):!1}deleteAddress(t){return Rn({url:"https://wuliu.1688.com/foundation/ajax/operate_receive_address.jsx?_input_charset=UTF-8",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},xhrFields:{withCredentials:!0},data:{addressId:t,operateType:"delete",_csrf_token:this.csrf_token}})}async _processAddress(t){const r=Ip(t,this.purchaseOrderInfo.consigneeSuffixMap,this.purchaseOrderInfo.purchasePlatform),{consignee:n}=this.purchaseOrderInfo,a=`${r.fullname} ${r.mobile} ${r.fullAddress}`,s=await Dr({url:"https://wuliu.1688.com/address/ajax/address_parse.jsx",method:"GET",dataType:"text",params:{callback:"jQuery17209390225001079777_1538036004820",address:encodeURIComponent(a),_csrf_token:this.csrf_token,_input_charset:"utf-8"}}),o=/jQuery17209390225001079777_1538036004820\((.*)\)/.exec(s),i=JSON.parse(o[1]),{purchaseSetting:l}=this.purchaseOrderInfo;if(l.purchase1688MobileStyleVirtualNum&&l.purchase1688MobileStyleVirtualNum>=1&&r.virtualNumberSuffix&&this.purchaseOrderInfo.originalMobileType==="virtual"&&(r.mobile+=`-${r.virtualNumberSuffix}`),!i.data.districtCode||i.data.city&&!i.data.city.includes(r.city.substr(0,2))||!i.data.district.includes(r.city.substr(0,2))&&!i.data.district.includes(r.county.substr(0,2)))this.validateAddressFromDb().then(u=>{if(!u)return Promise.reject("get address code from db fail");u.personalName=r.fullname,u.mobileNO=r.mobile,u.addressDetail=r.address,this.saveAddress(u,n.deliverId)});else{const[u,c]=await this.get1688TownCode(i.data.districtCode,r);i.data.townCode=u,i.data.town=c,i.data.personalName=r.fullname,i.data.mobileNO=r.mobile,i.data.addressDetail=r.address,this.saveAddress(i.data,n.deliverId)}}async validateAddressFromDb(){const{consignee:t}=this.purchaseOrderInfo,r={province:t.province,city:t.city,county:t.county},n=await Jt({url:"/order/purchase_order/get_tb_area_ids",method:"GET",params:r}),a={personalName:t.fullname,mobileNO:t.mobile,addressDetail:t.address};a.province=n.province,a.provinceCode=n.provinceId,a.city=n.city,a.cityCode=n.cityId,a.district=n.county,a.districtCode=n.countyId,a.divisionZip=n.zip?n.zip:"000000",a.addressCode=n.cityId;let s=n.cityId;n.countyId>0&&(s=n.countyId,n.countyId.length===6&&(a.addressCode=n.countyId));const[o,i]=await this.get1688TownCode(s,t);if(a.townCode=o,a.town=i,Ut(a.townCode)){const u=await this.get1688ChildrenAddressList(a.cityCode)||[];for(const c in u){const d=u[c];if(d.l<=4)break;if(d.a===a.districtCode){a.districtCode="",a.district="",a.townCode=d.a,a.town=d.n;break}}return a}else return a}get1688TownCode(t,r){return this.get1688ChildrenAddressList(t).then(n=>{if(!n)return window.console.log("获取城镇列表失败"),["",""];let a="",s="";return I.each(n,(o,i)=>{if(i.n===r.county||r.address.includes(i.n)||i.n===r.town)return a=i.a,s=i.n,!1}),a===""?["",""]:[a,s]})}get1688ChildrenAddressList(t){return Dr({url:"https://wuliu.1688.com/address/ajax/get_children_address_list.jsx",method:"GET",dataType:"text",params:{_input_charset:"UTF-8",callback:"jQuery17209390225001079777_1538036004820",code:t,_:1546587656739}}).then(r=>{const n=/jQuery17209390225001079777_1538036004820\((.*)\)/.exec(r);if(!n||n.length<2)return!1;try{return JSON.parse(n[1]).data}catch(a){return window.console.log(a),!1}})}async saveAddress(t,r){const n=!(+r>0),a=n?"add":"update",s=this.buildAddressPath(t),o=this.buildAddressCodeText(s);let i;try{const l=await Rn({url:"https://wuliu.1688.com/foundation/ajax/operate_receive_address.jsx?_input_charset=UTF-8",method:"POST",dataType:"text",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},xhrFields:{withCredentials:!0},data:{addressPath:s,isNew:n,fullName:t.personalName.length===1?`${t.personalName} *`:t.personalName,address:t.addressDetail,addressCode:t.addressCode?t.addressCode:t.districtCode,mobile:t.mobileNO,phone:"",phoneCode:"",phoneNumber:"",phoneSubCode:"",postCode:t.divisionZip?t.divisionZip:"000000",addressCodeText:o,provinceCode:t.provinceCode,cityCode:t.cityCode,areaCode:t.districtCode?t.districtCode:"",townCode:t.townCode?t.townCode:"",provinceName:t.province,cityName:t.city,areaName:t.district?t.district:"",townName:t.town?t.town:"",isDefault:!0,isInland:!0,addressNamePath:`${t.province} ${t.city} ${t.district}`?t.district:` ${t.town}`?t.town:"",addressId:r,bizType:"",isLatest:!0,operateType:a,_csrf_token:this.csrf_token}});i=JSON.parse(l)}catch(l){window.console.log(l),i=null}try{if(!(i!=null&&i.data)){const u={addressCode:t.addressCode?t.addressCode:t.districtCode,addressCodeText:o,townCode:t.townCode?t.townCode:"",townName:t.town?t.town:"",address:t.addressDetail,countryCode:"CN",fullName:t.personalName.length===1?`${t.personalName} *`:t.personalName,post:t.divisionZip?t.divisionZip:"000000",mobilePhone:t.mobileNO,phone:"",default:!0,temp:!1,overseasAddress:!1};n||(u.id=r),i=await RX(u)}let l=r;i.data&&(l=i.data.addressId),this.purchaseOrderInfo.consignee.deliverId=l,this._setPurchaseOrderInfoToStorage(),this.autoAddAddressCallback(n)}catch(l){window.console.log("修改地址失败: ",l)}}autoAddAddressCallback(t=!1){t&&window.location.href.includes("cart.1688.com/cart.htm")&&window.location.reload()}buildAddressPath(t){const r=[];return t.provinceCode&&r.push({code:t.provinceCode,name:t.province,level:1}),t.cityCode&&r.push({code:t.cityCode,name:t.city,level:2}),t.districtCode&&r.push({code:t.districtCode,name:t.district,level:3}),t.townCode&&r.push({code:t.townCode,name:t.town,level:4}),r}buildAddressCodeText(t){const r=[];let n="";if(t){for(const a of t){if(a.level===4)break;r.push(a.name)}n=r.join(" ")}return n}};class LX{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject("no purchase order info.");await jt();try{await new DP().initAddress(this.purchaseOrderInfo).catch(n=>{window.console.error("initAddress: ",n)}),this._buildEvent()}catch(r){window.console.error(r)}}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_buildEvent(){I(()=>{I('#ice-container button[class*="bottom-bar--submitBtn--"]').on("click",t=>{const r=new Set;I("#ice-container").find('div[class*="cart--content--"] label[class*="item--checkbox--"]').find("input:checked").each((n,a)=>{const s=I(a).parents('div[class*="shop-container--container--"]').find(".J_WangWang").data("nick");r.add(s)}),r.size>1&&(St.error({message:"仅支持单个店铺同时结算，请保证当前结算的商品来源同一个店铺。",duration:0,showClose:!0}),t.preventDefault(),t.stopPropagation())})})}}function MX(){return new LX().init()}const ia=async({appHost:e,url:t,header:r,responseText:n,responseType:a,errorMsg:s=""})=>{const o={appHost:e,url:t,header:r,responseType:a,errorMsg:AP(s),userAgent:zY(),chromeVersion:HY(),pluginName:Wn.runtime.getManifest().name,pluginVersion:Wn.runtime.getManifest().version,encodeType:"base64",failResponse:["fail","match_fail"].includes(a)?AP(n):""};NB(o)},NP=async({purchaseOrderInfo:e})=>{const{consignee:t={},appInfo:r={}}=e,n={appName:r.appName??"",province:t.province??"",city:t.city??"",county:t.county??"",town:t.town??""},a=["市","自治区","省"];for(const o in a){const i=a[o];if(n.province.includes(i)){n.province=n.province.replace(i,"");break}}I.inArray(n.province,["台湾","港澳"])>=0&&(n.province=t.city??"",n.city=t.county??"",n.county=t.town??""),n.province.includes("广东")&&n.city.includes("中山")&&(n.county="中山市",n.town=t.county??"");const s=await UB({valueMap:n}).catch(o=>{window.console.log("getTbAreaIdsFromDb fail",o)});return je.isFail(s)?Promise.reject("获取地址的行政区域出错"):!je.isSuccess(s)&&typeof s=="string"&&s.includes("<head>")?(ht.alert("与软件失联：请重新采购下单"),Promise.reject("与软件失联:请重新采购下单")):{...e,tbAreaInfo:s}};function Y0(e){const t=e,r=t.purchaseItem,n=r.skuId,a=t.skuIdAndManualSelectedSkuSubNameMap||{},s=r.platformSkuId||"";let o=[],i=[];const l=gP(r);if(Ut(l)||(l.sourceColorName&&i.push(l.sourceColorName),l.sourceSizeName&&i.push(l.sourceSizeName)),window.console.log("采购弹窗货源链接配置的sku映射(purchaseItem.skuMap): ",r.skuMap),window.console.log("尝试找到的当前产品规格映射的货源SKU信息: ",l),Ut(i)&&!Ut(a)){const u=a[n]||a[s],c=u==null?void 0:u.manualSelectedSkuSubName;c&&(i=c.split("|"))}return window.console.log("自动勾选的sku: ",i),i.length>0&&(o=xp(i)),o.length>0?o:!1}async function J0(e,t={}){if(t.isBindBuyerBtnEvent||(t.isBindBuyerBtnEvent=!1),t.isExecuteAutoTriggerBuyBtn||(t.isExecuteAutoTriggerBuyBtn=!1),t.isBindBuyerBtnEvent||(DX(e),t.isBindBuyerBtnEvent=!0),!s(e))return;const r=await BX(e),n=e.purchaseSetting||{},a=Number(n.isAutoTriggerBuyBtn)===1;r&&a&&(await Je(2e3),jX(e));function s(o){return t.isExecuteAutoTriggerBuyBtn?(window.console.log("already execute autoTriggerBuyBtn"),!1):(t.isExecuteAutoTriggerBuyBtn=!0,Ut(o)||!dc(o)?!1:o.purchasePlatform===Ho&&I(document).find(".do-remind").length>0?(ht.alert("商品正在等待开团",{title:"提示",type:"error",showCancelButton:!1}),!1):!0)}}function DX(e){const t=e.purchasePlatform;t===Ho&&I(document).on("click",".do-purchase, .J_OrderAction_Btn_DoApplyConsign, .J_OrderAction_Btn_DoPurchase",()=>{Pp(e)}),t===Qa&&(I(".J_LinkBuy").length>0?I(document).on("click",".J_LinkBuy",()=>{Pp(e)}):window.console.log("taobao buy btn not found"),I.each(I(document).find('button span[class=""]'),(r,n)=>{const a=I(n).text()||"";if(["立即购买","领券购买"].includes(a))return I(document).on("click",I(n).parent(),()=>{Pp(e)}),!0})),t===ho&&I("#J_LinkBuy").length>0&&I(document).on("click","#J_LinkBuy",()=>{Pp(e)})}function Pp(e){const t=FP(e);window.console.log("我被触发点击了",t),LY(e,t)}function FP(e){let t=[];const{purchasePlatform:r}=e;switch(r){case sf:t=FX();break;case Qa:case ho:t=aB(),t.length||(t=iB());break;case Ho:t=NX();break}let n=t.length>0?t.join("|"):!1;return n&&(n=n.replace(/（/g,"("),n=n.replace(/）/g,")"),n=n.replace(/：/g,":"),n=n.replace(/【/g,"["),n=n.replace(/】/g,"]"),n=n.replace(/，/g,","),n=n.replace(/；/g,";")),n}function NX(){const e=[],r=I("#skuSelection").find(".feature-item");if(r.length){let n;r.each((s,o)=>{I(o).find(".transverse-filter").length&&(n=I(o).find(".transverse-filter"))});const a=n==null?void 0:n.find("button.sku-filter-button");a!=null&&a.length&&a.each((s,o)=>{if(I(o).hasClass("active")){const i=I(o).find("span.label-name").text();e.push(I.trim(i))}})}else I(document).find(".unit-detail-spec-operator").length>0?I(document).find(".unit-detail-spec-operator").each((n,a)=>{const s=I(a).find("a");if(s.hasClass("selected")){let o=s.attr("title");o||(o=s.find(".vertical-img-title").text()),e.push(I.trim(o))}}):I(document).find(".prop-item-inner-wrapper").each((n,a)=>{if(I(a).hasClass("active")){const s=I(a).find("div.prop-name").attr("title");e.push(I.trim(s))}});if(r.length){let n;r.each((s,o)=>{I(o).find(".expand-view-list").length&&(n=I(o).find(".expand-view-list"))});const a=n==null?void 0:n.find(".expand-view-item");a!=null&&a.length&&a.each((s,o)=>{if((Number(I(o).find("input.ant-input-number-input").val())||0)>0){const l=I(o).find(".v-flex span.item-label").text();e.push(I.trim(l))}})}else I(document).find(".table-sku").length>0?I(document).find(".table-sku").find("tbody > tr").each((n,a)=>{const s=I(a),o=s.find(".amount-input").val(),i=s.find(".name");let l;i.find("img").length>0?l=I.trim(i.find("img").attr("alt")):l=I.trim(i.text()),o>0&&e.push(l)}):I("#sku-count-widget-wrapper .sku-item-wrapper").each((n,a)=>{const s=I(a).find(".sku-item-name").text().trim();I(a).find(".next-input-group-auto-width input").val()>0&&e.push(s)});return I(document).find(".J_SkuSelector_1st_PropItem").each((n,a)=>{if(!I(a).hasClass("active-sku-item"))return!0;e.push(I(a).attr("data-sku-1st-prop-name"))}),I(document).find(".J_SkuSelector_2nd_PropItem").each((n,a)=>{const s=I(a).find(".J_SkuItem_AmountInput");if(I.trim(s.val()).toNumber(0)>0)return e.push(I(a).attr("data-sku-2nd-prop-name")),!1}),e}function FX(){const e=[];return I(document).find("div[sku-spec-value-selected=1]").each((t,r)=>{const n=I.trim(I(r).attr("aria-label"));e.push(n)}),e}function BX(e){const t=FP(e),r=mP(e),n=SP(r),a=e.purchaseSetting||!1;let s=!1;window.console.log("selectedSkuSubName",t),window.console.log("purchaseSkuSubName",r),window.console.log("similarPurchaseSkuSubName",n);const o=Number(a.isAutoTriggerBuyBtn)===1;return!Sp(r,t)&&!Sp(n,t)?o&&St.error({message:"SKU自动匹配不成功，请手动选择",duration:0,showClose:!0}):(s=!0,o&&St.success({message:"SKU自动匹配成功",duration:0,showClose:!0})),s}async function jX(e){try{const t=e.purchaseSetting||{},r=e.purchasePlatform;if(!(Number(t.isAutoTriggerBuyBtn)===1))return null;if(r===sf)I(document).find("div[data-active]").each((a,s)=>{if(I.trim(I(s).text()).includes("确定"))return I(s).trigger("click"),!1});else if([Qa,ho].includes(r))U0()?I(".sku-btn.gobuy").length>0?I(".sku-btn.gobuy").trigger("click"):I(".bottom-bar .buy").length>0&&I(".bottom-bar .buy").trigger("click"):q0()?wa(I(".sku-wrap .ok")[0],"click"):I(document).find(".J_LinkBuy").length>0?I(document).find(".J_LinkBuy")[0].click():I(document).find("#J_LinkBuy").length>0?I(document).find("#J_LinkBuy")[0].click():(window.console.log("taobao buy btn not found"),I.each(I(document).find('button span[class=""]'),(a,s)=>{const o=I(s).text()||"";if(["立即购买","领券购买"].includes(o))return I(s).parent()[0].click(),!0}));else if(r===Ho){const a=new RegExp(`(${["立即订购","代发下单","立即下单","下单"].join("|")})`,"g");await Je(1e3);const s=I(document).find(".do-purchase"),o=I(document).find(".J_OrderAction_Btn_DoApplyConsign"),i=I(document).find(".J_OrderAction_Btn_DoPurchase"),l=I(document).find(".order-normal-button"),u=I(document).find("#submitOrder .action-button-list .action-button");s.length>0?s[0].click():o.length>0?o[0].click():i.length>0?i[0].click():l.length>0?l.each((c,d)=>{const p=I(d).text()||"";if(["快速铺货享专属价","加铺货单享专属价"].includes(p))return!0;if(a.test(p))return I(d).click(),!1}):u.length&&u.each((c,d)=>{const p=I(d).text()||"";if(["快速铺货享专属价","加铺货单享专属价"].includes(p))return!0;if(a.test(p))return I(d).find("button").click(),!1}),I(document).find(".order-button-tip-content").length>0&&UX(e)}}catch(t){window.console.error(t),ht.alert("自动购买失败，请手动购买",{title:"提示",type:"error"})}}function UX(e){const t=qX(e);let r="",n=!1;return t&&e.purchaseItem.itemTotal<t&&(n=!0,r=`有起批量限制，最低起批量是：${t}`),n&&ht.alert(r,{title:"提示",type:"error"}),!n}function qX(e){const t=e.purchasePlatform;let r=0;switch(t){case Ho:r=zS();break}return window.console.log("minPurchaseNum",r),r}function VX(e){const t=e.purchaseSetting||!1;return Number(t.isAutoTriggerBuyBtn)===1}function HX(e){return/(\.coupangcdn\.com|\/\/cf\.shopee\.)/i.test(e)?WX(e):new Promise((t,r)=>{const n=new Image;n.setAttribute("crossOrigin","Anonymous"),n.src=e,n.onload=function(){const a=document.createElement("canvas");a.width=n.width,a.height=n.height,a.getContext("2d").drawImage(n,0,0,n.width,n.height);const o=n.src.substring(n.src.lastIndexOf(".")+1).toLowerCase(),i=a.toDataURL(`images/${o}`);t({base64Code:i,width:n.width,height:n.height})},n.onerror=a=>{r(a)}})}function zX(e,t){const r=e.split(","),n=r[0].match(/:(.*?);/)[1],a=atob(r[1]);let s=a.length;const o=new Uint8Array(s);for(;s--;)o[s]=a.charCodeAt(s);return new File([o],t,{type:n})}function WX(e){return new Promise(t=>{jB({url:e}).then(r=>{t({base64Code:r.base64Code?`data:image/png;base64,${r.base64Code}`:""})})})}class KX{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{});he(this,"selectedContent","");he(this,"isFirstCheckAddress",!0);he(this,"hasTryAutoSelectAddress",!1)}async init(){const t=await nr();this.tabId=t==null?void 0:t.id,await this._waitOrderGroupListReady(),await this._initPurchaseOrderInfo(),await jt(),this._initSelectedSkuInfo(),this._buildEvent(),this._initAddress()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}async _waitOrderGroupListReady(){const{promise:t,resolve:r,reject:n}=wm();let a=200;for(;a>0;a--)if(await Je(50),I(".order-group-list").length>0){window.console.log("purchase1688ConfirmV2 init success"),r(!0);break}return n("purchase1688ConfirmV2 init fail"),t}async _initPurchaseOrderInfo(){if(this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject("no purchase order info.");window.console.log("purchaseOrderInfo: ",this.purchaseOrderInfo);const t=I(".offer-link").text();t&&(this.purchaseOrderInfo.purchaseItem.title=t,await this._setPurchaseOrderInfoToStorage())}async _initSelectedSkuInfo(){const t=await this._getSkuInfoByOrderView();t&&(window.console.log("initSelectedSkuInfo",t),this.purchaseOrderInfo.confirmSelectedSkuInfo=t.map(r=>({specId:r})),this._setPurchaseOrderInfoToStorage())}async _getSkuInfoByOrderView(){const t=await this._getOrderView(),r=/"specId":"([^"]+)"/g,n=Array.from(t.matchAll(r),a=>a[1]);return window.console.log("_getOrderView matches: ",n),n}async _getOrderView(){try{let t=null;I("script").each((n,a)=>{const s=I(a).html();if(s.includes("__INITIAL_PARAMS__ = ")){let o=s.substring(s.indexOf("__INITIAL_PARAMS__ = ")+21);return o=o.replace(/;\n(\s)*/g,""),window.console.log("initData1",o),o=JSON.parse(o),o.fromWhere="confirmOrder",window.console.log("initData2",o),t=o,!1}});const r=I("input[name=_csrf_token]").attr("value");return await Dr({url:"https://order.1688.com/order/make_order_view.jsx?_input_charset=utf-8",method:"POST",dataType:"text",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:eo.stringify({_csrf_token:r,smartGeneralQueryParam:JSON.stringify(t)})})}catch(t){window.console.error("_getOrderView fail: ",t)}}_buildEvent(){this._checkPurchaseOrderCount(),this._processPurchaseOrderInfo(),setInterval(()=>{this._rebuildPurchaseOrderInfo()},500),setInterval(()=>{const t=I(".address-content").text();t&&this.selectedContent!==t&&(window.console.log("selectedContent change",this.selectedContent),!I(".ant-modal-content").length&&!I(".J_realMobile").length&&(this.selectedContent=t,window.console.log("selectedContent change to check",this.selectedContent),this._checkAddress(!1)))},1e3),this._bindPurchasePlatformOrderingBtnEvent()}async _initAddress(){window.console.log("purchaseOrderInfo.purchaseSetting",this.purchaseOrderInfo.purchaseSetting),await Je(3e3),this._checkAddress(!0)}_checkPurchaseOrderCount(){I(".order-group-container").length>1&&ht.alert(`
          <strong style="color:red; font-size: 18px;">温馨提示：</strong>
          <br>
          当前结算的商品属于多个店铺，将会产生多笔订单
        `,{dangerouslyUseHTMLString:!0})}async _processPurchaseOrderInfo(){const t=fc(this.purchaseOrderInfo,"，"),r=document.querySelector(".leave-message-textarea q-textarea"),n=r==null?void 0:r.shadowRoot;if(n){const a=n.querySelector(".q-textarea textarea");if(a){const s=new InputEvent("input",{inputType:"insertText"});a.value+=t,a.dispatchEvent(s)}else console.error("q-textarea not found in Shadow Root")}else console.error("Shadow Root not found");this.purchaseOrderInfo.pluginName&&(await Je(500),I(".commit-container").append(`
        <div
          style="
            width: 370px;
            text-align: left;
            background-color: yellow;
            color: red;
            font-size: 16px;
            font-weight: 600;
            padding: 3px;
            margin-top: 20px;
          "
        >
          ${this.purchaseOrderInfo.pluginName}提示：提交订单且提示关联成功后您可以暂时不支付，待全部订单下完后再统一支付
        </div>
      `))}_rebuildPurchaseOrderInfo(){var i;const t=I(".shop-title").text().trim();this.purchaseOrderInfo.purchaseOrderSeller=t||"",this.purchaseOrderInfo.purchasePlatform=Ho;const r=I(".total-amount-wrapper .amount-inner"),n=I(".q-inputnumber-wrap").eq(0).find('input[type="text"]');if(!r.length&&!n.length)return;const a=(r==null?void 0:r.text().trim().replace(",","").replace("￥",""))||"0",s=Js(a),o=(i=n==null?void 0:n.val())==null?void 0:i.trim();this.purchaseOrderInfo.purchaseOrderPayment=s,this.purchaseOrderInfo.purchaseItem.purchaseNum=o,this.purchaseOrderInfo.purchaseItem.purchasePrice=Number((s/o).toFixed(2)),this._setPurchaseOrderInfoToStorage(),this._viewProfit()}_viewProfit(){const[t,r]=TP(this.purchaseOrderInfo),n=I(".J_purchaseProfit");n&&n.length?n.html(`<span>${r}</span>`):I(".commit-container").append(`
        <strong
          class="J_purchaseProfit"
          style="
            display: inline-block;
            height: 60px;
            line-height: 60px;
            background-color: yellow;
            color: red;
            padding: 0 20px;
            font-size: 18px;
          "
        >
          <span>${r}</span>
        </strong>
      `)}async autoSelectAddress(){if(this.hasTryAutoSelectAddress)return;this.hasTryAutoSelectAddress=!0;let t,r=0,n;function a(){t&&(clearInterval(t),t=null)}try{let s=function(){let b;return I(".address-container").find(".address-actions").find(".address-action").each((m,h)=>{if(I(h).text().includes("更改地址"))return b=I(h),!1}),b},o=function(){let b;n.find(".receive-address-list").find(".address-item").each((m,h)=>{const v=I(h).find(".address-name").text().replace(/\s+/g,""),y=I(h).find(".address-mobile").text().replace(/\s+/g,""),T=I(h).find(".address-body").text().replace(/\s+/g,"");if(!v||!y||!T)return!0;if(v===c&&y===d&&T===p)return b=I(h),!1}),b?(b.trigger("click"),window.console.log("自动选中地址！！！！！！！！"),i()):ht.alert("匹配地址失败，请手动选择地址")},i=function(){let b;n.find(".ant-modal-footer").find("button.ant-btn").each((m,h)=>{if(I(h).text().replace(/\s+/g,"").includes("确定"))return b=I(h),!1}),b?(b.trigger("click"),window.console.log("自动确定地址！！！！！！！！")):ht.alert("匹配地址失败，请手动选择地址")};const l=s(),u=this.purchaseOrderInfo.consignee||{},c=(u.fullname||"").replace(/\s+/g,""),d=(u.mobile||u.telephone||"").replace(/\s+/g,""),p=(u.fullAddress||"").replace(/\s+/g,"");if(!l||!c||!d||!p)return;t=setInterval(()=>{r++,r>=20&&a(),n=I(".ant-modal.receive-address-list-modal"),n&&(a(),o())},200),l.trigger("click")}catch{a()}}async _checkAddress(t=!1,r=!0,n=2){if(I(".address-place").length<=0&&n>=0)return await Je(500),window.console.log("delay check address"),this._checkAddress(t,r,n-1);window.console.log("isFirstCheck",t),this.isFirstCheckAddress&&(this.isFirstCheckAddress=!1,t=!0),I(".J_purchaseAddressTip").remove();let a="",s="";I(".address-place").length>0&&(a=s=I.trim(I(".address-place").text())),a||ht.alert("获取网页地址信息失败，请刷新重试");const o=this.purchaseOrderInfo.consignee.address,i=this._isOrderingAddress(a,o);if(this.purchaseOrderInfo.isMatchAddress=i,!i){t&&(this.autoSelectAddress(),HS(this.purchaseOrderInfo,JSON.stringify({purchaseAddress:a,orderAddress:o})));const p=`
        <div
          class="J_purchaseAddressTip"
          style="
            position:absolute;
            padding:5px 10px;
            font-size:24px;
            font-weight:600;
            z-index:1000000;
            left: 0px;
            color:#fff;
            background-color: #ff4400;
            border:1px solid red;
            box-shadow: 0 0 4px #000;
          "
        >
          ${Cp(this.purchaseOrderInfo.appInfo)}
          <a href="javascript:;" class="J_closePurchaseAddressTip" style="color:blue; margin-left: 20px;">
            X 关闭
          </a>
        </div>
      `;I(".address-container").css("position","relative").append(p),I(".J_closePurchaseAddressTip").unbind().click(()=>{I(".J_purchaseAddressTip").remove()})}const l=a.includes("地址需要升级，请重新编辑");t&&(this.purchaseOrderInfo.isClickAutoCommitOrder?(window.console.log("auto commit order repeat click"),I(".J_checkRelatePurchaseBtn").hide(),ht.alert("已自动提交过订单,无法继续提交订单。")):(V0(this.purchaseOrderInfo,i,l),window.console.log("auto commit order click"))),l&&t&&this._upgradeErrorAddress();const u=s,c=I(".address-subject span").eq(0).text(),d=I(".address-subject span").eq(1).text();return this._setPurchaseConsigneeInfo(u,c,d),i}_isOrderingAddress(t,r){t=t.replace(/\s+/g,""),r=r.replace(/\s+/g,""),window.console.log("orderAddress",r),window.console.log("purchaseAddress",t);const n=this.purchaseOrderInfo.consignee||{},{province:a}=n;return!a||!a.includes(t.substring(0,2))?!1:!!t.includes(r)}async _upgradeErrorAddress(){var t,r,n,a,s;(t=I(".edit-address .edit-address-info")[0])==null||t.click(),await Je(50),(r=I(".address-list li.checked .edit")[0])==null||r.click(),await Je(500),(n=I(".zone-editaddress .address-select-block input")[0])==null||n.click(),await Je(100),(a=I(".fui-address-chooser .fui-address-chooser-ok")[0])==null||a.click(),await Je(100),(s=I(".address-list-block .save")[0])==null||s.click()}_setPurchaseConsigneeInfo(t,r,n){const a=t.replace(/\s+/g,"");!a||!r||!n||(this.purchaseOrderInfo.purchaseOrderFullAddress=a,this.purchaseOrderInfo.purchaseOrderFullname=r,this.purchaseOrderInfo.purchaseOrderMobile=n,this._setPurchaseOrderInfoToStorage())}async _bindPurchasePlatformOrderingBtnEvent(){const t=I(".commit-container q-button");if(t.length>0){const r=document.querySelector(".button-wrapper");await Je(1500),this._overlaySubmitButton(r)}t.length>0&&I(document).on("click",".J_checkRelatePurchaseBtn",r=>{if(I(r.currentTarget).attr("disabled")&&I(r.currentTarget).attr("disabled")==="disabled")return window.console.log("提交订单按钮禁用"),null;this._triggerBtnEvent(t)})}_overlaySubmitButton(t){const r=document.createElement("div");r.className="overlay J_checkRelatePurchaseBtn",t.parentNode.appendChild(r),r.style.position="absolute",r.style.top=`${t.offsetTop}px`,r.style.left=`${t.offsetLeft}px`,r.style.width=`${t.offsetWidth}px`,r.style.height=`${t.offsetHeight}px`}async _triggerBtnEvent(t){var n;return window.console.log("触发虚拟按钮"),await cc(this.purchaseOrderInfo,"confirm_page",{checkAddressCallback:()=>this._checkAddress(!1,!1)})?((n=t[0])==null||n.click(),!0):!1}}function GX(){return new KX().init()}class YX{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{});he(this,"targetGuessProps",[]);he(this,"selectedSkuLoop",0);he(this,"_checkIsFinishSelectedSkuTimer",Is(async()=>{window.console.log("触发checkIsFinishSelectedSkuTimer"),this.selectedSkuLoop>0&&this.targetGuessProps.length<=this.selectedSkuLoop?(await Je(500),J0(this.purchaseOrderInfo)):this._checkIsFinishSelectedSkuTimer()},200))}async init(){const t=this._isMobileLinkToPc();if(t)return window.location.href=t,Promise.reject(t);const r=await nr();if(this.tabId=r==null?void 0:r.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));this._rebuildPurchaseTypeAttrTarget(),await jt();try{await this._initPurchaseOrderInfo(),this._autoSelectSku(),await new DP().initAddress(this.purchaseOrderInfo).then(()=>{this._checkIsFinishSelectedSkuTimer()}).catch(a=>{window.console.error("initAddress: ",a)}),this._setViewCartClickTargetSelf()}catch(n){window.console.error("purchase_order init error: ",n)}}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}_isMobileLinkToPc(){if(location.href.includes("m.1688.com")){const t=location.href.match(/offer\/(\d+)\.html/);if(t&&t.length>1)return`https://detail.1688.com/offer/${t[1]}.html`}return""}_rebuildPurchaseTypeAttrTarget(){I("a.od-pc-offer-tab-item").attr({target:"_self"});const t=I(".trade-type-menu-item").find("a");t.length>0&&t.attr({target:"_self"});const r=I(".active-type-for-bigMarket").find("a");r.length>0&&r.attr("target","_self");const n=I(".trade-tab-name-consign").find("a");n.length>0&&n.attr("target","_self")}async _initPurchaseOrderInfo(){const t=location.href;this.purchaseOrderInfo.purchaseItem.purchaseUrl=t;const r=I("#productTitle .title-content h1").text()||I(".mod-detail-title .d-title").text()||I(".title-text").text();this.purchaseOrderInfo.purchaseItem.title=r;const n=W0(t);n&&(this.purchaseOrderInfo.purchasePlatform=n);const a=G0(t);window.console.log("this.purchaseOrderInfo.purchaseOrderSeller",a),a&&(this.purchaseOrderInfo.purchaseOrderSeller=a),await this._setPurchaseOrderInfoToStorage(),window.console.log("_initPurchaseOrderInfo：",this.purchaseOrderInfo)}_setViewCartClickTargetSelf(){new MutationObserver(r=>{r.forEach(n=>{if(n.type==="childList"&&n.addedNodes.length>0){const a=I(n.addedNodes).find(".btn.btn-orange.view-cart");a.length>0&&a.attr("target")!=="_self"&&a.attr("target","_self")}})}).observe(document,{childList:!0,subtree:!0})}_filterSpecialString(t){return t.replace(/(\(|\)|（|）|【|】|\[|\]|，|,|；|;|《|》|<|>)*/g,"")}async _autoSelectSku(){var i;if(I(".mod-detail-offline-title").length>0&&I(".mod-detail-offline-title").text().includes("商品已下架"))return;const{purchaseItem:t}=this.purchaseOrderInfo,{skuSubName:r,itemTotal:n}=t,a=r&&Zs(r)?r.split(" "):[],s=xp(a,this._filterSpecialString);this.targetGuessProps=Y0(this.purchaseOrderInfo)||s,window.console.log("this.targetGuessProps",this.targetGuessProps),await Je(300),this.purchaseOrderInfo.hasSpecialCharW=!1;const o=this.targetGuessProps.length;for(let l=0;l<o;l++){const u=this.targetGuessProps[l].trim();let c=!1,d=!1;const b=I("#skuSelection").find(".feature-item");if(b.length){let m;b.each((v,y)=>{I(y).find(".transverse-filter").length&&(m=I(y).find(".transverse-filter"))});const h=m==null?void 0:m.find("button.sku-filter-button");h!=null&&h.length&&(c=!0,h.each((v,y)=>{var S;const T=(S=I(y).find("span.label-name").text())==null?void 0:S.trim();if(T.lastIndexOf("W")===T.length-1&&(this.purchaseOrderInfo.hasSpecialCharW=!0),this._filterSpecialString(T)===this._filterSpecialString(u))return window.console.log(`trigger click:${T}|${u}`),I(y).click(),d=!0,!1}))}else I("ul.list-leading li").length>1?(c=!0,I("ul.list-leading li").each((m,h)=>{let v=I(h).find("span").text().trim();if(v||(v=I(h).find("a").attr("title").trim()),v.lastIndexOf("W")===v.length-1&&(this.purchaseOrderInfo.hasSpecialCharW=!0),this._filterSpecialString(v)===this._filterSpecialString(u))return window.console.log(`trigger click:${v}|${u}`),I(h).find("div").click(),d=!0,!1})):I("div.prop-item-inner-wrapper").length&&(c=!0,I("div.prop-item-inner-wrapper").each((m,h)=>{let v=I(h).find("div.prop-name").text().trim();if(v||(v=I(h).find("div.prop-name").attr("title").trim()),v.lastIndexOf("W")===v.length-1&&(this.purchaseOrderInfo.hasSpecialCharW=!0),this._filterSpecialString(v)===this._filterSpecialString(u))return window.console.log(`trigger click:${v}|${u}`),I(h).find("div").click(),d=!0,!1}));if(this._setPurchaseOrderInfoToStorage(),await Je(100),this.selectedSkuLoop++,!(c&&!d))if((i=I(".obj-expand a")[0])==null||i.click(),b.length){let m;b.each((v,y)=>{I(y).find(".expand-view-list").length&&(m=I(y).find(".expand-view-list"))});const h=m==null?void 0:m.find(".expand-view-item");h!=null&&h.length&&h.each((v,y)=>{var w;const T=(w=I(y).find(".v-flex span.item-label").text())==null?void 0:w.trim();T.lastIndexOf("W")===T.length-1&&(this.purchaseOrderInfo.hasSpecialCharW=!0,this._setPurchaseOrderInfoToStorage());const S=this._filterSpecialString(T);for(let C=0;C<o;C++)if(S===this._filterSpecialString(this.targetGuessProps[C])){const k=I(y).find(".ant-input-number.ant-input-number-sm ~ .ant-input-number-group-addon .anticon-plus.enable");if(k.length){const f=Number(I(y).find("input.ant-input-number-input").val())||0,O=Number(n)||0;f<O&&k.click()}}})}else if(I(".table-sku tr").length>0)I(".table-sku tr").each((m,h)=>{const y=JSON.parse(I(h).attr("data-sku-config")).skuName;y.lastIndexOf("W")===y.length-1&&(this.purchaseOrderInfo.hasSpecialCharW=!0,this._setPurchaseOrderInfoToStorage());const T=this._filterSpecialString(y);for(let S=0;S<o;S++)T===this._filterSpecialString(this.targetGuessProps[S])&&I(h).find(".amount-input").focus().val(n).blur()});else{let m=".pc-sku-wrapper";I("#sku-count-widget-wrapper").length>0&&(m="#sku-count-widget-wrapper"),I(`${m} .sku-item-wrapper`).each((h,v)=>{const y=I(v).find(".sku-item-name").text().trim();y.lastIndexOf("W")===y.length-1&&(this.purchaseOrderInfo.hasSpecialCharW=!0,this._setPurchaseOrderInfoToStorage());for(let T=0;T<o;T++)if(this._filterSpecialString(y)===this._filterSpecialString(this.targetGuessProps[T].trim())){const S=I(v).find(".next-input-group-auto-width:not(.next-disabled) input");S==null||S.val(n),I(v).find(".next-input-group-auto-width input").length>0&&(wa(I(v).find(".next-input-group-auto-width input")[0],"input"),wa(I(v).find(".next-input-group-auto-width input")[0],"blur"))}})}}Ut(this.targetGuessProps)&&(I(".table-sku").length===0&&I(".amount-input").length>0?(this.selectedSkuLoop++,I(".amount-input").focus().val(n),I(".amount-input").blur()):I(".pc-sku-wrapper").length>0&&(this.selectedSkuLoop++,I(".sku-item-wrapper").find("input").val(n),I(".sku-item-wrapper").find("input").length>0&&(wa(I(".sku-item-wrapper").find("input")[0],"input"),wa(I(".sku-item-wrapper").find("input")[0],"blur")))),this._buildPurchaseToolInfo()}_buildPurchaseToolInfo(){this._buildColorName()}async _buildColorName(){let t=await n(this.tabId);t&&a();let r=I(".table-sku span.image").closest(".d-content");r.length||(r=I(".unit-detail-spec-operator").closest(".d-content")),r.length>0&&(r.prepend(`
          <div style="margin-left: 16px" class="od-sku-text-switch">
            <div class="J_odSkuTextSwitch od-sku-text-radio ${t?"od-radio-open":"od-radio-close"}">
              <div></div>
            </div>
            <div>${t?"关闭":"展开"}SKU文字</div>
          </div>
        `),r.find(".J_odSkuTextSwitch").on("click",async()=>{t=await n(this.tabId),t=t?0:1,Ze.setItem(`local:openColorName-${this.tabId}`,t?"1":"0"),I(".J_odSkuTextSwitch").siblings("div").html(`${t?"关闭":"展开"}SKU文字`),t?(I(".J_odSkuTextSwitch").addClass("od-radio-open").removeClass("od-radio-close"),a()):(I(".J_odSkuTextSwitch").removeClass("od-radio-open").addClass("od-radio-close"),I(".od-color-container").removeClass("od-color-container"),I(".J_appendColorName").remove())}));async function n(s){const o=await Ze.getItem(`local:openColorName-${s}`);return o===null||+o==1?1:0}function a(){I(".table-sku span.image,.unit-detail-spec-operator").each((s,o)=>{const i=I(o);if(i.find("img").length===0)return!0;const l=i.find("img").attr("alt");i.addClass("od-color-container"),i.find(".J_appendColorName").length>0?i.find(".J_appendColorName").html(l):i.append(`<div style="padding: 0 10px" class="J_appendColorName">${l}</div>`)})}}}function JX(){return new YX().init()}class XX{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();this.tabId=t==null?void 0:t.id,await this._initPurchaseOrderInfo(),await jt(),this._buildEvent()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}async _initPurchaseOrderInfo(){if(this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject("no purchase order info.")}_buildEvent(){this._get1688BizOrderId()}_get1688BizOrderId(){if(this.purchaseOrderInfo.purchaseOrderSn&&typeof(this.purchaseOrderInfo.purchaseSetting||{}).isAutoRelateWaitPay>"u")return;const t=window.location.href;let r=!1;const n=/orderId=(\d+)/.exec(t);if((!n||n.length<2)&&(r=!0),!r){const a=(n==null?void 0:n[1])||"";this.purchaseOrderInfo.purchaseOrderSn=a}return xo({status:r?"fail":"success",reason:r?"没有匹配到采购单号":""},this.purchaseOrderInfo),r?ht.alert("获取1688订单号失败，请手动关联订单"):(_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:!0}),!0)}}function QX(){return new XX().init()}class ZX{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){var n;const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt();const r=this.purchaseOrderInfo.searchType;if(r==="searchByImage")this.searchGoodsByImage();else if(r==="searchByTitle"&&!/keywords=[^& ]+/.test(window.location.href)){I(".sm-widget-input").val(((n=this.purchaseOrderInfo.purchaseItem)==null?void 0:n.title)||"");const a=I(".sm-widget-search a")[0],s=document.createEvent("HTMLEvents");s.initEvent("click",!1,!0),a.dispatchEvent(s)}if(!this.purchaseOrderInfo.purchaseItem)return Promise.reject(je.failResult({reason:"only search",code:"only search"}));this.buildGoPurchaseEvent()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}async searchGoodsByImage(){if(window.location.href.includes("youyuan/index.htm?tab=imageSearch"))return;const t=sa({text:"正在搜索同款商品..."}),r=this.purchaseOrderInfo.purchaseItem,n=(r==null?void 0:r.picUrl)||this.purchaseOrderInfo.searchImageUrl;window.console.log(`purchaseItem.picUrl: ${n}`);const a=new RegExp("https://.*alicdn.com.*/imgextra/i\\d/\\d*/");if(a.test(n))return o(je.successResult({fileKey:n.replace(a,"")}));try{const i=await Jt({url:"/open/common/getImgBase64Code",method:"GET",params:{url:n}});if(window.console.log("上传成功：",i),je.isFail(i)){i.reason&&ht.alert(i.reason,{type:"error"});return}if(!i.base64Code){ht.alert("获取图片数据失败",{type:"error"});return}s(i)}catch(i){window.console.log("searchGoodsByImage: ",i),o(je.failResult("上传失败"))}finally{t.close()}async function s(i){var l,u;try{const c=await $Y(i.base64Code),d=(l=c==null?void 0:c[0])==null?void 0:l.result,p=(u=d==null?void 0:d.data)==null?void 0:u.imageId;p?location.href=`https://s.1688.com/youyuan/index.htm?tab=imageSearch&imageId=${p}`:ht.alert("上传图片失败",{type:"error"})}catch{ht.alert("上传图片失败",{type:"error"})}}async function o(i){if(i.result!=="success"){ht.alert(i.reason,{type:"error"});return}await Je(1e3),location.href=`https://s.1688.com/youyuan/index.htm?tab=imageSearch&imageType=&imageAddress=${i.fileKey}&spm=`}}buildGoPurchaseEvent(){const t=["#sm-maindata li .sw-dpl-offer-photo",'#sm-maindata li a[t-click-item="title"]',"#sm-offer-list .common-offer-card","#sm-offer-list .img-container","#sm-offer-list .desc-container"];I(document).on("click",t.join(","),this.goPurchase.bind(this))}goPurchase(t){t.stopPropagation(),t.preventDefault();let r=I(t.currentTarget).closest("li").find('a[t-click-item="title"]').attr("href");r||(r=I(t.currentTarget).find("a").attr("href")),window.console.log("goodsUrl: ",r),r&&(r.indexOf("//")===0&&(r=location.protocol+r),ei({url:r,selected:!0}).then(n=>{Ze.setItem(At(n.id),{...this.purchaseOrderInfo,tabId:n.id})}))}}function eQ(){return new ZX().init()}class tQ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{});he(this,"csrf_token");he(this,"check1688shegouAgreementDomLoadTimerIndex")}async init(){const t=await nr();this.tabId=t==null?void 0:t.id,await this._initPurchaseOrderInfo(),await jt(),await this._getCsrfToken(),this._buildEvent()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}async _initPurchaseOrderInfo(){if(this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject("no purchase order info.")}_getCsrfToken(){lg().then(t=>{const r=/data-csrftoken="(.*?)"/.exec(t);this.csrf_token=r?r[1]:""})}_buildEvent(){this._bindPurchasePlatformPayBtnEvent(),this._get1688BizOrderId()}_bindPurchasePlatformPayBtnEvent(){const t=I(".pay-btn");if(t&&t.length>0){const r=t.clone(!0);r.attr("style","border-radius: 10px;").removeClass("pay-btn").addClass("J_checkRelatePurchaseBtn"),t.after(r),t.hide(),I(document).find(".J_checkRelatePurchaseBtn").off("click").on("click",async()=>{this._triggerBtnEvent(t)})}this._bind1688PayPageSwitchPayChannelEvent()}_bind1688PayPageSwitchPayChannelEvent(){if(!window.location.href.includes("1688.com/order/trade_flow.htm"))return null;this._render1688PayPageCheckRelatePurchaseBtn(),I(".channel-card").on("click",async()=>{await Je(100),this._render1688PayPageCheckRelatePurchaseBtn()})}_render1688PayPageCheckRelatePurchaseBtn(){const t=I(".pay-btn"),r=I(".J_checkRelatePurchaseBtn");r.text(t.text());let n={};t.prop("disabled")?n={"border-color":"#f3f3f3","background-color":"#f3f3f3",color:"#c5c5c5"}:n={"border-color":"#ff7300","background-color":"#ff7300",color:"white"},r.prop("disabled",t.prop("disabled")),r.css(n),I(".channel-card.selected").data("channel")==="shegou"&&this._check1688shegouAgreementDomLoadTimer()}_check1688shegouAgreementDomLoadTimer(){window.console.log("checkshegouAgreementDomLoadTimer");const t=I(document).find(".agreement-checkbox");if(this.check1688shegouAgreementDomLoadTimerIndex&&clearTimeout(this.check1688shegouAgreementDomLoadTimerIndex),!t.length){this.check1688shegouAgreementDomLoadTimerIndex=setTimeout(()=>{this._check1688shegouAgreementDomLoadTimer()},50);return}I(document).find('.agreement-checkbox input[type="checkbox"]').off("click").on("click",async()=>{await Je(100),this._render1688PayPageCheckRelatePurchaseBtn()})}async _triggerBtnEvent(t){return window.console.log("触发虚拟按钮"),await cc(this.purchaseOrderInfo,"confirm_page")?(t[0].click(),!0):!1}async _get1688BizOrderId(){var s;if(this.purchaseOrderInfo.purchaseOrderSn)return;this._deleteAddress((s=this.purchaseOrderInfo.consignee)==null?void 0:s.deliverId);const t=window.location.href;let r=!1,n="";const a=/orderId=(\d+)/.exec(t);return(!a||a.length<2)&&(r=!0),r||(n=(a==null?void 0:a[1])||"",this.purchaseOrderInfo.purchaseOrderSn=n),xo({status:r?"fail":"success",reason:r?"没有匹配到采购单号":""},this.purchaseOrderInfo),r?ht.alert("获取1688订单号失败，请手动关联订单"):(_a({purchaseOrderInfo:this.purchaseOrderInfo}),!0)}_deleteAddress(t){return Dr({url:"https://tradeconfig.1688.com/foundation/ajax/operate_receive_address.jsx?_input_charset=UTF-8",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:eo.stringify({addressId:t,operateType:"delete",_csrf_token:this.csrf_token})})}}function rQ(){return new tQ().init()}class nQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId");he(this,"currentAddCartProductId")}async init(){window.console.log("initPurchaseTaoBaoAddCartSucceedPage");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),await Je(1e3),this._buildEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}_buildEvent(){this._handleAddCartSucceed()}_handleAddCartSucceed(){I("#mc-menu-hd").length>0&&(I("#mc-menu-hd").attr({href:"javascript:void(0);",target:"_self"}),I("#mc-menu-hd").on("click",this._goTaoBaoAndTMallCart)),I(".op-cart").attr("href","javascript:void(0);"),I(".op-cart").on("click",this._goTaoBaoAndTMallCart),window.location.href.includes("cart.taobao.com/add_cart_succeed.htm")&&this._getProductIdByAddTaoBaoCart()}_goTaoBaoAndTMallCart(){let t="http://cart.taobao.com/cart.htm";this.currentAddCartProductId&&(t=`${t}?productId=${this.currentAddCartProductId}`),window.location.href=t}_getProductIdByAddTaoBaoCart(){const t=I("#J_ResultSummary").find(".op-return");if(t.length>0){const r=/id=(\d+)/i.exec(t.attr("href"));r!=null&&!this.currentAddCartProductId&&(this.currentAddCartProductId=r[1])}}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function aQ(){return new nQ().init()}class sQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId");he(this,"addressSelectContent","")}async init(){window.console.log("initPurchaseTaoBaoAddTempAddressPage");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),await this._initPurchaseOrderInfo(),await Je(500),this._initAddress(),Promise.resolve()):Promise.reject("no purchase order info.")}async _initPurchaseOrderInfo(){const t=new Date().getTime(),r=this.purchaseOrderInfo.useIframeAddAddressTimeForEmptyAddress;if(this.purchaseOrderInfo.useIframeAddAddress&&this.purchaseOrderInfo.isTaobaoEmptyAddress&&t-r<6e3&&(window.console.log("none address init, useIframeAddAddressTimeForEmptyAddress"),this.purchaseOrderInfo.useIframeAddAddressTime=t+1500),!this.purchaseOrderInfo.useIframeAddAddressTime)return Promise.reject(" no useIframeAddAddressTime ");const n=this.purchaseOrderInfo.useIframeAddAddressTime;return this.purchaseOrderInfo.useIframeAddAddressTime&&t-n>3e3?(window.console.log("no agent",this.purchaseOrderInfo.useIframeAddAddressTime,t),Promise.reject(" no agent ")):window.console.log("into full",t,this.purchaseOrderInfo.useIframeAddAddressTime),Promise.resolve()}async _initAddress(){try{this.purchaseOrderInfo=await NP({purchaseOrderInfo:this.purchaseOrderInfo}),await this._startAddAddress()}catch(t){return Promise.reject(t)}}async _startAddAddress(){const t=this.purchaseOrderInfo.consignee;return await this._addAddress(t)||ht.alert("添加收货地址失败"),Promise.resolve()}_addAddress(t,r=1){return new Promise(n=>{(async()=>{window.console.log("addAddress cycle",r);const a=this.purchaseOrderInfo.tbAreaInfo;let s="";t=Ip(t,this.purchaseOrderInfo.consigneeSuffixMap),a.useOtherCounty?s=t.fullAddress:(s=t.address,s.indexOf(a.town)===0&&(s=s.replace(a.town,"")));let o=t.county;a.county&&(window.console.log("change tbAreaInfo.county"),o=a.county);let i=t.town;i===""&&t.townAreaId===0&&["上海","北京","重庆","天津"].includes(a.province)&&(window.console.log("change spec tbAreaInfo.county"),i=t.county),s=s.replace(/农村淘宝/g,"村a淘宝").replace(/村小二/g,"村a小二").replace(/·/g,"."),s=s.replace(/[‘’“”]/g,""),s=I.trim(s),s.length<5&&(s=(t.town||a.town)+s,s.length<5&&(s=t.county+s));let l=t.fullname.length===1?`${t.fullname} `:t.fullname;l=I.trim(l);const u=`${t.mobile?t.mobile:t.telephone}`;I(".cndzk-entrance-division-header-click").click(),await Je(100),I(".cndzk-entrance-division-box-title-level").length>1&&(await Je(300),I(".cndzk-entrance-division-box-title-level")[0].click(),await Je(100)),await this._awaitAddressSelectChange(),await c(t.province.replace("市","")),await this._awaitAddressSelectChange(),await c(t.city),await this._awaitAddressSelectChange(),await c(o,t.county),await this._awaitAddressSelectChange(),await c(i);function c(p,b=""){if(Ut(p)){window.console.log("empty matchAddressFromDom",p);return}const m=I(".cndzk-entrance-division-box-content-tag");window.console.log("begin matchAddressFromDom",p,b);let h=!1;m.length>0&&I.each(m,(v,y)=>{const T=I.trim(I(y).text());if(window.console.log("loopTown",T,p,T.indexOf(p)),T.includes(p))return window.console.log("bingo",T,p),I(y).click(),h=!0,!1}),b&&!h&&b!==p&&m.length>0&&I.each(m,(v,y)=>{const T=I.trim(I(y).text());if(window.console.log("loopTown2",T,b,T.indexOf(b)),T.includes(b))return window.console.log("bingo2",T,b),I(y).click(),!1})}const d=function(p,b){p.value=b;const m=document.createEvent("Events");m.initEvent("change",!0,!0),p.dispatchEvent(m)};d(I(".cndzk-entrance-associate-area-textarea")[0],s.replace("^","")),d(I("#fullName")[0],l),d(I("#mobile")[0],u),await Je(100),!this._isSelectedAddressRegion(t)&&r&&(window.console.log(" not isSelectedAddressRegion to cycle",r),await this._addAddress(t,0)),I("#myForm button[type=submit]").click(),n(!0)})()})}_awaitAddressSelectChange(t=10){return new Promise(r=>{const n=setInterval(()=>{const a=I(".cndzk-entrance-division-box-content-tag").length,s=I(".cndzk-entrance-division-box-content").text();if(window.console.log("length",a,s),s&&a&&this.addressSelectContent!==s&&`暂不选择${this.addressSelectContent}`!==s)return this.addressSelectContent=s,clearInterval(n),r(!0),!0;if(t<0)return clearInterval(n),r(!0),!1;t--},50)})}_isSelectedAddressRegion(t){const r=I(".cndzk-entrance-division-header-click-input").text().split("/");if(r.length<1)return!1;window.console.log("isSelectedAddressRegion addressRegionText",r);const n=r[0]?r[0]:"";let a=r[1]?r[1]:"",s=r[2]?r[2]:"";const o=["北京","天津","重庆","上海"];return I.inArray(r[0].substr(0,2),o)>=0&&(a=r[2]?r[2]:"",s=r[3]?r[3]:""),!n.includes(t.province.substr(0,2))||a&&!a.includes(t.city.substr(0,2))||s&&!s.includes(t.county.substr(0,2))?!1:(window.console.log("isSelectedAddressRegion true"),!0)}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function oQ(){return new sQ().init()}class iQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId");he(this,"alipayNo")}async init(){window.console.log("initPurchaseTaoBaoAlipaySuccessPage");const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject("no purchase order info.");const{purchasePlatform:r}=this.purchaseOrderInfo;if(!["taobao","tmall"].includes(r))return Promise.resolve();try{await this._getAlipayNo(),await this._matchTaobaoMainOrder(),await this._savePurchaseOrderInfo()}catch(a){return this._handleError(a),Promise.reject(a)}return Promise.resolve()}_getAlipayNo(){return new Promise((t,r)=>{(async()=>{if(this._checkIsMobilePayPage()){let a=this._getBizOrderIdByMobilePayPage();if(a.indexOf(",")&&(a=a.split(",")[0]),this.purchaseOrderInfo.purchaseOrderSn=a,this.purchaseOrderInfo.purchaseOrderSn){setTimeout(t,500);return}}let n=await this._getAlipayNoByUrlRequestHistory();n&&(this.alipayNo=I.trim(n),setTimeout(t,500),window.console.log("getAlipayNoByUrlRequestHistory alipayNo",n)),!n&&this._checkIsFriendPayPage()?(n=this._getAlipayNoByFriendPayPage(),n||r("no alipay no."),this.alipayNo=I.trim(n),setTimeout(t,500)):n||(n=this._getAlipayNoBySelfPayUrl(),n||(n=this._getAlipayNoBySelfPayContent(),window.console.log("content alipay no.",n)),n||(n=await this._getAlipayNoByFriendPayInSelfPayContent(),window.console.log("content alipay no.",n)),n||r("no alipay no."),this.alipayNo=I.trim(n),this._resetAlipayNo(),setTimeout(t,500)),this.purchaseOrderInfo.alipayNo=I.trim(this.alipayNo),this._setPurchaseOrderInfoToStorage()})()})}_matchTaobaoMainOrder(){return new Promise((t,r)=>{(async()=>{if(this.purchaseOrderInfo.purchaseOrderSn){window.console.log("has purchaseOrderSn"),t(!0);return}try{const n=await this._getFirstPageTaobaoMainOrders();if(Ut(n)){r("获取淘宝订单列表失败");return}let a,s="";for(let o=0;o<n.length;o++){const i=n[o],l=await this._matchTaobaoMainOrderByAlipayNo(i),u=l==null?void 0:l.isMatchOrder;if(l.errorMsg&&(s=l.errorMsg),l.needVerify)break;if(u){a=i;break}}if(!a){r(s?`匹配淘宝订单失败，${s}`:"匹配淘宝订单失败");return}this.purchaseOrderInfo.purchaseOrderSn=a.id,this.purchaseOrderInfo.purchaseOrderStartTime=a.orderInfo.createTime,this.purchaseOrderInfo.purchaseOrderSeller=a.seller.nick,this.purchaseOrderInfo.purchaseOrderPayment=a.payInfo.actualFee,this._setPurchaseOrderInfoToStorage(),t(!0)}catch(n){r(n)}})()})}_checkIsMobilePayPage(){const t=window.location.href;return!!(t.includes("maliprod.alipay.com/w/trade_pay.do")||t.includes("maliprod.alipay.com/batch_payment.do"))}_getBizOrderIdByMobilePayPage(){const t=/pay_order_id=([^&]+)/.exec(window.location.href);return!t||!t[1]?!1:I.trim(t[1])}_getAlipayNoByUrlRequestHistory(){return new Promise(t=>{(async()=>{let r;const n=["https://cashiersa128.alipay.com/business/acceptPay.htm","https://cashierea179.alipay.com/business/acceptPay.htm","https://tbapi.alipay.com/trade/batch_payment.htm"],a=["trade_no","tradeNo","tradeList"];for(let s=0;s<n.length;s++){try{window.console.log("tryUrlParams alipayNo",n[s]);const o=await _P(n[s]);if(o)for(let i=0;i<a.length&&(r=kp(o.url)[a[i]],window.console.log("tryUrlParams alipayNo",a[i],r),!r);i++);}catch(o){console.error("Error in getUrlRequestHistory:",o)}if(r)break}t(r)})()})}_checkIsFriendPayPage(){return!!window.location.href.includes("alipay.com/peerpaycore/peerpayApply.htm")}_getAlipayNoByFriendPayPage(){const t=/data-bizno\s*=\s*"(.*)"\s*data-biztype/.exec(I("body").html());return!t||!t[1]?!1:(window.console.log("friend pay alipayNo ",t[1]),I.trim(t[1]))}_getAlipayNoBySelfPayUrl(){const t=window.location.href,r=/(outBizNo|tradeNo)=([a-zA-Z\d]+)/.exec(t);return!r||r.length<3?!1:r[2]}_getAlipayNoBySelfPayContent(){const t=/outBizNo:\s*"(.*)",/.exec(I("body").html());return!t||t.length<2?!1:t[1]}_getAlipayNoByFriendPayInSelfPayContent(){return new Promise(t=>{(async()=>{await this._checkDomRenderComplete();const r=/biz_no=(\d+)/.exec(document.body.innerHTML);return!r||r.length<2?t(!1):t(r[1])})()})}_checkDomRenderComplete(){return new Promise(t=>{(async()=>{await Je(1e3);let r=1;for(;!(r>10);){window.console.log("tryTimes",r);const n=document.body.innerHTML;if(n.includes("收银台正在加载中，请稍后")){await Je(1e3),r++;continue}if(n.includes("找人代付")||n.includes("biz_no"))return t(!0);r++}t(!1)})()})}_resetAlipayNo(){const t=/<!-- hihihi:\s*(.*)\s*-->/.exec(I("body").html()),r=!t||t.length<2?"":t[1];window.console.log(`possible alipayNo: ${r}`),this.alipayNo&&this.alipayNo.substr(0,1)==="P"&&this.alipayNo.length===19&&r&&(this.alipayNo=r),window.console.log(`alipayNo: ${this.alipayNo}`)}_getFirstPageTaobaoMainOrders(){return new Promise((t,r)=>{(async()=>{if(this.purchaseOrderInfo.purchaseOrderSn){window.console.log("has purchaseOrderSn"),t(!0);return}try{const n=await this._getFirstPageTaobaoMainOrdersByAsyncBought();t(n)}catch(n){r(n)}})()})}_getFirstPageTaobaoMainOrdersByAsyncBought(){return new Promise((t,r)=>{(async()=>{var i,l,u,c;const n="https://buyertrade.taobao.com/trade/itemlist/asyncBought.htm?action=itemlist/BoughtQueryAction&event_submit_do_query=1&_input_charset=utf8",a={};let s="",o={};try{const d={"content-type":"application/x-www-form-urlencoded;charset=UTF-8"};if(a.headers=d,s=await Rn({url:n,headers:d,method:"POST",data:{buyerNick:"",dateBegin:0,dateEnd:0,itemTitle:"",lastStartRow:"",logisticsService:"",options:0,orderStatus:"",pageNum:1,pageSize:15,queryBizType:"",queryOrder:"desc",rateStatus:"",refund:"",sellerNick:"",auctionTitle:"",prePageNo:1},xhrFields:{withCredentials:!0,responseType:"text"}}),!s){ia({appHost:(i=this.purchaseOrderInfo.appInfo)==null?void 0:i.host,url:n,header:a.headers,responseText:s,responseType:"fail"}),r("获取淘宝订单列表失败");return}const p=JSON.parse(s);if(p.url&&(ia({appHost:(l=this.purchaseOrderInfo.appInfo)==null?void 0:l.host,url:n,header:a.headers,responseText:s,responseType:"verify"}),r(`出现淘宝滑块，<a href="${p.url}" target="_blank">点此去滑动</a>`)),!p||!p.mainOrders){r("获取淘宝订单列表失败");return}o=p.mainOrders,ia({appHost:(u=this.purchaseOrderInfo.appInfo)==null?void 0:u.host,url:n,header:null,responseText:s,responseType:"success"}),t(o)}catch(d){window.console.log("getFirstPageTaobaoMainOrdersByAsyncBought error",d),ia({appHost:(c=this.purchaseOrderInfo.appInfo)==null?void 0:c.host,url:n,header:a.headers,responseText:s,responseType:"fail",errorMsg:d}),r("获取淘宝订单列表失败")}})()})}_matchTaobaoMainOrderByAlipayNo(t){return new Promise(r=>{(async()=>{var i,l,u,c,d,p;if(t.statusInfo.text!=="等待买家付款"){r({isMatchOrder:!1,errorMsg:""});return}const a=`https://buyertrade.taobao.com/trade/pay.htm?bizOrderId=${t.id}&bizType=200&ispayforanother=false`,s={url:a,headers:{"User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.2171.95 Safari/537.36"}};let o="";try{if(o=await Dr({...s,dataType:"text"}),!o){ia({appHost:(i=this.purchaseOrderInfo.appInfo)==null?void 0:i.host,url:a,header:null,responseText:o,responseType:"fail"}),r({isMatchOrder:!1,errorMsg:""});return}const b=/trade_no=([^&]+)/.exec(o),m=/window.location\s*=\s*"(.*)"/.exec(o);let h;if(m&&m[1]){const T=this._parseParam(m[1],"tradeList");T&&(h=decodeURIComponent(T))}if(window.console.log("locationTradeNo",h),(!b||b.length<2)&&!h)if(VY(o,"taobao")){ia({appHost:(l=this.purchaseOrderInfo.appInfo)==null?void 0:l.host,url:a,header:null,responseText:o,responseType:"verify"}),r({isMatchOrder:!1,errorMsg:`出现淘宝滑块，<a href="${a}" target="_blank">点此去滑动</a>，成功后返回当前页面刷新`,needVerify:!0});return}else{ia({appHost:(u=this.purchaseOrderInfo.appInfo)==null?void 0:u.host,url:a,header:null,responseText:o,responseType:"match_fail"}),r({isMatchOrder:!1,errorMsg:"请手动关联"});return}const v=b&&b[1]?b[1]:h;ia({appHost:(c=this.purchaseOrderInfo.appInfo)==null?void 0:c.host,url:a,header:null,responseText:o,responseType:"success"});let y=v&&v===this.purchaseOrderInfo.alipayNo;if(!y&&v.includes(";")&&(d=this.purchaseOrderInfo.alipayNo)!=null&&d.includes(";")){let T=v.split(";"),S=this.purchaseOrderInfo.alipayNo.split(";");T=T.sort(),S=S.sort(),T.toString()===S.toString()&&(y=!0)}if(!y){r({isMatchOrder:!1,errorMsg:""});return}r({isMatchOrder:!0,errorMsg:""})}catch(b){window.console.log("getFirstPageTaobaoMainOrdersByOrderListPage error",b),ia({appHost:(p=this.purchaseOrderInfo.appInfo)==null?void 0:p.host,url:a,header:s.headers,responseText:o,responseType:"fail",errorMsg:b}),r({isMatchOrder:!1,errorMsg:b})}})()})}_parseParam(t,r){const n=new RegExp(`(^|&)${r}=([^&]*)(&|$)`,"i"),a=t.substr(1).match(n);return a!==null?decodeURI(a[2]):null}async _savePurchaseOrderInfo(t=!0){var a;const r=this.purchaseOrderInfo;this._deleteTbAddress((a=r.consignee)==null?void 0:a.deliverId);let n=!1;if(Ut(r.purchaseOrderSn)&&(n=!0),xo({status:n?"fail":"success",reason:n?"没有匹配到采购单号":""},r),n)return ht.alert("关联淘宝订单失败，请手动关联");if(t){const s=await this._checkAddressIsChanged();if(s&&s.purchaseOrderFullAddress){const o=s.purchaseOrderFullAddress,i=`检测到提交地址变更，请重新采购并检查订单。显示地址:${this.purchaseOrderInfo.purchaseOrderFullAddress}, 变更后实际地址：${o}`;return ht.confirm(i,{confirmButtonText:"继续关联",cancelButtonText:"取消"}).then(()=>{this.purchaseOrderInfo.purchaseOrderFullAddress=o.replaceAll(" ",""),this.purchaseOrderInfo.purchaseOrderFullname=s.purchaseOrderFullname,this.purchaseOrderInfo.purchaseOrderMobile=s.purchaseOrderMobile,this._setPurchaseOrderInfoToStorage(),this._savePurchaseOrderInfo(!1)})}}await _a({purchaseOrderInfo:r}),r.autoFillOrderMemo&&this._addOrderMemo(r.purchaseOrderSn,r.autoFillOrderMemo)}async _deleteTbAddress(t){if(!t)return!1;const r=await os({url:"https://member1.taobao.com/member/fresh/deliver_address.htm",name:"_m_h5_tk"}).then(c=>c==null?void 0:c.value),n={deliverId:t},a=new Date().getTime(),s=JSON.stringify(n),o=Du({now:a,dataStr:s,cookie:r}),u=await Rn({url:"https://h5api.m.taobao.com/h5/mtop.taobao.mbis.deletedeliveraddressbyid/1.0/",method:"GET",params:{jsv:"2.4.2",appKey:"12574478",t:a,sign:o,api:"mtop.taobao.mbis.deletedeliveraddressbyid",v:"1.0",ecode:"1",needLogin:!0,timeout:2e4,dataType:"jsonp",type:"jsonp",data:s},xhrFields:{withCredentials:!0,responseType:"text"}});window.console.log("deleteTbAddress",u)}_checkAddressIsChanged(){return new Promise(t=>{(async()=>{let r=!1,n={};if(!this.purchaseOrderInfo.purchaseOrderFullAddress){t(!1);return}const a=new oB;this.purchaseOrderInfo.purchasePlatform===ho?r=!0:(n=await a.getTaoBaoPurchaseOrderInfo({purchaseOrderSn:this.purchaseOrderInfo.purchaseOrderSn,forceDetail:!0}),this.purchaseOrderInfo.purchasePlatform===Qa&&n.reason==="该订单平台是天猫"&&(r=!0)),r&&(n=await a.getTMallPurchaseOrderInfo({purchaseOrderSn:this.purchaseOrderInfo.purchaseOrderSn,forceDetail:!0}));const s=n.purchaseOrderInfo||{};if(window.console.log("checkAddressIsChanged",s.purchaseOrderFullAddress,this.purchaseOrderInfo.purchaseOrderFullAddress),!s.purchaseOrderFullAddress){t(!1);return}if(s.purchaseOrderFullAddress&&s.purchaseOrderFullAddress.replaceAll(" ","")===this.purchaseOrderInfo.purchaseOrderFullAddress.replaceAll(" ","")){t(!1);return}const o=Ap(this.purchaseOrderInfo.purchaseOrderFullAddress),i=s.purchaseOrderFullAddress.split(/\s+/);for(let l=0;l<i.length;l++){const u=Ap(i[l]);if(!o.includes(u)){t(s);return}}t(!1)})()})}async _getCookieValue(){const t="https://trade.taobao.com/trade/memo/update_buy_memo.htm";return new Promise(r=>{Promise.all([os({url:t,name:"_tb_token_"}).then(n=>n==null?void 0:n.value),os({url:t,name:"unb"}).then(n=>n==null?void 0:n.value)]).then(([n,a])=>{r({_tb_token_:n,unb:a})})})}_addOrderMemo(t,r){return new Promise(n=>{(async()=>{var c,d,p;const a=await this._getCookieValue();let s=await kP([r]);typeof s=="string"&&(s=JSON.parse(s));const o=s.urlGbkEncodeMap||{},i="https://trade.taobao.com/trade/memo/update_buy_memo.htm",l=`_tb_token_=${a._tb_token_}&event_submit_do_query=1&action=memo/UpdateBuyMemoAction&user_type=0&pageNum=1&isArchive=false&biz_order_id=${t}&buyer_id=${a.unb}&flag=1&memo=${o[LP(r)]||r}`;let u="";try{if(u=await Dr({url:i,headers:{"User-Agent":"Mozilla/5.0 (Windows NT 6.1; Win64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.2171.95 Safari/537.36","content-type":"application/x-www-form-urlencoded"},method:"POST",body:l,dataType:"text"}),!u){ia({appHost:(c=this.purchaseOrderInfo.appInfo)==null?void 0:c.host,url:i,header:null,responseText:u,responseType:"fail"}),n(!1);return}ia({appHost:(d=this.purchaseOrderInfo.appInfo)==null?void 0:d.host,url:i,header:null,responseText:u,responseType:"success"}),window.console.log("addOrderMemo"),n(!0)}catch(b){window.console.log("addOrderMemoFail",b),ia({appHost:(p=this.purchaseOrderInfo.appInfo)==null?void 0:p.host,url:i,header:null,responseText:u,responseType:"fail",errorMsg:b}),n(!1)}})()})}_handleError(t){if(this.purchaseOrderInfo){const r=t.message||t;return r&&r.includes("滑块")?ht.alert(r,{dangerouslyUseHTMLString:!0}):ht.alert("关联淘宝订单失败，请手动关联")}}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}}function lQ(){return new iQ().init()}class BP{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId");he(this,"hasSliderVerify",!1);he(this,"sliderVerifyUrl",null);he(this,"isTaobaoCurlInvalidFail",!1);he(this,"needLogin",!1);he(this,"needAlertAddrMsg",!1);he(this,"token");he(this,"_cookies",{});he(this,"_allCookies",{})}initAddress(t){return new Promise((r,n)=>{(async()=>{try{window.console.log("initTaoBaoAddress");const a=await nr();this.tabId=a.id,this.purchaseOrderInfo=t,await this._checkCookie(),await this._getSellerName(),await this._getTbAreaIdsFromDb(),await this._startAddAddress(),this.purchaseOrderInfo.useIframeAddAddressTimeForEmptyAddress=new Date().getTime(),this._setPurchaseOrderInfoToStorage(),r(!0)}catch(a){n(a)}})()})}_checkCookie(){return new Promise((t,r)=>{(async()=>{const n=await this._getCookies();this._cookies=n,window.console.log("checkCookie",n);let a=!1;n&&n._nk_&&(a=!0),n&&n._m_h5_tk?this.token=n._m_h5_tk.split("_")[0]:n&&n.cookie2&&(this.token=n.cookie2),window.console.log("token",this.token),a?this.token||(window.location.href="https://member1.taobao.com/member/fresh/deliver_address.htm",r()):(ht.alert("您还没有登录淘宝账号，请登录后刷新页面！",{title:"提示",type:"error"}).then(async()=>{await this._removeCookies();const s="https://member1.taobao.com/member/fresh/deliver_address.htm";window.location.href=`https://login.taobao.com/member/login.jhtml?f=top&redirectURL=${encodeURIComponent(s)}`}),r()),n.dnk?this.purchaseOrderInfo.purchaseOrderBuyer=unescape(decodeURI(n.dnk).replace(/\\/g,"%")):this.purchaseOrderInfo.purchaseOrderBuyer=unescape(decodeURI(n._nk_).replace(/\\/g,"%")),this._setPurchaseOrderInfoToStorage(),t(!0)})()})}_getSellerName(){return new Promise(t=>{let r=I.trim(I(".tb-seller-name").text());if(!r){const n=I('[data-spm="dshopinfo"]').find('span[class*="--shopName--"]');r=I.trim(n.text())}this.purchaseOrderInfo.purchaseOrderSeller=r.length>0?r:this.purchaseOrderInfo.purchaseOrderSeller,this._setPurchaseOrderInfoToStorage(),t(!0)})}async _getTbAreaIdsFromDb(){this.purchaseOrderInfo=await NP({purchaseOrderInfo:this.purchaseOrderInfo})}_hasPurchaseAddress(t){const{tbAddressList:r=[]}=this.purchaseOrderInfo,{fullname:n,mobile:a,province:s,city:o,county:i,address:l}=t;return r.some(u=>n===u.fullName&&a===u.mobile&&s===u.province&&o===u.city&&i===u.town&&l===u.addressDetail)}_startAddAddress(){return new Promise(t=>{(async()=>{var r;try{await this._getDeliverAddressList();const n=this.purchaseOrderInfo.consignee;if(await this._validateAddress(n),await this._completeTbAreaInfo(),window.console.log("采购地址：",n),((r=this.purchaseOrderInfo)==null?void 0:r.useIframeAddAddress)===!1||this._hasPurchaseAddress(n)){window.console.log("不重复添加"),t(!0);return}await this._addAddress(n)?(this.purchaseOrderInfo.useIframeAddAddress=!1,this._setPurchaseOrderInfoToStorage()):ht.alert("添加收货地址失败"),t(!0)}catch(n){window.console.log("startUpdateAddress error",n),this.hasSliderVerify?this.sliderVerifyUrl&&ht.alert(`出现滑条，请<a href="${this.sliderVerifyUrl}" target="_blank">点击这里前往验证</a>，然后回来刷新页面！如果一直出现该提示，请过一段时间再进行下单。`,{dangerouslyUseHTMLString:!0}):this.needLogin?this.isTaobaoCurlInvalidFail?(this.purchaseOrderInfo.useIframeAddAddress=!0,this._setPurchaseOrderInfoToStorage()):(ht.alert("您的账号登录过期，请在新打开的页面登录，然后回来刷新页面！"),await Je(500),ei({url:"https://member1.taobao.com/member/fresh/deliver_address.htm",selected:!0})):this.needAlertAddrMsg&&(this.isTaobaoCurlInvalidFail?ht.alert("添加地址失败: 非法请求，相关凭证失效，请清除浏览器数据(cookie)后登陆重试"):ht.alert(n)),t(!0)}})()})}_getDeliverAddressList(){return new Promise((t,r)=>{(async()=>{const n="https://member1.taobao.com/member/deliveraddress/get_deliver_address_list.json",a=await Dr({url:n,dataType:"text"});try{if(!a){this._saveTaobaoRequestLog({url:n,header:null,responseText:a,responseType:"fail"}),r("请求失败");return}if(a.includes("哎哟喂,被挤爆啦,请稍后重试")){this._saveTaobaoRequestLog({url:n,header:null,responseText:a,responseType:"verify"}),this.hasSliderVerify=!0;const l=JSON.parse(a).data.url;l&&(this.sliderVerifyUrl=l),r("哎哟喂,被挤爆啦,请稍后重试");return}const s=JSON.parse(a),o=JSON.parse(s.content.returnValue);this.purchaseOrderInfo.tbAddressList=o,this._saveTaobaoRequestLog({url:n,header:null,responseText:a,responseType:"success"}),t(!0)}catch(s){this._saveTaobaoRequestLog({url:n,header:null,responseText:a,responseType:"fail",errorMsg:s}),window.console.log("getDeliverId error",s),t(!0)}})()})}async _checkAndDeleteAddress(){var a;const t=((a=this.purchaseOrderInfo)==null?void 0:a.tbAddressList)||[];if(Ut(t))return!1;const r=t.length;if(r<2)return!1;const n=this._getTbAddressCheckCountForDelete();if(window.console.log("checkCount",n),n&&r<n)return!1;for(let s=0;s<2;s++){const i=t.shift().deliverId;i&&await this._deleteAddressByDeliverId(i)}}async _validateAddress(t){if(this.purchaseOrderInfo.tbAreaInfo.useOtherCounty&&(this.purchaseOrderInfo.tbAreaInfo.townId=0,this.purchaseOrderInfo.tbAreaInfo.town=""),!this.purchaseOrderInfo.tbAreaInfo.countyId||!this.purchaseOrderInfo.tbAreaInfo.townId){const r=this.purchaseOrderInfo.tbAreaInfo,n=await this._getAddressDistrictAndTownFromTb({addressDetail:t.fullAddress,province:r.province,provinceId:r.provinceId,city:r.city,cityId:r.cityId});if(window.console.log("addressDistrictAndTownRet ",n),je.isSuccess(n)&&n.data){const{districtId:a,district:s,townId:o,town:i}=n.data;a&&(this.purchaseOrderInfo.tbAreaInfo.countyId=n.data.districtId),s&&(this.purchaseOrderInfo.tbAreaInfo.county=n.data.district),o&&(this.purchaseOrderInfo.tbAreaInfo.townId=n.data.townId),i&&(this.purchaseOrderInfo.tbAreaInfo.town=n.data.town)}else je.isFail(n)&&(n.reason.includes("FAIL_SYS_TOKEN")||n.reason.includes("非法请求"))&&(this.isTaobaoCurlInvalidFail=!0)}return Promise.resolve(!0)}async _completeTbAreaInfo(){return new Promise(t=>{(async()=>{const r=this.purchaseOrderInfo.consignee||{},n=this.purchaseOrderInfo.tbAreaInfo;if(window.console.log("completeTbAreaInfo",r,n),n.useOtherCounty||n.townId&&n.town&&n.town===r.town){t(!0);return}const a=await this._getTbTownListNew(n.countyId);window.console.log("townListRet",a),je.isSuccess(a)&&I.each(a.data,(s,o)=>{const i=o.name||"";if(i===r.county||i===r.town||r.address.includes(i))return n.townId=o.id||0,n.town=o.name||"",!1}),window.console.log("final tbAreaInfo:",n),t(!0)})()})}_getTbAddressCheckCountForDelete(){var n;const t=this.purchaseOrderInfo.operateInfo;if(!this.purchaseOrderInfo.appInfo)return null;const r=(n=this.purchaseOrderInfo.appInfo)==null?void 0:n.userIdAndTbAddressCheckCountForDeleteMap;return r?r[qY(t)||""]:null}async _deleteAddressByDeliverId(t){if(!t)return!1;const r={bizCode:"ali.china.taobao",bizEntrance:"taobao",platform:"PC",deliverId:t,isRarelyUsedAddress:!1},s=this._getOptionFromTaobaoH5ApiVersion(r,"mtop.taobao.mbis.deleteDeliverAddressById","mtop.taobao.mbis.deletedeliveraddressbyid/2.0"),o=s.url,i=await Rn({url:o,method:"GET",params:s.params,xhrFields:{withCredentials:!0,responseType:"text"}});i&&i.includes("操作成功")?this._saveTaobaoRequestLog({url:o,header:null,responseText:i,responseType:"success"}):i&&(i.includes("Session过期")||i.includes("令牌过期")||i.includes("非法请求"))?this._saveTaobaoRequestLog({url:o,header:null,responseText:i,responseType:"not_login"}):i&&i.includes("哎哟喂,被挤爆啦,请稍后重试")?this._saveTaobaoRequestLog({url:o,header:null,responseText:i,responseType:"verify"}):this._saveTaobaoRequestLog({url:o,header:null,responseText:i,responseType:"fail"}),window.console.log("deleteAddress response",i)}_saveTaobaoRequestLog({url:t,header:r,responseText:n,responseType:a,errorMsg:s=""}){var i;const o={appHost:(i=this.purchaseOrderInfo.appInfo)==null?void 0:i.host,url:t,header:r,responseText:n,responseType:a,errorMsg:s};ia(o)}_getOptionFromTaobaoH5ApiVersion(t,r,n){const a=new Date().getTime(),s=JSON.stringify(t),o=Du({now:a,dataStr:s,cookie:this._cookies._m_h5_tk});return{url:`https://h5api.m.taobao.com/h5/${n}/`,params:{jsv:"2.5.1",appKey:"12574478",t:a,sign:o,api:r,v:"1.0",ecode:"1",needLogin:!0,timeout:2e4,dataType:"jsonp",type:"jsonp",data:s}}}async _getAddressDistrictAndTownFromTb(t){const r={sn:"suibianchuan",addressDetail:t.addressDetail,countryCode:"CN",prov:t.province,provId:t.provinceId,city:t.city,cityId:t.cityId,district:t.district,districtId:t.districtId,town:t.town,townId:t.townId},n=new Date().getTime(),a=JSON.stringify(r),s=Du({now:n,dataStr:a,cookie:this._cookies._m_h5_tk}),l=await Rn({url:"https://h5api.m.taobao.com/h5/mtop.cainiao.geography.frontend.address.validate/1.0/",method:"GET",params:{jsv:"2.5.1",appKey:"12574478",t:n,sign:s,api:"mtop.cainiao.geography.frontend.address.validate",v:"1.0",dataType:"jsonp",type:"jsonp",callback:"mtopjsonp8",data:a},xhrFields:{withCredentials:!0,responseType:"text"}}),u=/mtopjsonp8\((.+)\)/.exec(l);if(u&&u[1]){const c=JSON.parse(u[1]);return c.data&&c.data.message&&c.data.message==="success"&&c.data.data.divisionParse?je.successResult({data:c.data.data.divisionParse}):je.failResult(c.ret.join(" "))}else return je.failResult("获取区镇失败")}async _getTbTownListNew(t){if(!t)return je.failResult("获取区镇失败, countyId为空");const r={sn:"suibianchuan",pid:t},n=new Date().getTime(),a=JSON.stringify(r),s=Du({now:n,dataStr:a,cookie:this._cookies._m_h5_tk}),l=await Rn({url:"https://h5api.m.taobao.com/h5/mtop.cainiao.address.ua.china.town.list/1.0/",method:"GET",params:{jsv:"2.5.1",appKey:"12574478",t:n,sign:s,api:"mtop.cainiao.address.ua.china.town.list",v:"1.0",dataType:"jsonp",type:"jsonp",callback:"mtopjsonp15",data:a},xhrFields:{withCredentials:!0,responseType:"text"}}),u=/mtopjsonp15\((.+)\)/.exec(l);if(u&&u[1]){const c=JSON.parse(u[1]);return c.ret&&c.ret[0]&&c.ret[0].includes("SUCCESS")&&c.data&&c.data.divisions?je.successResult({data:c.data.divisions}):je.failResult(c.ret.join(" "))}else return je.failResult("获取区镇失败")}_addAddress(t){return new Promise((r,n)=>{(async()=>{var T;const a=this.purchaseOrderInfo.tbAreaInfo;let s="";t=Ip(t,this.purchaseOrderInfo.consigneeSuffixMap),a.useOtherCounty?s=t.fullAddress:(s=t.address,s.indexOf(a.town)===0&&(s=s.replace(a.town,""))),s=s.replace(/农村淘宝/g,"村a淘宝").replace(/村小二/g,"村a小二").replace(/·/g,"."),s=s.replace(/[‘’“”]/g,""),s=I.trim(s),s.length<5&&(s=(t.town||a.town)+s,s.length<5&&(s=t.county+s));let o=t.fullname.length===1?`${t.fullname} `:t.fullname;o=I.trim(o);let i=await kP([o,s]);window.console.log("urlGbkEncode ret",i),typeof i=="string"&&(i=JSON.parse(i));const l=`${t.mobile?t.mobile:t.telephone}`,u=a.townId>0?a.townId:a.countyId,c={bizCode:"ali.china.taobao",bizEntrance:"taobao",platform:"PC",siteName:"taobao",divisionCode:u,townDivisionCode:u,addressDetail:s,longitude:"0",latitude:"0",postCode:"000000",overseaAddress:!1,fullName:o,mobileCode:"86",mobile:l,phoneInternationalCode:86,phoneAreaCode:"",phoneNumber:"",phoneExtension:"",defaultDeliverAddress:!0,acceptAddressName:!0},d=(T=this.purchaseOrderInfo.tbAddressList)==null?void 0:T.shift(),p=d&&d.deliverId?d.deliverId:"";window.console.log("tbAddressList",d,p),this.purchaseOrderInfo.isTaobaoEmptyAddress=!0;const h=this._getOptionFromTaobaoH5ApiVersion(c,"mtop.taobao.mbis.insertdeliveraddress","mtop.taobao.mbis.insertdeliveraddress/1.0"),v=h.url;let y=await Rn({url:v,method:"GET",params:h.params,xhrFields:{withCredentials:!0,responseType:"text"}});if(window.console.log("addAddress response",y),y&&y.includes("deliverId")){window.console.log("添加收货地址成功"),this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"success"});const S=/\\"deliverId\\":(\d+)/.exec(y);S&&S.length>1&&(this.purchaseOrderInfo.consignee&&(this.purchaseOrderInfo.consignee.deliverId=S[1]),this._setPurchaseOrderInfoToStorage()),r(!0)}else if(y&&y.includes("收货地址不存在"))this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"success"}),n("修改地址失败");else if(y&&y.includes("最多能保存20个有效收货地址"))this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"success"}),n("添加地址失败，最多能保存20个有效收货地址");else if(y&&(y.includes("Session过期")||y.includes("令牌过期")||y.includes("非法请求")||y.includes("令牌为空")))this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"not_login"}),this.needLogin=!0,(y.includes("非法请求")||y.includes("令牌为空"))&&(this.isTaobaoCurlInvalidFail=!0),n("您的账号登录过期，请在新打开的页面登录，然后回来刷新页面！");else if(y&&y.includes("哎哟喂,被挤爆啦,请稍后重试")){this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"verify"}),this.hasSliderVerify=!0;try{y=JSON.parse(y);const S=y.data.url;S&&(this.sliderVerifyUrl=S)}catch(S){window.console.log(S)}n("哎哟喂,被挤爆啦,请稍后重试")}else if(y&&y.includes("特殊字符")){this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"fail"}),this.needAlertAddrMsg=!0;const S=y.match(/"message":"([^"]*)"/)[1]||"";n(`添加地址失败，${S} 请手动添加`)}else if(y&&/收货人姓名为(.*)个字符/.test(y)){this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"fail"}),this.needAlertAddrMsg=!0;const S=y.match(/"message":"([^"]*)"/)[1]||"收货人姓名字符长度不正确";n(`添加地址失败，${S}`)}else y&&/并发锁问题/.test(y)?(this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"fail"}),this.needAlertAddrMsg=!0,n("添加地址失败，并发锁问题（操作频繁），请稍后重试")):(this._saveTaobaoRequestLog({url:v,header:null,responseText:y,responseType:"fail"}),this.needAlertAddrMsg=!0,n(`添加地址失败，${y}`))})()})}async _getCookies(){const t=await uf({url:"https://member1.taobao.com/member/fresh/deliver_address.htm"}),r=["_nk_","_tb_token_","cookie2","dnk","_m_h5_tk"],n=t.reduce((a,s)=>(r.includes(s.name)&&(a[s.name]=s.value),a),{});return this._allCookies=t,n}async _removeCookies(){const t="https://member1.taobao.com/member/fresh/deliver_address.htm";try{const r=this._allCookies.map(n=>lf({url:t,name:n.name}));await Promise.all(r)}catch(r){window.console.error("Failed to remove cookies:",r)}}_setPurchaseOrderInfoToStorage(){Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}}class uQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId")}async init(){window.console.log("initPurchaseTaoBaoCartPage");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),await new BP().initAddress(this.purchaseOrderInfo).catch(n=>{window.console.error("initAddress: ",n)}),await Je(1e3),this._buildEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}async _buildEvent(){this._bindPurchasePlatformOrderingBtnEvent(),I(".ant-checkbox-input").on("change",async()=>{I(".J_Go").length&&I(".J_Go")[0].remove(),await Je(500),this._bindPurchasePlatformOrderingBtnEvent()})}async _bindPurchasePlatformOrderingBtnEvent(){if(I("div[id^=settlementPanelEmptyContainer_]").length)return;const r=I("div[id^=settlementContainer_] div[class^=btn--]");if(r&&r.length){const n=I("div[id^=settlementContainer_]  div[class^=btnWrap]");IP(n[0],"overlay J_Go"),I(document).on("click",".J_Go",()=>{this._triggerBtnEvent(r)})}}async _triggerBtnEvent(t){window.console.log("触发虚拟按钮");const r=I("div[id^=shopCard_s]"),n={};if(I.each(r,(s,o)=>{const i=I(o).attr("id");I(o).find(".ant-checkbox-wrapper-checked").length&&(n[i]=!0)}),Object.keys(n).length>1){ht.alert("仅支持单个店铺同时结算，请保证当前结算的商品来源同一个店铺。");return}t[0].click()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function cQ(){return new uQ().init()}class dQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId");he(this,"purchasePlatform",Qa);he(this,"currentAddressLength",0);he(this,"selectedContent","");he(this,"curDeliverId");he(this,"tryAutoClickAddressTimes",10)}async init(t=Qa){window.console.log("initPurchaseTaoBaoConfirmPage");const r=await nr();return this.tabId=r.id,this.purchasePlatform=t,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),await Je(1e3),this._buildEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}async _buildEvent(){this._autoCheckedFreightInsurance(),this._checkPurchaseOrderCount(),this._processPurchaseOrderInfo(),this._isUseTaobaoVirtualNumber(),this._rebuildPurchaseOrderInfo();let t=I("#submitOrder .trade-price-container").text();setInterval(()=>{const r=I("#submitOrder .trade-price-container").text();r!==t&&(t=r,this._rebuildPurchaseOrderInfo())},300),this._autoClickAddress().then(()=>{this.currentAddressLength=I("div[class^=listItemWrap--]").length,this.selectedContent=I("div[class*=listItemSelect]").text(),setInterval(()=>{this.currentAddressLength!==I("div[class^=listItemWrap--]").length?(this.currentAddressLength=I("div[class^=listItemWrap--]").length,this._checkAddress()):I("div[class*=listItemSelect]").text()&&this.selectedContent!==I("div[class*=listItemSelect]").text()&&(this.selectedContent=I("div[class*=listItemSelect]").text(),this._checkAddress())},1e3),I("div[class*=listItem--]").on("click",()=>{this.tryAutoClickAddressTimes=0,this._checkAddress()}),(!this.purchaseOrderInfo||!this.purchaseOrderInfo.useIframeAddAddress)&&this._checkAddress(!0)}),this._bindPurchasePlatformOrderingBtnEvent()}_autoCheckedFreightInsurance(){if(!(this.purchaseOrderInfo.purchaseSetting||{}).isAutoCheckedFreightInsurance)return!1;I("div[id*=freightInsurance] .ant-checkbox-inner").trigger("click")}_checkPurchaseOrderCount(){const t=I("order-order").length,r=I("div[id*=shopCard]").length;window.console.log("orderCount",t,r),t+r>1&&ht.alert('<strong style="color:red;font-size: 18px;">温馨提示：</strong><br>当前结算的商品属于多个店铺，将会产生多笔订单',{dangerouslyUseHTMLString:!0})}_processPurchaseOrderInfo(){const r=`<br><div style="width:400px;float:right;text-align:left;background-color:yellow;color:red;font-size:16px;font-weight:600;padding:3px;">${this.purchaseOrderInfo.pluginName}提示：提交订单且提示关联成功后您可以暂时不支付，待全部订单下完后再统一支付</div>`,n=this._buildOrderRemarkText();xl()?(I('[data-spm^="memo_"] input').focus().val(n),I('[data-spm="submitOrder_1"]').append(r)):I(".ant-input-textarea-show-count").length>0&&(I(".ant-input-textarea-show-count textarea").focus().val(n),wa(I(".ant-input-textarea-show-count textarea")[0],"input"),I("div[id^=orderExt_]").append(r))}_isUseTaobaoVirtualNumber(){if(this.purchaseOrderInfo.confirmUseVirtualNumber){const t=I("#paymentCard span[class^=optionTitle--]:contains(号码保护中)").closest("label");t&&!t.hasClass("ant-checkbox-wrapper-checked")&&t.trigger("click")}}_rebuildPurchaseOrderInfo(){const t=this.purchaseOrderInfo;if(t.purchasePlatform=this.purchasePlatform,xl()){const r=this._getTmallTotalPrice();if(t.purchaseOrderPayment=r.toFixed(2),t.purchaseItem){const n=this._getTmallPurchaseNum(),a=(+t.purchaseOrderPayment/+n).toFixed(2);t.purchaseItem.purchaseNum=n,t.purchaseItem.purchasePrice=+a}}else{if(I("#settlementContainer div[class^=goodNum--] p").length>0){const r=I.trim(I("#submitOrder .trade-price-container").text().replace("￥",""));t.purchaseOrderPayment=r,t.purchaseItem&&(t.purchaseItem.purchaseNum=I("#settlementContainer div[class^=goodNum--] p").text())}if(t.purchaseItem){const r=(+(t.purchaseOrderPayment||0)/+(t.purchaseItem.purchaseNum||0)).toFixed(2);t.purchaseItem.purchasePrice=+r}}this._setPurchaseOrderInfoToStorage(),this._viewProfit()}_viewProfit(){const[t,r]=TP(this.purchaseOrderInfo),n=`<strong class="J_purchaseProfit" style="background-color:yellow;color:red;padding-right:20px;font-size: 22px;">${r}</strong>`;I(".J_purchaseProfit").remove(),xl()?I('[data-spm="submitOrder_1"]').prepend(n):(I("div[id^=orderExtDown] .trade-order-ext-item-col:last-child").prepend(n),I("div[id=submitOrder] ").append(n))}async _autoClickAddress(){if(this.tryAutoClickAddressTimes){this.tryAutoClickAddressTimes--;let t;if(I("div[class^=listItemWrap--]").each((r,n)=>{if(I(n).find("div[class^=addressLabel--]").text().includes("默认"))return t=I(n).find("div[class^=listItem--]"),!1}),t){t.trigger("click"),await Je(500);const r=this.purchaseOrderInfo.consignee;this._isOrderingAddress(r)?this.tryAutoClickAddressTimes=0:this._autoClickAddress()}}}_checkAddress(t=!1,r=!0){return new Promise(n=>{var l,u;if(this.curDeliverId=I('input[name="address"]:checked').data("id"),t)try{const c=(l=this.purchaseOrderInfo.consignee)==null?void 0:l.deliverId;window.console.log(c),c&&this.curDeliverId!==c&&I(`#addressInput-${c}`).length>0&&(I(`#addressInput-${c}`).trigger("click"),n(!1))}catch(c){window.console.error(c),n(!1)}const a=this.purchaseOrderInfo.consignee,s=this._isOrderingAddress(a);t?V0(this.purchaseOrderInfo,s):OY(this.purchaseOrderInfo);const i=`<div class='J_purchaseAddressTip' style='padding:5px 10px;font-size:24px;font-weight:600;z-index:1000000;top:40px;left: 0px;color:#fff;background-color: #ff4400;border:1px solid red;box-shadow: 0 0 4px #000; display:flex;justify-content: space-between;'>${Cp(this.purchaseOrderInfo.appInfo)}<a href='javascript:;' class='J_closePurchaseAddressTip' style='color:blue;margin-left: 20px;'>X 关闭</a></div>`;s||(t&&this._saveAddressMatchError(),I(".J_closePurchaseAddressTip").length===0&&(I("#addressCard").append(i),I(".J_closePurchaseAddressTip").unbind().click(()=>{I(".J_purchaseAddressTip").remove()})),!(!this.purchaseOrderInfo.confirmUseVirtualNumberAgreement&&this.purchaseOrderInfo)&&r&&ht.alert(`当前地址与${(u=this.purchaseOrderInfo.appInfo)==null?void 0:u.platformChineseName}买家地址不一致，请核对`)),n(s)})}_isOrderingAddress(t){let r=t||this.purchaseOrderInfo.consignee;const n=this._getTaobaoAddress();r=Ip(r,this.purchaseOrderInfo.consigneeSuffixMap);const a=n.province;let s=n.city,o=n.county;const i=n.town;let l=n.detail;if(!this.purchaseOrderInfo.purchaseOrderFullAddress||!this.purchaseOrderInfo.purchaseOrderFullname||!this.purchaseOrderInfo.purchaseOrderMobile||n.name!==r.fullname||n.phone!==r.mobile)return!1;if(I.inArray(r.province,["港澳","台湾"])>=0&&(r.province=r.city.substr(0,2),r.city=r.county,r.county=r.town),o.includes("其它")&&l===r.fullAddress)return!0;if(!a.includes(r.province.substr(0,2)))return!1;s=this._addressSuffixFilter(s),o=this._addressSuffixFilter(o);const u=["北京","天津","重庆","上海"];let c=!1;I.inArray(r.province.substr(0,2),u)>=0&&(c=!0);let d=c?r.province:r.city;const p=r.county;if(d=this._addressSuffixFilter(d),!s.includes(d))return!1;const b=o.includes(p.substr(0,2))||p.includes(o.substr(0,2))||c&&i.includes(p.substr(0,2));if(!/[\s\S]环到[\s\S]+环/.test(p)&&o!=="其它区"&&!b)return window.console.log("county hit"),!1;const m=Ap(r.address);return l=Ap(l),!m.includes(l)&&!l.includes(m)?(window.console.log("consigneeAddress",m,l),!1):!0}_getTaobaoAddress(){if(this.purchaseOrderInfo.purchaseOrderFullAddress="",this.purchaseOrderInfo.purchaseOrderFullname="",this.purchaseOrderInfo.purchaseOrderMobile="",this._setPurchaseOrderInfoToStorage(),xl())return this._getTaobaoMobileAddress();{const t={province:"",city:"",county:"",town:"",detail:"",name:"",phone:""};if(I("div[class*=listItemSelect]").length>0){const r=I("div[class*=listItemSelect]"),n=r.find("div[class*=addressDetail--]").text(),s=r.find("div[class*=addressName--]").text().split(/\s+/);t.province=s[0]?s[0]:"",t.city=s[1]?s[1]:"",t.county=s[2]?s[2]:"",t.town=s[3]?s[3]:"",t.detail=I.trim(n),t.name=I.trim(r.find("div[class*=userInfo--] div:eq(0)").text()),t.phone=I.trim(r.find("div[class*=userInfo--] span").text()),t.phone||(t.phone=I.trim(r.find("div[class*=userInfo--] div:eq(1)").text()));const o=`${t.province} ${t.city} ${t.county} ${t.town} ${t.detail}`;this._setPurchaseConsigneeInfo(o,t.name,t.phone)}return t}}_getTaobaoMobileAddress(){const t={province:"",city:"",county:"",town:"",detail:"",name:"",phone:""};let r="";const n=I('[data-spm="address_1"]').find('[view-name="ImageView"]');if(n.length>0){const s=I(n[0]).siblings('[view-name="LinearLayout"]').find('[view-name="TextView"]');s.length>=3&&(t.name=I(s[0]).text(),t.phone=I(s[1]).text(),r=I(s[2]).text())}return r&&this.purchaseOrderInfo.tbAddressList&&I.each(this.purchaseOrderInfo.tbAddressList,(a,s)=>{if(s.mobile!==t.phone||s.fullName!==t.name)return!0;const o=[s.province||"",s.city||"",s.area||"",s.town||"",s.addressDetail||""].join(""),i=this._buildTmallMobileFullAddress(s.province||"",s.city||"",s.area||"",s.town||"",s.addressDetail||"");if(o===r||i===r){t.province=s.province,t.city=s.city,t.county=s.area,t.town=s.town,t.detail=s.addressDetail;const l=[];t.province&&l.push(t.province),t.city&&l.push(t.city),t.county&&l.push(t.county),t.town&&l.push(t.town),t.detail&&l.push(t.detail),this._setPurchaseConsigneeInfo(l.join(" "),t.name,t.phone)}}),t}_saveAddressMatchError(){const{appInfo:t,venderId:r,orderId:n,purchasePlatform:a}=this.purchaseOrderInfo,s=this.purchaseOrderInfo.consignee,o={appName:t==null?void 0:t.appName,venderId:r,orderId:n,fullname:s.fullname,mobile:s.mobile,province:s.province,city:s.city,county:s.county,address:s.address,purchasePlatform:a};BB(o)}_setPurchaseConsigneeInfo(t,r,n){if(t=t.replace(/\s+/g,""),!t||!r||!n)return!1;this.purchaseOrderInfo.purchaseOrderFullAddress=t,this.purchaseOrderInfo.purchaseOrderFullname=r,this.purchaseOrderInfo.purchaseOrderMobile=n,this._setPurchaseOrderInfoToStorage()}_buildTmallMobileFullAddress(t,r,n,a,s){return t=t.replace("省",""),t=t.replace("自治区",""),r=r.replace("市",""),n=n.replace("区",""),a=a.replace("街道",""),a=a.replace("镇",""),[t,r,n,a,s].join("")}_addressSuffixFilter(t){let r=t;const n=["自治区","自治州","自治县","市","县","地区","区","州"];for(const a in n){const s=n[a];if(new RegExp(`${s}$`,"gi").test(t)){r=t.substr(0,t.length-s.length);break}}return r}async _bindPurchasePlatformOrderingBtnEvent(){const t=I("#submitOrder");if(t&&t.length){const r=I("div[class^=btn--]");await Je(1500),IP(r[0],"overlay J_checkRelatePurchaseBtn"),I(document).on("click",".J_checkRelatePurchaseBtn",n=>{if(I(n.currentTarget).attr("disabled")&&I(n.currentTarget).attr("disabled")==="disabled")return window.console.log("提交订单按钮禁用"),null;this._triggerBtnEvent(r)})}}async _triggerBtnEvent(t){window.console.log("触发虚拟按钮",t);const r=this._getTaobaoAddress();return this.purchaseOrderInfo.pageAddressInfo=r,await cc(this.purchaseOrderInfo,"confirm_page",{checkAddressCallback:()=>this._checkAddress(!1,!1)})?(t[0].click(),!0):!1}_buildOrderRemarkText(){return fc(this.purchaseOrderInfo,"，")}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}_isTaobaoNewOrderPage(){return I("#addressCard").length>0}_getTmallTotalPrice(){let t=0;if(xl()){const r=I('#submitBlock_1 [view-name="TradePriceView"]').text().replace("￥","");t=Number.parseFloat(r)||0}else this._isTaobaoNewOrderPage()?t=I.trim(I("#submitOrder .trade-price-container").text().replace("￥","")).toNumber(2):I("#realPayPC_1").length>0?t=I.trim(I("#realPayPC_1").find(".realpay--price").text()).toNumber(2):t=I.trim(I(".order-realPay .realPay-price").text()).toNumber(2);return t}_getTmallPurchaseNum(){let t=0;return xl()?I.trim(I('[data-spm^="quantity_"] input').val()):(this._isTaobaoNewOrderPage()?I("#settlementContainer div[class^=goodNum--] p").length>0&&(t=I("#settlementContainer div[class^=goodNum--] p").text()):I(".order-quantity").find("input").each((r,n)=>{const a=I.trim(I(n).val()).toNumber(0);t+=a}),t)}}function fQ(e){return new dQ().init(e)}class pQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId")}async init(){window.console.log("initPurchaseTaoBaoDeliverAddressPage");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),this.purchaseOrderInfo.purchaseItem&&!I("body").html().includes("霸下通用 web 页面-验证码")&&(await Je(1e3),window.location.href=this.purchaseOrderInfo.purchaseItem.purchaseUrl),Promise.resolve()):Promise.reject("no purchase order info.")}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function hQ(){return new pQ().init()}class mQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"targetGuessProps",[]);he(this,"tabId");he(this,"propertyMemoMap",{});he(this,"isTMall",location.href.includes("detail.tmall.com"));he(this,"currentAddCartProductId","")}async init(){if(window.console.log("initPurchaseTaoBaoDetailPage"),UY()){window.console.log("iframe window");return}const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt();try{return await Je(1e3),this._initPurchaseOrderInfo(),await this._autoSelectSku(),await new BP().initAddress(this.purchaseOrderInfo).catch(n=>{window.console.error("initAddress: ",n)}),this._handleCartEvent(),this._startPurchaseItem(),Promise.resolve()}catch(r){window.console.error("purchase_order init error: ",r)}}_initPurchaseOrderInfo(){const t=location.href,r=W0(t);this.purchaseOrderInfo.purchaseItem.purchaseUrl=t,this.purchaseOrderInfo.purchaseItem.title=I("#tbpc-detail-item-title h1").text(),r&&(this.purchaseOrderInfo.purchasePlatform=r,this._setPurchaseOrderInfoToStorage()),window.console.log("_initPurchaseOrderInfo：",this.purchaseOrderInfo)}async _autoSelectSku(){if(location.href.includes("taobao.com/auction/noitem.htm")||location.href.includes("detail.tmall.com/item.htm")&&I(".errorDetail").text().includes("商品找不到"))return Promise.resolve();this._getPurchaseOrderShipmentPlace(),this._getHtmlElements();const{purchaseItem:r}=this.purchaseOrderInfo,{skuSubName:n,itemTotal:a}=r||{},s=+(a??0),o=n&&Zs(n)?n.split(" "):[],i=xp(o,this._filterSpecialString);this.targetGuessProps=Y0(this.purchaseOrderInfo)||i,window.console.log("targetGuessProps",this.targetGuessProps);let l="";const u=I("body script");I(u).each((p,b)=>{const m=I(b).html();if(m.includes("Hub"))return l=m,!1});const d=new RegExp("propertyMemoMap: \\{([^}]*)\\}").exec(l)||[];return d[1]&&(this.propertyMemoMap=JSON.parse(`{${d[1]}}`)),U0()?this._autoSelectTaobaoMobileSku({selectProps:this.targetGuessProps,purchaseItemTotal:s}):q0()?this._autoSelectTmallMobileSku({selectProps:this.targetGuessProps,purchaseItemTotal:s}):this._autoSelectSkuByWeb({Hub:l,itemTotal:s}),this._buildPurchaseToolInfo(),Promise.resolve()}_startPurchaseItem(){window.console.log("start Purchase"),this._checkAutoPurchaseNow(),J0(this.purchaseOrderInfo)}_checkAutoPurchaseNow(){var t;if(this.purchaseOrderInfo.isAutoPurchaseNow==="1"){if(document.getElementsByClassName("J_LinkBuy").length>0){const r=document.getElementsByClassName("J_LinkBuy")[0];r==null||r.click()}document.getElementById("J_LinkBuy")&&((t=document.getElementById("J_LinkBuy"))==null||t.click())}}_getPurchaseOrderShipmentPlace(){let t=null;if(I("#J-From").length>0&&(t=I.trim(I("#J-From").text())),I("#J_deliveryAdd").length>0&&(t=I.trim(I("#J_deliveryAdd").text())),!t)return!1;this.purchaseOrderInfo.purchaseOrderShipmentPlace=t,this._setPurchaseOrderInfoToStorage()}_getHtmlElements(){this.purchaseOrderInfo.purchaseOrderSeller=G0(location.href),this._setPurchaseOrderInfoToStorage()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}_filterSpecialString(t){return t.replace(/(\(|\)|（|）|【|】|\[|\]|，|,|；|;|《|》|<|>)*/g,"")}_replaceSpecialString(t){const r={"（":"(","）":")","【":"[","】":"]","，":",","；":";"};return t.replace(/（|）|【|】|，|；/g,n=>r[n]||n)}_autoSelectSkuByWeb({Hub:t,itemTotal:r}){for(let n=0;n<this.targetGuessProps.length;n++){let a=this.targetGuessProps[n];window.console.log("开始自动选择sku",a);const o=new RegExp(`"(\\d+:\\d+)":"${a}"`).exec(t);if(!o||o.length<2)if(a=this._replaceSpecialString(a),I(".tb-prop").length>0)I(".tb-prop ul li").each((i,l)=>{let u=I.trim(I(l).find("span").text());if(u=this._replaceSpecialString(u),u===a&&!I(l).hasClass("tb-selected")){const c=I(l);c.hasClass("tb-selected")||c.find("span").trigger("click"),I(l).find("span").trigger("click")}});else if(I('div[class^="skuWrapper--"]').length>0)I('div[class^="skuWrapper--"] div[class^="valueItem--"]').each((i,l)=>{let u=I.trim(I(l).find("span").text());u=this._replaceSpecialString(u);const c=I(l).attr("class");if(u===a&&!c.includes("isSelected--")){const d=I(l);d.attr("class").includes("isSelected--")||d.find("span").trigger("click"),I(l).find("span").trigger("click")}});else{window.console.log("未找到匹配的属性");break}else{window.console.log(a);const i=o[1];!I(`li[data-value='${i}']`).hasClass("tb-selected")&&I(`li[data-value='${i}']`).click()}}if(I("#J_IptAmount").val(r),I("#J_Amount").length>0){r>2&&I("#J_Amount").find(".mui-amount-input").val(r-1);for(let n=1;n<=r&&!(+Number.parseInt(I("#J_Amount").find(".mui-amount-input").val())>=r);n++)I("#J_Amount").find(".mui-amount-increase").trigger("click")}else if(I("div[class*=addBtn--]").length>0)for(let n=1;n<=r-1&&+I("div[class*=countValueWrapper--] .input").value!==r;n++)I("div[class*=addBtn--]").trigger("click")}async _autoSelectTaobaoMobileSku({selectProps:t,purchaseItemTotal:r}){window.console.log("开始手机端自动选择sku",t,r);const n=I('.tpl-wrapper[data-tpl-id="xsku"]').length>0;let a=null;I(".bottom-bar div").each((s,o)=>{I(o).text().includes("立即购买")&&(a=I(o))}),n&&(a&&a.trigger("click"),I(".dialog-container .sku-info li").each((s,o)=>{for(const i in t){const l=t[i],u=I(o).text();yP(l,u)&&(I(o).hasClass("sel")||I(o).trigger("click"))}}),I(".dialog-container .sku-quantity input").length>0&&(I(".dialog-container .sku-quantity input").focus().val(r),wa(I(".dialog-container .sku-quantity input")[0],"input")),I(".dialog-container .sku-closed").trigger("click"))}async _autoSelectTmallMobileSku({selectProps:t,purchaseItemTotal:r}){window.console.log("开始手机端自动选择sku",t,r);const n=I(".module-sku").length>0;let a=I("#s-actionBar-container .trade .buy");a.length===0?a=null:a.children().length>0&&(a=a.children()),n&&(a&&a.trigger("click"),I('.sku-wrap .sku-list-wrap .items [role="radio"]').each((s,o)=>{for(const i in t){const l=t[i],u=I(o).text();yP(l,u)&&(I(o).hasClass("checked")||wa(I(o)[0],"click"))}}),I(".sku-wrap #number").length>0&&(I(".sku-wrap #number").focus().val(r),wa(I(".sku-wrap #number")[0],"input")),wa(I(".sku-wrap .sku-close")[0],"click"))}_buildPurchaseToolInfo(){this._buildColorName()}async _buildColorName(){async function t(s){const o=await Ze.getItem(`local:openColorName-${s}`);return o===null||+o==1?1:0}const r=()=>{I(".J_TSaleProp").each((s,o)=>{if(!I(o).data("property").includes("颜色"))return!0;I(o).find("li").each((i,l)=>{let u=I(l).find("a span").text();const c=I(l).data("value");c&&this.propertyMemoMap[c]&&(u=this.propertyMemoMap[c]),I(l).addClass("od-color-container"),I(l).find(".J_appendColorName").length>0?I(l).find(".J_appendColorName").html(u):I(l).append(`<div style="padding: 0 10px;line-height: 1.5;" class="J_appendColorName">${u}</div>`)})})};let n=await t(this.tabId);n&&r();const a=this.isTMall?".tb-sku":"#J_isku";I(a).prepend(`<div class="od-sku-text-switch"><div class="J_odSkuTextSwitch od-sku-text-radio ${n===1?"od-radio-open":"od-radio-close"}"><div></div></div><div>${n===1?"关闭":"展开"}SKU文字</div></div>`),I(`${a} .J_odSkuTextSwitch`).on("click",async()=>{n=await t(this.tabId),n=n?0:1,Ze.setItem(`local:openColorName-${this.tabId}`,n?"1":"0"),I(".J_odSkuTextSwitch").siblings("div").html(`${n===1?"关闭":"展开"}SKU文字`),n===1?(I(".J_odSkuTextSwitch").addClass("od-radio-open").removeClass("od-radio-close"),r()):(I(".J_odSkuTextSwitch").removeClass("od-radio-open").addClass("od-radio-close"),I(".od-color-container").removeClass("od-color-container"),I(".J_appendColorName").remove())})}async _handleCartEvent(){if(this.isTMall){const t=setInterval(()=>{I("#mc-menu-hd").length>0&&(I("#mc-menu-hd").attr({href:"javascript:void(0);",target:"_self"}),I("#mc-menu-hd").on("click",this._goTaoBaoAndTmallCart),clearInterval(t))},300)}I(".tb-toolbar-item-label-cart").on("click",this._goTaoBaoAndTmallCart),await Je(300),this._bindTmallAndTaoBaoCartEvent(),I("#J_LinkBasket").on("click",this._getProductIdByAddTmallCart)}_goTaoBaoAndTmallCart(){window.console.log("go cart");let t="http://cart.taobao.com/cart.htm";this.currentAddCartProductId&&(t=`${t}?productId=${this.currentAddCartProductId}`),window.location.href=t}async _bindTmallAndTaoBaoCartEvent(){const t=window.location.href;if(this._checkIsTmallDetailPage(t)){const r=I("#J_MUIMallbar").find(".mui-mbar-tab-cart");if(r.length){r.on("click",this._goTaoBaoAndTmallCart);return}}else{const r=I("#J_Toolbar").find(".J_TBToolbarCart");if(r.length){r.on("click",this._goTaoBaoAndTmallCart);return}}await Je(100),this._bindTmallAndTaoBaoCartEvent()}_getProductIdByAddTmallCart(){if(this.currentAddCartProductId)return;const t=window.location.href;if(!this._checkIsTmallDetailPage(t))return;const r=/id=(\d+)/i.exec(t);r&&(this.currentAddCartProductId=r[1],window.console.log("tmall currentAddCartProductId = ",this.currentAddCartProductId))}_checkIsTmallDetailPage(t){const r=["detail.tmall.com","detail.yao.95095.com","detail.liangxinyao.com"];for(const n in r)if(t.includes(r[n]))return!0;return!1}}function gQ(){return new mQ().init()}class vQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId")}async init(){window.console.log("initPurchaseTaoBaoPayResultPage");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),await Je(1e3),this._buildEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}_buildEvent(){this._getTaobaoBizOrderId()}_getTaobaoBizOrderId(){const t=I("body script");let r;I(t).each((a,s)=>{const o=I(s).html();if(o.includes("buyertrade.taobao.com/trade/pay_success.htm"))return r=this._matchTaobaoOrderId(o),!1;if(o.includes("trade.1688.com/order/unify_pay_success.htm"))return r=this._match1688OrderId(o),!1});const n=!r;if(n||(this.purchaseOrderInfo.purchaseOrderSn=r),xo({status:n?"fail":"success",reason:n?"没有匹配到采购单号":""},this.purchaseOrderInfo),!r)return!1;_a({purchaseOrderInfo:this.purchaseOrderInfo})}_matchTaobaoOrderId(t){const r=/biz_order_id=(\d+)/.exec(t);return!r||r.length<2?(ht.alert("获取淘宝订单号失败，请手动关联订单"),!1):r[1]}_match1688OrderId(t){const r=/orderId=(\d+)/.exec(t);return!r||r.length<2?(ht.alert("获取1688订单号失败，请手动关联订单"),!1):r[1]}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function yQ(){return new vQ().init()}class bQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId")}async init(){window.console.log("initPurchaseTaoBaoPaySuccessPage");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),this._buildEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}_buildEvent(){this._getTaobaoBizOrderId()}_getTaobaoBizOrderId(){if(this.purchaseOrderInfo.purchaseOrderSn&&typeof(this.purchaseOrderInfo.purchaseSetting||{}).isAutoRelateWaitPay>"u")return;const t=window.location.href;let r=!1;const n=_C(t);if(n?(window.console.log("已匹配到biz_order_id: ",n),this.purchaseOrderInfo.purchaseOrderSn=n):(window.console.log("未匹配到biz_order_id"),r=!0),xo({status:r?"fail":"success",reason:r?"没有匹配到采购单号":""},this.purchaseOrderInfo),r)return ht.alert("获取淘宝订单号失败，请手动关联订单");_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:!0})}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function wQ(){return new bQ().init()}class _Q{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId")}async init(){window.console.log("initPurchaseTaoBaoSearchSameGoods");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),this.purchaseOrderInfo.searchType==="searchByImage"&&!window.location.href.includes("tfsid")&&this._searchGoodsByImage(),this._buildGoPurchaseEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}async _searchGoodsByImage(){const t=sa({text:"正在搜索同款商品..."});try{const r=this.purchaseOrderInfo.purchaseItem,n=this.purchaseOrderInfo.searchImageUrl||(r==null?void 0:r.goodsImg)||(r==null?void 0:r.picUrl)||"",a=n.substring(n.lastIndexOf("/")+1).toLowerCase();let s=this.purchaseOrderInfo.searchImageObj;s||(s=await HX(n));const o=zX(s.base64Code,a);this._uploadGoodsImage(o,i=>{if(t.close(),i.error||!i.name){ht.alert(i.errorMsg||"上传图片失败",{type:"error"});return}location.href=`https://s.taobao.com/search?tfsid=${i.name}&app=imgsearch`})}catch(r){t.close(),window.console.log("搜索失败",r)}}async _uploadGoodsImage(t,r){const n=new FormData;n.append("imgfile",t);const a=await Rn({url:"https://s.taobao.com/image",method:"POST",data:n,xhrFields:{withCredentials:!0}});r(a)}_buildGoPurchaseEvent(){const t=["#mainsrp-itemlist .item .pic-box","#mainsrp-itemlist .item .title","#imgsearch-itemlist .item .pic-box","#imgsearch-itemlist .item .title","#J_shopkeeper_bottom li a","#J_shopkeeper li a"];I(document).on("click",t.join(","),this._goPurchase)}_goPurchase(t){if(this.purchaseOrderInfo.bizType==="getSameGoods")return;t.stopPropagation(),t.preventDefault();let r;I(t.currentTarget).is("a")?r=I(t.currentTarget).attr("href"):r=I(t.currentTarget).closest(".item").find(".title a").attr("href"),r&&(r.indexOf("//")===0&&(r=location.protocol+r),ei({url:r,selected:!0}).then(n=>{Ze.setItem(At(n.id),{...this.purchaseOrderInfo,tabId:n.id})}))}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function SQ(){return new _Q().init()}class TQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId")}async init(){window.console.log("initPurchaseTMallPaySuccessPage");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),this._buildEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}_buildEvent(){this._getTaobaoBizOrderId()}_getTaobaoBizOrderId(){if(this.purchaseOrderInfo.purchaseOrderSn&&typeof(this.purchaseOrderInfo.purchaseSetting||{}).isAutoRelateWaitPay>"u")return;const t=window.location.href;let r=!1;const n=_C(t);if(n?(window.console.log("已匹配到biz_order_id: ",n),this.purchaseOrderInfo.purchaseOrderSn=n):(window.console.log("未匹配到biz_order_id"),r=!0),xo({status:r?"fail":"success",reason:r?"没有匹配到采购单号":""},this.purchaseOrderInfo),r)return ht.alert("获取天猫订单号失败，请手动关联订单");_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:!0})}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function xQ(){return new TQ().init()}class CQ{constructor(){he(this,"purchaseOrderInfo",{});he(this,"tabId")}async init(){window.console.log("initPurchaseTMallSearchSameGoods");const t=await nr();return this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),this.purchaseOrderInfo?(await jt(),await Je(500),this._buildGoPurchaseEvent(),Promise.resolve()):Promise.reject("no purchase order info.")}_buildGoPurchaseEvent(){const t=[".product .productImg-wrap",".product .productTitle"];I(document).on("click",t.join(","),this._goPurchase)}_goPurchase(t){if(this.purchaseOrderInfo.bizType==="getSameGoods")return;t.stopPropagation(),t.preventDefault();let r=I(this).find("a").attr("href");r&&(r.indexOf("//")===0&&(r=location.protocol+r),ei({url:r,selected:!0}).then(n=>{Ze.setItem(At(n.id),{...this.purchaseOrderInfo,tabId:n.id})}))}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function kQ(){return new CQ().init()}class IQ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),this.purchaseOrderInfo.purchaseOrderSn&&cc(this.purchaseOrderInfo,"pay_page")}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}}function AQ(){return new IQ().init()}class OQ{constructor(){he(this,"tabId");he(this,"pddUserId");he(this,"pddAccessToken");he(this,"purchaseOrderInfo",{});he(this,"locationUrl")}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),this.locationUrl=this.purchaseOrderInfo.yangkeduoUrl,this._getUserInfo().then(this._buildEvent.bind(this),this._throwError).then(this._getPddOrderId.bind(this),this._throwError).then(this._savePurchaseOrderInfo.bind(this),this._handleError)}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){return Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}_throwError(t){throw new Error(t)}_handleError(t){window.console.log(t)}_getUserInfo(){return of(this.locationUrl).then(t=>{this.pddUserId=t.pddUserId,this.pddAccessToken=t.pddAccessToken})}_buildEvent(){I(".goods-go-to-app").remove()}async _getPddOrderId(){let t=K0("subject");window.console.log("subject",t);let r=K0("return_url"),n=!1;if(!t&&this._isNewPayUrl()){const a=await this._getUrlRequestHistory();window.console.log("sendBackgroundGetUrlRequestHistory: ",a),a&&(t=a.subject,r=a.return_url)}if(window.console.log("subject2",t,r),t||(t=I(".am-list-item-text").text()),t){const a=/商户单号(\w+)/.exec(t);a&&a[1]&&(this.purchaseOrderInfo.purchaseAlipayMerchantNo=a[1]);const s=/订单编号([\d-]+)/.exec(t);if(s&&s[1]){n=!0;const o=s[1];this.purchaseOrderInfo.purchaseOrderSn=o,this._setPurchaseOrderInfoToStorage();return}}if(!r){let a=I('meta[name="unio_origin_url"]').attr("content");a&&(window.console.log("find unioOriginUrl"),window.console.log(a),a=decodeURIComponent(a),r=new URL(a).searchParams.get("return_url"),window.console.log(`parse from unioOriginUrl,return_url:${r}`))}if(r){const a=/order_sn=([\d-]+)/.exec(decodeURIComponent(r));if(a&&a[1]){n=!0;const s=a[1];this.purchaseOrderInfo.purchaseOrderSn=s,this._setPurchaseOrderInfoToStorage();return}if(!n){const s=/fp_id=([^&]+)/.exec(decodeURIComponent(r));if(s&&s[1]){const o=await this._getPurchaseOrderSnFromPddOrderList(s[1]);if(o){n=!0,this.purchaseOrderInfo.purchaseOrderSn=o,this._setPurchaseOrderInfoToStorage();return}}}}if(!n)return ht.alert("获取拼多多订单号失败，请手动关联拼多多订单和京东订单"),Promise.reject("获取拼多多订单号失败")}_isNewPayUrl(){return window.location.href.includes("h5pay/cashierPreConfirm/index")||window.location.href.includes("h5pay/unifiedLogin/index")||window.location.href.includes("h5pay/landing/index")}async _getUrlRequestHistory(){let t={};const r=await _P("https://mclient.alipay.com/home/exterfaceAssign.htm");return r&&(t=kp(r.url)),t}async _getPurchaseOrderSnFromPddOrderList(t){const r=await fB({host:this.locationUrl,pddAccessToken:this.pddAccessToken});if(r&&r.length){for(const n of r)if(n.fpId===t)return n.orderSn}return""}_savePurchaseOrderInfo(){cB({purchaseOrderInfo:this.purchaseOrderInfo,host:this.locationUrl,pddUserId:this.pddUserId,pddAccessToken:this.pddAccessToken});let t=!1;this.purchaseOrderInfo.purchaseOrderSn||(t=!0),xo({status:t?"fail":"success",reason:t?"没有匹配到采购单号":""},this.purchaseOrderInfo),_a({purchaseOrderInfo:this.purchaseOrderInfo})}}function PQ(){return new OQ().init()}class EQ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),this._tryRelatePurchaseOrder()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}async _tryRelatePurchaseOrder(){const t=I(document).find("body").html(),r=/window\.rawData=\s*((.*?)\}\});/.exec(t);let n="";if(r&&r[1])try{const a=JSON.parse(r[1]);window.console.log("orderInfo: ",a);const{store:s}=a;if(!s){St.error("页面解析失败");return}n=s.data.selfOrderInfo.orderSn,n||(n=s.queries.orderSn)}catch{St.error("页面解析失败");return}if(this.purchaseOrderInfo.updateOrderBuyerMemo){window.console.log("pay.js 已完成备注："),St.success("已完成备注");return}n&&(this.purchaseOrderInfo.purchaseOrderSn=n,lv({purchaseOrderInfo:this.purchaseOrderInfo,handleBuildFillRemarkText:fc})),xo({status:n?"fail":"success",reason:n?"没有匹配到采购单号":""},this.purchaseOrderInfo),_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:!0})}}function $Q(){return new EQ().init()}class RQ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),this._checkPaySuccess().then(this._savePurchaseOrderInfo.bind(this),this._handleError)}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){return Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}_handleError(t){window.console.log(t)}_checkPaySuccess(){return new Promise((t,r)=>{const n=I("body script");let a=!0;if(I(n).each((s,o)=>{const i=I(o).html();if(i.includes("支付密码不正确")||i.includes("表单重复提交"))return a=!1,!1}),!a)return r("pay fail.");t(!0)})}_savePurchaseOrderInfo(){const t=I("div");let r=!1;if(!this.purchaseOrderInfo.purchaseOrderSn){const s=this._getBizOrderId();s&&(this.purchaseOrderInfo.purchaseOrderSn=s,this._setPurchaseOrderInfoToStorage())}t.each((s,o)=>{I(o).is(":visible")&&I(o).text()&&I(o).text().includes("付款成功")&&(r=!0)});const n=I(".J-success"),a=I(".J-failure");n.length>0&&a.length>0&&!r?this._listenerPaySuccessResult():(_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:r}),r&&this._updatePddOrderBuyerMemo())}_getBizOrderId(){const t=kp(I(".am-header-operate").attr("href")||"");let r="";if(t.bizOrderId&&t.appName==="ltao")r=t.bizOrderId;else{const n=/window._data\s*=\s*(.*);/.exec(document.body.innerHTML);if(n&&n[1]){const a=JSON.parse(n[1]),s=a&&a.next_url?a.next_url:"",o=kp(s);o.bizOrderId&&t.appName==="ltao"&&(r=o.bizOrderId)}}return r}_listenerPaySuccessResult(){const t=I(".J-success");if(!t.length)return!1;const r=t[0],n=new MutationObserver(()=>{let a=!1;t.length>0&&t.text()&&t.is(":visible")&&t.text().includes("支付成功")&&(a=!0),window.console.log("listenerPaySuccessResultV2 change"),_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:a}),a&&this._updatePddOrderBuyerMemo()});n.observe(r,{attributes:!0}),Wn.tabs.onRemoved.addListener(a=>{a===this.tabId&&n.disconnect()})}async _updatePddOrderBuyerMemo(){const t=await lv({purchaseOrderInfo:this.purchaseOrderInfo,handleBuildFillRemarkText:fc});je.isSuccess(t)&&(this.purchaseOrderInfo.updateOrderBuyerMemo=!0,this._setPurchaseOrderInfoToStorage())}}function LQ(){return new RQ().init()}class MQ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),await this._checkPaySuccess(),this._savePurchaseOrderInfo()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_checkPaySuccess(){const t=I("body script");let r=!0;if(I(t).each((n,a)=>{const s=I(a).html();if(s.includes("支付密码不正确")||s.includes("表单重复提交"))return r=!1,!1}),!r)return window.console.log("pay fail."),Promise.reject("pay fail.")}_savePurchaseOrderInfo(){lv({purchaseOrderInfo:this.purchaseOrderInfo,handleBuildFillRemarkText:fc}),_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:!0})}}function DQ(){return new MQ().init()}const NQ={class:"dialog-title-box"},FQ={class:"parse-goods-fail-message-box"},BQ={class:"base-line ft_20 bold"},jQ={class:"content"},UQ={class:"base-line ft_20 bold"},qQ={class:"content goods-images-box"},VQ=["src"],HQ=["src"],zQ={class:"dialog-footer-box"},WQ=oa(Te({__name:"PddNotSaleGoodsListDialog",emits:["closed"],setup(e,{emit:t}){const r=t,n=ee(!1),a=ee({}),s=ee(),o=tl(),i=W(()=>a.value.appInfo||{});async function l(){const p=sa({text:"正在获取拼多多下架商品..."});try{const b=i.value.host||"",m=location.href;if(!b||!m)throw new Error("appHost or goodsUrl invalid");const h=await Jt({url:`${b}order/purchase_order/parse_pdd_goods?goodsUrl=${encodeURIComponent(m)}`,method:"GET"});if(je.isFail(h))throw new Error(h.reason);s.value=h.goodsData}catch(b){window.console.log("parseGoods error",b)}finally{p.close(),n.value=!0}}function u(p){return p?`${p}?imageMogr2/sharpen/1%7CimageView2/2/w/400/q/70/format/webp`:""}function c({row:p,action:b}){const{itemTotal:m,skuId:h}=p,v=Number(m)||0;if(!v||Number(v)===0){ht.alert("购买数量必须大于等于1");return}const{goodsId:y,groupTypes:T}=s.value;let S="",w="";if((T==null?void 0:T.length)>0)for(const O of T)O.requireNum===1?S=O.groupID:O.requireNum===2&&(w=O.groupID);const C=b==="in"?w:S,k=K0("_oc_pid"),f=k?`&_oc_pid=${k}`:"";window.location.href=`https://${o}/order_checkout.html?sku_id=${h}&goods_id=${y}&goods_number=${v}&group_id=${C}${f}`}function d(){r("closed")}return Kt(async()=>{const p=await nr();p&&(a.value=await Ze.getItem(At(p.id)),l())}),(p,b)=>{const m=wA,h=ZH,v=cA,y=rO,T=Gz,S=yn,w=tO,C=py,k=To;return G(),Le(k,null,{default:ie(()=>[ue(C,{modelValue:_(n),"onUpdate:modelValue":b[2]||(b[2]=f=>lr(n)?n.value=f:null),top:"100px",width:"1300px","show-close":!1,onClosed:d},{header:ie(()=>[K("div",NQ,[ot(He(_(i).appChineseName||"")+"获取下架商品SKU ",1),b[3]||(b[3]=K("label",{class:"color-red"}," 在设置下单配置中【自动获取拼多多下架商品】关闭此功能 ",-1))])]),footer:ie(()=>[K("div",zQ,[ue(S,{type:"primary",size:"default",onClick:b[1]||(b[1]=f=>n.value=!1)},{default:ie(()=>[...b[11]||(b[11]=[ot(" 关闭 ",-1)])]),_:1})])]),default:ie(()=>[_(Ut)(_(s))?(G(),Le(h,{key:0},{description:ie(()=>[K("div",FQ,[b[5]||(b[5]=ot(" 未获取到商品SKU信息，请 ",-1)),ue(m,{type:"primary",underline:!1,onClick:b[0]||(b[0]=f=>l())},{default:ie(()=>[...b[4]||(b[4]=[ot(" 点此刷新重新 ",-1)])]),_:1})])]),_:1})):(G(),le(pt,{key:1},[K("div",BQ,[b[6]||(b[6]=K("div",{class:"label"}," 商品标题： ",-1)),K("div",jQ,He(_(s).title),1)]),K("div",UQ,[b[7]||(b[7]=K("div",{class:"label"}," 商品图片： ",-1)),K("div",qQ,[(G(!0),le(pt,null,$r(_(s).thumbnails,(f,O)=>(G(),le("img",{key:O,src:f,class:"goods-image"},null,8,VQ))),128))])]),ue(v),b[10]||(b[10]=K("div",{class:"color-red ft_20 bold"}," 注意：页面展示的拼购价和单买价可能和当次购买商品的价格存在差异，以实际支付时的金额为准！ ",-1)),ue(w,{data:_(s).skus||[],"max-height":"360px"},{default:ie(()=>[ue(y,{label:"图片",width:"80px"},{default:ie(({row:f})=>[K("img",{src:u(f.imgUrl)},null,8,HQ)]),_:1}),ue(y,{label:"SKU名称",prop:"skuSubName"}),ue(y,{label:"拼购价",width:"100px"},{default:ie(({row:f})=>[ot(" ￥ "+He(f.salePrice||"-"),1)]),_:1}),ue(y,{label:"单买价",width:"100px"},{default:ie(({row:f})=>[ot(" ￥ "+He(f.price||"-"),1)]),_:1}),ue(y,{label:"购买数量",width:"160px"},{default:ie(({row:f})=>[ue(T,{modelValue:f.itemTotal,"onUpdate:modelValue":O=>f.itemTotal=O,min:1,max:9999},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),ue(y,{label:"操作",width:"220px"},{default:ie(({row:f})=>[ue(S,{type:"primary",size:"small",onClick:O=>c({row:f,action:"single"})},{default:ie(()=>[...b[8]||(b[8]=[ot(" 单独购买 ",-1)])]),_:1},8,["onClick"]),ue(S,{type:"danger",size:"small",onClick:O=>c({row:f,action:"in"})},{default:ie(()=>[...b[9]||(b[9]=[ot(" 发起拼单 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])],64))]),_:1},8,["modelValue"])]),_:1})}}}),[["__scopeId","data-v-34ee38c1"]]);class KQ{constructor(){he(this,"tabId");he(this,"pddUserId");he(this,"pddAccessToken");he(this,"locationUrl",tl());he(this,"purchaseOrderInfo",{});he(this,"pddConsignee",{});he(this,"isExecuteAutoTriggerBuyBtnBefore",!1)}async initAddress(t){const r=await nr();this.tabId=r.id,this.purchaseOrderInfo=t;try{await of(this.locationUrl,{isRedirectLoginPage:!0}).then(this._setUserInfo.bind(this)).then(this._getPddNickname.bind(this),this._throwError).then(this._getSellerName.bind(this),this._throwError).then(this._getAreaId.bind(this),this._throwError).then(this._getPddAddress.bind(this),this._throwError).then(this._savePddAddress.bind(this),this._handleError)}catch(n){return Promise.reject(n)}}_setPurchaseOrderInfoToStorage(){return Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}_setUserInfo(t){this.pddUserId=t.pddUserId,this.pddAccessToken=t.pddAccessToken}_throwError(t){throw new Error(t)}_handleError(t){window.console.log(t)}async _getPddNickname(){const t=await lB({pddUserId:this.pddUserId,domain:window.location.hostname.split(".")[1]});t.nickname?(this.purchaseOrderInfo.purchaseOrderBuyer=t.nickname,await this._setPurchaseOrderInfoToStorage()):(window.console.log("getPddNickname error."),St({type:"error",message:"获取pdd账户名称失败,采购单将无法关联，请清理浏览器记录，重新登录pdd",duration:0,showClose:!0}))}async _getSellerName(){const t=I.trim(I(".goods-mall-name").text());t&&(this.purchaseOrderInfo.purchaseOrderSeller=t),this.purchaseOrderInfo.purchasePlatform="yangkeduo",await this._setPurchaseOrderInfoToStorage()}_getAreaId(){const t=this.purchaseOrderInfo.consignee||{};return this.purchaseOrderInfo.consigneeSuffixMap=BY(),Jt({url:"/order/purchase_order/get_pdd_area_ids",method:"GET",params:{province:t.province,city:t.city,county:t.county}}).then(r=>{window.console.log("fetch get_pdd_area_ids: ",r),this.pddConsignee||(this.pddConsignee={}),this.pddConsignee.name=t.fullname,this.pddConsignee.mobile=t.mobile,this.pddConsignee.province_id=r.provinceId,this.pddConsignee.city_id=r.cityId,this.pddConsignee.district_id=r.countyId,r.addCountyToStreet?this.pddConsignee.address=t.county+(t.town||"")+t.address:this.pddConsignee.address=(t.town||"")+t.address,this.pddConsignee.is_default="0",this.purchaseOrderInfo.consigneeSuffixMap&&(this.pddConsignee.name+=this.purchaseOrderInfo.consigneeSuffixMap.name,this.pddConsignee.address+=this.purchaseOrderInfo.consigneeSuffixMap.address),this.pddConsignee.address&&(this.pddConsignee.address=this.pddConsignee.address.replace("+","|"))}).catch(r=>r.reason?(ht.alert(r.reason),Promise.reject(r.reason)):Promise.reject("fetch /order/purchase_order/get_pdd_area_ids fail"))}async _getPddAddress(){const t=await iv({locationUrl:this.locationUrl,pddUserId:this.pddUserId,pddAccessToken:this.pddAccessToken});if(!t.length)return;const r=await this._getRealPddAddressInfo(this.pddConsignee,t);if(r)return Number(r.is_default)===1&&(this.pddConsignee.is_default="1"),r.address_id;t.length>=100&&await this._deletePddAddress(t[0].address_id)}_getRealPddAddressInfo(t,r){let n=null,a=null;for(const o of r)if(Number(o.is_default)===1&&(a=o),o.name===t.name&&o.province_id===t.province_id&&o.city_id===t.city_id&&o.district_id===t.district_id&&o.address===t.address&&(n=o),o&&n)break;const s=this._checkNeedAddNewPddAddress();return window.console.log("needAddNewPddAddress",s),s&&(a=null),n||a}_checkNeedAddNewPddAddress(){return"pddAddressAddType"in this.purchaseOrderInfo&&this.purchaseOrderInfo.pddAddressAddType==="addNew"}async _deletePddAddress(t){if(!t)return!1;try{const r=await Dr({url:`https://${this.locationUrl}/proxy/api/api/origenes/address/delete/${t}?pdduid=${this.pddUserId}`,method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",AccessToken:this.pddAccessToken}});window.console.log("删除地址结果",r)}catch(r){window.console.log("删除地址异常",r)}}async _savePddAddress(t){t?await this._editAddress(t):await this._addAddress(),this._autoTriggerBuyBtnBefore()}_autoTriggerBuyBtnBefore(){if(this.isExecuteAutoTriggerBuyBtnBefore){window.console.log("already execute autoTriggerBuyBtnBefore");return}this.isExecuteAutoTriggerBuyBtnBefore=!0,!Ut(this.purchaseOrderInfo)&&VX(this.purchaseOrderInfo)&&this._triggerPddPinBtn()}_triggerPddPinBtn(){const t=["去拼单","插队拼单","用券抢购","券后&立即购买","发起拼单","万人团拼单","立即购买","单独购买"];for(const r of t)if(this._matchPddPinBtnEvent(r)){window.console.log("btn: ",r);break}}_matchPddPinBtnEvent(t){let r=!1;return I("div[data-active]").each((s,o)=>{if(I.trim(I(o).text()).includes(t))return I(o).trigger("click"),t==="去拼单"&&n("参与拼单"),r=!0,!1}),r||I("span").each((s,o)=>{if(I.trim(I(o).text()).includes(t))return I(o).trigger("click"),r=!0,!1}),r||I(".sku-plus1").prevAll().each((s,o)=>{const i=I.trim(I(o).text());if(i.includes(t))return I(o).trigger("click"),a(I(o),t),r=!0,!1;if(t==="券后&立即购买"){const l=t.split("&");l.every(c=>i.includes(c))&&I(o).children().each((c,d)=>{const p=I.trim(I(d).text());if(l.every(m=>p.includes(m)))return a(I(d),"立即购买"),!1})}}),r;function n(s){I("button[data-active]").each((o,i)=>{if(I.trim(I(i).text()).includes(s))return I(i).trigger("click"),!1})}function a(s,o){if(s.children().length>0)s.children().each((i,l)=>{a(I(l),o)});else if(I.trim(s.text()).includes(o))return s.trigger("click"),r=!0,!1}}async _editAddress(t){this.pddConsignee.is_default="1";try{const r=await Dr({url:`https://${this.locationUrl}/proxy/api/api/origenes/address_info/${t}?pdduid=${this.pddUserId}`,method:"POST",body:eo.stringify(this.pddConsignee),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",AccessToken:this.pddAccessToken}});if(window.console.log("修改地址结果",r),!r){window.console.log("修改地址失败");return}if(r.error_msg){St.info(`修改地址失败,原因:${r.error_msg}`);return}this.purchaseOrderInfo.selAddressId=t,this.purchaseOrderInfo.pddAddressAddType="edit",await this._setPurchaseOrderInfoToStorage(),window.console.log("修改地址成功")}catch(r){window.console.log("修改地址异常",r)}}async _addAddress(){this.pddConsignee.is_default="0";try{const t=await Dr({url:`https://${this.locationUrl}/proxy/api/api/origenes/address?pdduid=${this.pddUserId}`,method:"POST",body:eo.stringify(this.pddConsignee),headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",AccessToken:this.pddAccessToken}});if(window.console.log("添加地址结果",t),!t){window.console.log("添加地址失败");return}if(t.error_msg){St.info(`添加地址失败,原因:${t.error_msg}`);return}if(t.address_id){this.purchaseOrderInfo.selAddressId=t.address_id,this._setPurchaseOrderInfoToStorage();return}const r=await iv({locationUrl:this.locationUrl,pddUserId:this.pddUserId,pddAccessToken:this.pddAccessToken}),n=await this._getRealPddAddressInfo(this.pddConsignee,r);n&&(this.purchaseOrderInfo.selAddressId=n.address_id),this.purchaseOrderInfo.pddConsignee=this.pddConsignee,this._setPurchaseOrderInfoToStorage()}catch(t){window.console.log("添加地址异常",t)}}}class GQ{constructor(t){he(this,"tabId");he(this,"needFixPddAccount",!1);he(this,"purchaseOrderInfo",{});he(this,"locationUrl",tl());he(this,"ctx");he(this,"targetGuessProps",[]);he(this,"selectedSkuLoop",0);he(this,"skuPaneLastDisplay","none");he(this,"retryCount",0);this.ctx=t.ctx}async init(){const t=await nr();this.tabId=t==null?void 0:t.id,await this._checkNeedFixPddAccount(),await this.initGetPurchaseOrderInfo(),window.console.log("pdd_detail_page purchaseOrderInfo: ",this.purchaseOrderInfo),await jt(),await this._initPurchaseOrderInfo(),await new KQ().initAddress(this.purchaseOrderInfo).catch(n=>{window.console.error("initAddress: ",n)})}async initGetPurchaseOrderInfo(){if(this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)if(this.retryCount<3)await Je(500),this.retryCount++,await this.initGetPurchaseOrderInfo();else return this.retryCount=0,Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}))}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){return Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}async _checkNeedFixPddAccount(){const t=I("body").html();if(!t)return;if(!t.includes("商品已下架，为你推荐相似商品")&&!t.includes("拦截拼多多比价失败")&&!t.includes("商品已售罄，为你推荐相似商品")&&!t.includes("商品已售罄，推荐以下相似商品")){window.console.log("checkNeedFixPddAccount success, not need to fix account");return}let r=await Ze.getItem("local:hasClearPddCookieApiUid");if(r=Number(r)||0,r!==1){await this._clearPddCookieApiUid();return}this.needFixPddAccount=!0;const n=await oP(),{hasUpdate:a}=n,s=a?`
        <div id="J_fixPddAccountTip">
          <p style="margin: 10px; color: red; font-size: 18px; margin-top: -40px; text-align: left;">
            温馨提示：您查看任何宝贝都显示这个界面的话您的账号可能权重很低，您可以
            <a href="javascript:;" class="J_fixPddAccount" style="color: blue; cursor: pointer;">点击这里修复您的权重</a>
            尝试登出账号。如果还是不行请尝试更换浏览器，更换IP地址，更换电脑。
          </p>
        </div>
      `:`
        <div id="J_fixPddAccountTip">
          <p style="margin: 10px; color: red; font-size: 18px; margin-top: -40px; text-align: left;">
            温馨提示：您查看任何宝贝都显示这个界面的话您的账号可能权重很低，您需要卸载插件，重新下载最新插件，如果还是不行请尝试更换浏览器，更换IP地址，更换电脑。
          </p>
        </div>
      `;I(".container ._2WVHL_s0:first").before(s),window.console.log("帐号权重太低，需要修复")}_clearPddCookieApiUid(){return window.console.log("clear pdd cookie：api_uid"),lf({name:"api_uid",url:`https://${this.locationUrl}`}).then(()=>{Ze.setItem("local:hasClearPddCookieApiUid",1)})}async renderPddNotSaleGoodsListDialog(){window.console.log("renderPddNotSaleGoodsListDialog");const t=await Cl(this.ctx,{position:"inline",anchor:"body",onMount:r=>{const n=ss(WQ,{onClosed:()=>{t==null||t.remove()}});return n.mount(r),n},onRemove:r=>{r==null||r.unmount()}});t.mount()}async _parseGoods(){await this.renderPddNotSaleGoodsListDialog()}async _initPurchaseOrderInfo(){this.purchaseOrderInfo.purchaseItem.purchaseUrl=window.location.href,this.purchaseOrderInfo.yangkeduoUrl=this.locationUrl,await this._setPurchaseOrderInfoToStorage(),await this._showPurchaseOrderInfo(),this.needFixPddAccount&&this._initParseGoods(),this._buildDuoCouponLandingPageEvent()}async _showPurchaseOrderInfo(){I(".goods-go-to-app").remove(),this.purchaseOrderInfo.purchaseItem.title=I(".goods-container-v2 span.enable-select>span").text();const{purchaseItem:t}=this.purchaseOrderInfo,{skuSubName:r}=t,n=r&&Zs(r)?r.split(" "):[],a=xp(n),s=G0(window.location.href);window.console.log("self.purchaseOrderInfo.purchaseOrderSeller",s),s&&(this.purchaseOrderInfo.purchaseOrderSeller=s,await this._setPurchaseOrderInfoToStorage()),I(document).on("click",".goods-group-buy-button,.goods-direct-btn-new,.goods-group-btn-new,.g-group-footer button",()=>{this._autoSelectedPropEvent(a)}),this._addSkuPanelPopperOpenListener(a),this._renderMultiCouponRecOrderItemTotal(),this._selectMultiCouponRecProp(a)}async _addSkuPanelPopperOpenListener(t){await Je(1e3);const r=I(".sku-plus1")[0];if(!r){this._addSkuPanelPopperOpenListener(t);return}const n=()=>{const s=I(r).css("display");s==="block"&&s!==this.skuPaneLastDisplay&&(this._autoSelectedPropEvent(t),this.skuPaneLastDisplay=s)};new MutationObserver(s=>{s.forEach(o=>{o.attributeName==="style"&&n()})}).observe(r,{attributes:!0,attributeFilter:["style"]}),n()}async _autoSelectedPropEvent(t){this._renderOrderItemTotal(),I(document).find(".sku-specs-key").length||await Je(300),this._selectProp(t)}async _renderOrderItemTotal(){var n;await Je(300);const t=this.purchaseOrderInfo,r=Number((n=t.purchaseItem)==null?void 0:n.itemTotal)||0;if(Number(I("input.sku-selector-input").val())>=r)return null;if(r>2&&I("input.sku-selector-input").val(r-1),r)for(let a=1;a<=r&&!(Number.parseInt(I("input.sku-selector-input").val())>=r);a++)I(document).find(".sku-selector-increase").trigger("click");this.purchaseOrderInfo.isAutoIncreasePurchaseNumber=!0}_selectProp(t=[]){if(this.targetGuessProps=Y0(this.purchaseOrderInfo)||t,!this.targetGuessProps||!this.targetGuessProps.length){window.console.log("未找到产品规格匹配的货源SKU");return}window.console.log("开始自动选择货源SKU");for(const r of this.targetGuessProps){const n=this._filterSpecialString(r);window.console.log("映射的规格：",n),I(document).find(".sku-specs-key").each((a,s)=>{I(s).next().find("div").each((o,i)=>{const l=I.trim(I(i).attr("aria-label")),u=I(i).attr("sku-spec-value-selected");if(window.console.log("当前比对的页面上的货源规格：",l),!u&&this._filterSpecialString(l)===n){window.console.log(`【${l}】比对成功，自动选中`),I(i).attr("sku-spec-value-selected",1);const c=I(i).attr("class").split(" ");I(i).trigger("click");const d=I(i).attr("class").split(" ");c>d&&I(i).trigger("click"),this.selectedSkuLoop++}})})}this.targetGuessProps&&this.selectedSkuLoop>0&&J0(this.purchaseOrderInfo)}async _renderMultiCouponRecOrderItemTotal(){var n;if(await Je(1e3),!I(".sku-plus1").length){this._renderMultiCouponRecOrderItemTotal();return}const t=this.purchaseOrderInfo,r=Number((n=t.purchaseItem)==null?void 0:n.itemTotal)||0;if(!(Number(I("input[type=number]").val())>=r)){for(let a=1;a<=r&&!(Number.parseInt(I("input[type=number]").val())>=r);a++)I(document).find("input[type=number]").next().trigger("click");this.purchaseOrderInfo.isAutoIncreasePurchaseNumber=!0}}async _selectMultiCouponRecProp(t){if(await Je(1e3),!I(".sku-plus1").length){this._selectMultiCouponRecProp(t);return}if(!t)return;const r=t.length;for(let n=0;n<r;n++)I(".sku-selector-container").find(".sku-info .info-list .detail").each((a,s)=>{const o=I.trim(I(s).text());this._filterSpecialString(o)===this._filterSpecialString(t[n])&&!I(s).hasClass("select")&&I(s).trigger("click")})}_filterSpecialString(t){return t.replace(/(\(|\)|（|）|【|】|\[|\]|，|,|；|;|《|》|<|>|\s)*/g,"")}_initParseGoods(){var r;if(SC(this.locationUrl))return;I("#J_fixPddAccountTip").length>0&&(I("#J_fixPddAccountTip").append(`
          <div style="font-size:18px;color: red;">
            您也可以<a href="javascript:;" class="J_manualParseGoods" style="color: blue; cursor: pointer;">点击这里获取下架商品</a>，进行下单
          </div>
        `),I(document).on("click",".J_manualParseGoods",()=>{this._parseGoods()})),Number((r=this.purchaseOrderInfo.purchaseSetting)==null?void 0:r.isAutoParsePddGoods)===1&&this._parseGoods()}_buildDuoCouponLandingPageEvent(){if(!SC(this.locationUrl))return!1;const t=I("#buy-button");t.trigger("click");let r=!1;I(document).find("span").each((a,s)=>{if(I(s).text().includes("一键领取"))return r=!0,I(s).closest("div").click(),!1});const n=this.purchaseOrderInfo.purchaseItem;!r&&!t.length&&n.realPurchaseUrl&&!n.realPurchaseUrl.includes(`${this.locationUrl}/duo_coupon_landing.html`)&&(window.location.href=n.realPurchaseUrl)}}function YQ(e){return new GQ(e).init()}class JQ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),this._checkIsVerificationBack()&&this._continuePurchase()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_checkIsVerificationBack(){const t=window.location.href;return window.console.log(t),window.console.log(t.indexOf("refer_page_name=psnl_varification")),t.includes("refer_page_name=psnl_varification")}_continuePurchase(){var r;const t=(r=this.purchaseOrderInfo.purchaseItem)==null?void 0:r.purchaseUrl;t&&(window.location.href=t)}}function XQ(){return new JQ().init()}class QQ{constructor(){he(this,"locationUrl",tl())}async init(){window.console.log("√√√ pdd login_page_content init"),I("#submit-button").on("click",()=>{lf({name:"pdd_user_id",url:`https://${this.locationUrl}`}),lf({name:"PDDAccessToken",url:`https://${this.locationUrl}`})})}}function ZQ(){return new QQ().init()}class eZ{constructor(){he(this,"tabId");he(this,"pddUserId");he(this,"pddAccessToken");he(this,"noUseCouponClickEvent",!1);he(this,"locationUrl",tl());he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),I(".goods-go-to-app").remove();try{await of(this.locationUrl).then(this._setUserInfo.bind(this)).then(this._initAddress.bind(this),this._throwError).then(this._buildEvent.bind(this),this._throwError)}catch(r){return Promise.reject(r)}}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){return Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}_throwError(t){throw new Error(t)}_setUserInfo(t){this.pddUserId=t.pddUserId,this.pddAccessToken=t.pddAccessToken}async _initAddress(){const t=window.location.href.toLowerCase();if(window.console.log(t),!t.includes("sel_address_id"))if(this.purchaseOrderInfo.selAddressId)window.location.href=`${t}&sel_address_id=${this.purchaseOrderInfo.selAddressId}`;else{const r=await iv({locationUrl:this.locationUrl,pddUserId:this.pddUserId,pddAccessToken:this.pddAccessToken});if(!this.purchaseOrderInfo.pddConsignee||!r.length)return;const n=this._getRealPddAddressInfo(this.purchaseOrderInfo.pddConsignee,r);n&&n.address_id&&(window.location.href=`${t}&sel_address_id=${n.address_id}`)}}_getRealPddAddressInfo(t,r){for(const n in r){const a=r[n];if(a.name===t.name&&a.province_id===t.province_id&&a.city_id===t.city_id&&a.district_id===t.district_id&&a.address===t.address)return a}return null}async _buildEvent(){this._setDefaultAlipay(),await Je(1e3),this._checkAddress({isFirstCheck:!0}),this._initBuyNumber(),this._processPurchaseOrderInfo(),I(".oc-address").next().children().last().addClass("J_logisticBox"),this._initUseCouponPlatform(),I(".oc-goods-reduce,.oc-goods-increase").on("click",()=>{this._rebuildPurchaseOrderInfo()}),I(document).on("click",".oc-m-coupon, .oc-m-coupon-cancel, .oc-enable-coupons",()=>{this._rebuildPurchaseOrderInfo()}),I(document).find('input[type="number"]').parent().on("click",()=>{this._rebuildPurchaseOrderInfo()}),I(document).on("click",".J_logisticBox",()=>{this._rebuildPurchaseOrderInfo()})}_checkAddress({isFirstCheck:t=!1,isCheckMatchAddress:r=!1}){var b;const n=this._getPddAddress();window.console.log(n);const a=p(window.location.href.split("?")[1]||"");if(this.purchaseOrderInfo.selAddressId&&(!a||!a.sel_address_id))return!1;const s=pM(this.purchaseOrderInfo.consignee)||{},o=n.name,i=n.phone,l=n.fullAddress;let u=!1,c="",d=s.mobile;if(s.province&&["北京","上海","重庆","天津"].includes(s.province)?(c=s.county||"",s.address&&(c+=s.address.replace("+","|"))):s.address&&(c=s.address.replace("+","|")),"consigneeSuffixMap"in this.purchaseOrderInfo&&(s.fullname+=this.purchaseOrderInfo.consigneeSuffixMap.name,c+=this.purchaseOrderInfo.consigneeSuffixMap.address),i.includes("****")&&(d=FY(d,"mobile")),s.fullname!==o||d!==i||!l.includes(c)){I(".oc-address-main-info").append(`
        <div style='background-color:yellow;padding:2px 4px;color:red;font-size:20px;position: fixed;'>
          <strong>
            ${Cp(this.purchaseOrderInfo.appInfo)}
          </strong>
        </div>
      `);const m=`
        <div
          style="
            max-width: 400px;
            position: fixed;
            z-index: 99;
            bottom: .53rem;
            line-height: 28px;
            left: 5%;
            margin: 0 auto;
            font-weight: bold;
            text-align: center;
            background-color: yellow;
            padding: 2px 4px;
            color: red;
            font-size: 26px;
          "
        >
          ${Cp(this.purchaseOrderInfo.appInfo)}
        </div>
      `;I(document).find("#order_checkout").append(m),t&&ht.alert(`当前地址与${((b=this.purchaseOrderInfo.appInfo)==null?void 0:b.platformChineseName)||""}买家地址不一致，请核对`)}else u=!0;if(this.purchaseOrderInfo.isMatchAddress=u,t&&!u&&dB(this.purchaseOrderInfo),r)return u;V0(this.purchaseOrderInfo,u);function p(m){return m.split("&").reduce((h,v)=>{const[y,T]=v.split(/=(.*)/s);if(y){const S=decodeURIComponent(y.replace(/\+/g," ")),w=decodeURIComponent((T||"").replace(/\+/g," "));h[S]=w}return h},{})}}_getPddAddress(){let t={province:"",city:"",county:"",town:"",detail:"",name:"",phone:"",fullAddress:""};const r=I(".oc-address-info").children("div:eq(1)"),n=r.children("div:eq(0)");t.name=I.trim(n.children("span:eq(0)").text()),t.phone=I.trim(n.children("span:eq(1)").text()),t.fullAddress=I.trim(r.children("div:eq(1)").text());const a=t.fullAddress.split(" ");return t.province=a[0]?a[0]:"",t.city=a[1]?a[1]:"",t.county=a[2]?a[2]:"",t.detail=a[3]?a[3]:"",(t.name===""||t.phone===""||t.fullAddress==="")&&(t=this._getPddAddressSub(t)),this._setPurchaseConsigneeInfo(t.fullAddress,t.name,t.phone),t}_getPddAddressSub(t){const r=I.trim(I(".oc-address-info").text()),n=r.match(/\d{11}/);if(!n||!n[0])return t;t.phone=n[0];const a=r.indexOf(t.phone);t.name=r.substr(0,a);const s=t.phone.length;t.fullAddress=r.substr(a+s,r.length-(a+s));const o=t.fullAddress.split(" ");return t.province=o[0]?o[0]:"",t.city=o[1]?o[1]:"",t.county=o[2]?o[2]:"",t.detail=o[3]?o[3]:"",t}_setPurchaseConsigneeInfo(t,r,n){if(t=t.replace(/\s+/g,""),!t||!r||!n)return!1;this.purchaseOrderInfo.purchaseOrderFullAddress=t,this.purchaseOrderInfo.purchaseOrderFullname=r,this.purchaseOrderInfo.purchaseOrderMobile=n,this._setPurchaseOrderInfoToStorage()}_setDefaultAlipay(){I(document).find('div[data-active="before-white"]').each((t,r)=>I(r).text().includes("支付宝")?(I(r).children("div").children("div").trigger("click"),!1):!0)}async _initBuyNumber(){var n;const t=Number((n=this.purchaseOrderInfo.purchaseItem)==null?void 0:n.itemTotal)||0;let r;if(this.purchaseOrderInfo.isAutoIncreasePurchaseNumber)return null;if(I(".oc-buy-number").length>0){const a=I(".oc-buy-number").val();this._startIncreaseGoodsNum(a,t)}else I(document).find(".oc-address").next().children("div").each((a,s)=>{if(I(s).text().includes("购买数量")){r=I(s).find('input[type="number"]');const i=r.val();return t>i&&(r.val(t),wa(r[0],"blur")),!1}});await Je(1e3),this._rebuildPurchaseOrderInfo()}_startIncreaseGoodsNum(t,r){t===1&&r>1&&typeof t<"u"&&this._increaseGoodsNum(r-t)}async _increaseGoodsNum(t){I(".oc-goods-increase").click(),t--,await Je(300),t>0&&this._increaseGoodsNum(t)}_rebuildPurchaseOrderInfo(){const t=this.purchaseOrderInfo;t.purchasePlatform=sf;const r=I(document).find(".oc-safe-pay-statement").parent(),n=/[提交订单|快要抢光实付款][\s:：]*(￥|¥)(0\.\d?[1-9]|(?!0)\d{1,6}(?:\.\d?[1-9])?)/.exec(r.text());let a=0;n&&n[2]&&(a=Number(n[2]),a=Number(a.toFixed(2))),t.purchaseOrderPayment=a,t.purchaseItem&&(t.purchaseItem.purchaseNum=Number(I(".oc-buy-number").eq(0).val())||0,t.purchaseItem.purchasePrice=Number((t.purchaseOrderPayment/t.purchaseItem.purchaseNum).toFixed(2))),this._setPurchaseOrderInfoToStorage(),this._viewProfit(),Number(this.purchaseOrderInfo.purchaseOrderPayment)<20&&this._viewPayNotice()}_viewProfit(){const[t,r]=xP(this.purchaseOrderInfo);I(".J_purchaseProfit").remove();const n=`
      <div 
        class="J_purchaseProfit"
        style="
        max-width: 768px;
        position: fixed;
        z-index: 99;
        bottom: .53rem;
        line-height: 28px;
        left: 0%;
        right: 0%;
        margin: 0 auto;
        font-weight: bold;
        text-align: center;
        background-color: yellow;
        padding: 2px 4px;
        color: red;
        font-size: 18px;
        "
      >
        <strong style='font-size:26px;'> 利润：￥${t} 利润率：${r}% </strong>（仅供参考）
      </div>
    `;I(document).find("#order_checkout").append(n)}_viewPayNotice(){I(".J_purchasePayNotice").remove(),I(document).find("#order_checkout").append(`
      <div 
        class="J_purchasePayNotice"
        style="max-width: 469px;position: fixed;z-index: 9999;bottom: 0rem;line-height: 15px;left: -298px;right: 0;margin:0 auto;font-weight:bold;background-color:yellow;padding:2px 4px;color:red;font-size: 14px;"
      >
        小额订单容易被拼多多自动退款，建议下单后用拼多多APP选择多多支付，降低自动退款的概率
      </div>
    `)}_processPurchaseOrderInfo(){let t=I.trim(I(".oc-final-amount").text())||"";t=t.substring(1,1+t.length),t=Number(t).toFixed(2),this.purchaseOrderInfo.purchaseOrderPayment=Number(t),this._setPurchaseOrderInfoToStorage()}_initUseCouponPlatform(){const t=()=>{I(".oc-enable-coupons").parent().parent().children().each((r,n)=>{if(I(n).text().includes("暂不使用优惠"))return I(n).on("click",async()=>{await Je(1e3),this._rebuildPurchaseOrderInfo()}),this.noUseCouponClickEvent=!0,!1})};I(document).find('div[data-active="cell-white"]').each((r,n)=>{if(I(n).text().includes("平台优惠"))return I(n).on("click",async()=>{await Je(1e3),this._rebuildPurchaseOrderInfo(),this.noUseCouponClickEvent||t()}),!1})}}function tZ(){return new eZ().init()}class rZ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),this._sendOpenFailMessage()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_sendOpenFailMessage(){St.info("请进行安全验证")}}function nZ(){return new rZ().init()}class aZ{constructor(){he(this,"tabId");he(this,"purchaseOrderInfo",{})}async init(){const t=await nr();if(this.tabId=t==null?void 0:t.id,this.purchaseOrderInfo=await this._getPurchaseOrderInfoFromStorage(),!this.purchaseOrderInfo)return Promise.reject(je.failResult({reason:"no purchase order info.",code:"noPurchaseOrderInfo"}));await jt(),I(".goods-go-to-app").remove(),await this._getPddOrderId(),this._savePurchaseOrderInfo()}_getPurchaseOrderInfoFromStorage(){return Ze.getItem(At(this.tabId))}_setPurchaseOrderInfoToStorage(){return Ze.setItem(At(this.tabId),this.purchaseOrderInfo)}async _getPddOrderId(){if(!this.purchaseOrderInfo.purchaseOrderSn){const t=window.location.href,r=/order_sn=([\d-]+)/.exec(t);if(!r||r.length<2){ht.alert("获取拼多多订单号失败，请手动关联订单");return}this.purchaseOrderInfo.purchaseOrderSn=r[1],await this._setPurchaseOrderInfoToStorage()}}_savePurchaseOrderInfo(){var t;if(!this.purchaseOrderInfo.purchaseOrderSn){ht.alert(`关联${((t=this.purchaseOrderInfo.appInfo)==null?void 0:t.platformChineseName)||""}订单失败，请手动关联`);return}_a({purchaseOrderInfo:this.purchaseOrderInfo,isPurchaseOrderPaid:!0})}}function sZ(){return new aZ().init()}const oZ={registration:"runtime",cssInjectionMode:"ui",main(){return{async validatorCollectFields(e){if(e.includes("postFee"))return(await $B()).isAttachPostFeeToPrice==="1"?Promise.resolve():Promise.reject()},async onCollectError(e){console.warn(`error code :${e.antiCode}`)},createCollectUi:YY,createPurchaseUi:IX,initPurchase1688DetailPage:JX,initPurchase1688CartPage:MX,initPurchase1688ConfirmPage:GX,initPurchase1688WaitPayPage:rQ,initPurchase1688PaySuccessPage:QX,initPurchase1688SearchSameGoodPage:eQ,initPurchaseYangKeDuoLoginPage:ZQ,initPurchaseYangKeDuoVerificationPage:nZ,initPurchaseYangKeDuoHomePage:XQ,initPurchaseYangKeDuoDetailPage:YQ,initPurchaseYangKeDuoOrderCheckoutPage:tZ,initPurchaseYangKeDuoPayConfirmPage:PQ,initPurchaseYangKeDuoAliPayResultPage:LQ,initPurchaseYangKeDuoAliPayCheckRelatePage:AQ,initPurchaseYangKeDuoAliPayGroupSuccessPage:$Q,initPurchaseYangKeDuoAliPaySuccessPage:DQ,initPurchaseYangKeDuoWechatCallbackPage:sZ,initPurchaseTaoBaoDetailPage:gQ,initPurchaseTaoBaoConfirmPage:fQ,initPurchaseTaoBaoCartPage:cQ,initPurchaseTaoBaoPayResultPage:yQ,initPurchaseTaoBaoPaySuccessPage:wQ,initPurchaseTaoBaoAddCartSucceedPage:aQ,initPurchaseTaoBaoAddTempAddressPage:oQ,initPurchaseTaoBaoAlipaySuccessPage:lQ,initPurchaseTaoBaoDeliverAddressPage:hQ,initPurchaseTaoBaoSearchSameGoods:SQ,initPurchaseTMallPaySuccessPage:xQ,initPurchaseTMallSearchSameGoods:kQ,createPlatformCrawlUi:PJ}}};function Hte(){}function Ep(e,...t){}const iZ={debug:(...e)=>Ep(console.debug,...e),log:(...e)=>Ep(console.log,...e),warn:(...e)=>Ep(console.warn,...e),error:(...e)=>Ep(console.error,...e)};return(async()=>{try{return await oZ.main()}catch(e){throw iZ.error('The unlisted script "platform-base-utils" crashed on startup!',e),e}})()})();
platformBaseUtils;
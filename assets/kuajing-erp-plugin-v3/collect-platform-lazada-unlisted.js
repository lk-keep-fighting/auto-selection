var Ee=Object.defineProperty;var he=(y,m,g)=>m in y?Ee(y,m,{enumerable:!0,configurable:!0,writable:!0,value:g}):y[m]=g;var V=(y,m,g)=>he(y,typeof m!="symbol"?m+"":m,g);var collectPlatformLazadaUnlisted=(function(){"use strict";var B,F;((F=(B=globalThis.browser)==null?void 0:B.runtime)==null?void 0:F.id)==null?globalThis.chrome:globalThis.browser;const y=e=>new Promise(n=>{setTimeout(()=>{n()},e)}),m=(e,n)=>new Promise((r,c)=>{const{count:f,interval:d=1e3}=n;let s=f;const i=async()=>{try{const o=await e();r(o)}catch(o){s&&s>0?(s--,d&&await y(d),i()):c(o)}};i()});function g(e){let n=e.length;for(;--n>=0;)e[n]=0}const W=3,Y=258,I=29,X=256+1+I,A=30,q=512,G=new Array((X+2)*2);g(G);const Q=new Array(A*2);g(Q);const Z=new Array(q);g(Z);const K=new Array(Y-W+1);g(K);const ee=new Array(I);g(ee);const re=new Array(A);g(re);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const M=new Uint8Array(256);for(let e=0;e<256;e++)M[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;M[254]=M[254]=1;function ne(e){return e==null||typeof e=="function"?{main:e}:e}const te=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),se=new Map(te);class S extends Error{constructor(r){super(S._prepareSuperMessage(r));V(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const oe=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],O=new WeakSet,ie=e=>{O.add(e);const n=e.toJSON();return O.delete(e),n},L=e=>se.get(e)??Error,P=({from:e,seen:n,to:r,forceEnumerable:c,maxDepth:f,depth:d,useToJSON:s,serialize:i})=>{if(!r)if(Array.isArray(e))r=[];else if(!i&&T(e)){const t=L(e.name);r=new t}else r={};if(n.push(e),d>=f)return r;if(s&&typeof e.toJSON=="function"&&!O.has(e))return ie(e);const o=t=>P({from:t,seen:[...n],forceEnumerable:c,maxDepth:f,depth:d,useToJSON:s,serialize:i});for(const[t,a]of Object.entries(e)){if(a&&a instanceof Uint8Array&&a.constructor.name==="Buffer"){r[t]="[object Buffer]";continue}if(a!==null&&typeof a=="object"&&typeof a.pipe=="function"){r[t]="[object Stream]";continue}if(typeof a!="function"){if(!a||typeof a!="object"){try{r[t]=a}catch{}continue}if(!n.includes(e[t])){d++,r[t]=o(e[t]);continue}r[t]="[Circular]"}}for(const{property:t,enumerable:a}of oe)typeof e[t]<"u"&&e[t]!==null&&Object.defineProperty(r,t,{value:T(e[t])?o(e[t]):e[t],enumerable:c?!0:a,configurable:!0,writable:!0});return r};function ae(e,n={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:c=!0}=n;return typeof e=="object"&&e!==null?P({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:c,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function le(e,n={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=n;if(e instanceof Error)return e;if(ce(e)){const c=L(e.name);return P({from:e,seen:[],to:new c,maxDepth:r,depth:0,serialize:!1})}return new S(e)}function T(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function ce(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var ue=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,fe=Object.prototype.propertyIsEnumerable,N=(e,n,r)=>n in e?ue(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,j=(e,n)=>{for(var r in n||(n={}))ge.call(n,r)&&N(e,r,n[r]);if(D)for(var r of D(n))fe.call(n,r)&&N(e,r,n[r]);return e},$=(e,n)=>de(e,pe(n)),C=(e,n,r)=>new Promise((c,f)=>{var d=o=>{try{i(r.next(o))}catch(t){f(t)}},s=o=>{try{i(r.throw(o))}catch(t){f(t)}},i=o=>o.done?c(o.value):Promise.resolve(o.value).then(d,s);i((r=r.apply(e,n)).next())});function me(e){let n,r={};function c(){Object.entries(r).length===0&&(n==null||n(),n=void 0)}let f=Math.floor(Math.random()*1e4);function d(){return f++}return{sendMessage(s,i,...o){return C(this,null,function*(){var t,a,l,b;const E={id:d(),type:s,data:i,timestamp:Date.now()},_=(a=yield(t=e.verifyMessageData)==null?void 0:t.call(e,E))!=null?a:E;(l=e.logger)==null||l.debug(`[messaging] sendMessage {id=${_.id}} ─ᐅ`,_,...o);const v=yield e.sendMessage(_,...o),{res:u,err:p}=v??{err:new Error("No response")};if((b=e.logger)==null||b.debug(`[messaging] sendMessage {id=${_.id}} ᐊ─`,{res:u,err:p}),p!=null)throw le(p);return u})},onMessage(s,i){var o,t,a;if(n==null&&((o=e.logger)==null||o.debug(`[messaging] "${s}" initialized the message listener for this context`),n=e.addRootListener(l=>{var b,E;if(typeof l.type!="string"||typeof l.timestamp!="number"){if(e.breakError)return;const u=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(l)}`);throw(b=e.logger)==null||b.error(u),u}(E=e==null?void 0:e.logger)==null||E.debug("[messaging] Received message",l);const _=r[l.type];if(_==null)return;const v=_(l);return Promise.resolve(v).then(u=>{var p,H;return(H=(p=e.verifyMessageData)==null?void 0:p.call(e,u))!=null?H:u}).then(u=>{var p;return(p=e==null?void 0:e.logger)==null||p.debug(`[messaging] onMessage {id=${l.id}} ─ᐅ`,{res:u}),{res:u}}).catch(u=>{var p;return(p=e==null?void 0:e.logger)==null||p.debug(`[messaging] onMessage {id=${l.id}} ─ᐅ`,{err:u}),{err:ae(u)}})})),r[s]!=null){const l=Error(`[messaging] In this JS context, only one listener can be setup for ${s}`);throw(t=e.logger)==null||t.error(l),l}return r[s]=i,(a=e.logger)==null||a.log(`[messaging] Added listener for ${s}`),()=>{delete r[s],c()}},removeAllListeners(){Object.keys(r).forEach(s=>{delete r[s]}),c()}}}for(var w=256,R=[],U=256,h;w--;)R[w]=(w+256).toString(16).substring(1);function ye(e){var n=0,r=11;if(!h||w+r>U*2)for(h="",w=0;n<U;n++)h+=R[Math.random()*256|0];return h.substring(w,w+++r)}var k="@webext-core/messaging/window",z="@webext-core/messaging/window/response";function we(e){const n=e.namespace,r=ye();let c=[];const f=(s,i)=>new Promise(o=>{const t=l=>{l.data.type===z&&l.data.namespace===n&&l.data.instanceId!==r&&l.data.message.type===s.type&&(o(l.data.response),a())},a=()=>window.removeEventListener("message",t);c.push(a),window.addEventListener("message",t),window.postMessage({type:k,message:s,senderOrigin:location.origin,namespace:n,instanceId:r},i??"*")}),d=me($(j({},e),{sendMessage(s,i){return f(s,i)},addRootListener(s){const i=o=>C(this,null,function*(){if(o.data.type!==k||o.data.namespace!==n||o.data.instanceId===r)return;const t=yield s(o.data.message);window.postMessage({type:z,response:t,instanceId:r,message:o.data.message,namespace:n},o.data.senderOrigin)});return window.addEventListener("message",i),()=>window.removeEventListener("message",i)},verifyMessageData(s){return structuredClone(s)}}));return $(j({},d),{removeAllListeners(){d.removeAllListeners(),c.forEach(s=>s()),c=[]}})}const J=we({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),_e=ne({main(){const e=async()=>{try{await m(()=>{var r;const n=((r=window.__moduleData__)==null?void 0:r.data.root.fields.skuInfos)||{};return Object.values(n).some(c=>c.price)?Promise.resolve():Promise.reject()},{count:5,interval:1e3})}finally{J.sendMessage("sendModuleData",window.__moduleData__)}};J.onMessage("getModuleData",e)}});function ve(){}function x(e,...n){}const be={debug:(...e)=>x(console.debug,...e),log:(...e)=>x(console.log,...e),warn:(...e)=>x(console.warn,...e),error:(...e)=>x(console.error,...e)};return(async()=>{try{return await _e.main()}catch(e){throw be.error('The unlisted script "collect-platform-lazada-unlisted" crashed on startup!',e),e}})()})();
collectPlatformLazadaUnlisted;
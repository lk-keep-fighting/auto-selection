var iT=Object.defineProperty;var sT=($r,br,le)=>br in $r?iT($r,br,{enumerable:!0,configurable:!0,writable:!0,value:le}):$r[br]=le;var ne=($r,br,le)=>sT($r,typeof br!="symbol"?br+"":br,le);var background=(function(){"use strict";var Vf,Xf,Jf,ed;function $r(e){return e==null||typeof e=="function"?{main:e}:e}const le=(Xf=(Vf=globalThis.browser)==null?void 0:Vf.runtime)!=null&&Xf.id?globalThis.browser:globalThis.chrome;var Ho=Object.prototype.hasOwnProperty;function pi(e,r){var t,a;if(e===r)return!0;if(e&&r&&(t=e.constructor)===r.constructor){if(t===Date)return e.getTime()===r.getTime();if(t===RegExp)return e.toString()===r.toString();if(t===Array){if((a=e.length)===r.length)for(;a--&&pi(e[a],r[a]););return a===-1}if(!t||typeof e=="object"){a=0;for(t in e)if(Ho.call(e,t)&&++a&&!Ho.call(r,t)||!(t in r)||!pi(e[t],r[t]))return!1;return Object.keys(r).length===a}}return e!==e&&r!==r}const Sd=new Error("request for lock canceled");var Ad=function(e,r,t,a){function s(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function d(p){try{f(a.next(p))}catch(_){c(_)}}function g(p){try{f(a.throw(p))}catch(_){c(_)}}function f(p){p.done?o(p.value):s(p.value).then(d,g)}f((a=a.apply(e,r||[])).next())})};class kd{constructor(r,t=Sd){this._value=r,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}acquire(r=1,t=0){if(r<=0)throw new Error(`invalid weight ${r}: must be positive`);return new Promise((a,s)=>{const o={resolve:a,reject:s,weight:r,priority:t},c=Wo(this._queue,d=>t<=d.priority);c===-1&&r<=this._value?this._dispatchItem(o):this._queue.splice(c+1,0,o)})}runExclusive(r){return Ad(this,arguments,void 0,function*(t,a=1,s=0){const[o,c]=yield this.acquire(a,s);try{return yield t(o)}finally{c()}})}waitForUnlock(r=1,t=0){if(r<=0)throw new Error(`invalid weight ${r}: must be positive`);return this._couldLockImmediately(r,t)?Promise.resolve():new Promise(a=>{this._weightedWaiters[r-1]||(this._weightedWaiters[r-1]=[]),Cd(this._weightedWaiters[r-1],{resolve:a,priority:t})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(r){this._value=r,this._dispatchQueue()}release(r=1){if(r<=0)throw new Error(`invalid weight ${r}: must be positive`);this._value+=r,this._dispatchQueue()}cancel(){this._queue.forEach(r=>r.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(r){const t=this._value;this._value-=r.weight,r.resolve([t,this._newReleaser(r.weight)])}_newReleaser(r){let t=!1;return()=>{t||(t=!0,this.release(r))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let r=this._value;r>0;r--){const t=this._weightedWaiters[r-1];t&&(t.forEach(a=>a.resolve()),this._weightedWaiters[r-1]=[])}else{const r=this._queue[0].priority;for(let t=this._value;t>0;t--){const a=this._weightedWaiters[t-1];if(!a)continue;const s=a.findIndex(o=>o.priority<=r);(s===-1?a:a.splice(0,s)).forEach((o=>o.resolve()))}}}_couldLockImmediately(r,t){return(this._queue.length===0||this._queue[0].priority<t)&&r<=this._value}}function Cd(e,r){const t=Wo(e,a=>r.priority<=a.priority);e.splice(t+1,0,r)}function Wo(e,r){for(let t=e.length-1;t>=0;t--)if(r(e[t]))return t;return-1}var Ed=function(e,r,t,a){function s(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function d(p){try{f(a.next(p))}catch(_){c(_)}}function g(p){try{f(a.throw(p))}catch(_){c(_)}}function f(p){p.done?o(p.value):s(p.value).then(d,g)}f((a=a.apply(e,r||[])).next())})};class Id{constructor(r){this._semaphore=new kd(1,r)}acquire(){return Ed(this,arguments,void 0,function*(r=0){const[,t]=yield this._semaphore.acquire(1,r);return t})}runExclusive(r,t=0){return this._semaphore.runExclusive(()=>r(),1,t)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(r=0){return this._semaphore.waitForUnlock(1,r)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const ha=((ed=(Jf=globalThis.browser)==null?void 0:Jf.runtime)==null?void 0:ed.id)==null?globalThis.chrome:globalThis.browser,Fe=Od();function Od(){const e={local:pa("local"),session:pa("session"),sync:pa("sync"),managed:pa("managed")},r=T=>{const v=e[T];if(v==null){const y=Object.keys(e).join(", ");throw Error(`Invalid area "${T}". Options: ${y}`)}return v},t=T=>{const v=T.indexOf(":"),y=T.substring(0,v),k=T.substring(v+1);if(k==null)throw Error(`Storage key should be in the form of "area:key", but received "${T}"`);return{driverArea:y,driverKey:k,driver:r(y)}},a=T=>T+"$",s=(T,v)=>{const y={...T};return Object.entries(v).forEach(([k,I])=>{I==null?delete y[k]:y[k]=I}),y},o=(T,v)=>T??v??null,c=T=>typeof T=="object"&&!Array.isArray(T)?T:{},d=async(T,v,y)=>{const k=await T.getItem(v);return o(k,(y==null?void 0:y.fallback)??(y==null?void 0:y.defaultValue))},g=async(T,v)=>{const y=a(v),k=await T.getItem(y);return c(k)},f=async(T,v,y)=>{await T.setItem(v,y??null)},p=async(T,v,y)=>{const k=a(v),I=c(await T.getItem(k));await T.setItem(k,s(I,y))},_=async(T,v,y)=>{if(await T.removeItem(v),y!=null&&y.removeMeta){const k=a(v);await T.removeItem(k)}},b=async(T,v,y)=>{const k=a(v);if(y==null)await T.removeItem(k);else{const I=c(await T.getItem(k));[y].flat().forEach(E=>delete I[E]),await T.setItem(k,I)}},x=(T,v,y)=>T.watch(v,y);return{getItem:async(T,v)=>{const{driver:y,driverKey:k}=t(T);return await d(y,k,v)},getItems:async T=>{const v=new Map,y=new Map,k=[];T.forEach(E=>{let M,D;typeof E=="string"?M=E:"getValue"in E?(M=E.key,D={fallback:E.fallback}):(M=E.key,D=E.options),k.push(M);const{driverArea:l,driverKey:j}=t(M),$=v.get(l)??[];v.set(l,$.concat(j)),y.set(M,D)});const I=new Map;return await Promise.all(Array.from(v.entries()).map(async([E,M])=>{(await e[E].getItems(M)).forEach(l=>{const j=`${E}:${l.key}`,$=y.get(j),q=o(l.value,($==null?void 0:$.fallback)??($==null?void 0:$.defaultValue));I.set(j,q)})})),k.map(E=>({key:E,value:I.get(E)}))},getMeta:async T=>{const{driver:v,driverKey:y}=t(T);return await g(v,y)},getMetas:async T=>{const v=T.map(I=>{const E=typeof I=="string"?I:I.key,{driverArea:M,driverKey:D}=t(E);return{key:E,driverArea:M,driverKey:D,driverMetaKey:a(D)}}),y=v.reduce((I,E)=>{var M;return I[M=E.driverArea]??(I[M]=[]),I[E.driverArea].push(E),I},{}),k={};return await Promise.all(Object.entries(y).map(async([I,E])=>{const M=await ha.storage[I].get(E.map(D=>D.driverMetaKey));E.forEach(D=>{k[D.key]=M[D.driverMetaKey]??{}})})),v.map(I=>({key:I.key,meta:k[I.key]}))},setItem:async(T,v)=>{const{driver:y,driverKey:k}=t(T);await f(y,k,v)},setItems:async T=>{const v={};T.forEach(y=>{const{driverArea:k,driverKey:I}=t("key"in y?y.key:y.item.key);v[k]??(v[k]=[]),v[k].push({key:I,value:y.value})}),await Promise.all(Object.entries(v).map(async([y,k])=>{await r(y).setItems(k)}))},setMeta:async(T,v)=>{const{driver:y,driverKey:k}=t(T);await p(y,k,v)},setMetas:async T=>{const v={};T.forEach(y=>{const{driverArea:k,driverKey:I}=t("key"in y?y.key:y.item.key);v[k]??(v[k]=[]),v[k].push({key:I,properties:y.meta})}),await Promise.all(Object.entries(v).map(async([y,k])=>{const I=r(y),E=k.map(({key:j})=>a(j));console.log(y,E);const M=await I.getItems(E),D=Object.fromEntries(M.map(({key:j,value:$})=>[j,c($)])),l=k.map(({key:j,properties:$})=>{const q=a(j);return{key:q,value:s(D[q]??{},$)}});await I.setItems(l)}))},removeItem:async(T,v)=>{const{driver:y,driverKey:k}=t(T);await _(y,k,v)},removeItems:async T=>{const v={};T.forEach(y=>{let k,I;typeof y=="string"?k=y:"getValue"in y?k=y.key:"item"in y?(k=y.item.key,I=y.options):(k=y.key,I=y.options);const{driverArea:E,driverKey:M}=t(k);v[E]??(v[E]=[]),v[E].push(M),I!=null&&I.removeMeta&&v[E].push(a(M))}),await Promise.all(Object.entries(v).map(async([y,k])=>{await r(y).removeItems(k)}))},removeMeta:async(T,v)=>{const{driver:y,driverKey:k}=t(T);await b(y,k,v)},snapshot:async(T,v)=>{var I;const k=await r(T).snapshot();return(I=v==null?void 0:v.excludeKeys)==null||I.forEach(E=>{delete k[E],delete k[a(E)]}),k},restoreSnapshot:async(T,v)=>{await r(T).restoreSnapshot(v)},watch:(T,v)=>{const{driver:y,driverKey:k}=t(T);return x(y,k,v)},unwatch(){Object.values(e).forEach(T=>{T.unwatch()})},defineItem:(T,v)=>{const{driver:y,driverKey:k}=t(T),{version:I=1,migrations:E={}}=v??{};if(I<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const M=async()=>{var J;const q=a(k),[{value:C},{value:F}]=await y.getItems([k,q]);if(C==null)return;const Q=(F==null?void 0:F.v)??1;if(Q>I)throw Error(`Version downgrade detected (v${Q} -> v${I}) for "${T}"`);console.debug(`[@wxt-dev/storage] Running storage migration for ${T}: v${Q} -> v${I}`);const K=Array.from({length:I-Q},(ee,X)=>Q+X+1);let H=C;for(const ee of K)try{H=await((J=E==null?void 0:E[ee])==null?void 0:J.call(E,H))??H}catch(X){throw Error(`v${ee} migration failed for "${T}"`,{cause:X})}await y.setItems([{key:k,value:H},{key:q,value:{...F,v:I}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${T} v${I}`,{migratedValue:H})},D=(v==null?void 0:v.migrations)==null?Promise.resolve():M().catch(q=>{console.error(`[@wxt-dev/storage] Migration failed for ${T}`,q)}),l=new Id,j=()=>(v==null?void 0:v.fallback)??(v==null?void 0:v.defaultValue)??null,$=()=>l.runExclusive(async()=>{const q=await y.getItem(k);if(q!=null||(v==null?void 0:v.init)==null)return q;const C=await v.init();return await y.setItem(k,C),C});return D.then($),{key:T,get defaultValue(){return j()},get fallback(){return j()},getValue:async()=>(await D,v!=null&&v.init?await $():await d(y,k,v)),getMeta:async()=>(await D,await g(y,k)),setValue:async q=>(await D,await f(y,k,q)),setMeta:async q=>(await D,await p(y,k,q)),removeValue:async q=>(await D,await _(y,k,q)),removeMeta:async q=>(await D,await b(y,k,q)),watch:q=>x(y,k,(C,F)=>q(C??j(),F??j())),migrate:M}}}}function pa(e){const r=()=>{if(ha.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(ha.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const a=ha.storage[e];if(a==null)throw Error(`"browser.storage.${e}" is undefined`);return a},t=new Set;return{getItem:async a=>(await r().get(a))[a],getItems:async a=>{const s=await r().get(a);return a.map(o=>({key:o,value:s[o]??null}))},setItem:async(a,s)=>{s==null?await r().remove(a):await r().set({[a]:s})},setItems:async a=>{const s=a.reduce((o,{key:c,value:d})=>(o[c]=d,o),{});await r().set(s)},removeItem:async a=>{await r().remove(a)},removeItems:async a=>{await r().remove(a)},snapshot:async()=>await r().get(),restoreSnapshot:async a=>{await r().set(a)},watch(a,s){const o=c=>{const d=c[a];d!=null&&(pi(d.newValue,d.oldValue)||s(d.newValue??null,d.oldValue??null))};return r().onChanged.addListener(o),t.add(o),()=>{r().onChanged.removeListener(o),t.delete(o)}},unwatch(){t.forEach(a=>{r().onChanged.removeListener(a)}),t.clear()}}}const Ld=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Dd=new Map(Ld);class gi extends Error{constructor(t){super(gi._prepareSuperMessage(t));ne(this,"name","NonError")}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}}const Rd=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],mi=new WeakSet,Md=e=>{mi.add(e);const r=e.toJSON();return mi.delete(e),r},Yo=e=>Dd.get(e)??Error,wi=({from:e,seen:r,to:t,forceEnumerable:a,maxDepth:s,depth:o,useToJSON:c,serialize:d})=>{if(!t)if(Array.isArray(e))t=[];else if(!d&&Go(e)){const f=Yo(e.name);t=new f}else t={};if(r.push(e),o>=s)return t;if(c&&typeof e.toJSON=="function"&&!mi.has(e))return Md(e);const g=f=>wi({from:f,seen:[...r],forceEnumerable:a,maxDepth:s,depth:o,useToJSON:c,serialize:d});for(const[f,p]of Object.entries(e)){if(p&&p instanceof Uint8Array&&p.constructor.name==="Buffer"){t[f]="[object Buffer]";continue}if(p!==null&&typeof p=="object"&&typeof p.pipe=="function"){t[f]="[object Stream]";continue}if(typeof p!="function"){if(!p||typeof p!="object"){try{t[f]=p}catch{}continue}if(!r.includes(e[f])){o++,t[f]=g(e[f]);continue}t[f]="[Circular]"}}for(const{property:f,enumerable:p}of Rd)typeof e[f]<"u"&&e[f]!==null&&Object.defineProperty(t,f,{value:Go(e[f])?g(e[f]):e[f],enumerable:a?!0:p,configurable:!0,writable:!0});return t};function $d(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY,useToJSON:a=!0}=r;return typeof e=="object"&&e!==null?wi({from:e,seen:[],forceEnumerable:!0,maxDepth:t,depth:0,useToJSON:a,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function Pd(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if(jd(e)){const a=Yo(e.name);return wi({from:e,seen:[],to:new a,maxDepth:t,depth:0,serialize:!1})}return new gi(e)}function Go(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function jd(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var Nd=Object.defineProperty,qd=Object.defineProperties,Fd=Object.getOwnPropertyDescriptors,Qo=Object.getOwnPropertySymbols,Ud=Object.prototype.hasOwnProperty,Bd=Object.prototype.propertyIsEnumerable,Ko=(e,r,t)=>r in e?Nd(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ga=(e,r)=>{for(var t in r||(r={}))Ud.call(r,t)&&Ko(e,t,r[t]);if(Qo)for(var t of Qo(r))Bd.call(r,t)&&Ko(e,t,r[t]);return e},ma=(e,r)=>qd(e,Fd(r)),Zo=(e,r,t)=>new Promise((a,s)=>{var o=g=>{try{d(t.next(g))}catch(f){s(f)}},c=g=>{try{d(t.throw(g))}catch(f){s(f)}},d=g=>g.done?a(g.value):Promise.resolve(g.value).then(o,c);d((t=t.apply(e,r)).next())});function Vo(e){let r,t={};function a(){Object.entries(t).length===0&&(r==null||r(),r=void 0)}let s=Math.floor(Math.random()*1e4);function o(){return s++}return{sendMessage(c,d,...g){return Zo(this,null,function*(){var f,p,_,b;const x={id:o(),type:c,data:d,timestamp:Date.now()},S=(p=yield(f=e.verifyMessageData)==null?void 0:f.call(e,x))!=null?p:x;(_=e.logger)==null||_.debug(`[messaging] sendMessage {id=${S.id}} ─ᐅ`,S,...g);const T=yield e.sendMessage(S,...g),{res:v,err:y}=T??{err:new Error("No response")};if((b=e.logger)==null||b.debug(`[messaging] sendMessage {id=${S.id}} ᐊ─`,{res:v,err:y}),y!=null)throw Pd(y);return v})},onMessage(c,d){var g,f,p;if(r==null&&((g=e.logger)==null||g.debug(`[messaging] "${c}" initialized the message listener for this context`),r=e.addRootListener(_=>{var b,x;if(typeof _.type!="string"||typeof _.timestamp!="number"){if(e.breakError)return;const v=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(_)}`);throw(b=e.logger)==null||b.error(v),v}(x=e==null?void 0:e.logger)==null||x.debug("[messaging] Received message",_);const S=t[_.type];if(S==null)return;const T=S(_);return Promise.resolve(T).then(v=>{var y,k;return(k=(y=e.verifyMessageData)==null?void 0:y.call(e,v))!=null?k:v}).then(v=>{var y;return(y=e==null?void 0:e.logger)==null||y.debug(`[messaging] onMessage {id=${_.id}} ─ᐅ`,{res:v}),{res:v}}).catch(v=>{var y;return(y=e==null?void 0:e.logger)==null||y.debug(`[messaging] onMessage {id=${_.id}} ─ᐅ`,{err:v}),{err:$d(v)}})})),t[c]!=null){const _=Error(`[messaging] In this JS context, only one listener can be setup for ${c}`);throw(f=e.logger)==null||f.error(_),_}return t[c]=d,(p=e.logger)==null||p.log(`[messaging] Added listener for ${c}`),()=>{delete t[c],a()}},removeAllListeners(){Object.keys(t).forEach(c=>{delete t[c]}),a()}}}var Xo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zd(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var r=e.default;if(typeof r=="function"){var t=function a(){return this instanceof a?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};t.prototype=r.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(e).forEach(function(a){var s=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,s.get?s:{enumerable:!0,get:function(){return e[a]}})}),t}var wa={exports:{}},Hd=wa.exports,Jo;function Wd(){return Jo||(Jo=1,(function(e,r){(function(t,a){a(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Hd,function(t){var a,s;if(!((s=(a=globalThis.chrome)==null?void 0:a.runtime)!=null&&s.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const o="The message port closed before a response was received.",c=d=>{const g={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(g).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class f extends WeakMap{constructor($,q=void 0){super(q),this.createItem=$}get($){return this.has($)||this.set($,this.createItem($)),super.get($)}}const p=j=>j&&typeof j=="object"&&typeof j.then=="function",_=(j,$)=>(...q)=>{d.runtime.lastError?j.reject(new Error(d.runtime.lastError.message)):$.singleCallbackArg||q.length<=1&&$.singleCallbackArg!==!1?j.resolve(q[0]):j.resolve(q)},b=j=>j==1?"argument":"arguments",x=(j,$)=>function(C,...F){if(F.length<$.minArgs)throw new Error(`Expected at least ${$.minArgs} ${b($.minArgs)} for ${j}(), got ${F.length}`);if(F.length>$.maxArgs)throw new Error(`Expected at most ${$.maxArgs} ${b($.maxArgs)} for ${j}(), got ${F.length}`);return new Promise((Q,K)=>{if($.fallbackToNoCallback)try{C[j](...F,_({resolve:Q,reject:K},$))}catch(H){console.warn(`${j} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,H),C[j](...F),$.fallbackToNoCallback=!1,$.noCallback=!0,Q()}else $.noCallback?(C[j](...F),Q()):C[j](...F,_({resolve:Q,reject:K},$))})},S=(j,$,q)=>new Proxy($,{apply(C,F,Q){return q.call(F,j,...Q)}});let T=Function.call.bind(Object.prototype.hasOwnProperty);const v=(j,$={},q={})=>{let C=Object.create(null),F={has(K,H){return H in j||H in C},get(K,H,J){if(H in C)return C[H];if(!(H in j))return;let ee=j[H];if(typeof ee=="function")if(typeof $[H]=="function")ee=S(j,j[H],$[H]);else if(T(q,H)){let X=x(H,q[H]);ee=S(j,j[H],X)}else ee=ee.bind(j);else if(typeof ee=="object"&&ee!==null&&(T($,H)||T(q,H)))ee=v(ee,$[H],q[H]);else if(T(q,"*"))ee=v(ee,$[H],q["*"]);else return Object.defineProperty(C,H,{configurable:!0,enumerable:!0,get(){return j[H]},set(X){j[H]=X}}),ee;return C[H]=ee,ee},set(K,H,J,ee){return H in C?C[H]=J:j[H]=J,!0},defineProperty(K,H,J){return Reflect.defineProperty(C,H,J)},deleteProperty(K,H){return Reflect.deleteProperty(C,H)}},Q=Object.create(j);return new Proxy(Q,F)},y=j=>({addListener($,q,...C){$.addListener(j.get(q),...C)},hasListener($,q){return $.hasListener(j.get(q))},removeListener($,q){$.removeListener(j.get(q))}}),k=new f(j=>typeof j!="function"?j:function(q){const C=v(q,{},{getContent:{minArgs:0,maxArgs:0}});j(C)}),I=new f(j=>typeof j!="function"?j:function(q,C,F){let Q=!1,K,H=new Promise(se=>{K=function(oe){Q=!0,se(oe)}}),J;try{J=j(q,C,K)}catch(se){J=Promise.reject(se)}const ee=J!==!0&&p(J);if(J!==!0&&!ee&&!Q)return!1;const X=se=>{se.then(oe=>{F(oe)},oe=>{let xe;oe&&(oe instanceof Error||typeof oe.message=="string")?xe=oe.message:xe="An unexpected error occurred",F({__mozWebExtensionPolyfillReject__:!0,message:xe})}).catch(oe=>{console.error("Failed to send onMessage rejected reply",oe)})};return X(ee?J:H),!0}),E=({reject:j,resolve:$},q)=>{d.runtime.lastError?d.runtime.lastError.message===o?$():j(new Error(d.runtime.lastError.message)):q&&q.__mozWebExtensionPolyfillReject__?j(new Error(q.message)):$(q)},M=(j,$,q,...C)=>{if(C.length<$.minArgs)throw new Error(`Expected at least ${$.minArgs} ${b($.minArgs)} for ${j}(), got ${C.length}`);if(C.length>$.maxArgs)throw new Error(`Expected at most ${$.maxArgs} ${b($.maxArgs)} for ${j}(), got ${C.length}`);return new Promise((F,Q)=>{const K=E.bind(null,{resolve:F,reject:Q});C.push(K),q.sendMessage(...C)})},D={devtools:{network:{onRequestFinished:y(k)}},runtime:{onMessage:y(I),onMessageExternal:y(I),sendMessage:M.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:M.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},l={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return g.privacy={network:{"*":l},services:{"*":l},websites:{"*":l}},v(d,D,g)};t.exports=c(chrome)}else t.exports=globalThis.browser})})(wa)),wa.exports}var Yd=Wd();const ya=yi(Yd);function Kt(e){return Vo(ma(ga({},e),{sendMessage(r,t){if(t==null)return ya.runtime.sendMessage(r);const a=typeof t=="number"?{tabId:t}:t;return ya.tabs.sendMessage(a.tabId,r,a.frameId!=null?{frameId:a.frameId}:void 0)},addRootListener(r){const t=(a,s)=>r(typeof a=="object"?ma(ga({},a),{sender:s}):a);return ya.runtime.onMessage.addListener(t),()=>ya.runtime.onMessage.removeListener(t)}}))}const el="local:pluginInstallConfig",{sendMessage:oT,onMessage:Gd}=Kt(),Qd=()=>{let e=null,r=!1;le.tabs.onRemoved.addListener(a=>{e&&e.id===a&&(e=null,r||le.management.setEnabled(le.runtime.id,!1))}),Gd("confirmEnabled",async a=>{r=a.data,await Fe.setItem(el,{confirmEnabled:r}),r||le.management.setEnabled(le.runtime.id,!1),le.tabs.remove(a.sender.tab.id)});const t=async()=>{e?await le.tabs.update(e.id,{active:!0}):(r=!1,e=await le.tabs.create({url:le.runtime.getURL("/install-page.html")}))};le.runtime.onInstalled.addListener(a=>{a.reason===le.runtime.OnInstalledReason.INSTALL&&t()}),le.management.onEnabled.addListener(async a=>{if(a.id===le.runtime.id){const s=await Fe.getItem(el);s!=null&&s.confirmEnabled||t()}})},va=Object.freeze(Object.defineProperty({__proto__:null,source:"sheinChoice"},Symbol.toStringTag,{value:"Module"})),lt=[];for(let e=0;e<256;++e)lt.push((e+256).toString(16).slice(1));function Kd(e,r=0){return(lt[e[r+0]]+lt[e[r+1]]+lt[e[r+2]]+lt[e[r+3]]+"-"+lt[e[r+4]]+lt[e[r+5]]+"-"+lt[e[r+6]]+lt[e[r+7]]+"-"+lt[e[r+8]]+lt[e[r+9]]+"-"+lt[e[r+10]]+lt[e[r+11]]+lt[e[r+12]]+lt[e[r+13]]+lt[e[r+14]]+lt[e[r+15]]).toLowerCase()}let vi;const Zd=new Uint8Array(16);function Vd(){if(!vi){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");vi=crypto.getRandomValues.bind(crypto)}return vi(Zd)}const tl={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function rl(e,r,t){var s;if(tl.randomUUID&&!e)return tl.randomUUID();e=e||{};const a=e.random??((s=e.rng)==null?void 0:s.call(e))??Vd();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,Kd(a)}class Xd{constructor(r,t){ne(this,"taskId",rl());ne(this,"tabId");ne(this,"collectItemList",[]);ne(this,"browserTab",null);ne(this,"hasTask",!1);ne(this,"loading",!0);ne(this,"result",[]);ne(this,"currentIndex",-1);ne(this,"extraData");ne(this,"keepActiveTab",!0);ne(this,"start",async()=>{const r=this.currentIndex+1,t=this.collectItemList[r];if(await this.removeBrowserTab(),!t){this.loading=!1;return}const a=(await le.tabs.query({active:!0}))[0];this.loading=!0,this.browserTab=await le.tabs.create({url:t.itemUrl,active:!0}),this.browserTabId!==(a==null?void 0:a.id)&&this.keepActiveTab&&await le.tabs.update(a.id,{active:!0}),this.result[r]={itemInfo:this.collectItemList[r],status:"loading"},this.currentIndex=r});this.tabId=r,this.append(t)}get itemList(){return this.collectItemList}get browserTabId(){var r;return(r=this.browserTab)==null?void 0:r.id}async removeBrowserTab(){try{this.browserTabId&&(await le.tabs.update(this.browserTabId,{active:!1}),await le.tabs.remove(this.browserTabId),this.browserTab=null)}catch{console.error("当前tab可能已被移除")}}async next(){this.hasTask||await this.start()}append(r){this.collectItemList.push(...r.itemList),"extraData"in r&&(this.extraData=r.extraData),"keepActiveTab"in r&&(this.keepActiveTab=r.keepActiveTab),this.next()}done(){this.hasTask=!1}updateResult(r){this.result[this.currentIndex].status=r.data?"success":"fail",this.result[this.currentIndex].data=r.data,this.result[this.currentIndex].error=r.error,r.itemInfo&&(this.result[this.currentIndex].itemInfo=r.itemInfo)}destroy(){this.removeBrowserTab()}}const Jd=e=>{const r=new Map,t=g=>Array.from(r.values()).find(f=>f.browserTabId===g),a=g=>{const f=t(g);return f?{extraData:f.extraData,taskId:f.taskId,tabId:f.tabId,currentIndex:f.currentIndex}:!1},s=async(g,f)=>{const p=t(g);p&&(p.updateResult(f),e==null||e({taskId:p.taskId,tabId:p.tabId,loading:p.loading,result:p.result,total:p.itemList.length,currentIndex:p.currentIndex,itemList:p.itemList}),f.error||await p.next())},o=(g,f)=>{const{itemList:p,taskId:_,extraData:b,keepActiveTab:x}=f,S=r.get(_);if(S)return S.append({extraData:b,itemList:p,keepActiveTab:x}),S.taskId;{const T=new Xd(g,{extraData:b,itemList:p,keepActiveTab:x});return r.set(T.taskId,T),T.taskId}},c=g=>{g&&r.has(g)&&(r.get(g).destroy(),r.delete(g))};return le.tabs.onRemoved.addListener(g=>{const f=r.entries().find(([p,_])=>_.tabId===g);f&&c(f[0])}),{validatorAutoCollect:a,createAutoCollect:o,destroyAutoCollect:c,updateAutoCollectResult:s,setTaskTabActive:async g=>{const{taskId:f,itemUrl:p}=g,_=r.get(f);if(_)try{if(await le.tabs.get(_.browserTabId)){await le.tabs.update(_.browserTabId,{active:!0});return}}catch(b){console.error(b)}p&&await le.tabs.create({url:p,active:!0})}}};class eh{constructor(r,t){ne(this,"browserTab",null);ne(this,"taskId",rl());ne(this,"tabId");ne(this,"result",null);ne(this,"href");ne(this,"extraData");this.tabId=r,this.href=t.href,this.append(t)}get browserTabId(){var r;return(r=this.browserTab)==null?void 0:r.id}async removeBrowserTab(){try{this.browserTabId&&(await le.tabs.update(this.browserTabId,{active:!1}),await le.tabs.remove(this.browserTabId),this.browserTab=null)}catch{console.error("当前tab可能已被移除")}}async start(){await this.removeBrowserTab(),this.browserTab=await le.tabs.create({url:this.href,active:!1}),this.result={status:"loading",data:null,error:null}}append(r){"extraData"in r&&(this.extraData=r.extraData),this.start()}destroy(){this.removeBrowserTab()}updateResult(r){this.result=r}}const th=e=>{const r=new Map,t=g=>Array.from(r.values()).find(f=>f.browserTabId===g),a=g=>{const f=t(g);return f?{extraData:f.extraData,taskId:f.taskId,tabId:f.tabId}:!1},s=(g,f)=>{const{taskId:p}=f;let _=r.get(p);const b=f;return _?_.append(b):(_=new eh(g,b),r.set(_.taskId,_)),_.taskId},o=g=>{g&&r.has(g)&&(r.get(g).destroy(),r.delete(g))};return le.tabs.onRemoved.addListener(g=>{const f=r.entries().find(([p,_])=>_.tabId===g);f&&o(f[0])}),{createAutoFetch:s,destroyAutoFetch:o,updateAutoFetchResult:async(g,f)=>{const p=t(g);p&&(p.updateResult(f),e==null||e({taskId:p.taskId,tabId:p.tabId,result:p.result}),p.destroy())},validatorAutoFetch:a,setTaskTabActive:async g=>{const{taskId:f}=g,p=r.get(f);if(p)try{if(await le.tabs.get(p.browserTabId)){await le.tabs.update(p.browserTabId,{active:!0});return}}catch(_){console.error(_)}}}},rh=()=>({startCrawlTask:s=>{const{antiContentStr:o,source:c}=s,{CrawlTask:d}=Vn,{CrawlTask:g}=Zn,{source:f}=va;let p;c===f?p=new g:p=new d(o),p.run()},setCrawlTabId:async s=>{const{crawlTabId:o,source:c}=s,{LOCAL_CRAWL_TAB_ID:d,_globalCrawlData:g}=Vn,{LOCAL_CRAWL_SHEIN_CHOICE_TAB_ID:f,_globalCrawlData:p}=Zn,{source:_}=va;let b;c===_?(p.crawlTabId=o,b=f):(g.crawlTabId=o,b=d),Fe.setItem(b,o)},crawlShop:s=>{const{mallInfo:o,source:c}=s,{_globalCrawlData:d}=Vn,{_globalCrawlData:g}=Zn,{source:f}=va,p={...o,action:"manual"};c===f?g.crawlQueue.addCrawlQueue(p):d.crawlQueue.addCrawlQueue(p)},getCrawlInfo:async s=>{const{id:o,source:c}=s,{_globalCrawlData:d,CrawlLog:g}=Vn,{_globalCrawlData:f,CrawlLog:p}=Zn,{source:_}=va;let b,x;return c===_?(b=f.crawlQueue.crawlQueueList.find(T=>`${T.mallId}`==`${o}`),x=new p(o,b?b.requestId:null)):(b=d.crawlQueue.crawlQueueList.find(T=>`${T.mallId}`==`${o}`),x=new g(o,b?b.requestId:null)),await x.init(),await x.getCrawlInfo()}});var nl=typeof global=="object"&&global&&global.Object===Object&&global,nh=typeof self=="object"&&self&&self.Object===Object&&self,lr=nl||nh||Function("return this")(),Zt=lr.Symbol,al=Object.prototype,ah=al.hasOwnProperty,ih=al.toString,_n=Zt?Zt.toStringTag:void 0;function sh(e){var r=ah.call(e,_n),t=e[_n];try{e[_n]=void 0;var a=!0}catch{}var s=ih.call(e);return a&&(r?e[_n]=t:delete e[_n]),s}var oh=Object.prototype,lh=oh.toString;function uh(e){return lh.call(e)}var ch="[object Null]",fh="[object Undefined]",il=Zt?Zt.toStringTag:void 0;function Pr(e){return e==null?e===void 0?fh:ch:il&&il in Object(e)?sh(e):uh(e)}function Tr(e){return e!=null&&typeof e=="object"}var dh="[object Symbol]";function xa(e){return typeof e=="symbol"||Tr(e)&&Pr(e)==dh}function sl(e,r){for(var t=-1,a=e==null?0:e.length,s=Array(a);++t<a;)s[t]=r(e[t],t,e);return s}var gt=Array.isArray,ol=Zt?Zt.prototype:void 0,ll=ol?ol.toString:void 0;function ul(e){if(typeof e=="string")return e;if(gt(e))return sl(e,ul)+"";if(xa(e))return ll?ll.call(e):"";var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}var hh=/\s/;function ph(e){for(var r=e.length;r--&&hh.test(e.charAt(r)););return r}var gh=/^\s+/;function mh(e){return e&&e.slice(0,ph(e)+1).replace(gh,"")}function jr(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var cl=NaN,wh=/^[-+]0x[0-9a-f]+$/i,yh=/^0b[01]+$/i,vh=/^0o[0-7]+$/i,xh=parseInt;function bh(e){if(typeof e=="number")return e;if(xa(e))return cl;if(jr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=jr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=mh(e);var t=yh.test(e);return t||vh.test(e)?xh(e.slice(2),t?2:8):wh.test(e)?cl:+e}var fl=1/0,Th=17976931348623157e292;function _h(e){if(!e)return e===0?e:0;if(e=bh(e),e===fl||e===-fl){var r=e<0?-1:1;return r*Th}return e===e?e:0}function Sh(e){var r=_h(e),t=r%1;return r===r?t?r-t:r:0}function xi(e){return e}var Ah="[object AsyncFunction]",kh="[object Function]",Ch="[object GeneratorFunction]",Eh="[object Proxy]";function dl(e){if(!jr(e))return!1;var r=Pr(e);return r==kh||r==Ch||r==Ah||r==Eh}var bi=lr["__core-js_shared__"],hl=(function(){var e=/[^.]+$/.exec(bi&&bi.keys&&bi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Ih(e){return!!hl&&hl in e}var Oh=Function.prototype,Lh=Oh.toString;function Nr(e){if(e!=null){try{return Lh.call(e)}catch{}try{return e+""}catch{}}return""}var Dh=/[\\^$.*+?()[\]{}|]/g,Rh=/^\[object .+?Constructor\]$/,Mh=Function.prototype,$h=Object.prototype,Ph=Mh.toString,jh=$h.hasOwnProperty,Nh=RegExp("^"+Ph.call(jh).replace(Dh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qh(e){if(!jr(e)||Ih(e))return!1;var r=dl(e)?Nh:Rh;return r.test(Nr(e))}function Fh(e,r){return e==null?void 0:e[r]}function qr(e,r){var t=Fh(e,r);return qh(t)?t:void 0}var Ti=qr(lr,"WeakMap");function Uh(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}function Bh(){}var zh=800,Hh=16,Wh=Date.now;function Yh(e){var r=0,t=0;return function(){var a=Wh(),s=Hh-(a-t);if(t=a,s>0){if(++r>=zh)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}function Gh(e){return function(){return e}}var ba=(function(){try{var e=qr(Object,"defineProperty");return e({},"",{}),e}catch{}})(),Qh=ba?function(e,r){return ba(e,"toString",{configurable:!0,enumerable:!1,value:Gh(r),writable:!0})}:xi,pl=Yh(Qh);function Kh(e,r,t,a){for(var s=e.length,o=t+-1;++o<s;)if(r(e[o],o,e))return o;return-1}function Zh(e){return e!==e}function Vh(e,r,t){for(var a=t-1,s=e.length;++a<s;)if(e[a]===r)return a;return-1}function Xh(e,r,t){return r===r?Vh(e,r,t):Kh(e,Zh,t)}function gl(e,r){var t=e==null?0:e.length;return!!t&&Xh(e,r,0)>-1}var Jh=9007199254740991,ep=/^(?:0|[1-9]\d*)$/;function _i(e,r){var t=typeof e;return r=r??Jh,!!r&&(t=="number"||t!="symbol"&&ep.test(e))&&e>-1&&e%1==0&&e<r}function ml(e,r,t){r=="__proto__"&&ba?ba(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}function Si(e,r){return e===r||e!==e&&r!==r}var tp=Object.prototype,rp=tp.hasOwnProperty;function np(e,r,t){var a=e[r];(!(rp.call(e,r)&&Si(a,t))||t===void 0&&!(r in e))&&ml(e,r,t)}var wl=Math.max;function yl(e,r,t){return r=wl(r===void 0?e.length-1:r,0),function(){for(var a=arguments,s=-1,o=wl(a.length-r,0),c=Array(o);++s<o;)c[s]=a[r+s];s=-1;for(var d=Array(r+1);++s<r;)d[s]=a[s];return d[r]=t(c),Uh(e,this,d)}}function ap(e,r){return pl(yl(e,r,xi),e+"")}var ip=9007199254740991;function Ai(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ip}function ki(e){return e!=null&&Ai(e.length)&&!dl(e)}var sp=Object.prototype;function op(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||sp;return e===t}function lp(e,r){for(var t=-1,a=Array(e);++t<e;)a[t]=r(t);return a}var up="[object Arguments]";function vl(e){return Tr(e)&&Pr(e)==up}var xl=Object.prototype,cp=xl.hasOwnProperty,fp=xl.propertyIsEnumerable,Ci=vl((function(){return arguments})())?vl:function(e){return Tr(e)&&cp.call(e,"callee")&&!fp.call(e,"callee")};function dp(){return!1}var bl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Tl=bl&&typeof module=="object"&&module&&!module.nodeType&&module,hp=Tl&&Tl.exports===bl,_l=hp?lr.Buffer:void 0,pp=_l?_l.isBuffer:void 0,Ei=pp||dp,gp="[object Arguments]",mp="[object Array]",wp="[object Boolean]",yp="[object Date]",vp="[object Error]",xp="[object Function]",bp="[object Map]",Tp="[object Number]",_p="[object Object]",Sp="[object RegExp]",Ap="[object Set]",kp="[object String]",Cp="[object WeakMap]",Ep="[object ArrayBuffer]",Ip="[object DataView]",Op="[object Float32Array]",Lp="[object Float64Array]",Dp="[object Int8Array]",Rp="[object Int16Array]",Mp="[object Int32Array]",$p="[object Uint8Array]",Pp="[object Uint8ClampedArray]",jp="[object Uint16Array]",Np="[object Uint32Array]",Ke={};Ke[Op]=Ke[Lp]=Ke[Dp]=Ke[Rp]=Ke[Mp]=Ke[$p]=Ke[Pp]=Ke[jp]=Ke[Np]=!0,Ke[gp]=Ke[mp]=Ke[Ep]=Ke[wp]=Ke[Ip]=Ke[yp]=Ke[vp]=Ke[xp]=Ke[bp]=Ke[Tp]=Ke[_p]=Ke[Sp]=Ke[Ap]=Ke[kp]=Ke[Cp]=!1;function qp(e){return Tr(e)&&Ai(e.length)&&!!Ke[Pr(e)]}function Fp(e){return function(r){return e(r)}}var Sl=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Sn=Sl&&typeof module=="object"&&module&&!module.nodeType&&module,Up=Sn&&Sn.exports===Sl,Ii=Up&&nl.process,Al=(function(){try{var e=Sn&&Sn.require&&Sn.require("util").types;return e||Ii&&Ii.binding&&Ii.binding("util")}catch{}})(),kl=Al&&Al.isTypedArray,Cl=kl?Fp(kl):qp,Bp=Object.prototype,zp=Bp.hasOwnProperty;function Hp(e,r){var t=gt(e),a=!t&&Ci(e),s=!t&&!a&&Ei(e),o=!t&&!a&&!s&&Cl(e),c=t||a||s||o,d=c?lp(e.length,String):[],g=d.length;for(var f in e)zp.call(e,f)&&!(c&&(f=="length"||s&&(f=="offset"||f=="parent")||o&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||_i(f,g)))&&d.push(f);return d}function Wp(e,r){return function(t){return e(r(t))}}var Yp=Wp(Object.keys,Object),Gp=Object.prototype,Qp=Gp.hasOwnProperty;function Kp(e){if(!op(e))return Yp(e);var r=[];for(var t in Object(e))Qp.call(e,t)&&t!="constructor"&&r.push(t);return r}function Oi(e){return ki(e)?Hp(e):Kp(e)}var Zp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Vp=/^\w*$/;function Li(e,r){if(gt(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||xa(e)?!0:Vp.test(e)||!Zp.test(e)||r!=null&&e in Object(r)}var An=qr(Object,"create");function Xp(){this.__data__=An?An(null):{},this.size=0}function Jp(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}var eg="__lodash_hash_undefined__",tg=Object.prototype,rg=tg.hasOwnProperty;function ng(e){var r=this.__data__;if(An){var t=r[e];return t===eg?void 0:t}return rg.call(r,e)?r[e]:void 0}var ag=Object.prototype,ig=ag.hasOwnProperty;function sg(e){var r=this.__data__;return An?r[e]!==void 0:ig.call(r,e)}var og="__lodash_hash_undefined__";function lg(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=An&&r===void 0?og:r,this}function Fr(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}Fr.prototype.clear=Xp,Fr.prototype.delete=Jp,Fr.prototype.get=ng,Fr.prototype.has=sg,Fr.prototype.set=lg;function ug(){this.__data__=[],this.size=0}function Ta(e,r){for(var t=e.length;t--;)if(Si(e[t][0],r))return t;return-1}var cg=Array.prototype,fg=cg.splice;function dg(e){var r=this.__data__,t=Ta(r,e);if(t<0)return!1;var a=r.length-1;return t==a?r.pop():fg.call(r,t,1),--this.size,!0}function hg(e){var r=this.__data__,t=Ta(r,e);return t<0?void 0:r[t][1]}function pg(e){return Ta(this.__data__,e)>-1}function gg(e,r){var t=this.__data__,a=Ta(t,e);return a<0?(++this.size,t.push([e,r])):t[a][1]=r,this}function ur(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}ur.prototype.clear=ug,ur.prototype.delete=dg,ur.prototype.get=hg,ur.prototype.has=pg,ur.prototype.set=gg;var kn=qr(lr,"Map");function mg(){this.size=0,this.__data__={hash:new Fr,map:new(kn||ur),string:new Fr}}function wg(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}function _a(e,r){var t=e.__data__;return wg(r)?t[typeof r=="string"?"string":"hash"]:t.map}function yg(e){var r=_a(this,e).delete(e);return this.size-=r?1:0,r}function vg(e){return _a(this,e).get(e)}function xg(e){return _a(this,e).has(e)}function bg(e,r){var t=_a(this,e),a=t.size;return t.set(e,r),this.size+=t.size==a?0:1,this}function cr(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var a=e[r];this.set(a[0],a[1])}}cr.prototype.clear=mg,cr.prototype.delete=yg,cr.prototype.get=vg,cr.prototype.has=xg,cr.prototype.set=bg;var Tg="Expected a function";function Di(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(Tg);var t=function(){var a=arguments,s=r?r.apply(this,a):a[0],o=t.cache;if(o.has(s))return o.get(s);var c=e.apply(this,a);return t.cache=o.set(s,c)||o,c};return t.cache=new(Di.Cache||cr),t}Di.Cache=cr;var _g=500;function Sg(e){var r=Di(e,function(a){return t.size===_g&&t.clear(),a}),t=r.cache;return r}var Ag=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kg=/\\(\\)?/g,Cg=Sg(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(Ag,function(t,a,s,o){r.push(s?o.replace(kg,"$1"):a||t)}),r});function Eg(e){return e==null?"":ul(e)}function Sa(e,r){return gt(e)?e:Li(e,r)?[e]:Cg(Eg(e))}function Cn(e){if(typeof e=="string"||xa(e))return e;var r=e+"";return r=="0"&&1/e==-1/0?"-0":r}function Ri(e,r){r=Sa(r,e);for(var t=0,a=r.length;e!=null&&t<a;)e=e[Cn(r[t++])];return t&&t==a?e:void 0}function Ig(e,r,t){var a=e==null?void 0:Ri(e,r);return a===void 0?t:a}function El(e,r){for(var t=-1,a=r.length,s=e.length;++t<a;)e[s+t]=r[t];return e}var Il=Zt?Zt.isConcatSpreadable:void 0;function Og(e){return gt(e)||Ci(e)||!!(Il&&e&&e[Il])}function Lg(e,r,t,a,s){var o=-1,c=e.length;for(t||(t=Og),s||(s=[]);++o<c;){var d=e[o];t(d)?El(s,d):s[s.length]=d}return s}function Dg(e){var r=e==null?0:e.length;return r?Lg(e):[]}function Rg(e){return pl(yl(e,void 0,Dg),e+"")}function Mg(e,r,t){var a=-1,s=e.length;r<0&&(r=-r>s?0:s+r),t=t>s?s:t,t<0&&(t+=s),s=r>t?0:t-r>>>0,r>>>=0;for(var o=Array(s);++a<s;)o[a]=e[a+r];return o}var $g=Math.ceil,Pg=Math.max;function Mi(e,r,t){r===void 0?r=1:r=Pg(Sh(r),0);var a=e==null?0:e.length;if(!a||r<1)return[];for(var s=0,o=0,c=Array($g(a/r));s<a;)c[o++]=Mg(e,s,s+=r);return c}function jg(){this.__data__=new ur,this.size=0}function Ng(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}function qg(e){return this.__data__.get(e)}function Fg(e){return this.__data__.has(e)}var Ug=200;function Bg(e,r){var t=this.__data__;if(t instanceof ur){var a=t.__data__;if(!kn||a.length<Ug-1)return a.push([e,r]),this.size=++t.size,this;t=this.__data__=new cr(a)}return t.set(e,r),this.size=t.size,this}function fr(e){var r=this.__data__=new ur(e);this.size=r.size}fr.prototype.clear=jg,fr.prototype.delete=Ng,fr.prototype.get=qg,fr.prototype.has=Fg,fr.prototype.set=Bg;function zg(e,r){for(var t=-1,a=e==null?0:e.length,s=0,o=[];++t<a;){var c=e[t];r(c,t,e)&&(o[s++]=c)}return o}function Hg(){return[]}var Wg=Object.prototype,Yg=Wg.propertyIsEnumerable,Ol=Object.getOwnPropertySymbols,Gg=Ol?function(e){return e==null?[]:(e=Object(e),zg(Ol(e),function(r){return Yg.call(e,r)}))}:Hg;function Qg(e,r,t){var a=r(e);return gt(e)?a:El(a,t(e))}function Ll(e){return Qg(e,Oi,Gg)}var $i=qr(lr,"DataView"),Pi=qr(lr,"Promise"),sn=qr(lr,"Set"),Dl="[object Map]",Kg="[object Object]",Rl="[object Promise]",Ml="[object Set]",$l="[object WeakMap]",Pl="[object DataView]",Zg=Nr($i),Vg=Nr(kn),Xg=Nr(Pi),Jg=Nr(sn),em=Nr(Ti),_r=Pr;($i&&_r(new $i(new ArrayBuffer(1)))!=Pl||kn&&_r(new kn)!=Dl||Pi&&_r(Pi.resolve())!=Rl||sn&&_r(new sn)!=Ml||Ti&&_r(new Ti)!=$l)&&(_r=function(e){var r=Pr(e),t=r==Kg?e.constructor:void 0,a=t?Nr(t):"";if(a)switch(a){case Zg:return Pl;case Vg:return Dl;case Xg:return Rl;case Jg:return Ml;case em:return $l}return r});var jl=lr.Uint8Array,tm="__lodash_hash_undefined__";function rm(e){return this.__data__.set(e,tm),this}function nm(e){return this.__data__.has(e)}function on(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new cr;++r<t;)this.add(e[r])}on.prototype.add=on.prototype.push=rm,on.prototype.has=nm;function am(e,r){for(var t=-1,a=e==null?0:e.length;++t<a;)if(r(e[t],t,e))return!0;return!1}function Aa(e,r){return e.has(r)}var im=1,sm=2;function Nl(e,r,t,a,s,o){var c=t&im,d=e.length,g=r.length;if(d!=g&&!(c&&g>d))return!1;var f=o.get(e),p=o.get(r);if(f&&p)return f==r&&p==e;var _=-1,b=!0,x=t&sm?new on:void 0;for(o.set(e,r),o.set(r,e);++_<d;){var S=e[_],T=r[_];if(a)var v=c?a(T,S,_,r,e,o):a(S,T,_,e,r,o);if(v!==void 0){if(v)continue;b=!1;break}if(x){if(!am(r,function(y,k){if(!Aa(x,k)&&(S===y||s(S,y,t,a,o)))return x.push(k)})){b=!1;break}}else if(!(S===T||s(S,T,t,a,o))){b=!1;break}}return o.delete(e),o.delete(r),b}function om(e){var r=-1,t=Array(e.size);return e.forEach(function(a,s){t[++r]=[s,a]}),t}function ji(e){var r=-1,t=Array(e.size);return e.forEach(function(a){t[++r]=a}),t}var lm=1,um=2,cm="[object Boolean]",fm="[object Date]",dm="[object Error]",hm="[object Map]",pm="[object Number]",gm="[object RegExp]",mm="[object Set]",wm="[object String]",ym="[object Symbol]",vm="[object ArrayBuffer]",xm="[object DataView]",ql=Zt?Zt.prototype:void 0,Ni=ql?ql.valueOf:void 0;function bm(e,r,t,a,s,o,c){switch(t){case xm:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case vm:return!(e.byteLength!=r.byteLength||!o(new jl(e),new jl(r)));case cm:case fm:case pm:return Si(+e,+r);case dm:return e.name==r.name&&e.message==r.message;case gm:case wm:return e==r+"";case hm:var d=om;case mm:var g=a&lm;if(d||(d=ji),e.size!=r.size&&!g)return!1;var f=c.get(e);if(f)return f==r;a|=um,c.set(e,r);var p=Nl(d(e),d(r),a,s,o,c);return c.delete(e),p;case ym:if(Ni)return Ni.call(e)==Ni.call(r)}return!1}var Tm=1,_m=Object.prototype,Sm=_m.hasOwnProperty;function Am(e,r,t,a,s,o){var c=t&Tm,d=Ll(e),g=d.length,f=Ll(r),p=f.length;if(g!=p&&!c)return!1;for(var _=g;_--;){var b=d[_];if(!(c?b in r:Sm.call(r,b)))return!1}var x=o.get(e),S=o.get(r);if(x&&S)return x==r&&S==e;var T=!0;o.set(e,r),o.set(r,e);for(var v=c;++_<g;){b=d[_];var y=e[b],k=r[b];if(a)var I=c?a(k,y,b,r,e,o):a(y,k,b,e,r,o);if(!(I===void 0?y===k||s(y,k,t,a,o):I)){T=!1;break}v||(v=b=="constructor")}if(T&&!v){var E=e.constructor,M=r.constructor;E!=M&&"constructor"in e&&"constructor"in r&&!(typeof E=="function"&&E instanceof E&&typeof M=="function"&&M instanceof M)&&(T=!1)}return o.delete(e),o.delete(r),T}var km=1,Fl="[object Arguments]",Ul="[object Array]",ka="[object Object]",Cm=Object.prototype,Bl=Cm.hasOwnProperty;function Em(e,r,t,a,s,o){var c=gt(e),d=gt(r),g=c?Ul:_r(e),f=d?Ul:_r(r);g=g==Fl?ka:g,f=f==Fl?ka:f;var p=g==ka,_=f==ka,b=g==f;if(b&&Ei(e)){if(!Ei(r))return!1;c=!0,p=!1}if(b&&!p)return o||(o=new fr),c||Cl(e)?Nl(e,r,t,a,s,o):bm(e,r,g,t,a,s,o);if(!(t&km)){var x=p&&Bl.call(e,"__wrapped__"),S=_&&Bl.call(r,"__wrapped__");if(x||S){var T=x?e.value():e,v=S?r.value():r;return o||(o=new fr),s(T,v,t,a,o)}}return b?(o||(o=new fr),Am(e,r,t,a,s,o)):!1}function Ca(e,r,t,a,s){return e===r?!0:e==null||r==null||!Tr(e)&&!Tr(r)?e!==e&&r!==r:Em(e,r,t,a,Ca,s)}var Im=1,Om=2;function Lm(e,r,t,a){var s=t.length,o=s;if(e==null)return!o;for(e=Object(e);s--;){var c=t[s];if(c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++s<o;){c=t[s];var d=c[0],g=e[d],f=c[1];if(c[2]){if(g===void 0&&!(d in e))return!1}else{var p=new fr,_;if(!(_===void 0?Ca(f,g,Im|Om,a,p):_))return!1}}return!0}function zl(e){return e===e&&!jr(e)}function Dm(e){for(var r=Oi(e),t=r.length;t--;){var a=r[t],s=e[a];r[t]=[a,s,zl(s)]}return r}function Hl(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}function Rm(e){var r=Dm(e);return r.length==1&&r[0][2]?Hl(r[0][0],r[0][1]):function(t){return t===e||Lm(t,e,r)}}function Mm(e,r){return e!=null&&r in Object(e)}function $m(e,r,t){r=Sa(r,e);for(var a=-1,s=r.length,o=!1;++a<s;){var c=Cn(r[a]);if(!(o=e!=null&&t(e,c)))break;e=e[c]}return o||++a!=s?o:(s=e==null?0:e.length,!!s&&Ai(s)&&_i(c,s)&&(gt(e)||Ci(e)))}function Wl(e,r){return e!=null&&$m(e,r,Mm)}var Pm=1,jm=2;function Nm(e,r){return Li(e)&&zl(r)?Hl(Cn(e),r):function(t){var a=Ig(t,e);return a===void 0&&a===r?Wl(t,e):Ca(r,a,Pm|jm)}}function qm(e){return function(r){return r==null?void 0:r[e]}}function Fm(e){return function(r){return Ri(r,e)}}function Um(e){return Li(e)?qm(Cn(e)):Fm(e)}function Bm(e){return typeof e=="function"?e:e==null?xi:typeof e=="object"?gt(e)?Nm(e[0],e[1]):Rm(e):Um(e)}function zm(e,r,t,a){for(var s=-1,o=e==null?0:e.length;++s<o;){var c=e[s];r(a,c,t(c),e)}return a}function Hm(e){return function(r,t,a){for(var s=-1,o=Object(r),c=a(r),d=c.length;d--;){var g=c[++s];if(t(o[g],g,o)===!1)break}return r}}var Wm=Hm();function Ym(e,r){return e&&Wm(e,r,Oi)}function Gm(e,r){return function(t,a){if(t==null)return t;if(!ki(t))return e(t,a);for(var s=t.length,o=-1,c=Object(t);++o<s&&a(c[o],o,c)!==!1;);return t}}var Qm=Gm(Ym);function Km(e,r,t,a){return Qm(e,function(s,o,c){r(a,s,t(s),c)}),a}function Zm(e,r){return function(t,a){var s=gt(t)?zm:Km,o={};return s(t,e,Bm(a),o)}}function Vm(e){return Tr(e)&&ki(e)}var Xm=Math.min;function Jm(e,r,t){for(var a=gl,s=e[0].length,o=e.length,c=o,d=Array(o),g=1/0,f=[];c--;){var p=e[c];g=Xm(p.length,g),d[c]=s>=120&&p.length>=120?new on(c&&p):void 0}p=e[0];var _=-1,b=d[0];e:for(;++_<s&&f.length<g;){var x=p[_],S=x;if(x=x!==0?x:0,!(b?Aa(b,S):a(f,S))){for(c=o;--c;){var T=d[c];if(!(T?Aa(T,S):a(e[c],S)))continue e}b&&b.push(S),f.push(x)}}return f}function ew(e){return Vm(e)?e:[]}var tw=ap(function(e){var r=sl(e,ew);return r.length&&r[0]===e[0]?Jm(r):[]});function rw(e,r){return Ca(e,r)}var nw="[object Number]";function aw(e){return typeof e=="number"||Tr(e)&&Pr(e)==nw}function En(e){return aw(e)&&e!=+e}var iw=Zm(function(e,r,t){ml(e,t,r)});function sw(e,r,t,a){if(!jr(e))return e;r=Sa(r,e);for(var s=-1,o=r.length,c=o-1,d=e;d!=null&&++s<o;){var g=Cn(r[s]),f=t;if(g==="__proto__"||g==="constructor"||g==="prototype")return e;if(s!=c){var p=d[g];f=void 0,f===void 0&&(f=jr(p)?p:_i(r[s+1])?[]:{})}np(d,g,f),d=d[g]}return e}function ow(e,r,t){for(var a=-1,s=r.length,o={};++a<s;){var c=r[a],d=Ri(e,c);t(d,c)&&sw(o,Sa(c,e),d)}return o}function lw(e,r){return ow(e,r,function(t,a){return Wl(e,a)})}var ln=Rg(function(e,r){return e==null?{}:lw(e,r)}),uw=1/0,cw=sn&&1/ji(new sn([,-0]))[1]==uw?function(e){return new sn(e)}:Bh,fw=200;function dw(e,r,t){var a=-1,s=gl,o=e.length,c=!0,d=[],g=d;if(o>=fw){var f=cw(e);if(f)return ji(f);c=!1,s=Aa,g=new on}else g=d;e:for(;++a<o;){var p=e[a],_=p;if(p=p!==0?p:0,c&&_===_){for(var b=g.length;b--;)if(g[b]===_)continue e;d.push(p)}else s(g,_,t)||(g!==d&&g.push(_),d.push(p))}return d}function hw(e){return e&&e.length?dw(e):[]}const pw={verticalAttributesMap:{_F_b_kj_dc:"mskjzs",xx:"zying"}};function gw(){const r=navigator.userAgent.match(/Chrome\/(\d+)\./);return Number(r==null?void 0:r[1])||0}var qi,Yl;function un(){return Yl||(Yl=1,qi=TypeError),qi}const mw=zd(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Fi,Gl;function Ea(){if(Gl)return Fi;Gl=1;var e=typeof Map=="function"&&Map.prototype,r=Object.getOwnPropertyDescriptor&&e?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,t=e&&r&&typeof r.get=="function"?r.get:null,a=e&&Map.prototype.forEach,s=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=s&&o&&typeof o.get=="function"?o.get:null,d=s&&Set.prototype.forEach,g=typeof WeakMap=="function"&&WeakMap.prototype,f=g?WeakMap.prototype.has:null,p=typeof WeakSet=="function"&&WeakSet.prototype,_=p?WeakSet.prototype.has:null,b=typeof WeakRef=="function"&&WeakRef.prototype,x=b?WeakRef.prototype.deref:null,S=Boolean.prototype.valueOf,T=Object.prototype.toString,v=Function.prototype.toString,y=String.prototype.match,k=String.prototype.slice,I=String.prototype.replace,E=String.prototype.toUpperCase,M=String.prototype.toLowerCase,D=RegExp.prototype.test,l=Array.prototype.concat,j=Array.prototype.join,$=Array.prototype.slice,q=Math.floor,C=typeof BigInt=="function"?BigInt.prototype.valueOf:null,F=Object.getOwnPropertySymbols,Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,K=typeof Symbol=="function"&&typeof Symbol.iterator=="object",H=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===K||!0)?Symbol.toStringTag:null,J=Object.prototype.propertyIsEnumerable,ee=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(U){return U.__proto__}:null);function X(U,W){if(U===1/0||U===-1/0||U!==U||U&&U>-1e3&&U<1e3||D.call(/e/,W))return W;var Ee=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof U=="number"){var Ue=U<0?-q(-U):q(U);if(Ue!==U){var Ye=String(Ue),be=k.call(W,Ye.length+1);return I.call(Ye,Ee,"$&_")+"."+I.call(I.call(be,/([0-9]{3})/g,"$&_"),/_$/,"")}}return I.call(W,Ee,"$&_")}var se=mw,oe=se.custom,xe=qe(oe)?oe:null,Re={__proto__:null,double:'"',single:"'"},je={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};Fi=function U(W,Ee,Ue,Ye){var be=Ee||{};if(We(be,"quoteStyle")&&!We(Re,be.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(We(be,"maxStringLength")&&(typeof be.maxStringLength=="number"?be.maxStringLength<0&&be.maxStringLength!==1/0:be.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var _t=We(be,"customInspect")?be.customInspect:!0;if(typeof _t!="boolean"&&_t!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(We(be,"indent")&&be.indent!==null&&be.indent!=="	"&&!(parseInt(be.indent,10)===be.indent&&be.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(We(be,"numericSeparator")&&typeof be.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var Mt=be.numericSeparator;if(typeof W>"u")return"undefined";if(W===null)return"null";if(typeof W=="boolean")return W?"true":"false";if(typeof W=="string")return ht(W,be);if(typeof W=="number"){if(W===0)return 1/0/W>0?"0":"-0";var wt=String(W);return Mt?X(W,wt):wt}if(typeof W=="bigint"){var Yt=String(W)+"n";return Mt?X(W,Yt):Yt}var yt=typeof be.depth>"u"?5:be.depth;if(typeof Ue>"u"&&(Ue=0),Ue>=yt&&yt>0&&typeof W=="object")return ct(W)?"[Array]":"[Object]";var tt=Jr(be,Ue);if(typeof Ye>"u")Ye=[];else if(mr(Ye,W)>=0)return"[Circular]";function St(yr,Lr,ia){if(Lr&&(Ye=$.call(Ye),Ye.push(Lr)),ia){var en={depth:be.depth};return We(be,"quoteStyle")&&(en.quoteStyle=be.quoteStyle),U(yr,en,Ue+1,Ye)}return U(yr,be,Ue+1,Ye)}if(typeof W=="function"&&!ft(W)){var ai=Tt(W),ea=Ut(W,St);return"[Function"+(ai?": "+ai:" (anonymous)")+"]"+(ea.length>0?" { "+j.call(ea,", ")+" }":"")}if(qe(W)){var ta=K?I.call(String(W),/^(Symbol\(.*\))_[^)]*$/,"$1"):Q.call(W);return typeof W=="object"&&!K?Xr(ta):ta}if(ce(W)){for(var Bt="<"+M.call(String(W.nodeName)),tr=W.attributes||[],Ir=0;Ir<tr.length;Ir++)Bt+=" "+tr[Ir].name+"="+He(Xe(tr[Ir].value),"double",be);return Bt+=">",W.childNodes&&W.childNodes.length&&(Bt+="..."),Bt+="</"+M.call(String(W.nodeName))+">",Bt}if(ct(W)){if(W.length===0)return"[]";var Or=Ut(W,St);return tt&&!ni(Or)?"["+Rt(Or,tt)+"]":"[ "+j.call(Or,", ")+" ]"}if(Ge(W)){var ra=Ut(W,St);return!("cause"in Error.prototype)&&"cause"in W&&!J.call(W,"cause")?"{ ["+String(W)+"] "+j.call(l.call("[cause]: "+St(W.cause),ra),", ")+" }":ra.length===0?"["+String(W)+"]":"{ ["+String(W)+"] "+j.call(ra,", ")+" }"}if(typeof W=="object"&&_t){if(xe&&typeof W[xe]=="function"&&se)return se(W,{depth:yt-Ue});if(_t!=="symbol"&&typeof W.inspect=="function")return W.inspect()}if(wr(W)){var ii=[];return a&&a.call(W,function(yr,Lr){ii.push(St(Lr,W,!0)+" => "+St(yr,W))}),Jn("Map",t.call(W),ii,tt)}if(qt(W)){var si=[];return d&&d.call(W,function(yr){si.push(St(yr,W))}),Jn("Set",c.call(W),si,tt)}if(Dt(W))return Xn("WeakMap");if(Ft(W))return Xn("WeakSet");if(dt(W))return Xn("WeakRef");if($e(W))return Xr(St(Number(W)));if(st(W))return Xr(St(C.call(W)));if(Se(W))return Xr(S.call(W));if(fe(W))return Xr(St(String(W)));if(typeof window<"u"&&W===window)return"{ [object Window] }";if(typeof globalThis<"u"&&W===globalThis||typeof Xo<"u"&&W===Xo)return"{ [object globalThis] }";if(!mt(W)&&!ft(W)){var vn=Ut(W,St),oi=ee?ee(W)===Object.prototype:W instanceof Object||W.constructor===Object,na=W instanceof Object?"":"null prototype",aa=!oi&&H&&Object(W)===W&&H in W?k.call(ot(W),8,-1):na?"Object":"",ko=oi||typeof W.constructor!="function"?"":W.constructor.name?W.constructor.name+" ":"",rr=ko+(aa||na?"["+j.call(l.call([],aa||[],na||[]),": ")+"] ":"");return vn.length===0?rr+"{}":tt?rr+"{"+Rt(vn,tt)+"}":rr+"{ "+j.call(vn,", ")+" }"}return String(W)};function He(U,W,Ee){var Ue=Ee.quoteStyle||W,Ye=Re[Ue];return Ye+U+Ye}function Xe(U){return I.call(String(U),/"/g,"&quot;")}function ct(U){return ot(U)==="[object Array]"&&(!H||!(typeof U=="object"&&H in U))}function mt(U){return ot(U)==="[object Date]"&&(!H||!(typeof U=="object"&&H in U))}function ft(U){return ot(U)==="[object RegExp]"&&(!H||!(typeof U=="object"&&H in U))}function Ge(U){return ot(U)==="[object Error]"&&(!H||!(typeof U=="object"&&H in U))}function fe(U){return ot(U)==="[object String]"&&(!H||!(typeof U=="object"&&H in U))}function $e(U){return ot(U)==="[object Number]"&&(!H||!(typeof U=="object"&&H in U))}function Se(U){return ot(U)==="[object Boolean]"&&(!H||!(typeof U=="object"&&H in U))}function qe(U){if(K)return U&&typeof U=="object"&&U instanceof Symbol;if(typeof U=="symbol")return!0;if(!U||typeof U!="object"||!Q)return!1;try{return Q.call(U),!0}catch{}return!1}function st(U){if(!U||typeof U!="object"||!C)return!1;try{return C.call(U),!0}catch{}return!1}var Ct=Object.prototype.hasOwnProperty||function(U){return U in this};function We(U,W){return Ct.call(U,W)}function ot(U){return T.call(U)}function Tt(U){if(U.name)return U.name;var W=y.call(v.call(U),/^function\s*([\w$]+)/);return W?W[1]:null}function mr(U,W){if(U.indexOf)return U.indexOf(W);for(var Ee=0,Ue=U.length;Ee<Ue;Ee++)if(U[Ee]===W)return Ee;return-1}function wr(U){if(!t||!U||typeof U!="object")return!1;try{t.call(U);try{c.call(U)}catch{return!0}return U instanceof Map}catch{}return!1}function Dt(U){if(!f||!U||typeof U!="object")return!1;try{f.call(U,f);try{_.call(U,_)}catch{return!0}return U instanceof WeakMap}catch{}return!1}function dt(U){if(!x||!U||typeof U!="object")return!1;try{return x.call(U),!0}catch{}return!1}function qt(U){if(!c||!U||typeof U!="object")return!1;try{c.call(U);try{t.call(U)}catch{return!0}return U instanceof Set}catch{}return!1}function Ft(U){if(!_||!U||typeof U!="object")return!1;try{_.call(U,_);try{f.call(U,f)}catch{return!0}return U instanceof WeakSet}catch{}return!1}function ce(U){return!U||typeof U!="object"?!1:typeof HTMLElement<"u"&&U instanceof HTMLElement?!0:typeof U.nodeName=="string"&&typeof U.getAttribute=="function"}function ht(U,W){if(U.length>W.maxStringLength){var Ee=U.length-W.maxStringLength,Ue="... "+Ee+" more character"+(Ee>1?"s":"");return ht(k.call(U,0,W.maxStringLength),W)+Ue}var Ye=je[W.quoteStyle||"single"];Ye.lastIndex=0;var be=I.call(I.call(U,Ye,"\\$1"),/[\x00-\x1f]/g,Ao);return He(be,"single",W)}function Ao(U){var W=U.charCodeAt(0),Ee={8:"b",9:"t",10:"n",12:"f",13:"r"}[W];return Ee?"\\"+Ee:"\\x"+(W<16?"0":"")+E.call(W.toString(16))}function Xr(U){return"Object("+U+")"}function Xn(U){return U+" { ? }"}function Jn(U,W,Ee,Ue){var Ye=Ue?Rt(Ee,Ue):j.call(Ee,", ");return U+" ("+W+") {"+Ye+"}"}function ni(U){for(var W=0;W<U.length;W++)if(mr(U[W],`
`)>=0)return!1;return!0}function Jr(U,W){var Ee;if(U.indent==="	")Ee="	";else if(typeof U.indent=="number"&&U.indent>0)Ee=j.call(Array(U.indent+1)," ");else return null;return{base:Ee,prev:j.call(Array(W+1),Ee)}}function Rt(U,W){if(U.length===0)return"";var Ee=`
`+W.prev+W.base;return Ee+j.call(U,","+Ee)+`
`+W.prev}function Ut(U,W){var Ee=ct(U),Ue=[];if(Ee){Ue.length=U.length;for(var Ye=0;Ye<U.length;Ye++)Ue[Ye]=We(U,Ye)?W(U[Ye],U):""}var be=typeof F=="function"?F(U):[],_t;if(K){_t={};for(var Mt=0;Mt<be.length;Mt++)_t["$"+be[Mt]]=be[Mt]}for(var wt in U)We(U,wt)&&(Ee&&String(Number(wt))===wt&&wt<U.length||K&&_t["$"+wt]instanceof Symbol||(D.call(/[^\w$]/,wt)?Ue.push(W(wt,U)+": "+W(U[wt],U)):Ue.push(wt+": "+W(U[wt],U))));if(typeof F=="function")for(var Yt=0;Yt<be.length;Yt++)J.call(U,be[Yt])&&Ue.push("["+W(be[Yt])+"]: "+W(U[be[Yt]],U));return Ue}return Fi}var Ui,Ql;function ww(){if(Ql)return Ui;Ql=1;var e=Ea(),r=un(),t=function(d,g,f){for(var p=d,_;(_=p.next)!=null;p=_)if(_.key===g)return p.next=_.next,f||(_.next=d.next,d.next=_),_},a=function(d,g){if(d){var f=t(d,g);return f&&f.value}},s=function(d,g,f){var p=t(d,g);p?p.value=f:d.next={key:g,next:d.next,value:f}},o=function(d,g){return d?!!t(d,g):!1},c=function(d,g){if(d)return t(d,g,!0)};return Ui=function(){var g,f={assert:function(p){if(!f.has(p))throw new r("Side channel does not contain "+e(p))},delete:function(p){var _=g&&g.next,b=c(g,p);return b&&_&&_===b&&(g=void 0),!!b},get:function(p){return a(g,p)},has:function(p){return o(g,p)},set:function(p,_){g||(g={next:void 0}),s(g,p,_)}};return f},Ui}var Bi,Kl;function yw(){return Kl||(Kl=1,Bi=Object),Bi}var zi,Zl;function vw(){return Zl||(Zl=1,zi=Error),zi}var Hi,Vl;function xw(){return Vl||(Vl=1,Hi=EvalError),Hi}var Wi,Xl;function bw(){return Xl||(Xl=1,Wi=RangeError),Wi}var Yi,Jl;function Tw(){return Jl||(Jl=1,Yi=ReferenceError),Yi}var Gi,eu;function _w(){return eu||(eu=1,Gi=SyntaxError),Gi}var Qi,tu;function Sw(){return tu||(tu=1,Qi=URIError),Qi}var Ki,ru;function Aw(){return ru||(ru=1,Ki=Math.abs),Ki}var Zi,nu;function kw(){return nu||(nu=1,Zi=Math.floor),Zi}var Vi,au;function Cw(){return au||(au=1,Vi=Math.max),Vi}var Xi,iu;function Ew(){return iu||(iu=1,Xi=Math.min),Xi}var Ji,su;function Iw(){return su||(su=1,Ji=Math.pow),Ji}var es,ou;function Ow(){return ou||(ou=1,es=Math.round),es}var ts,lu;function Lw(){return lu||(lu=1,ts=Number.isNaN||function(r){return r!==r}),ts}var rs,uu;function Dw(){if(uu)return rs;uu=1;var e=Lw();return rs=function(t){return e(t)||t===0?t:t<0?-1:1},rs}var ns,cu;function Rw(){return cu||(cu=1,ns=Object.getOwnPropertyDescriptor),ns}var as,fu;function du(){if(fu)return as;fu=1;var e=Rw();if(e)try{e([],"length")}catch{e=null}return as=e,as}var is,hu;function Mw(){if(hu)return is;hu=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return is=e,is}var ss,pu;function $w(){return pu||(pu=1,ss=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},t=Symbol("test"),a=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var s=42;r[t]=s;for(var o in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var c=Object.getOwnPropertySymbols(r);if(c.length!==1||c[0]!==t||!Object.prototype.propertyIsEnumerable.call(r,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(r,t);if(d.value!==s||d.enumerable!==!0)return!1}return!0}),ss}var os,gu;function Pw(){if(gu)return os;gu=1;var e=typeof Symbol<"u"&&Symbol,r=$w();return os=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:r()},os}var ls,mu;function wu(){return mu||(mu=1,ls=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),ls}var us,yu;function jw(){return yu||(yu=1,us=Object),us}var cs,vu;function xu(){if(vu)return cs;vu=1;var e=jw();return cs=e.getPrototypeOf||null,cs}var fs,bu;function Nw(){if(bu)return fs;bu=1;var e="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,t=Math.max,a="[object Function]",s=function(g,f){for(var p=[],_=0;_<g.length;_+=1)p[_]=g[_];for(var b=0;b<f.length;b+=1)p[b+g.length]=f[b];return p},o=function(g,f){for(var p=[],_=f,b=0;_<g.length;_+=1,b+=1)p[b]=g[_];return p},c=function(d,g){for(var f="",p=0;p<d.length;p+=1)f+=d[p],p+1<d.length&&(f+=g);return f};return fs=function(g){var f=this;if(typeof f!="function"||r.apply(f)!==a)throw new TypeError(e+f);for(var p=o(arguments,1),_,b=function(){if(this instanceof _){var y=f.apply(this,s(p,arguments));return Object(y)===y?y:this}return f.apply(g,s(p,arguments))},x=t(0,f.length-p.length),S=[],T=0;T<x;T++)S[T]="$"+T;if(_=Function("binder","return function ("+c(S,",")+"){ return binder.apply(this,arguments); }")(b),f.prototype){var v=function(){};v.prototype=f.prototype,_.prototype=new v,v.prototype=null}return _},fs}var ds,Tu;function Ia(){if(Tu)return ds;Tu=1;var e=Nw();return ds=Function.prototype.bind||e,ds}var hs,_u;function ps(){return _u||(_u=1,hs=Function.prototype.call),hs}var gs,Su;function Au(){return Su||(Su=1,gs=Function.prototype.apply),gs}var ms,ku;function qw(){return ku||(ku=1,ms=typeof Reflect<"u"&&Reflect&&Reflect.apply),ms}var ws,Cu;function Fw(){if(Cu)return ws;Cu=1;var e=Ia(),r=Au(),t=ps(),a=qw();return ws=a||e.call(t,r),ws}var ys,Eu;function Iu(){if(Eu)return ys;Eu=1;var e=Ia(),r=un(),t=ps(),a=Fw();return ys=function(o){if(o.length<1||typeof o[0]!="function")throw new r("a function is required");return a(e,t,o)},ys}var vs,Ou;function Uw(){if(Ou)return vs;Ou=1;var e=Iu(),r=du(),t;try{t=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var a=!!t&&r&&r(Object.prototype,"__proto__"),s=Object,o=s.getPrototypeOf;return vs=a&&typeof a.get=="function"?e([a.get]):typeof o=="function"?function(d){return o(d==null?d:s(d))}:!1,vs}var xs,Lu;function Bw(){if(Lu)return xs;Lu=1;var e=wu(),r=xu(),t=Uw();return xs=e?function(s){return e(s)}:r?function(s){if(!s||typeof s!="object"&&typeof s!="function")throw new TypeError("getProto: not an object");return r(s)}:t?function(s){return t(s)}:null,xs}var bs,Du;function zw(){if(Du)return bs;Du=1;var e=Function.prototype.call,r=Object.prototype.hasOwnProperty,t=Ia();return bs=t.call(e,r),bs}var Ts,Ru;function _s(){if(Ru)return Ts;Ru=1;var e,r=yw(),t=vw(),a=xw(),s=bw(),o=Tw(),c=_w(),d=un(),g=Sw(),f=Aw(),p=kw(),_=Cw(),b=Ew(),x=Iw(),S=Ow(),T=Dw(),v=Function,y=function(Ge){try{return v('"use strict"; return ('+Ge+").constructor;")()}catch{}},k=du(),I=Mw(),E=function(){throw new d},M=k?(function(){try{return arguments.callee,E}catch{try{return k(arguments,"callee").get}catch{return E}}})():E,D=Pw()(),l=Bw(),j=xu(),$=wu(),q=Au(),C=ps(),F={},Q=typeof Uint8Array>"u"||!l?e:l(Uint8Array),K={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?e:ArrayBuffer,"%ArrayIteratorPrototype%":D&&l?l([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":F,"%AsyncGenerator%":F,"%AsyncGeneratorFunction%":F,"%AsyncIteratorPrototype%":F,"%Atomics%":typeof Atomics>"u"?e:Atomics,"%BigInt%":typeof BigInt>"u"?e:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?e:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":t,"%eval%":eval,"%EvalError%":a,"%Float32Array%":typeof Float32Array>"u"?e:Float32Array,"%Float64Array%":typeof Float64Array>"u"?e:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?e:FinalizationRegistry,"%Function%":v,"%GeneratorFunction%":F,"%Int8Array%":typeof Int8Array>"u"?e:Int8Array,"%Int16Array%":typeof Int16Array>"u"?e:Int16Array,"%Int32Array%":typeof Int32Array>"u"?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":D&&l?l(l([][Symbol.iterator]())):e,"%JSON%":typeof JSON=="object"?JSON:e,"%Map%":typeof Map>"u"?e:Map,"%MapIteratorPrototype%":typeof Map>"u"||!D||!l?e:l(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":r,"%Object.getOwnPropertyDescriptor%":k,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?e:Promise,"%Proxy%":typeof Proxy>"u"?e:Proxy,"%RangeError%":s,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?e:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?e:Set,"%SetIteratorPrototype%":typeof Set>"u"||!D||!l?e:l(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":D&&l?l(""[Symbol.iterator]()):e,"%Symbol%":D?Symbol:e,"%SyntaxError%":c,"%ThrowTypeError%":M,"%TypedArray%":Q,"%TypeError%":d,"%Uint8Array%":typeof Uint8Array>"u"?e:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?e:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?e:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?e:Uint32Array,"%URIError%":g,"%WeakMap%":typeof WeakMap>"u"?e:WeakMap,"%WeakRef%":typeof WeakRef>"u"?e:WeakRef,"%WeakSet%":typeof WeakSet>"u"?e:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":q,"%Object.defineProperty%":I,"%Object.getPrototypeOf%":j,"%Math.abs%":f,"%Math.floor%":p,"%Math.max%":_,"%Math.min%":b,"%Math.pow%":x,"%Math.round%":S,"%Math.sign%":T,"%Reflect.getPrototypeOf%":$};if(l)try{null.error}catch(Ge){var H=l(l(Ge));K["%Error.prototype%"]=H}var J=function Ge(fe){var $e;if(fe==="%AsyncFunction%")$e=y("async function () {}");else if(fe==="%GeneratorFunction%")$e=y("function* () {}");else if(fe==="%AsyncGeneratorFunction%")$e=y("async function* () {}");else if(fe==="%AsyncGenerator%"){var Se=Ge("%AsyncGeneratorFunction%");Se&&($e=Se.prototype)}else if(fe==="%AsyncIteratorPrototype%"){var qe=Ge("%AsyncGenerator%");qe&&l&&($e=l(qe.prototype))}return K[fe]=$e,$e},ee={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},X=Ia(),se=zw(),oe=X.call(C,Array.prototype.concat),xe=X.call(q,Array.prototype.splice),Re=X.call(C,String.prototype.replace),je=X.call(C,String.prototype.slice),He=X.call(C,RegExp.prototype.exec),Xe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,ct=/\\(\\)?/g,mt=function(fe){var $e=je(fe,0,1),Se=je(fe,-1);if($e==="%"&&Se!=="%")throw new c("invalid intrinsic syntax, expected closing `%`");if(Se==="%"&&$e!=="%")throw new c("invalid intrinsic syntax, expected opening `%`");var qe=[];return Re(fe,Xe,function(st,Ct,We,ot){qe[qe.length]=We?Re(ot,ct,"$1"):Ct||st}),qe},ft=function(fe,$e){var Se=fe,qe;if(se(ee,Se)&&(qe=ee[Se],Se="%"+qe[0]+"%"),se(K,Se)){var st=K[Se];if(st===F&&(st=J(Se)),typeof st>"u"&&!$e)throw new d("intrinsic "+fe+" exists, but is not available. Please file an issue!");return{alias:qe,name:Se,value:st}}throw new c("intrinsic "+fe+" does not exist!")};return Ts=function(fe,$e){if(typeof fe!="string"||fe.length===0)throw new d("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof $e!="boolean")throw new d('"allowMissing" argument must be a boolean');if(He(/^%?[^%]*%?$/,fe)===null)throw new c("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Se=mt(fe),qe=Se.length>0?Se[0]:"",st=ft("%"+qe+"%",$e),Ct=st.name,We=st.value,ot=!1,Tt=st.alias;Tt&&(qe=Tt[0],xe(Se,oe([0,1],Tt)));for(var mr=1,wr=!0;mr<Se.length;mr+=1){var Dt=Se[mr],dt=je(Dt,0,1),qt=je(Dt,-1);if((dt==='"'||dt==="'"||dt==="`"||qt==='"'||qt==="'"||qt==="`")&&dt!==qt)throw new c("property names with quotes must have matching quotes");if((Dt==="constructor"||!wr)&&(ot=!0),qe+="."+Dt,Ct="%"+qe+"%",se(K,Ct))We=K[Ct];else if(We!=null){if(!(Dt in We)){if(!$e)throw new d("base intrinsic for "+fe+" exists, but the property is not available.");return}if(k&&mr+1>=Se.length){var Ft=k(We,Dt);wr=!!Ft,wr&&"get"in Ft&&!("originalValue"in Ft.get)?We=Ft.get:We=We[Dt]}else wr=se(We,Dt),We=We[Dt];wr&&!ot&&(K[Ct]=We)}}return We},Ts}var Ss,Mu;function $u(){if(Mu)return Ss;Mu=1;var e=_s(),r=Iu(),t=r([e("%String.prototype.indexOf%")]);return Ss=function(s,o){var c=e(s,!!o);return typeof c=="function"&&t(s,".prototype.")>-1?r([c]):c},Ss}var As,Pu;function ju(){if(Pu)return As;Pu=1;var e=_s(),r=$u(),t=Ea(),a=un(),s=e("%Map%",!0),o=r("Map.prototype.get",!0),c=r("Map.prototype.set",!0),d=r("Map.prototype.has",!0),g=r("Map.prototype.delete",!0),f=r("Map.prototype.size",!0);return As=!!s&&function(){var _,b={assert:function(x){if(!b.has(x))throw new a("Side channel does not contain "+t(x))},delete:function(x){if(_){var S=g(_,x);return f(_)===0&&(_=void 0),S}return!1},get:function(x){if(_)return o(_,x)},has:function(x){return _?d(_,x):!1},set:function(x,S){_||(_=new s),c(_,x,S)}};return b},As}var ks,Nu;function Hw(){if(Nu)return ks;Nu=1;var e=_s(),r=$u(),t=Ea(),a=ju(),s=un(),o=e("%WeakMap%",!0),c=r("WeakMap.prototype.get",!0),d=r("WeakMap.prototype.set",!0),g=r("WeakMap.prototype.has",!0),f=r("WeakMap.prototype.delete",!0);return ks=o?function(){var _,b,x={assert:function(S){if(!x.has(S))throw new s("Side channel does not contain "+t(S))},delete:function(S){if(o&&S&&(typeof S=="object"||typeof S=="function")){if(_)return f(_,S)}else if(a&&b)return b.delete(S);return!1},get:function(S){return o&&S&&(typeof S=="object"||typeof S=="function")&&_?c(_,S):b&&b.get(S)},has:function(S){return o&&S&&(typeof S=="object"||typeof S=="function")&&_?g(_,S):!!b&&b.has(S)},set:function(S,T){o&&S&&(typeof S=="object"||typeof S=="function")?(_||(_=new o),d(_,S,T)):a&&(b||(b=a()),b.set(S,T))}};return x}:a,ks}var Cs,qu;function Ww(){if(qu)return Cs;qu=1;var e=un(),r=Ea(),t=ww(),a=ju(),s=Hw(),o=s||a||t;return Cs=function(){var d,g={assert:function(f){if(!g.has(f))throw new e("Side channel does not contain "+r(f))},delete:function(f){return!!d&&d.delete(f)},get:function(f){return d&&d.get(f)},has:function(f){return!!d&&d.has(f)},set:function(f,p){d||(d=o()),d.set(f,p)}};return g},Cs}var Es,Fu;function Is(){if(Fu)return Es;Fu=1;var e=String.prototype.replace,r=/%20/g,t={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Es={default:t.RFC3986,formatters:{RFC1738:function(a){return e.call(a,r,"+")},RFC3986:function(a){return String(a)}},RFC1738:t.RFC1738,RFC3986:t.RFC3986},Es}var Os,Uu;function Bu(){if(Uu)return Os;Uu=1;var e=Is(),r=Object.prototype.hasOwnProperty,t=Array.isArray,a=(function(){for(var v=[],y=0;y<256;++y)v.push("%"+((y<16?"0":"")+y.toString(16)).toUpperCase());return v})(),s=function(y){for(;y.length>1;){var k=y.pop(),I=k.obj[k.prop];if(t(I)){for(var E=[],M=0;M<I.length;++M)typeof I[M]<"u"&&E.push(I[M]);k.obj[k.prop]=E}}},o=function(y,k){for(var I=k&&k.plainObjects?{__proto__:null}:{},E=0;E<y.length;++E)typeof y[E]<"u"&&(I[E]=y[E]);return I},c=function v(y,k,I){if(!k)return y;if(typeof k!="object"&&typeof k!="function"){if(t(y))y.push(k);else if(y&&typeof y=="object")(I&&(I.plainObjects||I.allowPrototypes)||!r.call(Object.prototype,k))&&(y[k]=!0);else return[y,k];return y}if(!y||typeof y!="object")return[y].concat(k);var E=y;return t(y)&&!t(k)&&(E=o(y,I)),t(y)&&t(k)?(k.forEach(function(M,D){if(r.call(y,D)){var l=y[D];l&&typeof l=="object"&&M&&typeof M=="object"?y[D]=v(l,M,I):y.push(M)}else y[D]=M}),y):Object.keys(k).reduce(function(M,D){var l=k[D];return r.call(M,D)?M[D]=v(M[D],l,I):M[D]=l,M},E)},d=function(y,k){return Object.keys(k).reduce(function(I,E){return I[E]=k[E],I},y)},g=function(v,y,k){var I=v.replace(/\+/g," ");if(k==="iso-8859-1")return I.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(I)}catch{return I}},f=1024,p=function(y,k,I,E,M){if(y.length===0)return y;var D=y;if(typeof y=="symbol"?D=Symbol.prototype.toString.call(y):typeof y!="string"&&(D=String(y)),I==="iso-8859-1")return escape(D).replace(/%u[0-9a-f]{4}/gi,function(Q){return"%26%23"+parseInt(Q.slice(2),16)+"%3B"});for(var l="",j=0;j<D.length;j+=f){for(var $=D.length>=f?D.slice(j,j+f):D,q=[],C=0;C<$.length;++C){var F=$.charCodeAt(C);if(F===45||F===46||F===95||F===126||F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122||M===e.RFC1738&&(F===40||F===41)){q[q.length]=$.charAt(C);continue}if(F<128){q[q.length]=a[F];continue}if(F<2048){q[q.length]=a[192|F>>6]+a[128|F&63];continue}if(F<55296||F>=57344){q[q.length]=a[224|F>>12]+a[128|F>>6&63]+a[128|F&63];continue}C+=1,F=65536+((F&1023)<<10|$.charCodeAt(C)&1023),q[q.length]=a[240|F>>18]+a[128|F>>12&63]+a[128|F>>6&63]+a[128|F&63]}l+=q.join("")}return l},_=function(y){for(var k=[{obj:{o:y},prop:"o"}],I=[],E=0;E<k.length;++E)for(var M=k[E],D=M.obj[M.prop],l=Object.keys(D),j=0;j<l.length;++j){var $=l[j],q=D[$];typeof q=="object"&&q!==null&&I.indexOf(q)===-1&&(k.push({obj:D,prop:$}),I.push(q))}return s(k),y},b=function(y){return Object.prototype.toString.call(y)==="[object RegExp]"},x=function(y){return!y||typeof y!="object"?!1:!!(y.constructor&&y.constructor.isBuffer&&y.constructor.isBuffer(y))},S=function(y,k){return[].concat(y,k)},T=function(y,k){if(t(y)){for(var I=[],E=0;E<y.length;E+=1)I.push(k(y[E]));return I}return k(y)};return Os={arrayToObject:o,assign:d,combine:S,compact:_,decode:g,encode:p,isBuffer:x,isRegExp:b,maybeMap:T,merge:c},Os}var Ls,zu;function Yw(){if(zu)return Ls;zu=1;var e=Ww(),r=Bu(),t=Is(),a=Object.prototype.hasOwnProperty,s={brackets:function(v){return v+"[]"},comma:"comma",indices:function(v,y){return v+"["+y+"]"},repeat:function(v){return v}},o=Array.isArray,c=Array.prototype.push,d=function(T,v){c.apply(T,o(v)?v:[v])},g=Date.prototype.toISOString,f=t.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:r.encode,encodeValuesOnly:!1,filter:void 0,format:f,formatter:t.formatters[f],indices:!1,serializeDate:function(v){return g.call(v)},skipNulls:!1,strictNullHandling:!1},_=function(v){return typeof v=="string"||typeof v=="number"||typeof v=="boolean"||typeof v=="symbol"||typeof v=="bigint"},b={},x=function T(v,y,k,I,E,M,D,l,j,$,q,C,F,Q,K,H,J,ee){for(var X=v,se=ee,oe=0,xe=!1;(se=se.get(b))!==void 0&&!xe;){var Re=se.get(v);if(oe+=1,typeof Re<"u"){if(Re===oe)throw new RangeError("Cyclic object value");xe=!0}typeof se.get(b)>"u"&&(oe=0)}if(typeof $=="function"?X=$(y,X):X instanceof Date?X=F(X):k==="comma"&&o(X)&&(X=r.maybeMap(X,function(Ct){return Ct instanceof Date?F(Ct):Ct})),X===null){if(M)return j&&!H?j(y,p.encoder,J,"key",Q):y;X=""}if(_(X)||r.isBuffer(X)){if(j){var je=H?y:j(y,p.encoder,J,"key",Q);return[K(je)+"="+K(j(X,p.encoder,J,"value",Q))]}return[K(y)+"="+K(String(X))]}var He=[];if(typeof X>"u")return He;var Xe;if(k==="comma"&&o(X))H&&j&&(X=r.maybeMap(X,j)),Xe=[{value:X.length>0?X.join(",")||null:void 0}];else if(o($))Xe=$;else{var ct=Object.keys(X);Xe=q?ct.sort(q):ct}var mt=l?String(y).replace(/\./g,"%2E"):String(y),ft=I&&o(X)&&X.length===1?mt+"[]":mt;if(E&&o(X)&&X.length===0)return ft+"[]";for(var Ge=0;Ge<Xe.length;++Ge){var fe=Xe[Ge],$e=typeof fe=="object"&&fe&&typeof fe.value<"u"?fe.value:X[fe];if(!(D&&$e===null)){var Se=C&&l?String(fe).replace(/\./g,"%2E"):String(fe),qe=o(X)?typeof k=="function"?k(ft,Se):ft:ft+(C?"."+Se:"["+Se+"]");ee.set(v,oe);var st=e();st.set(b,ee),d(He,T($e,qe,k,I,E,M,D,l,k==="comma"&&H&&o(X)?null:j,$,q,C,F,Q,K,H,J,st))}}return He},S=function(v){if(!v)return p;if(typeof v.allowEmptyArrays<"u"&&typeof v.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof v.encodeDotInKeys<"u"&&typeof v.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(v.encoder!==null&&typeof v.encoder<"u"&&typeof v.encoder!="function")throw new TypeError("Encoder has to be a function.");var y=v.charset||p.charset;if(typeof v.charset<"u"&&v.charset!=="utf-8"&&v.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var k=t.default;if(typeof v.format<"u"){if(!a.call(t.formatters,v.format))throw new TypeError("Unknown format option provided.");k=v.format}var I=t.formatters[k],E=p.filter;(typeof v.filter=="function"||o(v.filter))&&(E=v.filter);var M;if(v.arrayFormat in s?M=v.arrayFormat:"indices"in v?M=v.indices?"indices":"repeat":M=p.arrayFormat,"commaRoundTrip"in v&&typeof v.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var D=typeof v.allowDots>"u"?v.encodeDotInKeys===!0?!0:p.allowDots:!!v.allowDots;return{addQueryPrefix:typeof v.addQueryPrefix=="boolean"?v.addQueryPrefix:p.addQueryPrefix,allowDots:D,allowEmptyArrays:typeof v.allowEmptyArrays=="boolean"?!!v.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:M,charset:y,charsetSentinel:typeof v.charsetSentinel=="boolean"?v.charsetSentinel:p.charsetSentinel,commaRoundTrip:!!v.commaRoundTrip,delimiter:typeof v.delimiter>"u"?p.delimiter:v.delimiter,encode:typeof v.encode=="boolean"?v.encode:p.encode,encodeDotInKeys:typeof v.encodeDotInKeys=="boolean"?v.encodeDotInKeys:p.encodeDotInKeys,encoder:typeof v.encoder=="function"?v.encoder:p.encoder,encodeValuesOnly:typeof v.encodeValuesOnly=="boolean"?v.encodeValuesOnly:p.encodeValuesOnly,filter:E,format:k,formatter:I,serializeDate:typeof v.serializeDate=="function"?v.serializeDate:p.serializeDate,skipNulls:typeof v.skipNulls=="boolean"?v.skipNulls:p.skipNulls,sort:typeof v.sort=="function"?v.sort:null,strictNullHandling:typeof v.strictNullHandling=="boolean"?v.strictNullHandling:p.strictNullHandling}};return Ls=function(T,v){var y=T,k=S(v),I,E;typeof k.filter=="function"?(E=k.filter,y=E("",y)):o(k.filter)&&(E=k.filter,I=E);var M=[];if(typeof y!="object"||y===null)return"";var D=s[k.arrayFormat],l=D==="comma"&&k.commaRoundTrip;I||(I=Object.keys(y)),k.sort&&I.sort(k.sort);for(var j=e(),$=0;$<I.length;++$){var q=I[$],C=y[q];k.skipNulls&&C===null||d(M,x(C,q,D,l,k.allowEmptyArrays,k.strictNullHandling,k.skipNulls,k.encodeDotInKeys,k.encode?k.encoder:null,k.filter,k.sort,k.allowDots,k.serializeDate,k.format,k.formatter,k.encodeValuesOnly,k.charset,j))}var F=M.join(k.delimiter),Q=k.addQueryPrefix===!0?"?":"";return k.charsetSentinel&&(k.charset==="iso-8859-1"?Q+="utf8=%26%2310003%3B&":Q+="utf8=%E2%9C%93&"),F.length>0?Q+F:""},Ls}var Ds,Hu;function Gw(){if(Hu)return Ds;Hu=1;var e=Bu(),r=Object.prototype.hasOwnProperty,t=Array.isArray,a={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:e.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},s=function(b){return b.replace(/&#(\d+);/g,function(x,S){return String.fromCharCode(parseInt(S,10))})},o=function(b,x,S){if(b&&typeof b=="string"&&x.comma&&b.indexOf(",")>-1)return b.split(",");if(x.throwOnLimitExceeded&&S>=x.arrayLimit)throw new RangeError("Array limit exceeded. Only "+x.arrayLimit+" element"+(x.arrayLimit===1?"":"s")+" allowed in an array.");return b},c="utf8=%26%2310003%3B",d="utf8=%E2%9C%93",g=function(x,S){var T={__proto__:null},v=S.ignoreQueryPrefix?x.replace(/^\?/,""):x;v=v.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var y=S.parameterLimit===1/0?void 0:S.parameterLimit,k=v.split(S.delimiter,S.throwOnLimitExceeded?y+1:y);if(S.throwOnLimitExceeded&&k.length>y)throw new RangeError("Parameter limit exceeded. Only "+y+" parameter"+(y===1?"":"s")+" allowed.");var I=-1,E,M=S.charset;if(S.charsetSentinel)for(E=0;E<k.length;++E)k[E].indexOf("utf8=")===0&&(k[E]===d?M="utf-8":k[E]===c&&(M="iso-8859-1"),I=E,E=k.length);for(E=0;E<k.length;++E)if(E!==I){var D=k[E],l=D.indexOf("]="),j=l===-1?D.indexOf("="):l+1,$,q;j===-1?($=S.decoder(D,a.decoder,M,"key"),q=S.strictNullHandling?null:""):($=S.decoder(D.slice(0,j),a.decoder,M,"key"),q=e.maybeMap(o(D.slice(j+1),S,t(T[$])?T[$].length:0),function(F){return S.decoder(F,a.decoder,M,"value")})),q&&S.interpretNumericEntities&&M==="iso-8859-1"&&(q=s(String(q))),D.indexOf("[]=")>-1&&(q=t(q)?[q]:q);var C=r.call(T,$);C&&S.duplicates==="combine"?T[$]=e.combine(T[$],q):(!C||S.duplicates==="last")&&(T[$]=q)}return T},f=function(b,x,S,T){var v=0;if(b.length>0&&b[b.length-1]==="[]"){var y=b.slice(0,-1).join("");v=Array.isArray(x)&&x[y]?x[y].length:0}for(var k=T?x:o(x,S,v),I=b.length-1;I>=0;--I){var E,M=b[I];if(M==="[]"&&S.parseArrays)E=S.allowEmptyArrays&&(k===""||S.strictNullHandling&&k===null)?[]:e.combine([],k);else{E=S.plainObjects?{__proto__:null}:{};var D=M.charAt(0)==="["&&M.charAt(M.length-1)==="]"?M.slice(1,-1):M,l=S.decodeDotInKeys?D.replace(/%2E/g,"."):D,j=parseInt(l,10);!S.parseArrays&&l===""?E={0:k}:!isNaN(j)&&M!==l&&String(j)===l&&j>=0&&S.parseArrays&&j<=S.arrayLimit?(E=[],E[j]=k):l!=="__proto__"&&(E[l]=k)}k=E}return k},p=function(x,S,T,v){if(x){var y=T.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x,k=/(\[[^[\]]*])/,I=/(\[[^[\]]*])/g,E=T.depth>0&&k.exec(y),M=E?y.slice(0,E.index):y,D=[];if(M){if(!T.plainObjects&&r.call(Object.prototype,M)&&!T.allowPrototypes)return;D.push(M)}for(var l=0;T.depth>0&&(E=I.exec(y))!==null&&l<T.depth;){if(l+=1,!T.plainObjects&&r.call(Object.prototype,E[1].slice(1,-1))&&!T.allowPrototypes)return;D.push(E[1])}if(E){if(T.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+T.depth+" and strictDepth is true");D.push("["+y.slice(E.index)+"]")}return f(D,S,T,v)}},_=function(x){if(!x)return a;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.decodeDotInKeys<"u"&&typeof x.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(x.decoder!==null&&typeof x.decoder<"u"&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof x.throwOnLimitExceeded<"u"&&typeof x.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var S=typeof x.charset>"u"?a.charset:x.charset,T=typeof x.duplicates>"u"?a.duplicates:x.duplicates;if(T!=="combine"&&T!=="first"&&T!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var v=typeof x.allowDots>"u"?x.decodeDotInKeys===!0?!0:a.allowDots:!!x.allowDots;return{allowDots:v,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:a.allowEmptyArrays,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:a.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:a.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:a.arrayLimit,charset:S,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:a.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:a.comma,decodeDotInKeys:typeof x.decodeDotInKeys=="boolean"?x.decodeDotInKeys:a.decodeDotInKeys,decoder:typeof x.decoder=="function"?x.decoder:a.decoder,delimiter:typeof x.delimiter=="string"||e.isRegExp(x.delimiter)?x.delimiter:a.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:a.depth,duplicates:T,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:a.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:a.plainObjects,strictDepth:typeof x.strictDepth=="boolean"?!!x.strictDepth:a.strictDepth,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:a.strictNullHandling,throwOnLimitExceeded:typeof x.throwOnLimitExceeded=="boolean"?x.throwOnLimitExceeded:!1}};return Ds=function(b,x){var S=_(x);if(b===""||b===null||typeof b>"u")return S.plainObjects?{__proto__:null}:{};for(var T=typeof b=="string"?g(b,S):b,v=S.plainObjects?{__proto__:null}:{},y=Object.keys(T),k=0;k<y.length;++k){var I=y[k],E=p(I,T[I],S,typeof b=="string");v=e.merge(v,E,S)}return S.allowSparse===!0?v:e.compact(v)},Ds}var Rs,Wu;function Qw(){if(Wu)return Rs;Wu=1;var e=Yw(),r=Gw(),t=Is();return Rs={formats:t,parse:r,stringify:e},Rs}var Kw=Qw();const Zw=yi(Kw);function Vw(e){try{return new URL(e),!0}catch{return!1}}const we=e=>new Promise(r=>{setTimeout(()=>{r()},e)}),Yu=()=>{if(Promise.withResolvers)return Promise.withResolvers();let e,r;return{promise:new Promise((a,s)=>{e=a,r=s}),resolve:e,reject:r}};/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const Xw=4,Gu=0,Qu=1,Jw=2;function cn(e){let r=e.length;for(;--r>=0;)e[r]=0}const ey=0,Ku=1,ty=2,ry=3,ny=258,Ms=29,In=256,On=In+1+Ms,fn=30,$s=19,Zu=2*On+1,Ur=15,Ps=16,ay=7,js=256,Vu=16,Xu=17,Ju=18,Ns=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Oa=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),iy=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ec=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sy=512,dr=new Array((On+2)*2);cn(dr);const Ln=new Array(fn*2);cn(Ln);const Dn=new Array(sy);cn(Dn);const Rn=new Array(ny-ry+1);cn(Rn);const qs=new Array(Ms);cn(qs);const La=new Array(fn);cn(La);function Fs(e,r,t,a,s){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=a,this.max_length=s,this.has_stree=e&&e.length}let tc,rc,nc;function Us(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}const ac=e=>e<256?Dn[e]:Dn[256+(e>>>7)],Mn=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},kt=(e,r,t)=>{e.bi_valid>Ps-t?(e.bi_buf|=r<<e.bi_valid&65535,Mn(e,e.bi_buf),e.bi_buf=r>>Ps-e.bi_valid,e.bi_valid+=t-Ps):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},Vt=(e,r,t)=>{kt(e,t[r*2],t[r*2+1])},ic=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},oy=e=>{e.bi_valid===16?(Mn(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},ly=(e,r)=>{const t=r.dyn_tree,a=r.max_code,s=r.stat_desc.static_tree,o=r.stat_desc.has_stree,c=r.stat_desc.extra_bits,d=r.stat_desc.extra_base,g=r.stat_desc.max_length;let f,p,_,b,x,S,T=0;for(b=0;b<=Ur;b++)e.bl_count[b]=0;for(t[e.heap[e.heap_max]*2+1]=0,f=e.heap_max+1;f<Zu;f++)p=e.heap[f],b=t[t[p*2+1]*2+1]+1,b>g&&(b=g,T++),t[p*2+1]=b,!(p>a)&&(e.bl_count[b]++,x=0,p>=d&&(x=c[p-d]),S=t[p*2],e.opt_len+=S*(b+x),o&&(e.static_len+=S*(s[p*2+1]+x)));if(T!==0){do{for(b=g-1;e.bl_count[b]===0;)b--;e.bl_count[b]--,e.bl_count[b+1]+=2,e.bl_count[g]--,T-=2}while(T>0);for(b=g;b!==0;b--)for(p=e.bl_count[b];p!==0;)_=e.heap[--f],!(_>a)&&(t[_*2+1]!==b&&(e.opt_len+=(b-t[_*2+1])*t[_*2],t[_*2+1]=b),p--)}},sc=(e,r,t)=>{const a=new Array(Ur+1);let s=0,o,c;for(o=1;o<=Ur;o++)s=s+t[o-1]<<1,a[o]=s;for(c=0;c<=r;c++){let d=e[c*2+1];d!==0&&(e[c*2]=ic(a[d]++,d))}},uy=()=>{let e,r,t,a,s;const o=new Array(Ur+1);for(t=0,a=0;a<Ms-1;a++)for(qs[a]=t,e=0;e<1<<Ns[a];e++)Rn[t++]=a;for(Rn[t-1]=a,s=0,a=0;a<16;a++)for(La[a]=s,e=0;e<1<<Oa[a];e++)Dn[s++]=a;for(s>>=7;a<fn;a++)for(La[a]=s<<7,e=0;e<1<<Oa[a]-7;e++)Dn[256+s++]=a;for(r=0;r<=Ur;r++)o[r]=0;for(e=0;e<=143;)dr[e*2+1]=8,e++,o[8]++;for(;e<=255;)dr[e*2+1]=9,e++,o[9]++;for(;e<=279;)dr[e*2+1]=7,e++,o[7]++;for(;e<=287;)dr[e*2+1]=8,e++,o[8]++;for(sc(dr,On+1,o),e=0;e<fn;e++)Ln[e*2+1]=5,Ln[e*2]=ic(e,5);tc=new Fs(dr,Ns,In+1,On,Ur),rc=new Fs(Ln,Oa,0,fn,Ur),nc=new Fs(new Array(0),iy,0,$s,ay)},oc=e=>{let r;for(r=0;r<On;r++)e.dyn_ltree[r*2]=0;for(r=0;r<fn;r++)e.dyn_dtree[r*2]=0;for(r=0;r<$s;r++)e.bl_tree[r*2]=0;e.dyn_ltree[js*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},lc=e=>{e.bi_valid>8?Mn(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},uc=(e,r,t,a)=>{const s=r*2,o=t*2;return e[s]<e[o]||e[s]===e[o]&&a[r]<=a[t]},Bs=(e,r,t)=>{const a=e.heap[t];let s=t<<1;for(;s<=e.heap_len&&(s<e.heap_len&&uc(r,e.heap[s+1],e.heap[s],e.depth)&&s++,!uc(r,a,e.heap[s],e.depth));)e.heap[t]=e.heap[s],t=s,s<<=1;e.heap[t]=a},cc=(e,r,t)=>{let a,s,o=0,c,d;if(e.sym_next!==0)do a=e.pending_buf[e.sym_buf+o++]&255,a+=(e.pending_buf[e.sym_buf+o++]&255)<<8,s=e.pending_buf[e.sym_buf+o++],a===0?Vt(e,s,r):(c=Rn[s],Vt(e,c+In+1,r),d=Ns[c],d!==0&&(s-=qs[c],kt(e,s,d)),a--,c=ac(a),Vt(e,c,t),d=Oa[c],d!==0&&(a-=La[c],kt(e,a,d)));while(o<e.sym_next);Vt(e,js,r)},zs=(e,r)=>{const t=r.dyn_tree,a=r.stat_desc.static_tree,s=r.stat_desc.has_stree,o=r.stat_desc.elems;let c,d,g=-1,f;for(e.heap_len=0,e.heap_max=Zu,c=0;c<o;c++)t[c*2]!==0?(e.heap[++e.heap_len]=g=c,e.depth[c]=0):t[c*2+1]=0;for(;e.heap_len<2;)f=e.heap[++e.heap_len]=g<2?++g:0,t[f*2]=1,e.depth[f]=0,e.opt_len--,s&&(e.static_len-=a[f*2+1]);for(r.max_code=g,c=e.heap_len>>1;c>=1;c--)Bs(e,t,c);f=o;do c=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Bs(e,t,1),d=e.heap[1],e.heap[--e.heap_max]=c,e.heap[--e.heap_max]=d,t[f*2]=t[c*2]+t[d*2],e.depth[f]=(e.depth[c]>=e.depth[d]?e.depth[c]:e.depth[d])+1,t[c*2+1]=t[d*2+1]=f,e.heap[1]=f++,Bs(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],ly(e,r),sc(t,g,e.bl_count)},fc=(e,r,t)=>{let a,s=-1,o,c=r[1],d=0,g=7,f=4;for(c===0&&(g=138,f=3),r[(t+1)*2+1]=65535,a=0;a<=t;a++)o=c,c=r[(a+1)*2+1],!(++d<g&&o===c)&&(d<f?e.bl_tree[o*2]+=d:o!==0?(o!==s&&e.bl_tree[o*2]++,e.bl_tree[Vu*2]++):d<=10?e.bl_tree[Xu*2]++:e.bl_tree[Ju*2]++,d=0,s=o,c===0?(g=138,f=3):o===c?(g=6,f=3):(g=7,f=4))},dc=(e,r,t)=>{let a,s=-1,o,c=r[1],d=0,g=7,f=4;for(c===0&&(g=138,f=3),a=0;a<=t;a++)if(o=c,c=r[(a+1)*2+1],!(++d<g&&o===c)){if(d<f)do Vt(e,o,e.bl_tree);while(--d!==0);else o!==0?(o!==s&&(Vt(e,o,e.bl_tree),d--),Vt(e,Vu,e.bl_tree),kt(e,d-3,2)):d<=10?(Vt(e,Xu,e.bl_tree),kt(e,d-3,3)):(Vt(e,Ju,e.bl_tree),kt(e,d-11,7));d=0,s=o,c===0?(g=138,f=3):o===c?(g=6,f=3):(g=7,f=4)}},cy=e=>{let r;for(fc(e,e.dyn_ltree,e.l_desc.max_code),fc(e,e.dyn_dtree,e.d_desc.max_code),zs(e,e.bl_desc),r=$s-1;r>=3&&e.bl_tree[ec[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},fy=(e,r,t,a)=>{let s;for(kt(e,r-257,5),kt(e,t-1,5),kt(e,a-4,4),s=0;s<a;s++)kt(e,e.bl_tree[ec[s]*2+1],3);dc(e,e.dyn_ltree,r-1),dc(e,e.dyn_dtree,t-1)},dy=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return Gu;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return Qu;for(t=32;t<In;t++)if(e.dyn_ltree[t*2]!==0)return Qu;return Gu};let hc=!1;const hy=e=>{hc||(uy(),hc=!0),e.l_desc=new Us(e.dyn_ltree,tc),e.d_desc=new Us(e.dyn_dtree,rc),e.bl_desc=new Us(e.bl_tree,nc),e.bi_buf=0,e.bi_valid=0,oc(e)},pc=(e,r,t,a)=>{kt(e,(ey<<1)+(a?1:0),3),lc(e),Mn(e,t),Mn(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},py=e=>{kt(e,Ku<<1,3),Vt(e,js,dr),oy(e)},gy=(e,r,t,a)=>{let s,o,c=0;e.level>0?(e.strm.data_type===Jw&&(e.strm.data_type=dy(e)),zs(e,e.l_desc),zs(e,e.d_desc),c=cy(e),s=e.opt_len+3+7>>>3,o=e.static_len+3+7>>>3,o<=s&&(s=o)):s=o=t+5,t+4<=s&&r!==-1?pc(e,r,t,a):e.strategy===Xw||o===s?(kt(e,(Ku<<1)+(a?1:0),3),cc(e,dr,Ln)):(kt(e,(ty<<1)+(a?1:0),3),fy(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),cc(e,e.dyn_ltree,e.dyn_dtree)),oc(e),a&&lc(e)},my=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(Rn[t]+In+1)*2]++,e.dyn_dtree[ac(r)*2]++),e.sym_next===e.sym_end);var wy=hy,yy=pc,vy=gy,xy=my,by=py,Ty={_tr_init:wy,_tr_stored_block:yy,_tr_flush_block:vy,_tr_tally:xy,_tr_align:by},$n=(e,r,t,a)=>{let s=e&65535|0,o=e>>>16&65535|0,c=0;for(;t!==0;){c=t>2e3?2e3:t,t-=c;do s=s+r[a++]|0,o=o+s|0;while(--c);s%=65521,o%=65521}return s|o<<16|0};const _y=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},Sy=new Uint32Array(_y());var at=(e,r,t,a)=>{const s=Sy,o=a+t;e^=-1;for(let c=a;c<o;c++)e=e>>>8^s[(e^r[c])&255];return e^-1},Br={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Pn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Ay,_tr_stored_block:Hs,_tr_flush_block:ky,_tr_tally:Sr,_tr_align:Cy}=Ty,{Z_NO_FLUSH:Ar,Z_PARTIAL_FLUSH:Ey,Z_FULL_FLUSH:Iy,Z_FINISH:$t,Z_BLOCK:gc,Z_OK:ut,Z_STREAM_END:mc,Z_STREAM_ERROR:Xt,Z_DATA_ERROR:Oy,Z_BUF_ERROR:Ws,Z_DEFAULT_COMPRESSION:Ly,Z_FILTERED:Dy,Z_HUFFMAN_ONLY:Da,Z_RLE:Ry,Z_FIXED:My,Z_DEFAULT_STRATEGY:$y,Z_UNKNOWN:Py,Z_DEFLATED:Ra}=Pn,jy=9,Ny=15,qy=8,Ys=256+1+29,Fy=30,Uy=19,By=2*Ys+1,zy=15,Oe=3,kr=258,Jt=kr+Oe+1,Hy=32,dn=42,Gs=57,Qs=69,Ks=73,Zs=91,Vs=103,zr=113,jn=666,xt=1,hn=2,Hr=3,pn=4,Wy=3,Wr=(e,r)=>(e.msg=Br[r],r),wc=e=>e*2-(e>4?9:0),Cr=e=>{let r=e.length;for(;--r>=0;)e[r]=0},Yy=e=>{let r,t,a,s=e.w_size;r=e.hash_size,a=r;do t=e.head[--a],e.head[a]=t>=s?t-s:0;while(--r);r=s,a=r;do t=e.prev[--a],e.prev[a]=t>=s?t-s:0;while(--r)};let Er=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask;const Ot=e=>{const r=e.state;let t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},Lt=(e,r)=>{ky(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Ot(e.strm)},Pe=(e,r)=>{e.pending_buf[e.pending++]=r},Nn=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},Xs=(e,r,t,a)=>{let s=e.avail_in;return s>a&&(s=a),s===0?0:(e.avail_in-=s,r.set(e.input.subarray(e.next_in,e.next_in+s),t),e.state.wrap===1?e.adler=$n(e.adler,r,s,t):e.state.wrap===2&&(e.adler=at(e.adler,r,s,t)),e.next_in+=s,e.total_in+=s,s)},yc=(e,r)=>{let t=e.max_chain_length,a=e.strstart,s,o,c=e.prev_length,d=e.nice_match;const g=e.strstart>e.w_size-Jt?e.strstart-(e.w_size-Jt):0,f=e.window,p=e.w_mask,_=e.prev,b=e.strstart+kr;let x=f[a+c-1],S=f[a+c];e.prev_length>=e.good_match&&(t>>=2),d>e.lookahead&&(d=e.lookahead);do if(s=r,!(f[s+c]!==S||f[s+c-1]!==x||f[s]!==f[a]||f[++s]!==f[a+1])){a+=2,s++;do;while(f[++a]===f[++s]&&f[++a]===f[++s]&&f[++a]===f[++s]&&f[++a]===f[++s]&&f[++a]===f[++s]&&f[++a]===f[++s]&&f[++a]===f[++s]&&f[++a]===f[++s]&&a<b);if(o=kr-(b-a),a=b-kr,o>c){if(e.match_start=r,c=o,o>=d)break;x=f[a+c-1],S=f[a+c]}}while((r=_[r&p])>g&&--t!==0);return c<=e.lookahead?c:e.lookahead},gn=e=>{const r=e.w_size;let t,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-Jt)&&(e.window.set(e.window.subarray(r,r+r-a),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),Yy(e),a+=r),e.strm.avail_in===0)break;if(t=Xs(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=t,e.lookahead+e.insert>=Oe)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Er(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Er(e,e.ins_h,e.window[s+Oe-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<Oe)););}while(e.lookahead<Jt&&e.strm.avail_in!==0)},vc=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a,s,o,c=0,d=e.strm.avail_in;do{if(a=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,s=e.strstart-e.block_start,a>s+e.strm.avail_in&&(a=s+e.strm.avail_in),a>o&&(a=o),a<t&&(a===0&&r!==$t||r===Ar||a!==s+e.strm.avail_in)))break;c=r===$t&&a===s+e.strm.avail_in?1:0,Hs(e,0,0,c),e.pending_buf[e.pending-4]=a,e.pending_buf[e.pending-3]=a>>8,e.pending_buf[e.pending-2]=~a,e.pending_buf[e.pending-1]=~a>>8,Ot(e.strm),s&&(s>a&&(s=a),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,a-=s),a&&(Xs(e.strm,e.strm.output,e.strm.next_out,a),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a)}while(c===0);return d-=e.strm.avail_in,d&&(d>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=d&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-d,e.strm.next_in),e.strstart),e.strstart+=d,e.insert+=d>e.w_size-e.insert?e.w_size-e.insert:d),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),c?pn:r!==Ar&&r!==$t&&e.strm.avail_in===0&&e.strstart===e.block_start?hn:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(Xs(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o,t=o>e.w_size?e.w_size:o,s=e.strstart-e.block_start,(s>=t||(s||r===$t)&&r!==Ar&&e.strm.avail_in===0&&s<=o)&&(a=s>o?o:s,c=r===$t&&e.strm.avail_in===0&&a===s?1:0,Hs(e,e.block_start,a,c),e.block_start+=a,Ot(e.strm)),c?Hr:xt)},Js=(e,r)=>{let t,a;for(;;){if(e.lookahead<Jt){if(gn(e),e.lookahead<Jt&&r===Ar)return xt;if(e.lookahead===0)break}if(t=0,e.lookahead>=Oe&&(e.ins_h=Er(e,e.ins_h,e.window[e.strstart+Oe-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Jt&&(e.match_length=yc(e,t)),e.match_length>=Oe)if(a=Sr(e,e.strstart-e.match_start,e.match_length-Oe),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Oe){e.match_length--;do e.strstart++,e.ins_h=Er(e,e.ins_h,e.window[e.strstart+Oe-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Er(e,e.ins_h,e.window[e.strstart+1]);else a=Sr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(Lt(e,!1),e.strm.avail_out===0))return xt}return e.insert=e.strstart<Oe-1?e.strstart:Oe-1,r===$t?(Lt(e,!0),e.strm.avail_out===0?Hr:pn):e.sym_next&&(Lt(e,!1),e.strm.avail_out===0)?xt:hn},mn=(e,r)=>{let t,a,s;for(;;){if(e.lookahead<Jt){if(gn(e),e.lookahead<Jt&&r===Ar)return xt;if(e.lookahead===0)break}if(t=0,e.lookahead>=Oe&&(e.ins_h=Er(e,e.ins_h,e.window[e.strstart+Oe-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Oe-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Jt&&(e.match_length=yc(e,t),e.match_length<=5&&(e.strategy===Dy||e.match_length===Oe&&e.strstart-e.match_start>4096)&&(e.match_length=Oe-1)),e.prev_length>=Oe&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-Oe,a=Sr(e,e.strstart-1-e.prev_match,e.prev_length-Oe),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=Er(e,e.ins_h,e.window[e.strstart+Oe-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Oe-1,e.strstart++,a&&(Lt(e,!1),e.strm.avail_out===0))return xt}else if(e.match_available){if(a=Sr(e,0,e.window[e.strstart-1]),a&&Lt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return xt}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=Sr(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Oe-1?e.strstart:Oe-1,r===$t?(Lt(e,!0),e.strm.avail_out===0?Hr:pn):e.sym_next&&(Lt(e,!1),e.strm.avail_out===0)?xt:hn},Gy=(e,r)=>{let t,a,s,o;const c=e.window;for(;;){if(e.lookahead<=kr){if(gn(e),e.lookahead<=kr&&r===Ar)return xt;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Oe&&e.strstart>0&&(s=e.strstart-1,a=c[s],a===c[++s]&&a===c[++s]&&a===c[++s])){o=e.strstart+kr;do;while(a===c[++s]&&a===c[++s]&&a===c[++s]&&a===c[++s]&&a===c[++s]&&a===c[++s]&&a===c[++s]&&a===c[++s]&&s<o);e.match_length=kr-(o-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Oe?(t=Sr(e,1,e.match_length-Oe),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Sr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(Lt(e,!1),e.strm.avail_out===0))return xt}return e.insert=0,r===$t?(Lt(e,!0),e.strm.avail_out===0?Hr:pn):e.sym_next&&(Lt(e,!1),e.strm.avail_out===0)?xt:hn},Qy=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(gn(e),e.lookahead===0)){if(r===Ar)return xt;break}if(e.match_length=0,t=Sr(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(Lt(e,!1),e.strm.avail_out===0))return xt}return e.insert=0,r===$t?(Lt(e,!0),e.strm.avail_out===0?Hr:pn):e.sym_next&&(Lt(e,!1),e.strm.avail_out===0)?xt:hn};function er(e,r,t,a,s){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=a,this.func=s}const qn=[new er(0,0,0,0,vc),new er(4,4,8,4,Js),new er(4,5,16,8,Js),new er(4,6,32,32,Js),new er(4,4,16,16,mn),new er(8,16,32,32,mn),new er(8,16,128,128,mn),new er(8,32,128,256,mn),new er(32,128,258,1024,mn),new er(32,258,258,4096,mn)],Ky=e=>{e.window_size=2*e.w_size,Cr(e.head),e.max_lazy_match=qn[e.level].max_lazy,e.good_match=qn[e.level].good_length,e.nice_match=qn[e.level].nice_length,e.max_chain_length=qn[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Oe-1,e.match_available=0,e.ins_h=0};function Zy(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ra,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(By*2),this.dyn_dtree=new Uint16Array((2*Fy+1)*2),this.bl_tree=new Uint16Array((2*Uy+1)*2),Cr(this.dyn_ltree),Cr(this.dyn_dtree),Cr(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(zy+1),this.heap=new Uint16Array(2*Ys+1),Cr(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ys+1),Cr(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Fn=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.status!==dn&&r.status!==Gs&&r.status!==Qs&&r.status!==Ks&&r.status!==Zs&&r.status!==Vs&&r.status!==zr&&r.status!==jn?1:0},xc=e=>{if(Fn(e))return Wr(e,Xt);e.total_in=e.total_out=0,e.data_type=Py;const r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?Gs:r.wrap?dn:zr,e.adler=r.wrap===2?0:1,r.last_flush=-2,Ay(r),ut},bc=e=>{const r=xc(e);return r===ut&&Ky(e.state),r},Vy=(e,r)=>Fn(e)||e.state.wrap!==2?Xt:(e.state.gzhead=r,ut),Tc=(e,r,t,a,s,o)=>{if(!e)return Xt;let c=1;if(r===Ly&&(r=6),a<0?(c=0,a=-a):a>15&&(c=2,a-=16),s<1||s>jy||t!==Ra||a<8||a>15||r<0||r>9||o<0||o>My||a===8&&c!==1)return Wr(e,Xt);a===8&&(a=9);const d=new Zy;return e.state=d,d.strm=e,d.status=dn,d.wrap=c,d.gzhead=null,d.w_bits=a,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=s+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+Oe-1)/Oe),d.window=new Uint8Array(d.w_size*2),d.head=new Uint16Array(d.hash_size),d.prev=new Uint16Array(d.w_size),d.lit_bufsize=1<<s+6,d.pending_buf_size=d.lit_bufsize*4,d.pending_buf=new Uint8Array(d.pending_buf_size),d.sym_buf=d.lit_bufsize,d.sym_end=(d.lit_bufsize-1)*3,d.level=r,d.strategy=o,d.method=t,bc(e)},Xy=(e,r)=>Tc(e,r,Ra,Ny,qy,$y),Jy=(e,r)=>{if(Fn(e)||r>gc||r<0)return e?Wr(e,Xt):Xt;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===jn&&r!==$t)return Wr(e,e.avail_out===0?Ws:Xt);const a=t.last_flush;if(t.last_flush=r,t.pending!==0){if(Ot(e),e.avail_out===0)return t.last_flush=-1,ut}else if(e.avail_in===0&&wc(r)<=wc(a)&&r!==$t)return Wr(e,Ws);if(t.status===jn&&e.avail_in!==0)return Wr(e,Ws);if(t.status===dn&&t.wrap===0&&(t.status=zr),t.status===dn){let s=Ra+(t.w_bits-8<<4)<<8,o=-1;if(t.strategy>=Da||t.level<2?o=0:t.level<6?o=1:t.level===6?o=2:o=3,s|=o<<6,t.strstart!==0&&(s|=Hy),s+=31-s%31,Nn(t,s),t.strstart!==0&&(Nn(t,e.adler>>>16),Nn(t,e.adler&65535)),e.adler=1,t.status=zr,Ot(e),t.pending!==0)return t.last_flush=-1,ut}if(t.status===Gs){if(e.adler=0,Pe(t,31),Pe(t,139),Pe(t,8),t.gzhead)Pe(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Pe(t,t.gzhead.time&255),Pe(t,t.gzhead.time>>8&255),Pe(t,t.gzhead.time>>16&255),Pe(t,t.gzhead.time>>24&255),Pe(t,t.level===9?2:t.strategy>=Da||t.level<2?4:0),Pe(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(Pe(t,t.gzhead.extra.length&255),Pe(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=at(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Qs;else if(Pe(t,0),Pe(t,0),Pe(t,0),Pe(t,0),Pe(t,0),Pe(t,t.level===9?2:t.strategy>=Da||t.level<2?4:0),Pe(t,Wy),t.status=zr,Ot(e),t.pending!==0)return t.last_flush=-1,ut}if(t.status===Qs){if(t.gzhead.extra){let s=t.pending,o=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+o>t.pending_buf_size;){let d=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+d),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>s&&(e.adler=at(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex+=d,Ot(e),t.pending!==0)return t.last_flush=-1,ut;s=0,o-=d}let c=new Uint8Array(t.gzhead.extra);t.pending_buf.set(c.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending+=o,t.gzhead.hcrc&&t.pending>s&&(e.adler=at(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=Ks}if(t.status===Ks){if(t.gzhead.name){let s=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=at(e.adler,t.pending_buf,t.pending-s,s)),Ot(e),t.pending!==0)return t.last_flush=-1,ut;s=0}t.gzindex<t.gzhead.name.length?o=t.gzhead.name.charCodeAt(t.gzindex++)&255:o=0,Pe(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=at(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=Zs}if(t.status===Zs){if(t.gzhead.comment){let s=t.pending,o;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=at(e.adler,t.pending_buf,t.pending-s,s)),Ot(e),t.pending!==0)return t.last_flush=-1,ut;s=0}t.gzindex<t.gzhead.comment.length?o=t.gzhead.comment.charCodeAt(t.gzindex++)&255:o=0,Pe(t,o)}while(o!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=at(e.adler,t.pending_buf,t.pending-s,s))}t.status=Vs}if(t.status===Vs){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Ot(e),t.pending!==0))return t.last_flush=-1,ut;Pe(t,e.adler&255),Pe(t,e.adler>>8&255),e.adler=0}if(t.status=zr,Ot(e),t.pending!==0)return t.last_flush=-1,ut}if(e.avail_in!==0||t.lookahead!==0||r!==Ar&&t.status!==jn){let s=t.level===0?vc(t,r):t.strategy===Da?Qy(t,r):t.strategy===Ry?Gy(t,r):qn[t.level].func(t,r);if((s===Hr||s===pn)&&(t.status=jn),s===xt||s===Hr)return e.avail_out===0&&(t.last_flush=-1),ut;if(s===hn&&(r===Ey?Cy(t):r!==gc&&(Hs(t,0,0,!1),r===Iy&&(Cr(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Ot(e),e.avail_out===0))return t.last_flush=-1,ut}return r!==$t?ut:t.wrap<=0?mc:(t.wrap===2?(Pe(t,e.adler&255),Pe(t,e.adler>>8&255),Pe(t,e.adler>>16&255),Pe(t,e.adler>>24&255),Pe(t,e.total_in&255),Pe(t,e.total_in>>8&255),Pe(t,e.total_in>>16&255),Pe(t,e.total_in>>24&255)):(Nn(t,e.adler>>>16),Nn(t,e.adler&65535)),Ot(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ut:mc)},ev=e=>{if(Fn(e))return Xt;const r=e.state.status;return e.state=null,r===zr?Wr(e,Oy):ut},tv=(e,r)=>{let t=r.length;if(Fn(e))return Xt;const a=e.state,s=a.wrap;if(s===2||s===1&&a.status!==dn||a.lookahead)return Xt;if(s===1&&(e.adler=$n(e.adler,r,t,0)),a.wrap=0,t>=a.w_size){s===0&&(Cr(a.head),a.strstart=0,a.block_start=0,a.insert=0);let g=new Uint8Array(a.w_size);g.set(r.subarray(t-a.w_size,t),0),r=g,t=a.w_size}const o=e.avail_in,c=e.next_in,d=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,gn(a);a.lookahead>=Oe;){let g=a.strstart,f=a.lookahead-(Oe-1);do a.ins_h=Er(a,a.ins_h,a.window[g+Oe-1]),a.prev[g&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=g,g++;while(--f);a.strstart=g,a.lookahead=Oe-1,gn(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=Oe-1,a.match_available=0,e.next_in=c,e.input=d,e.avail_in=o,a.wrap=s,ut};var rv=Xy,nv=Tc,av=bc,iv=xc,sv=Vy,ov=Jy,lv=ev,uv=tv,cv="pako deflate (from Nodeca project)",Un={deflateInit:rv,deflateInit2:nv,deflateReset:av,deflateResetKeep:iv,deflateSetHeader:sv,deflate:ov,deflateEnd:lv,deflateSetDictionary:uv,deflateInfo:cv};const fv=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var dv=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const a in t)fv(t,a)&&(e[a]=t[a])}}return e},hv=e=>{let r=0;for(let a=0,s=e.length;a<s;a++)r+=e[a].length;const t=new Uint8Array(r);for(let a=0,s=0,o=e.length;a<o;a++){let c=e[a];t.set(c,s),s+=c.length}return t},Ma={assign:dv,flattenChunks:hv};let _c=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_c=!1}const Bn=new Uint8Array(256);for(let e=0;e<256;e++)Bn[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Bn[254]=Bn[254]=1;var pv=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,a,s,o,c=e.length,d=0;for(s=0;s<c;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<c&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(t=65536+(t-55296<<10)+(a-56320),s++)),d+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(d),o=0,s=0;o<d;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<c&&(a=e.charCodeAt(s+1),(a&64512)===56320&&(t=65536+(t-55296<<10)+(a-56320),s++)),t<128?r[o++]=t:t<2048?(r[o++]=192|t>>>6,r[o++]=128|t&63):t<65536?(r[o++]=224|t>>>12,r[o++]=128|t>>>6&63,r[o++]=128|t&63):(r[o++]=240|t>>>18,r[o++]=128|t>>>12&63,r[o++]=128|t>>>6&63,r[o++]=128|t&63);return r};const gv=(e,r)=>{if(r<65534&&e.subarray&&_c)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let a=0;a<r;a++)t+=String.fromCharCode(e[a]);return t};var mv=(e,r)=>{const t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let a,s;const o=new Array(t*2);for(s=0,a=0;a<t;){let c=e[a++];if(c<128){o[s++]=c;continue}let d=Bn[c];if(d>4){o[s++]=65533,a+=d-1;continue}for(c&=d===2?31:d===3?15:7;d>1&&a<t;)c=c<<6|e[a++]&63,d--;if(d>1){o[s++]=65533;continue}c<65536?o[s++]=c:(c-=65536,o[s++]=55296|c>>10&1023,o[s++]=56320|c&1023)}return gv(o,s)},wv=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+Bn[e[t]]>r?t:r},zn={string2buf:pv,buf2string:mv,utf8border:wv};function yv(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Sc=yv;const Ac=Object.prototype.toString,{Z_NO_FLUSH:vv,Z_SYNC_FLUSH:xv,Z_FULL_FLUSH:bv,Z_FINISH:Tv,Z_OK:$a,Z_STREAM_END:_v,Z_DEFAULT_COMPRESSION:Sv,Z_DEFAULT_STRATEGY:Av,Z_DEFLATED:kv}=Pn;function Hn(e){this.options=Ma.assign({level:Sv,method:kv,chunkSize:16384,windowBits:15,memLevel:8,strategy:Av},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Sc,this.strm.avail_out=0;let t=Un.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==$a)throw new Error(Br[t]);if(r.header&&Un.deflateSetHeader(this.strm,r.header),r.dictionary){let a;if(typeof r.dictionary=="string"?a=zn.string2buf(r.dictionary):Ac.call(r.dictionary)==="[object ArrayBuffer]"?a=new Uint8Array(r.dictionary):a=r.dictionary,t=Un.deflateSetDictionary(this.strm,a),t!==$a)throw new Error(Br[t]);this._dict_set=!0}}Hn.prototype.push=function(e,r){const t=this.strm,a=this.options.chunkSize;let s,o;if(this.ended)return!1;for(r===~~r?o=r:o=r===!0?Tv:vv,typeof e=="string"?t.input=zn.string2buf(e):Ac.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),(o===xv||o===bv)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(s=Un.deflate(t,o),s===_v)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),s=Un.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===$a;if(t.avail_out===0){this.onData(t.output);continue}if(o>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0},Hn.prototype.onData=function(e){this.chunks.push(e)},Hn.prototype.onEnd=function(e){e===$a&&(this.result=Ma.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function eo(e,r){const t=new Hn(r);if(t.push(e,!0),t.err)throw t.msg||Br[t.err];return t.result}function Cv(e,r){return r=r||{},r.raw=!0,eo(e,r)}function Ev(e,r){return r=r||{},r.gzip=!0,eo(e,r)}var Iv=Hn,Ov=eo,Lv=Cv,Dv=Ev,Rv={Deflate:Iv,deflate:Ov,deflateRaw:Lv,gzip:Dv};const Pa=16209,Mv=16191;var $v=function(r,t){let a,s,o,c,d,g,f,p,_,b,x,S,T,v,y,k,I,E,M,D,l,j,$,q;const C=r.state;a=r.next_in,$=r.input,s=a+(r.avail_in-5),o=r.next_out,q=r.output,c=o-(t-r.avail_out),d=o+(r.avail_out-257),g=C.dmax,f=C.wsize,p=C.whave,_=C.wnext,b=C.window,x=C.hold,S=C.bits,T=C.lencode,v=C.distcode,y=(1<<C.lenbits)-1,k=(1<<C.distbits)-1;e:do{S<15&&(x+=$[a++]<<S,S+=8,x+=$[a++]<<S,S+=8),I=T[x&y];t:for(;;){if(E=I>>>24,x>>>=E,S-=E,E=I>>>16&255,E===0)q[o++]=I&65535;else if(E&16){M=I&65535,E&=15,E&&(S<E&&(x+=$[a++]<<S,S+=8),M+=x&(1<<E)-1,x>>>=E,S-=E),S<15&&(x+=$[a++]<<S,S+=8,x+=$[a++]<<S,S+=8),I=v[x&k];r:for(;;){if(E=I>>>24,x>>>=E,S-=E,E=I>>>16&255,E&16){if(D=I&65535,E&=15,S<E&&(x+=$[a++]<<S,S+=8,S<E&&(x+=$[a++]<<S,S+=8)),D+=x&(1<<E)-1,D>g){r.msg="invalid distance too far back",C.mode=Pa;break e}if(x>>>=E,S-=E,E=o-c,D>E){if(E=D-E,E>p&&C.sane){r.msg="invalid distance too far back",C.mode=Pa;break e}if(l=0,j=b,_===0){if(l+=f-E,E<M){M-=E;do q[o++]=b[l++];while(--E);l=o-D,j=q}}else if(_<E){if(l+=f+_-E,E-=_,E<M){M-=E;do q[o++]=b[l++];while(--E);if(l=0,_<M){E=_,M-=E;do q[o++]=b[l++];while(--E);l=o-D,j=q}}}else if(l+=_-E,E<M){M-=E;do q[o++]=b[l++];while(--E);l=o-D,j=q}for(;M>2;)q[o++]=j[l++],q[o++]=j[l++],q[o++]=j[l++],M-=3;M&&(q[o++]=j[l++],M>1&&(q[o++]=j[l++]))}else{l=o-D;do q[o++]=q[l++],q[o++]=q[l++],q[o++]=q[l++],M-=3;while(M>2);M&&(q[o++]=q[l++],M>1&&(q[o++]=q[l++]))}}else if((E&64)===0){I=v[(I&65535)+(x&(1<<E)-1)];continue r}else{r.msg="invalid distance code",C.mode=Pa;break e}break}}else if((E&64)===0){I=T[(I&65535)+(x&(1<<E)-1)];continue t}else if(E&32){C.mode=Mv;break e}else{r.msg="invalid literal/length code",C.mode=Pa;break e}break}}while(a<s&&o<d);M=S>>3,a-=M,S-=M<<3,x&=(1<<S)-1,r.next_in=a,r.next_out=o,r.avail_in=a<s?5+(s-a):5-(a-s),r.avail_out=o<d?257+(d-o):257-(o-d),C.hold=x,C.bits=S};const wn=15,kc=852,Cc=592,Ec=0,to=1,Ic=2,Pv=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),jv=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Nv=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),qv=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Wn=(e,r,t,a,s,o,c,d)=>{const g=d.bits;let f=0,p=0,_=0,b=0,x=0,S=0,T=0,v=0,y=0,k=0,I,E,M,D,l,j=null,$;const q=new Uint16Array(wn+1),C=new Uint16Array(wn+1);let F=null,Q,K,H;for(f=0;f<=wn;f++)q[f]=0;for(p=0;p<a;p++)q[r[t+p]]++;for(x=g,b=wn;b>=1&&q[b]===0;b--);if(x>b&&(x=b),b===0)return s[o++]=1<<24|64<<16|0,s[o++]=1<<24|64<<16|0,d.bits=1,0;for(_=1;_<b&&q[_]===0;_++);for(x<_&&(x=_),v=1,f=1;f<=wn;f++)if(v<<=1,v-=q[f],v<0)return-1;if(v>0&&(e===Ec||b!==1))return-1;for(C[1]=0,f=1;f<wn;f++)C[f+1]=C[f]+q[f];for(p=0;p<a;p++)r[t+p]!==0&&(c[C[r[t+p]]++]=p);if(e===Ec?(j=F=c,$=20):e===to?(j=Pv,F=jv,$=257):(j=Nv,F=qv,$=0),k=0,p=0,f=_,l=o,S=x,T=0,M=-1,y=1<<x,D=y-1,e===to&&y>kc||e===Ic&&y>Cc)return 1;for(;;){Q=f-T,c[p]+1<$?(K=0,H=c[p]):c[p]>=$?(K=F[c[p]-$],H=j[c[p]-$]):(K=96,H=0),I=1<<f-T,E=1<<S,_=E;do E-=I,s[l+(k>>T)+E]=Q<<24|K<<16|H|0;while(E!==0);for(I=1<<f-1;k&I;)I>>=1;if(I!==0?(k&=I-1,k+=I):k=0,p++,--q[f]===0){if(f===b)break;f=r[t+c[p]]}if(f>x&&(k&D)!==M){for(T===0&&(T=x),l+=_,S=f-T,v=1<<S;S+T<b&&(v-=q[S+T],!(v<=0));)S++,v<<=1;if(y+=1<<S,e===to&&y>kc||e===Ic&&y>Cc)return 1;M=k&D,s[M]=x<<24|S<<16|l-o|0}}return k!==0&&(s[l+k]=f-T<<24|64<<16|0),d.bits=x,0};const Fv=0,Oc=1,Lc=2,{Z_FINISH:Dc,Z_BLOCK:Uv,Z_TREES:ja,Z_OK:Yr,Z_STREAM_END:Bv,Z_NEED_DICT:zv,Z_STREAM_ERROR:Pt,Z_DATA_ERROR:Rc,Z_MEM_ERROR:Mc,Z_BUF_ERROR:Hv,Z_DEFLATED:$c}=Pn,Na=16180,Pc=16181,jc=16182,Nc=16183,qc=16184,Fc=16185,Uc=16186,Bc=16187,zc=16188,Hc=16189,qa=16190,hr=16191,ro=16192,Wc=16193,no=16194,Yc=16195,Gc=16196,Qc=16197,Kc=16198,Fa=16199,Ua=16200,Zc=16201,Vc=16202,Xc=16203,Jc=16204,ef=16205,ao=16206,tf=16207,rf=16208,Ze=16209,nf=16210,af=16211,Wv=852,Yv=592,Gv=15,sf=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Qv(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Gr=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.mode<Na||r.mode>af?1:0},of=e=>{if(Gr(e))return Pt;const r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=Na,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(Wv),r.distcode=r.distdyn=new Int32Array(Yv),r.sane=1,r.back=-1,Yr},lf=e=>{if(Gr(e))return Pt;const r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,of(e)},uf=(e,r)=>{let t;if(Gr(e))return Pt;const a=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?Pt:(a.window!==null&&a.wbits!==r&&(a.window=null),a.wrap=t,a.wbits=r,lf(e))},cf=(e,r)=>{if(!e)return Pt;const t=new Qv;e.state=t,t.strm=e,t.window=null,t.mode=Na;const a=uf(e,r);return a!==Yr&&(e.state=null),a},Kv=e=>cf(e,Gv);let ff=!0,io,so;const Zv=e=>{if(ff){io=new Int32Array(512),so=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Wn(Oc,e.lens,0,288,io,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Wn(Lc,e.lens,0,32,so,0,e.work,{bits:5}),ff=!1}e.lencode=io,e.lenbits=9,e.distcode=so,e.distbits=5},df=(e,r,t,a)=>{let s;const o=e.state;return o.window===null&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),a>=o.wsize?(o.window.set(r.subarray(t-o.wsize,t),0),o.wnext=0,o.whave=o.wsize):(s=o.wsize-o.wnext,s>a&&(s=a),o.window.set(r.subarray(t-a,t-a+s),o.wnext),a-=s,a?(o.window.set(r.subarray(t-a,t),0),o.wnext=a,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0},Vv=(e,r)=>{let t,a,s,o,c,d,g,f,p,_,b,x,S,T,v=0,y,k,I,E,M,D,l,j;const $=new Uint8Array(4);let q,C;const F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Gr(e)||!e.output||!e.input&&e.avail_in!==0)return Pt;t=e.state,t.mode===hr&&(t.mode=ro),c=e.next_out,s=e.output,g=e.avail_out,o=e.next_in,a=e.input,d=e.avail_in,f=t.hold,p=t.bits,_=d,b=g,j=Yr;e:for(;;)switch(t.mode){case Na:if(t.wrap===0){t.mode=ro;break}for(;p<16;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(t.wrap&2&&f===35615){t.wbits===0&&(t.wbits=15),t.check=0,$[0]=f&255,$[1]=f>>>8&255,t.check=at(t.check,$,2,0),f=0,p=0,t.mode=Pc;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",t.mode=Ze;break}if((f&15)!==$c){e.msg="unknown compression method",t.mode=Ze;break}if(f>>>=4,p-=4,l=(f&15)+8,t.wbits===0&&(t.wbits=l),l>15||l>t.wbits){e.msg="invalid window size",t.mode=Ze;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=f&512?Hc:hr,f=0,p=0;break;case Pc:for(;p<16;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(t.flags=f,(t.flags&255)!==$c){e.msg="unknown compression method",t.mode=Ze;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=Ze;break}t.head&&(t.head.text=f>>8&1),t.flags&512&&t.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,t.check=at(t.check,$,2,0)),f=0,p=0,t.mode=jc;case jc:for(;p<32;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}t.head&&(t.head.time=f),t.flags&512&&t.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,$[2]=f>>>16&255,$[3]=f>>>24&255,t.check=at(t.check,$,4,0)),f=0,p=0,t.mode=Nc;case Nc:for(;p<16;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}t.head&&(t.head.xflags=f&255,t.head.os=f>>8),t.flags&512&&t.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,t.check=at(t.check,$,2,0)),f=0,p=0,t.mode=qc;case qc:if(t.flags&1024){for(;p<16;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}t.length=f,t.head&&(t.head.extra_len=f),t.flags&512&&t.wrap&4&&($[0]=f&255,$[1]=f>>>8&255,t.check=at(t.check,$,2,0)),f=0,p=0}else t.head&&(t.head.extra=null);t.mode=Fc;case Fc:if(t.flags&1024&&(x=t.length,x>d&&(x=d),x&&(t.head&&(l=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(a.subarray(o,o+x),l)),t.flags&512&&t.wrap&4&&(t.check=at(t.check,a,x,o)),d-=x,o+=x,t.length-=x),t.length))break e;t.length=0,t.mode=Uc;case Uc:if(t.flags&2048){if(d===0)break e;x=0;do l=a[o+x++],t.head&&l&&t.length<65536&&(t.head.name+=String.fromCharCode(l));while(l&&x<d);if(t.flags&512&&t.wrap&4&&(t.check=at(t.check,a,x,o)),d-=x,o+=x,l)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Bc;case Bc:if(t.flags&4096){if(d===0)break e;x=0;do l=a[o+x++],t.head&&l&&t.length<65536&&(t.head.comment+=String.fromCharCode(l));while(l&&x<d);if(t.flags&512&&t.wrap&4&&(t.check=at(t.check,a,x,o)),d-=x,o+=x,l)break e}else t.head&&(t.head.comment=null);t.mode=zc;case zc:if(t.flags&512){for(;p<16;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.check&65535)){e.msg="header crc mismatch",t.mode=Ze;break}f=0,p=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=hr;break;case Hc:for(;p<32;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}e.adler=t.check=sf(f),f=0,p=0,t.mode=qa;case qa:if(t.havedict===0)return e.next_out=c,e.avail_out=g,e.next_in=o,e.avail_in=d,t.hold=f,t.bits=p,zv;e.adler=t.check=1,t.mode=hr;case hr:if(r===Uv||r===ja)break e;case ro:if(t.last){f>>>=p&7,p-=p&7,t.mode=ao;break}for(;p<3;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}switch(t.last=f&1,f>>>=1,p-=1,f&3){case 0:t.mode=Wc;break;case 1:if(Zv(t),t.mode=Fa,r===ja){f>>>=2,p-=2;break e}break;case 2:t.mode=Gc;break;case 3:e.msg="invalid block type",t.mode=Ze}f>>>=2,p-=2;break;case Wc:for(f>>>=p&7,p-=p&7;p<32;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",t.mode=Ze;break}if(t.length=f&65535,f=0,p=0,t.mode=no,r===ja)break e;case no:t.mode=Yc;case Yc:if(x=t.length,x){if(x>d&&(x=d),x>g&&(x=g),x===0)break e;s.set(a.subarray(o,o+x),c),d-=x,o+=x,g-=x,c+=x,t.length-=x;break}t.mode=hr;break;case Gc:for(;p<14;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(t.nlen=(f&31)+257,f>>>=5,p-=5,t.ndist=(f&31)+1,f>>>=5,p-=5,t.ncode=(f&15)+4,f>>>=4,p-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=Ze;break}t.have=0,t.mode=Qc;case Qc:for(;t.have<t.ncode;){for(;p<3;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}t.lens[F[t.have++]]=f&7,f>>>=3,p-=3}for(;t.have<19;)t.lens[F[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,q={bits:t.lenbits},j=Wn(Fv,t.lens,0,19,t.lencode,0,t.work,q),t.lenbits=q.bits,j){e.msg="invalid code lengths set",t.mode=Ze;break}t.have=0,t.mode=Kc;case Kc:for(;t.have<t.nlen+t.ndist;){for(;v=t.lencode[f&(1<<t.lenbits)-1],y=v>>>24,k=v>>>16&255,I=v&65535,!(y<=p);){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(I<16)f>>>=y,p-=y,t.lens[t.have++]=I;else{if(I===16){for(C=y+2;p<C;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(f>>>=y,p-=y,t.have===0){e.msg="invalid bit length repeat",t.mode=Ze;break}l=t.lens[t.have-1],x=3+(f&3),f>>>=2,p-=2}else if(I===17){for(C=y+3;p<C;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}f>>>=y,p-=y,l=0,x=3+(f&7),f>>>=3,p-=3}else{for(C=y+7;p<C;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}f>>>=y,p-=y,l=0,x=11+(f&127),f>>>=7,p-=7}if(t.have+x>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=Ze;break}for(;x--;)t.lens[t.have++]=l}}if(t.mode===Ze)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=Ze;break}if(t.lenbits=9,q={bits:t.lenbits},j=Wn(Oc,t.lens,0,t.nlen,t.lencode,0,t.work,q),t.lenbits=q.bits,j){e.msg="invalid literal/lengths set",t.mode=Ze;break}if(t.distbits=6,t.distcode=t.distdyn,q={bits:t.distbits},j=Wn(Lc,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,q),t.distbits=q.bits,j){e.msg="invalid distances set",t.mode=Ze;break}if(t.mode=Fa,r===ja)break e;case Fa:t.mode=Ua;case Ua:if(d>=6&&g>=258){e.next_out=c,e.avail_out=g,e.next_in=o,e.avail_in=d,t.hold=f,t.bits=p,$v(e,b),c=e.next_out,s=e.output,g=e.avail_out,o=e.next_in,a=e.input,d=e.avail_in,f=t.hold,p=t.bits,t.mode===hr&&(t.back=-1);break}for(t.back=0;v=t.lencode[f&(1<<t.lenbits)-1],y=v>>>24,k=v>>>16&255,I=v&65535,!(y<=p);){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(k&&(k&240)===0){for(E=y,M=k,D=I;v=t.lencode[D+((f&(1<<E+M)-1)>>E)],y=v>>>24,k=v>>>16&255,I=v&65535,!(E+y<=p);){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}f>>>=E,p-=E,t.back+=E}if(f>>>=y,p-=y,t.back+=y,t.length=I,k===0){t.mode=ef;break}if(k&32){t.back=-1,t.mode=hr;break}if(k&64){e.msg="invalid literal/length code",t.mode=Ze;break}t.extra=k&15,t.mode=Zc;case Zc:if(t.extra){for(C=t.extra;p<C;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}t.length+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Vc;case Vc:for(;v=t.distcode[f&(1<<t.distbits)-1],y=v>>>24,k=v>>>16&255,I=v&65535,!(y<=p);){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if((k&240)===0){for(E=y,M=k,D=I;v=t.distcode[D+((f&(1<<E+M)-1)>>E)],y=v>>>24,k=v>>>16&255,I=v&65535,!(E+y<=p);){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}f>>>=E,p-=E,t.back+=E}if(f>>>=y,p-=y,t.back+=y,k&64){e.msg="invalid distance code",t.mode=Ze;break}t.offset=I,t.extra=k&15,t.mode=Xc;case Xc:if(t.extra){for(C=t.extra;p<C;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}t.offset+=f&(1<<t.extra)-1,f>>>=t.extra,p-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=Ze;break}t.mode=Jc;case Jc:if(g===0)break e;if(x=b-g,t.offset>x){if(x=t.offset-x,x>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=Ze;break}x>t.wnext?(x-=t.wnext,S=t.wsize-x):S=t.wnext-x,x>t.length&&(x=t.length),T=t.window}else T=s,S=c-t.offset,x=t.length;x>g&&(x=g),g-=x,t.length-=x;do s[c++]=T[S++];while(--x);t.length===0&&(t.mode=Ua);break;case ef:if(g===0)break e;s[c++]=t.length,g--,t.mode=Ua;break;case ao:if(t.wrap){for(;p<32;){if(d===0)break e;d--,f|=a[o++]<<p,p+=8}if(b-=g,e.total_out+=b,t.total+=b,t.wrap&4&&b&&(e.adler=t.check=t.flags?at(t.check,s,b,c-b):$n(t.check,s,b,c-b)),b=g,t.wrap&4&&(t.flags?f:sf(f))!==t.check){e.msg="incorrect data check",t.mode=Ze;break}f=0,p=0}t.mode=tf;case tf:if(t.wrap&&t.flags){for(;p<32;){if(d===0)break e;d--,f+=a[o++]<<p,p+=8}if(t.wrap&4&&f!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=Ze;break}f=0,p=0}t.mode=rf;case rf:j=Bv;break e;case Ze:j=Rc;break e;case nf:return Mc;case af:default:return Pt}return e.next_out=c,e.avail_out=g,e.next_in=o,e.avail_in=d,t.hold=f,t.bits=p,(t.wsize||b!==e.avail_out&&t.mode<Ze&&(t.mode<ao||r!==Dc))&&df(e,e.output,e.next_out,b-e.avail_out),_-=e.avail_in,b-=e.avail_out,e.total_in+=_,e.total_out+=b,t.total+=b,t.wrap&4&&b&&(e.adler=t.check=t.flags?at(t.check,s,b,e.next_out-b):$n(t.check,s,b,e.next_out-b)),e.data_type=t.bits+(t.last?64:0)+(t.mode===hr?128:0)+(t.mode===Fa||t.mode===no?256:0),(_===0&&b===0||r===Dc)&&j===Yr&&(j=Hv),j},Xv=e=>{if(Gr(e))return Pt;let r=e.state;return r.window&&(r.window=null),e.state=null,Yr},Jv=(e,r)=>{if(Gr(e))return Pt;const t=e.state;return(t.wrap&2)===0?Pt:(t.head=r,r.done=!1,Yr)},e0=(e,r)=>{const t=r.length;let a,s,o;return Gr(e)||(a=e.state,a.wrap!==0&&a.mode!==qa)?Pt:a.mode===qa&&(s=1,s=$n(s,r,t,0),s!==a.check)?Rc:(o=df(e,r,t,t),o?(a.mode=nf,Mc):(a.havedict=1,Yr))};var t0=lf,r0=uf,n0=of,a0=Kv,i0=cf,s0=Vv,o0=Xv,l0=Jv,u0=e0,c0="pako inflate (from Nodeca project)",pr={inflateReset:t0,inflateReset2:r0,inflateResetKeep:n0,inflateInit:a0,inflateInit2:i0,inflate:s0,inflateEnd:o0,inflateGetHeader:l0,inflateSetDictionary:u0,inflateInfo:c0};function f0(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var d0=f0;const hf=Object.prototype.toString,{Z_NO_FLUSH:h0,Z_FINISH:p0,Z_OK:Yn,Z_STREAM_END:oo,Z_NEED_DICT:lo,Z_STREAM_ERROR:g0,Z_DATA_ERROR:pf,Z_MEM_ERROR:m0}=Pn;function Gn(e){this.options=Ma.assign({chunkSize:65536,windowBits:15,to:""},e||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Sc,this.strm.avail_out=0;let t=pr.inflateInit2(this.strm,r.windowBits);if(t!==Yn)throw new Error(Br[t]);if(this.header=new d0,pr.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=zn.string2buf(r.dictionary):hf.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=pr.inflateSetDictionary(this.strm,r.dictionary),t!==Yn)))throw new Error(Br[t])}Gn.prototype.push=function(e,r){const t=this.strm,a=this.options.chunkSize,s=this.options.dictionary;let o,c,d;if(this.ended)return!1;for(r===~~r?c=r:c=r===!0?p0:h0,hf.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(a),t.next_out=0,t.avail_out=a),o=pr.inflate(t,c),o===lo&&s&&(o=pr.inflateSetDictionary(t,s),o===Yn?o=pr.inflate(t,c):o===pf&&(o=lo));t.avail_in>0&&o===oo&&t.state.wrap>0&&e[t.next_in]!==0;)pr.inflateReset(t),o=pr.inflate(t,c);switch(o){case g0:case pf:case lo:case m0:return this.onEnd(o),this.ended=!0,!1}if(d=t.avail_out,t.next_out&&(t.avail_out===0||o===oo))if(this.options.to==="string"){let g=zn.utf8border(t.output,t.next_out),f=t.next_out-g,p=zn.buf2string(t.output,g);t.next_out=f,t.avail_out=a-f,f&&t.output.set(t.output.subarray(g,g+f),0),this.onData(p)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(o===Yn&&d===0)){if(o===oo)return o=pr.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},Gn.prototype.onData=function(e){this.chunks.push(e)},Gn.prototype.onEnd=function(e){e===Yn&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Ma.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function uo(e,r){const t=new Gn(r);if(t.push(e),t.err)throw t.msg||Br[t.err];return t.result}function w0(e,r){return r=r||{},r.raw=!0,uo(e,r)}var y0=Gn,v0=uo,x0=w0,b0=uo,T0={Inflate:y0,inflate:v0,inflateRaw:x0,ungzip:b0};const{Deflate:_0,deflate:S0,deflateRaw:A0,gzip:k0}=Rv,{Inflate:C0,inflate:E0,inflateRaw:I0,ungzip:O0}=T0;var L0=_0,D0=S0,R0=A0,M0=k0,$0=C0,P0=E0,j0=I0,N0=O0,q0=Pn,F0={Deflate:L0,deflate:D0,deflateRaw:R0,gzip:M0,Inflate:$0,inflate:P0,inflateRaw:j0,ungzip:N0,constants:q0};const Ba=8*1024;function U0(e){const t=atob(decodeURIComponent(e)).split("").map(f=>f.charCodeAt(0)),a=new Uint8Array(t),s=F0.ungzip(a);let o="",c;for(c=0;c<s.length/Ba;c++)o+=String.fromCharCode(...s.slice(c*Ba,(c+1)*Ba));o+=String.fromCharCode(...s.slice(c*Ba));const d=decodeURIComponent(o);let g="";try{g=JSON.parse(d)}catch{g=d}return g}function B0(e,r="https://kuajing-plw.happyporsche.com"){return Vw(e)?e:`${r}${e}`}async function Qr(e){const{url:r,method:t="GET",dataType:a="json",params:s,body:o=null,baseUrl:c,...d}=e,g=B0(r,c),f=s?`${g}?${new URLSearchParams(s).toString()}`:g,p={...d,body:o,method:t};return await fetch(f,p).then(b=>a==="base64"?W0(b):a==="json"?b.json():H0(b))}const z0=300*1e3;async function it(e){const{data:r,headers:t,dataType:a="json",...s}=e,{cacheKey:o,cacheMaxAge:c,isZip:d}=e,g=Date.now();if(o){const _=await Fe.getItem(o);if(_&&_.expireTime>g)return _.res}const f=d?U0(r):r,p=await Qr({...s,dataType:a,body:f&&Zw.stringify(f),headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",...t}});if(o){const b={expireTime:g+(c||z0),res:p};Fe.setItem(o,b)}if(p.result==="success")return p;throw p}async function H0(e){var r;return(r=e.headers.get("Content-Type"))!=null&&r.includes("GBK")?e.blob().then(t=>{const{promise:a,resolve:s,reject:o}=Yu(),c=new FileReader;return c.onload=()=>{s(c.result)},c.onerror=d=>{o(d)},c.readAsText(t,"GBK"),a}):await e.text()}async function W0(e){return e.blob().then(r=>{const{promise:t,resolve:a,reject:s}=Yu(),o=new FileReader;return o.onload=function(c){var g;const d=(g=c==null?void 0:c.target)==null?void 0:g.result;a(d)},o.onerror=c=>{s(c)},o.readAsDataURL(r),t})}var za={exports:{}},Y0=za.exports,gf;function G0(){return gf||(gf=1,(function(e,r){(function(t,a){e.exports=a()})(Y0,(function(){var t=1e3,a=6e4,s=36e5,o="millisecond",c="second",d="minute",g="hour",f="day",p="week",_="month",b="quarter",x="year",S="date",T="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,k={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var H=["th","st","nd","rd"],J=K%100;return"["+K+(H[(J-20)%10]||H[J]||H[0])+"]"}},I=function(K,H,J){var ee=String(K);return!ee||ee.length>=H?K:""+Array(H+1-ee.length).join(J)+K},E={s:I,z:function(K){var H=-K.utcOffset(),J=Math.abs(H),ee=Math.floor(J/60),X=J%60;return(H<=0?"+":"-")+I(ee,2,"0")+":"+I(X,2,"0")},m:function K(H,J){if(H.date()<J.date())return-K(J,H);var ee=12*(J.year()-H.year())+(J.month()-H.month()),X=H.clone().add(ee,_),se=J-X<0,oe=H.clone().add(ee+(se?-1:1),_);return+(-(ee+(J-X)/(se?X-oe:oe-X))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:_,y:x,w:p,d:f,D:S,h:g,m:d,s:c,ms:o,Q:b}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},M="en",D={};D[M]=k;var l="$isDayjsObject",j=function(K){return K instanceof F||!(!K||!K[l])},$=function K(H,J,ee){var X;if(!H)return M;if(typeof H=="string"){var se=H.toLowerCase();D[se]&&(X=se),J&&(D[se]=J,X=se);var oe=H.split("-");if(!X&&oe.length>1)return K(oe[0])}else{var xe=H.name;D[xe]=H,X=xe}return!ee&&X&&(M=X),X||!ee&&M},q=function(K,H){if(j(K))return K.clone();var J=typeof H=="object"?H:{};return J.date=K,J.args=arguments,new F(J)},C=E;C.l=$,C.i=j,C.w=function(K,H){return q(K,{locale:H.$L,utc:H.$u,x:H.$x,$offset:H.$offset})};var F=(function(){function K(J){this.$L=$(J.locale,null,!0),this.parse(J),this.$x=this.$x||J.x||{},this[l]=!0}var H=K.prototype;return H.parse=function(J){this.$d=(function(ee){var X=ee.date,se=ee.utc;if(X===null)return new Date(NaN);if(C.u(X))return new Date;if(X instanceof Date)return new Date(X);if(typeof X=="string"&&!/Z$/i.test(X)){var oe=X.match(v);if(oe){var xe=oe[2]-1||0,Re=(oe[7]||"0").substring(0,3);return se?new Date(Date.UTC(oe[1],xe,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,Re)):new Date(oe[1],xe,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,Re)}}return new Date(X)})(J),this.init()},H.init=function(){var J=this.$d;this.$y=J.getFullYear(),this.$M=J.getMonth(),this.$D=J.getDate(),this.$W=J.getDay(),this.$H=J.getHours(),this.$m=J.getMinutes(),this.$s=J.getSeconds(),this.$ms=J.getMilliseconds()},H.$utils=function(){return C},H.isValid=function(){return this.$d.toString()!==T},H.isSame=function(J,ee){var X=q(J);return this.startOf(ee)<=X&&X<=this.endOf(ee)},H.isAfter=function(J,ee){return q(J)<this.startOf(ee)},H.isBefore=function(J,ee){return this.endOf(ee)<q(J)},H.$g=function(J,ee,X){return C.u(J)?this[ee]:this.set(X,J)},H.unix=function(){return Math.floor(this.valueOf()/1e3)},H.valueOf=function(){return this.$d.getTime()},H.startOf=function(J,ee){var X=this,se=!!C.u(ee)||ee,oe=C.p(J),xe=function(Ge,fe){var $e=C.w(X.$u?Date.UTC(X.$y,fe,Ge):new Date(X.$y,fe,Ge),X);return se?$e:$e.endOf(f)},Re=function(Ge,fe){return C.w(X.toDate()[Ge].apply(X.toDate("s"),(se?[0,0,0,0]:[23,59,59,999]).slice(fe)),X)},je=this.$W,He=this.$M,Xe=this.$D,ct="set"+(this.$u?"UTC":"");switch(oe){case x:return se?xe(1,0):xe(31,11);case _:return se?xe(1,He):xe(0,He+1);case p:var mt=this.$locale().weekStart||0,ft=(je<mt?je+7:je)-mt;return xe(se?Xe-ft:Xe+(6-ft),He);case f:case S:return Re(ct+"Hours",0);case g:return Re(ct+"Minutes",1);case d:return Re(ct+"Seconds",2);case c:return Re(ct+"Milliseconds",3);default:return this.clone()}},H.endOf=function(J){return this.startOf(J,!1)},H.$set=function(J,ee){var X,se=C.p(J),oe="set"+(this.$u?"UTC":""),xe=(X={},X[f]=oe+"Date",X[S]=oe+"Date",X[_]=oe+"Month",X[x]=oe+"FullYear",X[g]=oe+"Hours",X[d]=oe+"Minutes",X[c]=oe+"Seconds",X[o]=oe+"Milliseconds",X)[se],Re=se===f?this.$D+(ee-this.$W):ee;if(se===_||se===x){var je=this.clone().set(S,1);je.$d[xe](Re),je.init(),this.$d=je.set(S,Math.min(this.$D,je.daysInMonth())).$d}else xe&&this.$d[xe](Re);return this.init(),this},H.set=function(J,ee){return this.clone().$set(J,ee)},H.get=function(J){return this[C.p(J)]()},H.add=function(J,ee){var X,se=this;J=Number(J);var oe=C.p(ee),xe=function(He){var Xe=q(se);return C.w(Xe.date(Xe.date()+Math.round(He*J)),se)};if(oe===_)return this.set(_,this.$M+J);if(oe===x)return this.set(x,this.$y+J);if(oe===f)return xe(1);if(oe===p)return xe(7);var Re=(X={},X[d]=a,X[g]=s,X[c]=t,X)[oe]||1,je=this.$d.getTime()+J*Re;return C.w(je,this)},H.subtract=function(J,ee){return this.add(-1*J,ee)},H.format=function(J){var ee=this,X=this.$locale();if(!this.isValid())return X.invalidDate||T;var se=J||"YYYY-MM-DDTHH:mm:ssZ",oe=C.z(this),xe=this.$H,Re=this.$m,je=this.$M,He=X.weekdays,Xe=X.months,ct=X.meridiem,mt=function(fe,$e,Se,qe){return fe&&(fe[$e]||fe(ee,se))||Se[$e].slice(0,qe)},ft=function(fe){return C.s(xe%12||12,fe,"0")},Ge=ct||function(fe,$e,Se){var qe=fe<12?"AM":"PM";return Se?qe.toLowerCase():qe};return se.replace(y,(function(fe,$e){return $e||(function(Se){switch(Se){case"YY":return String(ee.$y).slice(-2);case"YYYY":return C.s(ee.$y,4,"0");case"M":return je+1;case"MM":return C.s(je+1,2,"0");case"MMM":return mt(X.monthsShort,je,Xe,3);case"MMMM":return mt(Xe,je);case"D":return ee.$D;case"DD":return C.s(ee.$D,2,"0");case"d":return String(ee.$W);case"dd":return mt(X.weekdaysMin,ee.$W,He,2);case"ddd":return mt(X.weekdaysShort,ee.$W,He,3);case"dddd":return He[ee.$W];case"H":return String(xe);case"HH":return C.s(xe,2,"0");case"h":return ft(1);case"hh":return ft(2);case"a":return Ge(xe,Re,!0);case"A":return Ge(xe,Re,!1);case"m":return String(Re);case"mm":return C.s(Re,2,"0");case"s":return String(ee.$s);case"ss":return C.s(ee.$s,2,"0");case"SSS":return C.s(ee.$ms,3,"0");case"Z":return oe}return null})(fe)||oe.replace(":","")}))},H.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},H.diff=function(J,ee,X){var se,oe=this,xe=C.p(ee),Re=q(J),je=(Re.utcOffset()-this.utcOffset())*a,He=this-Re,Xe=function(){return C.m(oe,Re)};switch(xe){case x:se=Xe()/12;break;case _:se=Xe();break;case b:se=Xe()/3;break;case p:se=(He-je)/6048e5;break;case f:se=(He-je)/864e5;break;case g:se=He/s;break;case d:se=He/a;break;case c:se=He/t;break;default:se=He}return X?se:C.a(se)},H.daysInMonth=function(){return this.endOf(_).$D},H.$locale=function(){return D[this.$L]},H.locale=function(J,ee){if(!J)return this.$L;var X=this.clone(),se=$(J,ee,!0);return se&&(X.$L=se),X},H.clone=function(){return C.w(this.$d,this)},H.toDate=function(){return new Date(this.valueOf())},H.toJSON=function(){return this.isValid()?this.toISOString():null},H.toISOString=function(){return this.$d.toISOString()},H.toString=function(){return this.$d.toUTCString()},K})(),Q=F.prototype;return q.prototype=Q,[["$ms",o],["$s",c],["$m",d],["$H",g],["$W",f],["$M",_],["$y",x],["$D",S]].forEach((function(K){Q[K[1]]=function(H){return this.$g(H,K[0],K[1])}})),q.extend=function(K,H){return K.$i||(K(H,F,q),K.$i=!0),q},q.locale=$,q.isDayjs=j,q.unix=function(K){return q(1e3*K)},q.en=D[M],q.Ls=D,q.p={},q}))})(za)),za.exports}var Q0=G0();const et=yi(Q0);async function yn(e){return await Fe.getItem(`local:${e}`)||{}}function Ha(e,r){Fe.setItem(`local:${e}`,r)}function ze(e=0){return e?et().add(e,"s").format("YYYY-MM-DD HH:mm:ss"):et().format("YYYY-MM-DD HH:mm:ss")}function Ne(e=""){return{result:"success",reason:e}}function De(e){return{result:"fail",reason:e}}function Ae(e){switch(typeof e){case"string":return e;case"object":return e.reason??e.message;default:return"未知错误"}}let co=null;const K0=()=>{if(!co){const e=le.runtime.getManifest();co={"X-TG":"earth","X-VS":e.version,"X-MV":e.manifest_version}}return co},Te=e=>it({headers:K0(),...e});var Wa={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var Z0=Wa.exports,mf;function V0(){return mf||(mf=1,(function(e){(function(r,t){e.exports=r.document?t(r,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return t(a)}})(typeof window<"u"?window:Z0,function(r,t){var a=[],s=Object.getPrototypeOf,o=a.slice,c=a.flat?function(n){return a.flat.call(n)}:function(n){return a.concat.apply([],n)},d=a.push,g=a.indexOf,f={},p=f.toString,_=f.hasOwnProperty,b=_.toString,x=b.call(Object),S={},T=function(i){return typeof i=="function"&&typeof i.nodeType!="number"&&typeof i.item!="function"},v=function(i){return i!=null&&i===i.window},y=r.document,k={type:!0,src:!0,nonce:!0,noModule:!0};function I(n,i,u){u=u||y;var h,m,w=u.createElement("script");if(w.text=n,i)for(h in k)m=i[h]||i.getAttribute&&i.getAttribute(h),m&&w.setAttribute(h,m);u.head.appendChild(w).parentNode.removeChild(w)}function E(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?f[p.call(n)]||"object":typeof n}var M="3.7.1",D=/HTML$/i,l=function(n,i){return new l.fn.init(n,i)};l.fn=l.prototype={jquery:M,constructor:l,length:0,toArray:function(){return o.call(this)},get:function(n){return n==null?o.call(this):n<0?this[n+this.length]:this[n]},pushStack:function(n){var i=l.merge(this.constructor(),n);return i.prevObject=this,i},each:function(n){return l.each(this,n)},map:function(n){return this.pushStack(l.map(this,function(i,u){return n.call(i,u,i)}))},slice:function(){return this.pushStack(o.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(l.grep(this,function(n,i){return(i+1)%2}))},odd:function(){return this.pushStack(l.grep(this,function(n,i){return i%2}))},eq:function(n){var i=this.length,u=+n+(n<0?i:0);return this.pushStack(u>=0&&u<i?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:d,sort:a.sort,splice:a.splice},l.extend=l.fn.extend=function(){var n,i,u,h,m,w,A=arguments[0]||{},R=1,L=arguments.length,N=!1;for(typeof A=="boolean"&&(N=A,A=arguments[R]||{},R++),typeof A!="object"&&!T(A)&&(A={}),R===L&&(A=this,R--);R<L;R++)if((n=arguments[R])!=null)for(i in n)h=n[i],!(i==="__proto__"||A===h)&&(N&&h&&(l.isPlainObject(h)||(m=Array.isArray(h)))?(u=A[i],m&&!Array.isArray(u)?w=[]:!m&&!l.isPlainObject(u)?w={}:w=u,m=!1,A[i]=l.extend(N,w,h)):h!==void 0&&(A[i]=h));return A},l.extend({expando:"jQuery"+(M+Math.random()).replace(/\D/g,""),isReady:!0,error:function(n){throw new Error(n)},noop:function(){},isPlainObject:function(n){var i,u;return!n||p.call(n)!=="[object Object]"?!1:(i=s(n),i?(u=_.call(i,"constructor")&&i.constructor,typeof u=="function"&&b.call(u)===x):!0)},isEmptyObject:function(n){var i;for(i in n)return!1;return!0},globalEval:function(n,i,u){I(n,{nonce:i&&i.nonce},u)},each:function(n,i){var u,h=0;if(j(n))for(u=n.length;h<u&&i.call(n[h],h,n[h])!==!1;h++);else for(h in n)if(i.call(n[h],h,n[h])===!1)break;return n},text:function(n){var i,u="",h=0,m=n.nodeType;if(!m)for(;i=n[h++];)u+=l.text(i);return m===1||m===11?n.textContent:m===9?n.documentElement.textContent:m===3||m===4?n.nodeValue:u},makeArray:function(n,i){var u=i||[];return n!=null&&(j(Object(n))?l.merge(u,typeof n=="string"?[n]:n):d.call(u,n)),u},inArray:function(n,i,u){return i==null?-1:g.call(i,n,u)},isXMLDoc:function(n){var i=n&&n.namespaceURI,u=n&&(n.ownerDocument||n).documentElement;return!D.test(i||u&&u.nodeName||"HTML")},merge:function(n,i){for(var u=+i.length,h=0,m=n.length;h<u;h++)n[m++]=i[h];return n.length=m,n},grep:function(n,i,u){for(var h,m=[],w=0,A=n.length,R=!u;w<A;w++)h=!i(n[w],w),h!==R&&m.push(n[w]);return m},map:function(n,i,u){var h,m,w=0,A=[];if(j(n))for(h=n.length;w<h;w++)m=i(n[w],w,u),m!=null&&A.push(m);else for(w in n)m=i(n[w],w,u),m!=null&&A.push(m);return c(A)},guid:1,support:S}),typeof Symbol=="function"&&(l.fn[Symbol.iterator]=a[Symbol.iterator]),l.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(n,i){f["[object "+i+"]"]=i.toLowerCase()});function j(n){var i=!!n&&"length"in n&&n.length,u=E(n);return T(n)||v(n)?!1:u==="array"||i===0||typeof i=="number"&&i>0&&i-1 in n}function $(n,i){return n.nodeName&&n.nodeName.toLowerCase()===i.toLowerCase()}var q=a.pop,C=a.sort,F=a.splice,Q="[\\x20\\t\\r\\n\\f]",K=new RegExp("^"+Q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Q+"+$","g");l.contains=function(n,i){var u=i&&i.parentNode;return n===u||!!(u&&u.nodeType===1&&(n.contains?n.contains(u):n.compareDocumentPosition&&n.compareDocumentPosition(u)&16))};var H=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function J(n,i){return i?n==="\0"?"�":n.slice(0,-1)+"\\"+n.charCodeAt(n.length-1).toString(16)+" ":"\\"+n}l.escapeSelector=function(n){return(n+"").replace(H,J)};var ee=y,X=d;(function(){var n,i,u,h,m,w=X,A,R,L,N,G,V=l.expando,z=0,te=0,me=ci(),Le=ci(),_e=ci(),pt=ci(),nt=function(O,P){return O===P&&(m=!0),0},nr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ar="(?:\\\\[\\da-fA-F]{1,6}"+Q+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Ie="\\["+Q+"*("+ar+")(?:"+Q+"*([*^$|!~]?=)"+Q+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+ar+"))|)"+Q+"*\\]",nn=":("+ar+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Ie+")*)|.*)\\)|)",Me=new RegExp(Q+"+","g"),Je=new RegExp("^"+Q+"*,"+Q+"*"),ca=new RegExp("^"+Q+"*([>+~]|"+Q+")"+Q+"*"),jo=new RegExp(Q+"|>"),ir=new RegExp(nn),fa=new RegExp("^"+ar+"$"),sr={ID:new RegExp("^#("+ar+")"),CLASS:new RegExp("^\\.("+ar+")"),TAG:new RegExp("^("+ar+"|[*])"),ATTR:new RegExp("^"+Ie),PSEUDO:new RegExp("^"+nn),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Q+"*(even|odd|(([+-]|)(\\d*)n|)"+Q+"*(?:([+-]|)"+Q+"*(\\d+)|))"+Q+"*\\)|)","i"),bool:new RegExp("^(?:"+nr+")$","i"),needsContext:new RegExp("^"+Q+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Q+"*((?:-\\d)?\\d*)"+Q+"*\\)|)(?=[^-]|$)","i")},Dr=/^(?:input|select|textarea|button)$/i,Rr=/^h\d$/i,zt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,No=/[+~]/,vr=new RegExp("\\\\[\\da-fA-F]{1,6}"+Q+"?|\\\\([^\\r\\n\\f])","g"),xr=function(O,P){var B="0x"+O.slice(1)-65536;return P||(B<0?String.fromCharCode(B+65536):String.fromCharCode(B>>10|55296,B&1023|56320))},Xb=function(){Mr()},Jb=di(function(O){return O.disabled===!0&&$(O,"fieldset")},{dir:"parentNode",next:"legend"});function eT(){try{return A.activeElement}catch{}}try{w.apply(a=o.call(ee.childNodes),ee.childNodes),a[ee.childNodes.length].nodeType}catch{w={apply:function(P,B){X.apply(P,o.call(B))},call:function(P){X.apply(P,o.call(arguments,1))}}}function Be(O,P,B,Y){var Z,re,ae,ue,ie,ke,ge,ye=P&&P.ownerDocument,Ce=P?P.nodeType:9;if(B=B||[],typeof O!="string"||!O||Ce!==1&&Ce!==9&&Ce!==11)return B;if(!Y&&(Mr(P),P=P||A,L)){if(Ce!==11&&(ie=zt.exec(O)))if(Z=ie[1]){if(Ce===9)if(ae=P.getElementById(Z)){if(ae.id===Z)return w.call(B,ae),B}else return B;else if(ye&&(ae=ye.getElementById(Z))&&Be.contains(P,ae)&&ae.id===Z)return w.call(B,ae),B}else{if(ie[2])return w.apply(B,P.getElementsByTagName(O)),B;if((Z=ie[3])&&P.getElementsByClassName)return w.apply(B,P.getElementsByClassName(Z)),B}if(!pt[O+" "]&&(!N||!N.test(O))){if(ge=O,ye=P,Ce===1&&(jo.test(O)||ca.test(O))){for(ye=No.test(O)&&qo(P.parentNode)||P,(ye!=P||!S.scope)&&((ue=P.getAttribute("id"))?ue=l.escapeSelector(ue):P.setAttribute("id",ue=V)),ke=da(O),re=ke.length;re--;)ke[re]=(ue?"#"+ue:":scope")+" "+fi(ke[re]);ge=ke.join(",")}try{return w.apply(B,ye.querySelectorAll(ge)),B}catch{pt(O,!0)}finally{ue===V&&P.removeAttribute("id")}}}return _d(O.replace(K,"$1"),P,B,Y)}function ci(){var O=[];function P(B,Y){return O.push(B+" ")>i.cacheLength&&delete P[O.shift()],P[B+" "]=Y}return P}function Qt(O){return O[V]=!0,O}function bn(O){var P=A.createElement("fieldset");try{return!!O(P)}catch{return!1}finally{P.parentNode&&P.parentNode.removeChild(P),P=null}}function tT(O){return function(P){return $(P,"input")&&P.type===O}}function rT(O){return function(P){return($(P,"input")||$(P,"button"))&&P.type===O}}function bd(O){return function(P){return"form"in P?P.parentNode&&P.disabled===!1?"label"in P?"label"in P.parentNode?P.parentNode.disabled===O:P.disabled===O:P.isDisabled===O||P.isDisabled!==!O&&Jb(P)===O:P.disabled===O:"label"in P?P.disabled===O:!1}}function an(O){return Qt(function(P){return P=+P,Qt(function(B,Y){for(var Z,re=O([],B.length,P),ae=re.length;ae--;)B[Z=re[ae]]&&(B[Z]=!(Y[Z]=B[Z]))})})}function qo(O){return O&&typeof O.getElementsByTagName<"u"&&O}function Mr(O){var P,B=O?O.ownerDocument||O:ee;return B==A||B.nodeType!==9||!B.documentElement||(A=B,R=A.documentElement,L=!l.isXMLDoc(A),G=R.matches||R.webkitMatchesSelector||R.msMatchesSelector,R.msMatchesSelector&&ee!=A&&(P=A.defaultView)&&P.top!==P&&P.addEventListener("unload",Xb),S.getById=bn(function(Y){return R.appendChild(Y).id=l.expando,!A.getElementsByName||!A.getElementsByName(l.expando).length}),S.disconnectedMatch=bn(function(Y){return G.call(Y,"*")}),S.scope=bn(function(){return A.querySelectorAll(":scope")}),S.cssHas=bn(function(){try{return A.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),S.getById?(i.filter.ID=function(Y){var Z=Y.replace(vr,xr);return function(re){return re.getAttribute("id")===Z}},i.find.ID=function(Y,Z){if(typeof Z.getElementById<"u"&&L){var re=Z.getElementById(Y);return re?[re]:[]}}):(i.filter.ID=function(Y){var Z=Y.replace(vr,xr);return function(re){var ae=typeof re.getAttributeNode<"u"&&re.getAttributeNode("id");return ae&&ae.value===Z}},i.find.ID=function(Y,Z){if(typeof Z.getElementById<"u"&&L){var re,ae,ue,ie=Z.getElementById(Y);if(ie){if(re=ie.getAttributeNode("id"),re&&re.value===Y)return[ie];for(ue=Z.getElementsByName(Y),ae=0;ie=ue[ae++];)if(re=ie.getAttributeNode("id"),re&&re.value===Y)return[ie]}return[]}}),i.find.TAG=function(Y,Z){return typeof Z.getElementsByTagName<"u"?Z.getElementsByTagName(Y):Z.querySelectorAll(Y)},i.find.CLASS=function(Y,Z){if(typeof Z.getElementsByClassName<"u"&&L)return Z.getElementsByClassName(Y)},N=[],bn(function(Y){var Z;R.appendChild(Y).innerHTML="<a id='"+V+"' href='' disabled='disabled'></a><select id='"+V+"-\r\\' disabled='disabled'><option selected=''></option></select>",Y.querySelectorAll("[selected]").length||N.push("\\["+Q+"*(?:value|"+nr+")"),Y.querySelectorAll("[id~="+V+"-]").length||N.push("~="),Y.querySelectorAll("a#"+V+"+*").length||N.push(".#.+[+~]"),Y.querySelectorAll(":checked").length||N.push(":checked"),Z=A.createElement("input"),Z.setAttribute("type","hidden"),Y.appendChild(Z).setAttribute("name","D"),R.appendChild(Y).disabled=!0,Y.querySelectorAll(":disabled").length!==2&&N.push(":enabled",":disabled"),Z=A.createElement("input"),Z.setAttribute("name",""),Y.appendChild(Z),Y.querySelectorAll("[name='']").length||N.push("\\["+Q+"*name"+Q+"*="+Q+`*(?:''|"")`)}),S.cssHas||N.push(":has"),N=N.length&&new RegExp(N.join("|")),nt=function(Y,Z){if(Y===Z)return m=!0,0;var re=!Y.compareDocumentPosition-!Z.compareDocumentPosition;return re||(re=(Y.ownerDocument||Y)==(Z.ownerDocument||Z)?Y.compareDocumentPosition(Z):1,re&1||!S.sortDetached&&Z.compareDocumentPosition(Y)===re?Y===A||Y.ownerDocument==ee&&Be.contains(ee,Y)?-1:Z===A||Z.ownerDocument==ee&&Be.contains(ee,Z)?1:h?g.call(h,Y)-g.call(h,Z):0:re&4?-1:1)}),A}Be.matches=function(O,P){return Be(O,null,null,P)},Be.matchesSelector=function(O,P){if(Mr(O),L&&!pt[P+" "]&&(!N||!N.test(P)))try{var B=G.call(O,P);if(B||S.disconnectedMatch||O.document&&O.document.nodeType!==11)return B}catch{pt(P,!0)}return Be(P,A,null,[O]).length>0},Be.contains=function(O,P){return(O.ownerDocument||O)!=A&&Mr(O),l.contains(O,P)},Be.attr=function(O,P){(O.ownerDocument||O)!=A&&Mr(O);var B=i.attrHandle[P.toLowerCase()],Y=B&&_.call(i.attrHandle,P.toLowerCase())?B(O,P,!L):void 0;return Y!==void 0?Y:O.getAttribute(P)},Be.error=function(O){throw new Error("Syntax error, unrecognized expression: "+O)},l.uniqueSort=function(O){var P,B=[],Y=0,Z=0;if(m=!S.sortStable,h=!S.sortStable&&o.call(O,0),C.call(O,nt),m){for(;P=O[Z++];)P===O[Z]&&(Y=B.push(Z));for(;Y--;)F.call(O,B[Y],1)}return h=null,O},l.fn.uniqueSort=function(){return this.pushStack(l.uniqueSort(o.apply(this)))},i=l.expr={cacheLength:50,createPseudo:Qt,match:sr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(O){return O[1]=O[1].replace(vr,xr),O[3]=(O[3]||O[4]||O[5]||"").replace(vr,xr),O[2]==="~="&&(O[3]=" "+O[3]+" "),O.slice(0,4)},CHILD:function(O){return O[1]=O[1].toLowerCase(),O[1].slice(0,3)==="nth"?(O[3]||Be.error(O[0]),O[4]=+(O[4]?O[5]+(O[6]||1):2*(O[3]==="even"||O[3]==="odd")),O[5]=+(O[7]+O[8]||O[3]==="odd")):O[3]&&Be.error(O[0]),O},PSEUDO:function(O){var P,B=!O[6]&&O[2];return sr.CHILD.test(O[0])?null:(O[3]?O[2]=O[4]||O[5]||"":B&&ir.test(B)&&(P=da(B,!0))&&(P=B.indexOf(")",B.length-P)-B.length)&&(O[0]=O[0].slice(0,P),O[2]=B.slice(0,P)),O.slice(0,3))}},filter:{TAG:function(O){var P=O.replace(vr,xr).toLowerCase();return O==="*"?function(){return!0}:function(B){return $(B,P)}},CLASS:function(O){var P=me[O+" "];return P||(P=new RegExp("(^|"+Q+")"+O+"("+Q+"|$)"))&&me(O,function(B){return P.test(typeof B.className=="string"&&B.className||typeof B.getAttribute<"u"&&B.getAttribute("class")||"")})},ATTR:function(O,P,B){return function(Y){var Z=Be.attr(Y,O);return Z==null?P==="!=":P?(Z+="",P==="="?Z===B:P==="!="?Z!==B:P==="^="?B&&Z.indexOf(B)===0:P==="*="?B&&Z.indexOf(B)>-1:P==="$="?B&&Z.slice(-B.length)===B:P==="~="?(" "+Z.replace(Me," ")+" ").indexOf(B)>-1:P==="|="?Z===B||Z.slice(0,B.length+1)===B+"-":!1):!0}},CHILD:function(O,P,B,Y,Z){var re=O.slice(0,3)!=="nth",ae=O.slice(-4)!=="last",ue=P==="of-type";return Y===1&&Z===0?function(ie){return!!ie.parentNode}:function(ie,ke,ge){var ye,Ce,he,Qe,It,vt=re!==ae?"nextSibling":"previousSibling",Ht=ie.parentNode,or=ue&&ie.nodeName.toLowerCase(),Tn=!ge&&!ue,At=!1;if(Ht){if(re){for(;vt;){for(he=ie;he=he[vt];)if(ue?$(he,or):he.nodeType===1)return!1;It=vt=O==="only"&&!It&&"nextSibling"}return!0}if(It=[ae?Ht.firstChild:Ht.lastChild],ae&&Tn){for(Ce=Ht[V]||(Ht[V]={}),ye=Ce[O]||[],Qe=ye[0]===z&&ye[1],At=Qe&&ye[2],he=Qe&&Ht.childNodes[Qe];he=++Qe&&he&&he[vt]||(At=Qe=0)||It.pop();)if(he.nodeType===1&&++At&&he===ie){Ce[O]=[z,Qe,At];break}}else if(Tn&&(Ce=ie[V]||(ie[V]={}),ye=Ce[O]||[],Qe=ye[0]===z&&ye[1],At=Qe),At===!1)for(;(he=++Qe&&he&&he[vt]||(At=Qe=0)||It.pop())&&!((ue?$(he,or):he.nodeType===1)&&++At&&(Tn&&(Ce=he[V]||(he[V]={}),Ce[O]=[z,At]),he===ie)););return At-=Z,At===Y||At%Y===0&&At/Y>=0}}},PSEUDO:function(O,P){var B,Y=i.pseudos[O]||i.setFilters[O.toLowerCase()]||Be.error("unsupported pseudo: "+O);return Y[V]?Y(P):Y.length>1?(B=[O,O,"",P],i.setFilters.hasOwnProperty(O.toLowerCase())?Qt(function(Z,re){for(var ae,ue=Y(Z,P),ie=ue.length;ie--;)ae=g.call(Z,ue[ie]),Z[ae]=!(re[ae]=ue[ie])}):function(Z){return Y(Z,0,B)}):Y}},pseudos:{not:Qt(function(O){var P=[],B=[],Y=zo(O.replace(K,"$1"));return Y[V]?Qt(function(Z,re,ae,ue){for(var ie,ke=Y(Z,null,ue,[]),ge=Z.length;ge--;)(ie=ke[ge])&&(Z[ge]=!(re[ge]=ie))}):function(Z,re,ae){return P[0]=Z,Y(P,null,ae,B),P[0]=null,!B.pop()}}),has:Qt(function(O){return function(P){return Be(O,P).length>0}}),contains:Qt(function(O){return O=O.replace(vr,xr),function(P){return(P.textContent||l.text(P)).indexOf(O)>-1}}),lang:Qt(function(O){return fa.test(O||"")||Be.error("unsupported lang: "+O),O=O.replace(vr,xr).toLowerCase(),function(P){var B;do if(B=L?P.lang:P.getAttribute("xml:lang")||P.getAttribute("lang"))return B=B.toLowerCase(),B===O||B.indexOf(O+"-")===0;while((P=P.parentNode)&&P.nodeType===1);return!1}}),target:function(O){var P=r.location&&r.location.hash;return P&&P.slice(1)===O.id},root:function(O){return O===R},focus:function(O){return O===eT()&&A.hasFocus()&&!!(O.type||O.href||~O.tabIndex)},enabled:bd(!1),disabled:bd(!0),checked:function(O){return $(O,"input")&&!!O.checked||$(O,"option")&&!!O.selected},selected:function(O){return O.parentNode&&O.parentNode.selectedIndex,O.selected===!0},empty:function(O){for(O=O.firstChild;O;O=O.nextSibling)if(O.nodeType<6)return!1;return!0},parent:function(O){return!i.pseudos.empty(O)},header:function(O){return Rr.test(O.nodeName)},input:function(O){return Dr.test(O.nodeName)},button:function(O){return $(O,"input")&&O.type==="button"||$(O,"button")},text:function(O){var P;return $(O,"input")&&O.type==="text"&&((P=O.getAttribute("type"))==null||P.toLowerCase()==="text")},first:an(function(){return[0]}),last:an(function(O,P){return[P-1]}),eq:an(function(O,P,B){return[B<0?B+P:B]}),even:an(function(O,P){for(var B=0;B<P;B+=2)O.push(B);return O}),odd:an(function(O,P){for(var B=1;B<P;B+=2)O.push(B);return O}),lt:an(function(O,P,B){var Y;for(B<0?Y=B+P:B>P?Y=P:Y=B;--Y>=0;)O.push(Y);return O}),gt:an(function(O,P,B){for(var Y=B<0?B+P:B;++Y<P;)O.push(Y);return O})}},i.pseudos.nth=i.pseudos.eq;for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=tT(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=rT(n);function Td(){}Td.prototype=i.filters=i.pseudos,i.setFilters=new Td;function da(O,P){var B,Y,Z,re,ae,ue,ie,ke=Le[O+" "];if(ke)return P?0:ke.slice(0);for(ae=O,ue=[],ie=i.preFilter;ae;){(!B||(Y=Je.exec(ae)))&&(Y&&(ae=ae.slice(Y[0].length)||ae),ue.push(Z=[])),B=!1,(Y=ca.exec(ae))&&(B=Y.shift(),Z.push({value:B,type:Y[0].replace(K," ")}),ae=ae.slice(B.length));for(re in i.filter)(Y=sr[re].exec(ae))&&(!ie[re]||(Y=ie[re](Y)))&&(B=Y.shift(),Z.push({value:B,type:re,matches:Y}),ae=ae.slice(B.length));if(!B)break}return P?ae.length:ae?Be.error(O):Le(O,ue).slice(0)}function fi(O){for(var P=0,B=O.length,Y="";P<B;P++)Y+=O[P].value;return Y}function di(O,P,B){var Y=P.dir,Z=P.next,re=Z||Y,ae=B&&re==="parentNode",ue=te++;return P.first?function(ie,ke,ge){for(;ie=ie[Y];)if(ie.nodeType===1||ae)return O(ie,ke,ge);return!1}:function(ie,ke,ge){var ye,Ce,he=[z,ue];if(ge){for(;ie=ie[Y];)if((ie.nodeType===1||ae)&&O(ie,ke,ge))return!0}else for(;ie=ie[Y];)if(ie.nodeType===1||ae)if(Ce=ie[V]||(ie[V]={}),Z&&$(ie,Z))ie=ie[Y]||ie;else{if((ye=Ce[re])&&ye[0]===z&&ye[1]===ue)return he[2]=ye[2];if(Ce[re]=he,he[2]=O(ie,ke,ge))return!0}return!1}}function Fo(O){return O.length>1?function(P,B,Y){for(var Z=O.length;Z--;)if(!O[Z](P,B,Y))return!1;return!0}:O[0]}function nT(O,P,B){for(var Y=0,Z=P.length;Y<Z;Y++)Be(O,P[Y],B);return B}function hi(O,P,B,Y,Z){for(var re,ae=[],ue=0,ie=O.length,ke=P!=null;ue<ie;ue++)(re=O[ue])&&(!B||B(re,Y,Z))&&(ae.push(re),ke&&P.push(ue));return ae}function Uo(O,P,B,Y,Z,re){return Y&&!Y[V]&&(Y=Uo(Y)),Z&&!Z[V]&&(Z=Uo(Z,re)),Qt(function(ae,ue,ie,ke){var ge,ye,Ce,he,Qe=[],It=[],vt=ue.length,Ht=ae||nT(P||"*",ie.nodeType?[ie]:ie,[]),or=O&&(ae||!P)?hi(Ht,Qe,O,ie,ke):Ht;if(B?(he=Z||(ae?O:vt||Y)?[]:ue,B(or,he,ie,ke)):he=or,Y)for(ge=hi(he,It),Y(ge,[],ie,ke),ye=ge.length;ye--;)(Ce=ge[ye])&&(he[It[ye]]=!(or[It[ye]]=Ce));if(ae){if(Z||O){if(Z){for(ge=[],ye=he.length;ye--;)(Ce=he[ye])&&ge.push(or[ye]=Ce);Z(null,he=[],ge,ke)}for(ye=he.length;ye--;)(Ce=he[ye])&&(ge=Z?g.call(ae,Ce):Qe[ye])>-1&&(ae[ge]=!(ue[ge]=Ce))}}else he=hi(he===ue?he.splice(vt,he.length):he),Z?Z(null,ue,he,ke):w.apply(ue,he)})}function Bo(O){for(var P,B,Y,Z=O.length,re=i.relative[O[0].type],ae=re||i.relative[" "],ue=re?1:0,ie=di(function(ye){return ye===P},ae,!0),ke=di(function(ye){return g.call(P,ye)>-1},ae,!0),ge=[function(ye,Ce,he){var Qe=!re&&(he||Ce!=u)||((P=Ce).nodeType?ie(ye,Ce,he):ke(ye,Ce,he));return P=null,Qe}];ue<Z;ue++)if(B=i.relative[O[ue].type])ge=[di(Fo(ge),B)];else{if(B=i.filter[O[ue].type].apply(null,O[ue].matches),B[V]){for(Y=++ue;Y<Z&&!i.relative[O[Y].type];Y++);return Uo(ue>1&&Fo(ge),ue>1&&fi(O.slice(0,ue-1).concat({value:O[ue-2].type===" "?"*":""})).replace(K,"$1"),B,ue<Y&&Bo(O.slice(ue,Y)),Y<Z&&Bo(O=O.slice(Y)),Y<Z&&fi(O))}ge.push(B)}return Fo(ge)}function aT(O,P){var B=P.length>0,Y=O.length>0,Z=function(re,ae,ue,ie,ke){var ge,ye,Ce,he=0,Qe="0",It=re&&[],vt=[],Ht=u,or=re||Y&&i.find.TAG("*",ke),Tn=z+=Ht==null?1:Math.random()||.1,At=or.length;for(ke&&(u=ae==A||ae||ke);Qe!==At&&(ge=or[Qe])!=null;Qe++){if(Y&&ge){for(ye=0,!ae&&ge.ownerDocument!=A&&(Mr(ge),ue=!L);Ce=O[ye++];)if(Ce(ge,ae||A,ue)){w.call(ie,ge);break}ke&&(z=Tn)}B&&((ge=!Ce&&ge)&&he--,re&&It.push(ge))}if(he+=Qe,B&&Qe!==he){for(ye=0;Ce=P[ye++];)Ce(It,vt,ae,ue);if(re){if(he>0)for(;Qe--;)It[Qe]||vt[Qe]||(vt[Qe]=q.call(ie));vt=hi(vt)}w.apply(ie,vt),ke&&!re&&vt.length>0&&he+P.length>1&&l.uniqueSort(ie)}return ke&&(z=Tn,u=Ht),It};return B?Qt(Z):Z}function zo(O,P){var B,Y=[],Z=[],re=_e[O+" "];if(!re){for(P||(P=da(O)),B=P.length;B--;)re=Bo(P[B]),re[V]?Y.push(re):Z.push(re);re=_e(O,aT(Z,Y)),re.selector=O}return re}function _d(O,P,B,Y){var Z,re,ae,ue,ie,ke=typeof O=="function"&&O,ge=!Y&&da(O=ke.selector||O);if(B=B||[],ge.length===1){if(re=ge[0]=ge[0].slice(0),re.length>2&&(ae=re[0]).type==="ID"&&P.nodeType===9&&L&&i.relative[re[1].type]){if(P=(i.find.ID(ae.matches[0].replace(vr,xr),P)||[])[0],P)ke&&(P=P.parentNode);else return B;O=O.slice(re.shift().value.length)}for(Z=sr.needsContext.test(O)?0:re.length;Z--&&(ae=re[Z],!i.relative[ue=ae.type]);)if((ie=i.find[ue])&&(Y=ie(ae.matches[0].replace(vr,xr),No.test(re[0].type)&&qo(P.parentNode)||P))){if(re.splice(Z,1),O=Y.length&&fi(re),!O)return w.apply(B,Y),B;break}}return(ke||zo(O,ge))(Y,P,!L,B,!P||No.test(O)&&qo(P.parentNode)||P),B}S.sortStable=V.split("").sort(nt).join("")===V,Mr(),S.sortDetached=bn(function(O){return O.compareDocumentPosition(A.createElement("fieldset"))&1}),l.find=Be,l.expr[":"]=l.expr.pseudos,l.unique=l.uniqueSort,Be.compile=zo,Be.select=_d,Be.setDocument=Mr,Be.tokenize=da,Be.escape=l.escapeSelector,Be.getText=l.text,Be.isXML=l.isXMLDoc,Be.selectors=l.expr,Be.support=l.support,Be.uniqueSort=l.uniqueSort})();var se=function(n,i,u){for(var h=[],m=u!==void 0;(n=n[i])&&n.nodeType!==9;)if(n.nodeType===1){if(m&&l(n).is(u))break;h.push(n)}return h},oe=function(n,i){for(var u=[];n;n=n.nextSibling)n.nodeType===1&&n!==i&&u.push(n);return u},xe=l.expr.match.needsContext,Re=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function je(n,i,u){return T(i)?l.grep(n,function(h,m){return!!i.call(h,m,h)!==u}):i.nodeType?l.grep(n,function(h){return h===i!==u}):typeof i!="string"?l.grep(n,function(h){return g.call(i,h)>-1!==u}):l.filter(i,n,u)}l.filter=function(n,i,u){var h=i[0];return u&&(n=":not("+n+")"),i.length===1&&h.nodeType===1?l.find.matchesSelector(h,n)?[h]:[]:l.find.matches(n,l.grep(i,function(m){return m.nodeType===1}))},l.fn.extend({find:function(n){var i,u,h=this.length,m=this;if(typeof n!="string")return this.pushStack(l(n).filter(function(){for(i=0;i<h;i++)if(l.contains(m[i],this))return!0}));for(u=this.pushStack([]),i=0;i<h;i++)l.find(n,m[i],u);return h>1?l.uniqueSort(u):u},filter:function(n){return this.pushStack(je(this,n||[],!1))},not:function(n){return this.pushStack(je(this,n||[],!0))},is:function(n){return!!je(this,typeof n=="string"&&xe.test(n)?l(n):n||[],!1).length}});var He,Xe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ct=l.fn.init=function(n,i,u){var h,m;if(!n)return this;if(u=u||He,typeof n=="string")if(n[0]==="<"&&n[n.length-1]===">"&&n.length>=3?h=[null,n,null]:h=Xe.exec(n),h&&(h[1]||!i))if(h[1]){if(i=i instanceof l?i[0]:i,l.merge(this,l.parseHTML(h[1],i&&i.nodeType?i.ownerDocument||i:y,!0)),Re.test(h[1])&&l.isPlainObject(i))for(h in i)T(this[h])?this[h](i[h]):this.attr(h,i[h]);return this}else return m=y.getElementById(h[2]),m&&(this[0]=m,this.length=1),this;else return!i||i.jquery?(i||u).find(n):this.constructor(i).find(n);else{if(n.nodeType)return this[0]=n,this.length=1,this;if(T(n))return u.ready!==void 0?u.ready(n):n(l)}return l.makeArray(n,this)};ct.prototype=l.fn,He=l(y);var mt=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};l.fn.extend({has:function(n){var i=l(n,this),u=i.length;return this.filter(function(){for(var h=0;h<u;h++)if(l.contains(this,i[h]))return!0})},closest:function(n,i){var u,h=0,m=this.length,w=[],A=typeof n!="string"&&l(n);if(!xe.test(n)){for(;h<m;h++)for(u=this[h];u&&u!==i;u=u.parentNode)if(u.nodeType<11&&(A?A.index(u)>-1:u.nodeType===1&&l.find.matchesSelector(u,n))){w.push(u);break}}return this.pushStack(w.length>1?l.uniqueSort(w):w)},index:function(n){return n?typeof n=="string"?g.call(l(n),this[0]):g.call(this,n.jquery?n[0]:n):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,i){return this.pushStack(l.uniqueSort(l.merge(this.get(),l(n,i))))},addBack:function(n){return this.add(n==null?this.prevObject:this.prevObject.filter(n))}});function Ge(n,i){for(;(n=n[i])&&n.nodeType!==1;);return n}l.each({parent:function(n){var i=n.parentNode;return i&&i.nodeType!==11?i:null},parents:function(n){return se(n,"parentNode")},parentsUntil:function(n,i,u){return se(n,"parentNode",u)},next:function(n){return Ge(n,"nextSibling")},prev:function(n){return Ge(n,"previousSibling")},nextAll:function(n){return se(n,"nextSibling")},prevAll:function(n){return se(n,"previousSibling")},nextUntil:function(n,i,u){return se(n,"nextSibling",u)},prevUntil:function(n,i,u){return se(n,"previousSibling",u)},siblings:function(n){return oe((n.parentNode||{}).firstChild,n)},children:function(n){return oe(n.firstChild)},contents:function(n){return n.contentDocument!=null&&s(n.contentDocument)?n.contentDocument:($(n,"template")&&(n=n.content||n),l.merge([],n.childNodes))}},function(n,i){l.fn[n]=function(u,h){var m=l.map(this,i,u);return n.slice(-5)!=="Until"&&(h=u),h&&typeof h=="string"&&(m=l.filter(h,m)),this.length>1&&(ft[n]||l.uniqueSort(m),mt.test(n)&&m.reverse()),this.pushStack(m)}});var fe=/[^\x20\t\r\n\f]+/g;function $e(n){var i={};return l.each(n.match(fe)||[],function(u,h){i[h]=!0}),i}l.Callbacks=function(n){n=typeof n=="string"?$e(n):l.extend({},n);var i,u,h,m,w=[],A=[],R=-1,L=function(){for(m=m||n.once,h=i=!0;A.length;R=-1)for(u=A.shift();++R<w.length;)w[R].apply(u[0],u[1])===!1&&n.stopOnFalse&&(R=w.length,u=!1);n.memory||(u=!1),i=!1,m&&(u?w=[]:w="")},N={add:function(){return w&&(u&&!i&&(R=w.length-1,A.push(u)),(function G(V){l.each(V,function(z,te){T(te)?(!n.unique||!N.has(te))&&w.push(te):te&&te.length&&E(te)!=="string"&&G(te)})})(arguments),u&&!i&&L()),this},remove:function(){return l.each(arguments,function(G,V){for(var z;(z=l.inArray(V,w,z))>-1;)w.splice(z,1),z<=R&&R--}),this},has:function(G){return G?l.inArray(G,w)>-1:w.length>0},empty:function(){return w&&(w=[]),this},disable:function(){return m=A=[],w=u="",this},disabled:function(){return!w},lock:function(){return m=A=[],!u&&!i&&(w=u=""),this},locked:function(){return!!m},fireWith:function(G,V){return m||(V=V||[],V=[G,V.slice?V.slice():V],A.push(V),i||L()),this},fire:function(){return N.fireWith(this,arguments),this},fired:function(){return!!h}};return N};function Se(n){return n}function qe(n){throw n}function st(n,i,u,h){var m;try{n&&T(m=n.promise)?m.call(n).done(i).fail(u):n&&T(m=n.then)?m.call(n,i,u):i.apply(void 0,[n].slice(h))}catch(w){u.apply(void 0,[w])}}l.extend({Deferred:function(n){var i=[["notify","progress",l.Callbacks("memory"),l.Callbacks("memory"),2],["resolve","done",l.Callbacks("once memory"),l.Callbacks("once memory"),0,"resolved"],["reject","fail",l.Callbacks("once memory"),l.Callbacks("once memory"),1,"rejected"]],u="pending",h={state:function(){return u},always:function(){return m.done(arguments).fail(arguments),this},catch:function(w){return h.then(null,w)},pipe:function(){var w=arguments;return l.Deferred(function(A){l.each(i,function(R,L){var N=T(w[L[4]])&&w[L[4]];m[L[1]](function(){var G=N&&N.apply(this,arguments);G&&T(G.promise)?G.promise().progress(A.notify).done(A.resolve).fail(A.reject):A[L[0]+"With"](this,N?[G]:arguments)})}),w=null}).promise()},then:function(w,A,R){var L=0;function N(G,V,z,te){return function(){var me=this,Le=arguments,_e=function(){var nt,nr;if(!(G<L)){if(nt=z.apply(me,Le),nt===V.promise())throw new TypeError("Thenable self-resolution");nr=nt&&(typeof nt=="object"||typeof nt=="function")&&nt.then,T(nr)?te?nr.call(nt,N(L,V,Se,te),N(L,V,qe,te)):(L++,nr.call(nt,N(L,V,Se,te),N(L,V,qe,te),N(L,V,Se,V.notifyWith))):(z!==Se&&(me=void 0,Le=[nt]),(te||V.resolveWith)(me,Le))}},pt=te?_e:function(){try{_e()}catch(nt){l.Deferred.exceptionHook&&l.Deferred.exceptionHook(nt,pt.error),G+1>=L&&(z!==qe&&(me=void 0,Le=[nt]),V.rejectWith(me,Le))}};G?pt():(l.Deferred.getErrorHook?pt.error=l.Deferred.getErrorHook():l.Deferred.getStackHook&&(pt.error=l.Deferred.getStackHook()),r.setTimeout(pt))}}return l.Deferred(function(G){i[0][3].add(N(0,G,T(R)?R:Se,G.notifyWith)),i[1][3].add(N(0,G,T(w)?w:Se)),i[2][3].add(N(0,G,T(A)?A:qe))}).promise()},promise:function(w){return w!=null?l.extend(w,h):h}},m={};return l.each(i,function(w,A){var R=A[2],L=A[5];h[A[1]]=R.add,L&&R.add(function(){u=L},i[3-w][2].disable,i[3-w][3].disable,i[0][2].lock,i[0][3].lock),R.add(A[3].fire),m[A[0]]=function(){return m[A[0]+"With"](this===m?void 0:this,arguments),this},m[A[0]+"With"]=R.fireWith}),h.promise(m),n&&n.call(m,m),m},when:function(n){var i=arguments.length,u=i,h=Array(u),m=o.call(arguments),w=l.Deferred(),A=function(R){return function(L){h[R]=this,m[R]=arguments.length>1?o.call(arguments):L,--i||w.resolveWith(h,m)}};if(i<=1&&(st(n,w.done(A(u)).resolve,w.reject,!i),w.state()==="pending"||T(m[u]&&m[u].then)))return w.then();for(;u--;)st(m[u],A(u),w.reject);return w.promise()}});var Ct=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;l.Deferred.exceptionHook=function(n,i){r.console&&r.console.warn&&n&&Ct.test(n.name)&&r.console.warn("jQuery.Deferred exception: "+n.message,n.stack,i)},l.readyException=function(n){r.setTimeout(function(){throw n})};var We=l.Deferred();l.fn.ready=function(n){return We.then(n).catch(function(i){l.readyException(i)}),this},l.extend({isReady:!1,readyWait:1,ready:function(n){(n===!0?--l.readyWait:l.isReady)||(l.isReady=!0,!(n!==!0&&--l.readyWait>0)&&We.resolveWith(y,[l]))}}),l.ready.then=We.then;function ot(){y.removeEventListener("DOMContentLoaded",ot),r.removeEventListener("load",ot),l.ready()}y.readyState==="complete"||y.readyState!=="loading"&&!y.documentElement.doScroll?r.setTimeout(l.ready):(y.addEventListener("DOMContentLoaded",ot),r.addEventListener("load",ot));var Tt=function(n,i,u,h,m,w,A){var R=0,L=n.length,N=u==null;if(E(u)==="object"){m=!0;for(R in u)Tt(n,i,R,u[R],!0,w,A)}else if(h!==void 0&&(m=!0,T(h)||(A=!0),N&&(A?(i.call(n,h),i=null):(N=i,i=function(G,V,z){return N.call(l(G),z)})),i))for(;R<L;R++)i(n[R],u,A?h:h.call(n[R],R,i(n[R],u)));return m?n:N?i.call(n):L?i(n[0],u):w},mr=/^-ms-/,wr=/-([a-z])/g;function Dt(n,i){return i.toUpperCase()}function dt(n){return n.replace(mr,"ms-").replace(wr,Dt)}var qt=function(n){return n.nodeType===1||n.nodeType===9||!+n.nodeType};function Ft(){this.expando=l.expando+Ft.uid++}Ft.uid=1,Ft.prototype={cache:function(n){var i=n[this.expando];return i||(i={},qt(n)&&(n.nodeType?n[this.expando]=i:Object.defineProperty(n,this.expando,{value:i,configurable:!0}))),i},set:function(n,i,u){var h,m=this.cache(n);if(typeof i=="string")m[dt(i)]=u;else for(h in i)m[dt(h)]=i[h];return m},get:function(n,i){return i===void 0?this.cache(n):n[this.expando]&&n[this.expando][dt(i)]},access:function(n,i,u){return i===void 0||i&&typeof i=="string"&&u===void 0?this.get(n,i):(this.set(n,i,u),u!==void 0?u:i)},remove:function(n,i){var u,h=n[this.expando];if(h!==void 0){if(i!==void 0)for(Array.isArray(i)?i=i.map(dt):(i=dt(i),i=i in h?[i]:i.match(fe)||[]),u=i.length;u--;)delete h[i[u]];(i===void 0||l.isEmptyObject(h))&&(n.nodeType?n[this.expando]=void 0:delete n[this.expando])}},hasData:function(n){var i=n[this.expando];return i!==void 0&&!l.isEmptyObject(i)}};var ce=new Ft,ht=new Ft,Ao=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Xr=/[A-Z]/g;function Xn(n){return n==="true"?!0:n==="false"?!1:n==="null"?null:n===+n+""?+n:Ao.test(n)?JSON.parse(n):n}function Jn(n,i,u){var h;if(u===void 0&&n.nodeType===1)if(h="data-"+i.replace(Xr,"-$&").toLowerCase(),u=n.getAttribute(h),typeof u=="string"){try{u=Xn(u)}catch{}ht.set(n,i,u)}else u=void 0;return u}l.extend({hasData:function(n){return ht.hasData(n)||ce.hasData(n)},data:function(n,i,u){return ht.access(n,i,u)},removeData:function(n,i){ht.remove(n,i)},_data:function(n,i,u){return ce.access(n,i,u)},_removeData:function(n,i){ce.remove(n,i)}}),l.fn.extend({data:function(n,i){var u,h,m,w=this[0],A=w&&w.attributes;if(n===void 0){if(this.length&&(m=ht.get(w),w.nodeType===1&&!ce.get(w,"hasDataAttrs"))){for(u=A.length;u--;)A[u]&&(h=A[u].name,h.indexOf("data-")===0&&(h=dt(h.slice(5)),Jn(w,h,m[h])));ce.set(w,"hasDataAttrs",!0)}return m}return typeof n=="object"?this.each(function(){ht.set(this,n)}):Tt(this,function(R){var L;if(w&&R===void 0)return L=ht.get(w,n),L!==void 0||(L=Jn(w,n),L!==void 0)?L:void 0;this.each(function(){ht.set(this,n,R)})},null,i,arguments.length>1,null,!0)},removeData:function(n){return this.each(function(){ht.remove(this,n)})}}),l.extend({queue:function(n,i,u){var h;if(n)return i=(i||"fx")+"queue",h=ce.get(n,i),u&&(!h||Array.isArray(u)?h=ce.access(n,i,l.makeArray(u)):h.push(u)),h||[]},dequeue:function(n,i){i=i||"fx";var u=l.queue(n,i),h=u.length,m=u.shift(),w=l._queueHooks(n,i),A=function(){l.dequeue(n,i)};m==="inprogress"&&(m=u.shift(),h--),m&&(i==="fx"&&u.unshift("inprogress"),delete w.stop,m.call(n,A,w)),!h&&w&&w.empty.fire()},_queueHooks:function(n,i){var u=i+"queueHooks";return ce.get(n,u)||ce.access(n,u,{empty:l.Callbacks("once memory").add(function(){ce.remove(n,[i+"queue",u])})})}}),l.fn.extend({queue:function(n,i){var u=2;return typeof n!="string"&&(i=n,n="fx",u--),arguments.length<u?l.queue(this[0],n):i===void 0?this:this.each(function(){var h=l.queue(this,n,i);l._queueHooks(this,n),n==="fx"&&h[0]!=="inprogress"&&l.dequeue(this,n)})},dequeue:function(n){return this.each(function(){l.dequeue(this,n)})},clearQueue:function(n){return this.queue(n||"fx",[])},promise:function(n,i){var u,h=1,m=l.Deferred(),w=this,A=this.length,R=function(){--h||m.resolveWith(w,[w])};for(typeof n!="string"&&(i=n,n=void 0),n=n||"fx";A--;)u=ce.get(w[A],n+"queueHooks"),u&&u.empty&&(h++,u.empty.add(R));return R(),m.promise(i)}});var ni=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Jr=new RegExp("^(?:([+-])=|)("+ni+")([a-z%]*)$","i"),Rt=["Top","Right","Bottom","Left"],Ut=y.documentElement,U=function(n){return l.contains(n.ownerDocument,n)},W={composed:!0};Ut.getRootNode&&(U=function(n){return l.contains(n.ownerDocument,n)||n.getRootNode(W)===n.ownerDocument});var Ee=function(n,i){return n=i||n,n.style.display==="none"||n.style.display===""&&U(n)&&l.css(n,"display")==="none"};function Ue(n,i,u,h){var m,w,A=20,R=h?function(){return h.cur()}:function(){return l.css(n,i,"")},L=R(),N=u&&u[3]||(l.cssNumber[i]?"":"px"),G=n.nodeType&&(l.cssNumber[i]||N!=="px"&&+L)&&Jr.exec(l.css(n,i));if(G&&G[3]!==N){for(L=L/2,N=N||G[3],G=+L||1;A--;)l.style(n,i,G+N),(1-w)*(1-(w=R()/L||.5))<=0&&(A=0),G=G/w;G=G*2,l.style(n,i,G+N),u=u||[]}return u&&(G=+G||+L||0,m=u[1]?G+(u[1]+1)*u[2]:+u[2],h&&(h.unit=N,h.start=G,h.end=m)),m}var Ye={};function be(n){var i,u=n.ownerDocument,h=n.nodeName,m=Ye[h];return m||(i=u.body.appendChild(u.createElement(h)),m=l.css(i,"display"),i.parentNode.removeChild(i),m==="none"&&(m="block"),Ye[h]=m,m)}function _t(n,i){for(var u,h,m=[],w=0,A=n.length;w<A;w++)h=n[w],h.style&&(u=h.style.display,i?(u==="none"&&(m[w]=ce.get(h,"display")||null,m[w]||(h.style.display="")),h.style.display===""&&Ee(h)&&(m[w]=be(h))):u!=="none"&&(m[w]="none",ce.set(h,"display",u)));for(w=0;w<A;w++)m[w]!=null&&(n[w].style.display=m[w]);return n}l.fn.extend({show:function(){return _t(this,!0)},hide:function(){return _t(this)},toggle:function(n){return typeof n=="boolean"?n?this.show():this.hide():this.each(function(){Ee(this)?l(this).show():l(this).hide()})}});var Mt=/^(?:checkbox|radio)$/i,wt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Yt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var n=y.createDocumentFragment(),i=n.appendChild(y.createElement("div")),u=y.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),i.appendChild(u),S.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,i.innerHTML="<textarea>x</textarea>",S.noCloneChecked=!!i.cloneNode(!0).lastChild.defaultValue,i.innerHTML="<option></option>",S.option=!!i.lastChild})();var yt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,S.option||(yt.optgroup=yt.option=[1,"<select multiple='multiple'>","</select>"]);function tt(n,i){var u;return typeof n.getElementsByTagName<"u"?u=n.getElementsByTagName(i||"*"):typeof n.querySelectorAll<"u"?u=n.querySelectorAll(i||"*"):u=[],i===void 0||i&&$(n,i)?l.merge([n],u):u}function St(n,i){for(var u=0,h=n.length;u<h;u++)ce.set(n[u],"globalEval",!i||ce.get(i[u],"globalEval"))}var ai=/<|&#?\w+;/;function ea(n,i,u,h,m){for(var w,A,R,L,N,G,V=i.createDocumentFragment(),z=[],te=0,me=n.length;te<me;te++)if(w=n[te],w||w===0)if(E(w)==="object")l.merge(z,w.nodeType?[w]:w);else if(!ai.test(w))z.push(i.createTextNode(w));else{for(A=A||V.appendChild(i.createElement("div")),R=(wt.exec(w)||["",""])[1].toLowerCase(),L=yt[R]||yt._default,A.innerHTML=L[1]+l.htmlPrefilter(w)+L[2],G=L[0];G--;)A=A.lastChild;l.merge(z,A.childNodes),A=V.firstChild,A.textContent=""}for(V.textContent="",te=0;w=z[te++];){if(h&&l.inArray(w,h)>-1){m&&m.push(w);continue}if(N=U(w),A=tt(V.appendChild(w),"script"),N&&St(A),u)for(G=0;w=A[G++];)Yt.test(w.type||"")&&u.push(w)}return V}var ta=/^([^.]*)(?:\.(.+)|)/;function Bt(){return!0}function tr(){return!1}function Ir(n,i,u,h,m,w){var A,R;if(typeof i=="object"){typeof u!="string"&&(h=h||u,u=void 0);for(R in i)Ir(n,R,u,h,i[R],w);return n}if(h==null&&m==null?(m=u,h=u=void 0):m==null&&(typeof u=="string"?(m=h,h=void 0):(m=h,h=u,u=void 0)),m===!1)m=tr;else if(!m)return n;return w===1&&(A=m,m=function(L){return l().off(L),A.apply(this,arguments)},m.guid=A.guid||(A.guid=l.guid++)),n.each(function(){l.event.add(this,i,m,h,u)})}l.event={global:{},add:function(n,i,u,h,m){var w,A,R,L,N,G,V,z,te,me,Le,_e=ce.get(n);if(qt(n))for(u.handler&&(w=u,u=w.handler,m=w.selector),m&&l.find.matchesSelector(Ut,m),u.guid||(u.guid=l.guid++),(L=_e.events)||(L=_e.events=Object.create(null)),(A=_e.handle)||(A=_e.handle=function(pt){return typeof l<"u"&&l.event.triggered!==pt.type?l.event.dispatch.apply(n,arguments):void 0}),i=(i||"").match(fe)||[""],N=i.length;N--;)R=ta.exec(i[N])||[],te=Le=R[1],me=(R[2]||"").split(".").sort(),te&&(V=l.event.special[te]||{},te=(m?V.delegateType:V.bindType)||te,V=l.event.special[te]||{},G=l.extend({type:te,origType:Le,data:h,handler:u,guid:u.guid,selector:m,needsContext:m&&l.expr.match.needsContext.test(m),namespace:me.join(".")},w),(z=L[te])||(z=L[te]=[],z.delegateCount=0,(!V.setup||V.setup.call(n,h,me,A)===!1)&&n.addEventListener&&n.addEventListener(te,A)),V.add&&(V.add.call(n,G),G.handler.guid||(G.handler.guid=u.guid)),m?z.splice(z.delegateCount++,0,G):z.push(G),l.event.global[te]=!0)},remove:function(n,i,u,h,m){var w,A,R,L,N,G,V,z,te,me,Le,_e=ce.hasData(n)&&ce.get(n);if(!(!_e||!(L=_e.events))){for(i=(i||"").match(fe)||[""],N=i.length;N--;){if(R=ta.exec(i[N])||[],te=Le=R[1],me=(R[2]||"").split(".").sort(),!te){for(te in L)l.event.remove(n,te+i[N],u,h,!0);continue}for(V=l.event.special[te]||{},te=(h?V.delegateType:V.bindType)||te,z=L[te]||[],R=R[2]&&new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"),A=w=z.length;w--;)G=z[w],(m||Le===G.origType)&&(!u||u.guid===G.guid)&&(!R||R.test(G.namespace))&&(!h||h===G.selector||h==="**"&&G.selector)&&(z.splice(w,1),G.selector&&z.delegateCount--,V.remove&&V.remove.call(n,G));A&&!z.length&&((!V.teardown||V.teardown.call(n,me,_e.handle)===!1)&&l.removeEvent(n,te,_e.handle),delete L[te])}l.isEmptyObject(L)&&ce.remove(n,"handle events")}},dispatch:function(n){var i,u,h,m,w,A,R=new Array(arguments.length),L=l.event.fix(n),N=(ce.get(this,"events")||Object.create(null))[L.type]||[],G=l.event.special[L.type]||{};for(R[0]=L,i=1;i<arguments.length;i++)R[i]=arguments[i];if(L.delegateTarget=this,!(G.preDispatch&&G.preDispatch.call(this,L)===!1)){for(A=l.event.handlers.call(this,L,N),i=0;(m=A[i++])&&!L.isPropagationStopped();)for(L.currentTarget=m.elem,u=0;(w=m.handlers[u++])&&!L.isImmediatePropagationStopped();)(!L.rnamespace||w.namespace===!1||L.rnamespace.test(w.namespace))&&(L.handleObj=w,L.data=w.data,h=((l.event.special[w.origType]||{}).handle||w.handler).apply(m.elem,R),h!==void 0&&(L.result=h)===!1&&(L.preventDefault(),L.stopPropagation()));return G.postDispatch&&G.postDispatch.call(this,L),L.result}},handlers:function(n,i){var u,h,m,w,A,R=[],L=i.delegateCount,N=n.target;if(L&&N.nodeType&&!(n.type==="click"&&n.button>=1)){for(;N!==this;N=N.parentNode||this)if(N.nodeType===1&&!(n.type==="click"&&N.disabled===!0)){for(w=[],A={},u=0;u<L;u++)h=i[u],m=h.selector+" ",A[m]===void 0&&(A[m]=h.needsContext?l(m,this).index(N)>-1:l.find(m,this,null,[N]).length),A[m]&&w.push(h);w.length&&R.push({elem:N,handlers:w})}}return N=this,L<i.length&&R.push({elem:N,handlers:i.slice(L)}),R},addProp:function(n,i){Object.defineProperty(l.Event.prototype,n,{enumerable:!0,configurable:!0,get:T(i)?function(){if(this.originalEvent)return i(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[n]},set:function(u){Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(n){return n[l.expando]?n:new l.Event(n)},special:{load:{noBubble:!0},click:{setup:function(n){var i=this||n;return Mt.test(i.type)&&i.click&&$(i,"input")&&Or(i,"click",!0),!1},trigger:function(n){var i=this||n;return Mt.test(i.type)&&i.click&&$(i,"input")&&Or(i,"click"),!0},_default:function(n){var i=n.target;return Mt.test(i.type)&&i.click&&$(i,"input")&&ce.get(i,"click")||$(i,"a")}},beforeunload:{postDispatch:function(n){n.result!==void 0&&n.originalEvent&&(n.originalEvent.returnValue=n.result)}}}};function Or(n,i,u){if(!u){ce.get(n,i)===void 0&&l.event.add(n,i,Bt);return}ce.set(n,i,!1),l.event.add(n,i,{namespace:!1,handler:function(h){var m,w=ce.get(this,i);if(h.isTrigger&1&&this[i]){if(w)(l.event.special[i]||{}).delegateType&&h.stopPropagation();else if(w=o.call(arguments),ce.set(this,i,w),this[i](),m=ce.get(this,i),ce.set(this,i,!1),w!==m)return h.stopImmediatePropagation(),h.preventDefault(),m}else w&&(ce.set(this,i,l.event.trigger(w[0],w.slice(1),this)),h.stopPropagation(),h.isImmediatePropagationStopped=Bt)}})}l.removeEvent=function(n,i,u){n.removeEventListener&&n.removeEventListener(i,u)},l.Event=function(n,i){if(!(this instanceof l.Event))return new l.Event(n,i);n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||n.defaultPrevented===void 0&&n.returnValue===!1?Bt:tr,this.target=n.target&&n.target.nodeType===3?n.target.parentNode:n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget):this.type=n,i&&l.extend(this,i),this.timeStamp=n&&n.timeStamp||Date.now(),this[l.expando]=!0},l.Event.prototype={constructor:l.Event,isDefaultPrevented:tr,isPropagationStopped:tr,isImmediatePropagationStopped:tr,isSimulated:!1,preventDefault:function(){var n=this.originalEvent;this.isDefaultPrevented=Bt,n&&!this.isSimulated&&n.preventDefault()},stopPropagation:function(){var n=this.originalEvent;this.isPropagationStopped=Bt,n&&!this.isSimulated&&n.stopPropagation()},stopImmediatePropagation:function(){var n=this.originalEvent;this.isImmediatePropagationStopped=Bt,n&&!this.isSimulated&&n.stopImmediatePropagation(),this.stopPropagation()}},l.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},l.event.addProp),l.each({focus:"focusin",blur:"focusout"},function(n,i){function u(h){if(y.documentMode){var m=ce.get(this,"handle"),w=l.event.fix(h);w.type=h.type==="focusin"?"focus":"blur",w.isSimulated=!0,m(h),w.target===w.currentTarget&&m(w)}else l.event.simulate(i,h.target,l.event.fix(h))}l.event.special[n]={setup:function(){var h;if(Or(this,n,!0),y.documentMode)h=ce.get(this,i),h||this.addEventListener(i,u),ce.set(this,i,(h||0)+1);else return!1},trigger:function(){return Or(this,n),!0},teardown:function(){var h;if(y.documentMode)h=ce.get(this,i)-1,h?ce.set(this,i,h):(this.removeEventListener(i,u),ce.remove(this,i));else return!1},_default:function(h){return ce.get(h.target,n)},delegateType:i},l.event.special[i]={setup:function(){var h=this.ownerDocument||this.document||this,m=y.documentMode?this:h,w=ce.get(m,i);w||(y.documentMode?this.addEventListener(i,u):h.addEventListener(n,u,!0)),ce.set(m,i,(w||0)+1)},teardown:function(){var h=this.ownerDocument||this.document||this,m=y.documentMode?this:h,w=ce.get(m,i)-1;w?ce.set(m,i,w):(y.documentMode?this.removeEventListener(i,u):h.removeEventListener(n,u,!0),ce.remove(m,i))}}}),l.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,i){l.event.special[n]={delegateType:i,bindType:i,handle:function(u){var h,m=this,w=u.relatedTarget,A=u.handleObj;return(!w||w!==m&&!l.contains(m,w))&&(u.type=A.origType,h=A.handler.apply(this,arguments),u.type=i),h}}}),l.fn.extend({on:function(n,i,u,h){return Ir(this,n,i,u,h)},one:function(n,i,u,h){return Ir(this,n,i,u,h,1)},off:function(n,i,u){var h,m;if(n&&n.preventDefault&&n.handleObj)return h=n.handleObj,l(n.delegateTarget).off(h.namespace?h.origType+"."+h.namespace:h.origType,h.selector,h.handler),this;if(typeof n=="object"){for(m in n)this.off(m,i,n[m]);return this}return(i===!1||typeof i=="function")&&(u=i,i=void 0),u===!1&&(u=tr),this.each(function(){l.event.remove(this,n,u,i)})}});var ra=/<script|<style|<link/i,ii=/checked\s*(?:[^=]|=\s*.checked.)/i,si=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function vn(n,i){return $(n,"table")&&$(i.nodeType!==11?i:i.firstChild,"tr")&&l(n).children("tbody")[0]||n}function oi(n){return n.type=(n.getAttribute("type")!==null)+"/"+n.type,n}function na(n){return(n.type||"").slice(0,5)==="true/"?n.type=n.type.slice(5):n.removeAttribute("type"),n}function aa(n,i){var u,h,m,w,A,R,L;if(i.nodeType===1){if(ce.hasData(n)&&(w=ce.get(n),L=w.events,L)){ce.remove(i,"handle events");for(m in L)for(u=0,h=L[m].length;u<h;u++)l.event.add(i,m,L[m][u])}ht.hasData(n)&&(A=ht.access(n),R=l.extend({},A),ht.set(i,R))}}function ko(n,i){var u=i.nodeName.toLowerCase();u==="input"&&Mt.test(n.type)?i.checked=n.checked:(u==="input"||u==="textarea")&&(i.defaultValue=n.defaultValue)}function rr(n,i,u,h){i=c(i);var m,w,A,R,L,N,G=0,V=n.length,z=V-1,te=i[0],me=T(te);if(me||V>1&&typeof te=="string"&&!S.checkClone&&ii.test(te))return n.each(function(Le){var _e=n.eq(Le);me&&(i[0]=te.call(this,Le,_e.html())),rr(_e,i,u,h)});if(V&&(m=ea(i,n[0].ownerDocument,!1,n,h),w=m.firstChild,m.childNodes.length===1&&(m=w),w||h)){for(A=l.map(tt(m,"script"),oi),R=A.length;G<V;G++)L=m,G!==z&&(L=l.clone(L,!0,!0),R&&l.merge(A,tt(L,"script"))),u.call(n[G],L,G);if(R)for(N=A[A.length-1].ownerDocument,l.map(A,na),G=0;G<R;G++)L=A[G],Yt.test(L.type||"")&&!ce.access(L,"globalEval")&&l.contains(N,L)&&(L.src&&(L.type||"").toLowerCase()!=="module"?l._evalUrl&&!L.noModule&&l._evalUrl(L.src,{nonce:L.nonce||L.getAttribute("nonce")},N):I(L.textContent.replace(si,""),L,N))}return n}function yr(n,i,u){for(var h,m=i?l.filter(i,n):n,w=0;(h=m[w])!=null;w++)!u&&h.nodeType===1&&l.cleanData(tt(h)),h.parentNode&&(u&&U(h)&&St(tt(h,"script")),h.parentNode.removeChild(h));return n}l.extend({htmlPrefilter:function(n){return n},clone:function(n,i,u){var h,m,w,A,R=n.cloneNode(!0),L=U(n);if(!S.noCloneChecked&&(n.nodeType===1||n.nodeType===11)&&!l.isXMLDoc(n))for(A=tt(R),w=tt(n),h=0,m=w.length;h<m;h++)ko(w[h],A[h]);if(i)if(u)for(w=w||tt(n),A=A||tt(R),h=0,m=w.length;h<m;h++)aa(w[h],A[h]);else aa(n,R);return A=tt(R,"script"),A.length>0&&St(A,!L&&tt(n,"script")),R},cleanData:function(n){for(var i,u,h,m=l.event.special,w=0;(u=n[w])!==void 0;w++)if(qt(u)){if(i=u[ce.expando]){if(i.events)for(h in i.events)m[h]?l.event.remove(u,h):l.removeEvent(u,h,i.handle);u[ce.expando]=void 0}u[ht.expando]&&(u[ht.expando]=void 0)}}}),l.fn.extend({detach:function(n){return yr(this,n,!0)},remove:function(n){return yr(this,n)},text:function(n){return Tt(this,function(i){return i===void 0?l.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=i)})},null,n,arguments.length)},append:function(){return rr(this,arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var i=vn(this,n);i.appendChild(n)}})},prepend:function(){return rr(this,arguments,function(n){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var i=vn(this,n);i.insertBefore(n,i.firstChild)}})},before:function(){return rr(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this)})},after:function(){return rr(this,arguments,function(n){this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling)})},empty:function(){for(var n,i=0;(n=this[i])!=null;i++)n.nodeType===1&&(l.cleanData(tt(n,!1)),n.textContent="");return this},clone:function(n,i){return n=n??!1,i=i??n,this.map(function(){return l.clone(this,n,i)})},html:function(n){return Tt(this,function(i){var u=this[0]||{},h=0,m=this.length;if(i===void 0&&u.nodeType===1)return u.innerHTML;if(typeof i=="string"&&!ra.test(i)&&!yt[(wt.exec(i)||["",""])[1].toLowerCase()]){i=l.htmlPrefilter(i);try{for(;h<m;h++)u=this[h]||{},u.nodeType===1&&(l.cleanData(tt(u,!1)),u.innerHTML=i);u=0}catch{}}u&&this.empty().append(i)},null,n,arguments.length)},replaceWith:function(){var n=[];return rr(this,arguments,function(i){var u=this.parentNode;l.inArray(this,n)<0&&(l.cleanData(tt(this)),u&&u.replaceChild(i,this))},n)}}),l.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,i){l.fn[n]=function(u){for(var h,m=[],w=l(u),A=w.length-1,R=0;R<=A;R++)h=R===A?this:this.clone(!0),l(w[R])[i](h),d.apply(m,h.get());return this.pushStack(m)}});var Lr=new RegExp("^("+ni+")(?!px)[a-z%]+$","i"),ia=/^--/,en=function(n){var i=n.ownerDocument.defaultView;return(!i||!i.opener)&&(i=r),i.getComputedStyle(n)},td=function(n,i,u){var h,m,w={};for(m in i)w[m]=n.style[m],n.style[m]=i[m];h=u.call(n);for(m in i)n.style[m]=w[m];return h},Ab=new RegExp(Rt.join("|"),"i");(function(){function n(){if(N){L.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",N.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Ut.appendChild(L).appendChild(N);var G=r.getComputedStyle(N);u=G.top!=="1%",R=i(G.marginLeft)===12,N.style.right="60%",w=i(G.right)===36,h=i(G.width)===36,N.style.position="absolute",m=i(N.offsetWidth/3)===12,Ut.removeChild(L),N=null}}function i(G){return Math.round(parseFloat(G))}var u,h,m,w,A,R,L=y.createElement("div"),N=y.createElement("div");N.style&&(N.style.backgroundClip="content-box",N.cloneNode(!0).style.backgroundClip="",S.clearCloneStyle=N.style.backgroundClip==="content-box",l.extend(S,{boxSizingReliable:function(){return n(),h},pixelBoxStyles:function(){return n(),w},pixelPosition:function(){return n(),u},reliableMarginLeft:function(){return n(),R},scrollboxSize:function(){return n(),m},reliableTrDimensions:function(){var G,V,z,te;return A==null&&(G=y.createElement("table"),V=y.createElement("tr"),z=y.createElement("div"),G.style.cssText="position:absolute;left:-11111px;border-collapse:separate",V.style.cssText="box-sizing:content-box;border:1px solid",V.style.height="1px",z.style.height="9px",z.style.display="block",Ut.appendChild(G).appendChild(V).appendChild(z),te=r.getComputedStyle(V),A=parseInt(te.height,10)+parseInt(te.borderTopWidth,10)+parseInt(te.borderBottomWidth,10)===V.offsetHeight,Ut.removeChild(G)),A}}))})();function sa(n,i,u){var h,m,w,A,R=ia.test(i),L=n.style;return u=u||en(n),u&&(A=u.getPropertyValue(i)||u[i],R&&A&&(A=A.replace(K,"$1")||void 0),A===""&&!U(n)&&(A=l.style(n,i)),!S.pixelBoxStyles()&&Lr.test(A)&&Ab.test(i)&&(h=L.width,m=L.minWidth,w=L.maxWidth,L.minWidth=L.maxWidth=L.width=A,A=u.width,L.width=h,L.minWidth=m,L.maxWidth=w)),A!==void 0?A+"":A}function rd(n,i){return{get:function(){if(n()){delete this.get;return}return(this.get=i).apply(this,arguments)}}}var nd=["Webkit","Moz","ms"],ad=y.createElement("div").style,id={};function kb(n){for(var i=n[0].toUpperCase()+n.slice(1),u=nd.length;u--;)if(n=nd[u]+i,n in ad)return n}function Co(n){var i=l.cssProps[n]||id[n];return i||(n in ad?n:id[n]=kb(n)||n)}var Cb=/^(none|table(?!-c[ea]).+)/,Eb={position:"absolute",visibility:"hidden",display:"block"},sd={letterSpacing:"0",fontWeight:"400"};function od(n,i,u){var h=Jr.exec(i);return h?Math.max(0,h[2]-(u||0))+(h[3]||"px"):i}function Eo(n,i,u,h,m,w){var A=i==="width"?1:0,R=0,L=0,N=0;if(u===(h?"border":"content"))return 0;for(;A<4;A+=2)u==="margin"&&(N+=l.css(n,u+Rt[A],!0,m)),h?(u==="content"&&(L-=l.css(n,"padding"+Rt[A],!0,m)),u!=="margin"&&(L-=l.css(n,"border"+Rt[A]+"Width",!0,m))):(L+=l.css(n,"padding"+Rt[A],!0,m),u!=="padding"?L+=l.css(n,"border"+Rt[A]+"Width",!0,m):R+=l.css(n,"border"+Rt[A]+"Width",!0,m));return!h&&w>=0&&(L+=Math.max(0,Math.ceil(n["offset"+i[0].toUpperCase()+i.slice(1)]-w-L-R-.5))||0),L+N}function ld(n,i,u){var h=en(n),m=!S.boxSizingReliable()||u,w=m&&l.css(n,"boxSizing",!1,h)==="border-box",A=w,R=sa(n,i,h),L="offset"+i[0].toUpperCase()+i.slice(1);if(Lr.test(R)){if(!u)return R;R="auto"}return(!S.boxSizingReliable()&&w||!S.reliableTrDimensions()&&$(n,"tr")||R==="auto"||!parseFloat(R)&&l.css(n,"display",!1,h)==="inline")&&n.getClientRects().length&&(w=l.css(n,"boxSizing",!1,h)==="border-box",A=L in n,A&&(R=n[L])),R=parseFloat(R)||0,R+Eo(n,i,u||(w?"border":"content"),A,h,R)+"px"}l.extend({cssHooks:{opacity:{get:function(n,i){if(i){var u=sa(n,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(n,i,u,h){if(!(!n||n.nodeType===3||n.nodeType===8||!n.style)){var m,w,A,R=dt(i),L=ia.test(i),N=n.style;if(L||(i=Co(R)),A=l.cssHooks[i]||l.cssHooks[R],u!==void 0){if(w=typeof u,w==="string"&&(m=Jr.exec(u))&&m[1]&&(u=Ue(n,i,m),w="number"),u==null||u!==u)return;w==="number"&&!L&&(u+=m&&m[3]||(l.cssNumber[R]?"":"px")),!S.clearCloneStyle&&u===""&&i.indexOf("background")===0&&(N[i]="inherit"),(!A||!("set"in A)||(u=A.set(n,u,h))!==void 0)&&(L?N.setProperty(i,u):N[i]=u)}else return A&&"get"in A&&(m=A.get(n,!1,h))!==void 0?m:N[i]}},css:function(n,i,u,h){var m,w,A,R=dt(i),L=ia.test(i);return L||(i=Co(R)),A=l.cssHooks[i]||l.cssHooks[R],A&&"get"in A&&(m=A.get(n,!0,u)),m===void 0&&(m=sa(n,i,h)),m==="normal"&&i in sd&&(m=sd[i]),u===""||u?(w=parseFloat(m),u===!0||isFinite(w)?w||0:m):m}}),l.each(["height","width"],function(n,i){l.cssHooks[i]={get:function(u,h,m){if(h)return Cb.test(l.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?td(u,Eb,function(){return ld(u,i,m)}):ld(u,i,m)},set:function(u,h,m){var w,A=en(u),R=!S.scrollboxSize()&&A.position==="absolute",L=R||m,N=L&&l.css(u,"boxSizing",!1,A)==="border-box",G=m?Eo(u,i,m,N,A):0;return N&&R&&(G-=Math.ceil(u["offset"+i[0].toUpperCase()+i.slice(1)]-parseFloat(A[i])-Eo(u,i,"border",!1,A)-.5)),G&&(w=Jr.exec(h))&&(w[3]||"px")!=="px"&&(u.style[i]=h,h=l.css(u,i)),od(u,h,G)}}}),l.cssHooks.marginLeft=rd(S.reliableMarginLeft,function(n,i){if(i)return(parseFloat(sa(n,"marginLeft"))||n.getBoundingClientRect().left-td(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"}),l.each({margin:"",padding:"",border:"Width"},function(n,i){l.cssHooks[n+i]={expand:function(u){for(var h=0,m={},w=typeof u=="string"?u.split(" "):[u];h<4;h++)m[n+Rt[h]+i]=w[h]||w[h-2]||w[0];return m}},n!=="margin"&&(l.cssHooks[n+i].set=od)}),l.fn.extend({css:function(n,i){return Tt(this,function(u,h,m){var w,A,R={},L=0;if(Array.isArray(h)){for(w=en(u),A=h.length;L<A;L++)R[h[L]]=l.css(u,h[L],!1,w);return R}return m!==void 0?l.style(u,h,m):l.css(u,h)},n,i,arguments.length>1)}});function Et(n,i,u,h,m){return new Et.prototype.init(n,i,u,h,m)}l.Tween=Et,Et.prototype={constructor:Et,init:function(n,i,u,h,m,w){this.elem=n,this.prop=u,this.easing=m||l.easing._default,this.options=i,this.start=this.now=this.cur(),this.end=h,this.unit=w||(l.cssNumber[u]?"":"px")},cur:function(){var n=Et.propHooks[this.prop];return n&&n.get?n.get(this):Et.propHooks._default.get(this)},run:function(n){var i,u=Et.propHooks[this.prop];return this.options.duration?this.pos=i=l.easing[this.easing](n,this.options.duration*n,0,1,this.options.duration):this.pos=i=n,this.now=(this.end-this.start)*i+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):Et.propHooks._default.set(this),this}},Et.prototype.init.prototype=Et.prototype,Et.propHooks={_default:{get:function(n){var i;return n.elem.nodeType!==1||n.elem[n.prop]!=null&&n.elem.style[n.prop]==null?n.elem[n.prop]:(i=l.css(n.elem,n.prop,""),!i||i==="auto"?0:i)},set:function(n){l.fx.step[n.prop]?l.fx.step[n.prop](n):n.elem.nodeType===1&&(l.cssHooks[n.prop]||n.elem.style[Co(n.prop)]!=null)?l.style(n.elem,n.prop,n.now+n.unit):n.elem[n.prop]=n.now}}},Et.propHooks.scrollTop=Et.propHooks.scrollLeft={set:function(n){n.elem.nodeType&&n.elem.parentNode&&(n.elem[n.prop]=n.now)}},l.easing={linear:function(n){return n},swing:function(n){return .5-Math.cos(n*Math.PI)/2},_default:"swing"},l.fx=Et.prototype.init,l.fx.step={};var xn,li,Ib=/^(?:toggle|show|hide)$/,Ob=/queueHooks$/;function Io(){li&&(y.hidden===!1&&r.requestAnimationFrame?r.requestAnimationFrame(Io):r.setTimeout(Io,l.fx.interval),l.fx.tick())}function ud(){return r.setTimeout(function(){xn=void 0}),xn=Date.now()}function ui(n,i){var u,h=0,m={height:n};for(i=i?1:0;h<4;h+=2-i)u=Rt[h],m["margin"+u]=m["padding"+u]=n;return i&&(m.opacity=m.width=n),m}function cd(n,i,u){for(var h,m=(Gt.tweeners[i]||[]).concat(Gt.tweeners["*"]),w=0,A=m.length;w<A;w++)if(h=m[w].call(u,i,n))return h}function Lb(n,i,u){var h,m,w,A,R,L,N,G,V="width"in i||"height"in i,z=this,te={},me=n.style,Le=n.nodeType&&Ee(n),_e=ce.get(n,"fxshow");u.queue||(A=l._queueHooks(n,"fx"),A.unqueued==null&&(A.unqueued=0,R=A.empty.fire,A.empty.fire=function(){A.unqueued||R()}),A.unqueued++,z.always(function(){z.always(function(){A.unqueued--,l.queue(n,"fx").length||A.empty.fire()})}));for(h in i)if(m=i[h],Ib.test(m)){if(delete i[h],w=w||m==="toggle",m===(Le?"hide":"show"))if(m==="show"&&_e&&_e[h]!==void 0)Le=!0;else continue;te[h]=_e&&_e[h]||l.style(n,h)}if(L=!l.isEmptyObject(i),!(!L&&l.isEmptyObject(te))){V&&n.nodeType===1&&(u.overflow=[me.overflow,me.overflowX,me.overflowY],N=_e&&_e.display,N==null&&(N=ce.get(n,"display")),G=l.css(n,"display"),G==="none"&&(N?G=N:(_t([n],!0),N=n.style.display||N,G=l.css(n,"display"),_t([n]))),(G==="inline"||G==="inline-block"&&N!=null)&&l.css(n,"float")==="none"&&(L||(z.done(function(){me.display=N}),N==null&&(G=me.display,N=G==="none"?"":G)),me.display="inline-block")),u.overflow&&(me.overflow="hidden",z.always(function(){me.overflow=u.overflow[0],me.overflowX=u.overflow[1],me.overflowY=u.overflow[2]})),L=!1;for(h in te)L||(_e?"hidden"in _e&&(Le=_e.hidden):_e=ce.access(n,"fxshow",{display:N}),w&&(_e.hidden=!Le),Le&&_t([n],!0),z.done(function(){Le||_t([n]),ce.remove(n,"fxshow");for(h in te)l.style(n,h,te[h])})),L=cd(Le?_e[h]:0,h,z),h in _e||(_e[h]=L.start,Le&&(L.end=L.start,L.start=0))}}function Db(n,i){var u,h,m,w,A;for(u in n)if(h=dt(u),m=i[h],w=n[u],Array.isArray(w)&&(m=w[1],w=n[u]=w[0]),u!==h&&(n[h]=w,delete n[u]),A=l.cssHooks[h],A&&"expand"in A){w=A.expand(w),delete n[h];for(u in w)u in n||(n[u]=w[u],i[u]=m)}else i[h]=m}function Gt(n,i,u){var h,m,w=0,A=Gt.prefilters.length,R=l.Deferred().always(function(){delete L.elem}),L=function(){if(m)return!1;for(var V=xn||ud(),z=Math.max(0,N.startTime+N.duration-V),te=z/N.duration||0,me=1-te,Le=0,_e=N.tweens.length;Le<_e;Le++)N.tweens[Le].run(me);return R.notifyWith(n,[N,me,z]),me<1&&_e?z:(_e||R.notifyWith(n,[N,1,0]),R.resolveWith(n,[N]),!1)},N=R.promise({elem:n,props:l.extend({},i),opts:l.extend(!0,{specialEasing:{},easing:l.easing._default},u),originalProperties:i,originalOptions:u,startTime:xn||ud(),duration:u.duration,tweens:[],createTween:function(V,z){var te=l.Tween(n,N.opts,V,z,N.opts.specialEasing[V]||N.opts.easing);return N.tweens.push(te),te},stop:function(V){var z=0,te=V?N.tweens.length:0;if(m)return this;for(m=!0;z<te;z++)N.tweens[z].run(1);return V?(R.notifyWith(n,[N,1,0]),R.resolveWith(n,[N,V])):R.rejectWith(n,[N,V]),this}}),G=N.props;for(Db(G,N.opts.specialEasing);w<A;w++)if(h=Gt.prefilters[w].call(N,n,G,N.opts),h)return T(h.stop)&&(l._queueHooks(N.elem,N.opts.queue).stop=h.stop.bind(h)),h;return l.map(G,cd,N),T(N.opts.start)&&N.opts.start.call(n,N),N.progress(N.opts.progress).done(N.opts.done,N.opts.complete).fail(N.opts.fail).always(N.opts.always),l.fx.timer(l.extend(L,{elem:n,anim:N,queue:N.opts.queue})),N}l.Animation=l.extend(Gt,{tweeners:{"*":[function(n,i){var u=this.createTween(n,i);return Ue(u.elem,n,Jr.exec(i),u),u}]},tweener:function(n,i){T(n)?(i=n,n=["*"]):n=n.match(fe);for(var u,h=0,m=n.length;h<m;h++)u=n[h],Gt.tweeners[u]=Gt.tweeners[u]||[],Gt.tweeners[u].unshift(i)},prefilters:[Lb],prefilter:function(n,i){i?Gt.prefilters.unshift(n):Gt.prefilters.push(n)}}),l.speed=function(n,i,u){var h=n&&typeof n=="object"?l.extend({},n):{complete:u||!u&&i||T(n)&&n,duration:n,easing:u&&i||i&&!T(i)&&i};return l.fx.off?h.duration=0:typeof h.duration!="number"&&(h.duration in l.fx.speeds?h.duration=l.fx.speeds[h.duration]:h.duration=l.fx.speeds._default),(h.queue==null||h.queue===!0)&&(h.queue="fx"),h.old=h.complete,h.complete=function(){T(h.old)&&h.old.call(this),h.queue&&l.dequeue(this,h.queue)},h},l.fn.extend({fadeTo:function(n,i,u,h){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:i},n,u,h)},animate:function(n,i,u,h){var m=l.isEmptyObject(n),w=l.speed(i,u,h),A=function(){var R=Gt(this,l.extend({},n),w);(m||ce.get(this,"finish"))&&R.stop(!0)};return A.finish=A,m||w.queue===!1?this.each(A):this.queue(w.queue,A)},stop:function(n,i,u){var h=function(m){var w=m.stop;delete m.stop,w(u)};return typeof n!="string"&&(u=i,i=n,n=void 0),i&&this.queue(n||"fx",[]),this.each(function(){var m=!0,w=n!=null&&n+"queueHooks",A=l.timers,R=ce.get(this);if(w)R[w]&&R[w].stop&&h(R[w]);else for(w in R)R[w]&&R[w].stop&&Ob.test(w)&&h(R[w]);for(w=A.length;w--;)A[w].elem===this&&(n==null||A[w].queue===n)&&(A[w].anim.stop(u),m=!1,A.splice(w,1));(m||!u)&&l.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var i,u=ce.get(this),h=u[n+"queue"],m=u[n+"queueHooks"],w=l.timers,A=h?h.length:0;for(u.finish=!0,l.queue(this,n,[]),m&&m.stop&&m.stop.call(this,!0),i=w.length;i--;)w[i].elem===this&&w[i].queue===n&&(w[i].anim.stop(!0),w.splice(i,1));for(i=0;i<A;i++)h[i]&&h[i].finish&&h[i].finish.call(this);delete u.finish})}}),l.each(["toggle","show","hide"],function(n,i){var u=l.fn[i];l.fn[i]=function(h,m,w){return h==null||typeof h=="boolean"?u.apply(this,arguments):this.animate(ui(i,!0),h,m,w)}}),l.each({slideDown:ui("show"),slideUp:ui("hide"),slideToggle:ui("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,i){l.fn[n]=function(u,h,m){return this.animate(i,u,h,m)}}),l.timers=[],l.fx.tick=function(){var n,i=0,u=l.timers;for(xn=Date.now();i<u.length;i++)n=u[i],!n()&&u[i]===n&&u.splice(i--,1);u.length||l.fx.stop(),xn=void 0},l.fx.timer=function(n){l.timers.push(n),l.fx.start()},l.fx.interval=13,l.fx.start=function(){li||(li=!0,Io())},l.fx.stop=function(){li=null},l.fx.speeds={slow:600,fast:200,_default:400},l.fn.delay=function(n,i){return n=l.fx&&l.fx.speeds[n]||n,i=i||"fx",this.queue(i,function(u,h){var m=r.setTimeout(u,n);h.stop=function(){r.clearTimeout(m)}})},(function(){var n=y.createElement("input"),i=y.createElement("select"),u=i.appendChild(y.createElement("option"));n.type="checkbox",S.checkOn=n.value!=="",S.optSelected=u.selected,n=y.createElement("input"),n.value="t",n.type="radio",S.radioValue=n.value==="t"})();var fd,oa=l.expr.attrHandle;l.fn.extend({attr:function(n,i){return Tt(this,l.attr,n,i,arguments.length>1)},removeAttr:function(n){return this.each(function(){l.removeAttr(this,n)})}}),l.extend({attr:function(n,i,u){var h,m,w=n.nodeType;if(!(w===3||w===8||w===2)){if(typeof n.getAttribute>"u")return l.prop(n,i,u);if((w!==1||!l.isXMLDoc(n))&&(m=l.attrHooks[i.toLowerCase()]||(l.expr.match.bool.test(i)?fd:void 0)),u!==void 0){if(u===null){l.removeAttr(n,i);return}return m&&"set"in m&&(h=m.set(n,u,i))!==void 0?h:(n.setAttribute(i,u+""),u)}return m&&"get"in m&&(h=m.get(n,i))!==null?h:(h=l.find.attr(n,i),h??void 0)}},attrHooks:{type:{set:function(n,i){if(!S.radioValue&&i==="radio"&&$(n,"input")){var u=n.value;return n.setAttribute("type",i),u&&(n.value=u),i}}}},removeAttr:function(n,i){var u,h=0,m=i&&i.match(fe);if(m&&n.nodeType===1)for(;u=m[h++];)n.removeAttribute(u)}}),fd={set:function(n,i,u){return i===!1?l.removeAttr(n,u):n.setAttribute(u,u),u}},l.each(l.expr.match.bool.source.match(/\w+/g),function(n,i){var u=oa[i]||l.find.attr;oa[i]=function(h,m,w){var A,R,L=m.toLowerCase();return w||(R=oa[L],oa[L]=A,A=u(h,m,w)!=null?L:null,oa[L]=R),A}});var Rb=/^(?:input|select|textarea|button)$/i,Mb=/^(?:a|area)$/i;l.fn.extend({prop:function(n,i){return Tt(this,l.prop,n,i,arguments.length>1)},removeProp:function(n){return this.each(function(){delete this[l.propFix[n]||n]})}}),l.extend({prop:function(n,i,u){var h,m,w=n.nodeType;if(!(w===3||w===8||w===2))return(w!==1||!l.isXMLDoc(n))&&(i=l.propFix[i]||i,m=l.propHooks[i]),u!==void 0?m&&"set"in m&&(h=m.set(n,u,i))!==void 0?h:n[i]=u:m&&"get"in m&&(h=m.get(n,i))!==null?h:n[i]},propHooks:{tabIndex:{get:function(n){var i=l.find.attr(n,"tabindex");return i?parseInt(i,10):Rb.test(n.nodeName)||Mb.test(n.nodeName)&&n.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),S.optSelected||(l.propHooks.selected={get:function(n){var i=n.parentNode;return i&&i.parentNode&&i.parentNode.selectedIndex,null},set:function(n){var i=n.parentNode;i&&(i.selectedIndex,i.parentNode&&i.parentNode.selectedIndex)}}),l.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){l.propFix[this.toLowerCase()]=this});function tn(n){var i=n.match(fe)||[];return i.join(" ")}function rn(n){return n.getAttribute&&n.getAttribute("class")||""}function Oo(n){return Array.isArray(n)?n:typeof n=="string"?n.match(fe)||[]:[]}l.fn.extend({addClass:function(n){var i,u,h,m,w,A;return T(n)?this.each(function(R){l(this).addClass(n.call(this,R,rn(this)))}):(i=Oo(n),i.length?this.each(function(){if(h=rn(this),u=this.nodeType===1&&" "+tn(h)+" ",u){for(w=0;w<i.length;w++)m=i[w],u.indexOf(" "+m+" ")<0&&(u+=m+" ");A=tn(u),h!==A&&this.setAttribute("class",A)}}):this)},removeClass:function(n){var i,u,h,m,w,A;return T(n)?this.each(function(R){l(this).removeClass(n.call(this,R,rn(this)))}):arguments.length?(i=Oo(n),i.length?this.each(function(){if(h=rn(this),u=this.nodeType===1&&" "+tn(h)+" ",u){for(w=0;w<i.length;w++)for(m=i[w];u.indexOf(" "+m+" ")>-1;)u=u.replace(" "+m+" "," ");A=tn(u),h!==A&&this.setAttribute("class",A)}}):this):this.attr("class","")},toggleClass:function(n,i){var u,h,m,w,A=typeof n,R=A==="string"||Array.isArray(n);return T(n)?this.each(function(L){l(this).toggleClass(n.call(this,L,rn(this),i),i)}):typeof i=="boolean"&&R?i?this.addClass(n):this.removeClass(n):(u=Oo(n),this.each(function(){if(R)for(w=l(this),m=0;m<u.length;m++)h=u[m],w.hasClass(h)?w.removeClass(h):w.addClass(h);else(n===void 0||A==="boolean")&&(h=rn(this),h&&ce.set(this,"__className__",h),this.setAttribute&&this.setAttribute("class",h||n===!1?"":ce.get(this,"__className__")||""))}))},hasClass:function(n){var i,u,h=0;for(i=" "+n+" ";u=this[h++];)if(u.nodeType===1&&(" "+tn(rn(u))+" ").indexOf(i)>-1)return!0;return!1}});var $b=/\r/g;l.fn.extend({val:function(n){var i,u,h,m=this[0];return arguments.length?(h=T(n),this.each(function(w){var A;this.nodeType===1&&(h?A=n.call(this,w,l(this).val()):A=n,A==null?A="":typeof A=="number"?A+="":Array.isArray(A)&&(A=l.map(A,function(R){return R==null?"":R+""})),i=l.valHooks[this.type]||l.valHooks[this.nodeName.toLowerCase()],(!i||!("set"in i)||i.set(this,A,"value")===void 0)&&(this.value=A))})):m?(i=l.valHooks[m.type]||l.valHooks[m.nodeName.toLowerCase()],i&&"get"in i&&(u=i.get(m,"value"))!==void 0?u:(u=m.value,typeof u=="string"?u.replace($b,""):u??"")):void 0}}),l.extend({valHooks:{option:{get:function(n){var i=l.find.attr(n,"value");return i??tn(l.text(n))}},select:{get:function(n){var i,u,h,m=n.options,w=n.selectedIndex,A=n.type==="select-one",R=A?null:[],L=A?w+1:m.length;for(w<0?h=L:h=A?w:0;h<L;h++)if(u=m[h],(u.selected||h===w)&&!u.disabled&&(!u.parentNode.disabled||!$(u.parentNode,"optgroup"))){if(i=l(u).val(),A)return i;R.push(i)}return R},set:function(n,i){for(var u,h,m=n.options,w=l.makeArray(i),A=m.length;A--;)h=m[A],(h.selected=l.inArray(l.valHooks.option.get(h),w)>-1)&&(u=!0);return u||(n.selectedIndex=-1),w}}}}),l.each(["radio","checkbox"],function(){l.valHooks[this]={set:function(n,i){if(Array.isArray(i))return n.checked=l.inArray(l(n).val(),i)>-1}},S.checkOn||(l.valHooks[this].get=function(n){return n.getAttribute("value")===null?"on":n.value})});var la=r.location,dd={guid:Date.now()},Lo=/\?/;l.parseXML=function(n){var i,u;if(!n||typeof n!="string")return null;try{i=new r.DOMParser().parseFromString(n,"text/xml")}catch{}return u=i&&i.getElementsByTagName("parsererror")[0],(!i||u)&&l.error("Invalid XML: "+(u?l.map(u.childNodes,function(h){return h.textContent}).join(`
`):n)),i};var hd=/^(?:focusinfocus|focusoutblur)$/,pd=function(n){n.stopPropagation()};l.extend(l.event,{trigger:function(n,i,u,h){var m,w,A,R,L,N,G,V,z=[u||y],te=_.call(n,"type")?n.type:n,me=_.call(n,"namespace")?n.namespace.split("."):[];if(w=V=A=u=u||y,!(u.nodeType===3||u.nodeType===8)&&!hd.test(te+l.event.triggered)&&(te.indexOf(".")>-1&&(me=te.split("."),te=me.shift(),me.sort()),L=te.indexOf(":")<0&&"on"+te,n=n[l.expando]?n:new l.Event(te,typeof n=="object"&&n),n.isTrigger=h?2:3,n.namespace=me.join("."),n.rnamespace=n.namespace?new RegExp("(^|\\.)"+me.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=void 0,n.target||(n.target=u),i=i==null?[n]:l.makeArray(i,[n]),G=l.event.special[te]||{},!(!h&&G.trigger&&G.trigger.apply(u,i)===!1))){if(!h&&!G.noBubble&&!v(u)){for(R=G.delegateType||te,hd.test(R+te)||(w=w.parentNode);w;w=w.parentNode)z.push(w),A=w;A===(u.ownerDocument||y)&&z.push(A.defaultView||A.parentWindow||r)}for(m=0;(w=z[m++])&&!n.isPropagationStopped();)V=w,n.type=m>1?R:G.bindType||te,N=(ce.get(w,"events")||Object.create(null))[n.type]&&ce.get(w,"handle"),N&&N.apply(w,i),N=L&&w[L],N&&N.apply&&qt(w)&&(n.result=N.apply(w,i),n.result===!1&&n.preventDefault());return n.type=te,!h&&!n.isDefaultPrevented()&&(!G._default||G._default.apply(z.pop(),i)===!1)&&qt(u)&&L&&T(u[te])&&!v(u)&&(A=u[L],A&&(u[L]=null),l.event.triggered=te,n.isPropagationStopped()&&V.addEventListener(te,pd),u[te](),n.isPropagationStopped()&&V.removeEventListener(te,pd),l.event.triggered=void 0,A&&(u[L]=A)),n.result}},simulate:function(n,i,u){var h=l.extend(new l.Event,u,{type:n,isSimulated:!0});l.event.trigger(h,null,i)}}),l.fn.extend({trigger:function(n,i){return this.each(function(){l.event.trigger(n,i,this)})},triggerHandler:function(n,i){var u=this[0];if(u)return l.event.trigger(n,i,u,!0)}});var Pb=/\[\]$/,gd=/\r?\n/g,jb=/^(?:submit|button|image|reset|file)$/i,Nb=/^(?:input|select|textarea|keygen)/i;function Do(n,i,u,h){var m;if(Array.isArray(i))l.each(i,function(w,A){u||Pb.test(n)?h(n,A):Do(n+"["+(typeof A=="object"&&A!=null?w:"")+"]",A,u,h)});else if(!u&&E(i)==="object")for(m in i)Do(n+"["+m+"]",i[m],u,h);else h(n,i)}l.param=function(n,i){var u,h=[],m=function(w,A){var R=T(A)?A():A;h[h.length]=encodeURIComponent(w)+"="+encodeURIComponent(R??"")};if(n==null)return"";if(Array.isArray(n)||n.jquery&&!l.isPlainObject(n))l.each(n,function(){m(this.name,this.value)});else for(u in n)Do(u,n[u],i,m);return h.join("&")},l.fn.extend({serialize:function(){return l.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var n=l.prop(this,"elements");return n?l.makeArray(n):this}).filter(function(){var n=this.type;return this.name&&!l(this).is(":disabled")&&Nb.test(this.nodeName)&&!jb.test(n)&&(this.checked||!Mt.test(n))}).map(function(n,i){var u=l(this).val();return u==null?null:Array.isArray(u)?l.map(u,function(h){return{name:i.name,value:h.replace(gd,`\r
`)}}):{name:i.name,value:u.replace(gd,`\r
`)}}).get()}});var qb=/%20/g,Fb=/#.*$/,Ub=/([?&])_=[^&]*/,Bb=/^(.*?):[ \t]*([^\r\n]*)$/mg,zb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Hb=/^(?:GET|HEAD)$/,Wb=/^\/\//,md={},Ro={},wd="*/".concat("*"),Mo=y.createElement("a");Mo.href=la.href;function yd(n){return function(i,u){typeof i!="string"&&(u=i,i="*");var h,m=0,w=i.toLowerCase().match(fe)||[];if(T(u))for(;h=w[m++];)h[0]==="+"?(h=h.slice(1)||"*",(n[h]=n[h]||[]).unshift(u)):(n[h]=n[h]||[]).push(u)}}function vd(n,i,u,h){var m={},w=n===Ro;function A(R){var L;return m[R]=!0,l.each(n[R]||[],function(N,G){var V=G(i,u,h);if(typeof V=="string"&&!w&&!m[V])return i.dataTypes.unshift(V),A(V),!1;if(w)return!(L=V)}),L}return A(i.dataTypes[0])||!m["*"]&&A("*")}function $o(n,i){var u,h,m=l.ajaxSettings.flatOptions||{};for(u in i)i[u]!==void 0&&((m[u]?n:h||(h={}))[u]=i[u]);return h&&l.extend(!0,n,h),n}function Yb(n,i,u){for(var h,m,w,A,R=n.contents,L=n.dataTypes;L[0]==="*";)L.shift(),h===void 0&&(h=n.mimeType||i.getResponseHeader("Content-Type"));if(h){for(m in R)if(R[m]&&R[m].test(h)){L.unshift(m);break}}if(L[0]in u)w=L[0];else{for(m in u){if(!L[0]||n.converters[m+" "+L[0]]){w=m;break}A||(A=m)}w=w||A}if(w)return w!==L[0]&&L.unshift(w),u[w]}function Gb(n,i,u,h){var m,w,A,R,L,N={},G=n.dataTypes.slice();if(G[1])for(A in n.converters)N[A.toLowerCase()]=n.converters[A];for(w=G.shift();w;)if(n.responseFields[w]&&(u[n.responseFields[w]]=i),!L&&h&&n.dataFilter&&(i=n.dataFilter(i,n.dataType)),L=w,w=G.shift(),w){if(w==="*")w=L;else if(L!=="*"&&L!==w){if(A=N[L+" "+w]||N["* "+w],!A){for(m in N)if(R=m.split(" "),R[1]===w&&(A=N[L+" "+R[0]]||N["* "+R[0]],A)){A===!0?A=N[m]:N[m]!==!0&&(w=R[0],G.unshift(R[1]));break}}if(A!==!0)if(A&&n.throws)i=A(i);else try{i=A(i)}catch(V){return{state:"parsererror",error:A?V:"No conversion from "+L+" to "+w}}}}return{state:"success",data:i}}l.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:la.href,type:"GET",isLocal:zb.test(la.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":l.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,i){return i?$o($o(n,l.ajaxSettings),i):$o(l.ajaxSettings,n)},ajaxPrefilter:yd(md),ajaxTransport:yd(Ro),ajax:function(n,i){typeof n=="object"&&(i=n,n=void 0),i=i||{};var u,h,m,w,A,R,L,N,G,V,z=l.ajaxSetup({},i),te=z.context||z,me=z.context&&(te.nodeType||te.jquery)?l(te):l.event,Le=l.Deferred(),_e=l.Callbacks("once memory"),pt=z.statusCode||{},nt={},nr={},ar="canceled",Ie={readyState:0,getResponseHeader:function(Me){var Je;if(L){if(!w)for(w={};Je=Bb.exec(m);)w[Je[1].toLowerCase()+" "]=(w[Je[1].toLowerCase()+" "]||[]).concat(Je[2]);Je=w[Me.toLowerCase()+" "]}return Je==null?null:Je.join(", ")},getAllResponseHeaders:function(){return L?m:null},setRequestHeader:function(Me,Je){return L==null&&(Me=nr[Me.toLowerCase()]=nr[Me.toLowerCase()]||Me,nt[Me]=Je),this},overrideMimeType:function(Me){return L==null&&(z.mimeType=Me),this},statusCode:function(Me){var Je;if(Me)if(L)Ie.always(Me[Ie.status]);else for(Je in Me)pt[Je]=[pt[Je],Me[Je]];return this},abort:function(Me){var Je=Me||ar;return u&&u.abort(Je),nn(0,Je),this}};if(Le.promise(Ie),z.url=((n||z.url||la.href)+"").replace(Wb,la.protocol+"//"),z.type=i.method||i.type||z.method||z.type,z.dataTypes=(z.dataType||"*").toLowerCase().match(fe)||[""],z.crossDomain==null){R=y.createElement("a");try{R.href=z.url,R.href=R.href,z.crossDomain=Mo.protocol+"//"+Mo.host!=R.protocol+"//"+R.host}catch{z.crossDomain=!0}}if(z.data&&z.processData&&typeof z.data!="string"&&(z.data=l.param(z.data,z.traditional)),vd(md,z,i,Ie),L)return Ie;N=l.event&&z.global,N&&l.active++===0&&l.event.trigger("ajaxStart"),z.type=z.type.toUpperCase(),z.hasContent=!Hb.test(z.type),h=z.url.replace(Fb,""),z.hasContent?z.data&&z.processData&&(z.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(z.data=z.data.replace(qb,"+")):(V=z.url.slice(h.length),z.data&&(z.processData||typeof z.data=="string")&&(h+=(Lo.test(h)?"&":"?")+z.data,delete z.data),z.cache===!1&&(h=h.replace(Ub,"$1"),V=(Lo.test(h)?"&":"?")+"_="+dd.guid+++V),z.url=h+V),z.ifModified&&(l.lastModified[h]&&Ie.setRequestHeader("If-Modified-Since",l.lastModified[h]),l.etag[h]&&Ie.setRequestHeader("If-None-Match",l.etag[h])),(z.data&&z.hasContent&&z.contentType!==!1||i.contentType)&&Ie.setRequestHeader("Content-Type",z.contentType),Ie.setRequestHeader("Accept",z.dataTypes[0]&&z.accepts[z.dataTypes[0]]?z.accepts[z.dataTypes[0]]+(z.dataTypes[0]!=="*"?", "+wd+"; q=0.01":""):z.accepts["*"]);for(G in z.headers)Ie.setRequestHeader(G,z.headers[G]);if(z.beforeSend&&(z.beforeSend.call(te,Ie,z)===!1||L))return Ie.abort();if(ar="abort",_e.add(z.complete),Ie.done(z.success),Ie.fail(z.error),u=vd(Ro,z,i,Ie),!u)nn(-1,"No Transport");else{if(Ie.readyState=1,N&&me.trigger("ajaxSend",[Ie,z]),L)return Ie;z.async&&z.timeout>0&&(A=r.setTimeout(function(){Ie.abort("timeout")},z.timeout));try{L=!1,u.send(nt,nn)}catch(Me){if(L)throw Me;nn(-1,Me)}}function nn(Me,Je,ca,jo){var ir,fa,sr,Dr,Rr,zt=Je;L||(L=!0,A&&r.clearTimeout(A),u=void 0,m=jo||"",Ie.readyState=Me>0?4:0,ir=Me>=200&&Me<300||Me===304,ca&&(Dr=Yb(z,Ie,ca)),!ir&&l.inArray("script",z.dataTypes)>-1&&l.inArray("json",z.dataTypes)<0&&(z.converters["text script"]=function(){}),Dr=Gb(z,Dr,Ie,ir),ir?(z.ifModified&&(Rr=Ie.getResponseHeader("Last-Modified"),Rr&&(l.lastModified[h]=Rr),Rr=Ie.getResponseHeader("etag"),Rr&&(l.etag[h]=Rr)),Me===204||z.type==="HEAD"?zt="nocontent":Me===304?zt="notmodified":(zt=Dr.state,fa=Dr.data,sr=Dr.error,ir=!sr)):(sr=zt,(Me||!zt)&&(zt="error",Me<0&&(Me=0))),Ie.status=Me,Ie.statusText=(Je||zt)+"",ir?Le.resolveWith(te,[fa,zt,Ie]):Le.rejectWith(te,[Ie,zt,sr]),Ie.statusCode(pt),pt=void 0,N&&me.trigger(ir?"ajaxSuccess":"ajaxError",[Ie,z,ir?fa:sr]),_e.fireWith(te,[Ie,zt]),N&&(me.trigger("ajaxComplete",[Ie,z]),--l.active||l.event.trigger("ajaxStop")))}return Ie},getJSON:function(n,i,u){return l.get(n,i,u,"json")},getScript:function(n,i){return l.get(n,void 0,i,"script")}}),l.each(["get","post"],function(n,i){l[i]=function(u,h,m,w){return T(h)&&(w=w||m,m=h,h=void 0),l.ajax(l.extend({url:u,type:i,dataType:w,data:h,success:m},l.isPlainObject(u)&&u))}}),l.ajaxPrefilter(function(n){var i;for(i in n.headers)i.toLowerCase()==="content-type"&&(n.contentType=n.headers[i]||"")}),l._evalUrl=function(n,i,u){return l.ajax({url:n,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(h){l.globalEval(h,i,u)}})},l.fn.extend({wrapAll:function(n){var i;return this[0]&&(T(n)&&(n=n.call(this[0])),i=l(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&i.insertBefore(this[0]),i.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(n){return T(n)?this.each(function(i){l(this).wrapInner(n.call(this,i))}):this.each(function(){var i=l(this),u=i.contents();u.length?u.wrapAll(n):i.append(n)})},wrap:function(n){var i=T(n);return this.each(function(u){l(this).wrapAll(i?n.call(this,u):n)})},unwrap:function(n){return this.parent(n).not("body").each(function(){l(this).replaceWith(this.childNodes)}),this}}),l.expr.pseudos.hidden=function(n){return!l.expr.pseudos.visible(n)},l.expr.pseudos.visible=function(n){return!!(n.offsetWidth||n.offsetHeight||n.getClientRects().length)},l.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch{}};var Qb={0:200,1223:204},ua=l.ajaxSettings.xhr();S.cors=!!ua&&"withCredentials"in ua,S.ajax=ua=!!ua,l.ajaxTransport(function(n){var i,u;if(S.cors||ua&&!n.crossDomain)return{send:function(h,m){var w,A=n.xhr();if(A.open(n.type,n.url,n.async,n.username,n.password),n.xhrFields)for(w in n.xhrFields)A[w]=n.xhrFields[w];n.mimeType&&A.overrideMimeType&&A.overrideMimeType(n.mimeType),!n.crossDomain&&!h["X-Requested-With"]&&(h["X-Requested-With"]="XMLHttpRequest");for(w in h)A.setRequestHeader(w,h[w]);i=function(R){return function(){i&&(i=u=A.onload=A.onerror=A.onabort=A.ontimeout=A.onreadystatechange=null,R==="abort"?A.abort():R==="error"?typeof A.status!="number"?m(0,"error"):m(A.status,A.statusText):m(Qb[A.status]||A.status,A.statusText,(A.responseType||"text")!=="text"||typeof A.responseText!="string"?{binary:A.response}:{text:A.responseText},A.getAllResponseHeaders()))}},A.onload=i(),u=A.onerror=A.ontimeout=i("error"),A.onabort!==void 0?A.onabort=u:A.onreadystatechange=function(){A.readyState===4&&r.setTimeout(function(){i&&u()})},i=i("abort");try{A.send(n.hasContent&&n.data||null)}catch(R){if(i)throw R}},abort:function(){i&&i()}}}),l.ajaxPrefilter(function(n){n.crossDomain&&(n.contents.script=!1)}),l.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(n){return l.globalEval(n),n}}}),l.ajaxPrefilter("script",function(n){n.cache===void 0&&(n.cache=!1),n.crossDomain&&(n.type="GET")}),l.ajaxTransport("script",function(n){if(n.crossDomain||n.scriptAttrs){var i,u;return{send:function(h,m){i=l("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",u=function(w){i.remove(),u=null,w&&m(w.type==="error"?404:200,w.type)}),y.head.appendChild(i[0])},abort:function(){u&&u()}}}});var xd=[],Po=/(=)\?(?=&|$)|\?\?/;l.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var n=xd.pop()||l.expando+"_"+dd.guid++;return this[n]=!0,n}}),l.ajaxPrefilter("json jsonp",function(n,i,u){var h,m,w,A=n.jsonp!==!1&&(Po.test(n.url)?"url":typeof n.data=="string"&&(n.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Po.test(n.data)&&"data");if(A||n.dataTypes[0]==="jsonp")return h=n.jsonpCallback=T(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,A?n[A]=n[A].replace(Po,"$1"+h):n.jsonp!==!1&&(n.url+=(Lo.test(n.url)?"&":"?")+n.jsonp+"="+h),n.converters["script json"]=function(){return w||l.error(h+" was not called"),w[0]},n.dataTypes[0]="json",m=r[h],r[h]=function(){w=arguments},u.always(function(){m===void 0?l(r).removeProp(h):r[h]=m,n[h]&&(n.jsonpCallback=i.jsonpCallback,xd.push(h)),w&&T(m)&&m(w[0]),w=m=void 0}),"script"}),S.createHTMLDocument=(function(){var n=y.implementation.createHTMLDocument("").body;return n.innerHTML="<form></form><form></form>",n.childNodes.length===2})(),l.parseHTML=function(n,i,u){if(typeof n!="string")return[];typeof i=="boolean"&&(u=i,i=!1);var h,m,w;return i||(S.createHTMLDocument?(i=y.implementation.createHTMLDocument(""),h=i.createElement("base"),h.href=y.location.href,i.head.appendChild(h)):i=y),m=Re.exec(n),w=!u&&[],m?[i.createElement(m[1])]:(m=ea([n],i,w),w&&w.length&&l(w).remove(),l.merge([],m.childNodes))},l.fn.load=function(n,i,u){var h,m,w,A=this,R=n.indexOf(" ");return R>-1&&(h=tn(n.slice(R)),n=n.slice(0,R)),T(i)?(u=i,i=void 0):i&&typeof i=="object"&&(m="POST"),A.length>0&&l.ajax({url:n,type:m||"GET",dataType:"html",data:i}).done(function(L){w=arguments,A.html(h?l("<div>").append(l.parseHTML(L)).find(h):L)}).always(u&&function(L,N){A.each(function(){u.apply(this,w||[L.responseText,N,L])})}),this},l.expr.pseudos.animated=function(n){return l.grep(l.timers,function(i){return n===i.elem}).length},l.offset={setOffset:function(n,i,u){var h,m,w,A,R,L,N,G=l.css(n,"position"),V=l(n),z={};G==="static"&&(n.style.position="relative"),R=V.offset(),w=l.css(n,"top"),L=l.css(n,"left"),N=(G==="absolute"||G==="fixed")&&(w+L).indexOf("auto")>-1,N?(h=V.position(),A=h.top,m=h.left):(A=parseFloat(w)||0,m=parseFloat(L)||0),T(i)&&(i=i.call(n,u,l.extend({},R))),i.top!=null&&(z.top=i.top-R.top+A),i.left!=null&&(z.left=i.left-R.left+m),"using"in i?i.using.call(n,z):V.css(z)}},l.fn.extend({offset:function(n){if(arguments.length)return n===void 0?this:this.each(function(m){l.offset.setOffset(this,n,m)});var i,u,h=this[0];if(h)return h.getClientRects().length?(i=h.getBoundingClientRect(),u=h.ownerDocument.defaultView,{top:i.top+u.pageYOffset,left:i.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var n,i,u,h=this[0],m={top:0,left:0};if(l.css(h,"position")==="fixed")i=h.getBoundingClientRect();else{for(i=this.offset(),u=h.ownerDocument,n=h.offsetParent||u.documentElement;n&&(n===u.body||n===u.documentElement)&&l.css(n,"position")==="static";)n=n.parentNode;n&&n!==h&&n.nodeType===1&&(m=l(n).offset(),m.top+=l.css(n,"borderTopWidth",!0),m.left+=l.css(n,"borderLeftWidth",!0))}return{top:i.top-m.top-l.css(h,"marginTop",!0),left:i.left-m.left-l.css(h,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var n=this.offsetParent;n&&l.css(n,"position")==="static";)n=n.offsetParent;return n||Ut})}}),l.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(n,i){var u=i==="pageYOffset";l.fn[n]=function(h){return Tt(this,function(m,w,A){var R;if(v(m)?R=m:m.nodeType===9&&(R=m.defaultView),A===void 0)return R?R[i]:m[w];R?R.scrollTo(u?R.pageXOffset:A,u?A:R.pageYOffset):m[w]=A},n,h,arguments.length)}}),l.each(["top","left"],function(n,i){l.cssHooks[i]=rd(S.pixelPosition,function(u,h){if(h)return h=sa(u,i),Lr.test(h)?l(u).position()[i]+"px":h})}),l.each({Height:"height",Width:"width"},function(n,i){l.each({padding:"inner"+n,content:i,"":"outer"+n},function(u,h){l.fn[h]=function(m,w){var A=arguments.length&&(u||typeof m!="boolean"),R=u||(m===!0||w===!0?"margin":"border");return Tt(this,function(L,N,G){var V;return v(L)?h.indexOf("outer")===0?L["inner"+n]:L.document.documentElement["client"+n]:L.nodeType===9?(V=L.documentElement,Math.max(L.body["scroll"+n],V["scroll"+n],L.body["offset"+n],V["offset"+n],V["client"+n])):G===void 0?l.css(L,N,R):l.style(L,N,G,R)},i,A?m:void 0,A)}})}),l.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,i){l.fn[i]=function(u){return this.on(i,u)}}),l.fn.extend({bind:function(n,i,u){return this.on(n,null,i,u)},unbind:function(n,i){return this.off(n,null,i)},delegate:function(n,i,u,h){return this.on(i,n,u,h)},undelegate:function(n,i,u){return arguments.length===1?this.off(n,"**"):this.off(i,n||"**",u)},hover:function(n,i){return this.on("mouseenter",n).on("mouseleave",i||n)}}),l.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(n,i){l.fn[i]=function(u,h){return arguments.length>0?this.on(i,null,u,h):this.trigger(i)}});var Kb=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;l.proxy=function(n,i){var u,h,m;if(typeof i=="string"&&(u=n[i],i=n,n=u),!!T(n))return h=o.call(arguments,2),m=function(){return n.apply(i||this,h.concat(o.call(arguments)))},m.guid=n.guid=n.guid||l.guid++,m},l.holdReady=function(n){n?l.readyWait++:l.ready(!0)},l.isArray=Array.isArray,l.parseJSON=JSON.parse,l.nodeName=$,l.isFunction=T,l.isWindow=v,l.camelCase=dt,l.type=E,l.now=Date.now,l.isNumeric=function(n){var i=l.type(n);return(i==="number"||i==="string")&&!isNaN(n-parseFloat(n))},l.trim=function(n){return n==null?"":(n+"").replace(Kb,"$1")};var Zb=r.jQuery,Vb=r.$;return l.noConflict=function(n){return r.$===l&&(r.$=Vb),n&&r.jQuery===l&&(r.jQuery=Zb),l},typeof t>"u"&&(r.jQuery=r.$=l),l})})(Wa)),Wa.exports}V0();function X0(e){const r=gw();if(!r||r<119)return"";e.partitionKey={topLevelSite:"https://1688.com"},r>=130&&(e.partitionKey.hasCrossSiteAncestor=!1)}var fo={},ho={},Ya={},po={exports:{}},wf;function J0(){return wf||(wf=1,(function(e){e.exports=r,r.defunct=function(t){throw new Error("Unexpected character at index "+(this.index-1)+": "+t)};function r(t){typeof t!="function"&&(t=r.defunct);var a=[],s=[],o=0;this.state=0,this.index=0,this.input="",this.addRule=function(d,g,f){var p=d.global;if(!p){var _="g";d.multiline&&(_+="m"),d.ignoreCase&&(_+="i"),d=new RegExp(d.source,_)}return Object.prototype.toString.call(f)!=="[object Array]"&&(f=[0]),s.push({pattern:d,global:p,action:g,start:f}),this},this.setInput=function(d){return o=0,this.state=0,this.index=0,a.length=0,this.input=d,this},this.lex=function(){if(a.length)return a.shift();for(this.reject=!0;this.index<=this.input.length;){for(var d=c.call(this).splice(o),g=this.index;d.length&&this.reject;){var f=d.shift(),p=f.result,_=f.length;this.index+=_,this.reject=!1,o++;var b=f.action.apply(this,p);if(this.reject)this.index=p.index;else if(typeof b<"u")switch(Object.prototype.toString.call(b)){case"[object Array]":a=b.slice(1),b=b[0];default:return _&&(o=0),b}}var x=this.input;if(g<x.length)if(this.reject){o=0;var b=t.call(this,x.charAt(this.index++));if(typeof b<"u")return Object.prototype.toString.call(b)==="[object Array]"?(a=b.slice(1),b[0]):b}else this.index!==g&&(o=0),this.reject=!0;else if(d.length)this.reject=!0;else break}};function c(){for(var d=[],g=0,f=this.state,p=this.index,_=this.input,b=0,x=s.length;b<x;b++){var S=s[b],T=S.start,v=T.length;if(!v||T.indexOf(f)>=0||f%2&&v===1&&!T[0]){var y=S.pattern;y.lastIndex=p;var k=y.exec(_);if(k&&k.index===p){var I=d.push({result:k,action:S.action,length:k[0].length});for(S.global&&(g=I);--I>g;){var E=I-1;if(d[I].length>d[E].length){var M=d[I];d[I]=d[E],d[E]=M}}}}}return d}}})(po)),po.exports}var Ga={exports:{}},yf={};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var vf;function ex(){return vf||(vf=1,String.fromCodePoint||(function(){var e=(function(){try{var s={},o=Object.defineProperty,c=o(s,s,s)&&o}catch{}return c})(),r=String.fromCharCode,t=Math.floor,a=function(s){var o=16384,c=[],d,g,f=-1,p=arguments.length;if(!p)return"";for(var _="";++f<p;){var b=Number(arguments[f]);if(!isFinite(b)||b<0||b>1114111||t(b)!=b)throw RangeError("Invalid code point: "+b);b<=65535?c.push(b):(b-=65536,d=(b>>10)+55296,g=b%1024+56320,c.push(d,g)),(f+1==p||c.length>o)&&(_+=r.apply(null,c),c.length=0)}return _};e?e(String,"fromCodePoint",{value:a,configurable:!0,writable:!0}):String.fromCodePoint=a})()),yf}var xf;function tx(){return xf||(xf=1,(function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,ex();var t=/\\(u\{([0-9A-Fa-f]+)\}|u([0-9A-Fa-f]{4})|x([0-9A-Fa-f]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|(['"tbrnfv0\\]))|\\U([0-9A-Fa-f]{8})/g,a={0:"\0",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","'":"'",'"':'"',"\\":"\\"},s=function(g){return String.fromCodePoint(parseInt(g,16))},o=function(g){return String.fromCodePoint(parseInt(g,8))},c=function(g){return g.replace(t,function(f,p,_,b,x,S,T,v){return _!==void 0?s(_):b!==void 0?s(b):x!==void 0?s(x):S!==void 0?o(S):v!==void 0?s(v):a[T]})};r.default=c,e.exports=r.default})(Ga,Ga.exports)),Ga.exports}var go={};/*! https://mths.be/utf8js v3.0.0 by @mathias */var bf;function rx(){return bf||(bf=1,(function(e){(function(r){var t=String.fromCharCode;function a(T){for(var v=[],y=0,k=T.length,I,E;y<k;)I=T.charCodeAt(y++),I>=55296&&I<=56319&&y<k?(E=T.charCodeAt(y++),(E&64512)==56320?v.push(((I&1023)<<10)+(E&1023)+65536):(v.push(I),y--)):v.push(I);return v}function s(T){for(var v=T.length,y=-1,k,I="";++y<v;)k=T[y],k>65535&&(k-=65536,I+=t(k>>>10&1023|55296),k=56320|k&1023),I+=t(k);return I}function o(T){if(T>=55296&&T<=57343)throw Error("Lone surrogate U+"+T.toString(16).toUpperCase()+" is not a scalar value")}function c(T,v){return t(T>>v&63|128)}function d(T){if((T&4294967168)==0)return t(T);var v="";return(T&4294965248)==0?v=t(T>>6&31|192):(T&4294901760)==0?(o(T),v=t(T>>12&15|224),v+=c(T,6)):(T&4292870144)==0&&(v=t(T>>18&7|240),v+=c(T,12),v+=c(T,6)),v+=t(T&63|128),v}function g(T){for(var v=a(T),y=v.length,k=-1,I,E="";++k<y;)I=v[k],E+=d(I);return E}function f(){if(x>=b)throw Error("Invalid byte index");var T=_[x]&255;if(x++,(T&192)==128)return T&63;throw Error("Invalid continuation byte")}function p(){var T,v,y,k,I;if(x>b)throw Error("Invalid byte index");if(x==b)return!1;if(T=_[x]&255,x++,(T&128)==0)return T;if((T&224)==192){if(v=f(),I=(T&31)<<6|v,I>=128)return I;throw Error("Invalid continuation byte")}if((T&240)==224){if(v=f(),y=f(),I=(T&15)<<12|v<<6|y,I>=2048)return o(I),I;throw Error("Invalid continuation byte")}if((T&248)==240&&(v=f(),y=f(),k=f(),I=(T&7)<<18|v<<12|y<<6|k,I>=65536&&I<=1114111))return I;throw Error("Invalid UTF-8 detected")}var _,b,x;function S(T){_=a(T),b=_.length,x=0;for(var v=[],y;(y=p())!==!1;)v.push(y);return s(v)}r.version="3.0.0",r.encode=g,r.decode=S})(e)})(go)),go}var Tf;function nx(){if(Tf)return Ya;Tf=1;const e=J0(),r=tx();rx();const t=6,a=7,s=11,o=12,c=13,d=14,x=[[/\s*:\s*/,-1],[/\s*,\s*/,-2],[/\s*{\s*/,-3],[/\s*}\s*/,c],[/\s*\[\s*/,-4],[/\s*\]\s*/,o],[/\s*\.\s*/,-5]];function S(k){return k=k.replace(/\\\//,"/"),r(k)}function T(k){let I=new e,E=0,M=0;return I.addRule(/"((?:\\.|[^"])*?)($|")/,(D,l)=>(E+=D.length,{type:s,value:S(l),row:M,col:E,single:!1})),I.addRule(/'((?:\\.|[^'])*?)($|'|(",?[ \t]*\n))/,(D,l)=>(E+=D.length,{type:s,value:S(l),row:M,col:E,single:!0})),I.addRule(/[\-0-9]*\.[0-9]*([eE][\+\-]?)?[0-9]*(?:\s*)/,D=>(E+=D.length,{type:t,value:parseFloat(D),row:M,col:E})),I.addRule(/\-?[0-9]+([eE][\+\-]?)[0-9]*(?:\s*)/,D=>(E+=D.length,{type:t,value:parseFloat(D),row:M,col:E})),I.addRule(/\-?[0-9]+(?:\s*)/,D=>(E+=D.length,{type:a,value:parseInt(D),row:M,col:E})),x.forEach(D=>{I.addRule(D[0],l=>(E+=l.length,{type:D[1],value:l,row:M,col:E}))}),I.addRule(/\s/,D=>{D==`
`?(E=0,M++):E+=D.length}),I.addRule(/\S[ \t]*/,D=>(E+=D.length,{type:d,value:D,row:M,col:E})),I.setInput(k),I}Ya.lexString=v;function v(k,I){let E=T(k),M="";for(;M=E.lex();)I(M)}Ya.getAllTokens=y;function y(k){let I=[];return v(k,function(M){I.push(M)}),I}return Ya}var _f;function ax(){if(_f)return ho;_f=1;let e=nx();const r=0,t=1,a=2,s=3,o=4,c=5,d=6,g=7,f=8,p=9,_=10,b=11,x=12,S=13,T=14,v=15,y=-1,k=-2,I=-3,E=-4;function M(C){C.peek==null&&Object.defineProperty(C,"peek",{enumerable:!1,value:function(){return this[this.length-1]}}),C.last==null&&Object.defineProperty(C,"last",{enumerable:!1,value:function(F){return this[this.length-(1+F)]}})}function D(C,F){return C&&C.hasOwnProperty("type")&&C.type==F}function l(C){}ho.parse=j;function j(C,F){let Q=[],K=[];M(Q),M(K);let H=function(J){K.push(J)};e.lexString(C,H),K[0].type==E&&K.last(0).type!=x&&K.push({type:x,value:"]",row:-1,col:-1}),K[0].type==I&&K.last(0).type!=S&&K.push({type:S,value:"}",row:-1,col:-1});for(let J=0;J<K.length;J++)for(""+K[J].type,Q.push(K[J]);$(Q););return Q.length==1&&Q[0].type==t&&(Q=[{type:_,value:Q[0].value}]),q(Q[0],F)}function $(C){let F=C.pop();switch(F.type){case f:if(F.value.trim()=="true")return C.push({type:s,value:"true"}),!0;if(F.value.trim()=="false")return C.push({type:s,value:"false"}),!0;if(F.value.trim()=="null")return C.push({type:v,value:null}),!0;break;case T:return D(C.peek(),f)?(C.peek().value+=F.value,!0):(C.push({type:f,value:F.value}),!0);case g:return D(F,g)&&D(C.peek(),f)?(C.peek().value+=F.value,!0):(F.type=v,C.push(F),!0);case b:return F.type=v,F.value=F.value,C.push(F),!0;case s:return F.type=v,F.value=="true"?F.value=!0:F.value=!1,C.push(F),!0;case d:return F.type=v,C.push(F),!0;case v:if(D(C.peek(),k))return F.type=c,C.pop(),C.push(F),!0;if(D(C.peek(),y))return F.type=o,C.pop(),C.push(F),!0;if(D(C.peek(),f)&&D(C.last(1),v)){let Q=C.pop();return C.peek().value+='"'+Q.value+'"',C.peek().value+=F.value,!0}if(D(C.peek(),f)&&D(C.last(1),a)){let Q=C.pop(),K=C.peek().value.pop();return K+='"'+Q.value+'"',K+=F.value,C.peek().value.push(K),!0}if(D(C.peek(),f)&&D(C.last(1),t)){let Q=C.pop(),K=C.peek().value.pop();const H=F.single?"'":'"';return K.value+=H+Q.value+H,K.value+=F.value,C.peek().value.push(K),!0}if(D(C.peek(),f)){let Q=C.pop().value;return F.value=Q+F.value,C.push(F),!0}break;case p:if(D(F,p)&&D(C.peek(),k))return F.type=c,C.pop(),C.push(F),!0;if(D(C.peek(),y))return F.type=o,C.pop(),C.push(F),!0;break;case _:if(D(C.peek(),k)){let Q={type:c,value:F};return C.pop(),C.push(Q),!0}if(D(C.peek(),y)){let Q={type:o,value:F};return C.pop(),C.push(Q),!0}if(D(C.peek(),f)){let Q=C.pop();return C.push({type:r,key:Q.value.trim(),value:F}),!0}break;case c:return D(C.peek(),a)?(C.peek().value.push(F.value),!0):(C.push({type:a,value:[F.value]}),!0);case a:if(D(C.peek(),v)||D(C.peek(),p))return F.value.unshift(C.peek().value),C.pop(),C.push(F),!0;if(D(C.peek(),_))return F.value.unshift(C.peek()),C.pop(),C.push(F),!0;if(D(C.peek(),f)&&(C.last(1),k)){let Q=C.pop();for(C.push({type:v,value:Q.value}),""+Q.value;$(C););return C.push(F),!0}if(D(C.peek(),a))return C.peek().value.push(F.value[0]),!0;break;case o:if(D(C.peek(),f)||D(C.peek(),v)||D(C.peek(),a)){let Q=C.pop();return C.push({type:r,key:Q.value,value:F.value}),!0}throw new Error("Got a :value that can't be handled at line "+F.row+":"+F.col);case r:return D(C.last(0),k)&&D(C.last(1),t)?(C.last(1).value.push(F),C.pop(),!0):(C.push({type:t,value:[F]}),!0);case t:if(D(C.peek(),t))return F.value.forEach(function(Q){C.peek().value.push(Q)}),!0;break;case x:if(D(C.peek(),a)&&D(C.last(1),E)){let Q=C.pop();return C.pop(),C.push({type:p,value:Q.value}),!0}if(D(C.peek(),p)&&D(C.last(1),E)){let Q=C.pop();return C.pop(),C.push({type:p,value:[Q.value]}),!0}if(D(C.peek(),E))return C.pop(),C.push({type:p,value:[]}),!0;if(D(C.peek(),v)&&D(C.last(1),E)){let Q=C.pop().value;return C.pop(),C.push({type:p,value:[Q]}),!0}if(D(C.peek(),_)&&D(C.last(1),E)){let Q=C.pop();return C.pop(),C.push({type:p,value:[Q]}),!0}if(D(C.peek(),f)&&D(C.last(1),k)){let Q=C.pop();for(C.push({type:v,value:Q.value}),""+Q.value;$(C););return C.push({type:x}),!0}if(D(C.peek(),k)&&(D(C.last(1),f)||D(C.last(1),_)||D(C.last(1),v))){for(C.pop(),C.push({type:x,value:"]"}),""+JSON.stringify(C);$(C););return!0}if(D(C.peek(),f)&&D(C.last(1),E)){let Q=C.pop();return C.pop(),C.push({type:p,value:[Q.value]}),!0}if(D(C.peek(),k)&&D(C.last(1),a)){for(C.pop(),C.push({type:x}),""+JSON.stringify(C);$(C););return!0}break;case S:if(D(C.peek(),t)&&D(C.last(1),I)){let Q=C.pop();return C.pop(),C.push({type:_,value:Q.value}),!0}if(D(C.peek(),I))return C.pop(),C.push({type:_,value:null}),!0;if(D(C.peek(),f)&&D(C.last(1),y)){let Q=C.pop();for(C.push({type:v,value:Q.value}),""+Q.value;$(C););return C.push({type:S}),!0}if(D(C.peek(),y)){for(C.push({type:v,value:null});$(C););return C.push({type:S}),!0}if(D(C.peek(),k))return C.pop(),C.push({type:S}),!0;throw new Error("Found } that I can't handle at line "+F.row+":"+F.col);case k:if(D(C.peek(),k))return!0;if(D(C.peek(),f)){const Q=C.pop();for(C.push({type:v,value:Q.value});$(C););return C.push(F),!0}if(D(C.peek(),y)){for(C.push({type:v,value:null});$(C););return C.push(F),!0}}return C.push(F),!1}function q(C,F){if(["boolean","number","string"].indexOf(typeof C)!=-1)return C;if(C===null)return null;if(Array.isArray(C)){let K=[];for(;C.length>0;)K.unshift(q(C.pop()));return K}if(D(C,_)){let K={};return C.value===null?{}:(C.value.forEach(function(H){const J=H.key,ee=q(H.value);F&&J in K?K[J]={value:K[J],next:ee}:K[J]=ee}),K)}return D(C,p)?q(C.value):C.value}return ho}var Sf;function ix(){if(Sf)return fo;Sf=1;let e=ax();fo.parse=r;function r(t,a){let s=!0,o=!1;a&&("fallback"in a&&a[s]===!1&&(s=!1),o="duplicateKeys"in a&&a.duplicateKeys===!0);try{return e.parse(t,o)}catch(c){if(s===!1)throw c;try{let d=JSON.parse(t);return console.warn("dirty-json got valid JSON that failed with the custom parser. We're returning the valid JSON, but please file a bug report here: https://github.com/RyanMarcus/dirty-json/issues  -- the JSON that caused the failure was: "+t),d}catch{throw c}}}return fo}ix();/*! js-cookie v3.0.5 | MIT */function Qa(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)e[a]=t[a]}return e}var sx={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function mo(e,r){function t(s,o,c){if(!(typeof document>"u")){c=Qa({},r,c),typeof c.expires=="number"&&(c.expires=new Date(Date.now()+c.expires*864e5)),c.expires&&(c.expires=c.expires.toUTCString()),s=encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var d="";for(var g in c)c[g]&&(d+="; "+g,c[g]!==!0&&(d+="="+c[g].split(";")[0]));return document.cookie=s+"="+e.write(o,s)+d}}function a(s){if(!(typeof document>"u"||arguments.length&&!s)){for(var o=document.cookie?document.cookie.split("; "):[],c={},d=0;d<o.length;d++){var g=o[d].split("="),f=g.slice(1).join("=");try{var p=decodeURIComponent(g[0]);if(c[p]=e.read(f,p),s===p)break}catch{}}return s?c[s]:c}}return Object.create({set:t,get:a,remove:function(s,o){t(s,"",Qa({},o,{expires:-1}))},withAttributes:function(s){return mo(this.converter,Qa({},this.attributes,s))},withConverter:function(s){return mo(Qa({},this.converter,s),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}})}mo(sx,{path:"/"});const ox=()=>{const e=()=>({id:2,priority:999,action:{type:chrome.declarativeNetRequest.RuleActionType.REDIRECT,redirect:{transform:{queryTransform:{removeParams:["extId"],addOrReplaceParams:[{key:"extId",value:JSON.stringify(pw)}]}}}},condition:{tabIds:[],urlFilter:"||order.1688.com/order/smart_make_order.htm",resourceTypes:[chrome.declarativeNetRequest.ResourceType.MAIN_FRAME,chrome.declarativeNetRequest.ResourceType.SUB_FRAME]}});return{updateExtIdDynamicRules:async t=>{const a=e();if(a.condition.tabIds=[t],(await le.declarativeNetRequest.getSessionRules()).find(c=>c.id===a.id)){const d=(await le.tabs.query({})).map(f=>f.id),g=Array.from(new Set([...a.condition.tabIds,t]));a.condition.tabIds=tw(g,d)}return le.declarativeNetRequest.updateSessionRules({removeRuleIds:[a.id],addRules:[a]}).then(()=>le.declarativeNetRequest.getSessionRules())}}},lx=()=>{const e=["_m_h5_tk","_m_h5_tk_enc","mtop_partitioned_detect"];async function r(a,s=!1){const o={url:a};s&&X0(o);const c=await le.cookies.getAll(o),d=[];for(const g of c)e.includes(g.name)&&d.push(g);return d.length!==e.length&&!s?r(a,!0):d}async function t(a){if(!a)return;const s=await r(a);for(const o of s){const{name:c,value:d}=o;await le.cookies.set({url:a,name:c,value:d})}}return{fix1688MtopApiCookieToken:t}},{sendMessage:ux,onMessage:Qn}=Kt(),cx=()=>{const{createAutoCollect:e,updateAutoCollectResult:r,destroyAutoCollect:t,validatorAutoCollect:a,setTaskTabActive:s}=Jd(o=>{ux("collectProgress",{...o},o.tabId)});Qn("createAutoCollect",o=>e(o.sender.tab.id,o.data)),Qn("validatorAutoCollect",o=>a(o.sender.tab.id)),Qn("updateAutoCollectResult",o=>r(o.sender.tab.id,o.data)),Qn("destroyAutoCollect",o=>t(o.data)),Qn("setTaskTabActive",o=>s(o.data))},{sendMessage:fx,onMessage:Kn}=Kt(),dx=()=>{const{createAutoFetch:e,destroyAutoFetch:r,updateAutoFetchResult:t,validatorAutoFetch:a,setTaskTabActive:s}=th(o=>{fx("fetchProgress",{...o},o.tabId)});Kn("createAutoFetch",o=>e(o.sender.tab.id,o.data)),Kn("destroyAutoFetch",o=>r(o.data)),Kn("validatorAutoFetch",o=>a(o.sender.tab.id)),Kn("updateAutoFetchResult",o=>t(o.sender.tab.id,o.data)),Kn("setTaskTabActive",o=>s(o.data))},{sendMessage:vT,onMessage:hx}=Kt(),Ka=(e,r)=>()=>hx(e,t=>r(t.data)),px=Ka("getCookie",e=>new Promise(r=>{le.cookies.get(e,t=>{r(t)})})),gx=Ka("setCookie",e=>new Promise(r=>{le.cookies.set(e,t=>{r(t)})})),mx=Ka("removeCookie",e=>new Promise(r=>{le.cookies.remove(e,()=>{r()})})),wx=Ka("getAllCookies",e=>new Promise(r=>{le.cookies.getAll(e,t=>{r(t)})})),yx=()=>{px(),gx(),mx(),wx()},{sendMessage:xT,onMessage:vx}=Kt(),xx=()=>{vx("getSelf",()=>le.management.getSelf())},{sendMessage:bT,onMessage:Za}=Kt(),{startCrawlTask:bx,setCrawlTabId:Tx,crawlShop:_x,getCrawlInfo:Sx}=rh();function Ax(){return Za("startCrawlTask",async e=>{bx(e.data)})}function kx(){return Za("setCrawlTabId",async e=>{var r;Tx({crawlTabId:(r=e.sender.tab)==null?void 0:r.id,...e.data})})}function Cx(){return Za("crawlShop",async e=>{_x(e.data)})}function Ex(){return Za("getCrawlInfo",async e=>Sx(e.data))}function Ix(){Ax(),kx(),Cx(),Ex()}const{sendMessage:Ox,onMessage:wo}=Kt(),{updateExtIdDynamicRules:Lx}=ox(),Dx=()=>{wo("updateExtIdDynamicRules",e=>Lx(e.sender.tab.id))},{fix1688MtopApiCookieToken:Rx}=lx(),Mx=()=>{wo("fix1688MtopApiCookieToken",e=>Rx(e.data))},$x=()=>{Dx(),Mx(),wo("notifyPurchaseSuccess",async e=>{const r=e.data;return await Ox("purchaseSuccess",{...r},r.purchaseStartTabId)})},{sendMessage:TT,onMessage:Af}=Kt(),Px=()=>Af("plwFetch",e=>it(e.data)),jx=()=>Af("commonFetch",e=>Qr(e.data)),{sendMessage:_T,onMessage:kf}=Kt(),Va=(e,r)=>()=>kf(e,t=>r(t.data)),Nx=Va("queryTab",e=>le.tabs.query(e)),qx=Va("createTab",e=>le.tabs.create(e)),Fx=Va("getTab",e=>le.tabs.get(e)),Ux=Va("removeTab",e=>le.tabs.remove(e)),Bx=()=>{kf("senderTabInfo",e=>e.sender.tab)},zx=()=>{qx(),Ux(),Nx(),Fx(),Bx()},jt="https://erp.91miaoshou.com/api",Kr="https://sso.geiwohuo.com",Hx="gmt_order_delivery",Wx="gmt_settlement";async function Zr(e){const{url:r,data:t=null,type:a="POST"}=e||{},s={};a==="POST"?s.body=t&&JSON.stringify(t):s.params=t||void 0;const o=await Qr({url:r,method:a,headers:{"content-type":"application/json;charset=UTF-8"},...s}),c=o?o.msg:"";return(c?!+c.includes("子系统登录重定向"):1)?o:Promise.reject("未登录SHEIN后台")}function Cf(e,r){const t=new Date(e),a=new Date(t.toISOString()),s={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:r,hour12:!1},c=new Intl.DateTimeFormat("en-US",s).format(a),[d,g]=c.split(", "),[f,p,_]=d.split("/").map(T=>T.padStart(2,"0")),[b,x,S]=g.split(":").map(T=>T.padStart(2,"0"));return`${_}-${f}-${p} ${b}:${x}:${S}`}const yo="local:crawlSheinChoiceMallInfoList",Ef="local:crawlSheinChoiceTabId";let vo=class extends Error{constructor(t,a){super(t);ne(this,"sleepSeconds");this.name=this.constructor.name,this.sleepSeconds=a,Error.captureStackTrace(this,this.constructor)}};const Nt={isDebug:!1,crawlTabId:null,localData:{},crawlQueue:null};let Xa=class{constructor(r,t=null){ne(this,"earthUrlsMap",{updateCrawlRequestStatus:`${jt}/platform/shein_choice/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${jt}/platform/shein_choice/stat/crawl/init_crawl_request_detail`});ne(this,"mallId");ne(this,"requestId");ne(this,"crawlTaskKey");ne(this,"crawlTaskNameAndRetKey");ne(this,"crawlTaskNameAndLogKey");ne(this,"crawlTaskObj",{});ne(this,"crawlRequestIdAndTaskNameAndRetObj");ne(this,"crawlRequestIdAndTaskNameAndLogObj");this.mallId=r,this.requestId=t,this.crawlTaskKey=`crawl_shein_choice_task_${this.mallId}`,this.crawlTaskNameAndRetKey=`crawl_shein_choice_task_ret_${this.mallId}`,this.crawlTaskNameAndLogKey=`crawl_shein_choice_task_log_${this.mallId}`}async init(){this.crawlTaskObj=await yn(this.crawlTaskKey),this.crawlRequestIdAndTaskNameAndRetObj=await this.initCacheData(this.crawlTaskNameAndRetKey),this.crawlRequestIdAndTaskNameAndLogObj=await this.initCacheData(this.crawlTaskNameAndLogKey)}resetAllTaskCount(r){this.crawlTaskObj.status=null,this.crawlTaskObj.requestId=this.requestId,this.crawlTaskObj.allTaskCount=r,this.crawlTaskObj.finishTaskCount=0;for(const t in this.crawlRequestIdAndTaskNameAndRetObj){const a=this.crawlRequestIdAndTaskNameAndRetObj[t]||{};for(const s in a)a[s]&&a[s].result==="success"&&this.crawlTaskObj.finishTaskCount++}this.setItem(this.crawlTaskKey,this.crawlTaskObj)}incrFinishTaskCount(r){this.crawlTaskObj.finishTaskCount+=r,this.setItem(this.crawlTaskKey,this.crawlTaskObj)}async getCrawlInfo(){var p;const r={mallId:this.mallId,status:null,progressText:"",progressRate:""};(((p=Nt.crawlQueue)==null?void 0:p.crawlQueueList)||[]).find(_=>`${_.mallId}`==`${this.mallId}`)&&(r.status="processing");const{requestId:s,currentTaskName:o,progressText:c,allTaskCount:d,finishTaskCount:g,status:f}=this.crawlTaskObj;return this.requestId&&`${this.requestId}`==`${s}`&&(r.progressText=`【${o}】：${c}`,r.progressRate=d>0?Math.floor(g/d*100):0,f==="success"?r.progressText="采集完成":f==="fail"&&(r.progressText=`采集部分失败：${r.reason||""}`)),console.debug("CrawlInfo",r),r}async updateRequestStatus(r,t){return it({url:this.earthUrlsMap.updateCrawlRequestStatus,method:"POST",data:{requestId:r,status:t.result,reason:t.reason}})}async saveRequestDetail(r,t){return it({url:this.earthUrlsMap.initCrawlRequestDetail,method:"POST",data:{requestId:r,desc:t}})}async initCacheData(r){const t=await yn(r);let a={};for(const o in t)if(!this.requestId||`${this.requestId}`==`${o}`){a=t[o];break}const s={};return s[this.requestId]=a,s}setItem(r,t){this.requestId&&Ha(r,t),this.sendToClientTab()}async sendToClientTab(){if(!Nt.crawlTabId)return;const r=await this.getCrawlInfo();try{const t=await Fe.getItem(yo)||[],{mallId:a}=r,s=t.reduce((o,c)=>(`${c.id}`==`${a}`?o.push({...c,...r}):o.push(c),o),[]);Fe.setItem(yo,s)}catch(t){Nt.crawlTabId=null,console.debug(t)}}isTaskSuccess(r,t){const a=this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]||{};return!!(t&&a[t]&&a[t].result==="success"||a.result==="success")}async updateRequestRet(r){if(this.crawlTaskObj.status=r==null?void 0:r.result,this.crawlTaskObj.reason=r==null?void 0:r.reason,this.setItem(this.crawlTaskKey,this.crawlTaskObj),(await this.updateRequestStatus(this.requestId,r)).result!=="success")throw new Error(`更新采集结果:${r.reason}`)}async saveTaskSubTaskRet(r,t,a){this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]||(this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]={}),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r][t]=a,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj);let s="";a.result==="success"?s="采集成功":s=`采集失败，原因：${a.reason}`,await this.updateTaskProgress(r,t+s)}async saveTaskRet(r,t){let a=r,s="";t.result==="success"?(a+="，采集成功",s="采集成功"):(a+=`，采集失败，原因：${t.reason}`,s=`采集失败，原因：${t.reason}`),await this.updateTaskProgress(r,s);const o=await this.saveRequestDetail(this.requestId,a);if(o.result!=="success")throw new Error(`保存采集详情失败:${o.reason}`);t.canRetry||this.incrFinishTaskCount(1),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]=t,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj)}startTask(r){this.crawlTaskObj.currentTaskName=r,this.crawlTaskObj.progressText="开始采集",this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(r,"开始采集")}updateTaskProgress(r,t){this.crawlTaskObj.currentTaskName=r,this.crawlTaskObj.progressText=t,this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(r,t)}async debugLog(r,t){Nt.isDebug&&(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][r]||(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][r]=[]),this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][r].push({date:ze(),desc:t}),this.setItem(this.crawlTaskNameAndLogKey,this.crawlRequestIdAndTaskNameAndLogObj))}};class If{constructor({mallId:r,mallName:t,action:a,mallType:s,bindShopId:o,authAppNameList:c,startDate:d,endDate:g,requestId:f}){ne(this,"earthUrlsMap",{initCrawlRequest:`${jt}/platform/shein_choice/stat/crawl/init_crawl_request`,updateCrawlRequestStatus:`${jt}/platform/shein_choice/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${jt}/platform/shein_choice/stat/crawl/init_crawl_request_detail`,getFullAccountName:`${jt}/auth/account/get_full_account_name`,getAccountInfo:`${jt}/auth/account/get_account_info`,createSheinChoiceImportTask:`${jt}/order/data/import_cost/createSheinChoiceImportTask`});ne(this,"earthChoiceUrlMap",{saveMallLastRsyncTime:`${jt}/platform/shein_choice/stat/crawl/saveMallLastRsyncTime`,saveCrawlWaitSettlementData:`${jt}/platform/pddkj_choice/stat/crawl/saveCrawlWaitSettlementData`});ne(this,"sheinChoiceUrlMap",{getUserInfo:`${Kr}/sso-prefix/auth/getUser`,getFileExportList:`${Kr}/sso/common/fileExport/list`,getTimezoneList:`${Kr}/sso/public/account/timezoneList`,exportPlatformWaitPayCheckDetail:`${Kr}/gspJob/common/file/export/exportPlatformWaitPayCheckDetail`,exportPlatformPayedCheckDetail:`${Kr}/gspJob/common/file/export/exportPlatformPayedCheckDetail`,getFileUrl:`${Kr}/sso/common/fileExport/getFileUrl`});ne(this,"requestId");ne(this,"mallId");ne(this,"mallName");ne(this,"action");ne(this,"mallType");ne(this,"bindShopId");ne(this,"authAppNameList");ne(this,"startDate");ne(this,"endDate");ne(this,"crawlLogObj",{});this.requestId=f,this.mallId=r,this.mallName=t,this.action=a,this.mallType=s,this.bindShopId=o,this.authAppNameList=c||[],this.startDate=d,this.endDate=g,(!this.startDate||!this.endDate)&&(this.startDate=et().subtract(30,"day").format("YYYY-MM-DD"),this.endDate=et().format("YYYY-MM-DD"))}async startCrawl(){console.debug("startCrawl");try{if(!this.mallId)throw new Error("店铺为空");if(!this.bindShopId)throw new Error("绑定店铺为空");if(!this.requestId)throw new Error("采集日志ID为空");this.crawlLogObj=new Xa(this.mallId,this.requestId),await this.crawlLogObj.init(),this.crawlLogObj.resetAllTaskCount(2),await this.startCrawlChoiceWaitPayList(this.mallId,this.startDate,this.endDate),await this.startCrawlChoicePayedList(this.mallId,this.startDate,this.endDate),await this.crawlLogObj.updateRequestRet(Ne())}catch(r){if(this.crawlLogObj)await this.crawlLogObj.updateRequestRet(De(Ae(r)));else throw r}}async startCrawlChoiceWaitPayList(r,t,a){const s="财务/我的收入/待结算收入",o="waitPayList";if(!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s);const c=Date.now();let d=!1;const g={};let f={};const p=et(t).format("YYYY-MM-DD 00:00:00"),_=et(a).format("YYYY-MM-DD 23:59:59"),b=this.buildExportTaskHash(p,_,o);let x={result:"fail",reason:""};const S="hasTaskHashAndTaskIdMap";for(;!d;){if(Date.now()-c>18e4)throw new vo("导出等待超时",180);d=!0,f[b]||(f=yn(S));const v=await this.getCurrentTimezoneInfo(),y=v.timezone,k=this.getCurrentUTC(v.defaultTimezone),I=ze(),E=Cf(I,y),M=et(E).format("YYYY-MM-DD 00:00:00"),D=et(E).format("YYYY-MM-DD 23:59:59"),j=(await this.getFileExportList(M,D)).find($=>{const q=new Date(this.convertToBeijingTime($.createTime,k)).getTime(),C=$.fileName.includes("待结算账单");return q<=(g[b]||0)+6e4&&C||f[b]});if(j)if(`${j.fileStatus}`=="1"){f[b]=j.id,Ha(S,f);const $=await this.getFileUrl(j.id);if(!$)throw new Error("获取下载地址为空");const q={gmtOrderDateStart:p,gmtOrderDateEnd:_,orderDateType:Hx,shopId:this.bindShopId,file:await this.getFileBase64($),filename:j.id,requestId:this.requestId};x=await Te({url:this.earthUrlsMap.createSheinChoiceImportTask,method:"POST",data:q})}else d=!1;else d=!1,await this.exportPlatformWaitPayCheckDetail(p,_),g[b]||(g[b]=new Date(ze()).getTime());await we(5e3)}await this.saveMallLastRsyncTime(r,o),await this.crawlLogObj.saveTaskRet(s,x)}catch(c){await this.crawlLogObj.saveTaskRet(s,De(Ae(c)))}}async startCrawlChoicePayedList(r,t,a){const s="财务/我的收入/已完成结算收入",o="payedList";if(!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s);const c=Date.now();let d=!1;const g={};let f={};const p=et(t).format("YYYY-MM-DD 00:00:00"),_=et(a).format("YYYY-MM-DD 23:59:59"),b=this.buildExportTaskHash(p,_,o);let x={result:"fail",reason:""};const S="hasTaskHashAndTaskIdMap";for(;!d;){if(Date.now()-c>18e4)throw new vo("导出等待超时",180);d=!0,f[b]||(f=yn(S));const v=await this.getCurrentTimezoneInfo(),y=v.timezone,k=this.getCurrentUTC(v.defaultTimezone),I=ze(),E=Cf(I,y),M=et(E).format("YYYY-MM-DD 00:00:00"),D=et(E).format("YYYY-MM-DD 23:59:59"),j=(await this.getFileExportList(M,D)).find($=>{const q=new Date(this.convertToBeijingTime($.createTime,k)).getTime(),C=$.fileName.includes("已完成账单");return q<=(g[b]||0)+6e4&&C||f[b]});if(j)if(`${j.fileStatus}`=="1"){f[b]=j.id,Ha(S,f);const $=await this.getFileUrl(j.id);if(!$)throw new Error("获取下载地址为空");const q={gmtOrderDateStart:p,gmtOrderDateEnd:_,orderDateType:Wx,shopId:this.bindShopId,file:await this.getFileBase64($),filename:j.id,requestId:this.requestId};x=await Te({url:this.earthUrlsMap.createSheinChoiceImportTask,method:"POST",data:q})}else d=!1;else d=!1,g[b]||(await this.exportPlatformPayedCheckDetail(p,_),g[b]=new Date(ze()).getTime());await we(5e3)}await this.saveMallLastRsyncTime(r,o),await this.crawlLogObj.saveTaskRet(s,x)}catch(c){await this.crawlLogObj.saveTaskRet(s,De(Ae(c)))}}async getTimezoneList(){var a;const r=this.sheinChoiceUrlMap.getTimezoneList,t=await Zr({url:r,type:"GET",data:{page:1,perPage:20}});if(`${t==null?void 0:t.code}`!="0")throw new Error(t.msg);return(a=t==null?void 0:t.info)==null?void 0:a.list}async getCurrentTimezoneInfo(){const r=await this.getUserInfo(),t=r.timezone;return r.utcTimezone?{timezone:t,defaultTimezone:r.utcTimezone}:(await this.getTimezoneList()).find(s=>`${s.timezone}`==`${t}`)}async getUserInfo(){const r=this.sheinChoiceUrlMap.getUserInfo,t=await Zr({url:r,type:"GET"});if(`${t==null?void 0:t.code}`!="0")throw new Error(t.msg);return t.info}async getFileExportList(r,t){var o;const a=this.sheinChoiceUrlMap.getFileExportList,s=await Zr({url:a,data:{createTimeStart:r,createTimeEnd:t,page:1,perPage:20}});if(`${s==null?void 0:s.code}`!="0")throw new Error(s.msg);return(o=s==null?void 0:s.info)==null?void 0:o.data}convertToBeijingTime(r,t){const a=new Date(r),s=new Date(a.toUTCString()),o=480,c=t*60,d=new Date(s.getTime()+(o-c)*60*1e3);return et(d).format("YYYY-MM-DD HH:mm:ss")}getCurrentUTC(r){return r.replace(/UTC|UCT/g,"")}buildExportTaskHash(r,t,a){return`${r}-${t}-${a}`}async getFileUrl(r){var s;const t=this.sheinChoiceUrlMap.getFileUrl,a=await Zr({url:t,type:"GET",data:{id:r}});if(`${a==null?void 0:a.code}`!="0")throw new Error(a.msg);return(s=a==null?void 0:a.info)==null?void 0:s.url}async exportPlatformWaitPayCheckDetail(r,t){var o;const a=this.sheinChoiceUrlMap.exportPlatformWaitPayCheckDetail,s=await Zr({url:a,type:"POST",data:{type:28,mode:2,orderDeliveryBeginTime:r,orderDeliveryEndTime:t}});if(`${s==null?void 0:s.code}`!="0")throw new Error(s.msg);return(o=s==null?void 0:s.info)==null?void 0:o.data}async exportPlatformPayedCheckDetail(r,t){const a=this.sheinChoiceUrlMap.exportPlatformPayedCheckDetail,s=await Zr({url:a,type:"POST",data:{type:28,mode:2,payBeginTime:r,payEndTime:t}});if(`${s==null?void 0:s.code}`!="0")throw new Error(s.msg);return s.info.data}async getFileBase64(r){const a=await(await fetch(r)).blob();return await this.transBlobToBase64(a)}transBlobToBase64(r){return new Promise(t=>{const a=new FileReader;a.onload=function(s){var c;let o=(c=s==null?void 0:s.target)==null?void 0:c.result;o&&o.indexOf("base64,")>0&&(o=o.split("base64,")[1]),t(o)},a.readAsDataURL(r)})}async saveMallLastRsyncTime(r,t){return await it({url:this.earthChoiceUrlMap.saveMallLastRsyncTime,method:"POST",data:{mallId:r,rsyncType:t}})}}let Of=class{constructor(){ne(this,"earthUrlsMap",{getCrawlTaskUrl:`${jt}/platform/shein_choice/stat/crawl/get_crawl_task`,initCrawlRequest:`${jt}/platform/shein_choice/stat/crawl/init_crawl_request`});ne(this,"runStatus","wait");ne(this,"crawlQueueList",[]);ne(this,"isRunning",!1);ne(this,"nextAutoCrawlTime",0)}getAllWindows(){return new Promise(r=>{le.windows.getAll({},t=>{r(t)})})}async run(r){console.debug("CrawlQueue run");try{if(this.runStatus="process",!Nt.crawlTabId){let t=await Fe.getItem(Ef);t=t?Number.parseInt(t):null,t=En(t)?null:t,Nt.crawlTabId=t}for(;;){const a=(await this.getAllWindows()).length;if(console.debug("打开窗口数量",a),a>0){await this.autoCrawl();let s=await this.getTaskTs();const o=await Fe.getItem("local:newTs");if(o&&(s=o,Fe.removeItem("local:newTs")),s&&s>r){this.runStatus="waitStop";break}}await we(900*1e3)}return new Promise(t=>{const a=setInterval(()=>{console.debug("wait stop"),this.isRunning===!1&&(clearInterval(a),console.debug("task stop"),t(!0))},3e3)})}catch(t){throw this.runStatus="waitStop",t}}async autoCrawl(){if(Date.now()<this.nextAutoCrawlTime)return;Nt.isDebug?this.nextAutoCrawlTime=Date.now()+1e3*60:this.nextAutoCrawlTime=Date.now()+1e3*3600;try{const t=await it({url:this.earthUrlsMap.getCrawlTaskUrl,method:"GET"}),a=(t==null?void 0:t.taskList)||[];if(a.length){const s=await this.getSheinChoiceBackendLoginInfo();for(const o of a)`${o.mallId}`==`${s==null?void 0:s.supplierId}`&&(o.mallName=s.supplierUserName,o.platform="sheinChoice",this.addCrawlQueueByTask(o))}console.debug(ze(),"crawlQueueList",this.crawlQueueList)}catch(t){console.debug(ze(),"autoCrawl fail",t)}}async getTaskTs(){const r=await it({url:"http://plw.szchengji-inc.com/open/plugin/getBgTaskCodeTs",method:"GET"});return r==null?void 0:r.ts}addCrawlQueueByTask(r){console.debug("addCrawlQueueByTask",r);const{mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,host:d}=r;this.addCrawlQueue({mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,action:"auto",host:d})}async addCrawlQueue(r){const{mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,startDate:d,endDate:g,action:f,gmtExec:p,host:_}=r||{},b=this.crawlQueueList.find(S=>`${S.mallId}`==`${t}`);(!b||b.locked===0)&&(this.crawlQueueList=this.crawlQueueList.filter(S=>`${S.mallId}`!=`${t}`),this.crawlQueueList.push({mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,startDate:d,endDate:g,action:f||"auto",retryTimes:0,locked:0,gmtExec:p||ze(),gmtLock:null,requestId:b&&b.requestId,host:_}),this.crawlQueueList.sort((S,T)=>new Date(S.gmtExec).getTime()-new Date(T.gmtExec).getTime()));const x=new Xa(t);await x.init(),x.sendToClientTab(),this.start()}async getSheinChoiceBackendLoginInfo(){const r=`${Kr}/sso-prefix/auth/getUser`;try{const t=await Qr({url:r}),a=t?t.msg:"";return(a?!+a.includes("子系统登录重定向"):1)?Promise.resolve(t):Promise.reject("未登录Shein后台")}catch{return Promise.resolve({})}}async start(){if(console.debug("start"),!this.isRunning){for(console.debug(ze(),"start process queue"),this.isRunning=!0;;){let r=null;try{if(r=await this.lockQueue(),console.debug(ze(),"lock queue",r),r){const t=await this.processQueue(r);console.debug(ze(),"processQueue",t),await this.clearQueue(r,t)}else if(this.crawlQueueList.length>0)console.debug(ze(),"lock empty,sleep"),await we(10*1e3);else{console.debug(ze(),"stop timer");break}}catch(t){console.debug(ze(),"processQueue exception",r,t)}if(this.runStatus==="waitStop")break}this.isRunning=!1}}async lockQueue(){this.crawlQueueList=this.crawlQueueList.filter(a=>a.retryTimes<5);const r=ze(),t=this.crawlQueueList.find(a=>a.locked===0&&a.gmtExec<=r);if(t){if(!t.requestId){const a=await this.initRequestId(t);if(a.result==="success")t.requestId=a.requestId;else return t.retryTimes++,null}t.locked=1,t.gmtLock=r}return t}async processQueue(r){try{return await new If(r).startCrawl(),{result:"success",reason:""}}catch(t){return t instanceof vo?{result:"fail",canRetry:!0,sleepSeconds:(t==null?void 0:t.sleepSeconds)||1800,reason:t.message}:{result:"fail",canRetry:!1,sleepSeconds:0,reason:Ae(t)}}}async clearQueue(r,t){if(t.canRetry){const s=this.crawlQueueList.find(o=>`${o.mallId}`==`${r.mallId}`);s.retryTimes++,s.locked=0,s.gmtExec=ze(t.sleepSeconds||1800)}else this.crawlQueueList=this.crawlQueueList.filter(s=>`${s.mallId}`!=`${r.mallId}`);const a=new Xa(r.mallId,r.requestId);await a.init(),a.sendToClientTab()}initRequestId({mallId:r,mallName:t,action:a}){return it({url:this.earthUrlsMap.initCrawlRequest,method:"POST",data:{mallId:r,mallName:t,action:a}})}};const Zn=Object.freeze(Object.defineProperty({__proto__:null,CrawlLog:Xa,CrawlQueue:Of,CrawlSheinChoice:If,CrawlTask:class{async run(){console.debug("sheinChoiceCrawlTask"),Nt.crawlQueue||(Nt.crawlQueue=new Of,await Fe.getItem("local:crawlDebug")&&(Nt.isDebug=!0));try{for(;;){const{ts:r,result:t}=await this.getTaskCode();if(console.debug("getSheinChoiceTaskCode",r),t==="success"){if(await Nt.crawlQueue.run(r)!==!0)throw new Error("返回不是true");await we(5*1e3)}else await we(3600*1e3)}}catch(r){Fe.setItem("local:bgTaskFail",`异常:${Date.now()}:${r==null?void 0:r.message}`)}}async getTaskCode(){return it({url:"http://plw.szchengji-inc.com/open/plugin/getBgTaskCode",method:"GET"})}},LOCAL_CRAWL_MALL_INFO_LIST:yo,LOCAL_CRAWL_SHEIN_CHOICE_TAB_ID:Ef,_globalCrawlData:Nt,ajaxSheinChoice:Zr},Symbol.toStringTag,{value:"Module"})),ve="https://erp.91miaoshou.com/api",xo="eprFee",Lf="eprFeeRefund",Ja="gmt_settlement",Yx="returnWaybillFee",Df="tradeIncome",Rf="freightIncome",Mf="afterSalesRefund",$f="freightRefundAmount",Pf="illegalDeduction",jf="otherFee",Gx="shipWaybillFee",bo="gmt_order_start",Qx="afterSalesCompensationDeduction",Kx="labelingServiceFee",Zx="pickupServiceFee",Vx="returnServiceFee",Xx="returnGoodsSortingPackingFee",Jx="postDiscountTax",eb="platformSubsidy",tb="taxRefund",rb="waybillFee",nb="refundQuantity",ab="local:temuAntiContent";async function pe(e){let{mallId:r,url:t,data:a=null,retryTimes:s=0,antiContentStr:o}=e;const c=await Qr({url:t,method:"POST",body:a&&JSON.stringify(a),headers:{Accept:"*/*","Anti-Content":o,"content-type":"application/json",Mallid:r}});return c.error_code&&(c.errorCode=c.error_code,c.errorMsg=c.error_msg),c.errorCode===40001&&(c.errorMsg||(c.errorMsg="登录过期，请重新登录")),c.errorCode===4000004&&(c.errorMsg||"").includes("请稍后重试")&&s<3?(await we(3e3),s++,await pe({mallId:r,url:t,data:a,retryTimes:s,antiContentStr:o})):c}async function gr(e){let{mallId:r,url:t,data:a=null,retryTimes:s=0}=e;const o=await Qr({url:t,method:"POST",body:a&&JSON.stringify(a),headers:{"content-type":"application/json;charset=UTF-8"}});return o.errorCode===40001&&(o.errorMsg||(o.errorMsg="登录过期，请重新登录")),o.errorCode===4000004&&(o.errorMsg||"").includes("请稍后重试")&&s<3?(console.debug("请求频繁，等待3s后重试..."),await we(3e3),s++,await gr({mallId:r,url:t,data:a,retryTimes:s})):o}function de(e,r="seller"){return`${Nf(r).host||""}${e}`}function ib(e){return`https://agentseller.temu.com${e}`}function Wt(e){return Nf(e).name||""}function Nf(e){return{seller:{name:"seller",host:"https://seller.kuajingmaihuo.com"},us:{name:"美国",host:"https://agentseller-us.temu.com"},global:{name:"全球",host:"https://agentseller.temu.com"},eu:{name:"欧区",host:"https://agentseller-eu.temu.com"}}[e]||{}}function sb(e){try{return JSON.parse(e)}catch{return{}}}function qf(e,r){let t=0,a=0;const s=[];for(const o in e)a++,s[t]=s[t]||{},s[t][o]=e[o],a===r&&(t++,a=0);return s}function Ff(e){if(!e)return 0;let r=e.replace(/,/g,"").replace(/[^\d.-]/g,"");r.includes(".")||(r+=".00");const t=Number.parseFloat(r).toFixed(2);return En(t)?0:t}const To="local:crawlMallInfoList",Uf="local:crawlTabId";class bt extends Error{constructor(t,a){super(t);ne(this,"sleepSeconds");this.name=this.constructor.name,this.sleepSeconds=a,Error.captureStackTrace(this,this.constructor)}}const Ve={isDebug:!1,crawlTabId:null,localData:{},crawlQueue:null};class ei{constructor(r,t=null){ne(this,"earthUrlsMap",{updateCrawlRequestStatus:`${ve}/platform/pddkj/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${ve}/platform/pddkj/stat/crawl/init_crawl_request_detail`});ne(this,"mallId");ne(this,"requestId");ne(this,"crawlTaskKey");ne(this,"crawlTaskNameAndRetKey");ne(this,"crawlTaskNameAndLogKey");ne(this,"crawlTaskObj",{});ne(this,"crawlRequestIdAndTaskNameAndRetObj");ne(this,"crawlRequestIdAndTaskNameAndLogObj");this.mallId=r,this.requestId=t,this.crawlTaskKey=`crawl_task_${this.mallId}`,this.crawlTaskNameAndRetKey=`crawl_task_ret_${this.mallId}`,this.crawlTaskNameAndLogKey=`crawl_task_log_${this.mallId}`}async init(){this.crawlTaskObj=await yn(this.crawlTaskKey),this.crawlRequestIdAndTaskNameAndRetObj=await this.initCacheData(this.crawlTaskNameAndRetKey),this.crawlRequestIdAndTaskNameAndLogObj=await this.initCacheData(this.crawlTaskNameAndLogKey)}resetAllTaskCount(r){this.crawlTaskObj.status=null,this.crawlTaskObj.requestId=this.requestId,this.crawlTaskObj.allTaskCount=r,this.crawlTaskObj.finishTaskCount=0;for(const t in this.crawlRequestIdAndTaskNameAndRetObj){const a=this.crawlRequestIdAndTaskNameAndRetObj[t]||{};for(const s in a)a[s]&&a[s].result==="success"&&this.crawlTaskObj.finishTaskCount++}this.setItem(this.crawlTaskKey,this.crawlTaskObj)}incrFinishTaskCount(r){this.crawlTaskObj.finishTaskCount+=r,this.setItem(this.crawlTaskKey,this.crawlTaskObj)}async getCrawlInfo(){var p;const r={mallId:this.mallId,status:null,progressText:"",progressRate:""};(((p=Ve.crawlQueue)==null?void 0:p.crawlQueueList)||[]).find(_=>`${_.mallId}`==`${this.mallId}`)&&(r.status="processing");const{requestId:s,currentTaskName:o,progressText:c,allTaskCount:d,finishTaskCount:g,status:f}=this.crawlTaskObj;return this.requestId&&`${this.requestId}`==`${s}`&&(r.progressText=`【${o}】：${c}`,r.progressRate=d>0?Math.floor(g/d*100):0,f==="success"?r.progressText="采集完成":f==="fail"&&(r.progressText=`采集部分失败：${r.reason||""}`)),console.debug("CrawlInfo",r),r}async updateRequestStatus(r,t){return it({url:this.earthUrlsMap.updateCrawlRequestStatus,method:"POST",data:{requestId:r,status:t.result,reason:t.reason}})}async saveRequestDetail(r,t){return it({url:this.earthUrlsMap.initCrawlRequestDetail,method:"POST",data:{requestId:r,desc:t}})}async initCacheData(r){const t=await yn(r);let a={};for(const o in t)if(!this.requestId||`${this.requestId}`==`${o}`){a=t[o];break}const s={};return s[this.requestId]=a,s}setItem(r,t){this.requestId&&Ha(r,t),this.sendToClientTab()}async sendToClientTab(){if(!Ve.crawlTabId)return;const r=await this.getCrawlInfo();try{const t=await Fe.getItem(To)||[],{mallId:a}=r,s=t.reduce((o,c)=>(`${c.id}`==`${a}`?o.push({...c,...r}):o.push(c),o),[]);Fe.setItem(To,s)}catch(t){Ve.crawlTabId=null,console.debug(t)}}isTaskSuccess(r,t){const a=this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]||{};return!!(t&&a[t]&&a[t].result==="success"||a.result==="success")}async updateRequestRet(r){if(this.crawlTaskObj.status=r==null?void 0:r.result,this.crawlTaskObj.reason=r==null?void 0:r.reason,this.setItem(this.crawlTaskKey,this.crawlTaskObj),(await this.updateRequestStatus(this.requestId,r)).result!=="success")throw new Error(`更新采集结果:${r.reason}`)}async saveTaskSubTaskRet(r,t,a){this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]||(this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]={}),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r][t]=a,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj);let s="";a.result==="success"?s="采集成功":s=`采集失败，原因：${a.reason}`,await this.updateTaskProgress(r,t+s)}async saveTaskRet(r,t){let a=r,s="";if(t.result==="success"){const{isShowSuccessReason:c,reason:d}=t;let g="";c&&d&&(g=`(${d||""})`),a+=`，采集成功${g}`,s=`采集成功${g}`}else a+=`，采集失败，原因：${t.reason}`,s=`采集失败，原因：${t.reason}`;await this.updateTaskProgress(r,s);const o=await this.saveRequestDetail(this.requestId,a);if(o.result!=="success")throw new Error(`保存采集详情失败:${o.reason}`);t.canRetry||this.incrFinishTaskCount(1),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][r]=t,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj)}startTask(r){this.crawlTaskObj.currentTaskName=r,this.crawlTaskObj.progressText="开始采集",this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(r,"开始采集")}updateTaskProgress(r,t){this.crawlTaskObj.currentTaskName=r,this.crawlTaskObj.progressText=t,this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(r,t)}async debugLog(r,t){Ve.isDebug&&(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][r]||(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][r]=[]),this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][r].push({date:ze(),desc:t}),this.setItem(this.crawlTaskNameAndLogKey,this.crawlRequestIdAndTaskNameAndLogObj))}}class Bf{constructor({mallId:r,mallName:t,action:a,mallType:s,bindShopId:o,authAppNameList:c,startDate:d,endDate:g,requestId:f,antiContentStr:p,host:_}){ne(this,"earthUrlsMap",{getShopWithBindMallList:`${ve}/platform/pddkj/stat/crawl/get_crawl_shop_with_bind_mall_list`,bindTemuMall:`${ve}/platform/pddkj/shop/shop/bind_pddkj_mall`,unbindTemuMall:`${ve}/platform/pddkj/shop/shop/unbind_pddkj_mall`,uploadSettlement:`${ve}/platform/pddkj/stat/crawl/upload_settlement_excel`,saveMallGmtLastRsyncSettlement:`${ve}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_settlement`,uploadSaleManageList:`${ve}/platform/pddkj/stat/crawl/upload_sale_manage_list`,saveMallGmtLastRsyncSaleManage:`${ve}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_sale_manage`,uploadAfterSaleList:`${ve}/platform/pddkj/stat/crawl/upload_after_sale_list`,saveMallGmtLastRsyncAfterSale:`${ve}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_after_sale`,initCrawlRequest:`${ve}/platform/pddkj/stat/crawl/init_crawl_request`,updateCrawlRequestStatus:`${ve}/platform/pddkj/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${ve}/platform/pddkj/stat/crawl/init_crawl_request_detail`,getFullAccountName:`${ve}/auth/account/get_full_account_name`,getAccountInfo:`${ve}/auth/account/get_account_info`,createPddkjChoiceImportTask:`${ve}/order/data/import_cost/createPddkjChoiceImportTask`,uploadProductSale:`${ve}/platform/pddkj/stat/crawl/upload_product_sale`,uploadProductQualityScoreUrl:`${ve}/platform/pddkj/stat/crawl/uploadProductQualityScore`,uploadLongTermActivityUrl:`${ve}/platform/pddkj/stat/crawl/upload_long_term_activity`,uploadAppliedActivityUrl:`${ve}/platform/pddkj/stat/crawl/upload_applied_activity`,getCrawlTaskUrl:`${ve}/platform/pddkj/stat/crawl/upload_applied_activity`,uploadCustomizePic:`${ve}/platform/pddkj/stat/crawl/upload_customize_pic`,uploadCustomizeGoodsList:`${ve}/platform/pddkj/stat/crawl/upload_customize_goods_list`,batchAddGoodsRiskTags:`${ve}/warehouse/pddkj_prepare_goods/batch_add_goods_risk_tags`,clearInvalidGoodsRiskTags:`${ve}/warehouse/pddkj_prepare_goods/clear_invalid_goods_risk_tags`,getTimestamp:`${ve}/home/home/getTimestamp`,createPddkjImportTask:`${ve}/order/data/import_cost/createPddkjImportTask`,uploadProductSkuQualityScoreUrl:`${ve}/platform/pddkj/stat/crawl/uploadProductSkuQualityScore`,saveAccountOverview:`${ve}/platform/pddkj/stat/crawl/saveAccountOverview`,saveAccountWaitSettleAmount:`${ve}/platform/pddkj_choice/stat/crawl/saveAccountWaitSettleAmount`,saveAccountLimitationOfFunds:`${ve}/platform/pddkj/stat/crawl/saveAccountLimitationOfFunds`,savePddkjCrawlDataParseTask:`${ve}/platform/pddkj/stat/crawl/savePddkjCrawlDataParseTask`});ne(this,"earthChoiceUrlMap",{saveMallLastRsyncTime:`${ve}/platform/pddkj_choice/stat/crawl/saveMallLastRsyncTime`,uploadProductList:`${ve}/platform/pddkj_choice/stat/crawl/uploadProductList`,uploadSettlement:`${ve}/platform/pddkj_choice/stat/crawl/uploadSettlementExcel`,saveCrawlWaitSettlementData:`${ve}/platform/pddkj_choice/stat/crawl/saveCrawlWaitSettlementData`,uploadProductActivityPriceList:`${ve}/platform/pddkj_choice/stat/crawl/uploadProductActivityPriceList`,uploadProductQualityScoreUrl:`${ve}/platform/pddkj_choice/stat/crawl/uploadProductQualityScore`});ne(this,"earthLocalUrlMap",{uploadLocalOrderSkuList:`${ve}/platform/pddkj_local/stat/crawl/uploadLocalOrderSkuList`,uploadLocalOrderReport:`${ve}/platform/pddkj_local/stat/crawl/uploadLocalOrderReport`,createPddkjLocalImportTask:`${ve}/order/data/import_cost/createPddkjLocalImportTask`});ne(this,"requestId");ne(this,"mallId");ne(this,"mallName");ne(this,"action");ne(this,"mallType");ne(this,"bindShopId");ne(this,"authAppNameList");ne(this,"startDate");ne(this,"endDate");ne(this,"crawlLogObj",{});ne(this,"antiContentStr");ne(this,"host");ne(this,"handleCountResult",({error:r,resultsMap:t,customProductSkuId:a})=>{const s=Ae(r);t.failReasonMap[s]||(t.failReasonMap[s]=[]),t.failReasonMap[s].includes(a)||t.failReasonMap[s].push(a)});ne(this,"formatCustomizeResultRet",r=>{const{total:t=0,failReasonMap:a={}}=r,{tips:s,failIds:o}=Object.entries(a).reduce((f,[p,_=[]],b)=>(f.tips.push(`${b+1}.${p}`),f.failIds.push(..._),f),{tips:[],failIds:[]}),c=hw(o).length;let d="success",g=c>0?`其中${c}个定制品采集失败，原因：${s.join(";")}`:"";return c>0&&c>=t&&(d="fail",g="采集失败"),{result:d,reason:g,isShowSuccessReason:!0}});this.requestId=f,this.mallId=r,this.mallName=t,this.action=a,this.mallType=s,this.bindShopId=o,this.authAppNameList=c||[],this.startDate=d,this.endDate=g,this.antiContentStr=p,this.host=_,(!this.startDate||!this.endDate)&&(this.startDate=et().subtract(30,"day").format("YYYY-MM-DD"),this.endDate=et().format("YYYY-MM-DD"))}async startCrawl(){console.debug("startCrawl");try{if(!this.mallId)throw new Error("店铺为空");if(!this.bindShopId)throw new Error("绑定店铺为空");if(!this.requestId)throw new Error("采集日志ID为空");if(this.crawlLogObj=new ei(this.mallId,this.requestId),await this.crawlLogObj.init(),this.mallType==="pddkj")this.crawlLogObj.resetAllTaskCount(22),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"eu"),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"global"),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"us"),await this.startCrawlLongTermActivityList(this.mallId),await this.startCrawlAppliedActivityList(this.mallId),await this.startCrawlSaleManage(this.mallId),await this.startRsyncRiskTag(this.mallId),await this.startRsyncCustomizeOrderSkuInfo(this.mallId,this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"us",this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlEprProxyPaymentServiceFeeWait(this.mallId,"eu"),await this.startCrawlEprProxyPaymentServiceFee(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlEprFee(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlStockingPenalty(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlQualityAccidentViolationDeduction(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlBill(this.mallId,this.startDate,this.endDate),await this.startCrawlFulfillmentBill(this.mallId,1,this.startDate,this.endDate),await this.startCrawlFulfillmentBill(this.mallId,2,this.startDate,this.endDate),await this.startCrawlAccountOverview(this.mallId),await this.startCrawlFundFrozen(this.mallId);else if(this.mallType==="pddkjChoice"){const r={pddkjChoiceOrder:"us",pddkjChoiceEuOrder:"eu",pddkjChoiceGlobalOrder:"global"};this.crawlLogObj.resetAllTaskCount(9+this.authAppNameList.length*5),await this.startCrawlChoiceProductList(this.mallId),await this.startCrawlChoiceAppliedActivityList(this.mallId),await this.startCrawlChoicelongTermEnrollmentList(this.mallId),await this.startCrawlChoiceErpFee(this.mallId,this.startDate,this.endDate),await this.startRsyncRiskTag(this.mallId);for(const t of this.authAppNameList){const a=r[t];await this.startCrawlChoiceGoodsQuantityScoreDt(this.mallId,a),await this.startCrawlChoiceStmlLogistics(this.mallId,a,this.startDate,this.endDate),await this.startCrawlChoiceStmlReverseLogistics(this.mallId,a,this.startDate,this.endDate,1),await this.startCrawlChoiceStmlReverseLogistics(this.mallId,a,this.startDate,this.endDate,2),await this.startCrawlWaitSettlementData(this.mallId,a,this.startDate,this.endDate)}await this.startCrawlChoiceTransactionRevenue(this.mallId,this.startDate,this.endDate),await this.startCrawlAccountOverview(this.mallId),await this.startCrawlFundFrozen(this.mallId)}else if(this.mallType==="pddkjLocal")this.crawlLogObj.resetAllTaskCount(3),await this.startCrawlLocalOrderList(this.mallId,this.startDate,this.endDate),await this.startCrawlLocalOrderReport(this.mallId,this.startDate,this.endDate),await this.startCrawlLocalBillReport(this.mallId,this.startDate,this.endDate);else throw new Error(`店铺类型错误${this.mallType}`);await this.crawlLogObj.updateRequestRet(Ne())}catch(r){if(this.crawlLogObj)await this.crawlLogObj.updateRequestRet(De(Ae(r)));else throw r}}async startCrawlChoiceProductList(r){var s;const t="销售管理";if(this.crawlLogObj.isTaskSuccess(t))return;const a=Ve;try{await this.crawlLogObj.startTask(t);const o=ib("/visage-agent-seller/product/skc/pageQuery"),c=20;let d=1,g=0,f=0;do{const p=await pe({mallId:r,url:o,data:{page:d,pageSize:c},antiContentStr:this.antiContentStr});if(p.errorCode!==1e6)throw new Error(p.errorMsg);if(!p.result)break;const _=[];g||(g=((s=p.result)==null?void 0:s.total)||0,f=Math.max(1,Math.ceil(g/c)));const b=p.result,x=(b==null?void 0:b.pageItems)||[];for(const T of x){const{productId:v,productSkcId:y}=T||{},k={productId:v,productSkcId:y,productSkuSummaries:[]},I=T.productSkuSummaries;if(I)for(const E of I){const D={...ln(E,["productSkuId","extCode","supplierPrice","supplierPriceUS","siteSupplierPrices"]),currency:E.currencyType};k.productSkuSummaries.push(D)}_.push(k)}const S=await Te({url:this.earthChoiceUrlMap.uploadProductList,method:"POST",data:{mallId:r,uploadDataList:JSON.stringify(_),filename:`${t}-第${d}页`,requestId:this.requestId,shopId:this.bindShopId}});if(S.result!=="success")throw new Error(S.reason);if(await this.crawlLogObj.updateTaskProgress(t,`第${d}/${f}页`),await we(3e3),a.isDebug&&d===2){this.crawlLogObj.debugLog(t,"debug模式只取两页");break}d++}while((d-1)*c<g);await this.saveMallLastRsyncTime(r,"productList"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(o){await this.crawlLogObj.saveTaskRet(t,De(Ae(o)))}}async startCrawlChoiceAppliedActivityList(r){var s,o;const t="店铺营销/报名记录/专题活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(t))return;const a=Ve;try{await this.crawlLogObj.startTask(t);const c=de("/marvel-mms/cn/api/kiana/gambit/marketing/activity/product/applied/list"),d=10;let g=1,f=0,p=0;do{const _=await pe({mallId:r,url:c,data:{pageNo:g,pageSize:d},antiContentStr:this.antiContentStr});if(_.errorCode!==1e6)throw new Error(_.errorMsg);if(!_.result)break;const b=[];f||(f=((s=_.result)==null?void 0:s.total)||0,p=Math.max(1,Math.ceil(f/d)));const x=_.result,S=(x==null?void 0:x.productList)||[];for(const v of S){const{productId:y,activityStartTime:k,activityEndTime:I,id:E,sessionStatus:M,skcList:D=[]}=v||{};for(const l of D){const j=l.skcId;for(const $ of l.skuList){const{skuId:q,currency:C,extCode:F}=$||{};let Q=$.activityPrice,K=!1;if(gt($.sitePriceList))for(const J of $.sitePriceList)J.siteName==="美国站"&&(Q=J.activityPrice,K=!0);gt($.sitePriceList)&&$.sitePriceList.length&&K===!1&&(Q=(o=$.sitePriceList[0])==null?void 0:o.activityPrice);const H={productId:y,productSkcId:j,productSkuId:q,currency:C,extCode:F,activityPrice:Q,activityStartTime:k,activityEndTime:I,activityId:E,sessionStatus:M};b.push(H)}}}const T=await Te({url:this.earthChoiceUrlMap.uploadProductActivityPriceList,method:"POST",data:{mallId:r,uploadDataList:JSON.stringify(b),filename:`${t}-第${g}页`,requestId:this.requestId,shopId:this.bindShopId}});if(T.result!=="success")throw new Error(T.reason);if(await this.crawlLogObj.updateTaskProgress(t,`第${g}/${p}页`),await we(3e3),a.isDebug&&g===2){this.crawlLogObj.debugLog(t,"debug模式只取两页");break}g++}while((g-1)*d<f);await this.saveMallLastRsyncTime(r,"activityPrice"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(t,De(Ae(c)))}}async startCrawlChoicelongTermEnrollmentList(r){var s;const t="店铺营销/报名记录/长期活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(t))return;const a=Ve;try{await this.crawlLogObj.startTask(t);const o=de("/marvel-mms/cn/api/kiana/gambit/marketing/enroll/list"),c=50;let d=1,g=0,f=0,p=0;do{const _=await pe({mallId:r,url:o,data:{pageNo:d,pageSize:c},antiContentStr:this.antiContentStr});if(_.errorCode!==1e6){if(d>1&&_.errorMsg==="Operation too frequent, please try again later"){if(p++,p>5)throw new Error(`${_.errorMsg} retry 5 times 合计${g} page=${d}`);await we(5e3*p);continue}throw new Error(_.errorMsg)}if(p=0,!_.result)break;const b=[];g||(g=((s=_.result)==null?void 0:s.total)||0,f=Math.max(1,Math.ceil(g/c)));const S=_.result.list??[];for(const v of S){const{productId:y,sessionStartTime:k,sessionEndTime:I,enrollId:E,sessionStatus:M,skcList:D=[]}=v||{};for(const l of D){const j=l.skcId;for(const $ of l.skuList){const{skuId:q,currency:C,extCode:F}=$||{};let Q=$.activityPrice,K=!1;if(gt($.sitePriceList))for(const J of $.sitePriceList)J.siteName==="美国站"&&(Q=J.activityPrice,K=!0);gt($.sitePriceList)&&$.sitePriceList.length&&K===!1&&(Q=$.sitePriceList[0].activityPrice);const H={productId:y,productSkcId:j,productSkuId:q,currency:C,extCode:F,activityPrice:Q,activityStartTime:k,activityEndTime:I,activityId:E,sessionStatus:M};b.push(H)}}}const T=await Te({url:this.earthChoiceUrlMap.uploadProductActivityPriceList,method:"POST",data:{mallId:r,uploadDataList:JSON.stringify(b),filename:`${t}-第${d}页`,requestId:this.requestId,shopId:this.bindShopId}});if(T.result!=="success")throw new Error(T.reason);if(await this.crawlLogObj.updateTaskProgress(t,`第${d}/${f}页`),await we(5e3),a.isDebug&&d===2){this.crawlLogObj.debugLog(t,"debug模式只取两页");break}d++}while((d-1)*c<g);await this.saveMallLastRsyncTime(r,"activityPrice"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(o){await this.crawlLogObj.saveTaskRet(t,De(Ae(o)))}}async startCrawlChoiceErpFee(r,t,a){var c,d;const o=`账户资金/EPR费用管理-${Wt("eu")}`;if(!this.crawlLogObj.isTaskSuccess(o))try{const g=Date.now();await this.crawlLogObj.startTask(o),await this.loginMallAgent(r,"eu");let f=!1;const p={},_=[{taskType:18,taskTypeName:"商品环保费"},{taskType:19,taskTypeName:"物流包装环保费"}],b=[{exportType:2,exportTypeName:"已扣费"},{exportType:4,exportTypeName:"已退费"}];for(;!f;){if(Date.now()-g>3e5)throw new bt("导出等待超时",300);f=!0;for(const x of this.groupBy30Days(t,a))for(const{taskType:S,taskTypeName:T}of _){const v=await this.getChoiceExportHistory(r,"eu",S);for(const{exportType:y,exportTypeName:k}of b){const I=T+k;if(this.crawlLogObj.isTaskSuccess(o,I))continue;const E=v.find(M=>`${M.exportType}`==`${y}`&&M.expireTime>Date.now()&&`${M.financeStartTime}`==`${x.start.getTime()}`&&`${M.financeEndTime}`==`${x.end.getTime()}`);if(E)if(+E.status==2){const M=de("/api/merchant/file/export/download","eu"),D=await pe({mallId:r,url:M,data:{taskType:S,id:E.id},antiContentStr:this.antiContentStr});if(D.errorMsg)throw new Error(D.errorMsg);if(!((c=D.result)!=null&&c.fileUrl))throw new Error("获取下载地址失败");const l=(d=D.result)==null?void 0:d.fileUrl;let j=[];y===2?j=[xo]:y===4&&(j=[Lf]);const $={feeTypeList:j,gmtOrderDateStart:this.timestampTranDate(E.financeStartTime),gmtOrderDateEnd:this.timestampTranDate(E.financeEndTime),orderDateType:Ja,shopId:this.bindShopId,file:await this.getFileBase64(l),filename:`${E.id}-${o}`,requestId:this.requestId},q=await Te({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:$});await this.crawlLogObj.saveTaskSubTaskRet(o,I,q)}else f=!1;else{f=!1;const M={exportType:y,taskType:S,financeStartTime:x.start.getTime(),financeEndTime:x.end.getTime()};if(!p[`${M.exportType}-${M.taskType}-${M.financeStartTime}-${M.financeEndTime}}`]){const D=de("/api/merchant/file/export","eu"),l=await pe({mallId:r,url:D,data:M,antiContentStr:this.antiContentStr});if(l.errorCode!==1e6&&l.errorMsg!=="导出任务已存在, 请勿重复创建, 请前往【导出历史】查看")throw new Error(l.errorMsg);p[`${M.taskType}-${M.taskType}-${M.financeStartTime}-${M.financeEndTime}}`]=!0}}}}await we(5e3)}await this.saveMallLastRsyncTime(r,"eprFee"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(g){await this.crawlLogObj.saveTaskRet(o,De(Ae(g)))}}async startCrawlChoiceGoodsQuantityScoreDt(r,t){const a=`品质分-${Wt(t)}`;try{if(this.crawlLogObj.isTaskSuccess(a))return;const s=t==="eu";await this.crawlLogObj.startTask(a),await this.loginMallAgent(r,t);const o=de("/bg-luna-agent-seller/goods/quality/semiHosted/qualityScore/count",t),c=await pe({mallId:r,url:o,data:{page:1,pageSize:10,qualityScoreEnum:2},antiContentStr:this.antiContentStr});if(c.errorCode!==1e6)throw new Error(c.errorMsg);const d=await Te({url:this.earthUrlsMap.uploadProductQualityScoreUrl,method:"POST",data:{mallId:r,region:t,uploadDataList:JSON.stringify(c.result),filename:a,requestId:this.requestId,shopId:this.bindShopId}});if(d.result!=="success")throw new Error(d.reason);await this.saveMallLastRsyncTime(r,s?"goodsQuantityScore":"goodsQuantityScoreEu"),await this.crawlLogObj.saveTaskRet(a,Ne())}catch(s){await this.crawlLogObj.saveTaskRet(a,De(Ae(s)))}}async startCrawlChoiceStmlReverseLogistics(r,t,a,s,o){const c=`账户资金/退货面单费-${Wt(t)}-${o===1?"商家仓":"temu仓"}`;if(!this.crawlLogObj.isTaskSuccess(c))try{const d={},g=Date.now();let f=!1,p=!1;for(;!f;){if(Date.now()-g>3e5)throw new bt("导出等待超时",300);f=!0,p||(await this.loginMallAgent(r,t),p=!0);const _=await this.queryStmlReverseLogisticsTask(r,t,o);for(const b of this.groupBy30Days(a,s)){const x={deductTypeList:[1,2,3],deductDesc:["支出","调整(支出)","调整(退款)"],deductTimeBegin:b.start.getTime(),deductTimeEnd:b.end.getTime(),rangeTime:`导出任务生成时间: ${this.formatToBeijingDate(b.start,"YYYY-MM-DD")} ~ ${this.formatToBeijingDate(b.end,"YYYY-MM-DD")}`},S=x.rangeTime;if(this.crawlLogObj.isTaskSuccess(c,S))continue;const T={ext:JSON.stringify(x)},v=_.find(y=>rw(sb(y.ext),x)&&Date.now()-new Date(y.createdAt).getTime()<24*3600*1e3&&!(y.isFinished&&!y.isSuccess));if(v)if(v.isFinished){const y=JSON.parse(v.ext),k={gmtOrderDateStart:this.timestampTranDate(y.deductTimeBegin),gmtOrderDateEnd:this.timestampTranDate(y.deductTimeEnd),feeTypeList:[Yx],orderDateType:Ja,shopId:this.bindShopId,file:await this.getFileBase64(v.downloadUrl),filename:`${v.id}-${c}`,requestId:this.requestId},I=await Te({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:k});await this.crawlLogObj.saveTaskSubTaskRet(c,S,I)}else f=!1;else if(f=!1,!d[`${x.deductTimeBegin}-${x.deductTimeEnd}`]){let y=de("/portal/sunce/seller/center/bill/download/async",t);t==="us"&&(y=de("/portal/udp/sunce/seller/center/bill/download/async",t)),o===2&&(y=de("/portal/sunquan/seller/center/bill/download/async",t),t==="us"&&(y=de("/portal/udp/sunquan/seller/center/bill/download/async",t))),await pe({mallId:r,url:y,data:T,antiContentStr:this.antiContentStr}),d[`${x.deductTimeBegin}-${x.deductTimeEnd}`]=!0}}await we(1e4)}await this.saveMallLastRsyncTime(r,"stmlReverseLogistics"),await this.crawlLogObj.saveTaskRet(c,Ne())}catch(d){await this.crawlLogObj.saveTaskRet(c,De(Ae(d)))}}async queryStmlReverseLogisticsTask(r,t,a){var c;let s=de("/portal/sunce/seller/center/bill/task/list",t);t==="us"&&(s=de("/portal/udp/sunce/seller/center/bill/task/list",t)),a===2&&(s=de("/portal/sunquan/seller/center/bill/task/list",t),t==="us"&&(s=de("/portal/udp/sunquan/seller/center/bill/task/list",t)));const o=await pe({mallId:r,url:s,data:{pageNum:1,pageSize:10},antiContentStr:this.antiContentStr});if(o.errorMsg)throw new Error(o.errorMsg);return((c=o.result)==null?void 0:c.excelCommonTaskList)||[]}async startCrawlChoiceStmlLogistics(r,t,a,s){const o=`账户资金/发货面单费-${Wt(t)}`;if(!this.crawlLogObj.isTaskSuccess(o))try{let c=!1,d=!1;const g={},f=Date.now();for(;!c;){if(Date.now()-f>3e5)throw new bt("导出等待超时",300);c=!0,d||(await this.loginMallAgent(r,t),d=!0);const p=await this.queryStmlLogisticsTask(r,t);for(const _ of this.groupBy30Days(a,s)){const b={req:{deductTimeBegin:_.start.getTime(),deductTimeEnd:_.end.getTime(),reconciliationTypeList:[1,2,3,5,6,7,8]},requestStr:JSON.stringify([{label:"账单类型",value:["支出","调整(支出)","调整(退款)","物流商赔偿款","揽收支出","揽收调整(支出)","揽收调整(退款)"]},`账单支出/退款时间: ${this.formatToBeijingDate(_.start,"YYYY-MM-DD")} ~ ${this.formatToBeijingDate(_.end,"YYYY-MM-DD")}`])},x=`${b.req.deductTimeBegin}-${b.req.deductTimeEnd}`;if(this.crawlLogObj.isTaskSuccess(o,x))continue;const S=p.find(T=>T.isFinished&&T.isSuccess&&T.taskId===g[x]);if(S)if(S.isFinished){let T=JSON.parse(S.requestStr);T=T[1].replace("账单支出/退款时间: ","").replaceAll(" ",""),T=T.split("~");const v=`${T[0]} 00:00:00`,y=`${T[1]} 23:59:59`,k={gmtOrderDateStart:v,gmtOrderDateEnd:y,feeTypeList:[Gx],orderDateType:Ja,shopId:this.bindShopId,file:await this.getFileBase64(S.downloadUrl),filename:`${S.taskId}-${x}-${t}`,mallId:r,region:t,platform:this.mallType,requestId:this.requestId,fundType:"发货面单费",fundStatus:3},I=await Te({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:k});await this.crawlLogObj.saveTaskSubTaskRet(o,x,I)}else c=!1;else if(c=!1,!g[x]){let T=de("/portal/selene/seller/portal/recon/download",t);t==="us"&&(T=de("/api/udp/yuanbenchu/seller_central/recon_bill/download/async",t));const v=await pe({mallId:r,url:T,data:b,antiContentStr:this.antiContentStr});if(v.errorMsg)throw new Error(v.errorMsg);g[x]=v.result.taskId}}await we(1e4)}await this.saveMallLastRsyncTime(r,"stmlLogistics"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(o,De(Ae(c)))}}async queryStmlLogisticsTask(r,t){let a=de("/portal/selene/seller/portal/recon/download_list",t);t==="us"&&(a=de("/api/udp/yuanbenchu/seller_central/recon_bill/task/info",t));const s=await pe({mallId:r,url:a,data:{pageNum:1,pageSize:10},antiContentStr:this.antiContentStr});if(s.errorMsg)throw new Error(s.errorMsg);return s.result.excelCommonTaskList}async startCrawlChoiceTransactionRevenue(r,t,a){var o;const s="账户资金/对账中心/财务明细/财务详情 交易收入";if(!this.crawlLogObj.isTaskSuccess(s))try{const c=Date.now(),d={};let g=!1;for(;!g;){if(Date.now()-c>3e5)throw new bt("导出等待超时",300);g=!0;const f=await this.getChoiceTransactionRevenueExportHistoryTaskList(r);for(const p of this.groupBy30Days(t,a)){const _=`${p.start.getTime()}-${p.end.getTime()}`;if(this.crawlLogObj.isTaskSuccess(s,_))continue;const b=f.find(x=>`${x.searchExportTimeBegin}`==`${p.start.getTime()}`&&`${x.searchExportTimeEnd}`==`${p.end.getTime()}`&&x.expireTime>Date.now()&&+x.status==2);if(b)for(const x of["seller","global","us","eu"]){let S={};if(x==="seller"){const M={taskType:19,id:b.id},D=de("/api/merchant/file/export/download",x);S=await pe({mallId:r,url:D,data:M,antiContentStr:this.antiContentStr})}else S=await this.getAgentBillFile(r,x,b);if(S.errorCode!==1e6)throw new Error(S.errorMsg);const T=(o=S.result)==null?void 0:o.fileUrl;if(!T)throw new Error("获取下载地址为空");const v=await this.getFileBase64(T),y=`${_}-${x}-${b.id}`;await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:x,platform:this.mallType,filename:y,file:v,requestId:this.requestId,fundType:"结算明细",fundStatus:3,gmtBillStart:this.formatToBeijingDate(p.start),gmtBillEnd:this.formatToBeijingDate(p.end)}});const k={feeTypeList:[Df,Mf,Rf,$f,Pf,jf],gmtOrderDateStart:this.timestampTranDate(b.searchExportTimeBegin),gmtOrderDateEnd:this.timestampTranDate(b.searchExportTimeEnd),orderDateType:Ja,shopId:this.bindShopId,file:v,filename:y},I=await Te({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:k});await this.crawlLogObj.saveTaskSubTaskRet(s,_,I)}else if(g=!1,!d[_]){const x={fundDetailExport:!0,taskType:19,beginTime:p.start.getTime(),endTime:p.end.getTime()},S=de("/api/merchant/file/export"),T=await pe({mallId:r,url:S,data:x,antiContentStr:this.antiContentStr});if(T.errorMsg)throw new Error(T.errorMsg);d[_]=!0}}await we(5e3)}await this.saveMallLastRsyncTime(r,"bill"),await this.crawlLogObj.saveTaskRet(s,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(s,De(Ae(c)))}}async startCrawlGoodsQuantityScoreDt(r,t){const a=`品质分-${Wt(t)}`;try{if(this.crawlLogObj.isTaskSuccess(a))return;const s=Ve,o=t==="eu";await this.crawlLogObj.startTask(a),await this.loginMallAgent(r,t);let c=de("/bg-luna-agent-seller/goods/quality/supplyChain/qualityScore/count",t);const d=await pe({mallId:r,url:c,data:{page:1,pageSize:10,qualityScoreEnum:2},antiContentStr:this.antiContentStr});if(d.errorCode!==1e6)throw new Error(d.errorMsg);const g=await Te({url:this.earthUrlsMap.uploadProductQualityScoreUrl,method:"POST",data:{mallId:r,region:t,isEu:o?1:0,uploadDataList:JSON.stringify(d.result),filename:a,requestId:this.requestId,shopId:this.bindShopId}});if(g.result!=="success")throw new Error(g.reason);c=de("/bg-luna-agent-seller/goods/quality/supplyChain/qualityMetrics/pageQuery",t);for(const f of[1,2,3,4]){let p=1;const _=10;let b=0,x=0;do{const S=await pe({mallId:r,url:c,data:{page:p,pageSize:_,qualityScoreEnum:f},antiContentStr:this.antiContentStr});if(S.errorCode!==1e6)throw new Error(S.errorMsg);if(!S.result)break;b||(b=S.result.total,x=Math.max(1,Math.ceil(b/_)));const v=S.result.pageItems,y=await Te({url:this.earthUrlsMap.uploadProductSkuQualityScoreUrl,method:"POST",data:{mallId:r,region:t,qualityScoreEnum:f,uploadDataList:JSON.stringify(v)}});if(y.result!=="success")throw new Error(y.reason);await this.crawlLogObj.updateTaskProgress(a,`第${p}/${x}页`),await we(3e3),s.isDebug&&p===2&&this.crawlLogObj.debugLog(a,"debug模式只取两页"),p++}while((p-1)*_<b)}await this.saveMallLastRsyncTime(r,o?"goodsQuantityScore":"goodsQuantityScoreEu"),await this.crawlLogObj.saveTaskRet(a,Ne())}catch(s){await this.crawlLogObj.saveTaskRet(a,De(Ae(s)))}}async startCrawlLongTermActivityList(r){var s;const t="店铺营销/报名记录/长期活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(t))return;const a=Ve;try{await this.crawlLogObj.startTask(t);const o=de("/marvel-mms/cn/api/kiana/gambit/marketing/enroll/list"),c=40;let d=1,g=0,f=0,p=0;do{const _=await pe({mallId:r,url:o,data:{pageNo:d,pageSize:c,sessionStatusTag:3},antiContentStr:this.antiContentStr});if(_.errorCode!==1e6){if(d>1&&_.errorMsg==="Operation too frequent, please try again later"){if(p++,p>5)throw new Error(`${_.errorMsg} retry 5 times 合计${g} page=${d}`);await we(5e3*p);continue}throw new Error(_.errorMsg)}if(p=0,!_.result)break;const b=[];g||(g=((s=_.result)==null?void 0:s.total)||0,f=Math.max(1,Math.ceil(g/c)));const x=_.result,S=(x==null?void 0:x.list)||[];for(const v of S){const y=ln(v,["activityStock","remainingActivityStock","sessionEndTime","sessionStartTime","enrollId","productId","skcList"]);b.push(y)}const T=await Te({url:this.earthUrlsMap.uploadLongTermActivityUrl,method:"POST",data:{mallId:r,uploadDataList:JSON.stringify(b),filename:`${t}-第${d}页`,requestId:this.requestId,shopId:this.bindShopId}});if(T.result!=="success")throw new Error(T.reason);if(await this.crawlLogObj.updateTaskProgress(t,`第${d}/${f}页`),await we(5e3),a.isDebug&&d===2){this.crawlLogObj.debugLog(t,"debug模式只取两页");break}d++}while((d-1)*c<g);await this.saveMallLastRsyncTime(r,"longTermActivity"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(o){await this.crawlLogObj.saveTaskRet(t,De(Ae(o)))}}async startCrawlAppliedActivityList(r){var s;const t="店铺营销/报名记录/专题活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(t))return;const a=Ve;try{await this.crawlLogObj.startTask(t);const o=de("/marvel-mms/cn/api/kiana/gambit/marketing/activity/product/applied/list"),c=10;let d=1,g=0,f=0;do{const p=await pe({mallId:r,url:o,data:{pageNo:d,pageSize:c,sessionStatusTag:3},antiContentStr:this.antiContentStr});if(p.errorCode!==1e6)throw new Error(p.errorMsg);if(!p.result)break;const _=[];g||(g=((s=p.result)==null?void 0:s.total)||0,f=Math.max(1,Math.ceil(g/c)));const b=p.result,x=(b==null?void 0:b.productList)||[];for(const T of x){const y={...ln(T,["id","productId","activityStock","activityStartTime","activityEndTime","skcList"]),remainingActivityStock:0};_.push(y)}const S=await Te({url:this.earthUrlsMap.uploadAppliedActivityUrl,method:"POST",data:{mallId:r,uploadDataList:JSON.stringify(_),filename:`${t}-第${d}页`,requestId:this.requestId,shopId:this.bindShopId}});if(S.result!=="success")throw new Error(S.reason);if(await this.crawlLogObj.updateTaskProgress(t,`第${d}/${f}页`),await we(3e3),a.isDebug&&d===2){await this.crawlLogObj.debugLog(t,"debug模式只取两页");break}d++}while((d-1)*c<g);await this.saveMallLastRsyncTime(r,"appliedActivity"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(o){await this.crawlLogObj.saveTaskRet(t,De(Ae(o)))}}async startCrawlSaleManage(r){var s;const t="销售管理/申报价格+销量";if(this.crawlLogObj.isTaskSuccess(t))return;const a=Ve;try{await this.crawlLogObj.startTask(t);const o=de("/marvel-mms/cn/api/kiana/venom/sales/management/listWarehouse"),c=!0,d=20;let g=1,f=0,p=0;do{let _=await pe({mallId:r,url:o,data:{isLack:0,pageNo:g,pageSize:d,priceAdjustRecentDays:7},antiContentStr:this.antiContentStr});const b=[];if(_.errorCode!==1e6)throw new Error(_.errorMsg);f||(f=((s=_.result)==null?void 0:s.total)||0,p=Math.max(1,Math.ceil(f/d)));const x=_.result,S=(x==null?void 0:x.subOrderList)||[];for(const T of S){const v=T.skuQuantityDetailList||[];let y=!1,k={};if(c){const M=[];for(const D of v)M.push(D.productSkuId),D.lastThirtyDaysSaleVolume>0&&(y=!0);if(y){const D=this.getPastDate(31),l=this.getPastDate(1);k=await this.getProductSkuIdAndDtSaleListMap(r,M,D,l),await we(300)}else{const D=[];for(let l=31;l>0;l--)D.push({date:this.getPastDate(l),sale:0});for(const l of M)k[l]=D}}const E={...ln(T,["productId","productSkcId","commentNum","mark","onSalesDurationOffline"]),skuQuantityDetailList:[]};for(const M of v){const D=ln(M,["productSkuId","className","supplierPrice","currencyType"]);c&&(D.dtSaleList=k[D.productSkuId]),E.skuQuantityDetailList.push(D)}b.push(E)}if(_=await Te({url:this.earthUrlsMap.uploadSaleManageList,method:"POST",data:{mallId:r,isNeedRsyncProductSale:1,uploadDataList:JSON.stringify(b),requestId:this.requestId,filename:`${t}-第${g}页`,shopId:this.bindShopId}}),_.result!=="success")throw new Error(_.reason);if(await this.crawlLogObj.updateTaskProgress(t,`第${g}/${p}页`),await we(3e3),a.isDebug&&g===2){this.crawlLogObj.debugLog(t,"debug模式只取两页");break}g++}while((g-1)*d<f);await this.saveMallLastRsyncTime(r,"saleManage"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(o){await this.crawlLogObj.saveTaskRet(t,De(Ae(o)))}}async startRsyncCustomizeOrderSkuInfo(r,t,a){var d,g;const s="备货单定制品内容";if(this.crawlLogObj.isTaskSuccess(s))return;const o={total:0,successCount:0,failCount:0,failReasonMap:{}},c=Ve;try{await this.crawlLogObj.startTask(s);for(const f of this.groupBy30Days(t,a)){const p=de("/oms/bg/venom/api/supplier/purchase/manager/querySubOrderList"),_={beginTime:f.start.getTime(),endTime:f.end.getTime()},b="global",x=20;let S=1,T=0,v=0;await this.loginMallAgent(r,b);do{const y=await pe({mallId:r,url:p,data:{pageNo:S,pageSize:x,purchaseTimeFrom:_.beginTime,purchaseTimeTo:_.endTime,oneDimensionSort:{firstOrderByDesc:1,firstOrderByParam:"createdAt"},isCustomGoods:!0},antiContentStr:this.antiContentStr});if(y.errorCode===1e6){T||(T=((d=y.result)==null?void 0:d.total)||0,v=Math.max(1,Math.ceil(T/x))),await this.crawlLogObj.updateTaskProgress(s,`第${S}/${v}页`);const k=y.result,I=(k==null?void 0:k.subOrderForSupplierList)||[],E=[];for(const M of I)M.subPurchaseOrderSn&&((g=M.subPurchaseOrderSn)==null?void 0:g.length)>0&&!E.includes(M.subPurchaseOrderSn)&&E.push(M.subPurchaseOrderSn);await this.rsyncCustomOrderSkuInfo(r,b,E,o)}else throw new Error(y.errorMsg);if(await we(3e3),c.isDebug&&S===2){console.warn("debug模式只取两页");break}S++}while((S-1)*x<T)}await this.saveMallLastRsyncTime(r,"customizeOrderSkuInfo"),await this.crawlLogObj.saveTaskRet(s,this.formatCustomizeResultRet(o))}catch(f){await this.crawlLogObj.saveTaskRet(s,De(Ae(f)))}}async startCrawlRegionSettlement(r,t,a,s){var c;const o=`结算数据-${Wt(t)}`;if(!this.crawlLogObj.isTaskSuccess(o))try{await this.crawlLogObj.startTask(o);const d=Date.now(),g=1,f=2,p=3,_={[g]:{type:g,desc:"待处理款项",breadcrumb:"结算数据/待结算/导出明细"},[f]:{type:f,desc:"结算中款项",breadcrumb:"结算数据/结算中/导出明细"},[p]:{type:p,desc:"已到账款项",breadcrumb:"结算数据/已到账/导出明细"}};await this.loginMallAgent(r,t);const b={};let x=!1;for(;!x;){if(Date.now()-d>3e5)throw new bt("导出等待超时",300);x=!0;const S=await this.getSettlementExportHistoryTaskList(r,t);for(const T in _){let v=a,y=s;(+T===g||+T===f)&&(v=s,y=s);for(const k of this.groupBy30Days(v,y)){let I=this.formatToBeijingDate(k.start,"YYYY-MM-DD"),E=this.formatToBeijingDate(k.end,"YYYY-MM-DD");(+T===g||+T===f)&&(I=s,E=s);const M=`${I} ${E} ${_[T].desc}`;if(this.crawlLogObj.isTaskSuccess(o,M))continue;const D=S.find(l=>`${l.settleDataType}`==`${T}`&&l.status==2&&l.id==b[M]);if(D){await this.crawlLogObj.debugLog(o,`${M}:找到导出任务${JSON.stringify(D)}`);const l=de("/api/merchant/file/export/download",t);let j=await pe({mallId:r,url:l,data:{id:D.id,taskType:12},antiContentStr:this.antiContentStr});const $=(c=j.result)==null?void 0:c.fileUrl,q=`${o}-${M}-${D.id}`,C=await this.getFileBase64($);j=await Te({url:this.earthUrlsMap.uploadSettlement,method:"POST",data:{taskId:D.id,fundType:D.settleDataType,mallId:r,gmtExportBegin:D.beginDate,gmtExportEnd:D.endDate,region:t,filename:q,file:C,requestId:this.requestId}}),await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:t,filename:q,platform:this.mallType,file:C,requestId:this.requestId,fundType:"结算明细",fundStatus:T,gmtBillStart:this.formatToBeijingDate(k.start),gmtBillEnd:this.formatToBeijingDate(k.end)}}),await this.crawlLogObj.saveTaskSubTaskRet(o,M,j)}else if(x=!1,!b[M]){await this.crawlLogObj.debugLog(o,`${M}:创建导出`);const l=de("/api/merchant/file/export",t),j={settleDataType:Number.parseInt(T),taskType:12};+T===p&&(j.beginDate=I,j.endDate=E);const $=await pe({mallId:r,url:l,data:j,antiContentStr:this.antiContentStr});if($.errorMsg)throw new Error($.errorMsg);b[M]=$.result}}}await we(5e3)}await this.saveMallLastRsyncTime(r,"settlement"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(d){await this.crawlLogObj.saveTaskRet(o,De(Ae(d)))}}async startCrawlEprProxyPaymentServiceFee(r,t,a,s){var c;const o=`EPR代付服务费-已扣费-${Wt(t)}`;if(!this.crawlLogObj.isTaskSuccess(o))try{const d=Date.now();await this.crawlLogObj.startTask(o),await this.loginMallAgent(r,t);let g=!1;const f=16,p={};for(;!g;){if(Date.now()-d>3e5)throw new bt("导出等待超时",300);g=!0;const _=await this.queryExportHistory(r,t,f);for(const b of this.groupBy30Days(a,s)){const x=this.formatToBeijingDate(b.start,"YYYY-MM-DD"),S=this.formatToBeijingDate(b.end,"YYYY-MM-DD"),T=`${x}-${S}`;if(this.crawlLogObj.isTaskSuccess(o,T))continue;const v=_.find(y=>`${y.financeDateStart}`==`${x}`&&`${y.financeDateEnd}`==`${S}`&&+y.status==2);if(v){const y=de("/api/merchant/file/export/download",t);let k=await pe({mallId:r,url:y,data:{id:v.id,taskType:f},antiContentStr:this.antiContentStr});const I=(c=k.result)==null?void 0:c.fileUrl,E=await this.getFileBase64(I),M=`${T}-${v.id}`;k=await Te({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:{feeTypeList:[xo],gmtOrderDateStart:b.start,gmtOrderDateEnd:b.end,orderDateType:bo,shopId:this.bindShopId,filename:M,file:E,requestId:this.requestId}}),await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:t,filename:M,file:E,platform:this.mallType,requestId:this.requestId,fundType:"代付服务费",fundStatus:3,gmtBillStart:this.formatToBeijingDate(b.start),gmtBillEnd:this.formatToBeijingDate(b.end)}}),await this.crawlLogObj.saveTaskSubTaskRet(o,T,k)}else if(g=!1,!p[T]){await this.crawlLogObj.debugLog(o,`${T}:创建导出`);const y=de("/api/merchant/file/export",t),I=await pe({mallId:r,url:y,data:{billingCycleList:[],taskType:f,financeDateStart:x,financeDateEnd:S},antiContentStr:this.antiContentStr});if(I.errorMsg)throw new Error(I.errorMsg);p[T]=!0}}await we(5e3)}await this.saveMallLastRsyncTime(r,"pddkj_eprFee"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(d){await this.crawlLogObj.saveTaskRet(o,De(Ae(d)))}}async startCrawlEprFee(r,t,a,s){const o=`EPR费用-${Wt(t)}`;if(!this.crawlLogObj.isTaskSuccess(o))try{const c=Date.now();await this.crawlLogObj.startTask(o),await this.loginMallAgent(r,t);let d=!1;const g={};for(;!d;){if(Date.now()-c>3e5)throw new bt("导出等待超时",300);d=!0;for(const f of[18,19]){const p=await this.queryExportHistory(r,t,f);let _="商品环保费";f===19&&(_="物流包装环保费");for(const b of[1,2,4])for(const x of this.groupBy30Days(a,s)){const S=this.formatToBeijingDate(x.start,"YYYY-MM-DD"),T=this.formatToBeijingDate(x.end,"YYYY-MM-DD"),v=`${S}-${T}-${f}-${b}`;if(this.crawlLogObj.isTaskSuccess(o,v))continue;const y=p.find(k=>`${k.financeStartTime}`==`${x.start.getTime()}`&&`${k.financeEndTime}`==`${x.end.getTime()}`&&+k.status==2&&`${k.exportType}`==`${b}`);if(y){const k=de("/api/merchant/file/export/download",t);let I=await pe({mallId:r,url:k,data:{id:y.id,taskType:f},antiContentStr:this.antiContentStr});const E=I.result.fileUrl;let M=[xo];b===4&&(M=[Lf]);const D=`${v}-${y.id}`,l=await this.getFileBase64(E);(b===2||b===4)&&(I=await Te({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:{feeTypeList:M,gmtOrderDateStart:this.formatToBeijingDate(x.start),gmtOrderDateEnd:this.formatToBeijingDate(x.end),orderDateType:bo,shopId:this.bindShopId,filename:D,file:l,requestId:this.requestId}})),(b===1||b===2)&&(I=await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:t,filename:D,file:l,platform:this.mallType,requestId:this.requestId,fundType:_,fundStatus:b===2?3:1,gmtBillStart:this.formatToBeijingDate(x.start),gmtBillEnd:this.formatToBeijingDate(x.end)}})),await this.crawlLogObj.saveTaskSubTaskRet(o,v,I)}else if(d=!1,!g[v]){await this.crawlLogObj.debugLog(o,`${v}:创建导出`);const k=de("/api/merchant/file/export",t),I={exportType:b,taskType:f,financeStartTime:x.start.getTime(),financeEndTime:x.end.getTime()},E=await pe({mallId:r,url:k,data:I,antiContentStr:this.antiContentStr});if(E.errorMsg)throw new Error(E.errorMsg);g[v]=!0}}}await we(5e3)}await this.saveMallLastRsyncTime(r,"pddkj_eprFee"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(o,De(Ae(c)))}}async startCrawlStockingPenalty(r,t,a,s){const o="账户资金-违规信息-备货违规",c="备货违规";if(!this.crawlLogObj.isTaskSuccess(o))try{await this.crawlLogObj.startTask(o),await this.loginMallAgent(r,t);const g=[];for(const p of this.groupBy30Days(a,s)){const _=p.start.getTime(),b=p.end.getTime();let x=1;const S=50,T=0;let v=0;const y=[],k=de("/mms/api/andes/punish/seller/queryPurchasePunishList",t);do{const E=await pe({mallId:r,url:k,data:{pageNo:x,pageSize:S,punishTabCode:T,status:3,startDateFrom:_,startDateTo:b},antiContentStr:this.antiContentStr});if(E.errorMsg)throw new Error(E.errorMsg);const M=E.result,D=M.list;if(D)for(const l of D)y.push(l);v=M.total,x++,await we(2e3)}while(y.length<v);for(const I of y)g.push(I)}const f=await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:t,file:"",platform:this.mallType,requestId:this.requestId,fundType:c,fundStatus:3,data:g,filename:o,gmtBillStart:a,gmtBillEnd:`${s} 23:59:59`}});if(f.result!=="success")throw new Error(f.reason);await this.saveMallLastRsyncTime(r,"stockingPenalty"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(g){await this.crawlLogObj.saveTaskRet(o,De(Ae(g)))}}async startCrawlQualityAccidentViolationDeduction(r,t,a,s){const o="账户资金-违规信息-质量事故违规",c="质量事故违规";if(!this.crawlLogObj.isTaskSuccess(o))try{await this.crawlLogObj.startTask(o),await this.loginMallAgent(r,t);const g=[];for(const p of this.groupBy30Days(a,s)){const _=p.start.getTime(),b=p.end.getTime();let x=1;const S=50,T=2;let v=0;const y=[],k=de("/mms/api/andes/punish/seller/listPunishRecord",t);do{const E=await pe({mallId:r,url:k,data:{pageNo:x,pageSize:S,punishTabCode:T,status:3,startDateFrom:_,startDateTo:b},antiContentStr:this.antiContentStr});if(E.errorMsg)throw new Error(E.errorMsg);const M=E.result,D=M.list;if(D)for(const l of D)y.push(l);v=M.total,x++,await we(2e3)}while(y.length<v);for(const I of y)g.push(I)}const f=await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:t,file:"",platform:this.mallType,requestId:this.requestId,fundType:c,fundStatus:3,data:g,filename:o,gmtBillStart:a,gmtBillEnd:`${s} 23:59:59`}});if(f.result!=="success")throw new Error(f.reason);await this.saveMallLastRsyncTime(r,"qualityAccidentViolationDeduction"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(g){await this.crawlLogObj.saveTaskRet(o,De(Ae(g)))}}async startCrawlBill(r,t,a){const s="账务明细";if(!this.crawlLogObj.isTaskSuccess(s))try{await this.crawlLogObj.startTask(s);const o=Date.now();let c=!1;const d={};for(;!c;){if(Date.now()-o>3e5)throw new bt("导出等待超时",300);c=!0;const g=await this.getChoiceTransactionRevenueExportHistoryTaskList(r);for(const f of this.groupBy30Days(t,a)){const p=`${f.start.getTime()}-${f.end.getTime()}`;if(this.crawlLogObj.isTaskSuccess(s,p))continue;const _=g.find(b=>`${b.searchExportTimeBegin}`==`${f.start.getTime()}`&&`${b.searchExportTimeEnd}`==`${f.end.getTime()}`&&+b.status==2);if(_)for(const b of["seller","global","us","eu"]){let x={};if(b==="seller"){const E={taskType:19,id:_.id},M=de("/api/merchant/file/export/download",b);x=await pe({mallId:r,url:M,data:E,antiContentStr:this.antiContentStr})}else x=await this.getAgentBillFile(r,b,_);if(x.errorCode!==1e6)throw new Error(x.errorMsg);const S=x.result.fileUrl;if(!S)throw new Error("获取下载地址为空");const T=`${s}-${p}-${b}-${_.id}`,v=await this.getFileBase64(S),y={feeTypeList:[Qx,Kx,jf],gmtOrderDateStart:this.timestampTranDate(_.searchExportTimeBegin),gmtOrderDateEnd:this.timestampTranDate(_.searchExportTimeEnd),orderDateType:bo,shopId:this.bindShopId,file:v,filename:T,requestId:this.requestId};await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:b,filename:T,platform:this.mallType,file:v,requestId:this.requestId,fundType:"结算明细",fundStatus:3,gmtBillStart:this.formatToBeijingDate(f.start),gmtBillEnd:this.formatToBeijingDate(f.end)}});const k=await Te({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:y});await this.crawlLogObj.saveTaskSubTaskRet(s,p,k)}else if(c=!1,!d[p]){const b={fundDetailExport:!0,taskType:19,beginTime:f.start.getTime(),endTime:f.end.getTime()},x=de("/api/merchant/file/export"),S=await pe({mallId:r,url:x,data:b,antiContentStr:this.antiContentStr});if(S.errorMsg)throw new Error(S.errorMsg);d[p]=!0}}await we(5e3)}await this.saveMallLastRsyncTime(r,"bill"),await this.crawlLogObj.saveTaskRet(s,Ne())}catch(o){await this.crawlLogObj.saveTaskRet(s,De(Ae(o)))}}async startCrawlFulfillmentBill(r,t,a,s){let o="履约服务账单/已缴费数据";if(t===1&&(o="履约服务账单/待缴费数据"),!this.crawlLogObj.isTaskSuccess(o))try{await this.crawlLogObj.startTask(o);const c=Date.now();let d=!1;const g={},f=13,p="seller",_=await this.queryExportHistory(r,p,f),b=iw(_,"id");for(;!d;){if(Date.now()-c>3e5)throw new bt("导出等待超时",300);d=!0;const S=(await this.queryExportHistory(r,p,f)).find(T=>!b[T.id]&&+T.status==2);if(S){const T=de("/api/merchant/file/export/download",p),v=await pe({mallId:r,url:T,data:{id:S.id,taskType:f},antiContentStr:this.antiContentStr});if(v.errorCode!==1e6)throw new Error(v.errorMsg);const y=v.result.fileUrl;if(!y)throw new Error("获取下载地址为空");const k=await this.getFileBase64(y),I=`${S.fundTypeDesc}-${S.id}`;let E;if(t===2){const D={feeTypeList:[Zx,Vx,Xx],shopId:this.bindShopId,file:k,filename:I,requestId:this.requestId};E=await Te({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:D})}const M=await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:p,file:"",platform:this.mallType,requestId:this.requestId,fundType:"履约服务账单明细",fundStatus:t===2?3:1,gmtBillStart:a,gmtBillEnd:s}});await this.crawlLogObj.saveTaskSubTaskRet(o,"",E??M)}else if(d=!1,!g[o]){const T={taskType:f,billStatus:t,mallId:r,pageNum:1,pageSize:20},v=de("/api/merchant/file/express/export"),y=await pe({mallId:r,url:v,data:T,antiContentStr:this.antiContentStr});if(y.errorMsg)throw new Error(y.errorMsg);g[o]=!0}await we(5e3)}await this.saveMallLastRsyncTime(r,"fulfillmentBill"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(o,De(Ae(c)))}}async getSettlementExportHistoryTaskList(r,t){var o;const a=de("/api/merchant/file/export/history/page",t);return((o=(await pe({mallId:r,url:a,data:{pageNum:1,pageSize:10,taskType:12},antiContentStr:this.antiContentStr})).result)==null?void 0:o.merchantMerchantFileExportHistoryList)||[]}async rsyncCustomOrderSkuInfo(r,t,a,s){var _;if(!a||a.length===0)return;const o=Ve,c=de("/bg-luna-agent-seller/product/customizeSku/pageQuery",t),d=20;let g=1,f=0,p=0;do{const b=await pe({mallId:r,url:c,data:{page:g,pageSize:d,subPurchaseOrderSns:a},antiContentStr:this.antiContentStr}),x=[];if(b.errorCode===1e6){f||(f=((_=b.result)==null?void 0:_.total)||0,p=Math.max(1,Math.ceil(f/d)));const S=b.result,T=(S==null?void 0:S.pageItems)||[];for(const v of T){const y=await this.buildCustomizeUploadData(r,v);x.push(y)}if(s.total+=x.length,x.length>0){await this.replaceCustomizePicUrlWithFetchInfo(x,s),await this.replaceCustomizePicFetchInfoWithUploadUrlEntity(x,s);const v=await Te({url:this.earthUrlsMap.uploadCustomizeGoodsList,method:"POST",data:{data:JSON.stringify(x),requestId:this.requestId,filename:`备货单定制品内容-${g}`,shopId:this.bindShopId}});if(v.result!=="success")throw new Error(v.reason)}}else throw new Error(b.errorMsg);if(console.debug(`采集定制品内容，${g}/${p}页完成`),await we(3e3),o.isDebug&&g===2){console.warn("debug模式只取两页");break}g++}while((g-1)*d<f)}async replaceCustomizePicFetchInfoWithUploadUrlEntity(r,t){const a=Mi(r,2),s=async(o,c)=>{const d=[];for(const f of o)for(const p in f[c]){const _=f[c][p],b=new Promise(x=>{(async()=>{try{const S=await Te({url:this.earthUrlsMap.uploadCustomizePic,method:"POST",data:{ext:_.ext,sku:f.customProductSkuId,mallId:f.mallId,file:_.base64}});if(S.result!=="success")throw new Error(S.reason);f[c][p]=S.entity}catch(S){f[c][p]="",this.handleCountResult({error:S,resultsMap:t,customProductSkuId:f.customProductSkuId})}x(!0)})()});d.push(b)}const g=Mi(d,6);for(const f of g)await Promise.all(f).catch(()=>{})};for(const o of a)await s(o,"originalImgUrls"),await s(o,"previewImgUrls"),await s(o,"regionImgUrls")}async buildCustomizeUploadData(r,t){var _,b,x,S,T,v;const a=t.subPurchaseOrderSnList,s=t.personalProductSkuId,o=(_=t.productSkuCustomization)==null?void 0:_.customizationTmplSurfaces,c=((b=t.productSkuCustomization)==null?void 0:b.customizedPreviewItems)||[],d=[],g=[],f=[];let p=null;for(const y of c){if(`${y.previewType}`=="3"){d.push(y.imageUrlDisplay),p=y.customizedText;continue}if(`${y.previewType}`=="1"){g.push(y.imageUrlDisplay);for(const k of o)for(const I of(k==null?void 0:k.regions)||[]){const E=`${y.imageUrlDisplay}&imageMogr2/cut/${(x=I.dimension)==null?void 0:x.width}x${(S=I.dimension)==null?void 0:S.height}x${(T=I.position)==null?void 0:T.x}x${(v=I.position)==null?void 0:v.y}`;f.push(E)}continue}}return{mallId:r,subPurchaseOrderSns:a,customProductSkuId:s,originalImgUrls:d,previewImgUrls:g,regionImgUrls:f,customText:p}}async replaceCustomizePicUrlWithFetchInfo(r,t){const a={},s=[];for(const d of r){const g=[...d.originalImgUrls,...d.previewImgUrls,...d.regionImgUrls].map(f=>({url:f,customProductSkuId:d.customProductSkuId}));s.push(...g)}const o=Mi(s,6);for(const d of o){const g=[];for(const{url:f,customProductSkuId:p}of d){const _=new Promise(b=>{(async()=>{try{const x=f.substring(f.lastIndexOf(".")+1).toLowerCase().split("?")[0],S=await this.fetchSkuCustomizePic(f);S&&(a[f]={base64:S,ext:x}),b(!0)}catch(x){this.handleCountResult({error:x,resultsMap:t,customProductSkuId:p}),b(!0)}})()});g.push(_)}await Promise.all(g),await we(2e3)}const c=(d,g)=>{const f=[];for(const p of d[g])a[p]&&f.push(a[p]);d[g]=f};for(const d of r)c(d,"originalImgUrls"),c(d,"previewImgUrls"),c(d,"regionImgUrls")}async fetchSkuCustomizePic(r){let t=null;try{t=await fetch(r)}catch{const o="采集图片失败，尝试切换合适的网络环境后再进行操作";throw new Error(o)}if(!t||!t.ok)return!1;const a=await t.blob();return await new Promise(o=>{const c=new FileReader;c.onload=function(d){var f;let g=(f=d==null?void 0:d.target)==null?void 0:f.result;if(g&&g.indexOf("base64,")>0)g=g.split("base64,")[1];else{let _=(JSON.parse(g)||{}).message;if(_)throw _.includes("Too many request")&&(_="请求获取定制品图片接口过于频繁，请稍后再试"),new Error(_)}o(g)},c.readAsDataURL(a)})}getPastDate(r){return et().subtract(r,"day").format("YYYY-MM-DD")}async getProductSkuIdAndDtSaleListMap(r,t,a,s){const o=de("/oms/bg/venom/api/supplier/sales/management/querySkuSalesNumber"),c=await pe({mallId:r,url:o,data:{endDate:s,startDate:a,productSkuIds:t},antiContentStr:this.antiContentStr});if(c.errorCode!==1e6)throw new Error(c.errorMsg);const d={};for(const g of c.result||[])d[g.prodSkuId]||(d[g.prodSkuId]=[]),d[g.prodSkuId].push({date:g.date,sale:g.salesNumber});return d}async getChoiceTransactionRevenueExportHistoryTaskList(r){var s;const t=de("/api/merchant/file/export/history/page"),a=await pe({mallId:r,url:t,data:{pageNum:1,pageSize:10,taskType:19},antiContentStr:this.antiContentStr});if(a.errorMsg)throw new Error(a.errorMsg);return((s=a.result)==null?void 0:s.merchantMerchantFileExportHistoryList)||[]}async getAgentBillFile(r,t,a){await this.loginMallAgent(r,t);const s=31;let o={taskType:s,params:a.agentSellerExportParams,sign:a.agentSellerExportSign},c=de("/api/merchant/file/export",t),d=await pe({mallId:r,url:c,data:o,antiContentStr:this.antiContentStr});if(d.errorMsg&&d.errorMsg!=="导出任务已存在, 请勿重复创建, 请前往【导出历史】查看")throw new Error(d.errorMsg);const g=d.result,f=Date.now();d={};do{if(o={id:g,taskType:s},c=de("/api/merchant/file/export/download",t),d=await pe({mallId:r,url:c,data:o,antiContentStr:this.antiContentStr}),d.errorCode===1e6)break;if(d.errorMsg!=="导出任务未完成")throw new Error(d.errorMsg);if(await we(5e3),Date.now()-f>3e5)throw new bt("导出等待超时",300)}while(!0);return d}async saveMallLastRsyncTime(r,t){return await it({url:this.earthChoiceUrlMap.saveMallLastRsyncTime,method:"POST",data:{mallId:r,rsyncType:t}})}async loginMallAgent(r,t){var g;let a=de("/bg/quiet/api/auth/obtainCode");const s=await pe({mallId:r,url:a,data:{redirectUrl:de("/main/authentication",t)},antiContentStr:this.antiContentStr});if(s.errorCode!==1e6)throw new Error(`自动登录卖家中心失败1:${s.errorMsg}`);a=de("/api/seller/auth/loginByCode",t);const o={code:(g=s.result)==null?void 0:g.code,confirm:!0,targetMallId:r},c=2;let d=0;for(;d<c;)try{const f=await pe({mallId:r,url:a,data:o,antiContentStr:this.antiContentStr});if(f.errorCode!==1e6)throw new Error(`自动登录卖家中心失败:${f.errorMsg}`===void 0?JSON.stringify(f):f.errorMsg);return}catch(f){if(d++,d<c)await we(3e3);else throw new Error(`自动登录卖家中心失败e:${Ae(f)}`)}}async startRsyncRiskTag(r){await this.loginMallAgent(r,"global");const t={};await this.startRsyncCompliantLivePhotos(t,r),await this.startRsyncComplianceProperty(t,r),await this.uploadSpuRiskTags(t),await this.saveMallLastRsyncTime(r,"riskTag")}async startRsyncCompliantLivePhotos(r,t){var o,c;const a="合规中心/商品实拍图";if(this.crawlLogObj.isTaskSuccess(a))return;const s=Ve;try{await this.crawlLogObj.startTask(a);const d=de("/api/flash/real_picture/list","global"),g=20;let f=1,p=0,_=0;do{const b=await pe({mallId:t,url:d,data:{page:f,page_size:g},antiContentStr:this.antiContentStr});if(b.errorCode!==1e6)throw new Error(b.errorMsg);p||(p=Math.min(200,((o=b.result)==null?void 0:o.total)||0),_=Math.max(1,Math.ceil(p/g)));const x=((c=b.result)==null?void 0:c.items)||[];for(const S of x)this.addSpuRiskTag(r,S.spu_id,40001);if(await this.crawlLogObj.updateTaskProgress(a,`第${f}/${_}页`),await we(3e3),s.isDebug&&f===2){this.crawlLogObj.debugLog(a,"debug模式只取两页");break}f++}while((f-1)*g<p);await this.crawlLogObj.saveTaskRet(a,Ne())}catch(d){await this.crawlLogObj.saveTaskRet(a,De(Ae(d)))}}async startRsyncComplianceProperty(r,t){var o,c;const a="合规中心/商品合规信息";if(this.crawlLogObj.isTaskSuccess(a))return;const s=Ve;try{this.crawlLogObj.startTask(a);const d=de("/ms/bg-flux-ms/compliance_property/page_query","global"),g=20;let f=1,p=0,_=0;do{const b=await pe({mallId:t,url:d,data:{page_num:f,page_size:g,type:2},antiContentStr:this.antiContentStr});if(b.errorCode!==1e6)throw new Error(b.errorMsg);p||(p=Math.min(200,((o=b.result)==null?void 0:o.total)||0),_=Math.max(1,Math.ceil(p/g)));const x=((c=b.result)==null?void 0:c.data)||[];for(const S of x)this.addSpuRiskTag(r,S.spu_id,40001);if(this.crawlLogObj.updateTaskProgress(a,`第${f}/${_}页`),await we(3e3),s.isDebug&&f===2){this.crawlLogObj.debugLog(a,"debug模式只取两页");break}f++}while((f-1)*g<p);await this.crawlLogObj.saveTaskRet(a,Ne())}catch(d){await this.crawlLogObj.saveTaskRet(a,De(Ae(d)))}}async uploadSpuRiskTags(r){const a=(await Te({url:this.earthUrlsMap.getTimestamp,method:"GET"})).timestamp,s=qf(r,50);for(const o of s)await Te({url:this.earthUrlsMap.batchAddGoodsRiskTags,method:"POST",data:{productIdAndTagValuesMap:o,batchAddTimestamp:a,filename:"风险标签",requestId:this.requestId,shopId:this.bindShopId}});await Te({url:this.earthUrlsMap.clearInvalidGoodsRiskTags,method:"POST",data:{batchAddTimestamp:a}})}addSpuRiskTag(r,t,a){if(t&&a){if(!r[t])r[t]=[];else if(r[t].includes(a))return;r[t].push(a)}}coverToBeijingDate(r){if(typeof r==="string"){const a=new Date(`${r} UTC+08:00`).toISOString();return new Date(a)}else throw new Error(`${r} 数据格式异常`)}formatToBeijingDate(r,t="YYYY-MM-DD HH:mm:ss"){console.debug("formatToBeijingDate",r,t);const a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Shanghai",hour12:!1},o=new Intl.DateTimeFormat("en-US",a).format(r),[c,d]=o.split(", "),[g,f,p]=c.split("/").map(S=>S.padStart(2,"0")),[_,b,x]=d.split(":").map(S=>S.padStart(2,"0"));return t.replace("YYYY",p).replace("MM",g).replace("DD",f).replace("HH",_).replace("mm",b).replace("ss",x)}groupBy30Days(r,t){const a=[];t=this.coverToBeijingDate(`${t} 23:59:59`);let s=this.coverToBeijingDate(`${r} 00:00:00`);for(;s.getTime()<=t.getTime();){const o=s;let c=new Date(o.getTime()+30*86400*1e3+86399*1e3);if(c.getTime()>t.getTime()&&(c=t),s.getTime()===c.getTime())break;const d={start:o,end:c};a.push(d),s=new Date(o.getTime()+26784e5)}return a}async getChoiceExportHistory(r,t,a){var c;const s=de("/api/merchant/file/export/history/page",t),o=await pe({mallId:r,url:s,data:{pageNum:1,pageSize:20,taskType:a},antiContentStr:this.antiContentStr});if(o.errorMsg)throw new Error(o.errorMsg);return((c=o.result)==null?void 0:c.merchantMerchantFileExportHistoryList)||[]}timestampTranDate(r,t="YYYY-MM-DD HH:mm:ss"){let a="";switch(typeof r){case"string":En(r)||(a=et(+r).format(t||"YYYY-MM-DD"),(a.includes("1970")||+r<5e3)&&(a=et(r).format(t||"YYYY")),r=a);break;case"number":r=et(r).format(t||"YYYY-MM-DD");break;case"object":if(gt(r))for(let s=0;s<r.length;s++)En(r[s])||(a=et(+r[s]).format(t||"YYYY-MM-DD"),(a.includes("1970")||+r[s]<5e3)&&(a=et(r[s]).format(t||"YYYY")),r[s]=a);break}return r}async getFileBase64(r){if(!r)return"";const a=await(await fetch(r)).blob();return await this.transBlobToBase64(a)}transBlobToBase64(r){return new Promise(t=>{const a=new FileReader;a.onload=function(s){var c;let o=(c=s==null?void 0:s.target)==null?void 0:c.result;o&&o.indexOf("base64,")>0&&(o=o.split("base64,")[1]),t(o)},a.readAsDataURL(r)})}checkExportHistoryTaskDateIsValid(r){const t={financeDateStart:"YYYY-MM-DD",financeDateEnd:"YYYY-MM-DD"},a={"YYYY-MM-DD":/^\d{4}-\d{2}-\d{2}$/};return Object.keys(t).every(s=>{const o=t[s];if(r[s]){const c=new Date(r[s]);return Number.isNaN(c.getTime())?a[o].test(r[s]):!1}return!0})}async queryExportHistory(r,t,a,s=0){var f;const o=de("/api/merchant/file/export/history/page",t),c=await pe({mallId:r,url:o,data:{pageNum:1,pageSize:20,taskType:a},antiContentStr:this.antiContentStr});if(c.errorMsg)throw new Error(c.errorMsg);const d=((f=c.result)==null?void 0:f.merchantMerchantFileExportHistoryList)||[],g=[];for(const p of d){const{status:_}=p;if(+_==1){if(!this.checkExportHistoryTaskDateIsValid(p))continue;if(await we(5e3),s++,s>60)throw new bt("导出任务超时",300);return await this.queryExportHistory(r,t,a,s)}+_==2&&g.push(p)}return g}async startCrawlLocalOrderList(r,t,a){var c,d;const s="订单/管理订单";if(this.crawlLogObj.isTaskSuccess(s))return;const o=Ve;try{a=new Date(a),a.setHours(23,59,59),t=new Date(t),t.setHours(0,0,0),this.crawlLogObj.startTask(s);const g=[];for(const x of[1,2,3,4]){let S=1;const T=10;let v=0,y=0;do{const k=await gr({mallId:r,url:`${this.host}/mms/kirogi/local/recentOrderList`,data:{packageAbnormalTypeList:[],pageNumber:S,pageSize:T,parentOrderTimeEnd:a.getTime()/1e3,parentOrderTimeStart:t.getTime()/1e3,queryType:x,sortType:1}});if(k.success!==!0)throw new Error(k.errorMsg);v||(v=Math.min(200,(c=k.result)==null?void 0:c.totalItemNum),y=Math.max(1,Math.ceil(v/T)));const I=((d=k.result)==null?void 0:d.pageItems)||[];for(const M of I){const l=M.parentOrderMap.poCurrencyExchangeInfo.storeSettlementCurrency;for(const j of M.orderList)g.push({orderSn:j.orderSn,orderSkuId:j.skuId,orderProductId:j.goodsId,localOrderStatus:j.localOrderStatus,goodsRetailPrice:Ff(j.goodsRetailPrice),goodsBasePrice:Ff(j.goodsBasePrice),quantity:j.quantity,shippedQuantity:j.shippedQuantity,currency:l})}let E;switch(x){case 4:E="已发货";break;case 3:E="已取消";break;case 2:E="未发货";break;case 1:E="平台处理中";break}if(this.crawlLogObj.updateTaskProgress(s,`${E} 第${S}/${y}页`),await we(3e3),o.isDebug&&S===2){this.crawlLogObj.debugLog(s,"debug模式只取两页");break}S++}while((S-1)*T<v)}const p=(await it({url:this.earthUrlsMap.getTimestamp,method:"GET"})).timestamp,_=qf(g,50);let b=0;for(const x of _)await Te({url:this.earthLocalUrlMap.uploadLocalOrderSkuList,method:"POST",data:{shopId:this.bindShopId,orderSkuList:x,batchAddTimestamp:p,requestId:this.requestId,filename:`${s}-${b}`}}),b++;await this.saveMallLastRsyncTime(r,"localOrder"),await this.crawlLogObj.saveTaskRet(s,Ne())}catch(g){await this.crawlLogObj.saveTaskRet(s,De(Ae(g)))}}async startCrawlLocalOrderReport(r,t,a){var o;const s="订单/订单报告";if(!this.crawlLogObj.isTaskSuccess(s))try{const c=Date.now();this.crawlLogObj.startTask(s);let d=!1;for(a=new Date(a),a.setHours(23,59,59),t=new Date(t),t.setHours(0,0,0);!d;){if(Date.now()-c>3e5)throw new bt("导出等待超时",300);d=!0;const f=(await this.getLocalOrderExportTaskList(r)).find(p=>new Date(p.jobApplyTimeStr).getTime()>c&&`${p.jobStatus}`=="1");if(f){const p=await gr({mallId:r,url:`${this.host}/mms/kirogi/local/export/task/download`,data:{jobId:f.jobId}});if(p.success!==!0)throw new Error(p.errorMsg);const _=(o=p.result)==null?void 0:o.downloadUrl;if(!_)throw new Error("获取下载地址为空");const b={gmtOrderDateStart:this.timestampTranDate(t),gmtOrderDateEnd:this.timestampTranDate(a),shopId:this.bindShopId,file:await this.getFileBase64(_)};await Te({url:this.earthLocalUrlMap.uploadLocalOrderReport,method:"POST",data:b})}else{d=!1;const p={parentOrderStatusList:[1,2,4,41,5,51,3],parentOrderTimeEnd:a.getTime()/1e3,parentOrderTimeStart:t.getTime()/1e3},_=`${this.host}/mms/kirogi/local/export/addOrdersExportTask`,b=await gr({mallId:r,url:_,data:p});if(b.success!==!0)throw new Error(b.errorMsg)}await we(5e3)}await this.saveMallLastRsyncTime(r,"bill"),await this.crawlLogObj.saveTaskRet(s,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(s,De(Ae(c)))}}getThreeDaysAgoLastSecond(){const r=new Date,t=new Date(r);return t.setDate(t.getDate()-3),t.setHours(23,59,59),t}async startCrawlLocalBillReport(r,t,a){var o;const s="财务/报告库";if(!this.crawlLogObj.isTaskSuccess(s))try{const c=Date.now();this.crawlLogObj.startTask(s);let d=!1;const g={};a=new Date(a),a.setHours(23,59,59);const f=this.getThreeDaysAgoLastSecond();for(a.getTime()>f.getTime()&&(a=f),t=new Date(t),t.setHours(0,0,0);!d;){if(Date.now()-c>3e5)throw new bt("导出等待超时",300);d=!0;const _=(await this.getLocalBillExportTaskList(r)).find(b=>`${b.end_time_stamp}`==`${a.getTime()}`&&`${b.start_time_stamp}`==`${t.getTime()}`&&`${b.status}`=="1");if(_){const b=await gr({mallId:r,url:`${this.host}/mms/statement/export/task/result`,data:{flowId:_.flow_id}});if(b.success!==!0)throw new Error(b.error_msg);const x=(o=b.result)==null?void 0:o.file_url;if(!x)throw new Error("获取下载地址为空");const S={feeTypeList:[Df,Rf,Jx,eb,Mf,rb,Pf,$f,tb,nb],shopId:this.bindShopId,file:await this.getFileBase64(x),filename:_.flow_id,gmtOrderDateStart:this.timestampTranDate(t.getTime()),gmtOrderDateEnd:this.timestampTranDate(a.getTime())};await Te({url:this.earthLocalUrlMap.createPddkjLocalImportTask,data:S,method:"POST"})}else if(d=!1,!g[s]){const b={beginCreateTime:t.getTime(),endCreateTime:a.getTime()},x=`${this.host}/mms/statement/export/task/create`,S=await gr({mallId:r,url:x,data:b});if(S.success!==!0)throw new Error(S.error_msg);g[s]=!0}await we(5e3)}await this.saveMallLastRsyncTime(r,"bill"),await this.crawlLogObj.saveTaskRet(s,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(s,De(Ae(c)))}}async getLocalBillExportTaskList(r){const t=`${this.host}/mms/statement/export/task/list`,a=await gr({mallId:r,url:t,data:{page:1,size:10}});if(a.success!==!0)throw new Error(a.errorMsg);return a.result.export_task_list}async getLocalOrderExportTaskList(r){const t=`${this.host}/mms/kirogi/local/export/listOrdersExportTask`,a=await gr({mallId:r,url:t,data:{pageNumber:1,pageSize:10}});if(a.success!==!0)throw new Error(a.errorMsg);return a.result.pageItems}async startCrawlAccountOverview(r){const t="账户资金/资金中心-货款账户";if(!this.crawlLogObj.isTaskSuccess(t))try{await this.crawlLogObj.startTask(t);const a=de("/api/merchant/payment/account/amount/info");let s=await pe({mallId:r,url:a,data:{},antiContentStr:this.antiContentStr});if(s.errorCode!==1e6)throw new Error(s.errorMsg);const{currency:o,totalAmount:c,availableBalance:d,mallDepositLimitAmount:g}=s.result||{},f={mallId:r,shopId:this.bindShopId,requestId:this.requestId,region:"seller",totalAmount:c,availableAmount:d,accountReservedAmount:g,currency:o};if(s=await Te({url:this.earthUrlsMap.saveAccountOverview,method:"POST",data:f}),s.result!=="success")throw new Error(s.reason);await this.saveMallLastRsyncTime(r,"accountOverview"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(a){await this.crawlLogObj.saveTaskRet(t,De(Ae(a)))}}removeCurrencyUnit(r){return r.replace(/[^\d.-]/g,"")}async startCrawlFundFrozen(r){var a;const t="账户资金/资金限制";if(!this.crawlLogObj.isTaskSuccess(t))try{await this.crawlLogObj.startTask(t);for(const s of["global","us","eu"]){await this.loginMallAgent(r,s);const o=de("/api/merchant/fund-frozen/rules",s);let c=await pe({mallId:r,url:o,data:{},antiContentStr:this.antiContentStr});if(c.errorCode!==1e6)throw new Error(c.errorMsg);const d=((a=c.result)==null?void 0:a.rules)||[],g=[];for(const f of d){const{frozenType:p,reason:_}=f;await this.crawlLogObj.updateTaskProgress(t,`采集${Wt(s)}-${_}`);const b=10;let x=1,S=0;do{const T=await pe({mallId:r,url:de("/api/merchant/fund-frozen/details",s),data:{frozenType:p,pageNum:x,pageSize:b},antiContentStr:this.antiContentStr});if(T.errorCode!==1e6)throw new Error(T.errorMsg);if(!T.result)break;const{detailsRowCount:v,detailsColumns:y,detailsRows:k}=T.result;S||(S=v||0),x===1&&Object.assign(f,{detailsRowCount:v,detailsColumns:y,detailsRows:[]});for(const I of k)I.amount=this.removeCurrencyUnit(I.amount),f.detailsRows.push(I);await we(3e3),x++}while((x-1)*b<S);g.push({...f,amount:this.removeCurrencyUnit(f.amount)})}if(g.length>0&&(c=await Te({url:this.earthUrlsMap.saveAccountLimitationOfFunds,method:"POST",data:{mallId:r,shopId:this.bindShopId,region:s,requestId:this.requestId,list:g}}),c.result!=="success"))throw new Error(c.reason)}await this.saveMallLastRsyncTime(r,"fundFrozen"),await this.crawlLogObj.saveTaskRet(t,Ne())}catch(s){await this.crawlLogObj.saveTaskRet(t,De(Ae(s)))}}async startCrawlWaitSettlementData(r,t,a,s){const o=`账户资金-结算数据-${Wt(t)}`;if(!this.crawlLogObj.isTaskSuccess(o))try{await this.crawlLogObj.startTask(o),await this.loginMallAgent(r,t);const c=de("/api/xiaowenhou/settle-flow/sm/unsettle/page-query",t),d=await pe({mallId:r,url:c,data:{orderCreateTimeEnd:s,orderCreateTimeStart:a,pageNum:1,pageSize:20},antiContentStr:this.antiContentStr});if(d.success!==!0)throw new Error(d.errorMsg);const g=d.result||{},f=g.totalAmount||{},p=g.productPaymentTotalAmount||{},_=g.productRefundTotalAmount||{},b=g.shippingPaymentTotalAmount||{},x=g.shippingRefundTotalAmount||{},S={mallId:r,shopId:this.bindShopId,requestId:this.requestId,region:t,waitSettleAmount:f.value,currency:f.currencyCode,productPaymentTotalAmount:p.value,productPaymentTotalAmountCurrency:p.currencyCode,productRefundTotalAmount:_.value,productRefundTotalAmountCurrency:_.currencyCode,shippingPaymentTotalAmount:b.value,shippingPaymentTotalAmountCurrency:b.currencyCode,shippingRefundTotalAmount:x.value,shippingRefundTotalAmountCurrency:x.currencyCode};await Te({url:this.earthUrlsMap.saveAccountWaitSettleAmount,method:"POST",data:S}),await this.saveMallLastRsyncTime(r,"accountOverview"),await this.crawlLogObj.saveTaskRet(o,Ne())}catch(c){await this.crawlLogObj.saveTaskRet(o,De(Ae(c)))}}async startCrawlEprProxyPaymentServiceFeeWait(r,t){var s;const a=`EPR代付服务费-待扣费-${Wt(t)}`;if(!this.crawlLogObj.isTaskSuccess(a))try{const o=Date.now();await this.crawlLogObj.startTask(a),await this.loginMallAgent(r,t);let c=!1;const d=15;for(;!c;){if(Date.now()-o>3e5)throw new bt("导出等待超时",300);c=!0;const f=(await this.queryExportHistory(r,t,d)).find(p=>p.status==2);if(f){const p=de("/api/merchant/file/export/download",t),b=(s=(await pe({mallId:r,url:p,data:{id:f.id,taskType:d},antiContentStr:this.antiContentStr})).result)==null?void 0:s.fileUrl,x=await this.getFileBase64(b),S=a;await Te({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:r,region:t,filename:S,file:x,platform:this.mallType,requestId:this.requestId,fundType:"代付服务费",fundStatus:1}})}else{c=!1,await this.crawlLogObj.debugLog(a,"创建导出");const p=de("/api/merchant/file/export",t),b=await pe({mallId:r,url:p,data:{billingCycleList:[],taskType:d},antiContentStr:this.antiContentStr});if(b.errorMsg)throw new Error(b.errorMsg)}}await this.crawlLogObj.saveTaskRet(a,Ne())}catch(o){await this.crawlLogObj.saveTaskRet(a,De(Ae(o)))}}}class zf{constructor(r){ne(this,"earthUrlsMap",{getCrawlTaskUrl:`${ve}/platform/pddkj/stat/crawl/get_crawl_task`,initCrawlRequest:`${ve}/platform/pddkj/stat/crawl/init_crawl_request`});ne(this,"runStatus","wait");ne(this,"crawlQueueList",[]);ne(this,"isRunning",!1);ne(this,"nextAutoCrawlTime",0);ne(this,"antiContentStr");this.antiContentStr=r}getAllWindows(){return new Promise(r=>{le.windows.getAll({},t=>{r(t)})})}async run(r){console.debug("CrawlQueue run");try{if(this.runStatus="process",!Ve.crawlTabId){let t=await Fe.getItem(Uf);t=t?Number.parseInt(t):null,t=En(t)?null:t,Ve.crawlTabId=t}for(;;){const a=(await this.getAllWindows()).length;if(console.debug("打开窗口数量",a),a>0){await this.autoCrawl();let s=await this.getTaskTs();const o=await Fe.getItem("local:newTs");if(o&&(s=o,Fe.removeItem("local:newTs")),s&&s>r){this.runStatus="waitStop";break}}await we(9e5)}return new Promise(t=>{const a=setInterval(()=>{console.debug("wait stop"),this.isRunning===!1&&(clearInterval(a),console.debug("task stop"),t(!0))},3e3)})}catch(t){throw this.runStatus="waitStop",t}}async autoCrawl(){if(Date.now()<this.nextAutoCrawlTime)return;Ve.isDebug?this.nextAutoCrawlTime=Date.now()+6e4:this.nextAutoCrawlTime=Date.now()+36e5;try{const t=await it({url:this.earthUrlsMap.getCrawlTaskUrl,method:"GET"}),a=(t==null?void 0:t.taskList)||[];if(a.length){const s=await this.getTemuMallMap();for(const o of a){const c=s[o.mallId];c&&(o.mallName=c.mallName,this.addCrawlQueueByTask(o))}}console.debug(ze(),"crawlQueueList",this.crawlQueueList)}catch(t){console.debug(ze(),"autoCrawl fail",t)}}async getTaskTs(){const r=await it({url:"/open/plugin/getBgTaskCodeTs",method:"GET"});return r==null?void 0:r.ts}addCrawlQueueByTask(r){console.debug("addCrawlQueueByTask",r);const{mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,host:d}=r;this.addCrawlQueue({mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,action:"auto",host:d})}async addCrawlQueue(r){const{mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,startDate:d,endDate:g,action:f,gmtExec:p,host:_}=r||{},b=this.crawlQueueList.find(S=>`${S.mallId}`==`${t}`);(!b||b.locked===0)&&(this.crawlQueueList=this.crawlQueueList.filter(S=>`${S.mallId}`!=`${t}`),this.crawlQueueList.push({mallId:t,mallName:a,mallType:s,bindShopId:o,authAppNameList:c,startDate:d,endDate:g,action:f||"auto",retryTimes:0,locked:0,gmtExec:p||ze(),gmtLock:null,requestId:b&&b.requestId,host:_}),this.crawlQueueList.sort((S,T)=>new Date(S.gmtExec).getTime()-new Date(T.gmtExec).getTime()));const x=new ei(t);await x.init(),x.sendToClientTab(),this.start()}async getTemuMallMap(){const r=de("/bg/quiet/api/mms/userInfo"),t=await pe({url:r,antiContentStr:this.antiContentStr}),a={};if(t.result&&t.result.companyList&&t.result.companyList.length)for(const s of t.result.companyList)for(const o of s.malInfoList||[])a[o.mallId]=o;return a}async start(){if(console.debug("start"),!this.isRunning){for(console.debug(ze(),"start process queue"),this.isRunning=!0;;){let r=null;try{if(r=await this.lockQueue(),console.debug(ze(),"lock queue",r),r){const t=await this.processQueue(r);console.debug(ze(),"processQueue",t),await this.clearQueue(r,t)}else if(this.crawlQueueList.length>0)console.debug(ze(),"lock empty,sleep"),await we(1e4);else{console.debug(ze(),"stop timer");break}}catch(t){console.debug(ze(),"processQueue exception",r,t)}if(this.runStatus==="waitStop")break}this.isRunning=!1}}async lockQueue(){this.crawlQueueList=this.crawlQueueList.filter(a=>a.retryTimes<5);const r=ze(),t=this.crawlQueueList.find(a=>a.locked===0&&a.gmtExec<=r);if(t){if(!t.requestId){const a=await this.initRequestId(t);if(a.result==="success")t.requestId=a.requestId;else return t.retryTimes++,null}t.locked=1,t.gmtLock=r}return t}async processQueue(r){try{return await new Bf({...r,antiContentStr:this.antiContentStr}).startCrawl(),{result:"success",reason:""}}catch(t){return t instanceof bt?{result:"fail",canRetry:!0,sleepSeconds:(t==null?void 0:t.sleepSeconds)||1800,reason:t.message}:{result:"fail",canRetry:!1,sleepSeconds:0,reason:Ae(t)}}}async clearQueue(r,t){if(t.canRetry){const s=this.crawlQueueList.find(o=>`${o.mallId}`==`${r.mallId}`);s.retryTimes++,s.locked=0,s.gmtExec=ze(t.sleepSeconds||1800)}else this.crawlQueueList=this.crawlQueueList.filter(s=>`${s.mallId}`!=`${r.mallId}`);const a=new ei(r.mallId,r.requestId);await a.init(),a.sendToClientTab()}initRequestId({mallId:r,mallName:t,action:a}){return it({url:this.earthUrlsMap.initCrawlRequest,method:"POST",data:{mallId:r,mallName:t,action:a}})}}class ob{constructor(r){ne(this,"antiContentStr");this.antiContentStr=r}async run(){console.debug("CrawlTask"),Ve.crawlQueue||(Ve.crawlQueue=new zf(this.antiContentStr),await Fe.getItem("local:crawlDebug")&&(Ve.isDebug=!0));try{for(;;){const{ts:r,result:t}=await this.getTaskCode();if(console.debug("getTaskCode",r),t==="success"){if(await Ve.crawlQueue.run(r)!==!0)throw new Error("返回不是true");await we(5e3)}else await we(36e5)}}catch(r){Fe.setItem("local:bgTaskFail",`异常:${Date.now()}:${r==null?void 0:r.message}`)}}async getTaskCode(){return it({url:"/open/plugin/getBgTaskCode",method:"GET"})}}const Vn=Object.freeze(Object.defineProperty({__proto__:null,CrawlLog:ei,CrawlQueue:zf,CrawlTask:ob,CrawlTemu:Bf,LOCAL_CRAWL_MALL_INFO_LIST:To,LOCAL_CRAWL_TAB_ID:Uf,LOCAL_TEMU_ANTI_CONTENT:ab,_globalCrawlData:Ve,ajaxPddkjAgent:pe,ajaxPddkjLocal:gr},Symbol.toStringTag,{value:"Module"}));function lb(){const{LOCAL_CRAWL_MALL_INFO_LIST:e,_globalCrawlData:r,LOCAL_TEMU_ANTI_CONTENT:t}=Vn,{LOCAL_CRAWL_MALL_INFO_LIST:a,_globalCrawlData:s}=Zn;le.runtime.onInstalled.addListener(async c=>{c.reason==="update"&&(Fe.removeItem(e),Fe.removeItem(a))}),le.tabs.onRemoved.addListener(async c=>{(r==null?void 0:r.crawlTabId)===c&&(Fe.removeItem(e),Fe.removeItem(t)),(s==null?void 0:s.crawlTabId)===c&&Fe.removeItem(a)});function o(c){(async function(){const{requestHeaders:d}=c;if(!await Fe.getItem(t)){const f=d.find(p=>p.name==="Anti-Content");f&&Fe.setItem(t,f.value)}})()}le.webRequest.onBeforeSendHeaders.addListener(o,{urls:["*://seller.kuajingmaihuo.com:*/*"],types:["main_frame","sub_frame","xmlhttprequest"]},["requestHeaders"])}const{sendMessage:AT,onMessage:_o}=Kt();function ub(){const e={};let r=[];Qr({url:"/open/plugin/getInjectRecordWebRequestHistoryRules",method:"GET"}).then(s=>{r=s});function t(s){let o;try{if(!r||!r.length)return o;for(const c of r)if(new RegExp(c.rule,"i").test(s)){o=c;break}}catch{o=void 0}return o}function a(s){const o=t(s.url)||{};if(!o)return;let c=s.url;o.formatUrl?c=o.formatUrl:o.hasParams||(c=s.url.replace(/\?.*/,""));const d=e[s.tabId]||{};d[c]=ln(s,["tabId","url"]),e[s.tabId]=d}return le.webRequest.onBeforeRequest.addListener(a,{urls:["<all_urls>"],types:["main_frame","sub_frame"]},["requestBody"]),le.tabs.onRemoved.addListener(s=>{e[s]&&delete e[s]}),_o("getUrlRequestHistory",s=>{var f;const o=(f=s.sender.tab)==null?void 0:f.id;if(!o||!e[o])return null;const c=e[o],d=s.data;return c[d]})}function cb(e){return`local:purchaseOrderInfo-${e}`}function fb(){le.tabs.onRemoved.addListener(e=>{Fe.removeItem(cb(e))})}function db(){return _o("execute1688SearchSamePutImageScript",e=>{const r=e.sender.tab.id,t=e.data;return le.scripting.executeScript({target:{tabId:r},world:"MAIN",args:[t],func:a=>{try{const s={api:"mtop.1688.imageService.putImage",data:JSON.stringify({imageBase64:a,appName:"searchImageUpload",appKey:"pvvljh1grxcmaay2vgpe9nb68gg9ueg2"}),ecode:"0",v:"1.0",type:"POST"};return window.lib.mtop.request(s)}catch(s){return s}}})})}function hb(){return _o("execute1688GetWindowContextScript",e=>{const r=e.sender.tab.id;return le.scripting.executeScript({target:{tabId:r},world:"MAIN",func:()=>{try{return window.context||null}catch(t){return t}}})})}const pb="earth";for(var Vr=256,Hf=[],Wf=256,ti;Vr--;)Hf[Vr]=(Vr+256).toString(16).substring(1);function gb(e){var r=0,t=11;if(!ti||Vr+t>Wf*2)for(ti="",Vr=0;r<Wf;r++)ti+=Hf[Math.random()*256|0];return ti.substring(Vr,Vr+++t)}var Yf="@webext-core/messaging/window",Gf="@webext-core/messaging/window/response";function rt(e){const r=e.namespace,t=gb();let a=[];const s=(c,d)=>new Promise(g=>{const f=_=>{_.data.type===Gf&&_.data.namespace===r&&_.data.instanceId!==t&&_.data.message.type===c.type&&(g(_.data.response),p())},p=()=>window.removeEventListener("message",f);a.push(p),window.addEventListener("message",f),window.postMessage({type:Yf,message:c,senderOrigin:location.origin,namespace:r,instanceId:t},d??"*")}),o=Vo(ma(ga({},e),{sendMessage(c,d){return s(c,d)},addRootListener(c){const d=g=>Zo(this,null,function*(){if(g.data.type!==Yf||g.data.namespace!==r||g.data.instanceId===t)return;const f=yield c(g.data.message);window.postMessage({type:Gf,response:f,instanceId:t,message:g.data.message,namespace:r},g.data.senderOrigin)});return window.addEventListener("message",d),()=>window.removeEventListener("message",d)},verifyMessageData(c){return structuredClone(c)}}));return ma(ga({},o),{removeAllListeners(){o.removeAllListeners(),a.forEach(c=>c()),a=[]}})}rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"});const mb="52dsy",Qf="doudiandaifa",wb=e=>{const r=/(?:52dsy|52hqb)\.com/.test(e),t=r?"//(.*).(?:52dsy|52hqb).com/(?:new/good/)?(\\d+)(?:\\.html)?":"//(.*)/(?:new/good/)?(\\d+)(?:\\.html)?",a=new RegExp(t),s=e.match(a),o=r?mb:Qf,c=e.includes("52hqb.com")?"hqb":(s==null?void 0:s[1])||"";return{itemUrl:e,itemId:s==null?void 0:s[2],site:c,source:o,postFee:""}},Kf=(e=location.href)=>{const r=location.host;return new RegExp(`^https?://${r}/(?:new/good/)?(\\d+)(?:\\.html)?$`).test(e)},yb=(e=location.href)=>{const r=location.host;return[new RegExp(`${r}\\/(goodsList\\.html|shop\\/|spotsGoodsList\\.html|downList\\.html|activity\\/\\d+)`)].some(a=>a.test(e))},vb=e=>Kf(e),Zf=e=>it({url:"/open/plugin/getSourcePlatformConfig",method:"GET",params:e,cacheKey:"local:register52DsyContentScript"}),xb=Object.freeze(Object.defineProperty({__proto__:null,getPluginConfig:Zf,getRegister52DsyConfig:async e=>{const{sourcePlatformConfig:{supportDomainList:r}}=await Zf({source:Qf,...e});return{id:"52dsy-collect",matches:r.map(a=>`*://${a}/*`),js:["content-scripts/collect-platform-52dsy-content.js"],runAt:"document_end"}},getSourceInfoByItemUrl:wb,isProductLink:vb,matchDetailPage:Kf,matchListPage:yb},Symbol.toStringTag,{value:"Module"}));rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),rt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"});async function bb(e){const t=(await le.scripting.getRegisteredContentScripts()).flatMap(a=>a.matches||[]);if(e.length>0){const a=e.map(s=>{const{id:o,js:c,css:d=[],matches:g,runAt:f="document_end",...p}=s,_=g.filter(b=>!t.includes(b));return{id:o,css:["assets/platform-base-utils.css",...d],js:["platform-base-utils.js",...c],matches:_,runAt:f,...p}});await le.scripting.registerContentScripts(a)}}async function Tb(){const e=async()=>{const{getRegister52DsyConfig:r}=xb,a=[await r({tag:pb})];await bb(a)};le.runtime.onInstalled.addListener(()=>{e()}),le.management.onEnabled.addListener(r=>{r.id===le.runtime.id&&e()})}const _b=$r(()=>{jx(),Px(),zx(),cx(),dx(),yx(),$x(),xx(),ub(),fb(),Qd(),db(),hb(),Ix(),lb(),Tb()});function CT(){}function ri(e,...r){}const Sb={debug:(...e)=>ri(console.debug,...e),log:(...e)=>ri(console.log,...e),warn:(...e)=>ri(console.warn,...e),error:(...e)=>ri(console.error,...e)};let So;try{So=_b.main(),So instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(e){throw Sb.error("The background crashed on startup!"),e}return So})();

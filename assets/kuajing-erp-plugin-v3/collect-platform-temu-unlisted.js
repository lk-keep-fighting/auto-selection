var Mt=Object.defineProperty;var It=(m,b,d)=>b in m?Mt(m,b,{enumerable:!0,configurable:!0,writable:!0,value:d}):m[b]=d;var Pe=(m,b,d)=>It(m,typeof b!="symbol"?b+"":b,d);var collectPlatformTemuUnlisted=(function(){"use strict";var Oe,Ee;var m=typeof global=="object"&&global&&global.Object===Object&&global,b=typeof self=="object"&&self&&self.Object===Object&&self,d=m||b||Function("return this")(),A=d.Symbol,z=Object.prototype,Ae=z.hasOwnProperty,$e=z.toString,_=A?A.toStringTag:void 0;function Me(e){var r=Ae.call(e,_),t=e[_];try{e[_]=void 0;var i=!0}catch{}var f=$e.call(e);return i&&(r?e[_]=t:delete e[_]),f}var Ie=Object.prototype,Ce=Ie.toString;function Le(e){return Ce.call(e)}var Ne="[object Null]",Re="[object Undefined]",G=A?A.toStringTag:void 0;function x(e){return e==null?e===void 0?Re:Ne:G&&G in Object(e)?Me(e):Le(e)}function C(e){return e!=null&&typeof e=="object"}var De=Array.isArray;function H(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var ke="[object AsyncFunction]",Fe="[object Function]",Ue="[object GeneratorFunction]",Be="[object Proxy]";function q(e){if(!H(e))return!1;var r=x(e);return r==Fe||r==Ue||r==ke||r==Be}var L=d["__core-js_shared__"],X=(function(){var e=/[^.]+$/.exec(L&&L.keys&&L.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Ve(e){return!!X&&X in e}var Je=Function.prototype,We=Je.toString;function w(e){if(e!=null){try{return We.call(e)}catch{}try{return e+""}catch{}}return""}var ze=/[\\^$.*+?()[\]{}|]/g,Ge=/^\[object .+?Constructor\]$/,He=Function.prototype,qe=Object.prototype,Xe=He.toString,Ye=qe.hasOwnProperty,Ke=RegExp("^"+Xe.call(Ye).replace(ze,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qe(e){if(!H(e)||Ve(e))return!1;var r=q(e)?Ke:Ge;return r.test(w(e))}function Ze(e,r){return e==null?void 0:e[r]}function O(e,r){var t=Ze(e,r);return Qe(t)?t:void 0}var N=O(d,"WeakMap"),er=9007199254740991;function Y(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=er}function rr(e){return e!=null&&Y(e.length)&&!q(e)}var tr=Object.prototype;function K(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||tr;return e===t}var nr="[object Arguments]";function Q(e){return C(e)&&x(e)==nr}var Z=Object.prototype,or=Z.hasOwnProperty,ar=Z.propertyIsEnumerable,sr=Q((function(){return arguments})())?Q:function(e){return C(e)&&or.call(e,"callee")&&!ar.call(e,"callee")};function ir(){return!1}var ee=typeof exports=="object"&&exports&&!exports.nodeType&&exports,re=ee&&typeof module=="object"&&module&&!module.nodeType&&module,cr=re&&re.exports===ee,te=cr?d.Buffer:void 0,ur=te?te.isBuffer:void 0,lr=ur||ir,pr="[object Arguments]",fr="[object Array]",gr="[object Boolean]",dr="[object Date]",yr="[object Error]",br="[object Function]",mr="[object Map]",wr="[object Number]",jr="[object Object]",Tr="[object RegExp]",vr="[object Set]",hr="[object String]",_r="[object WeakMap]",xr="[object ArrayBuffer]",Or="[object DataView]",Er="[object Float32Array]",Sr="[object Float64Array]",Pr="[object Int8Array]",Ar="[object Int16Array]",$r="[object Int32Array]",Mr="[object Uint8Array]",Ir="[object Uint8ClampedArray]",Cr="[object Uint16Array]",Lr="[object Uint32Array]",s={};s[Er]=s[Sr]=s[Pr]=s[Ar]=s[$r]=s[Mr]=s[Ir]=s[Cr]=s[Lr]=!0,s[pr]=s[fr]=s[xr]=s[gr]=s[Or]=s[dr]=s[yr]=s[br]=s[mr]=s[wr]=s[jr]=s[Tr]=s[vr]=s[hr]=s[_r]=!1;function Nr(e){return C(e)&&Y(e.length)&&!!s[x(e)]}function Rr(e){return function(r){return e(r)}}var ne=typeof exports=="object"&&exports&&!exports.nodeType&&exports,E=ne&&typeof module=="object"&&module&&!module.nodeType&&module,Dr=E&&E.exports===ne,R=Dr&&m.process,oe=(function(){try{var e=E&&E.require&&E.require("util").types;return e||R&&R.binding&&R.binding("util")}catch{}})(),ae=oe&&oe.isTypedArray,kr=ae?Rr(ae):Nr;function Fr(e,r){return function(t){return e(r(t))}}var Ur=Fr(Object.keys,Object),Br=Object.prototype,Vr=Br.hasOwnProperty;function Jr(e){if(!K(e))return Ur(e);var r=[];for(var t in Object(e))Vr.call(e,t)&&t!="constructor"&&r.push(t);return r}var D=O(d,"Map"),k=O(d,"DataView"),F=O(d,"Promise"),U=O(d,"Set"),se="[object Map]",Wr="[object Object]",ie="[object Promise]",ce="[object Set]",ue="[object WeakMap]",le="[object DataView]",zr=w(k),Gr=w(D),Hr=w(F),qr=w(U),Xr=w(N),j=x;(k&&j(new k(new ArrayBuffer(1)))!=le||D&&j(new D)!=se||F&&j(F.resolve())!=ie||U&&j(new U)!=ce||N&&j(new N)!=ue)&&(j=function(e){var r=x(e),t=r==Wr?e.constructor:void 0,i=t?w(t):"";if(i)switch(i){case zr:return le;case Gr:return se;case Hr:return ie;case qr:return ce;case Xr:return ue}return r});var Yr="[object Map]",Kr="[object Set]",Qr=Object.prototype,Zr=Qr.hasOwnProperty;function et(e){if(e==null)return!0;if(rr(e)&&(De(e)||typeof e=="string"||typeof e.splice=="function"||lr(e)||kr(e)||sr(e)))return!e.length;var r=j(e);if(r==Yr||r==Kr)return!e.size;if(K(e))return!Jr(e).length;for(var t in e)if(Zr.call(e,t))return!1;return!0}((Ee=(Oe=globalThis.browser)==null?void 0:Oe.runtime)==null?void 0:Ee.id)==null?globalThis.chrome:globalThis.browser;const rt=e=>new Promise(r=>{setTimeout(()=>{r()},e)}),tt=(e,r)=>new Promise((t,i)=>{const{count:f,interval:p=1e3}=r;let n=f;const c=async()=>{try{const a=await e();t(a)}catch(a){n&&n>0?(n--,p&&await rt(p),c()):i(a)}};c()});function h(e){let r=e.length;for(;--r>=0;)e[r]=0}const nt=3,ot=258,pe=29,at=256+1+pe,fe=30,st=512,it=new Array((at+2)*2);h(it);const ct=new Array(fe*2);h(ct);const ut=new Array(st);h(ut);const lt=new Array(ot-nt+1);h(lt);const pt=new Array(pe);h(pt);const ft=new Array(fe);h(ft);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}const B=new Uint8Array(256);for(let e=0;e<256;e++)B[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;B[254]=B[254]=1;function gt(e){return e==null||typeof e=="function"?{main:e}:e}const dt=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),yt=new Map(dt);class V extends Error{constructor(t){super(V._prepareSuperMessage(t));Pe(this,"name","NonError")}static _prepareSuperMessage(t){try{return JSON.stringify(t)}catch{return String(t)}}}const bt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],J=new WeakSet,mt=e=>{J.add(e);const r=e.toJSON();return J.delete(e),r},ge=e=>yt.get(e)??Error,W=({from:e,seen:r,to:t,forceEnumerable:i,maxDepth:f,depth:p,useToJSON:n,serialize:c})=>{if(!t)if(Array.isArray(e))t=[];else if(!c&&de(e)){const o=ge(e.name);t=new o}else t={};if(r.push(e),p>=f)return t;if(n&&typeof e.toJSON=="function"&&!J.has(e))return mt(e);const a=o=>W({from:o,seen:[...r],forceEnumerable:i,maxDepth:f,depth:p,useToJSON:n,serialize:c});for(const[o,u]of Object.entries(e)){if(u&&u instanceof Uint8Array&&u.constructor.name==="Buffer"){t[o]="[object Buffer]";continue}if(u!==null&&typeof u=="object"&&typeof u.pipe=="function"){t[o]="[object Stream]";continue}if(typeof u!="function"){if(!u||typeof u!="object"){try{t[o]=u}catch{}continue}if(!r.includes(e[o])){p++,t[o]=a(e[o]);continue}t[o]="[Circular]"}}for(const{property:o,enumerable:u}of bt)typeof e[o]<"u"&&e[o]!==null&&Object.defineProperty(t,o,{value:de(e[o])?a(e[o]):e[o],enumerable:i?!0:u,configurable:!0,writable:!0});return t};function wt(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY,useToJSON:i=!0}=r;return typeof e=="object"&&e!==null?W({from:e,seen:[],forceEnumerable:!0,maxDepth:t,depth:0,useToJSON:i,serialize:!0}):typeof e=="function"?`[Function: ${e.name||"anonymous"}]`:e}function jt(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if(Tt(e)){const i=ge(e.name);return W({from:e,seen:[],to:new i,maxDepth:t,depth:0,serialize:!1})}return new V(e)}function de(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function Tt(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var vt=Object.defineProperty,ht=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,ye=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Ot=Object.prototype.propertyIsEnumerable,be=(e,r,t)=>r in e?vt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,me=(e,r)=>{for(var t in r||(r={}))xt.call(r,t)&&be(e,t,r[t]);if(ye)for(var t of ye(r))Ot.call(r,t)&&be(e,t,r[t]);return e},we=(e,r)=>ht(e,_t(r)),je=(e,r,t)=>new Promise((i,f)=>{var p=a=>{try{c(t.next(a))}catch(o){f(o)}},n=a=>{try{c(t.throw(a))}catch(o){f(o)}},c=a=>a.done?i(a.value):Promise.resolve(a.value).then(p,n);c((t=t.apply(e,r)).next())});function Et(e){let r,t={};function i(){Object.entries(t).length===0&&(r==null||r(),r=void 0)}let f=Math.floor(Math.random()*1e4);function p(){return f++}return{sendMessage(n,c,...a){return je(this,null,function*(){var o,u,l,S;const P={id:p(),type:n,data:c,timestamp:Date.now()},v=(u=yield(o=e.verifyMessageData)==null?void 0:o.call(e,P))!=null?u:P;(l=e.logger)==null||l.debug(`[messaging] sendMessage {id=${v.id}} ─ᐅ`,v,...a);const I=yield e.sendMessage(v,...a),{res:g,err:y}=I??{err:new Error("No response")};if((S=e.logger)==null||S.debug(`[messaging] sendMessage {id=${v.id}} ᐊ─`,{res:g,err:y}),y!=null)throw jt(y);return g})},onMessage(n,c){var a,o,u;if(r==null&&((a=e.logger)==null||a.debug(`[messaging] "${n}" initialized the message listener for this context`),r=e.addRootListener(l=>{var S,P;if(typeof l.type!="string"||typeof l.timestamp!="number"){if(e.breakError)return;const g=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(l)}`);throw(S=e.logger)==null||S.error(g),g}(P=e==null?void 0:e.logger)==null||P.debug("[messaging] Received message",l);const v=t[l.type];if(v==null)return;const I=v(l);return Promise.resolve(I).then(g=>{var y,Se;return(Se=(y=e.verifyMessageData)==null?void 0:y.call(e,g))!=null?Se:g}).then(g=>{var y;return(y=e==null?void 0:e.logger)==null||y.debug(`[messaging] onMessage {id=${l.id}} ─ᐅ`,{res:g}),{res:g}}).catch(g=>{var y;return(y=e==null?void 0:e.logger)==null||y.debug(`[messaging] onMessage {id=${l.id}} ─ᐅ`,{err:g}),{err:wt(g)}})})),t[n]!=null){const l=Error(`[messaging] In this JS context, only one listener can be setup for ${n}`);throw(o=e.logger)==null||o.error(l),l}return t[n]=c,(u=e.logger)==null||u.log(`[messaging] Added listener for ${n}`),()=>{delete t[n],i()}},removeAllListeners(){Object.keys(t).forEach(n=>{delete t[n]}),i()}}}for(var T=256,Te=[],ve=256,$;T--;)Te[T]=(T+256).toString(16).substring(1);function St(e){var r=0,t=11;if(!$||T+t>ve*2)for($="",T=0;r<ve;r++)$+=Te[Math.random()*256|0];return $.substring(T,T+++t)}var he="@webext-core/messaging/window",_e="@webext-core/messaging/window/response";function Pt(e){const r=e.namespace,t=St();let i=[];const f=(n,c)=>new Promise(a=>{const o=l=>{l.data.type===_e&&l.data.namespace===r&&l.data.instanceId!==t&&l.data.message.type===n.type&&(a(l.data.response),u())},u=()=>window.removeEventListener("message",o);i.push(u),window.addEventListener("message",o),window.postMessage({type:he,message:n,senderOrigin:location.origin,namespace:r,instanceId:t},c??"*")}),p=Et(we(me({},e),{sendMessage(n,c){return f(n,c)},addRootListener(n){const c=a=>je(this,null,function*(){if(a.data.type!==he||a.data.namespace!==r||a.data.instanceId===t)return;const o=yield n(a.data.message);window.postMessage({type:_e,response:o,instanceId:t,message:a.data.message,namespace:r},a.data.senderOrigin)});return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},verifyMessageData(n){return structuredClone(n)}}));return we(me({},p),{removeAllListeners(){p.removeAllListeners(),i.forEach(n=>n()),i=[]}})}const xe=Pt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),At=gt({main(){const e=async()=>{let r;try{await tt(()=>{var t,i,f,p,n;return r=((n=(p=(f=(i=(t=window==null?void 0:window.__INITIAL_PROPS__)==null?void 0:t.store)==null?void 0:i.webLayoutData)==null?void 0:f.headerData)==null?void 0:p.region)==null?void 0:n.regionInfo)||{},et(r)?Promise.reject():Promise.resolve()},{count:5,interval:1e3})}finally{xe.sendMessage("sendRegionInfo",JSON.parse(JSON.stringify(r)))}};xe.onMessage("getRegionInfo",e)}});function Lt(){}function M(e,...r){}const $t={debug:(...e)=>M(console.debug,...e),log:(...e)=>M(console.log,...e),warn:(...e)=>M(console.warn,...e),error:(...e)=>M(console.error,...e)};return(async()=>{try{return await At.main()}catch(e){throw $t.error('The unlisted script "collect-platform-temu-unlisted" crashed on startup!',e),e}})()})();
collectPlatformTemuUnlisted;